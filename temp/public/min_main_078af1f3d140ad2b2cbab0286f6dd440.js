/**** start overview of included js files *****/

/* list of files for rank:30dependancy */
/* Array
(
    [0] => vendor_bundled/vendor/components/jquery-migrate/jquery-migrate.min.js
    [1] => vendor_bundled/vendor/codemirror/codemirror/lib/codemirror.js
)
 */

/* rank:30dependancy - minify:disabled - adding raw file. vendor_bundled/vendor/components/jquery-migrate/jquery-migrate.min.js */

/* rank:30dependancy - minify:ok. vendor_bundled/vendor/codemirror/codemirror/lib/codemirror.js */

/* list of files for rank:40external */
/*  */

/* list of files for rank:50standard */
/* Array
(
    [0] => temp/public/codemirror_modes.js
    [1] => vendor_bundled/vendor/npm-asset/popper.js/dist/umd/popper.js
    [2] => vendor_bundled/vendor/twbs/bootstrap/dist/js/bootstrap.js
    [3] => lib/jquery_tiki/tiki-bootstrapmodalfix.js
    [4] => lib/jquery_tiki/iconsets.js
    [5] => 
    [6] => lib/tiki-js.js
    [7] => vendor_bundled/vendor/studio-42/elfinder/js/elfinder.min.js
    [8] => lib/jquery_tiki/elfinder/tiki-elfinder.js
    [9] => lib/jquery_tiki/tiki-jquery.js
    [10] => vendor_bundled/vendor/jquery-plugins/jquery-json/src/jquery.json.js
    [11] => vendor_bundled/vendor/codemirror/codemirror/addon/search/searchcursor.js
    [12] => vendor_bundled/vendor/codemirror/codemirror/addon/mode/overlay.js
    [13] => lib/codemirror_tiki/codemirror_tiki.js
    [14] => vendor_bundled/vendor/jquery-plugins/infinitecarousel/jquery.infinitecarousel3.js
    [15] => lib/jquery_tiki/tiki-confirm.js
    [16] => lib/ajax/autosave.js
    [17] => vendor_bundled/vendor/jquery/jquery-timepicker-addon/dist/jquery-ui-timepicker-addon.js
    [18] => vendor_bundled/vendor/jquery-plugins/superfish/dist/js/hoverIntent.js
    [19] => vendor_bundled/vendor/drmonty/smartmenus/js/jquery.smartmenus.js
    [20] => vendor_bundled/vendor/drmonty/smartmenus/js/jquery.smartmenus.bootstrap-4.js
    [21] => vendor_bundled/vendor/jquery-plugins/tagcanvas/jquery.tagcanvas.js
    [22] => vendor_bundled/vendor/jquery-plugins/colorbox/jquery.colorbox.js
    [23] => vendor_bundled/vendor/bower-asset/swfobject/swfobject/swfobject.js
    [24] => vendor_bundled/vendor/jquery-plugins/jquery-validation/dist/jquery.validate.js
    [25] => lib/validators/validator_tiki.js
    [26] => vendor_bundled/vendor/jquery-plugins/async/jquery.async.js
    [27] => vendor_bundled/vendor/jquery-plugins/treetable/jquery.treetable.js
    [28] => vendor_bundled/vendor/cwspear/bootstrap-hover-dropdown/bootstrap-hover-dropdown.js
    [29] => lib/jquery_tiki/files.js
    [30] => lib/jquery_tiki/tiki-trackers.js
    [31] => lib/jquery_tiki/tiki-tasks.js
    [32] => lib/jquery_tiki/pluginedit.js
)
 */

/* rank:50standard - minify:ok. temp/public/codemirror_modes.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/npm-asset/popper.js/dist/umd/popper.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/twbs/bootstrap/dist/js/bootstrap.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-bootstrapmodalfix.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/iconsets.js */

/* rank:50standard - minify:disabled - adding raw file.  */

/* rank:50standard - minify:ok. lib/tiki-js.js */

/* rank:50standard - minify:disabled - adding raw file. vendor_bundled/vendor/studio-42/elfinder/js/elfinder.min.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/elfinder/tiki-elfinder.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-jquery.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/jquery-json/src/jquery.json.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/codemirror/codemirror/addon/search/searchcursor.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/codemirror/codemirror/addon/mode/overlay.js */

/* rank:50standard - minify:ok. lib/codemirror_tiki/codemirror_tiki.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/infinitecarousel/jquery.infinitecarousel3.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-confirm.js */

/* rank:50standard - minify:ok. lib/ajax/autosave.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/jquery-timepicker-addon/dist/jquery-ui-timepicker-addon.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/superfish/dist/js/hoverIntent.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/drmonty/smartmenus/js/jquery.smartmenus.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/drmonty/smartmenus/js/jquery.smartmenus.bootstrap-4.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/tagcanvas/jquery.tagcanvas.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/colorbox/jquery.colorbox.js */

/* rank:50standard - minify:disabled - adding raw file. vendor_bundled/vendor/bower-asset/swfobject/swfobject/swfobject.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/jquery-validation/dist/jquery.validate.js */

/* rank:50standard - minify:ok. lib/validators/validator_tiki.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/async/jquery.async.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/treetable/jquery.treetable.js */

/* rank:50standard - minify:ok. vendor_bundled/vendor/cwspear/bootstrap-hover-dropdown/bootstrap-hover-dropdown.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/files.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-trackers.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-tasks.js */

/* rank:50standard - minify:ok. lib/jquery_tiki/pluginedit.js */

/**** end overview of included js files *****/
;
/* rank:30dependancy - minify:disabled - adding raw file. vendor_bundled/vendor/components/jquery-migrate/jquery-migrate.min.js */
/*! jQuery Migrate v3.0.0 | (c) jQuery Foundation and other contributors | jquery.org/license */
"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b){"use strict";function c(c){var d=b.console;e[c]||(e[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function d(a,b,d,e){Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return c(e),d}})}a.migrateVersion="3.0.0",function(){var c=b.console&&b.console.log&&function(){b.console.log.apply(b.console,arguments)},d=/^[12]\./;c&&(a&&!d.test(a.fn.jquery)||c("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),a.migrateWarnings&&c("JQMIGRATE: Migrate plugin loaded multiple times"),c("JQMIGRATE: Migrate is installed"+(a.migrateMute?"":" with logging active")+", version "+a.migrateVersion))}();var e={};a.migrateWarnings=[],void 0===a.migrateTrace&&(a.migrateTrace=!0),a.migrateReset=function(){e={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&c("jQuery is not compatible with Quirks Mode");var f=a.fn.init,g=a.isNumeric,h=a.find,i=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,j=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;a.fn.init=function(a){var b=Array.prototype.slice.call(arguments);return"string"==typeof a&&"#"===a&&(c("jQuery( '#' ) is not a valid selector"),b[0]=[]),f.apply(this,b)},a.fn.init.prototype=a.fn,a.find=function(a){var b=Array.prototype.slice.call(arguments);if("string"==typeof a&&i.test(a))try{document.querySelector(a)}catch(d){a=a.replace(j,function(a,b,c,d){return"["+b+c+'"'+d+'"]'});try{document.querySelector(a),c("Attribute selector with '#' must be quoted: "+b[0]),b[0]=a}catch(e){c("Attribute selector with '#' was not fixed: "+b[0])}}return h.apply(this,b)};var k;for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&(a.find[k]=h[k]);a.fn.size=function(){return c("jQuery.fn.size() is deprecated; use the .length property"),this.length},a.parseJSON=function(){return c("jQuery.parseJSON is deprecated; use JSON.parse"),JSON.parse.apply(null,arguments)},a.isNumeric=function(b){function d(b){var c=b&&b.toString();return!a.isArray(b)&&c-parseFloat(c)+1>=0}var e=g(b),f=d(b);return e!==f&&c("jQuery.isNumeric() should not be called on constructed objects"),f},d(a,"unique",a.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort"),d(a.expr,"filters",a.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos"),d(a.expr,":",a.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var l=a.ajax;a.ajax=function(){var a=l.apply(this,arguments);return a.promise&&(d(a,"success",a.done,"jQXHR.success is deprecated and removed"),d(a,"error",a.fail,"jQXHR.error is deprecated and removed"),d(a,"complete",a.always,"jQXHR.complete is deprecated and removed")),a};var m=a.fn.removeAttr,n=a.fn.toggleClass,o=/\S+/g;a.fn.removeAttr=function(b){var d=this;return a.each(b.match(o),function(b,e){a.expr.match.bool.test(e)&&(c("jQuery.fn.removeAttr no longer sets boolean properties: "+e),d.prop(e,!1))}),m.apply(this,arguments)},a.fn.toggleClass=function(b){return void 0!==b&&"boolean"!=typeof b?n.apply(this,arguments):(c("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var c=this.getAttribute&&this.getAttribute("class")||"";c&&a.data(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||b===!1?"":a.data(this,"__className__")||"")}))};var p=!1;a.swap&&a.each(["height","width","reliableMarginRight"],function(b,c){var d=a.cssHooks[c]&&a.cssHooks[c].get;d&&(a.cssHooks[c].get=function(){var a;return p=!0,a=d.apply(this,arguments),p=!1,a})}),a.swap=function(a,b,d,e){var f,g,h={};p||c("jQuery.swap() is undocumented and deprecated");for(g in b)h[g]=a.style[g],a.style[g]=b[g];f=d.apply(a,e||[]);for(g in b)a.style[g]=h[g];return f};var q=a.data;a.data=function(b,d,e){var f;return d&&d!==a.camelCase(d)&&(f=a.hasData(b)&&q.call(this,b),f&&d in f)?(c("jQuery.data() always sets/gets camelCased names: "+d),arguments.length>2&&(f[d]=e),f[d]):q.apply(this,arguments)};var r=a.Tween.prototype.run;a.Tween.prototype.run=function(b){a.easing[this.easing].length>1&&(c('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument'),a.easing[this.easing]=a.easing[this.easing].bind(a.easing,b,this.options.duration*b,0,1,this.options.duration)),r.apply(this,arguments)};var s=a.fn.load,t=a.event.fix;a.event.props=[],a.event.fixHooks={},a.event.fix=function(b){var d,e=b.type,f=this.fixHooks[e],g=a.event.props;if(g.length)for(c("jQuery.event.props are deprecated and removed: "+g.join());g.length;)a.event.addProp(g.pop());if(f&&!f._migrated_&&(f._migrated_=!0,c("jQuery.event.fixHooks are deprecated and removed: "+e),(g=f.props)&&g.length))for(;g.length;)a.event.addProp(g.pop());return d=t.call(this,b),f&&f.filter?f.filter(d,b):d},a.each(["load","unload","error"],function(b,d){a.fn[d]=function(){var a=Array.prototype.slice.call(arguments,0);return"load"===d&&"string"==typeof a[0]?s.apply(this,a):(c("jQuery.fn."+d+"() is deprecated"),a.splice(0,0,d),arguments.length?this.on.apply(this,a):(this.triggerHandler.apply(this,a),this))}}),a(function(){a(document).triggerHandler("ready")}),a.event.special.ready={setup:function(){this===document&&c("'ready' event is deprecated")}},a.fn.extend({bind:function(a,b,d){return c("jQuery.fn.bind() is deprecated"),this.on(a,null,b,d)},unbind:function(a,b){return c("jQuery.fn.unbind() is deprecated"),this.off(a,null,b)},delegate:function(a,b,d,e){return c("jQuery.fn.delegate() is deprecated"),this.on(b,a,d,e)},undelegate:function(a,b,d){return c("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(a,"**"):this.off(b,a||"**",d)}});var u=a.fn.offset;a.fn.offset=function(){var b,d=this[0],e={top:0,left:0};return d&&d.nodeType?(b=(d.ownerDocument||document).documentElement,a.contains(b,d)?u.apply(this,arguments):(c("jQuery.fn.offset() requires an element connected to a document"),e)):(c("jQuery.fn.offset() requires a valid DOM element"),e)};var v=a.param;a.param=function(b,d){var e=a.ajaxSettings&&a.ajaxSettings.traditional;return void 0===d&&e&&(c("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),d=e),v.call(this,b,d)};var w=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return c("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)};var x=a.Deferred,y=[["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),"rejected"],["notify","progress",a.Callbacks("memory"),a.Callbacks("memory")]];a.Deferred=function(b){var d=x(),e=d.promise();return d.pipe=e.pipe=function(){var b=arguments;return c("deferred.pipe() is deprecated"),a.Deferred(function(c){a.each(y,function(f,g){var h=a.isFunction(b[f])&&b[f];d[g[1]](function(){var b=h&&h.apply(this,arguments);b&&a.isFunction(b.promise)?b.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g[0]+"With"](this===e?c.promise():this,h?[b]:arguments)})}),b=null}).promise()},b&&b.call(d,d),d}}(jQuery,window);;
/* rank:30dependancy - minify:ok. vendor_bundled/vendor/codemirror/codemirror/lib/codemirror.js */
(function(mod){if(typeof exports=="object"&&typeof module=="object")
module.exports=mod();else if(typeof define=="function"&&define.amd)
return define([],mod);else(this||window).CodeMirror=mod()})(function(){"use strict";var userAgent=navigator.userAgent;var platform=navigator.platform;var gecko=/gecko\/\d/i.test(userAgent);var ie_upto10=/MSIE \d/.test(userAgent);var ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);var ie=ie_upto10||ie_11up;var ie_version=ie&&(ie_upto10?document.documentMode||6:ie_11up[1]);var webkit=/WebKit\//.test(userAgent);var qtwebkit=webkit&&/Qt\/\d+\.\d+/.test(userAgent);var chrome=/Chrome\//.test(userAgent);var presto=/Opera\//.test(userAgent);var safari=/Apple Computer/.test(navigator.vendor);var mac_geMountainLion=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);var phantom=/PhantomJS/.test(userAgent);var ios=/AppleWebKit/.test(userAgent)&&/Mobile\/\w+/.test(userAgent);var mobile=ios||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);var mac=ios||/Mac/.test(platform);var chromeOS=/\bCrOS\b/.test(userAgent);var windows=/win/i.test(platform);var presto_version=presto&&userAgent.match(/Version\/(\d*\.\d*)/);if(presto_version)presto_version=Number(presto_version[1]);if(presto_version&&presto_version>=15){presto=!1;webkit=!0}
var flipCtrlCmd=mac&&(qtwebkit||presto&&(presto_version==null||presto_version<12.11));var captureRightClick=gecko||(ie&&ie_version>=9);var sawReadOnlySpans=!1,sawCollapsedSpans=!1;function CodeMirror(place,options){if(!(this instanceof CodeMirror))return new CodeMirror(place,options);this.options=options=options?copyObj(options):{};copyObj(defaults,options,!1);setGuttersForLineNumbers(options);var doc=options.value;if(typeof doc=="string")doc=new Doc(doc,options.mode,null,options.lineSeparator);this.doc=doc;var input=new CodeMirror.inputStyles[options.inputStyle](this);var display=this.display=new Display(place,doc,input);display.wrapper.CodeMirror=this;updateGutters(this);themeChanged(this);if(options.lineWrapping)
this.display.wrapper.className+=" CodeMirror-wrap";if(options.autofocus&&!mobile)display.input.focus();initScrollbars(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Delayed(),keySeq:null,specialChars:null};var cm=this;if(ie&&ie_version<11)setTimeout(function(){cm.display.input.reset(!0)},20);registerEventHandlers(this);ensureGlobalHandlers();startOperation(this);this.curOp.forceUpdate=!0;attachDoc(this,doc);if((options.autofocus&&!mobile)||cm.hasFocus())
setTimeout(bind(onFocus,this),20);else onBlur(this);for(var opt in optionHandlers)if(optionHandlers.hasOwnProperty(opt))
optionHandlers[opt](this,options[opt],Init);maybeUpdateLineNumberWidth(this);if(options.finishInit)options.finishInit(this);for(var i=0;i<initHooks.length;++i)initHooks[i](this);endOperation(this);if(webkit&&options.lineWrapping&&getComputedStyle(display.lineDiv).textRendering=="optimizelegibility")
display.lineDiv.style.textRendering="auto"}
function Display(place,doc,input){var d=this;this.input=input;d.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler");d.scrollbarFiller.setAttribute("cm-not-content","true");d.gutterFiller=elt("div",null,"CodeMirror-gutter-filler");d.gutterFiller.setAttribute("cm-not-content","true");d.lineDiv=elt("div",null,"CodeMirror-code");d.selectionDiv=elt("div",null,null,"position: relative; z-index: 1");d.cursorDiv=elt("div",null,"CodeMirror-cursors");d.measure=elt("div",null,"CodeMirror-measure");d.lineMeasure=elt("div",null,"CodeMirror-measure");d.lineSpace=elt("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");d.mover=elt("div",[elt("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative");d.sizer=elt("div",[d.mover],"CodeMirror-sizer");d.sizerWidth=null;d.heightForcer=elt("div",null,null,"position: absolute; height: "+scrollerGap+"px; width: 1px;");d.gutters=elt("div",null,"CodeMirror-gutters");d.lineGutter=null;d.scroller=elt("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll");d.scroller.setAttribute("tabIndex","-1");d.wrapper=elt("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror");if(ie&&ie_version<8){d.gutters.style.zIndex=-1;d.scroller.style.paddingRight=0}
if(!webkit&&!(gecko&&mobile))d.scroller.draggable=!0;if(place){if(place.appendChild)place.appendChild(d.wrapper);else place(d.wrapper)}
d.viewFrom=d.viewTo=doc.first;d.reportedViewFrom=d.reportedViewTo=doc.first;d.view=[];d.renderedView=null;d.externalMeasured=null;d.viewOffset=0;d.lastWrapHeight=d.lastWrapWidth=0;d.updateLineNumbers=null;d.nativeBarWidth=d.barHeight=d.barWidth=0;d.scrollbarsClipped=!1;d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null;d.alignWidgets=!1;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.maxLine=null;d.maxLineLength=0;d.maxLineChanged=!1;d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null;d.shift=!1;d.selForContextMenu=null;d.activeTouch=null;input.init(d)}
function loadMode(cm){cm.doc.mode=CodeMirror.getMode(cm.options,cm.doc.modeOption);resetModeState(cm)}
function resetModeState(cm){cm.doc.iter(function(line){if(line.stateAfter)line.stateAfter=null;if(line.styles)line.styles=null});cm.doc.frontier=cm.doc.first;startWorker(cm,100);cm.state.modeGen++;if(cm.curOp)regChange(cm)}
function wrappingChanged(cm){if(cm.options.lineWrapping){addClass(cm.display.wrapper,"CodeMirror-wrap");cm.display.sizer.style.minWidth="";cm.display.sizerWidth=null}else{rmClass(cm.display.wrapper,"CodeMirror-wrap");findMaxLine(cm)}
estimateLineHeights(cm);regChange(cm);clearCaches(cm);setTimeout(function(){updateScrollbars(cm)},100)}
function estimateHeight(cm){var th=textHeight(cm.display),wrapping=cm.options.lineWrapping;var perLine=wrapping&&Math.max(5,cm.display.scroller.clientWidth/charWidth(cm.display)-3);return function(line){if(lineIsHidden(cm.doc,line))return 0;var widgetsHeight=0;if(line.widgets)for(var i=0;i<line.widgets.length;i++){if(line.widgets[i].height)widgetsHeight+=line.widgets[i].height}
if(wrapping)
return widgetsHeight+(Math.ceil(line.text.length/perLine)||1)*th;else return widgetsHeight+th}}
function estimateLineHeights(cm){var doc=cm.doc,est=estimateHeight(cm);doc.iter(function(line){var estHeight=est(line);if(estHeight!=line.height)updateLineHeight(line,estHeight)})}
function themeChanged(cm){cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+cm.options.theme.replace(/(^|\s)\s*/g," cm-s-");clearCaches(cm)}
function guttersChanged(cm){updateGutters(cm);regChange(cm);setTimeout(function(){alignHorizontally(cm)},20)}
function updateGutters(cm){var gutters=cm.display.gutters,specs=cm.options.gutters;removeChildren(gutters);for(var i=0;i<specs.length;++i){var gutterClass=specs[i];var gElt=gutters.appendChild(elt("div",null,"CodeMirror-gutter "+gutterClass));if(gutterClass=="CodeMirror-linenumbers"){cm.display.lineGutter=gElt;gElt.style.width=(cm.display.lineNumWidth||1)+"px"}}
gutters.style.display=i?"":"none";updateGutterSpace(cm)}
function updateGutterSpace(cm){var width=cm.display.gutters.offsetWidth;cm.display.sizer.style.marginLeft=width+"px"}
function lineLength(line){if(line.height==0)return 0;var len=line.text.length,merged,cur=line;while(merged=collapsedSpanAtStart(cur)){var found=merged.find(0,!0);cur=found.from.line;len+=found.from.ch-found.to.ch}
cur=line;while(merged=collapsedSpanAtEnd(cur)){var found=merged.find(0,!0);len-=cur.text.length-found.from.ch;cur=found.to.line;len+=cur.text.length-found.to.ch}
return len}
function findMaxLine(cm){var d=cm.display,doc=cm.doc;d.maxLine=getLine(doc,doc.first);d.maxLineLength=lineLength(d.maxLine);d.maxLineChanged=!0;doc.iter(function(line){var len=lineLength(line);if(len>d.maxLineLength){d.maxLineLength=len;d.maxLine=line}})}
function setGuttersForLineNumbers(options){var found=indexOf(options.gutters,"CodeMirror-linenumbers");if(found==-1&&options.lineNumbers){options.gutters=options.gutters.concat(["CodeMirror-linenumbers"])}else if(found>-1&&!options.lineNumbers){options.gutters=options.gutters.slice(0);options.gutters.splice(found,1)}}
function measureForScrollbars(cm){var d=cm.display,gutterW=d.gutters.offsetWidth;var docH=Math.round(cm.doc.height+paddingVert(cm.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:cm.options.fixedGutter?gutterW:0,docHeight:docH,scrollHeight:docH+scrollGap(cm)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:gutterW}}
function NativeScrollbars(place,scroll,cm){this.cm=cm;var vert=this.vert=elt("div",[elt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var horiz=this.horiz=elt("div",[elt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");place(vert);place(horiz);on(vert,"scroll",function(){if(vert.clientHeight)scroll(vert.scrollTop,"vertical")});on(horiz,"scroll",function(){if(horiz.clientWidth)scroll(horiz.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;if(ie&&ie_version<8)this.horiz.style.minHeight=this.vert.style.minWidth="18px"}
NativeScrollbars.prototype=copyObj({update:function(measure){var needsH=measure.scrollWidth>measure.clientWidth+1;var needsV=measure.scrollHeight>measure.clientHeight+1;var sWidth=measure.nativeBarWidth;if(needsV){this.vert.style.display="block";this.vert.style.bottom=needsH?sWidth+"px":"0";var totalHeight=measure.viewHeight-(needsH?sWidth:0);this.vert.firstChild.style.height=Math.max(0,measure.scrollHeight-measure.clientHeight+totalHeight)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}
if(needsH){this.horiz.style.display="block";this.horiz.style.right=needsV?sWidth+"px":"0";this.horiz.style.left=measure.barLeft+"px";var totalWidth=measure.viewWidth-measure.barLeft-(needsV?sWidth:0);this.horiz.firstChild.style.width=(measure.scrollWidth-measure.clientWidth+totalWidth)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}
if(!this.checkedZeroWidth&&measure.clientHeight>0){if(sWidth==0)this.zeroWidthHack();this.checkedZeroWidth=!0}
return{right:needsV?sWidth:0,bottom:needsH?sWidth:0}},setScrollLeft:function(pos){if(this.horiz.scrollLeft!=pos)this.horiz.scrollLeft=pos;if(this.disableHoriz)this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(pos){if(this.vert.scrollTop!=pos)this.vert.scrollTop=pos;if(this.disableVert)this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var w=mac&&!mac_geMountainLion?"12px":"18px";this.horiz.style.height=this.vert.style.width=w;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new Delayed;this.disableVert=new Delayed},enableZeroWidthBar:function(bar,delay){bar.style.pointerEvents="auto";function maybeDisable(){var box=bar.getBoundingClientRect();var elt=document.elementFromPoint(box.left+1,box.bottom-1);if(elt!=bar)bar.style.pointerEvents="none";else delay.set(1000,maybeDisable)}
delay.set(1000,maybeDisable)},clear:function(){var parent=this.horiz.parentNode;parent.removeChild(this.horiz);parent.removeChild(this.vert)}},NativeScrollbars.prototype);function NullScrollbars(){}
NullScrollbars.prototype=copyObj({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},NullScrollbars.prototype);CodeMirror.scrollbarModel={"native":NativeScrollbars,"null":NullScrollbars};function initScrollbars(cm){if(cm.display.scrollbars){cm.display.scrollbars.clear();if(cm.display.scrollbars.addClass)
rmClass(cm.display.wrapper,cm.display.scrollbars.addClass)}
cm.display.scrollbars=new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node){cm.display.wrapper.insertBefore(node,cm.display.scrollbarFiller);on(node,"mousedown",function(){if(cm.state.focused)setTimeout(function(){cm.display.input.focus()},0)});node.setAttribute("cm-not-content","true")},function(pos,axis){if(axis=="horizontal")setScrollLeft(cm,pos);else setScrollTop(cm,pos)},cm);if(cm.display.scrollbars.addClass)
addClass(cm.display.wrapper,cm.display.scrollbars.addClass)}
function updateScrollbars(cm,measure){if(!measure)measure=measureForScrollbars(cm);var startWidth=cm.display.barWidth,startHeight=cm.display.barHeight;updateScrollbarsInner(cm,measure);for(var i=0;i<4&&startWidth!=cm.display.barWidth||startHeight!=cm.display.barHeight;i++){if(startWidth!=cm.display.barWidth&&cm.options.lineWrapping)
updateHeightsInViewport(cm);updateScrollbarsInner(cm,measureForScrollbars(cm));startWidth=cm.display.barWidth;startHeight=cm.display.barHeight}}
function updateScrollbarsInner(cm,measure){var d=cm.display;var sizes=d.scrollbars.update(measure);d.sizer.style.paddingRight=(d.barWidth=sizes.right)+"px";d.sizer.style.paddingBottom=(d.barHeight=sizes.bottom)+"px";d.heightForcer.style.borderBottom=sizes.bottom+"px solid transparent"
if(sizes.right&&sizes.bottom){d.scrollbarFiller.style.display="block";d.scrollbarFiller.style.height=sizes.bottom+"px";d.scrollbarFiller.style.width=sizes.right+"px"}else d.scrollbarFiller.style.display="";if(sizes.bottom&&cm.options.coverGutterNextToScrollbar&&cm.options.fixedGutter){d.gutterFiller.style.display="block";d.gutterFiller.style.height=sizes.bottom+"px";d.gutterFiller.style.width=measure.gutterWidth+"px"}else d.gutterFiller.style.display=""}
function visibleLines(display,doc,viewport){var top=viewport&&viewport.top!=null?Math.max(0,viewport.top):display.scroller.scrollTop;top=Math.floor(top-paddingTop(display));var bottom=viewport&&viewport.bottom!=null?viewport.bottom:top+display.wrapper.clientHeight;var from=lineAtHeight(doc,top),to=lineAtHeight(doc,bottom);if(viewport&&viewport.ensure){var ensureFrom=viewport.ensure.from.line,ensureTo=viewport.ensure.to.line;if(ensureFrom<from){from=ensureFrom;to=lineAtHeight(doc,heightAtLine(getLine(doc,ensureFrom))+display.wrapper.clientHeight)}else if(Math.min(ensureTo,doc.lastLine())>=to){from=lineAtHeight(doc,heightAtLine(getLine(doc,ensureTo))-display.wrapper.clientHeight);to=ensureTo}}
return{from:from,to:Math.max(to,from+1)}}
function alignHorizontally(cm){var display=cm.display,view=display.view;if(!display.alignWidgets&&(!display.gutters.firstChild||!cm.options.fixedGutter))return;var comp=compensateForHScroll(display)-display.scroller.scrollLeft+cm.doc.scrollLeft;var gutterW=display.gutters.offsetWidth,left=comp+"px";for(var i=0;i<view.length;i++)if(!view[i].hidden){if(cm.options.fixedGutter){if(view[i].gutter)
view[i].gutter.style.left=left;if(view[i].gutterBackground)
view[i].gutterBackground.style.left=left}
var align=view[i].alignable;if(align)for(var j=0;j<align.length;j++)
align[j].style.left=left}
if(cm.options.fixedGutter)
display.gutters.style.left=(comp+gutterW)+"px"}
function maybeUpdateLineNumberWidth(cm){if(!cm.options.lineNumbers)return!1;var doc=cm.doc,last=lineNumberFor(cm.options,doc.first+doc.size-1),display=cm.display;if(last.length!=display.lineNumChars){var test=display.measure.appendChild(elt("div",[elt("div",last)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var innerW=test.firstChild.offsetWidth,padding=test.offsetWidth-innerW;display.lineGutter.style.width="";display.lineNumInnerWidth=Math.max(innerW,display.lineGutter.offsetWidth-padding)+1;display.lineNumWidth=display.lineNumInnerWidth+padding;display.lineNumChars=display.lineNumInnerWidth?last.length:-1;display.lineGutter.style.width=display.lineNumWidth+"px";updateGutterSpace(cm);return!0}
return!1}
function lineNumberFor(options,i){return String(options.lineNumberFormatter(i+options.firstLineNumber))}
function compensateForHScroll(display){return display.scroller.getBoundingClientRect().left-display.sizer.getBoundingClientRect().left}
function DisplayUpdate(cm,viewport,force){var display=cm.display;this.viewport=viewport;this.visible=visibleLines(display,cm.doc,viewport);this.editorIsHidden=!display.wrapper.offsetWidth;this.wrapperHeight=display.wrapper.clientHeight;this.wrapperWidth=display.wrapper.clientWidth;this.oldDisplayWidth=displayWidth(cm);this.force=force;this.dims=getDimensions(cm);this.events=[]}
DisplayUpdate.prototype.signal=function(emitter,type){if(hasHandler(emitter,type))
this.events.push(arguments)};DisplayUpdate.prototype.finish=function(){for(var i=0;i<this.events.length;i++)
signal.apply(null,this.events[i]);};function maybeClipScrollbars(cm){var display=cm.display;if(!display.scrollbarsClipped&&display.scroller.offsetWidth){display.nativeBarWidth=display.scroller.offsetWidth-display.scroller.clientWidth;display.heightForcer.style.height=scrollGap(cm)+"px";display.sizer.style.marginBottom=-display.nativeBarWidth+"px";display.sizer.style.borderRightWidth=scrollGap(cm)+"px";display.scrollbarsClipped=!0}}
function updateDisplayIfNeeded(cm,update){var display=cm.display,doc=cm.doc;if(update.editorIsHidden){resetView(cm);return!1}
if(!update.force&&update.visible.from>=display.viewFrom&&update.visible.to<=display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo)&&display.renderedView==display.view&&countDirtyView(cm)==0)
return!1;if(maybeUpdateLineNumberWidth(cm)){resetView(cm);update.dims=getDimensions(cm)}
var end=doc.first+doc.size;var from=Math.max(update.visible.from-cm.options.viewportMargin,doc.first);var to=Math.min(end,update.visible.to+cm.options.viewportMargin);if(display.viewFrom<from&&from-display.viewFrom<20)from=Math.max(doc.first,display.viewFrom);if(display.viewTo>to&&display.viewTo-to<20)to=Math.min(end,display.viewTo);if(sawCollapsedSpans){from=visualLineNo(cm.doc,from);to=visualLineEndNo(cm.doc,to)}
var different=from!=display.viewFrom||to!=display.viewTo||display.lastWrapHeight!=update.wrapperHeight||display.lastWrapWidth!=update.wrapperWidth;adjustView(cm,from,to);display.viewOffset=heightAtLine(getLine(cm.doc,display.viewFrom));cm.display.mover.style.top=display.viewOffset+"px";var toUpdate=countDirtyView(cm);if(!different&&toUpdate==0&&!update.force&&display.renderedView==display.view&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo))
return!1;var focused=activeElt();if(toUpdate>4)display.lineDiv.style.display="none";patchDisplay(cm,display.updateLineNumbers,update.dims);if(toUpdate>4)display.lineDiv.style.display="";display.renderedView=display.view;if(focused&&activeElt()!=focused&&focused.offsetHeight)focused.focus();removeChildren(display.cursorDiv);removeChildren(display.selectionDiv);display.gutters.style.height=display.sizer.style.minHeight=0;if(different){display.lastWrapHeight=update.wrapperHeight;display.lastWrapWidth=update.wrapperWidth;startWorker(cm,400)}
display.updateLineNumbers=null;return!0}
function postUpdateDisplay(cm,update){var viewport=update.viewport;for(var first=!0;;first=!1){if(!first||!cm.options.lineWrapping||update.oldDisplayWidth==displayWidth(cm)){if(viewport&&viewport.top!=null)
viewport={top:Math.min(cm.doc.height+paddingVert(cm.display)-displayHeight(cm),viewport.top)};update.visible=visibleLines(cm.display,cm.doc,viewport);if(update.visible.from>=cm.display.viewFrom&&update.visible.to<=cm.display.viewTo)
break}
if(!updateDisplayIfNeeded(cm,update))break;updateHeightsInViewport(cm);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure)}
update.signal(cm,"update",cm);if(cm.display.viewFrom!=cm.display.reportedViewFrom||cm.display.viewTo!=cm.display.reportedViewTo){update.signal(cm,"viewportChange",cm,cm.display.viewFrom,cm.display.viewTo);cm.display.reportedViewFrom=cm.display.viewFrom;cm.display.reportedViewTo=cm.display.viewTo}}
function updateDisplaySimple(cm,viewport){var update=new DisplayUpdate(cm,viewport);if(updateDisplayIfNeeded(cm,update)){updateHeightsInViewport(cm);postUpdateDisplay(cm,update);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure);update.finish()}}
function setDocumentHeight(cm,measure){cm.display.sizer.style.minHeight=measure.docHeight+"px";cm.display.heightForcer.style.top=measure.docHeight+"px";cm.display.gutters.style.height=(measure.docHeight+cm.display.barHeight+scrollGap(cm))+"px"}
function updateHeightsInViewport(cm){var display=cm.display;var prevBottom=display.lineDiv.offsetTop;for(var i=0;i<display.view.length;i++){var cur=display.view[i],height;if(cur.hidden)continue;if(ie&&ie_version<8){var bot=cur.node.offsetTop+cur.node.offsetHeight;height=bot-prevBottom;prevBottom=bot}else{var box=cur.node.getBoundingClientRect();height=box.bottom-box.top}
var diff=cur.line.height-height;if(height<2)height=textHeight(display);if(diff>.001||diff<-.001){updateLineHeight(cur.line,height);updateWidgetHeight(cur.line);if(cur.rest)for(var j=0;j<cur.rest.length;j++)
updateWidgetHeight(cur.rest[j]);}}}
function updateWidgetHeight(line){if(line.widgets)for(var i=0;i<line.widgets.length;++i)
line.widgets[i].height=line.widgets[i].node.parentNode.offsetHeight}
function getDimensions(cm){var d=cm.display,left={},width={};var gutterLeft=d.gutters.clientLeft;for(var n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i){left[cm.options.gutters[i]]=n.offsetLeft+n.clientLeft+gutterLeft;width[cm.options.gutters[i]]=n.clientWidth}
return{fixedPos:compensateForHScroll(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:left,gutterWidth:width,wrapperWidth:d.wrapper.clientWidth}}
function patchDisplay(cm,updateNumbersFrom,dims){var display=cm.display,lineNumbers=cm.options.lineNumbers;var container=display.lineDiv,cur=container.firstChild;function rm(node){var next=node.nextSibling;if(webkit&&mac&&cm.display.currentWheelTarget==node)
node.style.display="none";else node.parentNode.removeChild(node);return next}
var view=display.view,lineN=display.viewFrom;for(var i=0;i<view.length;i++){var lineView=view[i];if(lineView.hidden){}else if(!lineView.node||lineView.node.parentNode!=container){var node=buildLineElement(cm,lineView,lineN,dims);container.insertBefore(node,cur)}else{while(cur!=lineView.node)cur=rm(cur);var updateNumber=lineNumbers&&updateNumbersFrom!=null&&updateNumbersFrom<=lineN&&lineView.lineNumber;if(lineView.changes){if(indexOf(lineView.changes,"gutter")>-1)updateNumber=!1;updateLineForChanges(cm,lineView,lineN,dims)}
if(updateNumber){removeChildren(lineView.lineNumber);lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options,lineN)))}
cur=lineView.node.nextSibling}
lineN+=lineView.size}
while(cur)cur=rm(cur);}
function updateLineForChanges(cm,lineView,lineN,dims){for(var j=0;j<lineView.changes.length;j++){var type=lineView.changes[j];if(type=="text")updateLineText(cm,lineView);else if(type=="gutter")updateLineGutter(cm,lineView,lineN,dims);else if(type=="class")updateLineClasses(lineView);else if(type=="widget")updateLineWidgets(cm,lineView,dims)}
lineView.changes=null}
function ensureLineWrapped(lineView){if(lineView.node==lineView.text){lineView.node=elt("div",null,null,"position: relative");if(lineView.text.parentNode)
lineView.text.parentNode.replaceChild(lineView.node,lineView.text);lineView.node.appendChild(lineView.text);if(ie&&ie_version<8)lineView.node.style.zIndex=2}
return lineView.node}
function updateLineBackground(lineView){var cls=lineView.bgClass?lineView.bgClass+" "+(lineView.line.bgClass||""):lineView.line.bgClass;if(cls)cls+=" CodeMirror-linebackground";if(lineView.background){if(cls)lineView.background.className=cls;else{lineView.background.parentNode.removeChild(lineView.background);lineView.background=null}}else if(cls){var wrap=ensureLineWrapped(lineView);lineView.background=wrap.insertBefore(elt("div",null,cls),wrap.firstChild)}}
function getLineContent(cm,lineView){var ext=cm.display.externalMeasured;if(ext&&ext.line==lineView.line){cm.display.externalMeasured=null;lineView.measure=ext.measure;return ext.built}
return buildLineContent(cm,lineView)}
function updateLineText(cm,lineView){var cls=lineView.text.className;var built=getLineContent(cm,lineView);if(lineView.text==lineView.node)lineView.node=built.pre;lineView.text.parentNode.replaceChild(built.pre,lineView.text);lineView.text=built.pre;if(built.bgClass!=lineView.bgClass||built.textClass!=lineView.textClass){lineView.bgClass=built.bgClass;lineView.textClass=built.textClass;updateLineClasses(lineView)}else if(cls){lineView.text.className=cls}}
function updateLineClasses(lineView){updateLineBackground(lineView);if(lineView.line.wrapClass)
ensureLineWrapped(lineView).className=lineView.line.wrapClass;else if(lineView.node!=lineView.text)
lineView.node.className="";var textClass=lineView.textClass?lineView.textClass+" "+(lineView.line.textClass||""):lineView.line.textClass;lineView.text.className=textClass||""}
function updateLineGutter(cm,lineView,lineN,dims){if(lineView.gutter){lineView.node.removeChild(lineView.gutter);lineView.gutter=null}
if(lineView.gutterBackground){lineView.node.removeChild(lineView.gutterBackground);lineView.gutterBackground=null}
if(lineView.line.gutterClass){var wrap=ensureLineWrapped(lineView);lineView.gutterBackground=elt("div",null,"CodeMirror-gutter-background "+lineView.line.gutterClass,"left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px; width: "+dims.gutterTotalWidth+"px");wrap.insertBefore(lineView.gutterBackground,lineView.text)}
var markers=lineView.line.gutterMarkers;if(cm.options.lineNumbers||markers){var wrap=ensureLineWrapped(lineView);var gutterWrap=lineView.gutter=elt("div",null,"CodeMirror-gutter-wrapper","left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px");cm.display.input.setUneditable(gutterWrap);wrap.insertBefore(gutterWrap,lineView.text);if(lineView.line.gutterClass)
gutterWrap.className+=" "+lineView.line.gutterClass;if(cm.options.lineNumbers&&(!markers||!markers["CodeMirror-linenumbers"]))
lineView.lineNumber=gutterWrap.appendChild(elt("div",lineNumberFor(cm.options,lineN),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dims.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+cm.display.lineNumInnerWidth+"px"));if(markers)for(var k=0;k<cm.options.gutters.length;++k){var id=cm.options.gutters[k],found=markers.hasOwnProperty(id)&&markers[id];if(found)
gutterWrap.appendChild(elt("div",[found],"CodeMirror-gutter-elt","left: "+dims.gutterLeft[id]+"px; width: "+dims.gutterWidth[id]+"px"))}}}
function updateLineWidgets(cm,lineView,dims){if(lineView.alignable)lineView.alignable=null;for(var node=lineView.node.firstChild,next;node;node=next){var next=node.nextSibling;if(node.className=="CodeMirror-linewidget")
lineView.node.removeChild(node)}
insertLineWidgets(cm,lineView,dims)}
function buildLineElement(cm,lineView,lineN,dims){var built=getLineContent(cm,lineView);lineView.text=lineView.node=built.pre;if(built.bgClass)lineView.bgClass=built.bgClass;if(built.textClass)lineView.textClass=built.textClass;updateLineClasses(lineView);updateLineGutter(cm,lineView,lineN,dims);insertLineWidgets(cm,lineView,dims);return lineView.node}
function insertLineWidgets(cm,lineView,dims){insertLineWidgetsFor(cm,lineView.line,lineView,dims,!0);if(lineView.rest)for(var i=0;i<lineView.rest.length;i++)
insertLineWidgetsFor(cm,lineView.rest[i],lineView,dims,!1);}
function insertLineWidgetsFor(cm,line,lineView,dims,allowAbove){if(!line.widgets)return;var wrap=ensureLineWrapped(lineView);for(var i=0,ws=line.widgets;i<ws.length;++i){var widget=ws[i],node=elt("div",[widget.node],"CodeMirror-linewidget");if(!widget.handleMouseEvents)node.setAttribute("cm-ignore-events","true");positionLineWidget(widget,node,lineView,dims);cm.display.input.setUneditable(node);if(allowAbove&&widget.above)
wrap.insertBefore(node,lineView.gutter||lineView.text);else wrap.appendChild(node);signalLater(widget,"redraw")}}
function positionLineWidget(widget,node,lineView,dims){if(widget.noHScroll){(lineView.alignable||(lineView.alignable=[])).push(node);var width=dims.wrapperWidth;node.style.left=dims.fixedPos+"px";if(!widget.coverGutter){width-=dims.gutterTotalWidth;node.style.paddingLeft=dims.gutterTotalWidth+"px"}
node.style.width=width+"px"}
if(widget.coverGutter){node.style.zIndex=5;node.style.position="relative";if(!widget.noHScroll)node.style.marginLeft=-dims.gutterTotalWidth+"px"}}
var Pos=CodeMirror.Pos=function(line,ch){if(!(this instanceof Pos))return new Pos(line,ch);this.line=line;this.ch=ch};var cmp=CodeMirror.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};function copyPos(x){return Pos(x.line,x.ch)}
function maxPos(a,b){return cmp(a,b)<0?b:a}
function minPos(a,b){return cmp(a,b)<0?a:b}
function ensureFocus(cm){if(!cm.state.focused){cm.display.input.focus();onFocus(cm)}}
var lastCopied=null;function applyTextInput(cm,inserted,deleted,sel,origin){var doc=cm.doc;cm.display.shift=!1;if(!sel)sel=doc.sel;var paste=cm.state.pasteIncoming||origin=="paste";var textLines=doc.splitLines(inserted),multiPaste=null
if(paste&&sel.ranges.length>1){if(lastCopied&&lastCopied.text.join("\n")==inserted){if(sel.ranges.length%lastCopied.text.length==0){multiPaste=[];for(var i=0;i<lastCopied.text.length;i++)
multiPaste.push(doc.splitLines(lastCopied.text[i]));}}else if(textLines.length==sel.ranges.length){multiPaste=map(textLines,function(l){return[l]})}}
for(var i=sel.ranges.length-1;i>=0;i--){var range=sel.ranges[i];var from=range.from(),to=range.to();if(range.empty()){if(deleted&&deleted>0)
from=Pos(from.line,from.ch-deleted);else if(cm.state.overwrite&&!paste)
to=Pos(to.line,Math.min(getLine(doc,to.line).text.length,to.ch+lst(textLines).length));else if(lastCopied&&lastCopied.lineWise&&lastCopied.text.join("\n")==inserted)
from=to=Pos(from.line,0)}
var updateInput=cm.curOp.updateInput;var changeEvent={from:from,to:to,text:multiPaste?multiPaste[i%multiPaste.length]:textLines,origin:origin||(paste?"paste":cm.state.cutIncoming?"cut":"+input")};makeChange(cm.doc,changeEvent);signalLater(cm,"inputRead",cm,changeEvent)}
if(inserted&&!paste)
triggerElectric(cm,inserted);ensureCursorVisible(cm);cm.curOp.updateInput=updateInput;cm.curOp.typing=!0;cm.state.pasteIncoming=cm.state.cutIncoming=!1}
function handlePaste(e,cm){var pasted=e.clipboardData&&e.clipboardData.getData("Text");if(pasted){e.preventDefault();if(!cm.isReadOnly()&&!cm.options.disableInput)
runInOp(cm,function(){applyTextInput(cm,pasted,0,null,"paste")});return!0}}
function triggerElectric(cm,inserted){if(!cm.options.electricChars||!cm.options.smartIndent)return;var sel=cm.doc.sel;for(var i=sel.ranges.length-1;i>=0;i--){var range=sel.ranges[i];if(range.head.ch>100||(i&&sel.ranges[i-1].head.line==range.head.line))continue;var mode=cm.getModeAt(range.head);var indented=!1;if(mode.electricChars){for(var j=0;j<mode.electricChars.length;j++)
if(inserted.indexOf(mode.electricChars.charAt(j))>-1){indented=indentLine(cm,range.head.line,"smart");break}}else if(mode.electricInput){if(mode.electricInput.test(getLine(cm.doc,range.head.line).text.slice(0,range.head.ch)))
indented=indentLine(cm,range.head.line,"smart")}
if(indented)signalLater(cm,"electricInput",cm,range.head.line)}}
function copyableRanges(cm){var text=[],ranges=[];for(var i=0;i<cm.doc.sel.ranges.length;i++){var line=cm.doc.sel.ranges[i].head.line;var lineRange={anchor:Pos(line,0),head:Pos(line+1,0)};ranges.push(lineRange);text.push(cm.getRange(lineRange.anchor,lineRange.head))}
return{text:text,ranges:ranges}}
function disableBrowserMagic(field,spellcheck){field.setAttribute("autocorrect","off");field.setAttribute("autocapitalize","off");field.setAttribute("spellcheck",!!spellcheck)}
function TextareaInput(cm){this.cm=cm;this.prevInput="";this.pollingFast=!1;this.polling=new Delayed();this.inaccurateSelection=!1;this.hasSelection=!1;this.composing=null};function hiddenTextarea(){var te=elt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var div=elt("div",[te],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(webkit)te.style.width="1000px";else te.setAttribute("wrap","off");if(ios)te.style.border="1px solid black";disableBrowserMagic(te);return div}
TextareaInput.prototype=copyObj({init:function(display){var input=this,cm=this.cm;var div=this.wrapper=hiddenTextarea();var te=this.textarea=div.firstChild;display.wrapper.insertBefore(div,display.wrapper.firstChild);if(ios)te.style.width="0px";on(te,"input",function(){if(ie&&ie_version>=9&&input.hasSelection)input.hasSelection=null;input.poll()});on(te,"paste",function(e){if(signalDOMEvent(cm,e)||handlePaste(e,cm))return
cm.state.pasteIncoming=!0;input.fastPoll()});function prepareCopyCut(e){if(signalDOMEvent(cm,e))return
if(cm.somethingSelected()){lastCopied={lineWise:!1,text:cm.getSelections()};if(input.inaccurateSelection){input.prevInput="";input.inaccurateSelection=!1;te.value=lastCopied.text.join("\n");selectInput(te)}}else if(!cm.options.lineWiseCopyCut){return}else{var ranges=copyableRanges(cm);lastCopied={lineWise:!0,text:ranges.text};if(e.type=="cut"){cm.setSelections(ranges.ranges,null,sel_dontScroll)}else{input.prevInput="";te.value=ranges.text.join("\n");selectInput(te)}}
if(e.type=="cut")cm.state.cutIncoming=!0}
on(te,"cut",prepareCopyCut);on(te,"copy",prepareCopyCut);on(display.scroller,"paste",function(e){if(eventInWidget(display,e)||signalDOMEvent(cm,e))return;cm.state.pasteIncoming=!0;input.focus()});on(display.lineSpace,"selectstart",function(e){if(!eventInWidget(display,e))e_preventDefault(e)});on(te,"compositionstart",function(){var start=cm.getCursor("from");if(input.composing)input.composing.range.clear()
input.composing={start:start,range:cm.markText(start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});on(te,"compositionend",function(){if(input.composing){input.poll();input.composing.range.clear();input.composing=null}})},prepareSelection:function(){var cm=this.cm,display=cm.display,doc=cm.doc;var result=prepareSelection(cm);if(cm.options.moveInputWithCursor){var headPos=cursorCoords(cm,doc.sel.primary().head,"div");var wrapOff=display.wrapper.getBoundingClientRect(),lineOff=display.lineDiv.getBoundingClientRect();result.teTop=Math.max(0,Math.min(display.wrapper.clientHeight-10,headPos.top+lineOff.top-wrapOff.top));result.teLeft=Math.max(0,Math.min(display.wrapper.clientWidth-10,headPos.left+lineOff.left-wrapOff.left))}
return result},showSelection:function(drawn){var cm=this.cm,display=cm.display;removeChildrenAndAdd(display.cursorDiv,drawn.cursors);removeChildrenAndAdd(display.selectionDiv,drawn.selection);if(drawn.teTop!=null){this.wrapper.style.top=drawn.teTop+"px";this.wrapper.style.left=drawn.teLeft+"px"}},reset:function(typing){if(this.contextMenuPending)return;var minimal,selected,cm=this.cm,doc=cm.doc;if(cm.somethingSelected()){this.prevInput="";var range=doc.sel.primary();minimal=hasCopyEvent&&(range.to().line-range.from().line>100||(selected=cm.getSelection()).length>1000);var content=minimal?"-":selected||cm.getSelection();this.textarea.value=content;if(cm.state.focused)selectInput(this.textarea);if(ie&&ie_version>=9)this.hasSelection=content}else if(!typing){this.prevInput=this.textarea.value="";if(ie&&ie_version>=9)this.hasSelection=null}
this.inaccurateSelection=minimal},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!mobile||activeElt()!=this.textarea)){try{this.textarea.focus()}catch(e){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var input=this;if(input.pollingFast)return;input.polling.set(this.cm.options.pollInterval,function(){input.poll();if(input.cm.state.focused)input.slowPoll()})},fastPoll:function(){var missed=!1,input=this;input.pollingFast=!0;function p(){var changed=input.poll();if(!changed&&!missed){missed=!0;input.polling.set(60,p)}else{input.pollingFast=!1;input.slowPoll()}}
input.polling.set(20,p)},poll:function(){var cm=this.cm,input=this.textarea,prevInput=this.prevInput;if(this.contextMenuPending||!cm.state.focused||(hasSelection(input)&&!prevInput&&!this.composing)||cm.isReadOnly()||cm.options.disableInput||cm.state.keySeq)
return!1;var text=input.value;if(text==prevInput&&!cm.somethingSelected())return!1;if(ie&&ie_version>=9&&this.hasSelection===text||mac&&/[\uf700-\uf7ff]/.test(text)){cm.display.input.reset();return!1}
if(cm.doc.sel==cm.display.selForContextMenu){var first=text.charCodeAt(0);if(first==0x200b&&!prevInput)prevInput="\u200b";if(first==0x21da){this.reset();return this.cm.execCommand("undo")}}
var same=0,l=Math.min(prevInput.length,text.length);while(same<l&&prevInput.charCodeAt(same)==text.charCodeAt(same))++same;var self=this;runInOp(cm,function(){applyTextInput(cm,text.slice(same),prevInput.length-same,null,self.composing?"*compose":null);if(text.length>1000||text.indexOf("\n")>-1)input.value=self.prevInput="";else self.prevInput=text;if(self.composing){self.composing.range.clear();self.composing.range=cm.markText(self.composing.start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});return!0},ensurePolled:function(){if(this.pollingFast&&this.poll())this.pollingFast=!1},onKeyPress:function(){if(ie&&ie_version>=9)this.hasSelection=null;this.fastPoll()},onContextMenu:function(e){var input=this,cm=input.cm,display=cm.display,te=input.textarea;var pos=posFromMouse(cm,e),scrollPos=display.scroller.scrollTop;if(!pos||presto)return;var reset=cm.options.resetSelectionOnContextMenu;if(reset&&cm.doc.sel.contains(pos)==-1)
operation(cm,setSelection)(cm.doc,simpleSelection(pos),sel_dontScroll);var oldCSS=te.style.cssText,oldWrapperCSS=input.wrapper.style.cssText;input.wrapper.style.cssText="position: absolute"
var wrapperBox=input.wrapper.getBoundingClientRect()
te.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(e.clientY-wrapperBox.top-5)+"px; left: "+(e.clientX-wrapperBox.left-5)+"px; z-index: 1000; background: "+(ie?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(webkit)var oldScrollY=window.scrollY;display.input.focus();if(webkit)window.scrollTo(null,oldScrollY);display.input.reset();if(!cm.somethingSelected())te.value=input.prevInput=" ";input.contextMenuPending=!0;display.selForContextMenu=cm.doc.sel;clearTimeout(display.detectingSelectAll);function prepareSelectAllHack(){if(te.selectionStart!=null){var selected=cm.somethingSelected();var extval="\u200b"+(selected?te.value:"");te.value="\u21da";te.value=extval;input.prevInput=selected?"":"\u200b";te.selectionStart=1;te.selectionEnd=extval.length;display.selForContextMenu=cm.doc.sel}}
function rehide(){input.contextMenuPending=!1;input.wrapper.style.cssText=oldWrapperCSS
te.style.cssText=oldCSS;if(ie&&ie_version<9)display.scrollbars.setScrollTop(display.scroller.scrollTop=scrollPos);if(te.selectionStart!=null){if(!ie||(ie&&ie_version<9))prepareSelectAllHack();var i=0,poll=function(){if(display.selForContextMenu==cm.doc.sel&&te.selectionStart==0&&te.selectionEnd>0&&input.prevInput=="\u200b")
operation(cm,commands.selectAll)(cm);else if(i++<10)display.detectingSelectAll=setTimeout(poll,500);else display.input.reset()};display.detectingSelectAll=setTimeout(poll,200)}}
if(ie&&ie_version>=9)prepareSelectAllHack();if(captureRightClick){e_stop(e);var mouseup=function(){off(window,"mouseup",mouseup);setTimeout(rehide,20)};on(window,"mouseup",mouseup)}else{setTimeout(rehide,50)}},readOnlyChanged:function(val){if(!val)this.reset()},setUneditable:nothing,needsContentAttribute:!1},TextareaInput.prototype);function ContentEditableInput(cm){this.cm=cm;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Delayed();this.gracePeriod=!1}
ContentEditableInput.prototype=copyObj({init:function(display){var input=this,cm=input.cm;var div=input.div=display.lineDiv;disableBrowserMagic(div,cm.options.spellcheck);on(div,"paste",function(e){if(signalDOMEvent(cm,e)||handlePaste(e,cm))return
if(ie_version<=11)setTimeout(operation(cm,function(){if(!input.pollContent())regChange(cm)}),20)})
on(div,"compositionstart",function(e){var data=e.data;input.composing={sel:cm.doc.sel,data:data,startData:data};if(!data)return;var prim=cm.doc.sel.primary();var line=cm.getLine(prim.head.line);var found=line.indexOf(data,Math.max(0,prim.head.ch-data.length));if(found>-1&&found<=prim.head.ch)
input.composing.sel=simpleSelection(Pos(prim.head.line,found),Pos(prim.head.line,found+data.length))});on(div,"compositionupdate",function(e){input.composing.data=e.data});on(div,"compositionend",function(e){var ours=input.composing;if(!ours)return;if(e.data!=ours.startData&&!/\u200b/.test(e.data))
ours.data=e.data;setTimeout(function(){if(!ours.handled)
input.applyComposition(ours);if(input.composing==ours)
input.composing=null},50)});on(div,"touchstart",function(){input.forceCompositionEnd()});on(div,"input",function(){if(input.composing)return;if(cm.isReadOnly()||!input.pollContent())
runInOp(input.cm,function(){regChange(cm)})});function onCopyCut(e){if(signalDOMEvent(cm,e))return
if(cm.somethingSelected()){lastCopied={lineWise:!1,text:cm.getSelections()};if(e.type=="cut")cm.replaceSelection("",null,"cut")}else if(!cm.options.lineWiseCopyCut){return}else{var ranges=copyableRanges(cm);lastCopied={lineWise:!0,text:ranges.text};if(e.type=="cut"){cm.operation(function(){cm.setSelections(ranges.ranges,0,sel_dontScroll);cm.replaceSelection("",null,"cut")})}}
if(e.clipboardData){e.clipboardData.clearData();var content=lastCopied.text.join("\n")
e.clipboardData.setData("Text",content);if(e.clipboardData.getData("Text")==content){e.preventDefault();return}}
var kludge=hiddenTextarea(),te=kludge.firstChild;cm.display.lineSpace.insertBefore(kludge,cm.display.lineSpace.firstChild);te.value=lastCopied.text.join("\n");var hadFocus=document.activeElement;selectInput(te);setTimeout(function(){cm.display.lineSpace.removeChild(kludge);hadFocus.focus();if(hadFocus==div)input.showPrimarySelection()},50)}
on(div,"copy",onCopyCut);on(div,"cut",onCopyCut)},prepareSelection:function(){var result=prepareSelection(this.cm,!1);result.focus=this.cm.state.focused;return result},showSelection:function(info,takeFocus){if(!info||!this.cm.display.view.length)return;if(info.focus||takeFocus)this.showPrimarySelection();this.showMultipleSelections(info)},showPrimarySelection:function(){var sel=window.getSelection(),prim=this.cm.doc.sel.primary();var curAnchor=domToPos(this.cm,sel.anchorNode,sel.anchorOffset);var curFocus=domToPos(this.cm,sel.focusNode,sel.focusOffset);if(curAnchor&&!curAnchor.bad&&curFocus&&!curFocus.bad&&cmp(minPos(curAnchor,curFocus),prim.from())==0&&cmp(maxPos(curAnchor,curFocus),prim.to())==0)
return;var start=posToDOM(this.cm,prim.from());var end=posToDOM(this.cm,prim.to());if(!start&&!end)return;var view=this.cm.display.view;var old=sel.rangeCount&&sel.getRangeAt(0);if(!start){start={node:view[0].measure.map[2],offset:0}}else if(!end){var measure=view[view.length-1].measure;var map=measure.maps?measure.maps[measure.maps.length-1]:measure.map;end={node:map[map.length-1],offset:map[map.length-2]-map[map.length-3]}}
try{var rng=range(start.node,start.offset,end.offset,end.node)}catch(e){}
if(rng){if(!gecko&&this.cm.state.focused){sel.collapse(start.node,start.offset);if(!rng.collapsed)sel.addRange(rng)}else{sel.removeAllRanges();sel.addRange(rng)}
if(old&&sel.anchorNode==null)sel.addRange(old);else if(gecko)this.startGracePeriod()}
this.rememberSelection()},startGracePeriod:function(){var input=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){input.gracePeriod=!1;if(input.selectionChanged())
input.cm.operation(function(){input.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(info){removeChildrenAndAdd(this.cm.display.cursorDiv,info.cursors);removeChildrenAndAdd(this.cm.display.selectionDiv,info.selection)},rememberSelection:function(){var sel=window.getSelection();this.lastAnchorNode=sel.anchorNode;this.lastAnchorOffset=sel.anchorOffset;this.lastFocusNode=sel.focusNode;this.lastFocusOffset=sel.focusOffset},selectionInEditor:function(){var sel=window.getSelection();if(!sel.rangeCount)return!1;var node=sel.getRangeAt(0).commonAncestorContainer;return contains(this.div,node)},focus:function(){if(this.cm.options.readOnly!="nocursor")this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var input=this;if(this.selectionInEditor())
this.pollSelection();else runInOp(this.cm,function(){input.cm.curOp.selectionChanged=!0});function poll(){if(input.cm.state.focused){input.pollSelection();input.polling.set(input.cm.options.pollInterval,poll)}}
this.polling.set(this.cm.options.pollInterval,poll)},selectionChanged:function(){var sel=window.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastFocusNode||sel.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var sel=window.getSelection(),cm=this.cm;this.rememberSelection();var anchor=domToPos(cm,sel.anchorNode,sel.anchorOffset);var head=domToPos(cm,sel.focusNode,sel.focusOffset);if(anchor&&head)runInOp(cm,function(){setSelection(cm.doc,simpleSelection(anchor,head),sel_dontScroll);if(anchor.bad||head.bad)cm.curOp.selectionChanged=!0})}},pollContent:function(){var cm=this.cm,display=cm.display,sel=cm.doc.sel.primary();var from=sel.from(),to=sel.to();if(from.line<display.viewFrom||to.line>display.viewTo-1)return!1;var fromIndex;if(from.line==display.viewFrom||(fromIndex=findViewIndex(cm,from.line))==0){var fromLine=lineNo(display.view[0].line);var fromNode=display.view[0].node}else{var fromLine=lineNo(display.view[fromIndex].line);var fromNode=display.view[fromIndex-1].node.nextSibling}
var toIndex=findViewIndex(cm,to.line);if(toIndex==display.view.length-1){var toLine=display.viewTo-1;var toNode=display.lineDiv.lastChild}else{var toLine=lineNo(display.view[toIndex+1].line)-1;var toNode=display.view[toIndex+1].node.previousSibling}
var newText=cm.doc.splitLines(domTextBetween(cm,fromNode,toNode,fromLine,toLine));var oldText=getBetween(cm.doc,Pos(fromLine,0),Pos(toLine,getLine(cm.doc,toLine).text.length));while(newText.length>1&&oldText.length>1){if(lst(newText)==lst(oldText)){newText.pop();oldText.pop();toLine--}else if(newText[0]==oldText[0]){newText.shift();oldText.shift();fromLine++}else break}
var cutFront=0,cutEnd=0;var newTop=newText[0],oldTop=oldText[0],maxCutFront=Math.min(newTop.length,oldTop.length);while(cutFront<maxCutFront&&newTop.charCodeAt(cutFront)==oldTop.charCodeAt(cutFront))
++cutFront;var newBot=lst(newText),oldBot=lst(oldText);var maxCutEnd=Math.min(newBot.length-(newText.length==1?cutFront:0),oldBot.length-(oldText.length==1?cutFront:0));while(cutEnd<maxCutEnd&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1))
++cutEnd;newText[newText.length-1]=newBot.slice(0,newBot.length-cutEnd);newText[0]=newText[0].slice(cutFront);var chFrom=Pos(fromLine,cutFront);var chTo=Pos(toLine,oldText.length?lst(oldText).length-cutEnd:0);if(newText.length>1||newText[0]||cmp(chFrom,chTo)){replaceRange(cm.doc,newText,chFrom,chTo,"+input");return!0}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(!this.composing||this.composing.handled)return;this.applyComposition(this.composing);this.composing.handled=!0;this.div.blur();this.div.focus()},applyComposition:function(composing){if(this.cm.isReadOnly())
operation(this.cm,regChange)(this.cm)
else if(composing.data&&composing.data!=composing.startData)
operation(this.cm,applyTextInput)(this.cm,composing.data,0,composing.sel)},setUneditable:function(node){node.contentEditable="false"},onKeyPress:function(e){e.preventDefault();if(!this.cm.isReadOnly())
operation(this.cm,applyTextInput)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0)},readOnlyChanged:function(val){this.div.contentEditable=String(val!="nocursor")},onContextMenu:nothing,resetPosition:nothing,needsContentAttribute:!0},ContentEditableInput.prototype);function posToDOM(cm,pos){var view=findViewForLine(cm,pos.line);if(!view||view.hidden)return null;var line=getLine(cm.doc,pos.line);var info=mapFromLineView(view,line,pos.line);var order=getOrder(line),side="left";if(order){var partPos=getBidiPartAt(order,pos.ch);side=partPos%2?"right":"left"}
var result=nodeAndOffsetInLineMap(info.map,pos.ch,side);result.offset=result.collapse=="right"?result.end:result.start;return result}
function badPos(pos,bad){if(bad)pos.bad=!0;return pos}
function domToPos(cm,node,offset){var lineNode;if(node==cm.display.lineDiv){lineNode=cm.display.lineDiv.childNodes[offset];if(!lineNode)return badPos(cm.clipPos(Pos(cm.display.viewTo-1)),!0);node=null;offset=0}else{for(lineNode=node;;lineNode=lineNode.parentNode){if(!lineNode||lineNode==cm.display.lineDiv)return null;if(lineNode.parentNode&&lineNode.parentNode==cm.display.lineDiv)break}}
for(var i=0;i<cm.display.view.length;i++){var lineView=cm.display.view[i];if(lineView.node==lineNode)
return locateNodeInLineView(lineView,node,offset)}}
function locateNodeInLineView(lineView,node,offset){var wrapper=lineView.text.firstChild,bad=!1;if(!node||!contains(wrapper,node))return badPos(Pos(lineNo(lineView.line),0),!0);if(node==wrapper){bad=!0;node=wrapper.childNodes[offset];offset=0;if(!node){var line=lineView.rest?lst(lineView.rest):lineView.line;return badPos(Pos(lineNo(line),line.text.length),bad)}}
var textNode=node.nodeType==3?node:null,topNode=node;if(!textNode&&node.childNodes.length==1&&node.firstChild.nodeType==3){textNode=node.firstChild;if(offset)offset=textNode.nodeValue.length}
while(topNode.parentNode!=wrapper)topNode=topNode.parentNode;var measure=lineView.measure,maps=measure.maps;function find(textNode,topNode,offset){for(var i=-1;i<(maps?maps.length:0);i++){var map=i<0?measure.map:maps[i];for(var j=0;j<map.length;j+=3){var curNode=map[j+2];if(curNode==textNode||curNode==topNode){var line=lineNo(i<0?lineView.line:lineView.rest[i]);var ch=map[j]+offset;if(offset<0||curNode!=textNode)ch=map[j+(offset?1:0)];return Pos(line,ch)}}}}
var found=find(textNode,topNode,offset);if(found)return badPos(found,bad);for(var after=topNode.nextSibling,dist=textNode?textNode.nodeValue.length-offset:0;after;after=after.nextSibling){found=find(after,after.firstChild,0);if(found)
return badPos(Pos(found.line,found.ch-dist),bad);else dist+=after.textContent.length}
for(var before=topNode.previousSibling,dist=offset;before;before=before.previousSibling){found=find(before,before.firstChild,-1);if(found)
return badPos(Pos(found.line,found.ch+dist),bad);else dist+=before.textContent.length}}
function domTextBetween(cm,from,to,fromLine,toLine){var text="",closing=!1,lineSep=cm.doc.lineSeparator();function recognizeMarker(id){return function(marker){return marker.id==id}}
function walk(node){if(node.nodeType==1){var cmText=node.getAttribute("cm-text");if(cmText!=null){if(cmText=="")cmText=node.textContent.replace(/\u200b/g,"");text+=cmText;return}
var markerID=node.getAttribute("cm-marker"),range;if(markerID){var found=cm.findMarks(Pos(fromLine,0),Pos(toLine+1,0),recognizeMarker(+markerID));if(found.length&&(range=found[0].find()))
text+=getBetween(cm.doc,range.from,range.to).join(lineSep);return}
if(node.getAttribute("contenteditable")=="false")return;for(var i=0;i<node.childNodes.length;i++)
walk(node.childNodes[i]);if(/^(pre|div|p)$/i.test(node.nodeName))
closing=!0}else if(node.nodeType==3){var val=node.nodeValue;if(!val)return;if(closing){text+=lineSep;closing=!1}
text+=val}}
for(;;){walk(from);if(from==to)break;from=from.nextSibling}
return text}
CodeMirror.inputStyles={"textarea":TextareaInput,"contenteditable":ContentEditableInput};function Selection(ranges,primIndex){this.ranges=ranges;this.primIndex=primIndex}
Selection.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(other){if(other==this)return!0;if(other.primIndex!=this.primIndex||other.ranges.length!=this.ranges.length)return!1;for(var i=0;i<this.ranges.length;i++){var here=this.ranges[i],there=other.ranges[i];if(cmp(here.anchor,there.anchor)!=0||cmp(here.head,there.head)!=0)return!1}
return!0},deepCopy:function(){for(var out=[],i=0;i<this.ranges.length;i++)
out[i]=new Range(copyPos(this.ranges[i].anchor),copyPos(this.ranges[i].head));return new Selection(out,this.primIndex)},somethingSelected:function(){for(var i=0;i<this.ranges.length;i++)
if(!this.ranges[i].empty())return!0;return!1},contains:function(pos,end){if(!end)end=pos;for(var i=0;i<this.ranges.length;i++){var range=this.ranges[i];if(cmp(end,range.from())>=0&&cmp(pos,range.to())<=0)
return i}
return-1}};function Range(anchor,head){this.anchor=anchor;this.head=head}
Range.prototype={from:function(){return minPos(this.anchor,this.head)},to:function(){return maxPos(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function normalizeSelection(ranges,primIndex){var prim=ranges[primIndex];ranges.sort(function(a,b){return cmp(a.from(),b.from())});primIndex=indexOf(ranges,prim);for(var i=1;i<ranges.length;i++){var cur=ranges[i],prev=ranges[i-1];if(cmp(prev.to(),cur.from())>=0){var from=minPos(prev.from(),cur.from()),to=maxPos(prev.to(),cur.to());var inv=prev.empty()?cur.from()==cur.head:prev.from()==prev.head;if(i<=primIndex)--primIndex;ranges.splice(--i,2,new Range(inv?to:from,inv?from:to))}}
return new Selection(ranges,primIndex)}
function simpleSelection(anchor,head){return new Selection([new Range(anchor,head||anchor)],0)}
function clipLine(doc,n){return Math.max(doc.first,Math.min(n,doc.first+doc.size-1))}
function clipPos(doc,pos){if(pos.line<doc.first)return Pos(doc.first,0);var last=doc.first+doc.size-1;if(pos.line>last)return Pos(last,getLine(doc,last).text.length);return clipToLen(pos,getLine(doc,pos.line).text.length)}
function clipToLen(pos,linelen){var ch=pos.ch;if(ch==null||ch>linelen)return Pos(pos.line,linelen);else if(ch<0)return Pos(pos.line,0);else return pos}
function isLine(doc,l){return l>=doc.first&&l<doc.first+doc.size}
function clipPosArray(doc,array){for(var out=[],i=0;i<array.length;i++)out[i]=clipPos(doc,array[i]);return out}
function extendRange(doc,range,head,other){if(doc.cm&&doc.cm.display.shift||doc.extend){var anchor=range.anchor;if(other){var posBefore=cmp(head,anchor)<0;if(posBefore!=(cmp(other,anchor)<0)){anchor=head;head=other}else if(posBefore!=(cmp(head,other)<0)){head=other}}
return new Range(anchor,head)}else{return new Range(other||head,head)}}
function extendSelection(doc,head,other,options){setSelection(doc,new Selection([extendRange(doc,doc.sel.primary(),head,other)],0),options)}
function extendSelections(doc,heads,options){for(var out=[],i=0;i<doc.sel.ranges.length;i++)
out[i]=extendRange(doc,doc.sel.ranges[i],heads[i],null);var newSel=normalizeSelection(out,doc.sel.primIndex);setSelection(doc,newSel,options)}
function replaceOneSelection(doc,i,range,options){var ranges=doc.sel.ranges.slice(0);ranges[i]=range;setSelection(doc,normalizeSelection(ranges,doc.sel.primIndex),options)}
function setSimpleSelection(doc,anchor,head,options){setSelection(doc,simpleSelection(anchor,head),options)}
function filterSelectionChange(doc,sel,options){var obj={ranges:sel.ranges,update:function(ranges){this.ranges=[];for(var i=0;i<ranges.length;i++)
this.ranges[i]=new Range(clipPos(doc,ranges[i].anchor),clipPos(doc,ranges[i].head));},origin:options&&options.origin};signal(doc,"beforeSelectionChange",doc,obj);if(doc.cm)signal(doc.cm,"beforeSelectionChange",doc.cm,obj);if(obj.ranges!=sel.ranges)return normalizeSelection(obj.ranges,obj.ranges.length-1);else return sel}
function setSelectionReplaceHistory(doc,sel,options){var done=doc.history.done,last=lst(done);if(last&&last.ranges){done[done.length-1]=sel;setSelectionNoUndo(doc,sel,options)}else{setSelection(doc,sel,options)}}
function setSelection(doc,sel,options){setSelectionNoUndo(doc,sel,options);addSelectionToHistory(doc,doc.sel,doc.cm?doc.cm.curOp.id:NaN,options)}
function setSelectionNoUndo(doc,sel,options){if(hasHandler(doc,"beforeSelectionChange")||doc.cm&&hasHandler(doc.cm,"beforeSelectionChange"))
sel=filterSelectionChange(doc,sel,options);var bias=options&&options.bias||(cmp(sel.primary().head,doc.sel.primary().head)<0?-1:1);setSelectionInner(doc,skipAtomicInSelection(doc,sel,bias,!0));if(!(options&&options.scroll===!1)&&doc.cm)
ensureCursorVisible(doc.cm)}
function setSelectionInner(doc,sel){if(sel.equals(doc.sel))return;doc.sel=sel;if(doc.cm){doc.cm.curOp.updateInput=doc.cm.curOp.selectionChanged=!0;signalCursorActivity(doc.cm)}
signalLater(doc,"cursorActivity",doc)}
function reCheckSelection(doc){setSelectionInner(doc,skipAtomicInSelection(doc,doc.sel,null,!1),sel_dontScroll)}
function skipAtomicInSelection(doc,sel,bias,mayClear){var out;for(var i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];var old=sel.ranges.length==doc.sel.ranges.length&&doc.sel.ranges[i];var newAnchor=skipAtomic(doc,range.anchor,old&&old.anchor,bias,mayClear);var newHead=skipAtomic(doc,range.head,old&&old.head,bias,mayClear);if(out||newAnchor!=range.anchor||newHead!=range.head){if(!out)out=sel.ranges.slice(0,i);out[i]=new Range(newAnchor,newHead)}}
return out?normalizeSelection(out,sel.primIndex):sel}
function skipAtomicInner(doc,pos,oldPos,dir,mayClear){var line=getLine(doc,pos.line);if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var sp=line.markedSpans[i],m=sp.marker;if((sp.from==null||(m.inclusiveLeft?sp.from<=pos.ch:sp.from<pos.ch))&&(sp.to==null||(m.inclusiveRight?sp.to>=pos.ch:sp.to>pos.ch))){if(mayClear){signal(m,"beforeCursorEnter");if(m.explicitlyCleared){if(!line.markedSpans)break;else{--i;continue}}}
if(!m.atomic)continue;if(oldPos){var near=m.find(dir<0?1:-1),diff;if(dir<0?m.inclusiveRight:m.inclusiveLeft)
near=movePos(doc,near,-dir,near&&near.line==pos.line?line:null);if(near&&near.line==pos.line&&(diff=cmp(near,oldPos))&&(dir<0?diff<0:diff>0))
return skipAtomicInner(doc,near,pos,dir,mayClear)}
var far=m.find(dir<0?-1:1);if(dir<0?m.inclusiveLeft:m.inclusiveRight)
far=movePos(doc,far,dir,far.line==pos.line?line:null);return far?skipAtomicInner(doc,far,pos,dir,mayClear):null}}
return pos}
function skipAtomic(doc,pos,oldPos,bias,mayClear){var dir=bias||1;var found=skipAtomicInner(doc,pos,oldPos,dir,mayClear)||(!mayClear&&skipAtomicInner(doc,pos,oldPos,dir,!0))||skipAtomicInner(doc,pos,oldPos,-dir,mayClear)||(!mayClear&&skipAtomicInner(doc,pos,oldPos,-dir,!0));if(!found){doc.cantEdit=!0;return Pos(doc.first,0)}
return found}
function movePos(doc,pos,dir,line){if(dir<0&&pos.ch==0){if(pos.line>doc.first)return clipPos(doc,Pos(pos.line-1));else return null}else if(dir>0&&pos.ch==(line||getLine(doc,pos.line)).text.length){if(pos.line<doc.first+doc.size-1)return Pos(pos.line+1,0);else return null}else{return new Pos(pos.line,pos.ch+dir)}}
function updateSelection(cm){cm.display.input.showSelection(cm.display.input.prepareSelection())}
function prepareSelection(cm,primary){var doc=cm.doc,result={};var curFragment=result.cursors=document.createDocumentFragment();var selFragment=result.selection=document.createDocumentFragment();for(var i=0;i<doc.sel.ranges.length;i++){if(primary===!1&&i==doc.sel.primIndex)continue;var range=doc.sel.ranges[i];if(range.from().line>=cm.display.viewTo||range.to().line<cm.display.viewFrom)continue;var collapsed=range.empty();if(collapsed||cm.options.showCursorWhenSelecting)
drawSelectionCursor(cm,range.head,curFragment);if(!collapsed)
drawSelectionRange(cm,range,selFragment)}
return result}
function drawSelectionCursor(cm,head,output){var pos=cursorCoords(cm,head,"div",null,null,!cm.options.singleCursorHeightPerLine);var cursor=output.appendChild(elt("div","\u00a0","CodeMirror-cursor"));cursor.style.left=pos.left+"px";cursor.style.top=pos.top+"px";cursor.style.height=Math.max(0,pos.bottom-pos.top)*cm.options.cursorHeight+"px";if(pos.other){var otherCursor=output.appendChild(elt("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));otherCursor.style.display="";otherCursor.style.left=pos.other.left+"px";otherCursor.style.top=pos.other.top+"px";otherCursor.style.height=(pos.other.bottom-pos.other.top)*.85+"px"}}
function drawSelectionRange(cm,range,output){var display=cm.display,doc=cm.doc;var fragment=document.createDocumentFragment();var padding=paddingH(cm.display),leftSide=padding.left;var rightSide=Math.max(display.sizerWidth,displayWidth(cm)-display.sizer.offsetLeft)-padding.right;function add(left,top,width,bottom){if(top<0)top=0;top=Math.round(top);bottom=Math.round(bottom);fragment.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+left+"px; top: "+top+"px; width: "+(width==null?rightSide-left:width)+"px; height: "+(bottom-top)+"px"))}
function drawForLine(line,fromArg,toArg){var lineObj=getLine(doc,line);var lineLen=lineObj.text.length;var start,end;function coords(ch,bias){return charCoords(cm,Pos(line,ch),"div",lineObj,bias)}
iterateBidiSections(getOrder(lineObj),fromArg||0,toArg==null?lineLen:toArg,function(from,to,dir){var leftPos=coords(from,"left"),rightPos,left,right;if(from==to){rightPos=leftPos;left=right=leftPos.left}else{rightPos=coords(to-1,"right");if(dir=="rtl"){var tmp=leftPos;leftPos=rightPos;rightPos=tmp}
left=leftPos.left;right=rightPos.right}
if(fromArg==null&&from==0)left=leftSide;if(rightPos.top-leftPos.top>3){add(left,leftPos.top,null,leftPos.bottom);left=leftSide;if(leftPos.bottom<rightPos.top)add(left,leftPos.bottom,null,rightPos.top)}
if(toArg==null&&to==lineLen)right=rightSide;if(!start||leftPos.top<start.top||leftPos.top==start.top&&leftPos.left<start.left)
start=leftPos;if(!end||rightPos.bottom>end.bottom||rightPos.bottom==end.bottom&&rightPos.right>end.right)
end=rightPos;if(left<leftSide+1)left=leftSide;add(left,rightPos.top,right-left,rightPos.bottom)});return{start:start,end:end}}
var sFrom=range.from(),sTo=range.to();if(sFrom.line==sTo.line){drawForLine(sFrom.line,sFrom.ch,sTo.ch)}else{var fromLine=getLine(doc,sFrom.line),toLine=getLine(doc,sTo.line);var singleVLine=visualLine(fromLine)==visualLine(toLine);var leftEnd=drawForLine(sFrom.line,sFrom.ch,singleVLine?fromLine.text.length+1:null).end;var rightStart=drawForLine(sTo.line,singleVLine?0:null,sTo.ch).start;if(singleVLine){if(leftEnd.top<rightStart.top-2){add(leftEnd.right,leftEnd.top,null,leftEnd.bottom);add(leftSide,rightStart.top,rightStart.left,rightStart.bottom)}else{add(leftEnd.right,leftEnd.top,rightStart.left-leftEnd.right,leftEnd.bottom)}}
if(leftEnd.bottom<rightStart.top)
add(leftSide,leftEnd.bottom,null,rightStart.top)}
output.appendChild(fragment)}
function restartBlink(cm){if(!cm.state.focused)return;var display=cm.display;clearInterval(display.blinker);var on=!0;display.cursorDiv.style.visibility="";if(cm.options.cursorBlinkRate>0)
display.blinker=setInterval(function(){display.cursorDiv.style.visibility=(on=!on)?"":"hidden"},cm.options.cursorBlinkRate);else if(cm.options.cursorBlinkRate<0)
display.cursorDiv.style.visibility="hidden"}
function startWorker(cm,time){if(cm.doc.mode.startState&&cm.doc.frontier<cm.display.viewTo)
cm.state.highlight.set(time,bind(highlightWorker,cm))}
function highlightWorker(cm){var doc=cm.doc;if(doc.frontier<doc.first)doc.frontier=doc.first;if(doc.frontier>=cm.display.viewTo)return;var end=+new Date+cm.options.workTime;var state=copyState(doc.mode,getStateBefore(cm,doc.frontier));var changedLines=[];doc.iter(doc.frontier,Math.min(doc.first+doc.size,cm.display.viewTo+500),function(line){if(doc.frontier>=cm.display.viewFrom){var oldStyles=line.styles,tooLong=line.text.length>cm.options.maxHighlightLength;var highlighted=highlightLine(cm,line,tooLong?copyState(doc.mode,state):state,!0);line.styles=highlighted.styles;var oldCls=line.styleClasses,newCls=highlighted.classes;if(newCls)line.styleClasses=newCls;else if(oldCls)line.styleClasses=null;var ischange=!oldStyles||oldStyles.length!=line.styles.length||oldCls!=newCls&&(!oldCls||!newCls||oldCls.bgClass!=newCls.bgClass||oldCls.textClass!=newCls.textClass);for(var i=0;!ischange&&i<oldStyles.length;++i)ischange=oldStyles[i]!=line.styles[i];if(ischange)changedLines.push(doc.frontier);line.stateAfter=tooLong?state:copyState(doc.mode,state)}else{if(line.text.length<=cm.options.maxHighlightLength)
processLine(cm,line.text,state);line.stateAfter=doc.frontier%5==0?copyState(doc.mode,state):null}
++doc.frontier;if(+new Date>end){startWorker(cm,cm.options.workDelay);return!0}});if(changedLines.length)runInOp(cm,function(){for(var i=0;i<changedLines.length;i++)
regLineChange(cm,changedLines[i],"text");})}
function findStartLine(cm,n,precise){var minindent,minline,doc=cm.doc;var lim=precise?-1:n-(cm.doc.mode.innerMode?1000:100);for(var search=n;search>lim;--search){if(search<=doc.first)return doc.first;var line=getLine(doc,search-1);if(line.stateAfter&&(!precise||search<=doc.frontier))return search;var indented=countColumn(line.text,null,cm.options.tabSize);if(minline==null||minindent>indented){minline=search-1;minindent=indented}}
return minline}
function getStateBefore(cm,n,precise){var doc=cm.doc,display=cm.display;if(!doc.mode.startState)return!0;var pos=findStartLine(cm,n,precise),state=pos>doc.first&&getLine(doc,pos-1).stateAfter;if(!state)state=startState(doc.mode);else state=copyState(doc.mode,state);doc.iter(pos,n,function(line){processLine(cm,line.text,state);var save=pos==n-1||pos%5==0||pos>=display.viewFrom&&pos<display.viewTo;line.stateAfter=save?copyState(doc.mode,state):null;++pos});if(precise)doc.frontier=pos;return state}
function paddingTop(display){return display.lineSpace.offsetTop}
function paddingVert(display){return display.mover.offsetHeight-display.lineSpace.offsetHeight}
function paddingH(display){if(display.cachedPaddingH)return display.cachedPaddingH;var e=removeChildrenAndAdd(display.measure,elt("pre","x"));var style=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle;var data={left:parseInt(style.paddingLeft),right:parseInt(style.paddingRight)};if(!isNaN(data.left)&&!isNaN(data.right))display.cachedPaddingH=data;return data}
function scrollGap(cm){return scrollerGap-cm.display.nativeBarWidth}
function displayWidth(cm){return cm.display.scroller.clientWidth-scrollGap(cm)-cm.display.barWidth}
function displayHeight(cm){return cm.display.scroller.clientHeight-scrollGap(cm)-cm.display.barHeight}
function ensureLineHeights(cm,lineView,rect){var wrapping=cm.options.lineWrapping;var curWidth=wrapping&&displayWidth(cm);if(!lineView.measure.heights||wrapping&&lineView.measure.width!=curWidth){var heights=lineView.measure.heights=[];if(wrapping){lineView.measure.width=curWidth;var rects=lineView.text.firstChild.getClientRects();for(var i=0;i<rects.length-1;i++){var cur=rects[i],next=rects[i+1];if(Math.abs(cur.bottom-next.bottom)>2)
heights.push((cur.bottom+next.top)/2-rect.top)}}
heights.push(rect.bottom-rect.top)}}
function mapFromLineView(lineView,line,lineN){if(lineView.line==line)
return{map:lineView.measure.map,cache:lineView.measure.cache};for(var i=0;i<lineView.rest.length;i++)
if(lineView.rest[i]==line)
return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i]};for(var i=0;i<lineView.rest.length;i++)
if(lineNo(lineView.rest[i])>lineN)
return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i],before:!0}}
function updateExternalMeasurement(cm,line){line=visualLine(line);var lineN=lineNo(line);var view=cm.display.externalMeasured=new LineView(cm.doc,line,lineN);view.lineN=lineN;var built=view.built=buildLineContent(cm,view);view.text=built.pre;removeChildrenAndAdd(cm.display.lineMeasure,built.pre);return view}
function measureChar(cm,line,ch,bias){return measureCharPrepared(cm,prepareMeasureForLine(cm,line),ch,bias)}
function findViewForLine(cm,lineN){if(lineN>=cm.display.viewFrom&&lineN<cm.display.viewTo)
return cm.display.view[findViewIndex(cm,lineN)];var ext=cm.display.externalMeasured;if(ext&&lineN>=ext.lineN&&lineN<ext.lineN+ext.size)
return ext}
function prepareMeasureForLine(cm,line){var lineN=lineNo(line);var view=findViewForLine(cm,lineN);if(view&&!view.text){view=null}else if(view&&view.changes){updateLineForChanges(cm,view,lineN,getDimensions(cm));cm.curOp.forceUpdate=!0}
if(!view)
view=updateExternalMeasurement(cm,line);var info=mapFromLineView(view,line,lineN);return{line:line,view:view,rect:null,map:info.map,cache:info.cache,before:info.before,hasHeights:!1}}
function measureCharPrepared(cm,prepared,ch,bias,varHeight){if(prepared.before)ch=-1;var key=ch+(bias||""),found;if(prepared.cache.hasOwnProperty(key)){found=prepared.cache[key]}else{if(!prepared.rect)
prepared.rect=prepared.view.text.getBoundingClientRect();if(!prepared.hasHeights){ensureLineHeights(cm,prepared.view,prepared.rect);prepared.hasHeights=!0}
found=measureCharInner(cm,prepared,ch,bias);if(!found.bogus)prepared.cache[key]=found}
return{left:found.left,right:found.right,top:varHeight?found.rtop:found.top,bottom:varHeight?found.rbottom:found.bottom}}
var nullRect={left:0,right:0,top:0,bottom:0};function nodeAndOffsetInLineMap(map,ch,bias){var node,start,end,collapse;for(var i=0;i<map.length;i+=3){var mStart=map[i],mEnd=map[i+1];if(ch<mStart){start=0;end=1;collapse="left"}else if(ch<mEnd){start=ch-mStart;end=start+1}else if(i==map.length-3||ch==mEnd&&map[i+3]>ch){end=mEnd-mStart;start=end-1;if(ch>=mEnd)collapse="right"}
if(start!=null){node=map[i+2];if(mStart==mEnd&&bias==(node.insertLeft?"left":"right"))
collapse=bias;if(bias=="left"&&start==0)
while(i&&map[i-2]==map[i-3]&&map[i-1].insertLeft){node=map[(i-=3)+2];collapse="left"}
if(bias=="right"&&start==mEnd-mStart)
while(i<map.length-3&&map[i+3]==map[i+4]&&!map[i+5].insertLeft){node=map[(i+=3)+2];collapse="right"}
break}}
return{node:node,start:start,end:end,collapse:collapse,coverStart:mStart,coverEnd:mEnd}}
function getUsefulRect(rects,bias){var rect=nullRect
if(bias=="left")for(var i=0;i<rects.length;i++){if((rect=rects[i]).left!=rect.right)break}else for(var i=rects.length-1;i>=0;i--){if((rect=rects[i]).left!=rect.right)break}
return rect}
function measureCharInner(cm,prepared,ch,bias){var place=nodeAndOffsetInLineMap(prepared.map,ch,bias);var node=place.node,start=place.start,end=place.end,collapse=place.collapse;var rect;if(node.nodeType==3){for(var i=0;i<4;i++){while(start&&isExtendingChar(prepared.line.text.charAt(place.coverStart+start)))--start;while(place.coverStart+end<place.coverEnd&&isExtendingChar(prepared.line.text.charAt(place.coverStart+end)))++end;if(ie&&ie_version<9&&start==0&&end==place.coverEnd-place.coverStart)
rect=node.parentNode.getBoundingClientRect();else rect=getUsefulRect(range(node,start,end).getClientRects(),bias)
if(rect.left||rect.right||start==0)break;end=start;start=start-1;collapse="right"}
if(ie&&ie_version<11)rect=maybeUpdateRectForZooming(cm.display.measure,rect)}else{if(start>0)collapse=bias="right";var rects;if(cm.options.lineWrapping&&(rects=node.getClientRects()).length>1)
rect=rects[bias=="right"?rects.length-1:0];else rect=node.getBoundingClientRect()}
if(ie&&ie_version<9&&!start&&(!rect||!rect.left&&!rect.right)){var rSpan=node.parentNode.getClientRects()[0];if(rSpan)
rect={left:rSpan.left,right:rSpan.left+charWidth(cm.display),top:rSpan.top,bottom:rSpan.bottom};else rect=nullRect}
var rtop=rect.top-prepared.rect.top,rbot=rect.bottom-prepared.rect.top;var mid=(rtop+rbot)/2;var heights=prepared.view.measure.heights;for(var i=0;i<heights.length-1;i++)
if(mid<heights[i])break;var top=i?heights[i-1]:0,bot=heights[i];var result={left:(collapse=="right"?rect.right:rect.left)-prepared.rect.left,right:(collapse=="left"?rect.left:rect.right)-prepared.rect.left,top:top,bottom:bot};if(!rect.left&&!rect.right)result.bogus=!0;if(!cm.options.singleCursorHeightPerLine){result.rtop=rtop;result.rbottom=rbot}
return result}
function maybeUpdateRectForZooming(measure,rect){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!hasBadZoomedRects(measure))
return rect;var scaleX=screen.logicalXDPI/screen.deviceXDPI;var scaleY=screen.logicalYDPI/screen.deviceYDPI;return{left:rect.left*scaleX,right:rect.right*scaleX,top:rect.top*scaleY,bottom:rect.bottom*scaleY}}
function clearLineMeasurementCacheFor(lineView){if(lineView.measure){lineView.measure.cache={};lineView.measure.heights=null;if(lineView.rest)for(var i=0;i<lineView.rest.length;i++)
lineView.measure.caches[i]={}}}
function clearLineMeasurementCache(cm){cm.display.externalMeasure=null;removeChildren(cm.display.lineMeasure);for(var i=0;i<cm.display.view.length;i++)
clearLineMeasurementCacheFor(cm.display.view[i]);}
function clearCaches(cm){clearLineMeasurementCache(cm);cm.display.cachedCharWidth=cm.display.cachedTextHeight=cm.display.cachedPaddingH=null;if(!cm.options.lineWrapping)cm.display.maxLineChanged=!0;cm.display.lineNumChars=null}
function pageScrollX(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}
function pageScrollY(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}
function intoCoordSystem(cm,lineObj,rect,context){if(lineObj.widgets)for(var i=0;i<lineObj.widgets.length;++i)if(lineObj.widgets[i].above){var size=widgetHeight(lineObj.widgets[i]);rect.top+=size;rect.bottom+=size}
if(context=="line")return rect;if(!context)context="local";var yOff=heightAtLine(lineObj);if(context=="local")yOff+=paddingTop(cm.display);else yOff-=cm.display.viewOffset;if(context=="page"||context=="window"){var lOff=cm.display.lineSpace.getBoundingClientRect();yOff+=lOff.top+(context=="window"?0:pageScrollY());var xOff=lOff.left+(context=="window"?0:pageScrollX());rect.left+=xOff;rect.right+=xOff}
rect.top+=yOff;rect.bottom+=yOff;return rect}
function fromCoordSystem(cm,coords,context){if(context=="div")return coords;var left=coords.left,top=coords.top;if(context=="page"){left-=pageScrollX();top-=pageScrollY()}else if(context=="local"||!context){var localBox=cm.display.sizer.getBoundingClientRect();left+=localBox.left;top+=localBox.top}
var lineSpaceBox=cm.display.lineSpace.getBoundingClientRect();return{left:left-lineSpaceBox.left,top:top-lineSpaceBox.top}}
function charCoords(cm,pos,context,lineObj,bias){if(!lineObj)lineObj=getLine(cm.doc,pos.line);return intoCoordSystem(cm,lineObj,measureChar(cm,lineObj,pos.ch,bias),context)}
function cursorCoords(cm,pos,context,lineObj,preparedMeasure,varHeight){lineObj=lineObj||getLine(cm.doc,pos.line);if(!preparedMeasure)preparedMeasure=prepareMeasureForLine(cm,lineObj);function get(ch,right){var m=measureCharPrepared(cm,preparedMeasure,ch,right?"right":"left",varHeight);if(right)m.left=m.right;else m.right=m.left;return intoCoordSystem(cm,lineObj,m,context)}
function getBidi(ch,partPos){var part=order[partPos],right=part.level%2;if(ch==bidiLeft(part)&&partPos&&part.level<order[partPos-1].level){part=order[--partPos];ch=bidiRight(part)-(part.level%2?0:1);right=!0}else if(ch==bidiRight(part)&&partPos<order.length-1&&part.level<order[partPos+1].level){part=order[++partPos];ch=bidiLeft(part)-part.level%2;right=!1}
if(right&&ch==part.to&&ch>part.from)return get(ch-1);return get(ch,right)}
var order=getOrder(lineObj),ch=pos.ch;if(!order)return get(ch);var partPos=getBidiPartAt(order,ch);var val=getBidi(ch,partPos);if(bidiOther!=null)val.other=getBidi(ch,bidiOther);return val}
function estimateCoords(cm,pos){var left=0,pos=clipPos(cm.doc,pos);if(!cm.options.lineWrapping)left=charWidth(cm.display)*pos.ch;var lineObj=getLine(cm.doc,pos.line);var top=heightAtLine(lineObj)+paddingTop(cm.display);return{left:left,right:left,top:top,bottom:top+lineObj.height}}
function PosWithInfo(line,ch,outside,xRel){var pos=Pos(line,ch);pos.xRel=xRel;if(outside)pos.outside=!0;return pos}
function coordsChar(cm,x,y){var doc=cm.doc;y+=cm.display.viewOffset;if(y<0)return PosWithInfo(doc.first,0,!0,-1);var lineN=lineAtHeight(doc,y),last=doc.first+doc.size-1;if(lineN>last)
return PosWithInfo(doc.first+doc.size-1,getLine(doc,last).text.length,!0,1);if(x<0)x=0;var lineObj=getLine(doc,lineN);for(;;){var found=coordsCharInner(cm,lineObj,lineN,x,y);var merged=collapsedSpanAtEnd(lineObj);var mergedPos=merged&&merged.find(0,!0);if(merged&&(found.ch>mergedPos.from.ch||found.ch==mergedPos.from.ch&&found.xRel>0))
lineN=lineNo(lineObj=mergedPos.to.line);else return found}}
function coordsCharInner(cm,lineObj,lineNo,x,y){var innerOff=y-heightAtLine(lineObj);var wrongLine=!1,adjust=2*cm.display.wrapper.clientWidth;var preparedMeasure=prepareMeasureForLine(cm,lineObj);function getX(ch){var sp=cursorCoords(cm,Pos(lineNo,ch),"line",lineObj,preparedMeasure);wrongLine=!0;if(innerOff>sp.bottom)return sp.left-adjust;else if(innerOff<sp.top)return sp.left+adjust;else wrongLine=!1;return sp.left}
var bidi=getOrder(lineObj),dist=lineObj.text.length;var from=lineLeft(lineObj),to=lineRight(lineObj);var fromX=getX(from),fromOutside=wrongLine,toX=getX(to),toOutside=wrongLine;if(x>toX)return PosWithInfo(lineNo,to,toOutside,1);for(;;){if(bidi?to==from||to==moveVisually(lineObj,from,1):to-from<=1){var ch=x<fromX||x-fromX<=toX-x?from:to;var outside=ch==from?fromOutside:toOutside
var xDiff=x-(ch==from?fromX:toX);if(toOutside&&!bidi&&!/\s/.test(lineObj.text.charAt(ch))&&xDiff>0&&ch<lineObj.text.length&&preparedMeasure.view.measure.heights.length>1){var charSize=measureCharPrepared(cm,preparedMeasure,ch,"right");if(innerOff<=charSize.bottom&&innerOff>=charSize.top&&Math.abs(x-charSize.right)<xDiff){outside=!1
ch++
xDiff=x-charSize.right}}
while(isExtendingChar(lineObj.text.charAt(ch)))++ch;var pos=PosWithInfo(lineNo,ch,outside,xDiff<-1?-1:xDiff>1?1:0);return pos}
var step=Math.ceil(dist/2),middle=from+step;if(bidi){middle=from;for(var i=0;i<step;++i)middle=moveVisually(lineObj,middle,1);}
var middleX=getX(middle);if(middleX>x){to=middle;toX=middleX;if(toOutside=wrongLine)toX+=1000;dist=step}else{from=middle;fromX=middleX;fromOutside=wrongLine;dist-=step}}}
var measureText;function textHeight(display){if(display.cachedTextHeight!=null)return display.cachedTextHeight;if(measureText==null){measureText=elt("pre");for(var i=0;i<49;++i){measureText.appendChild(document.createTextNode("x"));measureText.appendChild(elt("br"))}
measureText.appendChild(document.createTextNode("x"))}
removeChildrenAndAdd(display.measure,measureText);var height=measureText.offsetHeight/50;if(height>3)display.cachedTextHeight=height;removeChildren(display.measure);return height||1}
function charWidth(display){if(display.cachedCharWidth!=null)return display.cachedCharWidth;var anchor=elt("span","xxxxxxxxxx");var pre=elt("pre",[anchor]);removeChildrenAndAdd(display.measure,pre);var rect=anchor.getBoundingClientRect(),width=(rect.right-rect.left)/10;if(width>2)display.cachedCharWidth=width;return width||10}
var operationGroup=null;var nextOpId=0;function startOperation(cm){cm.curOp={cm:cm,viewChanged:!1,startHeight:cm.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++nextOpId};if(operationGroup){operationGroup.ops.push(cm.curOp)}else{cm.curOp.ownsGroup=operationGroup={ops:[cm.curOp],delayedCallbacks:[]}}}
function fireCallbacksForOps(group){var callbacks=group.delayedCallbacks,i=0;do{for(;i<callbacks.length;i++)
callbacks[i].call(null);for(var j=0;j<group.ops.length;j++){var op=group.ops[j];if(op.cursorActivityHandlers)
while(op.cursorActivityCalled<op.cursorActivityHandlers.length)
op.cursorActivityHandlers[op.cursorActivityCalled++].call(null,op.cm);}}while(i<callbacks.length);}
function endOperation(cm){var op=cm.curOp,group=op.ownsGroup;if(!group)return;try{fireCallbacksForOps(group)}finally{operationGroup=null;for(var i=0;i<group.ops.length;i++)
group.ops[i].cm.curOp=null;endOperations(group)}}
function endOperations(group){var ops=group.ops;for(var i=0;i<ops.length;i++)
endOperation_R1(ops[i]);for(var i=0;i<ops.length;i++)
endOperation_W1(ops[i]);for(var i=0;i<ops.length;i++)
endOperation_R2(ops[i]);for(var i=0;i<ops.length;i++)
endOperation_W2(ops[i]);for(var i=0;i<ops.length;i++)
endOperation_finish(ops[i]);}
function endOperation_R1(op){var cm=op.cm,display=cm.display;maybeClipScrollbars(cm);if(op.updateMaxLine)findMaxLine(cm);op.mustUpdate=op.viewChanged||op.forceUpdate||op.scrollTop!=null||op.scrollToPos&&(op.scrollToPos.from.line<display.viewFrom||op.scrollToPos.to.line>=display.viewTo)||display.maxLineChanged&&cm.options.lineWrapping;op.update=op.mustUpdate&&new DisplayUpdate(cm,op.mustUpdate&&{top:op.scrollTop,ensure:op.scrollToPos},op.forceUpdate)}
function endOperation_W1(op){op.updatedDisplay=op.mustUpdate&&updateDisplayIfNeeded(op.cm,op.update)}
function endOperation_R2(op){var cm=op.cm,display=cm.display;if(op.updatedDisplay)updateHeightsInViewport(cm);op.barMeasure=measureForScrollbars(cm);if(display.maxLineChanged&&!cm.options.lineWrapping){op.adjustWidthTo=measureChar(cm,display.maxLine,display.maxLine.text.length).left+3;cm.display.sizerWidth=op.adjustWidthTo;op.barMeasure.scrollWidth=Math.max(display.scroller.clientWidth,display.sizer.offsetLeft+op.adjustWidthTo+scrollGap(cm)+cm.display.barWidth);op.maxScrollLeft=Math.max(0,display.sizer.offsetLeft+op.adjustWidthTo-displayWidth(cm))}
if(op.updatedDisplay||op.selectionChanged)
op.preparedSelection=display.input.prepareSelection(op.focus)}
function endOperation_W2(op){var cm=op.cm;if(op.adjustWidthTo!=null){cm.display.sizer.style.minWidth=op.adjustWidthTo+"px";if(op.maxScrollLeft<cm.doc.scrollLeft)
setScrollLeft(cm,Math.min(cm.display.scroller.scrollLeft,op.maxScrollLeft),!0);cm.display.maxLineChanged=!1}
var takeFocus=op.focus&&op.focus==activeElt()&&(!document.hasFocus||document.hasFocus())
if(op.preparedSelection)
cm.display.input.showSelection(op.preparedSelection,takeFocus);if(op.updatedDisplay||op.startHeight!=cm.doc.height)
updateScrollbars(cm,op.barMeasure);if(op.updatedDisplay)
setDocumentHeight(cm,op.barMeasure);if(op.selectionChanged)restartBlink(cm);if(cm.state.focused&&op.updateInput)
cm.display.input.reset(op.typing);if(takeFocus)ensureFocus(op.cm)}
function endOperation_finish(op){var cm=op.cm,display=cm.display,doc=cm.doc;if(op.updatedDisplay)postUpdateDisplay(cm,op.update);if(display.wheelStartX!=null&&(op.scrollTop!=null||op.scrollLeft!=null||op.scrollToPos))
display.wheelStartX=display.wheelStartY=null;if(op.scrollTop!=null&&(display.scroller.scrollTop!=op.scrollTop||op.forceScroll)){doc.scrollTop=Math.max(0,Math.min(display.scroller.scrollHeight-display.scroller.clientHeight,op.scrollTop));display.scrollbars.setScrollTop(doc.scrollTop);display.scroller.scrollTop=doc.scrollTop}
if(op.scrollLeft!=null&&(display.scroller.scrollLeft!=op.scrollLeft||op.forceScroll)){doc.scrollLeft=Math.max(0,Math.min(display.scroller.scrollWidth-display.scroller.clientWidth,op.scrollLeft));display.scrollbars.setScrollLeft(doc.scrollLeft);display.scroller.scrollLeft=doc.scrollLeft;alignHorizontally(cm)}
if(op.scrollToPos){var coords=scrollPosIntoView(cm,clipPos(doc,op.scrollToPos.from),clipPos(doc,op.scrollToPos.to),op.scrollToPos.margin);if(op.scrollToPos.isCursor&&cm.state.focused)maybeScrollWindow(cm,coords)}
var hidden=op.maybeHiddenMarkers,unhidden=op.maybeUnhiddenMarkers;if(hidden)for(var i=0;i<hidden.length;++i)
if(!hidden[i].lines.length)signal(hidden[i],"hide");if(unhidden)for(var i=0;i<unhidden.length;++i)
if(unhidden[i].lines.length)signal(unhidden[i],"unhide");if(display.wrapper.offsetHeight)
doc.scrollTop=cm.display.scroller.scrollTop;if(op.changeObjs)
signal(cm,"changes",cm,op.changeObjs);if(op.update)
op.update.finish()}
function runInOp(cm,f){if(cm.curOp)return f();startOperation(cm);try{return f()}finally{endOperation(cm)}}
function operation(cm,f){return function(){if(cm.curOp)return f.apply(cm,arguments);startOperation(cm);try{return f.apply(cm,arguments)}finally{endOperation(cm)}}}
function methodOp(f){return function(){if(this.curOp)return f.apply(this,arguments);startOperation(this);try{return f.apply(this,arguments)}finally{endOperation(this)}}}
function docMethodOp(f){return function(){var cm=this.cm;if(!cm||cm.curOp)return f.apply(this,arguments);startOperation(cm);try{return f.apply(this,arguments)}finally{endOperation(cm)}}}
function LineView(doc,line,lineN){this.line=line;this.rest=visualLineContinued(line);this.size=this.rest?lineNo(lst(this.rest))-lineN+1:1;this.node=this.text=null;this.hidden=lineIsHidden(doc,line)}
function buildViewArray(cm,from,to){var array=[],nextPos;for(var pos=from;pos<to;pos=nextPos){var view=new LineView(cm.doc,getLine(cm.doc,pos),pos);nextPos=pos+view.size;array.push(view)}
return array}
function regChange(cm,from,to,lendiff){if(from==null)from=cm.doc.first;if(to==null)to=cm.doc.first+cm.doc.size;if(!lendiff)lendiff=0;var display=cm.display;if(lendiff&&to<display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>from))
display.updateLineNumbers=from;cm.curOp.viewChanged=!0;if(from>=display.viewTo){if(sawCollapsedSpans&&visualLineNo(cm.doc,from)<display.viewTo)
resetView(cm)}else if(to<=display.viewFrom){if(sawCollapsedSpans&&visualLineEndNo(cm.doc,to+lendiff)>display.viewFrom){resetView(cm)}else{display.viewFrom+=lendiff;display.viewTo+=lendiff}}else if(from<=display.viewFrom&&to>=display.viewTo){resetView(cm)}else if(from<=display.viewFrom){var cut=viewCuttingPoint(cm,to,to+lendiff,1);if(cut){display.view=display.view.slice(cut.index);display.viewFrom=cut.lineN;display.viewTo+=lendiff}else{resetView(cm)}}else if(to>=display.viewTo){var cut=viewCuttingPoint(cm,from,from,-1);if(cut){display.view=display.view.slice(0,cut.index);display.viewTo=cut.lineN}else{resetView(cm)}}else{var cutTop=viewCuttingPoint(cm,from,from,-1);var cutBot=viewCuttingPoint(cm,to,to+lendiff,1);if(cutTop&&cutBot){display.view=display.view.slice(0,cutTop.index).concat(buildViewArray(cm,cutTop.lineN,cutBot.lineN)).concat(display.view.slice(cutBot.index));display.viewTo+=lendiff}else{resetView(cm)}}
var ext=display.externalMeasured;if(ext){if(to<ext.lineN)
ext.lineN+=lendiff;else if(from<ext.lineN+ext.size)
display.externalMeasured=null}}
function regLineChange(cm,line,type){cm.curOp.viewChanged=!0;var display=cm.display,ext=cm.display.externalMeasured;if(ext&&line>=ext.lineN&&line<ext.lineN+ext.size)
display.externalMeasured=null;if(line<display.viewFrom||line>=display.viewTo)return;var lineView=display.view[findViewIndex(cm,line)];if(lineView.node==null)return;var arr=lineView.changes||(lineView.changes=[]);if(indexOf(arr,type)==-1)arr.push(type)}
function resetView(cm){cm.display.viewFrom=cm.display.viewTo=cm.doc.first;cm.display.view=[];cm.display.viewOffset=0}
function findViewIndex(cm,n){if(n>=cm.display.viewTo)return null;n-=cm.display.viewFrom;if(n<0)return null;var view=cm.display.view;for(var i=0;i<view.length;i++){n-=view[i].size;if(n<0)return i}}
function viewCuttingPoint(cm,oldN,newN,dir){var index=findViewIndex(cm,oldN),diff,view=cm.display.view;if(!sawCollapsedSpans||newN==cm.doc.first+cm.doc.size)
return{index:index,lineN:newN};for(var i=0,n=cm.display.viewFrom;i<index;i++)
n+=view[i].size;if(n!=oldN){if(dir>0){if(index==view.length-1)return null;diff=(n+view[index].size)-oldN;index++}else{diff=n-oldN}
oldN+=diff;newN+=diff}
while(visualLineNo(cm.doc,newN)!=newN){if(index==(dir<0?0:view.length-1))return null;newN+=dir*view[index-(dir<0?1:0)].size;index+=dir}
return{index:index,lineN:newN}}
function adjustView(cm,from,to){var display=cm.display,view=display.view;if(view.length==0||from>=display.viewTo||to<=display.viewFrom){display.view=buildViewArray(cm,from,to);display.viewFrom=from}else{if(display.viewFrom>from)
display.view=buildViewArray(cm,from,display.viewFrom).concat(display.view);else if(display.viewFrom<from)
display.view=display.view.slice(findViewIndex(cm,from));display.viewFrom=from;if(display.viewTo<to)
display.view=display.view.concat(buildViewArray(cm,display.viewTo,to));else if(display.viewTo>to)
display.view=display.view.slice(0,findViewIndex(cm,to))}
display.viewTo=to}
function countDirtyView(cm){var view=cm.display.view,dirty=0;for(var i=0;i<view.length;i++){var lineView=view[i];if(!lineView.hidden&&(!lineView.node||lineView.changes))++dirty}
return dirty}
function registerEventHandlers(cm){var d=cm.display;on(d.scroller,"mousedown",operation(cm,onMouseDown));if(ie&&ie_version<11)
on(d.scroller,"dblclick",operation(cm,function(e){if(signalDOMEvent(cm,e))return;var pos=posFromMouse(cm,e);if(!pos||clickInGutter(cm,e)||eventInWidget(cm.display,e))return;e_preventDefault(e);var word=cm.findWordAt(pos);extendSelection(cm.doc,word.anchor,word.head)}));else on(d.scroller,"dblclick",function(e){signalDOMEvent(cm,e)||e_preventDefault(e)});if(!captureRightClick)on(d.scroller,"contextmenu",function(e){onContextMenu(cm,e)});var touchFinished,prevTouch={end:0};function finishTouch(){if(d.activeTouch){touchFinished=setTimeout(function(){d.activeTouch=null},1000);prevTouch=d.activeTouch;prevTouch.end=+new Date}};function isMouseLikeTouchEvent(e){if(e.touches.length!=1)return!1;var touch=e.touches[0];return touch.radiusX<=1&&touch.radiusY<=1}
function farAway(touch,other){if(other.left==null)return!0;var dx=other.left-touch.left,dy=other.top-touch.top;return dx*dx+dy*dy>20*20}
on(d.scroller,"touchstart",function(e){if(!signalDOMEvent(cm,e)&&!isMouseLikeTouchEvent(e)){clearTimeout(touchFinished);var now=+new Date;d.activeTouch={start:now,moved:!1,prev:now-prevTouch.end<=300?prevTouch:null};if(e.touches.length==1){d.activeTouch.left=e.touches[0].pageX;d.activeTouch.top=e.touches[0].pageY}}});on(d.scroller,"touchmove",function(){if(d.activeTouch)d.activeTouch.moved=!0});on(d.scroller,"touchend",function(e){var touch=d.activeTouch;if(touch&&!eventInWidget(d,e)&&touch.left!=null&&!touch.moved&&new Date-touch.start<300){var pos=cm.coordsChar(d.activeTouch,"page"),range;if(!touch.prev||farAway(touch,touch.prev))
range=new Range(pos,pos);else if(!touch.prev.prev||farAway(touch,touch.prev.prev))
range=cm.findWordAt(pos);else range=new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0)));cm.setSelection(range.anchor,range.head);cm.focus();e_preventDefault(e)}
finishTouch()});on(d.scroller,"touchcancel",finishTouch);on(d.scroller,"scroll",function(){if(d.scroller.clientHeight){setScrollTop(cm,d.scroller.scrollTop);setScrollLeft(cm,d.scroller.scrollLeft,!0);signal(cm,"scroll",cm)}});on(d.scroller,"mousewheel",function(e){onScrollWheel(cm,e)});on(d.scroller,"DOMMouseScroll",function(e){onScrollWheel(cm,e)});on(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={enter:function(e){if(!signalDOMEvent(cm,e))e_stop(e)},over:function(e){if(!signalDOMEvent(cm,e)){onDragOver(cm,e);e_stop(e)}},start:function(e){onDragStart(cm,e)},drop:operation(cm,onDrop),leave:function(e){if(!signalDOMEvent(cm,e)){clearDragCursor(cm)}}};var inp=d.input.getField();on(inp,"keyup",function(e){onKeyUp.call(cm,e)});on(inp,"keydown",operation(cm,onKeyDown));on(inp,"keypress",operation(cm,onKeyPress));on(inp,"focus",function(e){onFocus(cm,e)});on(inp,"blur",function(e){onBlur(cm,e)})}
function dragDropChanged(cm,value,old){var wasOn=old&&old!=CodeMirror.Init;if(!value!=!wasOn){var funcs=cm.display.dragFunctions;var toggle=value?on:off;toggle(cm.display.scroller,"dragstart",funcs.start);toggle(cm.display.scroller,"dragenter",funcs.enter);toggle(cm.display.scroller,"dragover",funcs.over);toggle(cm.display.scroller,"dragleave",funcs.leave);toggle(cm.display.scroller,"drop",funcs.drop)}}
function onResize(cm){var d=cm.display;if(d.lastWrapHeight==d.wrapper.clientHeight&&d.lastWrapWidth==d.wrapper.clientWidth)
return;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.scrollbarsClipped=!1;cm.setSize()}
function eventInWidget(display,e){for(var n=e_target(e);n!=display.wrapper;n=n.parentNode){if(!n||(n.nodeType==1&&n.getAttribute("cm-ignore-events")=="true")||(n.parentNode==display.sizer&&n!=display.mover))
return!0}}
function posFromMouse(cm,e,liberal,forRect){var display=cm.display;if(!liberal&&e_target(e).getAttribute("cm-not-content")=="true")return null;var x,y,space=display.lineSpace.getBoundingClientRect();try{x=e.clientX-space.left;y=e.clientY-space.top}catch(e){return null}
var coords=coordsChar(cm,x,y),line;if(forRect&&coords.xRel==1&&(line=getLine(cm.doc,coords.line).text).length==coords.ch){var colDiff=countColumn(line,line.length,cm.options.tabSize)-line.length;coords=Pos(coords.line,Math.max(0,Math.round((x-paddingH(cm.display).left)/charWidth(cm.display))-colDiff))}
return coords}
function onMouseDown(e){var cm=this,display=cm.display;if(signalDOMEvent(cm,e)||display.activeTouch&&display.input.supportsTouch())return;display.shift=e.shiftKey;if(eventInWidget(display,e)){if(!webkit){display.scroller.draggable=!1;setTimeout(function(){display.scroller.draggable=!0},100)}
return}
if(clickInGutter(cm,e))return;var start=posFromMouse(cm,e);window.focus();switch(e_button(e)){case 1:if(cm.state.selectingText)
cm.state.selectingText(e);else if(start)
leftButtonDown(cm,e,start);else if(e_target(e)==display.scroller)
e_preventDefault(e);break;case 2:if(webkit)cm.state.lastMiddleDown=+new Date;if(start)extendSelection(cm.doc,start);setTimeout(function(){display.input.focus()},20);e_preventDefault(e);break;case 3:if(captureRightClick)onContextMenu(cm,e);else delayBlurEvent(cm);break}}
var lastClick,lastDoubleClick;function leftButtonDown(cm,e,start){if(ie)setTimeout(bind(ensureFocus,cm),0);else cm.curOp.focus=activeElt();var now=+new Date,type;if(lastDoubleClick&&lastDoubleClick.time>now-400&&cmp(lastDoubleClick.pos,start)==0){type="triple"}else if(lastClick&&lastClick.time>now-400&&cmp(lastClick.pos,start)==0){type="double";lastDoubleClick={time:now,pos:start}}else{type="single";lastClick={time:now,pos:start}}
var sel=cm.doc.sel,modifier=mac?e.metaKey:e.ctrlKey,contained;if(cm.options.dragDrop&&dragAndDrop&&!cm.isReadOnly()&&type=="single"&&(contained=sel.contains(start))>-1&&(cmp((contained=sel.ranges[contained]).from(),start)<0||start.xRel>0)&&(cmp(contained.to(),start)>0||start.xRel<0))
leftButtonStartDrag(cm,e,start,modifier);else leftButtonSelect(cm,e,start,type,modifier)}
function leftButtonStartDrag(cm,e,start,modifier){var display=cm.display,startTime=+new Date;var dragEnd=operation(cm,function(e2){if(webkit)display.scroller.draggable=!1;cm.state.draggingText=!1;off(document,"mouseup",dragEnd);off(display.scroller,"drop",dragEnd);if(Math.abs(e.clientX-e2.clientX)+Math.abs(e.clientY-e2.clientY)<10){e_preventDefault(e2);if(!modifier&&+new Date-200<startTime)
extendSelection(cm.doc,start);if(webkit||ie&&ie_version==9)
setTimeout(function(){document.body.focus();display.input.focus()},20);else display.input.focus()}});if(webkit)display.scroller.draggable=!0;cm.state.draggingText=dragEnd;dragEnd.copy=mac?e.altKey:e.ctrlKey
if(display.scroller.dragDrop)display.scroller.dragDrop();on(document,"mouseup",dragEnd);on(display.scroller,"drop",dragEnd)}
function leftButtonSelect(cm,e,start,type,addNew){var display=cm.display,doc=cm.doc;e_preventDefault(e);var ourRange,ourIndex,startSel=doc.sel,ranges=startSel.ranges;if(addNew&&!e.shiftKey){ourIndex=doc.sel.contains(start);if(ourIndex>-1)
ourRange=ranges[ourIndex];else ourRange=new Range(start,start)}else{ourRange=doc.sel.primary();ourIndex=doc.sel.primIndex}
if(chromeOS?e.shiftKey&&e.metaKey:e.altKey){type="rect";if(!addNew)ourRange=new Range(start,start);start=posFromMouse(cm,e,!0,!0);ourIndex=-1}else if(type=="double"){var word=cm.findWordAt(start);if(cm.display.shift||doc.extend)
ourRange=extendRange(doc,ourRange,word.anchor,word.head);else ourRange=word}else if(type=="triple"){var line=new Range(Pos(start.line,0),clipPos(doc,Pos(start.line+1,0)));if(cm.display.shift||doc.extend)
ourRange=extendRange(doc,ourRange,line.anchor,line.head);else ourRange=line}else{ourRange=extendRange(doc,ourRange,start)}
if(!addNew){ourIndex=0;setSelection(doc,new Selection([ourRange],0),sel_mouse);startSel=doc.sel}else if(ourIndex==-1){ourIndex=ranges.length;setSelection(doc,normalizeSelection(ranges.concat([ourRange]),ourIndex),{scroll:!1,origin:"*mouse"})}else if(ranges.length>1&&ranges[ourIndex].empty()&&type=="single"&&!e.shiftKey){setSelection(doc,normalizeSelection(ranges.slice(0,ourIndex).concat(ranges.slice(ourIndex+1)),0),{scroll:!1,origin:"*mouse"});startSel=doc.sel}else{replaceOneSelection(doc,ourIndex,ourRange,sel_mouse)}
var lastPos=start;function extendTo(pos){if(cmp(lastPos,pos)==0)return;lastPos=pos;if(type=="rect"){var ranges=[],tabSize=cm.options.tabSize;var startCol=countColumn(getLine(doc,start.line).text,start.ch,tabSize);var posCol=countColumn(getLine(doc,pos.line).text,pos.ch,tabSize);var left=Math.min(startCol,posCol),right=Math.max(startCol,posCol);for(var line=Math.min(start.line,pos.line),end=Math.min(cm.lastLine(),Math.max(start.line,pos.line));line<=end;line++){var text=getLine(doc,line).text,leftPos=findColumn(text,left,tabSize);if(left==right)
ranges.push(new Range(Pos(line,leftPos),Pos(line,leftPos)));else if(text.length>leftPos)
ranges.push(new Range(Pos(line,leftPos),Pos(line,findColumn(text,right,tabSize))))}
if(!ranges.length)ranges.push(new Range(start,start));setSelection(doc,normalizeSelection(startSel.ranges.slice(0,ourIndex).concat(ranges),ourIndex),{origin:"*mouse",scroll:!1});cm.scrollIntoView(pos)}else{var oldRange=ourRange;var anchor=oldRange.anchor,head=pos;if(type!="single"){if(type=="double")
var range=cm.findWordAt(pos);else var range=new Range(Pos(pos.line,0),clipPos(doc,Pos(pos.line+1,0)));if(cmp(range.anchor,anchor)>0){head=range.head;anchor=minPos(oldRange.from(),range.anchor)}else{head=range.anchor;anchor=maxPos(oldRange.to(),range.head)}}
var ranges=startSel.ranges.slice(0);ranges[ourIndex]=new Range(clipPos(doc,anchor),head);setSelection(doc,normalizeSelection(ranges,ourIndex),sel_mouse)}}
var editorSize=display.wrapper.getBoundingClientRect();var counter=0;function extend(e){var curCount=++counter;var cur=posFromMouse(cm,e,!0,type=="rect");if(!cur)return;if(cmp(cur,lastPos)!=0){cm.curOp.focus=activeElt();extendTo(cur);var visible=visibleLines(display,doc);if(cur.line>=visible.to||cur.line<visible.from)
setTimeout(operation(cm,function(){if(counter==curCount)extend(e)}),150)}else{var outside=e.clientY<editorSize.top?-20:e.clientY>editorSize.bottom?20:0;if(outside)setTimeout(operation(cm,function(){if(counter!=curCount)return;display.scroller.scrollTop+=outside;extend(e)}),50)}}
function done(e){cm.state.selectingText=!1;counter=Infinity;e_preventDefault(e);display.input.focus();off(document,"mousemove",move);off(document,"mouseup",up);doc.history.lastSelOrigin=null}
var move=operation(cm,function(e){if(!e_button(e))done(e);else extend(e)});var up=operation(cm,done);cm.state.selectingText=up;on(document,"mousemove",move);on(document,"mouseup",up)}
function gutterEvent(cm,e,type,prevent){try{var mX=e.clientX,mY=e.clientY}catch(e){return!1}
if(mX>=Math.floor(cm.display.gutters.getBoundingClientRect().right))return!1;if(prevent)e_preventDefault(e);var display=cm.display;var lineBox=display.lineDiv.getBoundingClientRect();if(mY>lineBox.bottom||!hasHandler(cm,type))return e_defaultPrevented(e);mY-=lineBox.top-display.viewOffset;for(var i=0;i<cm.options.gutters.length;++i){var g=display.gutters.childNodes[i];if(g&&g.getBoundingClientRect().right>=mX){var line=lineAtHeight(cm.doc,mY);var gutter=cm.options.gutters[i];signal(cm,type,cm,line,gutter,e);return e_defaultPrevented(e)}}}
function clickInGutter(cm,e){return gutterEvent(cm,e,"gutterClick",!0)}
var lastDrop=0;function onDrop(e){var cm=this;clearDragCursor(cm);if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e))
return;e_preventDefault(e);if(ie)lastDrop=+new Date;var pos=posFromMouse(cm,e,!0),files=e.dataTransfer.files;if(!pos||cm.isReadOnly())return;if(files&&files.length&&window.FileReader&&window.File){var n=files.length,text=Array(n),read=0;var loadFile=function(file,i){if(cm.options.allowDropFileTypes&&indexOf(cm.options.allowDropFileTypes,file.type)==-1)
return;var reader=new FileReader;reader.onload=operation(cm,function(){var content=reader.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(content))content="";text[i]=content;if(++read==n){pos=clipPos(cm.doc,pos);var change={from:pos,to:pos,text:cm.doc.splitLines(text.join(cm.doc.lineSeparator())),origin:"paste"};makeChange(cm.doc,change);setSelectionReplaceHistory(cm.doc,simpleSelection(pos,changeEnd(change)))}});reader.readAsText(file)};for(var i=0;i<n;++i)loadFile(files[i],i);}else{if(cm.state.draggingText&&cm.doc.sel.contains(pos)>-1){cm.state.draggingText(e);setTimeout(function(){cm.display.input.focus()},20);return}
try{var text=e.dataTransfer.getData("Text");if(text){if(cm.state.draggingText&&!cm.state.draggingText.copy)
var selected=cm.listSelections();setSelectionNoUndo(cm.doc,simpleSelection(pos,pos));if(selected)for(var i=0;i<selected.length;++i)
replaceRange(cm.doc,"",selected[i].anchor,selected[i].head,"drag");cm.replaceSelection(text,"around","paste");cm.display.input.focus()}}catch(e){}}}
function onDragStart(cm,e){if(ie&&(!cm.state.draggingText||+new Date-lastDrop<100)){e_stop(e);return}
if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e))return;e.dataTransfer.setData("Text",cm.getSelection());e.dataTransfer.effectAllowed="copyMove"
if(e.dataTransfer.setDragImage&&!safari){var img=elt("img",null,null,"position: fixed; left: 0; top: 0;");img.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(presto){img.width=img.height=1;cm.display.wrapper.appendChild(img);img._top=img.offsetTop}
e.dataTransfer.setDragImage(img,0,0);if(presto)img.parentNode.removeChild(img)}}
function onDragOver(cm,e){var pos=posFromMouse(cm,e);if(!pos)return;var frag=document.createDocumentFragment();drawSelectionCursor(cm,pos,frag);if(!cm.display.dragCursor){cm.display.dragCursor=elt("div",null,"CodeMirror-cursors CodeMirror-dragcursors");cm.display.lineSpace.insertBefore(cm.display.dragCursor,cm.display.cursorDiv)}
removeChildrenAndAdd(cm.display.dragCursor,frag)}
function clearDragCursor(cm){if(cm.display.dragCursor){cm.display.lineSpace.removeChild(cm.display.dragCursor);cm.display.dragCursor=null}}
function setScrollTop(cm,val){if(Math.abs(cm.doc.scrollTop-val)<2)return;cm.doc.scrollTop=val;if(!gecko)updateDisplaySimple(cm,{top:val});if(cm.display.scroller.scrollTop!=val)cm.display.scroller.scrollTop=val;cm.display.scrollbars.setScrollTop(val);if(gecko)updateDisplaySimple(cm);startWorker(cm,100)}
function setScrollLeft(cm,val,isScroller){if(isScroller?val==cm.doc.scrollLeft:Math.abs(cm.doc.scrollLeft-val)<2)return;val=Math.min(val,cm.display.scroller.scrollWidth-cm.display.scroller.clientWidth);cm.doc.scrollLeft=val;alignHorizontally(cm);if(cm.display.scroller.scrollLeft!=val)cm.display.scroller.scrollLeft=val;cm.display.scrollbars.setScrollLeft(val)}
var wheelSamples=0,wheelPixelsPerUnit=null;if(ie)wheelPixelsPerUnit=-.53;else if(gecko)wheelPixelsPerUnit=15;else if(chrome)wheelPixelsPerUnit=-.7;else if(safari)wheelPixelsPerUnit=-1/3;var wheelEventDelta=function(e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;if(dx==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS)dx=e.detail;if(dy==null&&e.detail&&e.axis==e.VERTICAL_AXIS)dy=e.detail;else if(dy==null)dy=e.wheelDelta;return{x:dx,y:dy}};CodeMirror.wheelEventPixels=function(e){var delta=wheelEventDelta(e);delta.x*=wheelPixelsPerUnit;delta.y*=wheelPixelsPerUnit;return delta};function onScrollWheel(cm,e){var delta=wheelEventDelta(e),dx=delta.x,dy=delta.y;var display=cm.display,scroll=display.scroller;var canScrollX=scroll.scrollWidth>scroll.clientWidth;var canScrollY=scroll.scrollHeight>scroll.clientHeight;if(!(dx&&canScrollX||dy&&canScrollY))return;if(dy&&mac&&webkit){outer:for(var cur=e.target,view=display.view;cur!=scroll;cur=cur.parentNode){for(var i=0;i<view.length;i++){if(view[i].node==cur){cm.display.currentWheelTarget=cur;break outer}}}}
if(dx&&!gecko&&!presto&&wheelPixelsPerUnit!=null){if(dy&&canScrollY)
setScrollTop(cm,Math.max(0,Math.min(scroll.scrollTop+dy*wheelPixelsPerUnit,scroll.scrollHeight-scroll.clientHeight)));setScrollLeft(cm,Math.max(0,Math.min(scroll.scrollLeft+dx*wheelPixelsPerUnit,scroll.scrollWidth-scroll.clientWidth)));if(!dy||(dy&&canScrollY))
e_preventDefault(e);display.wheelStartX=null;return}
if(dy&&wheelPixelsPerUnit!=null){var pixels=dy*wheelPixelsPerUnit;var top=cm.doc.scrollTop,bot=top+display.wrapper.clientHeight;if(pixels<0)top=Math.max(0,top+pixels-50);else bot=Math.min(cm.doc.height,bot+pixels+50);updateDisplaySimple(cm,{top:top,bottom:bot})}
if(wheelSamples<20){if(display.wheelStartX==null){display.wheelStartX=scroll.scrollLeft;display.wheelStartY=scroll.scrollTop;display.wheelDX=dx;display.wheelDY=dy;setTimeout(function(){if(display.wheelStartX==null)return;var movedX=scroll.scrollLeft-display.wheelStartX;var movedY=scroll.scrollTop-display.wheelStartY;var sample=(movedY&&display.wheelDY&&movedY/display.wheelDY)||(movedX&&display.wheelDX&&movedX/display.wheelDX);display.wheelStartX=display.wheelStartY=null;if(!sample)return;wheelPixelsPerUnit=(wheelPixelsPerUnit*wheelSamples+sample)/(wheelSamples+1);++wheelSamples},200)}else{display.wheelDX+=dx;display.wheelDY+=dy}}}
function doHandleBinding(cm,bound,dropShift){if(typeof bound=="string"){bound=commands[bound];if(!bound)return!1}
cm.display.input.ensurePolled();var prevShift=cm.display.shift,done=!1;try{if(cm.isReadOnly())cm.state.suppressEdits=!0;if(dropShift)cm.display.shift=!1;done=bound(cm)!=Pass}finally{cm.display.shift=prevShift;cm.state.suppressEdits=!1}
return done}
function lookupKeyForEditor(cm,name,handle){for(var i=0;i<cm.state.keyMaps.length;i++){var result=lookupKey(name,cm.state.keyMaps[i],handle,cm);if(result)return result}
return(cm.options.extraKeys&&lookupKey(name,cm.options.extraKeys,handle,cm))||lookupKey(name,cm.options.keyMap,handle,cm)}
var stopSeq=new Delayed;function dispatchKey(cm,name,e,handle){var seq=cm.state.keySeq;if(seq){if(isModifierKey(name))return"handled";stopSeq.set(50,function(){if(cm.state.keySeq==seq){cm.state.keySeq=null;cm.display.input.reset()}});name=seq+" "+name}
var result=lookupKeyForEditor(cm,name,handle);if(result=="multi")
cm.state.keySeq=name;if(result=="handled")
signalLater(cm,"keyHandled",cm,name,e);if(result=="handled"||result=="multi"){e_preventDefault(e);restartBlink(cm)}
if(seq&&!result&&/\'$/.test(name)){e_preventDefault(e);return!0}
return!!result}
function handleKeyBinding(cm,e){var name=keyName(e,!0);if(!name)return!1;if(e.shiftKey&&!cm.state.keySeq){return dispatchKey(cm,"Shift-"+name,e,function(b){return doHandleBinding(cm,b,!0)})||dispatchKey(cm,name,e,function(b){if(typeof b=="string"?/^go[A-Z]/.test(b):b.motion)
return doHandleBinding(cm,b)})}else{return dispatchKey(cm,name,e,function(b){return doHandleBinding(cm,b)})}}
function handleCharBinding(cm,e,ch){return dispatchKey(cm,"'"+ch+"'",e,function(b){return doHandleBinding(cm,b,!0)})}
var lastStoppedKey=null;function onKeyDown(e){var cm=this;cm.curOp.focus=activeElt();if(signalDOMEvent(cm,e))return;if(ie&&ie_version<11&&e.keyCode==27)e.returnValue=!1;var code=e.keyCode;cm.display.shift=code==16||e.shiftKey;var handled=handleKeyBinding(cm,e);if(presto){lastStoppedKey=handled?code:null;if(!handled&&code==88&&!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey))
cm.replaceSelection("",null,"cut")}
if(code==18&&!/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className))
showCrossHair(cm)}
function showCrossHair(cm){var lineDiv=cm.display.lineDiv;addClass(lineDiv,"CodeMirror-crosshair");function up(e){if(e.keyCode==18||!e.altKey){rmClass(lineDiv,"CodeMirror-crosshair");off(document,"keyup",up);off(document,"mouseover",up)}}
on(document,"keyup",up);on(document,"mouseover",up)}
function onKeyUp(e){if(e.keyCode==16)this.doc.sel.shift=!1;signalDOMEvent(this,e)}
function onKeyPress(e){var cm=this;if(eventInWidget(cm.display,e)||signalDOMEvent(cm,e)||e.ctrlKey&&!e.altKey||mac&&e.metaKey)return;var keyCode=e.keyCode,charCode=e.charCode;if(presto&&keyCode==lastStoppedKey){lastStoppedKey=null;e_preventDefault(e);return}
if((presto&&(!e.which||e.which<10))&&handleKeyBinding(cm,e))return;var ch=String.fromCharCode(charCode==null?keyCode:charCode);if(handleCharBinding(cm,e,ch))return;cm.display.input.onKeyPress(e)}
function delayBlurEvent(cm){cm.state.delayingBlurEvent=!0;setTimeout(function(){if(cm.state.delayingBlurEvent){cm.state.delayingBlurEvent=!1;onBlur(cm)}},100)}
function onFocus(cm,e){if(cm.state.delayingBlurEvent)cm.state.delayingBlurEvent=!1;if(cm.options.readOnly=="nocursor")return;if(!cm.state.focused){signal(cm,"focus",cm,e);cm.state.focused=!0;addClass(cm.display.wrapper,"CodeMirror-focused");if(!cm.curOp&&cm.display.selForContextMenu!=cm.doc.sel){cm.display.input.reset();if(webkit)setTimeout(function(){cm.display.input.reset(!0)},20)}
cm.display.input.receivedFocus()}
restartBlink(cm)}
function onBlur(cm,e){if(cm.state.delayingBlurEvent)return;if(cm.state.focused){signal(cm,"blur",cm,e);cm.state.focused=!1;rmClass(cm.display.wrapper,"CodeMirror-focused")}
clearInterval(cm.display.blinker);setTimeout(function(){if(!cm.state.focused)cm.display.shift=!1},150)}
function onContextMenu(cm,e){if(eventInWidget(cm.display,e)||contextMenuInGutter(cm,e))return;if(signalDOMEvent(cm,e,"contextmenu"))return;cm.display.input.onContextMenu(e)}
function contextMenuInGutter(cm,e){if(!hasHandler(cm,"gutterContextMenu"))return!1;return gutterEvent(cm,e,"gutterContextMenu",!1)}
var changeEnd=CodeMirror.changeEnd=function(change){if(!change.text)return change.to;return Pos(change.from.line+change.text.length-1,lst(change.text).length+(change.text.length==1?change.from.ch:0))};function adjustForChange(pos,change){if(cmp(pos,change.from)<0)return pos;if(cmp(pos,change.to)<=0)return changeEnd(change);var line=pos.line+change.text.length-(change.to.line-change.from.line)-1,ch=pos.ch;if(pos.line==change.to.line)ch+=changeEnd(change).ch-change.to.ch;return Pos(line,ch)}
function computeSelAfterChange(doc,change){var out=[];for(var i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];out.push(new Range(adjustForChange(range.anchor,change),adjustForChange(range.head,change)))}
return normalizeSelection(out,doc.sel.primIndex)}
function offsetPos(pos,old,nw){if(pos.line==old.line)
return Pos(nw.line,pos.ch-old.ch+nw.ch);else return Pos(nw.line+(pos.line-old.line),pos.ch)}
function computeReplacedSel(doc,changes,hint){var out=[];var oldPrev=Pos(doc.first,0),newPrev=oldPrev;for(var i=0;i<changes.length;i++){var change=changes[i];var from=offsetPos(change.from,oldPrev,newPrev);var to=offsetPos(changeEnd(change),oldPrev,newPrev);oldPrev=change.to;newPrev=to;if(hint=="around"){var range=doc.sel.ranges[i],inv=cmp(range.head,range.anchor)<0;out[i]=new Range(inv?to:from,inv?from:to)}else{out[i]=new Range(from,from)}}
return new Selection(out,doc.sel.primIndex)}
function filterChange(doc,change,update){var obj={canceled:!1,from:change.from,to:change.to,text:change.text,origin:change.origin,cancel:function(){this.canceled=!0}};if(update)obj.update=function(from,to,text,origin){if(from)this.from=clipPos(doc,from);if(to)this.to=clipPos(doc,to);if(text)this.text=text;if(origin!==undefined)this.origin=origin};signal(doc,"beforeChange",doc,obj);if(doc.cm)signal(doc.cm,"beforeChange",doc.cm,obj);if(obj.canceled)return null;return{from:obj.from,to:obj.to,text:obj.text,origin:obj.origin}}
function makeChange(doc,change,ignoreReadOnly){if(doc.cm){if(!doc.cm.curOp)return operation(doc.cm,makeChange)(doc,change,ignoreReadOnly);if(doc.cm.state.suppressEdits)return}
if(hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange")){change=filterChange(doc,change,!0);if(!change)return}
var split=sawReadOnlySpans&&!ignoreReadOnly&&removeReadOnlyRanges(doc,change.from,change.to);if(split){for(var i=split.length-1;i>=0;--i)
makeChangeInner(doc,{from:split[i].from,to:split[i].to,text:i?[""]:change.text})}else{makeChangeInner(doc,change)}}
function makeChangeInner(doc,change){if(change.text.length==1&&change.text[0]==""&&cmp(change.from,change.to)==0)return;var selAfter=computeSelAfterChange(doc,change);addChangeToHistory(doc,change,selAfter,doc.cm?doc.cm.curOp.id:NaN);makeChangeSingleDoc(doc,change,selAfter,stretchSpansOverChange(doc,change));var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}
makeChangeSingleDoc(doc,change,null,stretchSpansOverChange(doc,change))})}
function makeChangeFromHistory(doc,type,allowSelectionOnly){if(doc.cm&&doc.cm.state.suppressEdits&&!allowSelectionOnly)return;var hist=doc.history,event,selAfter=doc.sel;var source=type=="undo"?hist.done:hist.undone,dest=type=="undo"?hist.undone:hist.done;for(var i=0;i<source.length;i++){event=source[i];if(allowSelectionOnly?event.ranges&&!event.equals(doc.sel):!event.ranges)
break}
if(i==source.length)return;hist.lastOrigin=hist.lastSelOrigin=null;for(;;){event=source.pop();if(event.ranges){pushSelectionToHistory(event,dest);if(allowSelectionOnly&&!event.equals(doc.sel)){setSelection(doc,event,{clearRedo:!1});return}
selAfter=event}else break}
var antiChanges=[];pushSelectionToHistory(selAfter,dest);dest.push({changes:antiChanges,generation:hist.generation});hist.generation=event.generation||++hist.maxGeneration;var filter=hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange");for(var i=event.changes.length-1;i>=0;--i){var change=event.changes[i];change.origin=type;if(filter&&!filterChange(doc,change,!1)){source.length=0;return}
antiChanges.push(historyChangeFromChange(doc,change));var after=i?computeSelAfterChange(doc,change):lst(source);makeChangeSingleDoc(doc,change,after,mergeOldSpans(doc,change));if(!i&&doc.cm)doc.cm.scrollIntoView({from:change.from,to:changeEnd(change)});var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}
makeChangeSingleDoc(doc,change,null,mergeOldSpans(doc,change))})}}
function shiftDoc(doc,distance){if(distance==0)return;doc.first+=distance;doc.sel=new Selection(map(doc.sel.ranges,function(range){return new Range(Pos(range.anchor.line+distance,range.anchor.ch),Pos(range.head.line+distance,range.head.ch))}),doc.sel.primIndex);if(doc.cm){regChange(doc.cm,doc.first,doc.first-distance,distance);for(var d=doc.cm.display,l=d.viewFrom;l<d.viewTo;l++)
regLineChange(doc.cm,l,"gutter");}}
function makeChangeSingleDoc(doc,change,selAfter,spans){if(doc.cm&&!doc.cm.curOp)
return operation(doc.cm,makeChangeSingleDoc)(doc,change,selAfter,spans);if(change.to.line<doc.first){shiftDoc(doc,change.text.length-1-(change.to.line-change.from.line));return}
if(change.from.line>doc.lastLine())return;if(change.from.line<doc.first){var shift=change.text.length-1-(doc.first-change.from.line);shiftDoc(doc,shift);change={from:Pos(doc.first,0),to:Pos(change.to.line+shift,change.to.ch),text:[lst(change.text)],origin:change.origin}}
var last=doc.lastLine();if(change.to.line>last){change={from:change.from,to:Pos(last,getLine(doc,last).text.length),text:[change.text[0]],origin:change.origin}}
change.removed=getBetween(doc,change.from,change.to);if(!selAfter)selAfter=computeSelAfterChange(doc,change);if(doc.cm)makeChangeSingleDocInEditor(doc.cm,change,spans);else updateDoc(doc,change,spans);setSelectionNoUndo(doc,selAfter,sel_dontScroll)}
function makeChangeSingleDocInEditor(cm,change,spans){var doc=cm.doc,display=cm.display,from=change.from,to=change.to;var recomputeMaxLength=!1,checkWidthStart=from.line;if(!cm.options.lineWrapping){checkWidthStart=lineNo(visualLine(getLine(doc,from.line)));doc.iter(checkWidthStart,to.line+1,function(line){if(line==display.maxLine){recomputeMaxLength=!0;return!0}})}
if(doc.sel.contains(change.from,change.to)>-1)
signalCursorActivity(cm);updateDoc(doc,change,spans,estimateHeight(cm));if(!cm.options.lineWrapping){doc.iter(checkWidthStart,from.line+change.text.length,function(line){var len=lineLength(line);if(len>display.maxLineLength){display.maxLine=line;display.maxLineLength=len;display.maxLineChanged=!0;recomputeMaxLength=!1}});if(recomputeMaxLength)cm.curOp.updateMaxLine=!0}
doc.frontier=Math.min(doc.frontier,from.line);startWorker(cm,400);var lendiff=change.text.length-(to.line-from.line)-1;if(change.full)
regChange(cm);else if(from.line==to.line&&change.text.length==1&&!isWholeLineUpdate(cm.doc,change))
regLineChange(cm,from.line,"text");else regChange(cm,from.line,to.line+1,lendiff);var changesHandler=hasHandler(cm,"changes"),changeHandler=hasHandler(cm,"change");if(changeHandler||changesHandler){var obj={from:from,to:to,text:change.text,removed:change.removed,origin:change.origin};if(changeHandler)signalLater(cm,"change",cm,obj);if(changesHandler)(cm.curOp.changeObjs||(cm.curOp.changeObjs=[])).push(obj)}
cm.display.selForContextMenu=null}
function replaceRange(doc,code,from,to,origin){if(!to)to=from;if(cmp(to,from)<0){var tmp=to;to=from;from=tmp}
if(typeof code=="string")code=doc.splitLines(code);makeChange(doc,{from:from,to:to,text:code,origin:origin})}
function maybeScrollWindow(cm,coords){if(signalDOMEvent(cm,"scrollCursorIntoView"))return;var display=cm.display,box=display.sizer.getBoundingClientRect(),doScroll=null;if(coords.top+box.top<0)doScroll=!0;else if(coords.bottom+box.top>(window.innerHeight||document.documentElement.clientHeight))doScroll=!1;if(doScroll!=null&&!phantom){var scrollNode=elt("div","\u200b",null,"position: absolute; top: "+(coords.top-display.viewOffset-paddingTop(cm.display))+"px; height: "+(coords.bottom-coords.top+scrollGap(cm)+display.barHeight)+"px; left: "+coords.left+"px; width: 2px;");cm.display.lineSpace.appendChild(scrollNode);scrollNode.scrollIntoView(doScroll);cm.display.lineSpace.removeChild(scrollNode)}}
function scrollPosIntoView(cm,pos,end,margin){if(margin==null)margin=0;for(var limit=0;limit<5;limit++){var changed=!1,coords=cursorCoords(cm,pos);var endCoords=!end||end==pos?coords:cursorCoords(cm,end);var scrollPos=calculateScrollPos(cm,Math.min(coords.left,endCoords.left),Math.min(coords.top,endCoords.top)-margin,Math.max(coords.left,endCoords.left),Math.max(coords.bottom,endCoords.bottom)+margin);var startTop=cm.doc.scrollTop,startLeft=cm.doc.scrollLeft;if(scrollPos.scrollTop!=null){setScrollTop(cm,scrollPos.scrollTop);if(Math.abs(cm.doc.scrollTop-startTop)>1)changed=!0}
if(scrollPos.scrollLeft!=null){setScrollLeft(cm,scrollPos.scrollLeft);if(Math.abs(cm.doc.scrollLeft-startLeft)>1)changed=!0}
if(!changed)break}
return coords}
function scrollIntoView(cm,x1,y1,x2,y2){var scrollPos=calculateScrollPos(cm,x1,y1,x2,y2);if(scrollPos.scrollTop!=null)setScrollTop(cm,scrollPos.scrollTop);if(scrollPos.scrollLeft!=null)setScrollLeft(cm,scrollPos.scrollLeft)}
function calculateScrollPos(cm,x1,y1,x2,y2){var display=cm.display,snapMargin=textHeight(cm.display);if(y1<0)y1=0;var screentop=cm.curOp&&cm.curOp.scrollTop!=null?cm.curOp.scrollTop:display.scroller.scrollTop;var screen=displayHeight(cm),result={};if(y2-y1>screen)y2=y1+screen;var docBottom=cm.doc.height+paddingVert(display);var atTop=y1<snapMargin,atBottom=y2>docBottom-snapMargin;if(y1<screentop){result.scrollTop=atTop?0:y1}else if(y2>screentop+screen){var newTop=Math.min(y1,(atBottom?docBottom:y2)-screen);if(newTop!=screentop)result.scrollTop=newTop}
var screenleft=cm.curOp&&cm.curOp.scrollLeft!=null?cm.curOp.scrollLeft:display.scroller.scrollLeft;var screenw=displayWidth(cm)-(cm.options.fixedGutter?display.gutters.offsetWidth:0);var tooWide=x2-x1>screenw;if(tooWide)x2=x1+screenw;if(x1<10)
result.scrollLeft=0;else if(x1<screenleft)
result.scrollLeft=Math.max(0,x1-(tooWide?0:10));else if(x2>screenw+screenleft-3)
result.scrollLeft=x2+(tooWide?0:10)-screenw;return result}
function addToScrollPos(cm,left,top){if(left!=null||top!=null)resolveScrollToPos(cm);if(left!=null)
cm.curOp.scrollLeft=(cm.curOp.scrollLeft==null?cm.doc.scrollLeft:cm.curOp.scrollLeft)+left;if(top!=null)
cm.curOp.scrollTop=(cm.curOp.scrollTop==null?cm.doc.scrollTop:cm.curOp.scrollTop)+top}
function ensureCursorVisible(cm){resolveScrollToPos(cm);var cur=cm.getCursor(),from=cur,to=cur;if(!cm.options.lineWrapping){from=cur.ch?Pos(cur.line,cur.ch-1):cur;to=Pos(cur.line,cur.ch+1)}
cm.curOp.scrollToPos={from:from,to:to,margin:cm.options.cursorScrollMargin,isCursor:!0}}
function resolveScrollToPos(cm){var range=cm.curOp.scrollToPos;if(range){cm.curOp.scrollToPos=null;var from=estimateCoords(cm,range.from),to=estimateCoords(cm,range.to);var sPos=calculateScrollPos(cm,Math.min(from.left,to.left),Math.min(from.top,to.top)-range.margin,Math.max(from.right,to.right),Math.max(from.bottom,to.bottom)+range.margin);cm.scrollTo(sPos.scrollLeft,sPos.scrollTop)}}
function indentLine(cm,n,how,aggressive){var doc=cm.doc,state;if(how==null)how="add";if(how=="smart"){if(!doc.mode.indent)how="prev";else state=getStateBefore(cm,n)}
var tabSize=cm.options.tabSize;var line=getLine(doc,n),curSpace=countColumn(line.text,null,tabSize);if(line.stateAfter)line.stateAfter=null;var curSpaceString=line.text.match(/^\s*/)[0],indentation;if(!aggressive&&!/\S/.test(line.text)){indentation=0;how="not"}else if(how=="smart"){indentation=doc.mode.indent(state,line.text.slice(curSpaceString.length),line.text);if(indentation==Pass||indentation>150){if(!aggressive)return;how="prev"}}
if(how=="prev"){if(n>doc.first)indentation=countColumn(getLine(doc,n-1).text,null,tabSize);else indentation=0}else if(how=="add"){indentation=curSpace+cm.options.indentUnit}else if(how=="subtract"){indentation=curSpace-cm.options.indentUnit}else if(typeof how=="number"){indentation=curSpace+how}
indentation=Math.max(0,indentation);var indentString="",pos=0;if(cm.options.indentWithTabs)
for(var i=Math.floor(indentation/tabSize);i;--i){pos+=tabSize;indentString+="\t"}
if(pos<indentation)indentString+=spaceStr(indentation-pos);if(indentString!=curSpaceString){replaceRange(doc,indentString,Pos(n,0),Pos(n,curSpaceString.length),"+input");line.stateAfter=null;return!0}else{for(var i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];if(range.head.line==n&&range.head.ch<curSpaceString.length){var pos=Pos(n,curSpaceString.length);replaceOneSelection(doc,i,new Range(pos,pos));break}}}}
function changeLine(doc,handle,changeType,op){var no=handle,line=handle;if(typeof handle=="number")line=getLine(doc,clipLine(doc,handle));else no=lineNo(handle);if(no==null)return null;if(op(line,no)&&doc.cm)regLineChange(doc.cm,no,changeType);return line}
function deleteNearSelection(cm,compute){var ranges=cm.doc.sel.ranges,kill=[];for(var i=0;i<ranges.length;i++){var toKill=compute(ranges[i]);while(kill.length&&cmp(toKill.from,lst(kill).to)<=0){var replaced=kill.pop();if(cmp(replaced.from,toKill.from)<0){toKill.from=replaced.from;break}}
kill.push(toKill)}
runInOp(cm,function(){for(var i=kill.length-1;i>=0;i--)
replaceRange(cm.doc,"",kill[i].from,kill[i].to,"+delete");ensureCursorVisible(cm)})}
function findPosH(doc,pos,dir,unit,visually){var line=pos.line,ch=pos.ch,origDir=dir;var lineObj=getLine(doc,line);function findNextLine(){var l=line+dir;if(l<doc.first||l>=doc.first+doc.size)return!1
line=l;return lineObj=getLine(doc,l)}
function moveOnce(boundToLine){var next=(visually?moveVisually:moveLogically)(lineObj,ch,dir,!0);if(next==null){if(!boundToLine&&findNextLine()){if(visually)ch=(dir<0?lineRight:lineLeft)(lineObj);else ch=dir<0?lineObj.text.length:0}else return!1}else ch=next;return!0}
if(unit=="char"){moveOnce()}else if(unit=="column"){moveOnce(!0)}else if(unit=="word"||unit=="group"){var sawType=null,group=unit=="group";var helper=doc.cm&&doc.cm.getHelper(pos,"wordChars");for(var first=!0;;first=!1){if(dir<0&&!moveOnce(!first))break;var cur=lineObj.text.charAt(ch)||"\n";var type=isWordChar(cur,helper)?"w":group&&cur=="\n"?"n":!group||/\s/.test(cur)?null:"p";if(group&&!first&&!type)type="s";if(sawType&&sawType!=type){if(dir<0){dir=1;moveOnce()}
break}
if(type)sawType=type;if(dir>0&&!moveOnce(!first))break}}
var result=skipAtomic(doc,Pos(line,ch),pos,origDir,!0);if(!cmp(pos,result))result.hitSide=!0;return result}
function findPosV(cm,pos,dir,unit){var doc=cm.doc,x=pos.left,y;if(unit=="page"){var pageSize=Math.min(cm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var moveAmount=Math.max(pageSize-.5*textHeight(cm.display),3);y=(dir>0?pos.bottom:pos.top)+dir*moveAmount}else if(unit=="line"){y=dir>0?pos.bottom+3:pos.top-3}
for(;;){var target=coordsChar(cm,x,y);if(!target.outside)break;if(dir<0?y<=0:y>=doc.height){target.hitSide=!0;break}
y+=dir*5}
return target}
CodeMirror.prototype={constructor:CodeMirror,focus:function(){window.focus();this.display.input.focus()},setOption:function(option,value){var options=this.options,old=options[option];if(options[option]==value&&option!="mode")return;options[option]=value;if(optionHandlers.hasOwnProperty(option))
operation(this,optionHandlers[option])(this,value,old)},getOption:function(option){return this.options[option]},getDoc:function(){return this.doc},addKeyMap:function(map,bottom){this.state.keyMaps[bottom?"push":"unshift"](getKeyMap(map))},removeKeyMap:function(map){var maps=this.state.keyMaps;for(var i=0;i<maps.length;++i)
if(maps[i]==map||maps[i].name==map){maps.splice(i,1);return!0}},addOverlay:methodOp(function(spec,options){var mode=spec.token?spec:CodeMirror.getMode(this.options,spec);if(mode.startState)throw new Error("Overlays may not be stateful.");insertSorted(this.state.overlays,{mode:mode,modeSpec:spec,opaque:options&&options.opaque,priority:(options&&options.priority)||0},function(overlay){return overlay.priority})
this.state.modeGen++;regChange(this)}),removeOverlay:methodOp(function(spec){var overlays=this.state.overlays;for(var i=0;i<overlays.length;++i){var cur=overlays[i].modeSpec;if(cur==spec||typeof spec=="string"&&cur.name==spec){overlays.splice(i,1);this.state.modeGen++;regChange(this);return}}}),indentLine:methodOp(function(n,dir,aggressive){if(typeof dir!="string"&&typeof dir!="number"){if(dir==null)dir=this.options.smartIndent?"smart":"prev";else dir=dir?"add":"subtract"}
if(isLine(this.doc,n))indentLine(this,n,dir,aggressive)}),indentSelection:methodOp(function(how){var ranges=this.doc.sel.ranges,end=-1;for(var i=0;i<ranges.length;i++){var range=ranges[i];if(!range.empty()){var from=range.from(),to=range.to();var start=Math.max(end,from.line);end=Math.min(this.lastLine(),to.line-(to.ch?0:1))+1;for(var j=start;j<end;++j)
indentLine(this,j,how);var newRanges=this.doc.sel.ranges;if(from.ch==0&&ranges.length==newRanges.length&&newRanges[i].from().ch>0)
replaceOneSelection(this.doc,i,new Range(from,newRanges[i].to()),sel_dontScroll)}else if(range.head.line>end){indentLine(this,range.head.line,how,!0);end=range.head.line;if(i==this.doc.sel.primIndex)ensureCursorVisible(this)}}}),getTokenAt:function(pos,precise){return takeToken(this,pos,precise)},getLineTokens:function(line,precise){return takeToken(this,Pos(line),precise,!0)},getTokenTypeAt:function(pos){pos=clipPos(this.doc,pos);var styles=getLineStyles(this,getLine(this.doc,pos.line));var before=0,after=(styles.length-1)/2,ch=pos.ch;var type;if(ch==0)type=styles[2];else for(;;){var mid=(before+after)>>1;if((mid?styles[mid*2-1]:0)>=ch)after=mid;else if(styles[mid*2+1]<ch)before=mid+1;else{type=styles[mid*2+2];break}}
var cut=type?type.indexOf("cm-overlay "):-1;return cut<0?type:cut==0?null:type.slice(0,cut-1)},getModeAt:function(pos){var mode=this.doc.mode;if(!mode.innerMode)return mode;return CodeMirror.innerMode(mode,this.getTokenAt(pos).state).mode},getHelper:function(pos,type){return this.getHelpers(pos,type)[0]},getHelpers:function(pos,type){var found=[];if(!helpers.hasOwnProperty(type))return found;var help=helpers[type],mode=this.getModeAt(pos);if(typeof mode[type]=="string"){if(help[mode[type]])found.push(help[mode[type]])}else if(mode[type]){for(var i=0;i<mode[type].length;i++){var val=help[mode[type][i]];if(val)found.push(val)}}else if(mode.helperType&&help[mode.helperType]){found.push(help[mode.helperType])}else if(help[mode.name]){found.push(help[mode.name])}
for(var i=0;i<help._global.length;i++){var cur=help._global[i];if(cur.pred(mode,this)&&indexOf(found,cur.val)==-1)
found.push(cur.val)}
return found},getStateAfter:function(line,precise){var doc=this.doc;line=clipLine(doc,line==null?doc.first+doc.size-1:line);return getStateBefore(this,line+1,precise)},cursorCoords:function(start,mode){var pos,range=this.doc.sel.primary();if(start==null)pos=range.head;else if(typeof start=="object")pos=clipPos(this.doc,start);else pos=start?range.from():range.to();return cursorCoords(this,pos,mode||"page")},charCoords:function(pos,mode){return charCoords(this,clipPos(this.doc,pos),mode||"page")},coordsChar:function(coords,mode){coords=fromCoordSystem(this,coords,mode||"page");return coordsChar(this,coords.left,coords.top)},lineAtHeight:function(height,mode){height=fromCoordSystem(this,{top:height,left:0},mode||"page").top;return lineAtHeight(this.doc,height+this.display.viewOffset)},heightAtLine:function(line,mode){var end=!1,lineObj;if(typeof line=="number"){var last=this.doc.first+this.doc.size-1;if(line<this.doc.first)line=this.doc.first;else if(line>last){line=last;end=!0}
lineObj=getLine(this.doc,line)}else{lineObj=line}
return intoCoordSystem(this,lineObj,{top:0,left:0},mode||"page").top+(end?this.doc.height-heightAtLine(lineObj):0)},defaultTextHeight:function(){return textHeight(this.display)},defaultCharWidth:function(){return charWidth(this.display)},setGutterMarker:methodOp(function(line,gutterID,value){return changeLine(this.doc,line,"gutter",function(line){var markers=line.gutterMarkers||(line.gutterMarkers={});markers[gutterID]=value;if(!value&&isEmpty(markers))line.gutterMarkers=null;return!0})}),clearGutter:methodOp(function(gutterID){var cm=this,doc=cm.doc,i=doc.first;doc.iter(function(line){if(line.gutterMarkers&&line.gutterMarkers[gutterID]){line.gutterMarkers[gutterID]=null;regLineChange(cm,i,"gutter");if(isEmpty(line.gutterMarkers))line.gutterMarkers=null}
++i})}),lineInfo:function(line){if(typeof line=="number"){if(!isLine(this.doc,line))return null;var n=line;line=getLine(this.doc,line);if(!line)return null}else{var n=lineNo(line);if(n==null)return null}
return{line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(pos,node,scroll,vert,horiz){var display=this.display;pos=cursorCoords(this,clipPos(this.doc,pos));var top=pos.bottom,left=pos.left;node.style.position="absolute";node.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(node);display.sizer.appendChild(node);if(vert=="over"){top=pos.top}else if(vert=="above"||vert=="near"){var vspace=Math.max(display.wrapper.clientHeight,this.doc.height),hspace=Math.max(display.sizer.clientWidth,display.lineSpace.clientWidth);if((vert=='above'||pos.bottom+node.offsetHeight>vspace)&&pos.top>node.offsetHeight)
top=pos.top-node.offsetHeight;else if(pos.bottom+node.offsetHeight<=vspace)
top=pos.bottom;if(left+node.offsetWidth>hspace)
left=hspace-node.offsetWidth}
node.style.top=top+"px";node.style.left=node.style.right="";if(horiz=="right"){left=display.sizer.clientWidth-node.offsetWidth;node.style.right="0px"}else{if(horiz=="left")left=0;else if(horiz=="middle")left=(display.sizer.clientWidth-node.offsetWidth)/2;node.style.left=left+"px"}
if(scroll)
scrollIntoView(this,left,top,left+node.offsetWidth,top+node.offsetHeight)},triggerOnKeyDown:methodOp(onKeyDown),triggerOnKeyPress:methodOp(onKeyPress),triggerOnKeyUp:onKeyUp,execCommand:function(cmd){if(commands.hasOwnProperty(cmd))
return commands[cmd].call(null,this)},triggerElectric:methodOp(function(text){triggerElectric(this,text)}),findPosH:function(from,amount,unit,visually){var dir=1;if(amount<0){dir=-1;amount=-amount}
for(var i=0,cur=clipPos(this.doc,from);i<amount;++i){cur=findPosH(this.doc,cur,dir,unit,visually);if(cur.hitSide)break}
return cur},moveH:methodOp(function(dir,unit){var cm=this;cm.extendSelectionsBy(function(range){if(cm.display.shift||cm.doc.extend||range.empty())
return findPosH(cm.doc,range.head,dir,unit,cm.options.rtlMoveVisually);else return dir<0?range.from():range.to()},sel_move)}),deleteH:methodOp(function(dir,unit){var sel=this.doc.sel,doc=this.doc;if(sel.somethingSelected())
doc.replaceSelection("",null,"+delete");else deleteNearSelection(this,function(range){var other=findPosH(doc,range.head,dir,unit,!1);return dir<0?{from:other,to:range.head}:{from:range.head,to:other}})}),findPosV:function(from,amount,unit,goalColumn){var dir=1,x=goalColumn;if(amount<0){dir=-1;amount=-amount}
for(var i=0,cur=clipPos(this.doc,from);i<amount;++i){var coords=cursorCoords(this,cur,"div");if(x==null)x=coords.left;else coords.left=x;cur=findPosV(this,coords,dir,unit);if(cur.hitSide)break}
return cur},moveV:methodOp(function(dir,unit){var cm=this,doc=this.doc,goals=[];var collapse=!cm.display.shift&&!doc.extend&&doc.sel.somethingSelected();doc.extendSelectionsBy(function(range){if(collapse)
return dir<0?range.from():range.to();var headPos=cursorCoords(cm,range.head,"div");if(range.goalColumn!=null)headPos.left=range.goalColumn;goals.push(headPos.left);var pos=findPosV(cm,headPos,dir,unit);if(unit=="page"&&range==doc.sel.primary())
addToScrollPos(cm,null,charCoords(cm,pos,"div").top-headPos.top);return pos},sel_move);if(goals.length)for(var i=0;i<doc.sel.ranges.length;i++)
doc.sel.ranges[i].goalColumn=goals[i]}),findWordAt:function(pos){var doc=this.doc,line=getLine(doc,pos.line).text;var start=pos.ch,end=pos.ch;if(line){var helper=this.getHelper(pos,"wordChars");if((pos.xRel<0||end==line.length)&&start)--start;else ++end;var startChar=line.charAt(start);var check=isWordChar(startChar,helper)?function(ch){return isWordChar(ch,helper)}:/\s/.test(startChar)?function(ch){return/\s/.test(ch)}:function(ch){return!/\s/.test(ch)&&!isWordChar(ch)};while(start>0&&check(line.charAt(start-1)))--start;while(end<line.length&&check(line.charAt(end)))++end}
return new Range(Pos(pos.line,start),Pos(pos.line,end))},toggleOverwrite:function(value){if(value!=null&&value==this.state.overwrite)return;if(this.state.overwrite=!this.state.overwrite)
addClass(this.display.cursorDiv,"CodeMirror-overwrite");else rmClass(this.display.cursorDiv,"CodeMirror-overwrite");signal(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==activeElt()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:methodOp(function(x,y){if(x!=null||y!=null)resolveScrollToPos(this);if(x!=null)this.curOp.scrollLeft=x;if(y!=null)this.curOp.scrollTop=y}),getScrollInfo:function(){var scroller=this.display.scroller;return{left:scroller.scrollLeft,top:scroller.scrollTop,height:scroller.scrollHeight-scrollGap(this)-this.display.barHeight,width:scroller.scrollWidth-scrollGap(this)-this.display.barWidth,clientHeight:displayHeight(this),clientWidth:displayWidth(this)}},scrollIntoView:methodOp(function(range,margin){if(range==null){range={from:this.doc.sel.primary().head,to:null};if(margin==null)margin=this.options.cursorScrollMargin}else if(typeof range=="number"){range={from:Pos(range,0),to:null}}else if(range.from==null){range={from:range,to:null}}
if(!range.to)range.to=range.from;range.margin=margin||0;if(range.from.line!=null){resolveScrollToPos(this);this.curOp.scrollToPos=range}else{var sPos=calculateScrollPos(this,Math.min(range.from.left,range.to.left),Math.min(range.from.top,range.to.top)-range.margin,Math.max(range.from.right,range.to.right),Math.max(range.from.bottom,range.to.bottom)+range.margin);this.scrollTo(sPos.scrollLeft,sPos.scrollTop)}}),setSize:methodOp(function(width,height){var cm=this;function interpret(val){return typeof val=="number"||/^\d+$/.test(String(val))?val+"px":val}
if(width!=null)cm.display.wrapper.style.width=interpret(width);if(height!=null)cm.display.wrapper.style.height=interpret(height);if(cm.options.lineWrapping)clearLineMeasurementCache(this);var lineNo=cm.display.viewFrom;cm.doc.iter(lineNo,cm.display.viewTo,function(line){if(line.widgets)for(var i=0;i<line.widgets.length;i++)
if(line.widgets[i].noHScroll){regLineChange(cm,lineNo,"widget");break}
++lineNo});cm.curOp.forceUpdate=!0;signal(cm,"refresh",this)}),operation:function(f){return runInOp(this,f)},refresh:methodOp(function(){var oldHeight=this.display.cachedTextHeight;regChange(this);this.curOp.forceUpdate=!0;clearCaches(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);updateGutterSpace(this);if(oldHeight==null||Math.abs(oldHeight-textHeight(this.display))>.5)
estimateLineHeights(this);signal(this,"refresh",this)}),swapDoc:methodOp(function(doc){var old=this.doc;old.cm=null;attachDoc(this,doc);clearCaches(this);this.display.input.reset();this.scrollTo(doc.scrollLeft,doc.scrollTop);this.curOp.forceScroll=!0;signalLater(this,"swapDoc",this,old);return old}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};eventMixin(CodeMirror);var defaults=CodeMirror.defaults={};var optionHandlers=CodeMirror.optionHandlers={};function option(name,deflt,handle,notOnInit){CodeMirror.defaults[name]=deflt;if(handle)optionHandlers[name]=notOnInit?function(cm,val,old){if(old!=Init)handle(cm,val,old)}:handle}
var Init=CodeMirror.Init={toString:function(){return"CodeMirror.Init"}};option("value","",function(cm,val){cm.setValue(val)},!0);option("mode",null,function(cm,val){cm.doc.modeOption=val;loadMode(cm)},!0);option("indentUnit",2,loadMode,!0);option("indentWithTabs",!1);option("smartIndent",!0);option("tabSize",4,function(cm){resetModeState(cm);clearCaches(cm);regChange(cm)},!0);option("lineSeparator",null,function(cm,val){cm.doc.lineSep=val;if(!val)return;var newBreaks=[],lineNo=cm.doc.first;cm.doc.iter(function(line){for(var pos=0;;){var found=line.text.indexOf(val,pos);if(found==-1)break;pos=found+val.length;newBreaks.push(Pos(lineNo,found))}
lineNo++});for(var i=newBreaks.length-1;i>=0;i--)
replaceRange(cm.doc,val,newBreaks[i],Pos(newBreaks[i].line,newBreaks[i].ch+val.length))});option("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(cm,val,old){cm.state.specialChars=new RegExp(val.source+(val.test("\t")?"":"|\t"),"g");if(old!=CodeMirror.Init)cm.refresh()});option("specialCharPlaceholder",defaultSpecialCharPlaceholder,function(cm){cm.refresh()},!0);option("electricChars",!0);option("inputStyle",mobile?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0);option("spellcheck",!1,function(cm,val){cm.getInputField().spellcheck=val},!0);option("rtlMoveVisually",!windows);option("wholeLineUpdateBefore",!0);option("theme","default",function(cm){themeChanged(cm);guttersChanged(cm)},!0);option("keyMap","default",function(cm,val,old){var next=getKeyMap(val);var prev=old!=CodeMirror.Init&&getKeyMap(old);if(prev&&prev.detach)prev.detach(cm,next);if(next.attach)next.attach(cm,prev||null)});option("extraKeys",null);option("lineWrapping",!1,wrappingChanged,!0);option("gutters",[],function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm)},!0);option("fixedGutter",!0,function(cm,val){cm.display.gutters.style.left=val?compensateForHScroll(cm.display)+"px":"0";cm.refresh()},!0);option("coverGutterNextToScrollbar",!1,function(cm){updateScrollbars(cm)},!0);option("scrollbarStyle","native",function(cm){initScrollbars(cm);updateScrollbars(cm);cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft)},!0);option("lineNumbers",!1,function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm)},!0);option("firstLineNumber",1,guttersChanged,!0);option("lineNumberFormatter",function(integer){return integer},guttersChanged,!0);option("showCursorWhenSelecting",!1,updateSelection,!0);option("resetSelectionOnContextMenu",!0);option("lineWiseCopyCut",!0);option("readOnly",!1,function(cm,val){if(val=="nocursor"){onBlur(cm);cm.display.input.blur();cm.display.disabled=!0}else{cm.display.disabled=!1}
cm.display.input.readOnlyChanged(val)});option("disableInput",!1,function(cm,val){if(!val)cm.display.input.reset()},!0);option("dragDrop",!0,dragDropChanged);option("allowDropFileTypes",null);option("cursorBlinkRate",530);option("cursorScrollMargin",0);option("cursorHeight",1,updateSelection,!0);option("singleCursorHeightPerLine",!0,updateSelection,!0);option("workTime",100);option("workDelay",100);option("flattenSpans",!0,resetModeState,!0);option("addModeClass",!1,resetModeState,!0);option("pollInterval",100);option("undoDepth",200,function(cm,val){cm.doc.history.undoDepth=val});option("historyEventDelay",1250);option("viewportMargin",10,function(cm){cm.refresh()},!0);option("maxHighlightLength",10000,resetModeState,!0);option("moveInputWithCursor",!0,function(cm,val){if(!val)cm.display.input.resetPosition()});option("tabindex",null,function(cm,val){cm.display.input.getField().tabIndex=val||""});option("autofocus",null);var modes=CodeMirror.modes={},mimeModes=CodeMirror.mimeModes={};CodeMirror.defineMode=function(name,mode){if(!CodeMirror.defaults.mode&&name!="null")CodeMirror.defaults.mode=name;if(arguments.length>2)
mode.dependencies=Array.prototype.slice.call(arguments,2);modes[name]=mode};CodeMirror.defineMIME=function(mime,spec){mimeModes[mime]=spec};CodeMirror.resolveMode=function(spec){if(typeof spec=="string"&&mimeModes.hasOwnProperty(spec)){spec=mimeModes[spec]}else if(spec&&typeof spec.name=="string"&&mimeModes.hasOwnProperty(spec.name)){var found=mimeModes[spec.name];if(typeof found=="string")found={name:found};spec=createObj(found,spec);spec.name=found.name}else if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec)){return CodeMirror.resolveMode("application/xml")}else if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(spec)){return CodeMirror.resolveMode("application/json")}
if(typeof spec=="string")return{name:spec};else return spec||{name:"null"}};CodeMirror.getMode=function(options,spec){var spec=CodeMirror.resolveMode(spec);var mfactory=modes[spec.name];if(!mfactory)return CodeMirror.getMode(options,"text/plain");var modeObj=mfactory(options,spec);if(modeExtensions.hasOwnProperty(spec.name)){var exts=modeExtensions[spec.name];for(var prop in exts){if(!exts.hasOwnProperty(prop))continue;if(modeObj.hasOwnProperty(prop))modeObj["_"+prop]=modeObj[prop];modeObj[prop]=exts[prop]}}
modeObj.name=spec.name;if(spec.helperType)modeObj.helperType=spec.helperType;if(spec.modeProps)for(var prop in spec.modeProps)
modeObj[prop]=spec.modeProps[prop];return modeObj};CodeMirror.defineMode("null",function(){return{token:function(stream){stream.skipToEnd()}}});CodeMirror.defineMIME("text/plain","null");var modeExtensions=CodeMirror.modeExtensions={};CodeMirror.extendMode=function(mode,properties){var exts=modeExtensions.hasOwnProperty(mode)?modeExtensions[mode]:(modeExtensions[mode]={});copyObj(properties,exts)};CodeMirror.defineExtension=function(name,func){CodeMirror.prototype[name]=func};CodeMirror.defineDocExtension=function(name,func){Doc.prototype[name]=func};CodeMirror.defineOption=option;var initHooks=[];CodeMirror.defineInitHook=function(f){initHooks.push(f)};var helpers=CodeMirror.helpers={};CodeMirror.registerHelper=function(type,name,value){if(!helpers.hasOwnProperty(type))helpers[type]=CodeMirror[type]={_global:[]};helpers[type][name]=value};CodeMirror.registerGlobalHelper=function(type,name,predicate,value){CodeMirror.registerHelper(type,name,value);helpers[type]._global.push({pred:predicate,val:value})};var copyState=CodeMirror.copyState=function(mode,state){if(state===!0)return state;if(mode.copyState)return mode.copyState(state);var nstate={};for(var n in state){var val=state[n];if(val instanceof Array)val=val.concat([]);nstate[n]=val}
return nstate};var startState=CodeMirror.startState=function(mode,a1,a2){return mode.startState?mode.startState(a1,a2):!0};CodeMirror.innerMode=function(mode,state){while(mode.innerMode){var info=mode.innerMode(state);if(!info||info.mode==mode)break;state=info.state;mode=info.mode}
return info||{mode:mode,state:state}};var commands=CodeMirror.commands={selectAll:function(cm){cm.setSelection(Pos(cm.firstLine(),0),Pos(cm.lastLine()),sel_dontScroll)},singleSelection:function(cm){cm.setSelection(cm.getCursor("anchor"),cm.getCursor("head"),sel_dontScroll)},killLine:function(cm){deleteNearSelection(cm,function(range){if(range.empty()){var len=getLine(cm.doc,range.head.line).text.length;if(range.head.ch==len&&range.head.line<cm.lastLine())
return{from:range.head,to:Pos(range.head.line+1,0)};else return{from:range.head,to:Pos(range.head.line,len)}}else{return{from:range.from(),to:range.to()}}})},deleteLine:function(cm){deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:clipPos(cm.doc,Pos(range.to().line+1,0))}})},delLineLeft:function(cm){deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:range.from()}})},delWrappedLineLeft:function(cm){deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var leftPos=cm.coordsChar({left:0,top:top},"div");return{from:leftPos,to:range.from()}})},delWrappedLineRight:function(cm){deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var rightPos=cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div");return{from:range.from(),to:rightPos}})},undo:function(cm){cm.undo()},redo:function(cm){cm.redo()},undoSelection:function(cm){cm.undoSelection()},redoSelection:function(cm){cm.redoSelection()},goDocStart:function(cm){cm.extendSelection(Pos(cm.firstLine(),0))},goDocEnd:function(cm){cm.extendSelection(Pos(cm.lastLine()))},goLineStart:function(cm){cm.extendSelectionsBy(function(range){return lineStart(cm,range.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(cm){cm.extendSelectionsBy(function(range){return lineStartSmart(cm,range.head)},{origin:"+move",bias:1})},goLineEnd:function(cm){cm.extendSelectionsBy(function(range){return lineEnd(cm,range.head.line)},{origin:"+move",bias:-1})},goLineRight:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;return cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div")},sel_move)},goLineLeft:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;return cm.coordsChar({left:0,top:top},"div")},sel_move)},goLineLeftSmart:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;var pos=cm.coordsChar({left:0,top:top},"div");if(pos.ch<cm.getLine(pos.line).search(/\S/))return lineStartSmart(cm,range.head);return pos},sel_move)},goLineUp:function(cm){cm.moveV(-1,"line")},goLineDown:function(cm){cm.moveV(1,"line")},goPageUp:function(cm){cm.moveV(-1,"page")},goPageDown:function(cm){cm.moveV(1,"page")},goCharLeft:function(cm){cm.moveH(-1,"char")},goCharRight:function(cm){cm.moveH(1,"char")},goColumnLeft:function(cm){cm.moveH(-1,"column")},goColumnRight:function(cm){cm.moveH(1,"column")},goWordLeft:function(cm){cm.moveH(-1,"word")},goGroupRight:function(cm){cm.moveH(1,"group")},goGroupLeft:function(cm){cm.moveH(-1,"group")},goWordRight:function(cm){cm.moveH(1,"word")},delCharBefore:function(cm){cm.deleteH(-1,"char")},delCharAfter:function(cm){cm.deleteH(1,"char")},delWordBefore:function(cm){cm.deleteH(-1,"word")},delWordAfter:function(cm){cm.deleteH(1,"word")},delGroupBefore:function(cm){cm.deleteH(-1,"group")},delGroupAfter:function(cm){cm.deleteH(1,"group")},indentAuto:function(cm){cm.indentSelection("smart")},indentMore:function(cm){cm.indentSelection("add")},indentLess:function(cm){cm.indentSelection("subtract")},insertTab:function(cm){cm.replaceSelection("\t")},insertSoftTab:function(cm){var spaces=[],ranges=cm.listSelections(),tabSize=cm.options.tabSize;for(var i=0;i<ranges.length;i++){var pos=ranges[i].from();var col=countColumn(cm.getLine(pos.line),pos.ch,tabSize);spaces.push(spaceStr(tabSize-col%tabSize))}
cm.replaceSelections(spaces)},defaultTab:function(cm){if(cm.somethingSelected())cm.indentSelection("add");else cm.execCommand("insertTab")},transposeChars:function(cm){runInOp(cm,function(){var ranges=cm.listSelections(),newSel=[];for(var i=0;i<ranges.length;i++){var cur=ranges[i].head,line=getLine(cm.doc,cur.line).text;if(line){if(cur.ch==line.length)cur=new Pos(cur.line,cur.ch-1);if(cur.ch>0){cur=new Pos(cur.line,cur.ch+1);cm.replaceRange(line.charAt(cur.ch-1)+line.charAt(cur.ch-2),Pos(cur.line,cur.ch-2),cur,"+transpose")}else if(cur.line>cm.doc.first){var prev=getLine(cm.doc,cur.line-1).text;if(prev)
cm.replaceRange(line.charAt(0)+cm.doc.lineSeparator()+prev.charAt(prev.length-1),Pos(cur.line-1,prev.length-1),Pos(cur.line,1),"+transpose")}}
newSel.push(new Range(cur,cur))}
cm.setSelections(newSel)})},newlineAndIndent:function(cm){runInOp(cm,function(){var len=cm.listSelections().length;for(var i=0;i<len;i++){var range=cm.listSelections()[i];cm.replaceRange(cm.doc.lineSeparator(),range.anchor,range.head,"+input");cm.indentLine(range.from().line+1,null,!0)}
ensureCursorVisible(cm)})},openLine:function(cm){cm.replaceSelection("\n","start")},toggleOverwrite:function(cm){cm.toggleOverwrite()}};var keyMap=CodeMirror.keyMap={};keyMap.basic={"Left":"goCharLeft","Right":"goCharRight","Up":"goLineUp","Down":"goLineDown","End":"goLineEnd","Home":"goLineStartSmart","PageUp":"goPageUp","PageDown":"goPageDown","Delete":"delCharAfter","Backspace":"delCharBefore","Shift-Backspace":"delCharBefore","Tab":"defaultTab","Shift-Tab":"indentAuto","Enter":"newlineAndIndent","Insert":"toggleOverwrite","Esc":"singleSelection"};keyMap.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};keyMap.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};keyMap.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};keyMap["default"]=mac?keyMap.macDefault:keyMap.pcDefault;function normalizeKeyName(name){var parts=name.split(/-(?!$)/),name=parts[parts.length-1];var alt,ctrl,shift,cmd;for(var i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))cmd=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)$/i.test(mod))shift=!0;else throw new Error("Unrecognized modifier name: "+mod)}
if(alt)name="Alt-"+name;if(ctrl)name="Ctrl-"+name;if(cmd)name="Cmd-"+name;if(shift)name="Shift-"+name;return name}
CodeMirror.normalizeKeyMap=function(keymap){var copy={};for(var keyname in keymap)if(keymap.hasOwnProperty(keyname)){var value=keymap[keyname];if(/^(name|fallthrough|(de|at)tach)$/.test(keyname))continue;if(value=="..."){delete keymap[keyname];continue}
var keys=map(keyname.split(" "),normalizeKeyName);for(var i=0;i<keys.length;i++){var val,name;if(i==keys.length-1){name=keys.join(" ");val=value}else{name=keys.slice(0,i+1).join(" ");val="..."}
var prev=copy[name];if(!prev)copy[name]=val;else if(prev!=val)throw new Error("Inconsistent bindings for "+name)}
delete keymap[keyname]}
for(var prop in copy)keymap[prop]=copy[prop];return keymap};var lookupKey=CodeMirror.lookupKey=function(key,map,handle,context){map=getKeyMap(map);var found=map.call?map.call(key,context):map[key];if(found===!1)return"nothing";if(found==="...")return"multi";if(found!=null&&handle(found))return"handled";if(map.fallthrough){if(Object.prototype.toString.call(map.fallthrough)!="[object Array]")
return lookupKey(key,map.fallthrough,handle,context);for(var i=0;i<map.fallthrough.length;i++){var result=lookupKey(key,map.fallthrough[i],handle,context);if(result)return result}}};var isModifierKey=CodeMirror.isModifierKey=function(value){var name=typeof value=="string"?value:keyNames[value.keyCode];return name=="Ctrl"||name=="Alt"||name=="Shift"||name=="Mod"};var keyName=CodeMirror.keyName=function(event,noShift){if(presto&&event.keyCode==34&&event["char"])return!1;var base=keyNames[event.keyCode],name=base;if(name==null||event.altGraphKey)return!1;if(event.altKey&&base!="Alt")name="Alt-"+name;if((flipCtrlCmd?event.metaKey:event.ctrlKey)&&base!="Ctrl")name="Ctrl-"+name;if((flipCtrlCmd?event.ctrlKey:event.metaKey)&&base!="Cmd")name="Cmd-"+name;if(!noShift&&event.shiftKey&&base!="Shift")name="Shift-"+name;return name};function getKeyMap(val){return typeof val=="string"?keyMap[val]:val}
CodeMirror.fromTextArea=function(textarea,options){options=options?copyObj(options):{};options.value=textarea.value;if(!options.tabindex&&textarea.tabIndex)
options.tabindex=textarea.tabIndex;if(!options.placeholder&&textarea.placeholder)
options.placeholder=textarea.placeholder;if(options.autofocus==null){var hasFocus=activeElt();options.autofocus=hasFocus==textarea||textarea.getAttribute("autofocus")!=null&&hasFocus==document.body}
function save(){textarea.value=cm.getValue()}
if(textarea.form){on(textarea.form,"submit",save);if(!options.leaveSubmitMethodAlone){var form=textarea.form,realSubmit=form.submit;try{var wrappedSubmit=form.submit=function(){save();form.submit=realSubmit;form.submit();form.submit=wrappedSubmit}}catch(e){}}}
options.finishInit=function(cm){cm.save=save;cm.getTextArea=function(){return textarea};cm.toTextArea=function(){cm.toTextArea=isNaN;save();textarea.parentNode.removeChild(cm.getWrapperElement());textarea.style.display="";if(textarea.form){off(textarea.form,"submit",save);if(typeof textarea.form.submit=="function")
textarea.form.submit=realSubmit}}};textarea.style.display="none";var cm=CodeMirror(function(node){textarea.parentNode.insertBefore(node,textarea.nextSibling)},options);return cm};var StringStream=CodeMirror.StringStream=function(string,tabSize){this.pos=this.start=0;this.string=string;this.tabSize=tabSize||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)
return this.string.charAt(this.pos++)},eat:function(match){var ch=this.string.charAt(this.pos);if(typeof match=="string")var ok=ch==match;else var ok=ch&&(match.test?match.test(ch):match(ch));if(ok){++this.pos;return ch}},eatWhile:function(match){var start=this.pos;while(this.eat(match)){}
return this.pos>start},eatSpace:function(){var start=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>start},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ch){var found=this.string.indexOf(ch,this.pos);if(found>-1){this.pos=found;return!0}},backUp:function(n){this.pos-=n},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}
return this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},match:function(pattern,consume,caseInsensitive){if(typeof pattern=="string"){var cased=function(str){return caseInsensitive?str.toLowerCase():str};var substr=this.string.substr(this.pos,pattern.length);if(cased(substr)==cased(pattern)){if(consume!==!1)this.pos+=pattern.length;return!0}}else{var match=this.string.slice(this.pos).match(pattern);if(match&&match.index>0)return null;if(match&&consume!==!1)this.pos+=match[0].length;return match}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(n,inner){this.lineStart+=n;try{return inner()}finally{this.lineStart-=n}}};var nextMarkerId=0;var TextMarker=CodeMirror.TextMarker=function(doc,type){this.lines=[];this.type=type;this.doc=doc;this.id=++nextMarkerId};eventMixin(TextMarker);TextMarker.prototype.clear=function(){if(this.explicitlyCleared)return;var cm=this.doc.cm,withOp=cm&&!cm.curOp;if(withOp)startOperation(cm);if(hasHandler(this,"clear")){var found=this.find();if(found)signalLater(this,"clear",found.from,found.to)}
var min=null,max=null;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(cm&&!this.collapsed)regLineChange(cm,lineNo(line),"text");else if(cm){if(span.to!=null)max=lineNo(line);if(span.from!=null)min=lineNo(line)}
line.markedSpans=removeMarkedSpan(line.markedSpans,span);if(span.from==null&&this.collapsed&&!lineIsHidden(this.doc,line)&&cm)
updateLineHeight(line,textHeight(cm.display))}
if(cm&&this.collapsed&&!cm.options.lineWrapping)for(var i=0;i<this.lines.length;++i){var visual=visualLine(this.lines[i]),len=lineLength(visual);if(len>cm.display.maxLineLength){cm.display.maxLine=visual;cm.display.maxLineLength=len;cm.display.maxLineChanged=!0}}
if(min!=null&&cm&&this.collapsed)regChange(cm,min,max+1);this.lines.length=0;this.explicitlyCleared=!0;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=!1;if(cm)reCheckSelection(cm.doc)}
if(cm)signalLater(cm,"markerCleared",cm,this);if(withOp)endOperation(cm);if(this.parent)this.parent.clear()};TextMarker.prototype.find=function(side,lineObj){if(side==null&&this.type=="bookmark")side=1;var from,to;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(span.from!=null){from=Pos(lineObj?line:lineNo(line),span.from);if(side==-1)return from}
if(span.to!=null){to=Pos(lineObj?line:lineNo(line),span.to);if(side==1)return to}}
return from&&{from:from,to:to}};TextMarker.prototype.changed=function(){var pos=this.find(-1,!0),widget=this,cm=this.doc.cm;if(!pos||!cm)return;runInOp(cm,function(){var line=pos.line,lineN=lineNo(pos.line);var view=findViewForLine(cm,lineN);if(view){clearLineMeasurementCacheFor(view);cm.curOp.selectionChanged=cm.curOp.forceUpdate=!0}
cm.curOp.updateMaxLine=!0;if(!lineIsHidden(widget.doc,line)&&widget.height!=null){var oldHeight=widget.height;widget.height=null;var dHeight=widgetHeight(widget)-oldHeight;if(dHeight)
updateLineHeight(line,line.height+dHeight)}})};TextMarker.prototype.attachLine=function(line){if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;if(!op.maybeHiddenMarkers||indexOf(op.maybeHiddenMarkers,this)==-1)(op.maybeUnhiddenMarkers||(op.maybeUnhiddenMarkers=[])).push(this)}
this.lines.push(line)};TextMarker.prototype.detachLine=function(line){this.lines.splice(indexOf(this.lines,line),1);if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;(op.maybeHiddenMarkers||(op.maybeHiddenMarkers=[])).push(this)}};var nextMarkerId=0;function markText(doc,from,to,options,type){if(options&&options.shared)return markTextShared(doc,from,to,options,type);if(doc.cm&&!doc.cm.curOp)return operation(doc.cm,markText)(doc,from,to,options,type);var marker=new TextMarker(doc,type),diff=cmp(from,to);if(options)copyObj(options,marker,!1);if(diff>0||diff==0&&marker.clearWhenEmpty!==!1)
return marker;if(marker.replacedWith){marker.collapsed=!0;marker.widgetNode=elt("span",[marker.replacedWith],"CodeMirror-widget");if(!options.handleMouseEvents)marker.widgetNode.setAttribute("cm-ignore-events","true");if(options.insertLeft)marker.widgetNode.insertLeft=!0}
if(marker.collapsed){if(conflictingCollapsedRange(doc,from.line,from,to,marker)||from.line!=to.line&&conflictingCollapsedRange(doc,to.line,from,to,marker))
throw new Error("Inserting collapsed marker partially overlapping an existing one");sawCollapsedSpans=!0}
if(marker.addToHistory)
addChangeToHistory(doc,{from:from,to:to,origin:"markText"},doc.sel,NaN);var curLine=from.line,cm=doc.cm,updateMaxLine;doc.iter(curLine,to.line+1,function(line){if(cm&&marker.collapsed&&!cm.options.lineWrapping&&visualLine(line)==cm.display.maxLine)
updateMaxLine=!0;if(marker.collapsed&&curLine!=from.line)updateLineHeight(line,0);addMarkedSpan(line,new MarkedSpan(marker,curLine==from.line?from.ch:null,curLine==to.line?to.ch:null));++curLine});if(marker.collapsed)doc.iter(from.line,to.line+1,function(line){if(lineIsHidden(doc,line))updateLineHeight(line,0)});if(marker.clearOnEnter)on(marker,"beforeCursorEnter",function(){marker.clear()});if(marker.readOnly){sawReadOnlySpans=!0;if(doc.history.done.length||doc.history.undone.length)
doc.clearHistory()}
if(marker.collapsed){marker.id=++nextMarkerId;marker.atomic=!0}
if(cm){if(updateMaxLine)cm.curOp.updateMaxLine=!0;if(marker.collapsed)
regChange(cm,from.line,to.line+1);else if(marker.className||marker.title||marker.startStyle||marker.endStyle||marker.css)
for(var i=from.line;i<=to.line;i++)regLineChange(cm,i,"text");if(marker.atomic)reCheckSelection(cm.doc);signalLater(cm,"markerAdded",cm,marker)}
return marker}
var SharedTextMarker=CodeMirror.SharedTextMarker=function(markers,primary){this.markers=markers;this.primary=primary;for(var i=0;i<markers.length;++i)
markers[i].parent=this};eventMixin(SharedTextMarker);SharedTextMarker.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=!0;for(var i=0;i<this.markers.length;++i)
this.markers[i].clear();signalLater(this,"clear")};SharedTextMarker.prototype.find=function(side,lineObj){return this.primary.find(side,lineObj)};function markTextShared(doc,from,to,options,type){options=copyObj(options);options.shared=!1;var markers=[markText(doc,from,to,options,type)],primary=markers[0];var widget=options.widgetNode;linkedDocs(doc,function(doc){if(widget)options.widgetNode=widget.cloneNode(!0);markers.push(markText(doc,clipPos(doc,from),clipPos(doc,to),options,type));for(var i=0;i<doc.linked.length;++i)
if(doc.linked[i].isParent)return;primary=lst(markers)});return new SharedTextMarker(markers,primary)}
function findSharedMarkers(doc){return doc.findMarks(Pos(doc.first,0),doc.clipPos(Pos(doc.lastLine())),function(m){return m.parent})}
function copySharedMarkers(doc,markers){for(var i=0;i<markers.length;i++){var marker=markers[i],pos=marker.find();var mFrom=doc.clipPos(pos.from),mTo=doc.clipPos(pos.to);if(cmp(mFrom,mTo)){var subMark=markText(doc,mFrom,mTo,marker.primary,marker.primary.type);marker.markers.push(subMark);subMark.parent=marker}}}
function detachSharedMarkers(markers){for(var i=0;i<markers.length;i++){var marker=markers[i],linked=[marker.primary.doc];linkedDocs(marker.primary.doc,function(d){linked.push(d)});for(var j=0;j<marker.markers.length;j++){var subMarker=marker.markers[j];if(indexOf(linked,subMarker.doc)==-1){subMarker.parent=null;marker.markers.splice(j--,1)}}}}
function MarkedSpan(marker,from,to){this.marker=marker;this.from=from;this.to=to}
function getMarkedSpanFor(spans,marker){if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];if(span.marker==marker)return span}}
function removeMarkedSpan(spans,span){for(var r,i=0;i<spans.length;++i)
if(spans[i]!=span)(r||(r=[])).push(spans[i]);return r}
function addMarkedSpan(line,span){line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span];span.marker.attachLine(line)}
function markedSpansBefore(old,startCh,isInsert){if(old)for(var i=0,nw;i<old.length;++i){var span=old[i],marker=span.marker;var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=startCh:span.from<startCh);if(startsBefore||span.from==startCh&&marker.type=="bookmark"&&(!isInsert||!span.marker.insertLeft)){var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=startCh:span.to>startCh);(nw||(nw=[])).push(new MarkedSpan(marker,span.from,endsAfter?null:span.to))}}
return nw}
function markedSpansAfter(old,endCh,isInsert){if(old)for(var i=0,nw;i<old.length;++i){var span=old[i],marker=span.marker;var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=endCh:span.to>endCh);if(endsAfter||span.from==endCh&&marker.type=="bookmark"&&(!isInsert||span.marker.insertLeft)){var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=endCh:span.from<endCh);(nw||(nw=[])).push(new MarkedSpan(marker,startsBefore?null:span.from-endCh,span.to==null?null:span.to-endCh))}}
return nw}
function stretchSpansOverChange(doc,change){if(change.full)return null;var oldFirst=isLine(doc,change.from.line)&&getLine(doc,change.from.line).markedSpans;var oldLast=isLine(doc,change.to.line)&&getLine(doc,change.to.line).markedSpans;if(!oldFirst&&!oldLast)return null;var startCh=change.from.ch,endCh=change.to.ch,isInsert=cmp(change.from,change.to)==0;var first=markedSpansBefore(oldFirst,startCh,isInsert);var last=markedSpansAfter(oldLast,endCh,isInsert);var sameLine=change.text.length==1,offset=lst(change.text).length+(sameLine?startCh:0);if(first){for(var i=0;i<first.length;++i){var span=first[i];if(span.to==null){var found=getMarkedSpanFor(last,span.marker);if(!found)span.to=startCh;else if(sameLine)span.to=found.to==null?null:found.to+offset}}}
if(last){for(var i=0;i<last.length;++i){var span=last[i];if(span.to!=null)span.to+=offset;if(span.from==null){var found=getMarkedSpanFor(first,span.marker);if(!found){span.from=offset;if(sameLine)(first||(first=[])).push(span)}}else{span.from+=offset;if(sameLine)(first||(first=[])).push(span)}}}
if(first)first=clearEmptySpans(first);if(last&&last!=first)last=clearEmptySpans(last);var newMarkers=[first];if(!sameLine){var gap=change.text.length-2,gapMarkers;if(gap>0&&first)
for(var i=0;i<first.length;++i)
if(first[i].to==null)(gapMarkers||(gapMarkers=[])).push(new MarkedSpan(first[i].marker,null,null));for(var i=0;i<gap;++i)
newMarkers.push(gapMarkers);newMarkers.push(last)}
return newMarkers}
function clearEmptySpans(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if(span.from!=null&&span.from==span.to&&span.marker.clearWhenEmpty!==!1)
spans.splice(i--,1)}
if(!spans.length)return null;return spans}
function mergeOldSpans(doc,change){var old=getOldSpans(doc,change);var stretched=stretchSpansOverChange(doc,change);if(!old)return stretched;if(!stretched)return old;for(var i=0;i<old.length;++i){var oldCur=old[i],stretchCur=stretched[i];if(oldCur&&stretchCur){spans:for(var j=0;j<stretchCur.length;++j){var span=stretchCur[j];for(var k=0;k<oldCur.length;++k)
if(oldCur[k].marker==span.marker)continue spans;oldCur.push(span)}}else if(stretchCur){old[i]=stretchCur}}
return old}
function removeReadOnlyRanges(doc,from,to){var markers=null;doc.iter(from.line,to.line+1,function(line){if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var mark=line.markedSpans[i].marker;if(mark.readOnly&&(!markers||indexOf(markers,mark)==-1))(markers||(markers=[])).push(mark)}});if(!markers)return null;var parts=[{from:from,to:to}];for(var i=0;i<markers.length;++i){var mk=markers[i],m=mk.find(0);for(var j=0;j<parts.length;++j){var p=parts[j];if(cmp(p.to,m.from)<0||cmp(p.from,m.to)>0)continue;var newParts=[j,1],dfrom=cmp(p.from,m.from),dto=cmp(p.to,m.to);if(dfrom<0||!mk.inclusiveLeft&&!dfrom)
newParts.push({from:p.from,to:m.from});if(dto>0||!mk.inclusiveRight&&!dto)
newParts.push({from:m.to,to:p.to});parts.splice.apply(parts,newParts);j+=newParts.length-1}}
return parts}
function detachMarkedSpans(line){var spans=line.markedSpans;if(!spans)return;for(var i=0;i<spans.length;++i)
spans[i].marker.detachLine(line);line.markedSpans=null}
function attachMarkedSpans(line,spans){if(!spans)return;for(var i=0;i<spans.length;++i)
spans[i].marker.attachLine(line);line.markedSpans=spans}
function extraLeft(marker){return marker.inclusiveLeft?-1:0}
function extraRight(marker){return marker.inclusiveRight?1:0}
function compareCollapsedMarkers(a,b){var lenDiff=a.lines.length-b.lines.length;if(lenDiff!=0)return lenDiff;var aPos=a.find(),bPos=b.find();var fromCmp=cmp(aPos.from,bPos.from)||extraLeft(a)-extraLeft(b);if(fromCmp)return-fromCmp;var toCmp=cmp(aPos.to,bPos.to)||extraRight(a)-extraRight(b);if(toCmp)return toCmp;return b.id-a.id}
function collapsedSpanAtSide(line,start){var sps=sawCollapsedSpans&&line.markedSpans,found;if(sps)for(var sp,i=0;i<sps.length;++i){sp=sps[i];if(sp.marker.collapsed&&(start?sp.from:sp.to)==null&&(!found||compareCollapsedMarkers(found,sp.marker)<0))
found=sp.marker}
return found}
function collapsedSpanAtStart(line){return collapsedSpanAtSide(line,!0)}
function collapsedSpanAtEnd(line){return collapsedSpanAtSide(line,!1)}
function conflictingCollapsedRange(doc,lineNo,from,to,marker){var line=getLine(doc,lineNo);var sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var i=0;i<sps.length;++i){var sp=sps[i];if(!sp.marker.collapsed)continue;var found=sp.marker.find(0);var fromCmp=cmp(found.from,from)||extraLeft(sp.marker)-extraLeft(marker);var toCmp=cmp(found.to,to)||extraRight(sp.marker)-extraRight(marker);if(fromCmp>=0&&toCmp<=0||fromCmp<=0&&toCmp>=0)continue;if(fromCmp<=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.to,from)>=0:cmp(found.to,from)>0)||fromCmp>=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.from,to)<=0:cmp(found.from,to)<0))
return!0}}
function visualLine(line){var merged;while(merged=collapsedSpanAtStart(line))
line=merged.find(-1,!0).line;return line}
function visualLineContinued(line){var merged,lines;while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,!0).line;(lines||(lines=[])).push(line)}
return lines}
function visualLineNo(doc,lineN){var line=getLine(doc,lineN),vis=visualLine(line);if(line==vis)return lineN;return lineNo(vis)}
function visualLineEndNo(doc,lineN){if(lineN>doc.lastLine())return lineN;var line=getLine(doc,lineN),merged;if(!lineIsHidden(doc,line))return lineN;while(merged=collapsedSpanAtEnd(line))
line=merged.find(1,!0).line;return lineNo(line)+1}
function lineIsHidden(doc,line){var sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var sp,i=0;i<sps.length;++i){sp=sps[i];if(!sp.marker.collapsed)continue;if(sp.from==null)return!0;if(sp.marker.widgetNode)continue;if(sp.from==0&&sp.marker.inclusiveLeft&&lineIsHiddenInner(doc,line,sp))
return!0}}
function lineIsHiddenInner(doc,line,span){if(span.to==null){var end=span.marker.find(1,!0);return lineIsHiddenInner(doc,end.line,getMarkedSpanFor(end.line.markedSpans,span.marker))}
if(span.marker.inclusiveRight&&span.to==line.text.length)
return!0;for(var sp,i=0;i<line.markedSpans.length;++i){sp=line.markedSpans[i];if(sp.marker.collapsed&&!sp.marker.widgetNode&&sp.from==span.to&&(sp.to==null||sp.to!=span.from)&&(sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&lineIsHiddenInner(doc,line,sp))return!0}}
var LineWidget=CodeMirror.LineWidget=function(doc,node,options){if(options)for(var opt in options)if(options.hasOwnProperty(opt))
this[opt]=options[opt];this.doc=doc;this.node=node};eventMixin(LineWidget);function adjustScrollWhenAboveVisible(cm,line,diff){if(heightAtLine(line)<((cm.curOp&&cm.curOp.scrollTop)||cm.doc.scrollTop))
addToScrollPos(cm,null,diff)}
LineWidget.prototype.clear=function(){var cm=this.doc.cm,ws=this.line.widgets,line=this.line,no=lineNo(line);if(no==null||!ws)return;for(var i=0;i<ws.length;++i)if(ws[i]==this)ws.splice(i--,1);if(!ws.length)line.widgets=null;var height=widgetHeight(this);updateLineHeight(line,Math.max(0,line.height-height));if(cm)runInOp(cm,function(){adjustScrollWhenAboveVisible(cm,line,-height);regLineChange(cm,no,"widget")})};LineWidget.prototype.changed=function(){var oldH=this.height,cm=this.doc.cm,line=this.line;this.height=null;var diff=widgetHeight(this)-oldH;if(!diff)return;updateLineHeight(line,line.height+diff);if(cm)runInOp(cm,function(){cm.curOp.forceUpdate=!0;adjustScrollWhenAboveVisible(cm,line,diff)})};function widgetHeight(widget){if(widget.height!=null)return widget.height;var cm=widget.doc.cm;if(!cm)return 0;if(!contains(document.body,widget.node)){var parentStyle="position: relative;";if(widget.coverGutter)
parentStyle+="margin-left: -"+cm.display.gutters.offsetWidth+"px;";if(widget.noHScroll)
parentStyle+="width: "+cm.display.wrapper.clientWidth+"px;";removeChildrenAndAdd(cm.display.measure,elt("div",[widget.node],null,parentStyle))}
return widget.height=widget.node.parentNode.offsetHeight}
function addLineWidget(doc,handle,node,options){var widget=new LineWidget(doc,node,options);var cm=doc.cm;if(cm&&widget.noHScroll)cm.display.alignWidgets=!0;changeLine(doc,handle,"widget",function(line){var widgets=line.widgets||(line.widgets=[]);if(widget.insertAt==null)widgets.push(widget);else widgets.splice(Math.min(widgets.length-1,Math.max(0,widget.insertAt)),0,widget);widget.line=line;if(cm&&!lineIsHidden(doc,line)){var aboveVisible=heightAtLine(line)<doc.scrollTop;updateLineHeight(line,line.height+widgetHeight(widget));if(aboveVisible)addToScrollPos(cm,null,widget.height);cm.curOp.forceUpdate=!0}
return!0});return widget}
var Line=CodeMirror.Line=function(text,markedSpans,estimateHeight){this.text=text;attachMarkedSpans(this,markedSpans);this.height=estimateHeight?estimateHeight(this):1};eventMixin(Line);Line.prototype.lineNo=function(){return lineNo(this)};function updateLine(line,text,markedSpans,estimateHeight){line.text=text;if(line.stateAfter)line.stateAfter=null;if(line.styles)line.styles=null;if(line.order!=null)line.order=null;detachMarkedSpans(line);attachMarkedSpans(line,markedSpans);var estHeight=estimateHeight?estimateHeight(line):1;if(estHeight!=line.height)updateLineHeight(line,estHeight)}
function cleanUpLine(line){line.parent=null;detachMarkedSpans(line)}
function extractLineClasses(type,output){if(type)for(;;){var lineClass=type.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!lineClass)break;type=type.slice(0,lineClass.index)+type.slice(lineClass.index+lineClass[0].length);var prop=lineClass[1]?"bgClass":"textClass";if(output[prop]==null)
output[prop]=lineClass[2];else if(!(new RegExp("(?:^|\s)"+lineClass[2]+"(?:$|\s)")).test(output[prop]))
output[prop]+=" "+lineClass[2]}
return type}
function callBlankLine(mode,state){if(mode.blankLine)return mode.blankLine(state);if(!mode.innerMode)return;var inner=CodeMirror.innerMode(mode,state);if(inner.mode.blankLine)return inner.mode.blankLine(inner.state)}
function readToken(mode,stream,state,inner){for(var i=0;i<10;i++){if(inner)inner[0]=CodeMirror.innerMode(mode,state).mode;var style=mode.token(stream,state);if(stream.pos>stream.start)return style}
throw new Error("Mode "+mode.name+" failed to advance stream.")}
function takeToken(cm,pos,precise,asArray){function getObj(copy){return{start:stream.start,end:stream.pos,string:stream.current(),type:style||null,state:copy?copyState(doc.mode,state):state}}
var doc=cm.doc,mode=doc.mode,style;pos=clipPos(doc,pos);var line=getLine(doc,pos.line),state=getStateBefore(cm,pos.line,precise);var stream=new StringStream(line.text,cm.options.tabSize),tokens;if(asArray)tokens=[];while((asArray||stream.pos<pos.ch)&&!stream.eol()){stream.start=stream.pos;style=readToken(mode,stream,state);if(asArray)tokens.push(getObj(!0))}
return asArray?tokens:getObj()}
function runMode(cm,text,mode,state,f,lineClasses,forceToEnd){var flattenSpans=mode.flattenSpans;if(flattenSpans==null)flattenSpans=cm.options.flattenSpans;var curStart=0,curStyle=null;var stream=new StringStream(text,cm.options.tabSize),style;var inner=cm.options.addModeClass&&[null];if(text=="")extractLineClasses(callBlankLine(mode,state),lineClasses);while(!stream.eol()){if(stream.pos>cm.options.maxHighlightLength){flattenSpans=!1;if(forceToEnd)processLine(cm,text,state,stream.pos);stream.pos=text.length;style=null}else{style=extractLineClasses(readToken(mode,stream,state,inner),lineClasses)}
if(inner){var mName=inner[0].name;if(mName)style="m-"+(style?mName+" "+style:mName)}
if(!flattenSpans||curStyle!=style){while(curStart<stream.start){curStart=Math.min(stream.start,curStart+5000);f(curStart,curStyle)}
curStyle=style}
stream.start=stream.pos}
while(curStart<stream.pos){var pos=Math.min(stream.pos,curStart+5000);f(pos,curStyle);curStart=pos}}
function highlightLine(cm,line,state,forceToEnd){var st=[cm.state.modeGen],lineClasses={};runMode(cm,line.text,cm.doc.mode,state,function(end,style){st.push(end,style)},lineClasses,forceToEnd);for(var o=0;o<cm.state.overlays.length;++o){var overlay=cm.state.overlays[o],i=1,at=0;runMode(cm,line.text,overlay.mode,!0,function(end,style){var start=i;while(at<end){var i_end=st[i];if(i_end>end)
st.splice(i,1,end,st[i+1],i_end);i+=2;at=Math.min(end,i_end)}
if(!style)return;if(overlay.opaque){st.splice(start,i-start,end,"cm-overlay "+style);i=start+2}else{for(;start<i;start+=2){var cur=st[start+1];st[start+1]=(cur?cur+" ":"")+"cm-overlay "+style}}},lineClasses)}
return{styles:st,classes:lineClasses.bgClass||lineClasses.textClass?lineClasses:null}}
function getLineStyles(cm,line,updateFrontier){if(!line.styles||line.styles[0]!=cm.state.modeGen){var state=getStateBefore(cm,lineNo(line));var result=highlightLine(cm,line,line.text.length>cm.options.maxHighlightLength?copyState(cm.doc.mode,state):state);line.stateAfter=state;line.styles=result.styles;if(result.classes)line.styleClasses=result.classes;else if(line.styleClasses)line.styleClasses=null;if(updateFrontier===cm.doc.frontier)cm.doc.frontier++}
return line.styles}
function processLine(cm,text,state,startAt){var mode=cm.doc.mode;var stream=new StringStream(text,cm.options.tabSize);stream.start=stream.pos=startAt||0;if(text=="")callBlankLine(mode,state);while(!stream.eol()){readToken(mode,stream,state);stream.start=stream.pos}}
var styleToClassCache={},styleToClassCacheWithMode={};function interpretTokenStyle(style,options){if(!style||/^\s*$/.test(style))return null;var cache=options.addModeClass?styleToClassCacheWithMode:styleToClassCache;return cache[style]||(cache[style]=style.replace(/\S+/g,"cm-$&"))}
function buildLineContent(cm,lineView){var content=elt("span",null,null,webkit?"padding-right: .1px":null);var builder={pre:elt("pre",[content],"CodeMirror-line"),content:content,col:0,pos:0,cm:cm,trailingSpace:!1,splitSpaces:(ie||webkit)&&cm.getOption("lineWrapping")};lineView.measure={};for(var i=0;i<=(lineView.rest?lineView.rest.length:0);i++){var line=i?lineView.rest[i-1]:lineView.line,order;builder.pos=0;builder.addToken=buildToken;if(hasBadBidiRects(cm.display.measure)&&(order=getOrder(line)))
builder.addToken=buildTokenBadBidi(builder.addToken,order);builder.map=[];var allowFrontierUpdate=lineView!=cm.display.externalMeasured&&lineNo(line);insertLineContent(line,builder,getLineStyles(cm,line,allowFrontierUpdate));if(line.styleClasses){if(line.styleClasses.bgClass)
builder.bgClass=joinClasses(line.styleClasses.bgClass,builder.bgClass||"");if(line.styleClasses.textClass)
builder.textClass=joinClasses(line.styleClasses.textClass,builder.textClass||"")}
if(builder.map.length==0)
builder.map.push(0,0,builder.content.appendChild(zeroWidthElement(cm.display.measure)));if(i==0){lineView.measure.map=builder.map;lineView.measure.cache={}}else{(lineView.measure.maps||(lineView.measure.maps=[])).push(builder.map);(lineView.measure.caches||(lineView.measure.caches=[])).push({})}}
if(webkit){var last=builder.content.lastChild
if(/\bcm-tab\b/.test(last.className)||(last.querySelector&&last.querySelector(".cm-tab")))
builder.content.className="cm-tab-wrap-hack"}
signal(cm,"renderLine",cm,lineView.line,builder.pre);if(builder.pre.className)
builder.textClass=joinClasses(builder.pre.className,builder.textClass||"");return builder}
function defaultSpecialCharPlaceholder(ch){var token=elt("span","\u2022","cm-invalidchar");token.title="\\u"+ch.charCodeAt(0).toString(16);token.setAttribute("aria-label",token.title);return token}
function buildToken(builder,text,style,startStyle,endStyle,title,css){if(!text)return;var displayText=builder.splitSpaces?splitSpaces(text,builder.trailingSpace):text
var special=builder.cm.state.specialChars,mustWrap=!1;if(!special.test(text)){builder.col+=text.length;var content=document.createTextNode(displayText);builder.map.push(builder.pos,builder.pos+text.length,content);if(ie&&ie_version<9)mustWrap=!0;builder.pos+=text.length}else{var content=document.createDocumentFragment(),pos=0;while(!0){special.lastIndex=pos;var m=special.exec(text);var skipped=m?m.index-pos:text.length-pos;if(skipped){var txt=document.createTextNode(displayText.slice(pos,pos+skipped));if(ie&&ie_version<9)content.appendChild(elt("span",[txt]));else content.appendChild(txt);builder.map.push(builder.pos,builder.pos+skipped,txt);builder.col+=skipped;builder.pos+=skipped}
if(!m)break;pos+=skipped+1;if(m[0]=="\t"){var tabSize=builder.cm.options.tabSize,tabWidth=tabSize-builder.col%tabSize;var txt=content.appendChild(elt("span",spaceStr(tabWidth),"cm-tab"));txt.setAttribute("role","presentation");txt.setAttribute("cm-text","\t");builder.col+=tabWidth}else if(m[0]=="\r"||m[0]=="\n"){var txt=content.appendChild(elt("span",m[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));txt.setAttribute("cm-text",m[0]);builder.col+=1}else{var txt=builder.cm.options.specialCharPlaceholder(m[0]);txt.setAttribute("cm-text",m[0]);if(ie&&ie_version<9)content.appendChild(elt("span",[txt]));else content.appendChild(txt);builder.col+=1}
builder.map.push(builder.pos,builder.pos+1,txt);builder.pos++}}
builder.trailingSpace=displayText.charCodeAt(text.length-1)==32
if(style||startStyle||endStyle||mustWrap||css){var fullStyle=style||"";if(startStyle)fullStyle+=startStyle;if(endStyle)fullStyle+=endStyle;var token=elt("span",[content],fullStyle,css);if(title)token.title=title;return builder.content.appendChild(token)}
builder.content.appendChild(content)}
function splitSpaces(text,trailingBefore){if(text.length>1&&!/  /.test(text))return text
var spaceBefore=trailingBefore,result=""
for(var i=0;i<text.length;i++){var ch=text.charAt(i)
if(ch==" "&&spaceBefore&&(i==text.length-1||text.charCodeAt(i+1)==32))
ch="\u00a0"
result+=ch
spaceBefore=ch==" "}
return result}
function buildTokenBadBidi(inner,order){return function(builder,text,style,startStyle,endStyle,title,css){style=style?style+" cm-force-border":"cm-force-border";var start=builder.pos,end=start+text.length;for(;;){for(var i=0;i<order.length;i++){var part=order[i];if(part.to>start&&part.from<=start)break}
if(part.to>=end)return inner(builder,text,style,startStyle,endStyle,title,css);inner(builder,text.slice(0,part.to-start),style,startStyle,null,title,css);startStyle=null;text=text.slice(part.to-start);start=part.to}}}
function buildCollapsedSpan(builder,size,marker,ignoreWidget){var widget=!ignoreWidget&&marker.widgetNode;if(widget)builder.map.push(builder.pos,builder.pos+size,widget);if(!ignoreWidget&&builder.cm.display.input.needsContentAttribute){if(!widget)
widget=builder.content.appendChild(document.createElement("span"));widget.setAttribute("cm-marker",marker.id)}
if(widget){builder.cm.display.input.setUneditable(widget);builder.content.appendChild(widget)}
builder.pos+=size;builder.trailingSpace=!1}
function insertLineContent(line,builder,styles){var spans=line.markedSpans,allText=line.text,at=0;if(!spans){for(var i=1;i<styles.length;i+=2)
builder.addToken(builder,allText.slice(at,at=styles[i]),interpretTokenStyle(styles[i+1],builder.cm.options));return}
var len=allText.length,pos=0,i=1,text="",style,css;var nextChange=0,spanStyle,spanEndStyle,spanStartStyle,title,collapsed;for(;;){if(nextChange==pos){spanStyle=spanEndStyle=spanStartStyle=title=css="";collapsed=null;nextChange=Infinity;var foundBookmarks=[],endStyles
for(var j=0;j<spans.length;++j){var sp=spans[j],m=sp.marker;if(m.type=="bookmark"&&sp.from==pos&&m.widgetNode){foundBookmarks.push(m)}else if(sp.from<=pos&&(sp.to==null||sp.to>pos||m.collapsed&&sp.to==pos&&sp.from==pos)){if(sp.to!=null&&sp.to!=pos&&nextChange>sp.to){nextChange=sp.to;spanEndStyle=""}
if(m.className)spanStyle+=" "+m.className;if(m.css)css=(css?css+";":"")+m.css;if(m.startStyle&&sp.from==pos)spanStartStyle+=" "+m.startStyle;if(m.endStyle&&sp.to==nextChange)(endStyles||(endStyles=[])).push(m.endStyle,sp.to)
if(m.title&&!title)title=m.title;if(m.collapsed&&(!collapsed||compareCollapsedMarkers(collapsed.marker,m)<0))
collapsed=sp}else if(sp.from>pos&&nextChange>sp.from){nextChange=sp.from}}
if(endStyles)for(var j=0;j<endStyles.length;j+=2)
if(endStyles[j+1]==nextChange)spanEndStyle+=" "+endStyles[j]
if(!collapsed||collapsed.from==pos)for(var j=0;j<foundBookmarks.length;++j)
buildCollapsedSpan(builder,0,foundBookmarks[j]);if(collapsed&&(collapsed.from||0)==pos){buildCollapsedSpan(builder,(collapsed.to==null?len+1:collapsed.to)-pos,collapsed.marker,collapsed.from==null);if(collapsed.to==null)return;if(collapsed.to==pos)collapsed=!1}}
if(pos>=len)break;var upto=Math.min(len,nextChange);while(!0){if(text){var end=pos+text.length;if(!collapsed){var tokenText=end>upto?text.slice(0,upto-pos):text;builder.addToken(builder,tokenText,style?style+spanStyle:spanStyle,spanStartStyle,pos+tokenText.length==nextChange?spanEndStyle:"",title,css)}
if(end>=upto){text=text.slice(upto-pos);pos=upto;break}
pos=end;spanStartStyle=""}
text=allText.slice(at,at=styles[i++]);style=interpretTokenStyle(styles[i++],builder.cm.options)}}}
function isWholeLineUpdate(doc,change){return change.from.ch==0&&change.to.ch==0&&lst(change.text)==""&&(!doc.cm||doc.cm.options.wholeLineUpdateBefore)}
function updateDoc(doc,change,markedSpans,estimateHeight){function spansFor(n){return markedSpans?markedSpans[n]:null}
function update(line,text,spans){updateLine(line,text,spans,estimateHeight);signalLater(line,"change",line,change)}
function linesFor(start,end){for(var i=start,result=[];i<end;++i)
result.push(new Line(text[i],spansFor(i),estimateHeight));return result}
var from=change.from,to=change.to,text=change.text;var firstLine=getLine(doc,from.line),lastLine=getLine(doc,to.line);var lastText=lst(text),lastSpans=spansFor(text.length-1),nlines=to.line-from.line;if(change.full){doc.insert(0,linesFor(0,text.length));doc.remove(text.length,doc.size-text.length)}else if(isWholeLineUpdate(doc,change)){var added=linesFor(0,text.length-1);update(lastLine,lastLine.text,lastSpans);if(nlines)doc.remove(from.line,nlines);if(added.length)doc.insert(from.line,added)}else if(firstLine==lastLine){if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+lastText+firstLine.text.slice(to.ch),lastSpans)}else{var added=linesFor(1,text.length-1);added.push(new Line(lastText+firstLine.text.slice(to.ch),lastSpans,estimateHeight));update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));doc.insert(from.line+1,added)}}else if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+text[0]+lastLine.text.slice(to.ch),spansFor(0));doc.remove(from.line+1,nlines)}else{update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));update(lastLine,lastText+lastLine.text.slice(to.ch),lastSpans);var added=linesFor(1,text.length-1);if(nlines>1)doc.remove(from.line+1,nlines-1);doc.insert(from.line+1,added)}
signalLater(doc,"change",doc,change)}
function LeafChunk(lines){this.lines=lines;this.parent=null;for(var i=0,height=0;i<lines.length;++i){lines[i].parent=this;height+=lines[i].height}
this.height=height}
LeafChunk.prototype={chunkSize:function(){return this.lines.length},removeInner:function(at,n){for(var i=at,e=at+n;i<e;++i){var line=this.lines[i];this.height-=line.height;cleanUpLine(line);signalLater(line,"delete")}
this.lines.splice(at,n)},collapse:function(lines){lines.push.apply(lines,this.lines)},insertInner:function(at,lines,height){this.height+=height;this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at));for(var i=0;i<lines.length;++i)lines[i].parent=this},iterN:function(at,n,op){for(var e=at+n;at<e;++at)
if(op(this.lines[at]))return!0}};function BranchChunk(children){this.children=children;var size=0,height=0;for(var i=0;i<children.length;++i){var ch=children[i];size+=ch.chunkSize();height+=ch.height;ch.parent=this}
this.size=size;this.height=height;this.parent=null}
BranchChunk.prototype={chunkSize:function(){return this.size},removeInner:function(at,n){this.size-=n;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;child.removeInner(at,rm);this.height-=oldHeight-child.height;if(sz==rm){this.children.splice(i--,1);child.parent=null}
if((n-=rm)==0)break;at=0}else at-=sz}
if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof LeafChunk))){var lines=[];this.collapse(lines);this.children=[new LeafChunk(lines)];this.children[0].parent=this}},collapse:function(lines){for(var i=0;i<this.children.length;++i)this.children[i].collapse(lines);},insertInner:function(at,lines,height){this.size+=lines.length;this.height+=height;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<=sz){child.insertInner(at,lines,height);if(child.lines&&child.lines.length>50){var remaining=child.lines.length%25+25
for(var pos=remaining;pos<child.lines.length;){var leaf=new LeafChunk(child.lines.slice(pos,pos+=25));child.height-=leaf.height;this.children.splice(++i,0,leaf);leaf.parent=this}
child.lines=child.lines.slice(0,remaining);this.maybeSpill()}
break}
at-=sz}},maybeSpill:function(){if(this.children.length<=10)return;var me=this;do{var spilled=me.children.splice(me.children.length-5,5);var sibling=new BranchChunk(spilled);if(!me.parent){var copy=new BranchChunk(me.children);copy.parent=me;me.children=[copy,sibling];me=copy}else{me.size-=sibling.size;me.height-=sibling.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,sibling)}
sibling.parent=me.parent}while(me.children.length>10);me.parent.maybeSpill()},iterN:function(at,n,op){for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(child.iterN(at,used,op))return!0;if((n-=used)==0)break;at=0}else at-=sz}}};var nextDocId=0;var Doc=CodeMirror.Doc=function(text,mode,firstLine,lineSep){if(!(this instanceof Doc))return new Doc(text,mode,firstLine,lineSep);if(firstLine==null)firstLine=0;BranchChunk.call(this,[new LeafChunk([new Line("",null)])]);this.first=firstLine;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=firstLine;var start=Pos(firstLine,0);this.sel=simpleSelection(start);this.history=new History(null);this.id=++nextDocId;this.modeOption=mode;this.lineSep=lineSep;this.extend=!1;if(typeof text=="string")text=this.splitLines(text);updateDoc(this,{from:start,to:start,text:text});setSelection(this,simpleSelection(start),sel_dontScroll)};Doc.prototype=createObj(BranchChunk.prototype,{constructor:Doc,iter:function(from,to,op){if(op)this.iterN(from-this.first,to-from,op);else this.iterN(this.first,this.first+this.size,from)},insert:function(at,lines){var height=0;for(var i=0;i<lines.length;++i)height+=lines[i].height;this.insertInner(at-this.first,lines,height)},remove:function(at,n){this.removeInner(at-this.first,n)},getValue:function(lineSep){var lines=getLines(this,this.first,this.first+this.size);if(lineSep===!1)return lines;return lines.join(lineSep||this.lineSeparator())},setValue:docMethodOp(function(code){var top=Pos(this.first,0),last=this.first+this.size-1;makeChange(this,{from:top,to:Pos(last,getLine(this,last).text.length),text:this.splitLines(code),origin:"setValue",full:!0},!0);setSelection(this,simpleSelection(top))}),replaceRange:function(code,from,to,origin){from=clipPos(this,from);to=to?clipPos(this,to):from;replaceRange(this,code,from,to,origin)},getRange:function(from,to,lineSep){var lines=getBetween(this,clipPos(this,from),clipPos(this,to));if(lineSep===!1)return lines;return lines.join(lineSep||this.lineSeparator())},getLine:function(line){var l=this.getLineHandle(line);return l&&l.text},getLineHandle:function(line){if(isLine(this,line))return getLine(this,line)},getLineNumber:function(line){return lineNo(line)},getLineHandleVisualStart:function(line){if(typeof line=="number")line=getLine(this,line);return visualLine(line)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(pos){return clipPos(this,pos)},getCursor:function(start){var range=this.sel.primary(),pos;if(start==null||start=="head")pos=range.head;else if(start=="anchor")pos=range.anchor;else if(start=="end"||start=="to"||start===!1)pos=range.to();else pos=range.from();return pos},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:docMethodOp(function(line,ch,options){setSimpleSelection(this,clipPos(this,typeof line=="number"?Pos(line,ch||0):line),null,options)}),setSelection:docMethodOp(function(anchor,head,options){setSimpleSelection(this,clipPos(this,anchor),clipPos(this,head||anchor),options)}),extendSelection:docMethodOp(function(head,other,options){extendSelection(this,clipPos(this,head),other&&clipPos(this,other),options)}),extendSelections:docMethodOp(function(heads,options){extendSelections(this,clipPosArray(this,heads),options)}),extendSelectionsBy:docMethodOp(function(f,options){var heads=map(this.sel.ranges,f);extendSelections(this,clipPosArray(this,heads),options)}),setSelections:docMethodOp(function(ranges,primary,options){if(!ranges.length)return;for(var i=0,out=[];i<ranges.length;i++)
out[i]=new Range(clipPos(this,ranges[i].anchor),clipPos(this,ranges[i].head));if(primary==null)primary=Math.min(ranges.length-1,this.sel.primIndex);setSelection(this,normalizeSelection(out,primary),options)}),addSelection:docMethodOp(function(anchor,head,options){var ranges=this.sel.ranges.slice(0);ranges.push(new Range(clipPos(this,anchor),clipPos(this,head||anchor)));setSelection(this,normalizeSelection(ranges,ranges.length-1),options)}),getSelection:function(lineSep){var ranges=this.sel.ranges,lines;for(var i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());lines=lines?lines.concat(sel):sel}
if(lineSep===!1)return lines;else return lines.join(lineSep||this.lineSeparator())},getSelections:function(lineSep){var parts=[],ranges=this.sel.ranges;for(var i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());if(lineSep!==!1)sel=sel.join(lineSep||this.lineSeparator());parts[i]=sel}
return parts},replaceSelection:function(code,collapse,origin){var dup=[];for(var i=0;i<this.sel.ranges.length;i++)
dup[i]=code;this.replaceSelections(dup,collapse,origin||"+input")},replaceSelections:docMethodOp(function(code,collapse,origin){var changes=[],sel=this.sel;for(var i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];changes[i]={from:range.from(),to:range.to(),text:this.splitLines(code[i]),origin:origin}}
var newSel=collapse&&collapse!="end"&&computeReplacedSel(this,changes,collapse);for(var i=changes.length-1;i>=0;i--)
makeChange(this,changes[i]);if(newSel)setSelectionReplaceHistory(this,newSel);else if(this.cm)ensureCursorVisible(this.cm)}),undo:docMethodOp(function(){makeChangeFromHistory(this,"undo")}),redo:docMethodOp(function(){makeChangeFromHistory(this,"redo")}),undoSelection:docMethodOp(function(){makeChangeFromHistory(this,"undo",!0)}),redoSelection:docMethodOp(function(){makeChangeFromHistory(this,"redo",!0)}),setExtending:function(val){this.extend=val},getExtending:function(){return this.extend},historySize:function(){var hist=this.history,done=0,undone=0;for(var i=0;i<hist.done.length;i++)if(!hist.done[i].ranges)++done;for(var i=0;i<hist.undone.length;i++)if(!hist.undone[i].ranges)++undone;return{undo:done,redo:undone}},clearHistory:function(){this.history=new History(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(forceSplit){if(forceSplit)
this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null;return this.history.generation},isClean:function(gen){return this.history.generation==(gen||this.cleanGeneration)},getHistory:function(){return{done:copyHistoryArray(this.history.done),undone:copyHistoryArray(this.history.undone)}},setHistory:function(histData){var hist=this.history=new History(this.history.maxGeneration);hist.done=copyHistoryArray(histData.done.slice(0),null,!0);hist.undone=copyHistoryArray(histData.undone.slice(0),null,!0)},addLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";if(!line[prop])line[prop]=cls;else if(classTest(cls).test(line[prop]))return!1;else line[prop]+=" "+cls;return!0})}),removeLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";var cur=line[prop];if(!cur)return!1;else if(cls==null)line[prop]=null;else{var found=cur.match(classTest(cls));if(!found)return!1;var end=found.index+found[0].length;line[prop]=cur.slice(0,found.index)+(!found.index||end==cur.length?"":" ")+cur.slice(end)||null}
return!0})}),addLineWidget:docMethodOp(function(handle,node,options){return addLineWidget(this,handle,node,options)}),removeLineWidget:function(widget){widget.clear()},markText:function(from,to,options){return markText(this,clipPos(this,from),clipPos(this,to),options,options&&options.type||"range")},setBookmark:function(pos,options){var realOpts={replacedWith:options&&(options.nodeType==null?options.widget:options),insertLeft:options&&options.insertLeft,clearWhenEmpty:!1,shared:options&&options.shared,handleMouseEvents:options&&options.handleMouseEvents};pos=clipPos(this,pos);return markText(this,pos,pos,realOpts,"bookmark")},findMarksAt:function(pos){pos=clipPos(this,pos);var markers=[],spans=getLine(this,pos.line).markedSpans;if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];if((span.from==null||span.from<=pos.ch)&&(span.to==null||span.to>=pos.ch))
markers.push(span.marker.parent||span.marker)}
return markers},findMarks:function(from,to,filter){from=clipPos(this,from);to=clipPos(this,to);var found=[],lineNo=from.line;this.iter(from.line,to.line+1,function(line){var spans=line.markedSpans;if(spans)for(var i=0;i<spans.length;i++){var span=spans[i];if(!(span.to!=null&&lineNo==from.line&&from.ch>=span.to||span.from==null&&lineNo!=from.line||span.from!=null&&lineNo==to.line&&span.from>=to.ch)&&(!filter||filter(span.marker)))
found.push(span.marker.parent||span.marker)}
++lineNo});return found},getAllMarks:function(){var markers=[];this.iter(function(line){var sps=line.markedSpans;if(sps)for(var i=0;i<sps.length;++i)
if(sps[i].from!=null)markers.push(sps[i].marker);});return markers},posFromIndex:function(off){var ch,lineNo=this.first,sepSize=this.lineSeparator().length;this.iter(function(line){var sz=line.text.length+sepSize;if(sz>off){ch=off;return!0}
off-=sz;++lineNo});return clipPos(this,Pos(lineNo,ch))},indexFromPos:function(coords){coords=clipPos(this,coords);var index=coords.ch;if(coords.line<this.first||coords.ch<0)return 0;var sepSize=this.lineSeparator().length;this.iter(this.first,coords.line,function(line){index+=line.text.length+sepSize});return index},copy:function(copyHistory){var doc=new Doc(getLines(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);doc.scrollTop=this.scrollTop;doc.scrollLeft=this.scrollLeft;doc.sel=this.sel;doc.extend=!1;if(copyHistory){doc.history.undoDepth=this.history.undoDepth;doc.setHistory(this.getHistory())}
return doc},linkedDoc:function(options){if(!options)options={};var from=this.first,to=this.first+this.size;if(options.from!=null&&options.from>from)from=options.from;if(options.to!=null&&options.to<to)to=options.to;var copy=new Doc(getLines(this,from,to),options.mode||this.modeOption,from,this.lineSep);if(options.sharedHist)copy.history=this.history;(this.linked||(this.linked=[])).push({doc:copy,sharedHist:options.sharedHist});copy.linked=[{doc:this,isParent:!0,sharedHist:options.sharedHist}];copySharedMarkers(copy,findSharedMarkers(this));return copy},unlinkDoc:function(other){if(other instanceof CodeMirror)other=other.doc;if(this.linked)for(var i=0;i<this.linked.length;++i){var link=this.linked[i];if(link.doc!=other)continue;this.linked.splice(i,1);other.unlinkDoc(this);detachSharedMarkers(findSharedMarkers(this));break}
if(other.history==this.history){var splitIds=[other.id];linkedDocs(other,function(doc){splitIds.push(doc.id)},!0);other.history=new History(null);other.history.done=copyHistoryArray(this.history.done,splitIds);other.history.undone=copyHistoryArray(this.history.undone,splitIds)}},iterLinkedDocs:function(f){linkedDocs(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(str){if(this.lineSep)return str.split(this.lineSep);return splitLinesAuto(str)},lineSeparator:function(){return this.lineSep||"\n"}});Doc.prototype.eachLine=Doc.prototype.iter;var dontDelegate="iter insert remove copy getEditor constructor".split(" ");for(var prop in Doc.prototype)if(Doc.prototype.hasOwnProperty(prop)&&indexOf(dontDelegate,prop)<0)
CodeMirror.prototype[prop]=(function(method){return function(){return method.apply(this.doc,arguments)}})(Doc.prototype[prop]);eventMixin(Doc);function linkedDocs(doc,f,sharedHistOnly){function propagate(doc,skip,sharedHist){if(doc.linked)for(var i=0;i<doc.linked.length;++i){var rel=doc.linked[i];if(rel.doc==skip)continue;var shared=sharedHist&&rel.sharedHist;if(sharedHistOnly&&!shared)continue;f(rel.doc,shared);propagate(rel.doc,doc,shared)}}
propagate(doc,null,!0)}
function attachDoc(cm,doc){if(doc.cm)throw new Error("This document is already in use.");cm.doc=doc;doc.cm=cm;estimateLineHeights(cm);loadMode(cm);if(!cm.options.lineWrapping)findMaxLine(cm);cm.options.mode=doc.modeOption;regChange(cm)}
function getLine(doc,n){n-=doc.first;if(n<0||n>=doc.size)throw new Error("There is no line "+(n+doc.first)+" in the document.");for(var chunk=doc;!chunk.lines;){for(var i=0;;++i){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;break}
n-=sz}}
return chunk.lines[n]}
function getBetween(doc,start,end){var out=[],n=start.line;doc.iter(start.line,end.line+1,function(line){var text=line.text;if(n==end.line)text=text.slice(0,end.ch);if(n==start.line)text=text.slice(start.ch);out.push(text);++n});return out}
function getLines(doc,from,to){var out=[];doc.iter(from,to,function(line){out.push(line.text)});return out}
function updateLineHeight(line,height){var diff=height-line.height;if(diff)for(var n=line;n;n=n.parent)n.height+=diff}
function lineNo(line){if(line.parent==null)return null;var cur=line.parent,no=indexOf(cur.lines,line);for(var chunk=cur.parent;chunk;cur=chunk,chunk=chunk.parent){for(var i=0;;++i){if(chunk.children[i]==cur)break;no+=chunk.children[i].chunkSize()}}
return no+cur.first}
function lineAtHeight(chunk,h){var n=chunk.first;outer:do{for(var i=0;i<chunk.children.length;++i){var child=chunk.children[i],ch=child.height;if(h<ch){chunk=child;continue outer}
h-=ch;n+=child.chunkSize()}
return n}while(!chunk.lines);for(var i=0;i<chunk.lines.length;++i){var line=chunk.lines[i],lh=line.height;if(h<lh)break;h-=lh}
return n+i}
function heightAtLine(lineObj){lineObj=visualLine(lineObj);var h=0,chunk=lineObj.parent;for(var i=0;i<chunk.lines.length;++i){var line=chunk.lines[i];if(line==lineObj)break;else h+=line.height}
for(var p=chunk.parent;p;chunk=p,p=chunk.parent){for(var i=0;i<p.children.length;++i){var cur=p.children[i];if(cur==chunk)break;else h+=cur.height}}
return h}
function getOrder(line){var order=line.order;if(order==null)order=line.order=bidiOrdering(line.text);return order}
function History(startGen){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=startGen||1}
function historyChangeFromChange(doc,change){var histChange={from:copyPos(change.from),to:changeEnd(change),text:getBetween(doc,change.from,change.to)};attachLocalSpans(doc,histChange,change.from.line,change.to.line+1);linkedDocs(doc,function(doc){attachLocalSpans(doc,histChange,change.from.line,change.to.line+1)},!0);return histChange}
function clearSelectionEvents(array){while(array.length){var last=lst(array);if(last.ranges)array.pop();else break}}
function lastChangeEvent(hist,force){if(force){clearSelectionEvents(hist.done);return lst(hist.done)}else if(hist.done.length&&!lst(hist.done).ranges){return lst(hist.done)}else if(hist.done.length>1&&!hist.done[hist.done.length-2].ranges){hist.done.pop();return lst(hist.done)}}
function addChangeToHistory(doc,change,selAfter,opId){var hist=doc.history;hist.undone.length=0;var time=+new Date,cur;if((hist.lastOp==opId||hist.lastOrigin==change.origin&&change.origin&&((change.origin.charAt(0)=="+"&&doc.cm&&hist.lastModTime>time-doc.cm.options.historyEventDelay)||change.origin.charAt(0)=="*"))&&(cur=lastChangeEvent(hist,hist.lastOp==opId))){var last=lst(cur.changes);if(cmp(change.from,change.to)==0&&cmp(change.from,last.to)==0){last.to=changeEnd(change)}else{cur.changes.push(historyChangeFromChange(doc,change))}}else{var before=lst(hist.done);if(!before||!before.ranges)
pushSelectionToHistory(doc.sel,hist.done);cur={changes:[historyChangeFromChange(doc,change)],generation:hist.generation};hist.done.push(cur);while(hist.done.length>hist.undoDepth){hist.done.shift();if(!hist.done[0].ranges)hist.done.shift()}}
hist.done.push(selAfter);hist.generation=++hist.maxGeneration;hist.lastModTime=hist.lastSelTime=time;hist.lastOp=hist.lastSelOp=opId;hist.lastOrigin=hist.lastSelOrigin=change.origin;if(!last)signal(doc,"historyAdded")}
function selectionEventCanBeMerged(doc,origin,prev,sel){var ch=origin.charAt(0);return ch=="*"||ch=="+"&&prev.ranges.length==sel.ranges.length&&prev.somethingSelected()==sel.somethingSelected()&&new Date-doc.history.lastSelTime<=(doc.cm?doc.cm.options.historyEventDelay:500)}
function addSelectionToHistory(doc,sel,opId,options){var hist=doc.history,origin=options&&options.origin;if(opId==hist.lastSelOp||(origin&&hist.lastSelOrigin==origin&&(hist.lastModTime==hist.lastSelTime&&hist.lastOrigin==origin||selectionEventCanBeMerged(doc,origin,lst(hist.done),sel))))
hist.done[hist.done.length-1]=sel;else pushSelectionToHistory(sel,hist.done);hist.lastSelTime=+new Date;hist.lastSelOrigin=origin;hist.lastSelOp=opId;if(options&&options.clearRedo!==!1)
clearSelectionEvents(hist.undone)}
function pushSelectionToHistory(sel,dest){var top=lst(dest);if(!(top&&top.ranges&&top.equals(sel)))
dest.push(sel)}
function attachLocalSpans(doc,change,from,to){var existing=change["spans_"+doc.id],n=0;doc.iter(Math.max(doc.first,from),Math.min(doc.first+doc.size,to),function(line){if(line.markedSpans)(existing||(existing=change["spans_"+doc.id]={}))[n]=line.markedSpans;++n})}
function removeClearedSpans(spans){if(!spans)return null;for(var i=0,out;i<spans.length;++i){if(spans[i].marker.explicitlyCleared){if(!out)out=spans.slice(0,i)}else if(out)out.push(spans[i])}
return!out?spans:out.length?out:null}
function getOldSpans(doc,change){var found=change["spans_"+doc.id];if(!found)return null;for(var i=0,nw=[];i<change.text.length;++i)
nw.push(removeClearedSpans(found[i]));return nw}
function copyHistoryArray(events,newGroup,instantiateSel){for(var i=0,copy=[];i<events.length;++i){var event=events[i];if(event.ranges){copy.push(instantiateSel?Selection.prototype.deepCopy.call(event):event);continue}
var changes=event.changes,newChanges=[];copy.push({changes:newChanges});for(var j=0;j<changes.length;++j){var change=changes[j],m;newChanges.push({from:change.from,to:change.to,text:change.text});if(newGroup)for(var prop in change)if(m=prop.match(/^spans_(\d+)$/)){if(indexOf(newGroup,Number(m[1]))>-1){lst(newChanges)[prop]=change[prop];delete change[prop]}}}}
return copy}
function rebaseHistSelSingle(pos,from,to,diff){if(to<pos.line){pos.line+=diff}else if(from<pos.line){pos.line=from;pos.ch=0}}
function rebaseHistArray(array,from,to,diff){for(var i=0;i<array.length;++i){var sub=array[i],ok=!0;if(sub.ranges){if(!sub.copied){sub=array[i]=sub.deepCopy();sub.copied=!0}
for(var j=0;j<sub.ranges.length;j++){rebaseHistSelSingle(sub.ranges[j].anchor,from,to,diff);rebaseHistSelSingle(sub.ranges[j].head,from,to,diff)}
continue}
for(var j=0;j<sub.changes.length;++j){var cur=sub.changes[j];if(to<cur.from.line){cur.from=Pos(cur.from.line+diff,cur.from.ch);cur.to=Pos(cur.to.line+diff,cur.to.ch)}else if(from<=cur.to.line){ok=!1;break}}
if(!ok){array.splice(0,i+1);i=0}}}
function rebaseHist(hist,change){var from=change.from.line,to=change.to.line,diff=change.text.length-(to-from)-1;rebaseHistArray(hist.done,from,to,diff);rebaseHistArray(hist.undone,from,to,diff)}
var e_preventDefault=CodeMirror.e_preventDefault=function(e){if(e.preventDefault)e.preventDefault();else e.returnValue=!1};var e_stopPropagation=CodeMirror.e_stopPropagation=function(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=!0};function e_defaultPrevented(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}
var e_stop=CodeMirror.e_stop=function(e){e_preventDefault(e);e_stopPropagation(e)};function e_target(e){return e.target||e.srcElement}
function e_button(e){var b=e.which;if(b==null){if(e.button&1)b=1;else if(e.button&2)b=3;else if(e.button&4)b=2}
if(mac&&e.ctrlKey&&b==1)b=3;return b}
var on=CodeMirror.on=function(emitter,type,f){if(emitter.addEventListener)
emitter.addEventListener(type,f,!1);else if(emitter.attachEvent)
emitter.attachEvent("on"+type,f);else{var map=emitter._handlers||(emitter._handlers={});var arr=map[type]||(map[type]=[]);arr.push(f)}};var noHandlers=[]
function getHandlers(emitter,type,copy){var arr=emitter._handlers&&emitter._handlers[type]
if(copy)return arr&&arr.length>0?arr.slice():noHandlers
else return arr||noHandlers}
var off=CodeMirror.off=function(emitter,type,f){if(emitter.removeEventListener)
emitter.removeEventListener(type,f,!1);else if(emitter.detachEvent)
emitter.detachEvent("on"+type,f);else{var handlers=getHandlers(emitter,type,!1)
for(var i=0;i<handlers.length;++i)
if(handlers[i]==f){handlers.splice(i,1);break}}};var signal=CodeMirror.signal=function(emitter,type){var handlers=getHandlers(emitter,type,!0)
if(!handlers.length)return;var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<handlers.length;++i)handlers[i].apply(null,args);};var orphanDelayedCallbacks=null;function signalLater(emitter,type){var arr=getHandlers(emitter,type,!1)
if(!arr.length)return;var args=Array.prototype.slice.call(arguments,2),list;if(operationGroup){list=operationGroup.delayedCallbacks}else if(orphanDelayedCallbacks){list=orphanDelayedCallbacks}else{list=orphanDelayedCallbacks=[];setTimeout(fireOrphanDelayed,0)}
function bnd(f){return function(){f.apply(null,args)}};for(var i=0;i<arr.length;++i)
list.push(bnd(arr[i]));}
function fireOrphanDelayed(){var delayed=orphanDelayedCallbacks;orphanDelayedCallbacks=null;for(var i=0;i<delayed.length;++i)delayed[i]();}
function signalDOMEvent(cm,e,override){if(typeof e=="string")
e={type:e,preventDefault:function(){this.defaultPrevented=!0}};signal(cm,override||e.type,cm,e);return e_defaultPrevented(e)||e.codemirrorIgnore}
function signalCursorActivity(cm){var arr=cm._handlers&&cm._handlers.cursorActivity;if(!arr)return;var set=cm.curOp.cursorActivityHandlers||(cm.curOp.cursorActivityHandlers=[]);for(var i=0;i<arr.length;++i)if(indexOf(set,arr[i])==-1)
set.push(arr[i]);}
function hasHandler(emitter,type){return getHandlers(emitter,type).length>0}
function eventMixin(ctor){ctor.prototype.on=function(type,f){on(this,type,f)};ctor.prototype.off=function(type,f){off(this,type,f)}}
var scrollerGap=30;var Pass=CodeMirror.Pass={toString:function(){return"CodeMirror.Pass"}};var sel_dontScroll={scroll:!1},sel_mouse={origin:"*mouse"},sel_move={origin:"+move"};function Delayed(){this.id=null}
Delayed.prototype.set=function(ms,f){clearTimeout(this.id);this.id=setTimeout(f,ms)};var countColumn=CodeMirror.countColumn=function(string,end,tabSize,startIndex,startValue){if(end==null){end=string.search(/[^\s\u00a0]/);if(end==-1)end=string.length}
for(var i=startIndex||0,n=startValue||0;;){var nextTab=string.indexOf("\t",i);if(nextTab<0||nextTab>=end)
return n+(end-i);n+=nextTab-i;n+=tabSize-(n%tabSize);i=nextTab+1}};var findColumn=CodeMirror.findColumn=function(string,goal,tabSize){for(var pos=0,col=0;;){var nextTab=string.indexOf("\t",pos);if(nextTab==-1)nextTab=string.length;var skipped=nextTab-pos;if(nextTab==string.length||col+skipped>=goal)
return pos+Math.min(skipped,goal-col);col+=nextTab-pos;col+=tabSize-(col%tabSize);pos=nextTab+1;if(col>=goal)return pos}}
var spaceStrs=[""];function spaceStr(n){while(spaceStrs.length<=n)
spaceStrs.push(lst(spaceStrs)+" ");return spaceStrs[n]}
function lst(arr){return arr[arr.length-1]}
var selectInput=function(node){node.select()};if(ios)
selectInput=function(node){node.selectionStart=0;node.selectionEnd=node.value.length};else if(ie)
selectInput=function(node){try{node.select()}catch(_e){}};function indexOf(array,elt){for(var i=0;i<array.length;++i)
if(array[i]==elt)return i;return-1}
function map(array,f){var out=[];for(var i=0;i<array.length;i++)out[i]=f(array[i],i);return out}
function insertSorted(array,value,score){var pos=0,priority=score(value)
while(pos<array.length&&score(array[pos])<=priority)pos++
array.splice(pos,0,value)}
function nothing(){}
function createObj(base,props){var inst;if(Object.create){inst=Object.create(base)}else{nothing.prototype=base;inst=new nothing()}
if(props)copyObj(props,inst);return inst};function copyObj(obj,target,overwrite){if(!target)target={};for(var prop in obj)
if(obj.hasOwnProperty(prop)&&(overwrite!==!1||!target.hasOwnProperty(prop)))
target[prop]=obj[prop];return target}
function bind(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}}
var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var isWordCharBasic=CodeMirror.isWordChar=function(ch){return/\w/.test(ch)||ch>"\x80"&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch))};function isWordChar(ch,helper){if(!helper)return isWordCharBasic(ch);if(helper.source.indexOf("\\w")>-1&&isWordCharBasic(ch))return!0;return helper.test(ch)}
function isEmpty(obj){for(var n in obj)if(obj.hasOwnProperty(n)&&obj[n])return!1;return!0}
var extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function isExtendingChar(ch){return ch.charCodeAt(0)>=768&&extendingChars.test(ch)}
function elt(tag,content,className,style){var e=document.createElement(tag);if(className)e.className=className;if(style)e.style.cssText=style;if(typeof content=="string")e.appendChild(document.createTextNode(content));else if(content)for(var i=0;i<content.length;++i)e.appendChild(content[i]);return e}
var range;if(document.createRange)range=function(node,start,end,endNode){var r=document.createRange();r.setEnd(endNode||node,end);r.setStart(node,start);return r};else range=function(node,start,end){var r=document.body.createTextRange();try{r.moveToElementText(node.parentNode)}catch(e){return r}
r.collapse(!0);r.moveEnd("character",end);r.moveStart("character",start);return r};function removeChildren(e){for(var count=e.childNodes.length;count>0;--count)
e.removeChild(e.firstChild);return e}
function removeChildrenAndAdd(parent,e){return removeChildren(parent).appendChild(e)}
var contains=CodeMirror.contains=function(parent,child){if(child.nodeType==3)
child=child.parentNode;if(parent.contains)
return parent.contains(child);do{if(child.nodeType==11)child=child.host;if(child==parent)return!0}while(child=child.parentNode);};function activeElt(){var activeElement=document.activeElement;while(activeElement&&activeElement.root&&activeElement.root.activeElement)
activeElement=activeElement.root.activeElement;return activeElement}
if(ie&&ie_version<11)activeElt=function(){try{return document.activeElement}catch(e){return document.body}};function classTest(cls){return new RegExp("(^|\\s)"+cls+"(?:$|\\s)\\s*")}
var rmClass=CodeMirror.rmClass=function(node,cls){var current=node.className;var match=classTest(cls).exec(current);if(match){var after=current.slice(match.index+match[0].length);node.className=current.slice(0,match.index)+(after?match[1]+after:"")}};var addClass=CodeMirror.addClass=function(node,cls){var current=node.className;if(!classTest(cls).test(current))node.className+=(current?" ":"")+cls};function joinClasses(a,b){var as=a.split(" ");for(var i=0;i<as.length;i++)
if(as[i]&&!classTest(as[i]).test(b))b+=" "+as[i];return b}
function forEachCodeMirror(f){if(!document.body.getElementsByClassName)return;var byClass=document.body.getElementsByClassName("CodeMirror");for(var i=0;i<byClass.length;i++){var cm=byClass[i].CodeMirror;if(cm)f(cm)}}
var globalsRegistered=!1;function ensureGlobalHandlers(){if(globalsRegistered)return;registerGlobalHandlers();globalsRegistered=!0}
function registerGlobalHandlers(){var resizeTimer;on(window,"resize",function(){if(resizeTimer==null)resizeTimer=setTimeout(function(){resizeTimer=null;forEachCodeMirror(onResize)},100)});on(window,"blur",function(){forEachCodeMirror(onBlur)})}
var dragAndDrop=function(){if(ie&&ie_version<9)return!1;var div=elt('div');return"draggable" in div||"dragDrop" in div}();var zwspSupported;function zeroWidthElement(measure){if(zwspSupported==null){var test=elt("span","\u200b");removeChildrenAndAdd(measure,elt("span",[test,document.createTextNode("x")]));if(measure.firstChild.offsetHeight!=0)
zwspSupported=test.offsetWidth<=1&&test.offsetHeight>2&&!(ie&&ie_version<8)}
var node=zwspSupported?elt("span","\u200b"):elt("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");node.setAttribute("cm-text","");return node}
var badBidiRects;function hasBadBidiRects(measure){if(badBidiRects!=null)return badBidiRects;var txt=removeChildrenAndAdd(measure,document.createTextNode("A\u062eA"));var r0=range(txt,0,1).getBoundingClientRect();var r1=range(txt,1,2).getBoundingClientRect();removeChildren(measure);if(!r0||r0.left==r0.right)return!1;return badBidiRects=(r1.right-r0.right<3)}
var splitLinesAuto=CodeMirror.splitLines="\n\nb".split(/\n/).length!=3?function(string){var pos=0,result=[],l=string.length;while(pos<=l){var nl=string.indexOf("\n",pos);if(nl==-1)nl=string.length;var line=string.slice(pos,string.charAt(nl-1)=="\r"?nl-1:nl);var rt=line.indexOf("\r");if(rt!=-1){result.push(line.slice(0,rt));pos+=rt+1}else{result.push(line);pos=nl+1}}
return result}:function(string){return string.split(/\r\n?|\n/)};var hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd}catch(e){return!1}}:function(te){try{var range=te.ownerDocument.selection.createRange()}catch(e){}
if(!range||range.parentElement()!=te)return!1;return range.compareEndPoints("StartToEnd",range)!=0};var hasCopyEvent=(function(){var e=elt("div");if("oncopy" in e)return!0;e.setAttribute("oncopy","return;");return typeof e.oncopy=="function"})();var badZoomedRects=null;function hasBadZoomedRects(measure){if(badZoomedRects!=null)return badZoomedRects;var node=removeChildrenAndAdd(measure,elt("span","x"));var normal=node.getBoundingClientRect();var fromRange=range(node,0,1).getBoundingClientRect();return badZoomedRects=Math.abs(normal.left-fromRange.left)>1}
var keyNames=CodeMirror.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};(function(){for(var i=0;i<10;i++)keyNames[i+48]=keyNames[i+96]=String(i);for(var i=65;i<=90;i++)keyNames[i]=String.fromCharCode(i);for(var i=1;i<=12;i++)keyNames[i+111]=keyNames[i+63235]="F"+i})();function iterateBidiSections(order,from,to,f){if(!order)return f(from,to,"ltr");var found=!1;for(var i=0;i<order.length;++i){var part=order[i];if(part.from<to&&part.to>from||from==to&&part.to==from){f(Math.max(part.from,from),Math.min(part.to,to),part.level==1?"rtl":"ltr");found=!0}}
if(!found)f(from,to,"ltr")}
function bidiLeft(part){return part.level%2?part.to:part.from}
function bidiRight(part){return part.level%2?part.from:part.to}
function lineLeft(line){var order=getOrder(line);return order?bidiLeft(order[0]):0}
function lineRight(line){var order=getOrder(line);if(!order)return line.text.length;return bidiRight(lst(order))}
function lineStart(cm,lineN){var line=getLine(cm.doc,lineN);var visual=visualLine(line);if(visual!=line)lineN=lineNo(visual);var order=getOrder(visual);var ch=!order?0:order[0].level%2?lineRight(visual):lineLeft(visual);return Pos(lineN,ch)}
function lineEnd(cm,lineN){var merged,line=getLine(cm.doc,lineN);while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,!0).line;lineN=null}
var order=getOrder(line);var ch=!order?line.text.length:order[0].level%2?lineLeft(line):lineRight(line);return Pos(lineN==null?lineNo(line):lineN,ch)}
function lineStartSmart(cm,pos){var start=lineStart(cm,pos.line);var line=getLine(cm.doc,start.line);var order=getOrder(line);if(!order||order[0].level==0){var firstNonWS=Math.max(0,line.text.search(/\S/));var inWS=pos.line==start.line&&pos.ch<=firstNonWS&&pos.ch;return Pos(start.line,inWS?0:firstNonWS)}
return start}
function compareBidiLevel(order,a,b){var linedir=order[0].level;if(a==linedir)return!0;if(b==linedir)return!1;return a<b}
var bidiOther;function getBidiPartAt(order,pos){bidiOther=null;for(var i=0,found;i<order.length;++i){var cur=order[i];if(cur.from<pos&&cur.to>pos)return i;if((cur.from==pos||cur.to==pos)){if(found==null){found=i}else if(compareBidiLevel(order,cur.level,order[found].level)){if(cur.from!=cur.to)bidiOther=found;return i}else{if(cur.from!=cur.to)bidiOther=i;return found}}}
return found}
function moveInLine(line,pos,dir,byUnit){if(!byUnit)return pos+dir;do pos+=dir;while(pos>0&&isExtendingChar(line.text.charAt(pos)));return pos}
function moveVisually(line,start,dir,byUnit){var bidi=getOrder(line);if(!bidi)return moveLogically(line,start,dir,byUnit);var pos=getBidiPartAt(bidi,start),part=bidi[pos];var target=moveInLine(line,start,part.level%2?-dir:dir,byUnit);for(;;){if(target>part.from&&target<part.to)return target;if(target==part.from||target==part.to){if(getBidiPartAt(bidi,target)==pos)return target;part=bidi[pos+=dir];return(dir>0)==part.level%2?part.to:part.from}else{part=bidi[pos+=dir];if(!part)return null;if((dir>0)==part.level%2)
target=moveInLine(line,part.to,-1,byUnit);else target=moveInLine(line,part.from,1,byUnit)}}}
function moveLogically(line,start,dir,byUnit){var target=start+dir;if(byUnit)while(target>0&&isExtendingChar(line.text.charAt(target)))target+=dir;return target<0||target>line.text.length?null:target}
var bidiOrdering=(function(){var lowTypes="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var arabicTypes="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function charType(code){if(code<=0xf7)return lowTypes.charAt(code);else if(0x590<=code&&code<=0x5f4)return"R";else if(0x600<=code&&code<=0x6ed)return arabicTypes.charAt(code-0x600);else if(0x6ee<=code&&code<=0x8ac)return"r";else if(0x2000<=code&&code<=0x200b)return"w";else if(code==0x200c)return"b";else return"L"}
var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var isNeutral=/[stwN]/,isStrong=/[LRr]/,countsAsLeft=/[Lb1n]/,countsAsNum=/[1n]/;var outerType="L";function BidiSpan(level,from,to){this.level=level;this.from=from;this.to=to}
return function(str){if(!bidiRE.test(str))return!1;var len=str.length,types=[];for(var i=0,type;i<len;++i)
types.push(type=charType(str.charCodeAt(i)));for(var i=0,prev=outerType;i<len;++i){var type=types[i];if(type=="m")types[i]=prev;else prev=type}
for(var i=0,cur=outerType;i<len;++i){var type=types[i];if(type=="1"&&cur=="r")types[i]="n";else if(isStrong.test(type)){cur=type;if(type=="r")types[i]="R"}}
for(var i=1,prev=types[0];i<len-1;++i){var type=types[i];if(type=="+"&&prev=="1"&&types[i+1]=="1")types[i]="1";else if(type==","&&prev==types[i+1]&&(prev=="1"||prev=="n"))types[i]=prev;prev=type}
for(var i=0;i<len;++i){var type=types[i];if(type==",")types[i]="N";else if(type=="%"){for(var end=i+1;end<len&&types[end]=="%";++end){}
var replace=(i&&types[i-1]=="!")||(end<len&&types[end]=="1")?"1":"N";for(var j=i;j<end;++j)types[j]=replace;i=end-1}}
for(var i=0,cur=outerType;i<len;++i){var type=types[i];if(cur=="L"&&type=="1")types[i]="L";else if(isStrong.test(type))cur=type}
for(var i=0;i<len;++i){if(isNeutral.test(types[i])){for(var end=i+1;end<len&&isNeutral.test(types[end]);++end){}
var before=(i?types[i-1]:outerType)=="L";var after=(end<len?types[end]:outerType)=="L";var replace=before||after?"L":"R";for(var j=i;j<end;++j)types[j]=replace;i=end-1}}
var order=[],m;for(var i=0;i<len;){if(countsAsLeft.test(types[i])){var start=i;for(++i;i<len&&countsAsLeft.test(types[i]);++i){}
order.push(new BidiSpan(0,start,i))}else{var pos=i,at=order.length;for(++i;i<len&&types[i]!="L";++i){}
for(var j=pos;j<i;){if(countsAsNum.test(types[j])){if(pos<j)order.splice(at,0,new BidiSpan(1,pos,j));var nstart=j;for(++j;j<i&&countsAsNum.test(types[j]);++j){}
order.splice(at,0,new BidiSpan(2,nstart,j));pos=j}else ++j}
if(pos<i)order.splice(at,0,new BidiSpan(1,pos,i))}}
if(order[0].level==1&&(m=str.match(/^\s+/))){order[0].from=m[0].length;order.unshift(new BidiSpan(0,0,m[0].length))}
if(lst(order).level==1&&(m=str.match(/\s+$/))){lst(order).to-=m[0].length;order.push(new BidiSpan(0,len-m[0].length,len))}
if(order[0].level==2)
order.unshift(new BidiSpan(1,order[0].to,order[0].to));if(order[0].level!=lst(order).level)
order.push(new BidiSpan(order[0].level,len,len));return order}})();CodeMirror.version="5.19.0";return CodeMirror});
/* rank:50standard - minify:ok. temp/public/codemirror_modes.js */
window.codeMirrorTheme="off";test={mode:function(){},indentation:function(){}}
CodeMirror.defineMode('tiki',function(config,parserConfig){function inBlock(style,terminator,returnTokenizer){return function(stream,state){while(!stream.eol()){if(stream.match(terminator)){state.tokenize=inText;break}
stream.next()}
if(returnTokenizer)state.tokenize=returnTokenizer;return style}}
function inLine(style,terminator){return function(stream,state){while(!stream.eol()){stream.next()}
state.tokenize=inText;return style}}
function inText(stream,state){function chain(parser){state.tokenize=parser;return parser(stream,state)}
var sol=stream.sol();var ch=stream.next();switch(ch){case "{":type=stream.eat("/")?"closeTag":"openTag";stream.eatSpace();var tagName="";var c;while((c=stream.eat(/[^\s\u00a0="'\/?(}]/)))tagName+=c;state.tokenize=inPlugin;return"tag";break;case "_":if(stream.eat("_")){return chain(inBlock("strong","__",inText))}
break;case "'":if(stream.eat("'")){return chain(inBlock("em","''",inText))}
break;case "(":if(stream.eat("(")){return chain(inBlock("variable-2","))",inText))}
break;case "[":return chain(inBlock("variable-3","]",inText));break;case "|":if(stream.eat("|")){return chain(inBlock("comment","||"))}
break;case "-":if(stream.eat("=")){return chain(inBlock("header string","=-",inText))}else if(stream.eat("-")){return chain(inBlock("error tw-deleted","--",inText))}
break;case "=":if(stream.match("==")){return chain(inBlock("tw-underline","===",inText))}
break;case ":":if(stream.eat(":")){return chain(inBlock("comment","::"))}
break;case "^":return chain(inBlock("tw-box","^"));break;case "~":if(stream.match("np~")){return chain(inBlock("meta","~/np~"))}
break}
if(sol){switch(ch){case "!":if(stream.match('!!!!!')){return chain(inLine("header string"))}else if(stream.match('!!!!')){return chain(inLine("header string"))}else if(stream.match('!!!')){return chain(inLine("header string"))}else if(stream.match('!!')){return chain(inLine("header string"))}else{return chain(inLine("header string"))}
break;case "*":case "#":case "+":return chain(inLine("tw-listitem bracket"));break}}
return null}
var indentUnit=config.indentUnit;var pluginName,type;function inPlugin(stream,state){var ch=stream.next();var peek=stream.peek();if(ch=="}"){state.tokenize=inText;return"tag"}else if(ch=="("||ch==")"){return"bracket"}else if(ch=="="){type="equals";if(peek==">"){ch=stream.next();peek=stream.peek()}
if(!/['"]/.test(peek)){state.tokenize=inAttributeNoQuote()}
return"operator"}else if(/['"]/.test(ch)){state.tokenize=inAttribute(ch);return state.tokenize(stream,state)}else{stream.eatWhile(/[^\s\u00a0="'\/?]/);return"keyword"}}
function inAttribute(quote){return function(stream,state){while(!stream.eol()){if(stream.next()==quote){state.tokenize=inPlugin;break}}
return"string"}}
function inAttributeNoQuote(){return function(stream,state){while(!stream.eol()){var ch=stream.next();var peek=stream.peek();if(ch==" "||ch==","||/[ )}]/.test(peek)){state.tokenize=inPlugin;break}}
return"string"}}
var curState,setStyle;function pass(){for(var i=arguments.length-1;i>=0;i--)curState.cc.push(arguments[i]);}
function cont(){pass.apply(null,arguments);return!0}
function pushContext(pluginName,startOfLine){var noIndent=curState.context&&curState.context.noIndent;curState.context={prev:curState.context,pluginName:pluginName,indent:curState.indented,startOfLine:startOfLine,noIndent:noIndent}}
function popContext(){if(curState.context)curState.context=curState.context.prev}
function element(type){if(type=="openPlugin"){curState.pluginName=pluginName;return cont(attributes,endplugin(curState.startOfLine))}else if(type=="closePlugin"){var err=!1;if(curState.context){err=curState.context.pluginName!=pluginName;popContext()}else{err=!0}
if(err)setStyle="error";return cont(endcloseplugin(err))}else if(type=="string"){if(!curState.context||curState.context.name!="!cdata")pushContext("!cdata");if(curState.tokenize==inText)popContext();return cont()}else return cont()}
function endplugin(startOfLine){return function(type){if(type=="selfclosePlugin"||type=="endPlugin")
return cont();if(type=="endPlugin"){pushContext(curState.pluginName,startOfLine);return cont()}
return cont()}}
function endcloseplugin(err){return function(type){if(err)setStyle="error";if(type=="endPlugin")return cont();return pass()}}
function attributes(type){if(type=="keyword"){setStyle="attribute";return cont(attributes)}
if(type=="equals")return cont(attvalue,attributes);return pass()}
function attvalue(type){if(type=="keyword"){setStyle="string";return cont()}
if(type=="string")return cont(attvaluemaybe);return pass()}
function attvaluemaybe(type){if(type=="string")return cont(attvaluemaybe);else return pass()}
return{startState:function(){return{tokenize:inText,cc:[],indented:0,startOfLine:!0,pluginName:null,context:null}},token:function(stream,state){if(stream.sol()){state.startOfLine=!0;state.indented=stream.indentation()}
if(stream.eatSpace())return null;setStyle=type=pluginName=null;var style=state.tokenize(stream,state);if((style||type)&&style!="comment"){curState=state;while(!0){var comb=state.cc.pop()||element;if(comb(type||style))break}}
state.startOfLine=!1;return setStyle||style},indent:function(state,textAfter){var context=state.context;if(context&&context.noIndent)return 0;if(context&&/^{\//.test(textAfter))
context=context.prev;while(context&&!context.startOfLine)
context=context.prev;if(context)return context.indent+indentUnit;else return 0},compareStates:function(a,b){if(a.indented!=b.indented||a.pluginName!=b.pluginName)return!1;for(var ca=a.context,cb=b.context;;ca=ca.prev,cb=cb.prev){if(!ca||!cb)return ca==cb;if(ca.pluginName!=cb.pluginName)return!1}},electricChars:"/"}});CodeMirror.defineMIME("text/tiki","tiki");try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("apl",function(){var builtInOps={".":"innerProduct","\\":"scan","/":"reduce","⌿":"reduce1Axis","⍀":"scan1Axis","¨":"each","⍣":"power"};var builtInFuncs={"+":["conjugate","add"],"−":["negate","subtract"],"×":["signOf","multiply"],"÷":["reciprocal","divide"],"⌈":["ceiling","greaterOf"],"⌊":["floor","lesserOf"],"∣":["absolute","residue"],"⍳":["indexGenerate","indexOf"],"?":["roll","deal"],"⋆":["exponentiate","toThePowerOf"],"⍟":["naturalLog","logToTheBase"],"○":["piTimes","circularFuncs"],"!":["factorial","binomial"],"⌹":["matrixInverse","matrixDivide"],"<":[null,"lessThan"],"≤":[null,"lessThanOrEqual"],"=":[null,"equals"],">":[null,"greaterThan"],"≥":[null,"greaterThanOrEqual"],"≠":[null,"notEqual"],"≡":["depth","match"],"≢":[null,"notMatch"],"∈":["enlist","membership"],"⍷":[null,"find"],"∪":["unique","union"],"∩":[null,"intersection"],"∼":["not","without"],"∨":[null,"or"],"∧":[null,"and"],"⍱":[null,"nor"],"⍲":[null,"nand"],"⍴":["shapeOf","reshape"],",":["ravel","catenate"],"⍪":[null,"firstAxisCatenate"],"⌽":["reverse","rotate"],"⊖":["axis1Reverse","axis1Rotate"],"⍉":["transpose",null],"↑":["first","take"],"↓":[null,"drop"],"⊂":["enclose","partitionWithAxis"],"⊃":["diclose","pick"],"⌷":[null,"index"],"⍋":["gradeUp",null],"⍒":["gradeDown",null],"⊤":["encode",null],"⊥":["decode",null],"⍕":["format","formatByExample"],"⍎":["execute",null],"⊣":["stop","left"],"⊢":["pass","right"]};var isOperator=/[\.\/⌿⍀¨⍣]/;var isNiladic=/⍬/;var isFunction=/[\+−×÷⌈⌊∣⍳\?⋆⍟○!⌹<≤=>≥≠≡≢∈⍷∪∩∼∨∧⍱⍲⍴,⍪⌽⊖⍉↑↓⊂⊃⌷⍋⍒⊤⊥⍕⍎⊣⊢]/;var isArrow=/←/;var isComment=/[⍝#].*$/;var stringEater=function(type){var prev;prev=!1;return function(c){prev=c;if(c===type){return prev==="\\"}
return!0}};return{startState:function(){return{prev:!1,func:!1,op:!1,string:!1,escape:!1}},token:function(stream,state){var ch,funcName;if(stream.eatSpace()){return null}
ch=stream.next();if(ch==='"'||ch==="'"){stream.eatWhile(stringEater(ch));stream.next();state.prev=!0;return"string"}
if(/[\[{\(]/.test(ch)){state.prev=!1;return null}
if(/[\]}\)]/.test(ch)){state.prev=!0;return null}
if(isNiladic.test(ch)){state.prev=!1;return"niladic"}
if(/[¯\d]/.test(ch)){if(state.func){state.func=!1;state.prev=!1}else{state.prev=!0}
stream.eatWhile(/[\w\.]/);return"number"}
if(isOperator.test(ch)){return"operator apl-"+builtInOps[ch]}
if(isArrow.test(ch)){return"apl-arrow"}
if(isFunction.test(ch)){funcName="apl-";if(builtInFuncs[ch]!=null){if(state.prev){funcName+=builtInFuncs[ch][1]}else{funcName+=builtInFuncs[ch][0]}}
state.func=!0;state.prev=!1;return"function "+funcName}
if(isComment.test(ch)){stream.skipToEnd();return"comment"}
if(ch==="∘"&&stream.peek()==="."){stream.next();return"function jot-dot"}
stream.eatWhile(/[\w\$_]/);state.prev=!0;return"keyword"}}});CodeMirror.defineMIME("text/apl","apl")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function errorIfNotEmpty(stream){var nonWS=stream.match(/^\s*\S/);stream.skipToEnd();return nonWS?"error":null}
CodeMirror.defineMode("asciiarmor",function(){return{token:function(stream,state){var m;if(state.state=="top"){if(stream.sol()&&(m=stream.match(/^-----BEGIN (.*)?-----\s*$/))){state.state="headers";state.type=m[1];return"tag"}
return errorIfNotEmpty(stream)}else if(state.state=="headers"){if(stream.sol()&&stream.match(/^\w+:/)){state.state="header";return"atom"}else{var result=errorIfNotEmpty(stream);if(result)state.state="body";return result}}else if(state.state=="header"){stream.skipToEnd();state.state="headers";return"string"}else if(state.state=="body"){if(stream.sol()&&(m=stream.match(/^-----END (.*)?-----\s*$/))){if(m[1]!=state.type)return"error";state.state="end";return"tag"}else{if(stream.eatWhile(/[A-Za-z0-9+\/=]/)){return null}else{stream.next();return"error"}}}else if(state.state=="end"){return errorIfNotEmpty(stream)}},blankLine:function(state){if(state.state=="headers")state.state="body"},startState:function(){return{state:"top",type:null}}}});CodeMirror.defineMIME("application/pgp","asciiarmor");CodeMirror.defineMIME("application/pgp-keys","asciiarmor");CodeMirror.defineMIME("application/pgp-signature","asciiarmor")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("asn.1",function(config,parserConfig){var indentUnit=config.indentUnit,keywords=parserConfig.keywords||{},cmipVerbs=parserConfig.cmipVerbs||{},compareTypes=parserConfig.compareTypes||{},status=parserConfig.status||{},tags=parserConfig.tags||{},storage=parserConfig.storage||{},modifier=parserConfig.modifier||{},accessTypes=parserConfig.accessTypes||{},multiLineStrings=parserConfig.multiLineStrings,indentStatements=parserConfig.indentStatements!==!1;var isOperatorChar=/[\|\^]/;var curPunc;function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(/[\[\]\(\){}:=,;]/.test(ch)){curPunc=ch;return"punctuation"}
if(ch=="-"){if(stream.eat("-")){stream.skipToEnd();return"comment"}}
if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}
if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}
stream.eatWhile(/[\w\-]/);var cur=stream.current();if(keywords.propertyIsEnumerable(cur))return"keyword";if(cmipVerbs.propertyIsEnumerable(cur))return"variable cmipVerbs";if(compareTypes.propertyIsEnumerable(cur))return"atom compareTypes";if(status.propertyIsEnumerable(cur))return"comment status";if(tags.propertyIsEnumerable(cur))return"variable-3 tags";if(storage.propertyIsEnumerable(cur))return"builtin storage";if(modifier.propertyIsEnumerable(cur))return"string-2 modifier";if(accessTypes.propertyIsEnumerable(cur))return"atom accessTypes";return"variable"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){var afterNext=stream.peek();if(afterNext){afterNext=afterNext.toLowerCase();if(afterNext=="b"||afterNext=="h"||afterNext=="o")
stream.next()}
end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!(escaped||multiLineStrings))
state.tokenize=null;return"string"}}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}
function pushContext(state,col,type){var indent=state.indented;if(state.context&&state.context.type=="statement")
indent=state.context.indented;return state.context=new Context(indent,col,type,null,state.context)}
function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}")
state.indented=state.context.indented;return state.context=state.context.prev}
return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",!1),indented:0,startOfLine:!0}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0}
if(stream.eatSpace())return null;curPunc=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment")return style;if(ctx.align==null)ctx.align=!0;if((curPunc==";"||curPunc==":"||curPunc==",")&&ctx.type=="statement"){popContext(state)}else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state);}else if(curPunc==ctx.type)popContext(state);else if(indentStatements&&(((ctx.type=="}"||ctx.type=="top")&&curPunc!=';')||(ctx.type=="statement"&&curPunc=="newstatement")))
pushContext(state,stream.column(),"statement");state.startOfLine=!1;return style},electricChars:"{}",lineComment:"--",fold:"brace"}});function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
CodeMirror.defineMIME("text/x-ttcn-asn",{name:"asn.1",keywords:words("DEFINITIONS OBJECTS IF DERIVED INFORMATION ACTION"+" REPLY ANY NAMED CHARACTERIZED BEHAVIOUR REGISTERED"+" WITH AS IDENTIFIED CONSTRAINED BY PRESENT BEGIN"+" IMPORTS FROM UNITS SYNTAX MIN-ACCESS MAX-ACCESS"+" MINACCESS MAXACCESS REVISION STATUS DESCRIPTION"+" SEQUENCE SET COMPONENTS OF CHOICE DistinguishedName"+" ENUMERATED SIZE MODULE END INDEX AUGMENTS EXTENSIBILITY"+" IMPLIED EXPORTS"),cmipVerbs:words("ACTIONS ADD GET NOTIFICATIONS REPLACE REMOVE"),compareTypes:words("OPTIONAL DEFAULT MANAGED MODULE-TYPE MODULE_IDENTITY"+" MODULE-COMPLIANCE OBJECT-TYPE OBJECT-IDENTITY"+" OBJECT-COMPLIANCE MODE CONFIRMED CONDITIONAL"+" SUBORDINATE SUPERIOR CLASS TRUE FALSE NULL"+" TEXTUAL-CONVENTION"),status:words("current deprecated mandatory obsolete"),tags:words("APPLICATION AUTOMATIC EXPLICIT IMPLICIT PRIVATE TAGS"+" UNIVERSAL"),storage:words("BOOLEAN INTEGER OBJECT IDENTIFIER BIT OCTET STRING"+" UTCTime InterfaceIndex IANAifType CMIP-Attribute"+" REAL PACKAGE PACKAGES IpAddress PhysAddress"+" NetworkAddress BITS BMPString TimeStamp TimeTicks"+" TruthValue RowStatus DisplayString GeneralString"+" GraphicString IA5String NumericString"+" PrintableString SnmpAdminAtring TeletexString"+" UTF8String VideotexString VisibleString StringStore"+" ISO646String T61String UniversalString Unsigned32"+" Integer32 Gauge Gauge32 Counter Counter32 Counter64"),modifier:words("ATTRIBUTE ATTRIBUTES MANDATORY-GROUP MANDATORY-GROUPS"+" GROUP GROUPS ELEMENTS EQUALITY ORDERING SUBSTRINGS"+" DEFINED"),accessTypes:words("not-accessible accessible-for-notify read-only"+" read-create read-write"),multiLineStrings:!0})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("asterisk",function(){var atoms=["exten","same","include","ignorepat","switch"],dpcmd=["#include","#exec"],apps=["addqueuemember","adsiprog","aelsub","agentlogin","agentmonitoroutgoing","agi","alarmreceiver","amd","answer","authenticate","background","backgrounddetect","bridge","busy","callcompletioncancel","callcompletionrequest","celgenuserevent","changemonitor","chanisavail","channelredirect","chanspy","clearhash","confbridge","congestion","continuewhile","controlplayback","dahdiacceptr2call","dahdibarge","dahdiras","dahdiscan","dahdisendcallreroutingfacility","dahdisendkeypadfacility","datetime","dbdel","dbdeltree","deadagi","dial","dictate","directory","disa","dumpchan","eagi","echo","endwhile","exec","execif","execiftime","exitwhile","extenspy","externalivr","festival","flash","followme","forkcdr","getcpeid","gosub","gosubif","goto","gotoif","gotoiftime","hangup","iax2provision","ices","importvar","incomplete","ivrdemo","jabberjoin","jabberleave","jabbersend","jabbersendgroup","jabberstatus","jack","log","macro","macroexclusive","macroexit","macroif","mailboxexists","meetme","meetmeadmin","meetmechanneladmin","meetmecount","milliwatt","minivmaccmess","minivmdelete","minivmgreet","minivmmwi","minivmnotify","minivmrecord","mixmonitor","monitor","morsecode","mp3player","mset","musiconhold","nbscat","nocdr","noop","odbc","odbc","odbcfinish","originate","ospauth","ospfinish","osplookup","ospnext","page","park","parkandannounce","parkedcall","pausemonitor","pausequeuemember","pickup","pickupchan","playback","playtones","privacymanager","proceeding","progress","queue","queuelog","raiseexception","read","readexten","readfile","receivefax","receivefax","receivefax","record","removequeuemember","resetcdr","retrydial","return","ringing","sayalpha","saycountedadj","saycountednoun","saycountpl","saydigits","saynumber","sayphonetic","sayunixtime","senddtmf","sendfax","sendfax","sendfax","sendimage","sendtext","sendurl","set","setamaflags","setcallerpres","setmusiconhold","sipaddheader","sipdtmfmode","sipremoveheader","skel","slastation","slatrunk","sms","softhangup","speechactivategrammar","speechbackground","speechcreate","speechdeactivategrammar","speechdestroy","speechloadgrammar","speechprocessingsound","speechstart","speechunloadgrammar","stackpop","startmusiconhold","stopmixmonitor","stopmonitor","stopmusiconhold","stopplaytones","system","testclient","testserver","transfer","tryexec","trysystem","unpausemonitor","unpausequeuemember","userevent","verbose","vmauthenticate","vmsayname","voicemail","voicemailmain","wait","waitexten","waitfornoise","waitforring","waitforsilence","waitmusiconhold","waituntil","while","zapateller"];function basicToken(stream,state){var cur='';var ch=stream.next();if(ch==";"){stream.skipToEnd();return"comment"}
if(ch=='['){stream.skipTo(']');stream.eat(']');return"header"}
if(ch=='"'){stream.skipTo('"');return"string"}
if(ch=="'"){stream.skipTo("'");return"string-2"}
if(ch=='#'){stream.eatWhile(/\w/);cur=stream.current();if(dpcmd.indexOf(cur)!==-1){stream.skipToEnd();return"strong"}}
if(ch=='$'){var ch1=stream.peek();if(ch1=='{'){stream.skipTo('}');stream.eat('}');return"variable-3"}}
stream.eatWhile(/\w/);cur=stream.current();if(atoms.indexOf(cur)!==-1){state.extenStart=!0;switch(cur){case 'same':state.extenSame=!0;break;case 'include':case 'switch':case 'ignorepat':state.extenInclude=!0;break;default:break}
return"atom"}}
return{startState:function(){return{extenStart:!1,extenSame:!1,extenInclude:!1,extenExten:!1,extenPriority:!1,extenApplication:!1}},token:function(stream,state){var cur='';if(stream.eatSpace())return null;if(state.extenStart){stream.eatWhile(/[^\s]/);cur=stream.current();if(/^=>?$/.test(cur)){state.extenExten=!0;state.extenStart=!1;return"strong"}else{state.extenStart=!1;stream.skipToEnd();return"error"}}else if(state.extenExten){state.extenExten=!1;state.extenPriority=!0;stream.eatWhile(/[^,]/);if(state.extenInclude){stream.skipToEnd();state.extenPriority=!1;state.extenInclude=!1}
if(state.extenSame){state.extenPriority=!1;state.extenSame=!1;state.extenApplication=!0}
return"tag"}else if(state.extenPriority){state.extenPriority=!1;state.extenApplication=!0;stream.next();if(state.extenSame)return null;stream.eatWhile(/[^,]/);return"number"}else if(state.extenApplication){stream.eatWhile(/,/);cur=stream.current();if(cur===',')return null;stream.eatWhile(/\w/);cur=stream.current().toLowerCase();state.extenApplication=!1;if(apps.indexOf(cur)!==-1){return"def strong"}}else{return basicToken(stream,state)}
return null}}});CodeMirror.defineMIME("text/x-asterisk","asterisk")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"))
else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod)
else mod(CodeMirror)})(function(CodeMirror){"use strict"
var reserve="><+-.,[]".split("");CodeMirror.defineMode("brainfuck",function(){return{startState:function(){return{commentLine:!1,left:0,right:0,commentLoop:!1}},token:function(stream,state){if(stream.eatSpace())return null
if(stream.sol()){state.commentLine=!1}
var ch=stream.next().toString();if(reserve.indexOf(ch)!==-1){if(state.commentLine===!0){if(stream.eol()){state.commentLine=!1}
return"comment"}
if(ch==="]"||ch==="["){if(ch==="["){state.left++}else{state.right++}
return"bracket"}else if(ch==="+"||ch==="-"){return"keyword"}else if(ch==="<"||ch===">"){return"atom"}else if(ch==="."||ch===","){return"def"}}else{state.commentLine=!0;if(stream.eol()){state.commentLine=!1}
return"comment"}
if(stream.eol()){state.commentLine=!1}}}});CodeMirror.defineMIME("text/x-brainfuck","brainfuck")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function Context(indented,column,type,info,align,prev){this.indented=indented;this.column=column;this.type=type;this.info=info;this.align=align;this.prev=prev}
function pushContext(state,col,type,info){var indent=state.indented;if(state.context&&state.context.type!="statement"&&type!="statement")
indent=state.context.indented;return state.context=new Context(indent,col,type,info,null,state.context)}
function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}")
state.indented=state.context.indented;return state.context=state.context.prev}
function typeBefore(stream,state,pos){if(state.prevToken=="variable"||state.prevToken=="variable-3")return!0;if(/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(stream.string.slice(0,pos)))return!0;if(state.typeAtEndOfLine&&stream.column()==stream.indentation())return!0}
function isTopScope(context){for(;;){if(!context||context.type=="top")return!0;if(context.type=="}"&&context.prev.info!="namespace")return!1;context=context.prev}}
CodeMirror.defineMode("clike",function(config,parserConfig){var indentUnit=config.indentUnit,statementIndentUnit=parserConfig.statementIndentUnit||indentUnit,dontAlignCalls=parserConfig.dontAlignCalls,keywords=parserConfig.keywords||{},types=parserConfig.types||{},builtin=parserConfig.builtin||{},blockKeywords=parserConfig.blockKeywords||{},defKeywords=parserConfig.defKeywords||{},atoms=parserConfig.atoms||{},hooks=parserConfig.hooks||{},multiLineStrings=parserConfig.multiLineStrings,indentStatements=parserConfig.indentStatements!==!1,indentSwitch=parserConfig.indentSwitch!==!1,namespaceSeparator=parserConfig.namespaceSeparator,isPunctuationChar=parserConfig.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,numberStart=parserConfig.numberStart||/[\d\.]/,number=parserConfig.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,isOperatorChar=parserConfig.isOperatorChar||/[+\-*&%=<>!?|\/]/,endStatement=parserConfig.endStatement||/^[;:,]$/;var curPunc,isDefKeyword;function tokenBase(stream,state){var ch=stream.next();if(hooks[ch]){var result=hooks[ch](stream,state);if(result!==!1)return result}
if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(isPunctuationChar.test(ch)){curPunc=ch;return null}
if(numberStart.test(ch)){stream.backUp(1)
if(stream.match(number))return"number"
stream.next()}
if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}
if(stream.eat("/")){stream.skipToEnd();return"comment"}}
if(isOperatorChar.test(ch)){while(!stream.match(/^\/[\/*]/,!1)&&stream.eat(isOperatorChar)){}
return"operator"}
stream.eatWhile(/[\w\$_\xa1-\uffff]/);if(namespaceSeparator)while(stream.match(namespaceSeparator))
stream.eatWhile(/[\w\$_\xa1-\uffff]/);var cur=stream.current();if(contains(keywords,cur)){if(contains(blockKeywords,cur))curPunc="newstatement";if(contains(defKeywords,cur))isDefKeyword=!0;return"keyword"}
if(contains(types,cur))return"variable-3";if(contains(builtin,cur)){if(contains(blockKeywords,cur))curPunc="newstatement";return"builtin"}
if(contains(atoms,cur))return"atom";return"variable"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!(escaped||multiLineStrings))
state.tokenize=null;return"string"}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=null;break}
maybeEnd=(ch=="*")}
return"comment"}
function maybeEOL(stream,state){if(parserConfig.typeFirstDefinitions&&stream.eol()&&isTopScope(state.context))
state.typeAtEndOfLine=typeBefore(stream,state,stream.pos)}
return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0}
if(stream.eatSpace()){maybeEOL(stream,state);return null}
curPunc=isDefKeyword=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment"||style=="meta")return style;if(ctx.align==null)ctx.align=!0;if(endStatement.test(curPunc))while(state.context.type=="statement")popContext(state);else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state);}else if(curPunc==ctx.type)popContext(state);else if(indentStatements&&(((ctx.type=="}"||ctx.type=="top")&&curPunc!=";")||(ctx.type=="statement"&&curPunc=="newstatement"))){pushContext(state,stream.column(),"statement",stream.current())}
if(style=="variable"&&((state.prevToken=="def"||(parserConfig.typeFirstDefinitions&&typeBefore(stream,state,stream.start)&&isTopScope(state.context)&&stream.match(/^\s*\(/,!1)))))
style="def";if(hooks.token){var result=hooks.token(stream,state,style);if(result!==undefined)style=result}
if(style=="def"&&parserConfig.styleDefs===!1)style="variable";state.startOfLine=!1;state.prevToken=isDefKeyword?"def":style||curPunc;maybeEOL(stream,state);return style},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&state.tokenize!=null||state.typeAtEndOfLine)return CodeMirror.Pass;var ctx=state.context,firstChar=textAfter&&textAfter.charAt(0);if(ctx.type=="statement"&&firstChar=="}")ctx=ctx.prev;if(parserConfig.dontIndentStatements)
while(ctx.type=="statement"&&parserConfig.dontIndentStatements.test(ctx.info))
ctx=ctx.prev
if(hooks.indent){var hook=hooks.indent(state,ctx,textAfter);if(typeof hook=="number")return hook}
var closing=firstChar==ctx.type;var switchBlock=ctx.prev&&ctx.prev.info=="switch";if(parserConfig.allmanIndentation&&/[{(]/.test(firstChar)){while(ctx.type!="top"&&ctx.type!="}")ctx=ctx.prev
return ctx.indented}
if(ctx.type=="statement")
return ctx.indented+(firstChar=="{"?0:statementIndentUnit);if(ctx.align&&(!dontAlignCalls||ctx.type!=")"))
return ctx.column+(closing?0:1);if(ctx.type==")"&&!closing)
return ctx.indented+statementIndentUnit;return ctx.indented+(closing?0:indentUnit)+(!closing&&switchBlock&&!/^(?:case|default)\b/.test(textAfter)?indentUnit:0)},electricInput:indentSwitch?/^\s*(?:case.*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
function contains(words,word){if(typeof words==="function"){return words(word)}else{return words.propertyIsEnumerable(word)}}
var cKeywords="auto if break case register continue return default do sizeof "+"static else struct switch extern typedef union for goto while enum const volatile";var cTypes="int long char short double float unsigned signed void size_t ptrdiff_t";function cppHook(stream,state){if(!state.startOfLine)return!1
for(var ch,next=null;ch=stream.peek();){if(ch=="\\"&&stream.match(/^.$/)){next=cppHook
break}else if(ch=="/"&&stream.match(/^\/[\/\*]/,!1)){break}
stream.next()}
state.tokenize=next
return"meta"}
function pointerHook(_stream,state){if(state.prevToken=="variable-3")return"variable-3";return!1}
function cpp14Literal(stream){stream.eatWhile(/[\w\.']/);return"number"}
function cpp11StringHook(stream,state){stream.backUp(1);if(stream.match(/(R|u8R|uR|UR|LR)/)){var match=stream.match(/"([^\s\\()]{0,16})\(/);if(!match){return!1}
state.cpp11RawStringDelim=match[1];state.tokenize=tokenRawString;return tokenRawString(stream,state)}
if(stream.match(/(u8|u|U|L)/)){if(stream.match(/["']/,!1)){return"string"}
return!1}
stream.next();return!1}
function cppLooksLikeConstructor(word){var lastTwo=/(\w+)::(\w+)$/.exec(word);return lastTwo&&lastTwo[1]==lastTwo[2]}
function tokenAtString(stream,state){var next;while((next=stream.next())!=null){if(next=='"'&&!stream.eat('"')){state.tokenize=null;break}}
return"string"}
function tokenRawString(stream,state){var delim=state.cpp11RawStringDelim.replace(/[^\w\s]/g,'\\$&');var match=stream.match(new RegExp(".*?\\)"+delim+'"'));if(match)
state.tokenize=null;else stream.skipToEnd();return"string"}
function def(mimes,mode){if(typeof mimes=="string")mimes=[mimes];var words=[];function add(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))
words.push(prop);}
add(mode.keywords);add(mode.types);add(mode.builtin);add(mode.atoms);if(words.length){mode.helperType=mimes[0];CodeMirror.registerHelper("hintWords",mimes[0],words)}
for(var i=0;i<mimes.length;++i)
CodeMirror.defineMIME(mimes[i],mode);}
def(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:words(cKeywords),types:words(cTypes+" bool _Complex _Bool float_t double_t intptr_t intmax_t "+"int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t "+"uint32_t uint64_t"),blockKeywords:words("case do else for if switch while struct"),defKeywords:words("struct"),typeFirstDefinitions:!0,atoms:words("null true false"),hooks:{"#":cppHook,"*":pointerHook},modeProps:{fold:["brace","include"]}});def(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:words(cKeywords+" asm dynamic_cast namespace reinterpret_cast try explicit new "+"static_cast typeid catch operator template typename class friend private "+"this using const_cast inline public throw virtual delete mutable protected "+"alignas alignof constexpr decltype nullptr noexcept thread_local final "+"static_assert override"),types:words(cTypes+" bool wchar_t"),blockKeywords:words("catch class do else finally for if struct switch try while"),defKeywords:words("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:words("true false null"),dontIndentStatements:/^template$/,hooks:{"#":cppHook,"*":pointerHook,"u":cpp11StringHook,"U":cpp11StringHook,"L":cpp11StringHook,"R":cpp11StringHook,"0":cpp14Literal,"1":cpp14Literal,"2":cpp14Literal,"3":cpp14Literal,"4":cpp14Literal,"5":cpp14Literal,"6":cpp14Literal,"7":cpp14Literal,"8":cpp14Literal,"9":cpp14Literal,token:function(stream,state,style){if(style=="variable"&&stream.peek()=="("&&(state.prevToken==";"||state.prevToken==null||state.prevToken=="}")&&cppLooksLikeConstructor(stream.current()))
return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}});def("text/x-java",{name:"clike",keywords:words("abstract assert break case catch class const continue default "+"do else enum extends final finally float for goto if implements import "+"instanceof interface native new package private protected public "+"return static strictfp super switch synchronized this throw throws transient "+"try volatile while"),types:words("byte short int long float double boolean char void Boolean Byte Character Double Float "+"Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:words("catch class do else finally for if switch try while"),defKeywords:words("class interface package enum"),typeFirstDefinitions:!0,atoms:words("true false null"),endStatement:/^[;:]$/,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(stream){stream.eatWhile(/[\w\$_]/);return"meta"}},modeProps:{fold:["brace","import"]}});def("text/x-csharp",{name:"clike",keywords:words("abstract as async await base break case catch checked class const continue"+" default delegate do else enum event explicit extern finally fixed for"+" foreach goto if implicit in interface internal is lock namespace new"+" operator out override params private protected public readonly ref return sealed"+" sizeof stackalloc static struct switch this throw try typeof unchecked"+" unsafe using virtual void volatile while add alias ascending descending dynamic from get"+" global group into join let orderby partial remove select set value var yield"),types:words("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func"+" Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32"+" UInt64 bool byte char decimal double short int long object"+" sbyte float string ushort uint ulong"),blockKeywords:words("catch class do else finally for foreach if struct switch try while"),defKeywords:words("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:words("true false null"),hooks:{"@":function(stream,state){if(stream.eat('"')){state.tokenize=tokenAtString;return tokenAtString(stream,state)}
stream.eatWhile(/[\w\$_]/);return"meta"}}});function tokenTripleString(stream,state){var escaped=!1;while(!stream.eol()){if(!escaped&&stream.match('"""')){state.tokenize=null;break}
escaped=stream.next()=="\\"&&!escaped}
return"string"}
def("text/x-scala",{name:"clike",keywords:words("abstract case catch class def do else extends final finally for forSome if "+"implicit import lazy match new null object override package private protected return "+"sealed super this throw trait try type val var while with yield _ : = => <- <: "+"<% >: # @ "+"assert assume require print println printf readLine readBoolean readByte readShort "+"readChar readInt readLong readFloat readDouble "+":: #:: "),types:words("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either "+"Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable "+"Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering "+"Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder "+"StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector "+"Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable "+"Compiler Double Exception Float Integer Long Math Number Object Package Pair Process "+"Runtime Runnable SecurityManager Short StackTraceElement StrictMath String "+"StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:words("catch class do else finally for forSome if match switch try while"),defKeywords:words("class def object package trait type val var"),atoms:words("true false null"),indentStatements:!1,indentSwitch:!1,hooks:{"@":function(stream){stream.eatWhile(/[\w\$_]/);return"meta"},'"':function(stream,state){if(!stream.match('""'))return!1;state.tokenize=tokenTripleString;return state.tokenize(stream,state)},"'":function(stream){stream.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"},"=":function(stream,state){var cx=state.context
if(cx.type=="}"&&cx.align&&stream.eat(">")){state.context=new Context(cx.indented,cx.column,cx.type,cx.info,null,cx.prev)
return"operator"}else{return!1}}},modeProps:{closeBrackets:{triples:'"'}}});function tokenKotlinString(tripleString){return function(stream,state){var escaped=!1,next,end=!1;while(!stream.eol()){if(!tripleString&&!escaped&&stream.match('"')){end=!0;break}
if(tripleString&&stream.match('"""')){end=!0;break}
next=stream.next();if(!escaped&&next=="$"&&stream.match('{'))
stream.skipTo("}");escaped=!escaped&&next=="\\"&&!tripleString}
if(end||!tripleString)
state.tokenize=null;return"string"}}
def("text/x-kotlin",{name:"clike",keywords:words("package as typealias class interface this super val "+"var fun for is in This throw return "+"break continue object if else while do try when !in !is as? "+"file import where by get set abstract enum open inner override private public internal "+"protected catch finally out final vararg reified dynamic companion constructor init "+"sealed field property receiver param sparam lateinit data inline noinline tailrec "+"external annotation crossinline const operator infix"),types:words("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable "+"Compiler Double Exception Float Integer Long Math Number Object Package Pair Process "+"Runtime Runnable SecurityManager Short StackTraceElement StrictMath String "+"StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,blockKeywords:words("catch class do else finally for if where try while enum"),defKeywords:words("class val var object package interface fun"),atoms:words("true false null this"),hooks:{'"':function(stream,state){state.tokenize=tokenKotlinString(stream.match('""'));return state.tokenize(stream,state)}},modeProps:{closeBrackets:{triples:'"'}}});def(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:words("sampler1D sampler2D sampler3D samplerCube "+"sampler1DShadow sampler2DShadow "+"const attribute uniform varying "+"break continue discard return "+"for while do if else struct "+"in out inout"),types:words("float int bool void "+"vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 "+"mat2 mat3 mat4"),blockKeywords:words("for while do if else struct"),builtin:words("radians degrees sin cos tan asin acos atan "+"pow exp log exp2 sqrt inversesqrt "+"abs sign floor ceil fract mod min max clamp mix step smoothstep "+"length distance dot cross normalize ftransform faceforward "+"reflect refract matrixCompMult "+"lessThan lessThanEqual greaterThan greaterThanEqual "+"equal notEqual any all not "+"texture1D texture1DProj texture1DLod texture1DProjLod "+"texture2D texture2DProj texture2DLod texture2DProjLod "+"texture3D texture3DProj texture3DLod texture3DProjLod "+"textureCube textureCubeLod "+"shadow1D shadow2D shadow1DProj shadow2DProj "+"shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod "+"dFdx dFdy fwidth "+"noise1 noise2 noise3 noise4"),atoms:words("true false "+"gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex "+"gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 "+"gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 "+"gl_FogCoord gl_PointCoord "+"gl_Position gl_PointSize gl_ClipVertex "+"gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor "+"gl_TexCoord gl_FogFragCoord "+"gl_FragCoord gl_FrontFacing "+"gl_FragData gl_FragDepth "+"gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix "+"gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse "+"gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse "+"gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose "+"gl_ProjectionMatrixInverseTranspose "+"gl_ModelViewProjectionMatrixInverseTranspose "+"gl_TextureMatrixInverseTranspose "+"gl_NormalScale gl_DepthRange gl_ClipPlane "+"gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel "+"gl_FrontLightModelProduct gl_BackLightModelProduct "+"gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ "+"gl_FogParameters "+"gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords "+"gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats "+"gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits "+"gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits "+"gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}});def("text/x-nesc",{name:"clike",keywords:words(cKeywords+"as atomic async call command component components configuration event generic "+"implementation includes interface module new norace nx_struct nx_union post provides "+"signal task uses abstract extends"),types:words(cTypes),blockKeywords:words("case do else for if switch while struct"),atoms:words("null true false"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}});def("text/x-objectivec",{name:"clike",keywords:words(cKeywords+"inline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in "+"inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:words(cTypes),atoms:words("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(stream){stream.eatWhile(/[\w\$]/);return"keyword"},"#":cppHook,indent:function(_state,ctx,textAfter){if(ctx.type=="statement"&&/^@\w/.test(textAfter))return ctx.indented}},modeProps:{fold:"brace"}});def("text/x-squirrel",{name:"clike",keywords:words("base break clone continue const default delete enum extends function in class"+" foreach local resume return this throw typeof yield constructor instanceof static"),types:words(cTypes),blockKeywords:words("case catch class else for foreach if switch try while"),defKeywords:words("function local class"),typeFirstDefinitions:!0,atoms:words("true false null"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}});var stringTokenizer=null;function tokenCeylonString(type){return function(stream,state){var escaped=!1,next,end=!1;while(!stream.eol()){if(!escaped&&stream.match('"')&&(type=="single"||stream.match('""'))){end=!0;break}
if(!escaped&&stream.match('``')){stringTokenizer=tokenCeylonString(type);end=!0;break}
next=stream.next();escaped=type=="single"&&!escaped&&next=="\\"}
if(end)
state.tokenize=null;return"string"}}
def("text/x-ceylon",{name:"clike",keywords:words("abstracts alias assembly assert assign break case catch class continue dynamic else"+" exists extends finally for function given if import in interface is let module new"+" nonempty object of out outer package return satisfies super switch then this throw"+" try value void while"),types:function(word){var first=word.charAt(0);return(first===first.toUpperCase()&&first!==first.toLowerCase())},blockKeywords:words("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:words("class dynamic function interface module object package value"),builtin:words("abstract actual aliased annotation by default deprecated doc final formal late license"+" native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:words("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(stream){stream.eatWhile(/[\w\$_]/);return"meta"},'"':function(stream,state){state.tokenize=tokenCeylonString(stream.match('""')?"triple":"single");return state.tokenize(stream,state)},'`':function(stream,state){if(!stringTokenizer||!stream.match('`'))return!1;state.tokenize=stringTokenizer;stringTokenizer=null;return state.tokenize(stream,state)},"'":function(stream){stream.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"},token:function(_stream,state,style){if((style=="variable"||style=="variable-3")&&state.prevToken=="."){return"variable-2"}}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"text/x-c");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("indent","[variable-3 void] [def foo]([variable-3 void*] [variable a], [variable-3 int] [variable b]) {","  [variable-3 int] [variable c] [operator =] [variable b] [operator +]","    [number 1];","  [keyword return] [operator *][variable a];","}");MT("indent_switch","[keyword switch] ([variable x]) {","  [keyword case] [number 10]:","    [keyword return] [number 20];","  [keyword default]:","    [variable printf]([string \"foo %c\"], [variable x]);","}");MT("def","[variable-3 void] [def foo]() {}","[keyword struct] [def bar]{}","[variable-3 int] [variable-3 *][def baz]() {}");MT("def_new_line","::[variable std]::[variable SomeTerribleType][operator <][variable T][operator >]","[def SomeLongMethodNameThatDoesntFitIntoOneLine]([keyword const] [variable MyType][operator &] [variable param]) {}")
MT("double_block","[keyword for] (;;)","  [keyword for] (;;)","    [variable x][operator ++];","[keyword return];");MT("preprocessor","[meta #define FOO 3]","[variable-3 int] [variable foo];","[meta #define BAR\\]","[meta 4]","[variable-3 unsigned] [variable-3 int] [variable bar] [operator =] [number 8];","[meta #include <baz> ][comment // comment]")
var mode_cpp=CodeMirror.getMode({indentUnit:2},"text/x-c++src");function MTCPP(name){test.mode(name,mode_cpp,Array.prototype.slice.call(arguments,1))}
MTCPP("cpp14_literal","[number 10'000];","[number 0b10'000];","[number 0x10'000];","[string '100000'];")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("clojure",function(options){var BUILTIN="builtin",COMMENT="comment",STRING="string",CHARACTER="string-2",ATOM="atom",NUMBER="number",BRACKET="bracket",KEYWORD="keyword",VAR="variable";var INDENT_WORD_SKIP=options.indentUnit||2;var NORMAL_INDENT_UNIT=options.indentUnit||2;function makeKeywords(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var atoms=makeKeywords("true false nil");var keywords=makeKeywords("defn defn- def def- defonce defmulti defmethod defmacro defstruct deftype defprotocol defrecord defproject deftest "+"slice defalias defhinted defmacro- defn-memo defnk defnk defonce- defunbound defunbound- defvar defvar- let letfn "+"do case cond condp for loop recur when when-not when-let when-first if if-let if-not . .. -> ->> doto and or dosync "+"doseq dotimes dorun doall load import unimport ns in-ns refer try catch finally throw with-open with-local-vars "+"binding gen-class gen-and-load-class gen-and-save-class handler-case handle");var builtins=makeKeywords("* *' *1 *2 *3 *agent* *allow-unresolved-vars* *assert* *clojure-version* *command-line-args* *compile-files* "+"*compile-path* *compiler-options* *data-readers* *e *err* *file* *flush-on-newline* *fn-loader* *in* "+"*math-context* *ns* *out* *print-dup* *print-length* *print-level* *print-meta* *print-readably* *read-eval* "+"*source-path* *unchecked-math* *use-context-classloader* *verbose-defrecords* *warn-on-reflection* + +' - -' -> "+"->> ->ArrayChunk ->Vec ->VecNode ->VecSeq -cache-protocol-fn -reset-methods .. / < <= = == > >= EMPTY-NODE accessor "+"aclone add-classpath add-watch agent agent-error agent-errors aget alength alias all-ns alter alter-meta! "+"alter-var-root amap ancestors and apply areduce array-map aset aset-boolean aset-byte aset-char aset-double "+"aset-float aset-int aset-long aset-short assert assoc assoc! assoc-in associative? atom await await-for await1 "+"bases bean bigdec bigint biginteger binding bit-and bit-and-not bit-clear bit-flip bit-not bit-or bit-set "+"bit-shift-left bit-shift-right bit-test bit-xor boolean boolean-array booleans bound-fn bound-fn* bound? butlast "+"byte byte-array bytes case cat cast char char-array char-escape-string char-name-string char? chars chunk chunk-append "+"chunk-buffer chunk-cons chunk-first chunk-next chunk-rest chunked-seq? class class? clear-agent-errors "+"clojure-version coll? comment commute comp comparator compare compare-and-set! compile complement completing concat cond condp "+"conj conj! cons constantly construct-proxy contains? count counted? create-ns create-struct cycle dec dec' decimal? "+"declare dedupe default-data-readers definline definterface defmacro defmethod defmulti defn defn- defonce defprotocol "+"defrecord defstruct deftype delay delay? deliver denominator deref derive descendants destructure disj disj! dissoc "+"dissoc! distinct distinct? doall dorun doseq dosync dotimes doto double double-array doubles drop drop-last "+"drop-while eduction empty empty? ensure enumeration-seq error-handler error-mode eval even? every-pred every? ex-data ex-info "+"extend extend-protocol extend-type extenders extends? false? ffirst file-seq filter filterv find find-keyword "+"find-ns find-protocol-impl find-protocol-method find-var first flatten float float-array float? floats flush fn fn? "+"fnext fnil for force format frequencies future future-call future-cancel future-cancelled? future-done? future? "+"gen-class gen-interface gensym get get-in get-method get-proxy-class get-thread-bindings get-validator group-by hash "+"hash-combine hash-map hash-set identical? identity if-let if-not ifn? import in-ns inc inc' init-proxy instance? "+"int int-array integer? interleave intern interpose into into-array ints io! isa? iterate iterator-seq juxt keep "+"keep-indexed key keys keyword keyword? last lazy-cat lazy-seq let letfn line-seq list list* list? load load-file "+"load-reader load-string loaded-libs locking long long-array longs loop macroexpand macroexpand-1 make-array "+"make-hierarchy map map-indexed map? mapcat mapv max max-key memfn memoize merge merge-with meta method-sig methods "+"min min-key mod munge name namespace namespace-munge neg? newline next nfirst nil? nnext not not-any? not-empty "+"not-every? not= ns ns-aliases ns-imports ns-interns ns-map ns-name ns-publics ns-refers ns-resolve ns-unalias "+"ns-unmap nth nthnext nthrest num number? numerator object-array odd? or parents partial partition partition-all "+"partition-by pcalls peek persistent! pmap pop pop! pop-thread-bindings pos? pr pr-str prefer-method prefers "+"primitives-classnames print print-ctor print-dup print-method print-simple print-str printf println println-str "+"prn prn-str promise proxy proxy-call-with-super proxy-mappings proxy-name proxy-super push-thread-bindings pvalues "+"quot rand rand-int rand-nth random-sample range ratio? rational? rationalize re-find re-groups re-matcher re-matches re-pattern "+"re-seq read read-line read-string realized? reduce reduce-kv reductions ref ref-history-count ref-max-history "+"ref-min-history ref-set refer refer-clojure reify release-pending-sends rem remove remove-all-methods "+"remove-method remove-ns remove-watch repeat repeatedly replace replicate require reset! reset-meta! resolve rest "+"restart-agent resultset-seq reverse reversible? rseq rsubseq satisfies? second select-keys send send-off seq seq? "+"seque sequence sequential? set set-error-handler! set-error-mode! set-validator! set? short short-array shorts "+"shuffle shutdown-agents slurp some some-fn sort sort-by sorted-map sorted-map-by sorted-set sorted-set-by sorted? "+"special-symbol? spit split-at split-with str string? struct struct-map subs subseq subvec supers swap! symbol "+"symbol? sync take take-last take-nth take-while test the-ns thread-bound? time to-array to-array-2d trampoline transduce "+"transient tree-seq true? type unchecked-add unchecked-add-int unchecked-byte unchecked-char unchecked-dec "+"unchecked-dec-int unchecked-divide-int unchecked-double unchecked-float unchecked-inc unchecked-inc-int "+"unchecked-int unchecked-long unchecked-multiply unchecked-multiply-int unchecked-negate unchecked-negate-int "+"unchecked-remainder-int unchecked-short unchecked-subtract unchecked-subtract-int underive unquote "+"unquote-splicing update update-in update-proxy use val vals var-get var-set var? vary-meta vec vector vector-of "+"vector? volatile! volatile? vreset! vswap! when when-first when-let when-not while with-bindings with-bindings* with-in-str with-loading-context "+"with-local-vars with-meta with-open with-out-str with-precision with-redefs with-redefs-fn xml-seq zero? zipmap "+"*default-data-reader-fn* as-> cond-> cond->> reduced reduced? send-via set-agent-send-executor! "+"set-agent-send-off-executor! some-> some->>");var indentKeys=makeKeywords("ns fn def defn defmethod bound-fn if if-not case condp when while when-not when-first do future comment doto "+"locking proxy with-open with-precision reify deftype defrecord defprotocol extend extend-protocol extend-type "+"try catch "+"let letfn binding loop for doseq dotimes when-let if-let "+"defstruct struct-map assoc "+"testing deftest "+"handler-case handle dotrace deftrace");var tests={digit:/\d/,digit_or_colon:/[\d:]/,hex:/[0-9a-f]/i,sign:/[+-]/,exponent:/e/i,keyword_char:/[^\s\(\[\;\)\]]/,symbol:/[\w*+!\-\._?:<>\/\xa1-\uffff]/,block_indent:/^(?:def|with)[^\/]+$|\/(?:def|with)/};function stateStack(indent,type,prev){this.indent=indent;this.type=type;this.prev=prev}
function pushStack(state,indent,type){state.indentStack=new stateStack(indent,type,state.indentStack)}
function popStack(state){state.indentStack=state.indentStack.prev}
function isNumber(ch,stream){if(ch==='0'&&stream.eat(/x/i)){stream.eatWhile(tests.hex);return!0}
if((ch=='+'||ch=='-')&&(tests.digit.test(stream.peek()))){stream.eat(tests.sign);ch=stream.next()}
if(tests.digit.test(ch)){stream.eat(ch);stream.eatWhile(tests.digit);if('.'==stream.peek()){stream.eat('.');stream.eatWhile(tests.digit)}else if('/'==stream.peek()){stream.eat('/');stream.eatWhile(tests.digit)}
if(stream.eat(tests.exponent)){stream.eat(tests.sign);stream.eatWhile(tests.digit)}
return!0}
return!1}
function eatCharacter(stream){var first=stream.next();if(first&&first.match(/[a-z]/)&&stream.match(/[a-z]+/,!0)){return}
if(first==="u"){stream.match(/[0-9a-z]{4}/i,!0)}}
return{startState:function(){return{indentStack:null,indentation:0,mode:!1}},token:function(stream,state){if(state.indentStack==null&&stream.sol()){state.indentation=stream.indentation()}
if(state.mode!="string"&&stream.eatSpace()){return null}
var returnType=null;switch(state.mode){case "string":var next,escaped=!1;while((next=stream.next())!=null){if(next=="\""&&!escaped){state.mode=!1;break}
escaped=!escaped&&next=="\\"}
returnType=STRING;break;default:var ch=stream.next();if(ch=="\""){state.mode="string";returnType=STRING}else if(ch=="\\"){eatCharacter(stream);returnType=CHARACTER}else if(ch=="'"&&!(tests.digit_or_colon.test(stream.peek()))){returnType=ATOM}else if(ch==";"){stream.skipToEnd();returnType=COMMENT}else if(isNumber(ch,stream)){returnType=NUMBER}else if(ch=="("||ch=="["||ch=="{"){var keyWord='',indentTemp=stream.column(),letter;if(ch=="(")while((letter=stream.eat(tests.keyword_char))!=null){keyWord+=letter}
if(keyWord.length>0&&(indentKeys.propertyIsEnumerable(keyWord)||tests.block_indent.test(keyWord))){pushStack(state,indentTemp+INDENT_WORD_SKIP,ch)}else{stream.eatSpace();if(stream.eol()||stream.peek()==";"){pushStack(state,indentTemp+NORMAL_INDENT_UNIT,ch)}else{pushStack(state,indentTemp+stream.current().length,ch)}}
stream.backUp(stream.current().length-1);returnType=BRACKET}else if(ch==")"||ch=="]"||ch=="}"){returnType=BRACKET;if(state.indentStack!=null&&state.indentStack.type==(ch==")"?"(":(ch=="]"?"[":"{"))){popStack(state)}}else if(ch==":"){stream.eatWhile(tests.symbol);return ATOM}else{stream.eatWhile(tests.symbol);if(keywords&&keywords.propertyIsEnumerable(stream.current())){returnType=KEYWORD}else if(builtins&&builtins.propertyIsEnumerable(stream.current())){returnType=BUILTIN}else if(atoms&&atoms.propertyIsEnumerable(stream.current())){returnType=ATOM}else{returnType=VAR}}}
return returnType},indent:function(state){if(state.indentStack==null)return state.indentation;return state.indentStack.indent},closeBrackets:{pairs:"()[]{}\"\""},lineComment:";;"}});CodeMirror.defineMIME("text/x-clojure","clojure");CodeMirror.defineMIME("text/x-clojurescript","clojure");CodeMirror.defineMIME("application/edn","clojure")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("cmake",function(){var variable_regex=/({)?[a-zA-Z0-9_]+(})?/;function tokenString(stream,state){var current,prev,found_var=!1;while(!stream.eol()&&(current=stream.next())!=state.pending){if(current==='$'&&prev!='\\'&&state.pending=='"'){found_var=!0;break}
prev=current}
if(found_var){stream.backUp(1)}
if(current==state.pending){state.continueString=!1}else{state.continueString=!0}
return"string"}
function tokenize(stream,state){var ch=stream.next();if(ch==='$'){if(stream.match(variable_regex)){return'variable-2'}
return'variable'}
if(state.continueString){stream.backUp(1);return tokenString(stream,state)}
if(stream.match(/(\s+)?\w+\(/)||stream.match(/(\s+)?\w+\ \(/)){stream.backUp(1);return'def'}
if(ch=="#"){stream.skipToEnd();return"comment"}
if(ch=="'"||ch=='"'){state.pending=ch;return tokenString(stream,state)}
if(ch=='('||ch==')'){return'bracket'}
if(ch.match(/[0-9]/)){return'number'}
stream.eatWhile(/[\w-]/);return null}
return{startState:function(){var state={};state.inDefinition=!1;state.inInclude=!1;state.continueString=!1;state.pending=!1;return state},token:function(stream,state){if(stream.eatSpace())return null;return tokenize(stream,state)}}});CodeMirror.defineMIME("text/x-cmake","cmake")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("cobol",function(){var BUILTIN="builtin",COMMENT="comment",STRING="string",ATOM="atom",NUMBER="number",KEYWORD="keyword",MODTAG="header",COBOLLINENUM="def",PERIOD="link";function makeKeywords(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var atoms=makeKeywords("TRUE FALSE ZEROES ZEROS ZERO SPACES SPACE LOW-VALUE LOW-VALUES ");var keywords=makeKeywords("ACCEPT ACCESS ACQUIRE ADD ADDRESS "+"ADVANCING AFTER ALIAS ALL ALPHABET "+"ALPHABETIC ALPHABETIC-LOWER ALPHABETIC-UPPER ALPHANUMERIC ALPHANUMERIC-EDITED "+"ALSO ALTER ALTERNATE AND ANY "+"ARE AREA AREAS ARITHMETIC ASCENDING "+"ASSIGN AT ATTRIBUTE AUTHOR AUTO "+"AUTO-SKIP AUTOMATIC B-AND B-EXOR B-LESS "+"B-NOT B-OR BACKGROUND-COLOR BACKGROUND-COLOUR BEEP "+"BEFORE BELL BINARY BIT BITS "+"BLANK BLINK BLOCK BOOLEAN BOTTOM "+"BY CALL CANCEL CD CF "+"CH CHARACTER CHARACTERS CLASS CLOCK-UNITS "+"CLOSE COBOL CODE CODE-SET COL "+"COLLATING COLUMN COMMA COMMIT COMMITMENT "+"COMMON COMMUNICATION COMP COMP-0 COMP-1 "+"COMP-2 COMP-3 COMP-4 COMP-5 COMP-6 "+"COMP-7 COMP-8 COMP-9 COMPUTATIONAL COMPUTATIONAL-0 "+"COMPUTATIONAL-1 COMPUTATIONAL-2 COMPUTATIONAL-3 COMPUTATIONAL-4 COMPUTATIONAL-5 "+"COMPUTATIONAL-6 COMPUTATIONAL-7 COMPUTATIONAL-8 COMPUTATIONAL-9 COMPUTE "+"CONFIGURATION CONNECT CONSOLE CONTAINED CONTAINS "+"CONTENT CONTINUE CONTROL CONTROL-AREA CONTROLS "+"CONVERTING COPY CORR CORRESPONDING COUNT "+"CRT CRT-UNDER CURRENCY CURRENT CURSOR "+"DATA DATE DATE-COMPILED DATE-WRITTEN DAY "+"DAY-OF-WEEK DB DB-ACCESS-CONTROL-KEY DB-DATA-NAME DB-EXCEPTION "+"DB-FORMAT-NAME DB-RECORD-NAME DB-SET-NAME DB-STATUS DBCS "+"DBCS-EDITED DE DEBUG-CONTENTS DEBUG-ITEM DEBUG-LINE "+"DEBUG-NAME DEBUG-SUB-1 DEBUG-SUB-2 DEBUG-SUB-3 DEBUGGING "+"DECIMAL-POINT DECLARATIVES DEFAULT DELETE DELIMITED "+"DELIMITER DEPENDING DESCENDING DESCRIBED DESTINATION "+"DETAIL DISABLE DISCONNECT DISPLAY DISPLAY-1 "+"DISPLAY-2 DISPLAY-3 DISPLAY-4 DISPLAY-5 DISPLAY-6 "+"DISPLAY-7 DISPLAY-8 DISPLAY-9 DIVIDE DIVISION "+"DOWN DROP DUPLICATE DUPLICATES DYNAMIC "+"EBCDIC EGI EJECT ELSE EMI "+"EMPTY EMPTY-CHECK ENABLE END END. END-ACCEPT END-ACCEPT. "+"END-ADD END-CALL END-COMPUTE END-DELETE END-DISPLAY "+"END-DIVIDE END-EVALUATE END-IF END-INVOKE END-MULTIPLY "+"END-OF-PAGE END-PERFORM END-READ END-RECEIVE END-RETURN "+"END-REWRITE END-SEARCH END-START END-STRING END-SUBTRACT "+"END-UNSTRING END-WRITE END-XML ENTER ENTRY "+"ENVIRONMENT EOP EQUAL EQUALS ERASE "+"ERROR ESI EVALUATE EVERY EXCEEDS "+"EXCEPTION EXCLUSIVE EXIT EXTEND EXTERNAL "+"EXTERNALLY-DESCRIBED-KEY FD FETCH FILE FILE-CONTROL "+"FILE-STREAM FILES FILLER FINAL FIND "+"FINISH FIRST FOOTING FOR FOREGROUND-COLOR "+"FOREGROUND-COLOUR FORMAT FREE FROM FULL "+"FUNCTION GENERATE GET GIVING GLOBAL "+"GO GOBACK GREATER GROUP HEADING "+"HIGH-VALUE HIGH-VALUES HIGHLIGHT I-O I-O-CONTROL "+"ID IDENTIFICATION IF IN INDEX "+"INDEX-1 INDEX-2 INDEX-3 INDEX-4 INDEX-5 "+"INDEX-6 INDEX-7 INDEX-8 INDEX-9 INDEXED "+"INDIC INDICATE INDICATOR INDICATORS INITIAL "+"INITIALIZE INITIATE INPUT INPUT-OUTPUT INSPECT "+"INSTALLATION INTO INVALID INVOKE IS "+"JUST JUSTIFIED KANJI KEEP KEY "+"LABEL LAST LD LEADING LEFT "+"LEFT-JUSTIFY LENGTH LENGTH-CHECK LESS LIBRARY "+"LIKE LIMIT LIMITS LINAGE LINAGE-COUNTER "+"LINE LINE-COUNTER LINES LINKAGE LOCAL-STORAGE "+"LOCALE LOCALLY LOCK "+"MEMBER MEMORY MERGE MESSAGE METACLASS "+"MODE MODIFIED MODIFY MODULES MOVE "+"MULTIPLE MULTIPLY NATIONAL NATIVE NEGATIVE "+"NEXT NO NO-ECHO NONE NOT "+"NULL NULL-KEY-MAP NULL-MAP NULLS NUMBER "+"NUMERIC NUMERIC-EDITED OBJECT OBJECT-COMPUTER OCCURS "+"OF OFF OMITTED ON ONLY "+"OPEN OPTIONAL OR ORDER ORGANIZATION "+"OTHER OUTPUT OVERFLOW OWNER PACKED-DECIMAL "+"PADDING PAGE PAGE-COUNTER PARSE PERFORM "+"PF PH PIC PICTURE PLUS "+"POINTER POSITION POSITIVE PREFIX PRESENT "+"PRINTING PRIOR PROCEDURE PROCEDURE-POINTER PROCEDURES "+"PROCEED PROCESS PROCESSING PROGRAM PROGRAM-ID "+"PROMPT PROTECTED PURGE QUEUE QUOTE "+"QUOTES RANDOM RD READ READY "+"REALM RECEIVE RECONNECT RECORD RECORD-NAME "+"RECORDS RECURSIVE REDEFINES REEL REFERENCE "+"REFERENCE-MONITOR REFERENCES RELATION RELATIVE RELEASE "+"REMAINDER REMOVAL RENAMES REPEATED REPLACE "+"REPLACING REPORT REPORTING REPORTS REPOSITORY "+"REQUIRED RERUN RESERVE RESET RETAINING "+"RETRIEVAL RETURN RETURN-CODE RETURNING REVERSE-VIDEO "+"REVERSED REWIND REWRITE RF RH "+"RIGHT RIGHT-JUSTIFY ROLLBACK ROLLING ROUNDED "+"RUN SAME SCREEN SD SEARCH "+"SECTION SECURE SECURITY SEGMENT SEGMENT-LIMIT "+"SELECT SEND SENTENCE SEPARATE SEQUENCE "+"SEQUENTIAL SET SHARED SIGN SIZE "+"SKIP1 SKIP2 SKIP3 SORT SORT-MERGE "+"SORT-RETURN SOURCE SOURCE-COMPUTER SPACE-FILL "+"SPECIAL-NAMES STANDARD STANDARD-1 STANDARD-2 "+"START STARTING STATUS STOP STORE "+"STRING SUB-QUEUE-1 SUB-QUEUE-2 SUB-QUEUE-3 SUB-SCHEMA "+"SUBFILE SUBSTITUTE SUBTRACT SUM SUPPRESS "+"SYMBOLIC SYNC SYNCHRONIZED SYSIN SYSOUT "+"TABLE TALLYING TAPE TENANT TERMINAL "+"TERMINATE TEST TEXT THAN THEN "+"THROUGH THRU TIME TIMES TITLE "+"TO TOP TRAILING TRAILING-SIGN TRANSACTION "+"TYPE TYPEDEF UNDERLINE UNEQUAL UNIT "+"UNSTRING UNTIL UP UPDATE UPON "+"USAGE USAGE-MODE USE USING VALID "+"VALIDATE VALUE VALUES VARYING VLR "+"WAIT WHEN WHEN-COMPILED WITH WITHIN "+"WORDS WORKING-STORAGE WRITE XML XML-CODE "+"XML-EVENT XML-NTEXT XML-TEXT ZERO ZERO-FILL ");var builtins=makeKeywords("- * ** / + < <= = > >= ");var tests={digit:/\d/,digit_or_colon:/[\d:]/,hex:/[0-9a-f]/i,sign:/[+-]/,exponent:/e/i,keyword_char:/[^\s\(\[\;\)\]]/,symbol:/[\w*+\-]/};function isNumber(ch,stream){if(ch==='0'&&stream.eat(/x/i)){stream.eatWhile(tests.hex);return!0}
if((ch=='+'||ch=='-')&&(tests.digit.test(stream.peek()))){stream.eat(tests.sign);ch=stream.next()}
if(tests.digit.test(ch)){stream.eat(ch);stream.eatWhile(tests.digit);if('.'==stream.peek()){stream.eat('.');stream.eatWhile(tests.digit)}
if(stream.eat(tests.exponent)){stream.eat(tests.sign);stream.eatWhile(tests.digit)}
return!0}
return!1}
return{startState:function(){return{indentStack:null,indentation:0,mode:!1}},token:function(stream,state){if(state.indentStack==null&&stream.sol()){state.indentation=6}
if(stream.eatSpace()){return null}
var returnType=null;switch(state.mode){case "string":var next=!1;while((next=stream.next())!=null){if(next=="\""||next=="\'"){state.mode=!1;break}}
returnType=STRING;break;default:var ch=stream.next();var col=stream.column();if(col>=0&&col<=5){returnType=COBOLLINENUM}else if(col>=72&&col<=79){stream.skipToEnd();returnType=MODTAG}else if(ch=="*"&&col==6){stream.skipToEnd();returnType=COMMENT}else if(ch=="\""||ch=="\'"){state.mode="string";returnType=STRING}else if(ch=="'"&&!(tests.digit_or_colon.test(stream.peek()))){returnType=ATOM}else if(ch=="."){returnType=PERIOD}else if(isNumber(ch,stream)){returnType=NUMBER}else{if(stream.current().match(tests.symbol)){while(col<71){if(stream.eat(tests.symbol)===undefined){break}else{col++}}}
if(keywords&&keywords.propertyIsEnumerable(stream.current().toUpperCase())){returnType=KEYWORD}else if(builtins&&builtins.propertyIsEnumerable(stream.current().toUpperCase())){returnType=BUILTIN}else if(atoms&&atoms.propertyIsEnumerable(stream.current().toUpperCase())){returnType=ATOM}else returnType=null}}
return returnType},indent:function(state){if(state.indentStack==null)return state.indentation;return state.indentStack.indent}}});CodeMirror.defineMIME("text/x-cobol","cobol")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("coffeescript",function(conf,parserConf){var ERRORCLASS="error";function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b")}
var operators=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?|(or|and|\|\||&&|\?)=)/;var delimiters=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/;var identifiers=/^[_A-Za-z$][_A-Za-z$0-9]*/;var atProp=/^@[_A-Za-z$][_A-Za-z$0-9]*/;var wordOperators=wordRegexp(["and","or","not","is","isnt","in","instanceof","typeof"]);var indentKeywords=["for","while","loop","if","unless","else","switch","try","catch","finally","class"];var commonKeywords=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","@","throw","when","until","extends"];var keywords=wordRegexp(indentKeywords.concat(commonKeywords));indentKeywords=wordRegexp(indentKeywords);var stringPrefixes=/^('{3}|\"{3}|['\"])/;var regexPrefixes=/^(\/{3}|\/)/;var commonConstants=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"];var constants=wordRegexp(commonConstants);function tokenBase(stream,state){if(stream.sol()){if(state.scope.align===null)state.scope.align=!1;var scopeOffset=state.scope.offset;if(stream.eatSpace()){var lineOffset=stream.indentation();if(lineOffset>scopeOffset&&state.scope.type=="coffee"){return"indent"}else if(lineOffset<scopeOffset){return"dedent"}
return null}else{if(scopeOffset>0){dedent(stream,state)}}}
if(stream.eatSpace()){return null}
var ch=stream.peek();if(stream.match("####")){stream.skipToEnd();return"comment"}
if(stream.match("###")){state.tokenize=longComment;return state.tokenize(stream,state)}
if(ch==="#"){stream.skipToEnd();return"comment"}
if(stream.match(/^-?[0-9\.]/,!1)){var floatLiteral=!1;if(stream.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)){floatLiteral=!0}
if(stream.match(/^-?\d+\.\d*/)){floatLiteral=!0}
if(stream.match(/^-?\.\d+/)){floatLiteral=!0}
if(floatLiteral){if(stream.peek()=="."){stream.backUp(1)}
return"number"}
var intLiteral=!1;if(stream.match(/^-?0x[0-9a-f]+/i)){intLiteral=!0}
if(stream.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)){intLiteral=!0}
if(stream.match(/^-?0(?![\dx])/i)){intLiteral=!0}
if(intLiteral){return"number"}}
if(stream.match(stringPrefixes)){state.tokenize=tokenFactory(stream.current(),!1,"string");return state.tokenize(stream,state)}
if(stream.match(regexPrefixes)){if(stream.current()!="/"||stream.match(/^.*\//,!1)){state.tokenize=tokenFactory(stream.current(),!0,"string-2");return state.tokenize(stream,state)}else{stream.backUp(1)}}
if(stream.match(operators)||stream.match(wordOperators)){return"operator"}
if(stream.match(delimiters)){return"punctuation"}
if(stream.match(constants)){return"atom"}
if(stream.match(atProp)||state.prop&&stream.match(identifiers)){return"property"}
if(stream.match(keywords)){return"keyword"}
if(stream.match(identifiers)){return"variable"}
stream.next();return ERRORCLASS}
function tokenFactory(delimiter,singleline,outclass){return function(stream,state){while(!stream.eol()){stream.eatWhile(/[^'"\/\\]/);if(stream.eat("\\")){stream.next();if(singleline&&stream.eol()){return outclass}}else if(stream.match(delimiter)){state.tokenize=tokenBase;return outclass}else{stream.eat(/['"\/]/)}}
if(singleline){if(parserConf.singleLineStringErrors){outclass=ERRORCLASS}else{state.tokenize=tokenBase}}
return outclass}}
function longComment(stream,state){while(!stream.eol()){stream.eatWhile(/[^#]/);if(stream.match("###")){state.tokenize=tokenBase;break}
stream.eatWhile("#")}
return"comment"}
function indent(stream,state,type){type=type||"coffee";var offset=0,align=!1,alignOffset=null;for(var scope=state.scope;scope;scope=scope.prev){if(scope.type==="coffee"||scope.type=="}"){offset=scope.offset+conf.indentUnit;break}}
if(type!=="coffee"){align=null;alignOffset=stream.column()+stream.current().length}else if(state.scope.align){state.scope.align=!1}
state.scope={offset:offset,type:type,prev:state.scope,align:align,alignOffset:alignOffset}}
function dedent(stream,state){if(!state.scope.prev)return;if(state.scope.type==="coffee"){var _indent=stream.indentation();var matched=!1;for(var scope=state.scope;scope;scope=scope.prev){if(_indent===scope.offset){matched=!0;break}}
if(!matched){return!0}
while(state.scope.prev&&state.scope.offset!==_indent){state.scope=state.scope.prev}
return!1}else{state.scope=state.scope.prev;return!1}}
function tokenLexer(stream,state){var style=state.tokenize(stream,state);var current=stream.current();if(current==="return"){state.dedent=!0}
if(((current==="->"||current==="=>")&&stream.eol())||style==="indent"){indent(stream,state)}
var delimiter_index="[({".indexOf(current);if(delimiter_index!==-1){indent(stream,state,"])}".slice(delimiter_index,delimiter_index+1))}
if(indentKeywords.exec(current)){indent(stream,state)}
if(current=="then"){dedent(stream,state)}
if(style==="dedent"){if(dedent(stream,state)){return ERRORCLASS}}
delimiter_index="])}".indexOf(current);if(delimiter_index!==-1){while(state.scope.type=="coffee"&&state.scope.prev)
state.scope=state.scope.prev;if(state.scope.type==current)
state.scope=state.scope.prev}
if(state.dedent&&stream.eol()){if(state.scope.type=="coffee"&&state.scope.prev)
state.scope=state.scope.prev;state.dedent=!1}
return style}
var external={startState:function(basecolumn){return{tokenize:tokenBase,scope:{offset:basecolumn||0,type:"coffee",prev:null,align:!1},prop:!1,dedent:0}},token:function(stream,state){var fillAlign=state.scope.align===null&&state.scope;if(fillAlign&&stream.sol())fillAlign.align=!1;var style=tokenLexer(stream,state);if(style&&style!="comment"){if(fillAlign)fillAlign.align=!0;state.prop=style=="punctuation"&&stream.current()=="."}
return style},indent:function(state,text){if(state.tokenize!=tokenBase)return 0;var scope=state.scope;var closer=text&&"])}".indexOf(text.charAt(0))>-1;if(closer)while(scope.type=="coffee"&&scope.prev)scope=scope.prev;var closes=closer&&scope.type===text.charAt(0);if(scope.align)
return scope.alignOffset-(closes?1:0);else return(closes?scope.prev:scope).offset},lineComment:"#",fold:"indent"};return external});CodeMirror.defineMIME("text/x-coffeescript","coffeescript");CodeMirror.defineMIME("text/coffeescript","coffeescript")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("commonlisp",function(config){var specialForm=/^(block|let*|return-from|catch|load-time-value|setq|eval-when|locally|symbol-macrolet|flet|macrolet|tagbody|function|multiple-value-call|the|go|multiple-value-prog1|throw|if|progn|unwind-protect|labels|progv|let|quote)$/;var assumeBody=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/;var numLiteral=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/;var symbol=/[^\s'`,@()\[\]";]/;var type;function readSym(stream){var ch;while(ch=stream.next()){if(ch=="\\")stream.next();else if(!symbol.test(ch)){stream.backUp(1);break}}
return stream.current()}
function base(stream,state){if(stream.eatSpace()){type="ws";return null}
if(stream.match(numLiteral))return"number";var ch=stream.next();if(ch=="\\")ch=stream.next();if(ch=='"')return(state.tokenize=inString)(stream,state);else if(ch=="("){type="open";return"bracket"}else if(ch==")"||ch=="]"){type="close";return"bracket"}else if(ch==";"){stream.skipToEnd();type="ws";return"comment"}else if(/['`,@]/.test(ch))return null;else if(ch=="|"){if(stream.skipTo("|")){stream.next();return"symbol"}else{stream.skipToEnd();return"error"}}else if(ch=="#"){var ch=stream.next();if(ch=="["){type="open";return"bracket"}else if(/[+\-=\.']/.test(ch))return null;else if(/\d/.test(ch)&&stream.match(/^\d*#/))return null;else if(ch=="|")return(state.tokenize=inComment)(stream,state);else if(ch==":"){readSym(stream);return"meta"}else return"error"}else{var name=readSym(stream);if(name==".")return null;type="symbol";if(name=="nil"||name=="t"||name.charAt(0)==":")return"atom";if(state.lastType=="open"&&(specialForm.test(name)||assumeBody.test(name)))return"keyword";if(name.charAt(0)=="&")return"variable-2";return"variable"}}
function inString(stream,state){var escaped=!1,next;while(next=stream.next()){if(next=='"'&&!escaped){state.tokenize=base;break}
escaped=!escaped&&next=="\\"}
return"string"}
function inComment(stream,state){var next,last;while(next=stream.next()){if(next=="#"&&last=="|"){state.tokenize=base;break}
last=next}
type="ws";return"comment"}
return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},lastType:null,tokenize:base}},token:function(stream,state){if(stream.sol()&&typeof state.ctx.indentTo!="number")
state.ctx.indentTo=state.ctx.start+1;type=null;var style=state.tokenize(stream,state);if(type!="ws"){if(state.ctx.indentTo==null){if(type=="symbol"&&assumeBody.test(stream.current()))
state.ctx.indentTo=state.ctx.start+config.indentUnit;else state.ctx.indentTo="next"}else if(state.ctx.indentTo=="next"){state.ctx.indentTo=stream.column()}
state.lastType=type}
if(type=="open")state.ctx={prev:state.ctx,start:stream.column(),indentTo:null};else if(type=="close")state.ctx=state.ctx.prev||state.ctx;return style},indent:function(state,_textAfter){var i=state.ctx.indentTo;return typeof i=="number"?i:state.ctx.start+1},closeBrackets:{pairs:"()[]{}\"\""},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}});CodeMirror.defineMIME("text/x-common-lisp","commonlisp")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("crystal",function(config){function wordRegExp(words,end){return new RegExp((end?"":"^")+"(?:"+words.join("|")+")"+(end?"$":"\\b"))}
function chain(tokenize,stream,state){state.tokenize.push(tokenize);return tokenize(stream,state)}
var operators=/^(?:[-+/%|&^]|\*\*?|[<>]{2})/;var conditionalOperators=/^(?:[=!]~|===|<=>|[<>=!]=?|[|&]{2}|~)/;var indexingOperators=/^(?:\[\][?=]?)/;var anotherOperators=/^(?:\.(?:\.{2})?|->|[?:])/;var idents=/^[a-z_\u009F-\uFFFF][a-zA-Z0-9_\u009F-\uFFFF]*/;var types=/^[A-Z_\u009F-\uFFFF][a-zA-Z0-9_\u009F-\uFFFF]*/;var keywords=wordRegExp(["abstract","alias","as","asm","begin","break","case","class","def","do","else","elsif","end","ensure","enum","extend","for","fun","if","ifdef","include","instance_sizeof","lib","macro","module","next","of","out","pointerof","private","protected","rescue","return","require","sizeof","struct","super","then","type","typeof","union","unless","until","when","while","with","yield","__DIR__","__FILE__","__LINE__"]);var atomWords=wordRegExp(["true","false","nil","self"]);var indentKeywordsArray=["def","fun","macro","class","module","struct","lib","enum","union","if","unless","case","while","until","begin","then","do","for","ifdef"];var indentKeywords=wordRegExp(indentKeywordsArray);var dedentKeywordsArray=["end","else","elsif","rescue","ensure"];var dedentKeywords=wordRegExp(dedentKeywordsArray);var dedentPunctualsArray=["\\)","\\}","\\]"];var dedentPunctuals=new RegExp("^(?:"+dedentPunctualsArray.join("|")+")$");var nextTokenizer={"def":tokenFollowIdent,"fun":tokenFollowIdent,"macro":tokenMacroDef,"class":tokenFollowType,"module":tokenFollowType,"struct":tokenFollowType,"lib":tokenFollowType,"enum":tokenFollowType,"union":tokenFollowType};var matching={"[":"]","{":"}","(":")","<":">"};function tokenBase(stream,state){if(stream.eatSpace()){return null}
if(state.lastToken!="\\"&&stream.match("{%",!1)){return chain(tokenMacro("%","%"),stream,state)}
if(state.lastToken!="\\"&&stream.match("{{",!1)){return chain(tokenMacro("{","}"),stream,state)}
if(stream.peek()=="#"){stream.skipToEnd();return"comment"}
var matched;if(stream.match(idents)){stream.eat(/[?!]/);matched=stream.current();if(stream.eat(":")){return"atom"}else if(state.lastToken=="."){return"property"}else if(keywords.test(matched)){if(state.lastToken!="abstract"&&indentKeywords.test(matched)){if(!(matched=="fun"&&state.blocks.indexOf("lib")>=0)){state.blocks.push(matched);state.currentIndent+=1}}else if(dedentKeywords.test(matched)){state.blocks.pop();state.currentIndent-=1}
if(nextTokenizer.hasOwnProperty(matched)){state.tokenize.push(nextTokenizer[matched])}
return"keyword"}else if(atomWords.test(matched)){return"atom"}
return"variable"}
if(stream.eat("@")){if(stream.peek()=="["){return chain(tokenNest("[","]","meta"),stream,state)}
stream.eat("@");stream.match(idents)||stream.match(types);return"variable-2"}
if(stream.eat("$")){stream.eat(/[0-9]+|\?/)||stream.match(idents)||stream.match(types);return"variable-3"}
if(stream.match(types)){return"tag"}
if(stream.eat(":")){if(stream.eat("\"")){return chain(tokenQuote("\"","atom",!1),stream,state)}else if(stream.match(idents)||stream.match(types)||stream.match(operators)||stream.match(conditionalOperators)||stream.match(indexingOperators)){return"atom"}
stream.eat(":");return"operator"}
if(stream.eat("\"")){return chain(tokenQuote("\"","string",!0),stream,state)}
if(stream.peek()=="%"){var style="string";var embed=!0;var delim;if(stream.match("%r")){style="string-2";delim=stream.next()}else if(stream.match("%w")){embed=!1;delim=stream.next()}else{if(delim=stream.match(/^%([^\w\s=])/)){delim=delim[1]}else if(stream.match(/^%[a-zA-Z0-9_\u009F-\uFFFF]*/)){return"meta"}else{return"operator"}}
if(matching.hasOwnProperty(delim)){delim=matching[delim]}
return chain(tokenQuote(delim,style,embed),stream,state)}
if(stream.eat("'")){stream.match(/^(?:[^']|\\(?:[befnrtv0'"]|[0-7]{3}|u(?:[0-9a-fA-F]{4}|\{[0-9a-fA-F]{1,6}\})))/);stream.eat("'");return"atom"}
if(stream.eat("0")){if(stream.eat("x")){stream.match(/^[0-9a-fA-F]+/)}else if(stream.eat("o")){stream.match(/^[0-7]+/)}else if(stream.eat("b")){stream.match(/^[01]+/)}
return"number"}
if(stream.eat(/\d/)){stream.match(/^\d*(?:\.\d+)?(?:[eE][+-]?\d+)?/);return"number"}
if(stream.match(operators)){stream.eat("=");return"operator"}
if(stream.match(conditionalOperators)||stream.match(anotherOperators)){return"operator"}
if(matched=stream.match(/[({[]/,!1)){matched=matched[0];return chain(tokenNest(matched,matching[matched],null),stream,state)}
if(stream.eat("\\")){stream.next();return"meta"}
stream.next();return null}
function tokenNest(begin,end,style,started){return function(stream,state){if(!started&&stream.match(begin)){state.tokenize[state.tokenize.length-1]=tokenNest(begin,end,style,!0);state.currentIndent+=1;return style}
var nextStyle=tokenBase(stream,state);if(stream.current()===end){state.tokenize.pop();state.currentIndent-=1;nextStyle=style}
return nextStyle}}
function tokenMacro(begin,end,started){return function(stream,state){if(!started&&stream.match("{"+begin)){state.currentIndent+=1;state.tokenize[state.tokenize.length-1]=tokenMacro(begin,end,!0);return"meta"}
if(stream.match(end+"}")){state.currentIndent-=1;state.tokenize.pop();return"meta"}
return tokenBase(stream,state)}}
function tokenMacroDef(stream,state){if(stream.eatSpace()){return null}
var matched;if(matched=stream.match(idents)){if(matched=="def"){return"keyword"}
stream.eat(/[?!]/)}
state.tokenize.pop();return"def"}
function tokenFollowIdent(stream,state){if(stream.eatSpace()){return null}
if(stream.match(idents)){stream.eat(/[!?]/)}else{stream.match(operators)||stream.match(conditionalOperators)||stream.match(indexingOperators)}
state.tokenize.pop();return"def"}
function tokenFollowType(stream,state){if(stream.eatSpace()){return null}
stream.match(types);state.tokenize.pop();return"def"}
function tokenQuote(end,style,embed){return function(stream,state){var escaped=!1;while(stream.peek()){if(!escaped){if(stream.match("{%",!1)){state.tokenize.push(tokenMacro("%","%"));return style}
if(stream.match("{{",!1)){state.tokenize.push(tokenMacro("{","}"));return style}
if(embed&&stream.match("#{",!1)){state.tokenize.push(tokenNest("#{","}","meta"));return style}
var ch=stream.next();if(ch==end){state.tokenize.pop();return style}
escaped=ch=="\\"}else{stream.next();escaped=!1}}
return style}}
return{startState:function(){return{tokenize:[tokenBase],currentIndent:0,lastToken:null,blocks:[]}},token:function(stream,state){var style=state.tokenize[state.tokenize.length-1](stream,state);var token=stream.current();if(style&&style!="comment"){state.lastToken=token}
return style},indent:function(state,textAfter){textAfter=textAfter.replace(/^\s*(?:\{%)?\s*|\s*(?:%\})?\s*$/g,"");if(dedentKeywords.test(textAfter)||dedentPunctuals.test(textAfter)){return config.indentUnit*(state.currentIndent-1)}
return config.indentUnit*state.currentIndent},fold:"indent",electricInput:wordRegExp(dedentPunctualsArray.concat(dedentKeywordsArray),!0),lineComment:'#'}});CodeMirror.defineMIME("text/x-crystal","crystal")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("css",function(config,parserConfig){var inline=parserConfig.inline
if(!parserConfig.propertyKeywords)parserConfig=CodeMirror.resolveMode("text/css");var indentUnit=config.indentUnit,tokenHooks=parserConfig.tokenHooks,documentTypes=parserConfig.documentTypes||{},mediaTypes=parserConfig.mediaTypes||{},mediaFeatures=parserConfig.mediaFeatures||{},mediaValueKeywords=parserConfig.mediaValueKeywords||{},propertyKeywords=parserConfig.propertyKeywords||{},nonStandardPropertyKeywords=parserConfig.nonStandardPropertyKeywords||{},fontProperties=parserConfig.fontProperties||{},counterDescriptors=parserConfig.counterDescriptors||{},colorKeywords=parserConfig.colorKeywords||{},valueKeywords=parserConfig.valueKeywords||{},allowNested=parserConfig.allowNested,supportsAtComponent=parserConfig.supportsAtComponent===!0;var type,override;function ret(style,tp){type=tp;return style}
function tokenBase(stream,state){var ch=stream.next();if(tokenHooks[ch]){var result=tokenHooks[ch](stream,state);if(result!==!1)return result}
if(ch=="@"){stream.eatWhile(/[\w\\\-]/);return ret("def",stream.current())}else if(ch=="="||(ch=="~"||ch=="|")&&stream.eat("=")){return ret(null,"compare")}else if(ch=="\""||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}else if(ch=="#"){stream.eatWhile(/[\w\\\-]/);return ret("atom","hash")}else if(ch=="!"){stream.match(/^\s*\w*/);return ret("keyword","important")}else if(/\d/.test(ch)||ch=="."&&stream.eat(/\d/)){stream.eatWhile(/[\w.%]/);return ret("number","unit")}else if(ch==="-"){if(/[\d.]/.test(stream.peek())){stream.eatWhile(/[\w.%]/);return ret("number","unit")}else if(stream.match(/^-[\w\\\-]+/)){stream.eatWhile(/[\w\\\-]/);if(stream.match(/^\s*:/,!1))
return ret("variable-2","variable-definition");return ret("variable-2","variable")}else if(stream.match(/^\w+-/)){return ret("meta","meta")}}else if(/[,+>*\/]/.test(ch)){return ret(null,"select-op")}else if(ch=="."&&stream.match(/^-?[_a-z][_a-z0-9-]*/i)){return ret("qualifier","qualifier")}else if(/[:;{}\[\]\(\)]/.test(ch)){return ret(null,ch)}else if((ch=="u"&&stream.match(/rl(-prefix)?\(/))||(ch=="d"&&stream.match("omain("))||(ch=="r"&&stream.match("egexp("))){stream.backUp(1);state.tokenize=tokenParenthesized;return ret("property","word")}else if(/[\w\\\-]/.test(ch)){stream.eatWhile(/[\w\\\-]/);return ret("property","word")}else{return ret(null,null)}}
function tokenString(quote){return function(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){if(quote==")")stream.backUp(1);break}
escaped=!escaped&&ch=="\\"}
if(ch==quote||!escaped&&quote!=")")state.tokenize=null;return ret("string","string")}}
function tokenParenthesized(stream,state){stream.next();if(!stream.match(/\s*[\"\')]/,!1))
state.tokenize=tokenString(")");else state.tokenize=null;return ret(null,"(")}
function Context(type,indent,prev){this.type=type;this.indent=indent;this.prev=prev}
function pushContext(state,stream,type,indent){state.context=new Context(type,stream.indentation()+(indent===!1?0:indentUnit),state.context);return type}
function popContext(state){if(state.context.prev)
state.context=state.context.prev;return state.context.type}
function pass(type,stream,state){return states[state.context.type](type,stream,state)}
function popAndPass(type,stream,state,n){for(var i=n||1;i>0;i--)
state.context=state.context.prev;return pass(type,stream,state)}
function wordAsValue(stream){var word=stream.current().toLowerCase();if(valueKeywords.hasOwnProperty(word))
override="atom";else if(colorKeywords.hasOwnProperty(word))
override="keyword";else override="variable"}
var states={};states.top=function(type,stream,state){if(type=="{"){return pushContext(state,stream,"block")}else if(type=="}"&&state.context.prev){return popContext(state)}else if(supportsAtComponent&&/@component/.test(type)){return pushContext(state,stream,"atComponentBlock")}else if(/^@(-moz-)?document$/.test(type)){return pushContext(state,stream,"documentTypes")}else if(/^@(media|supports|(-moz-)?document|import)$/.test(type)){return pushContext(state,stream,"atBlock")}else if(/^@(font-face|counter-style)/.test(type)){state.stateArg=type;return"restricted_atBlock_before"}else if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(type)){return"keyframes"}else if(type&&type.charAt(0)=="@"){return pushContext(state,stream,"at")}else if(type=="hash"){override="builtin"}else if(type=="word"){override="tag"}else if(type=="variable-definition"){return"maybeprop"}else if(type=="interpolation"){return pushContext(state,stream,"interpolation")}else if(type==":"){return"pseudo"}else if(allowNested&&type=="("){return pushContext(state,stream,"parens")}
return state.context.type};states.block=function(type,stream,state){if(type=="word"){var word=stream.current().toLowerCase();if(propertyKeywords.hasOwnProperty(word)){override="property";return"maybeprop"}else if(nonStandardPropertyKeywords.hasOwnProperty(word)){override="string-2";return"maybeprop"}else if(allowNested){override=stream.match(/^\s*:(?:\s|$)/,!1)?"property":"tag";return"block"}else{override+=" error";return"maybeprop"}}else if(type=="meta"){return"block"}else if(!allowNested&&(type=="hash"||type=="qualifier")){override="error";return"block"}else{return states.top(type,stream,state)}};states.maybeprop=function(type,stream,state){if(type==":")return pushContext(state,stream,"prop");return pass(type,stream,state)};states.prop=function(type,stream,state){if(type==";")return popContext(state);if(type=="{"&&allowNested)return pushContext(state,stream,"propBlock");if(type=="}"||type=="{")return popAndPass(type,stream,state);if(type=="(")return pushContext(state,stream,"parens");if(type=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())){override+=" error"}else if(type=="word"){wordAsValue(stream)}else if(type=="interpolation"){return pushContext(state,stream,"interpolation")}
return"prop"};states.propBlock=function(type,_stream,state){if(type=="}")return popContext(state);if(type=="word"){override="property";return"maybeprop"}
return state.context.type};states.parens=function(type,stream,state){if(type=="{"||type=="}")return popAndPass(type,stream,state);if(type==")")return popContext(state);if(type=="(")return pushContext(state,stream,"parens");if(type=="interpolation")return pushContext(state,stream,"interpolation");if(type=="word")wordAsValue(stream);return"parens"};states.pseudo=function(type,stream,state){if(type=="word"){override="variable-3";return state.context.type}
return pass(type,stream,state)};states.documentTypes=function(type,stream,state){if(type=="word"&&documentTypes.hasOwnProperty(stream.current())){override="tag";return state.context.type}else{return states.atBlock(type,stream,state)}};states.atBlock=function(type,stream,state){if(type=="(")return pushContext(state,stream,"atBlock_parens");if(type=="}"||type==";")return popAndPass(type,stream,state);if(type=="{")return popContext(state)&&pushContext(state,stream,allowNested?"block":"top");if(type=="interpolation")return pushContext(state,stream,"interpolation");if(type=="word"){var word=stream.current().toLowerCase();if(word=="only"||word=="not"||word=="and"||word=="or")
override="keyword";else if(mediaTypes.hasOwnProperty(word))
override="attribute";else if(mediaFeatures.hasOwnProperty(word))
override="property";else if(mediaValueKeywords.hasOwnProperty(word))
override="keyword";else if(propertyKeywords.hasOwnProperty(word))
override="property";else if(nonStandardPropertyKeywords.hasOwnProperty(word))
override="string-2";else if(valueKeywords.hasOwnProperty(word))
override="atom";else if(colorKeywords.hasOwnProperty(word))
override="keyword";else override="error"}
return state.context.type};states.atComponentBlock=function(type,stream,state){if(type=="}")
return popAndPass(type,stream,state);if(type=="{")
return popContext(state)&&pushContext(state,stream,allowNested?"block":"top",!1);if(type=="word")
override="error";return state.context.type};states.atBlock_parens=function(type,stream,state){if(type==")")return popContext(state);if(type=="{"||type=="}")return popAndPass(type,stream,state,2);return states.atBlock(type,stream,state)};states.restricted_atBlock_before=function(type,stream,state){if(type=="{")
return pushContext(state,stream,"restricted_atBlock");if(type=="word"&&state.stateArg=="@counter-style"){override="variable";return"restricted_atBlock_before"}
return pass(type,stream,state)};states.restricted_atBlock=function(type,stream,state){if(type=="}"){state.stateArg=null;return popContext(state)}
if(type=="word"){if((state.stateArg=="@font-face"&&!fontProperties.hasOwnProperty(stream.current().toLowerCase()))||(state.stateArg=="@counter-style"&&!counterDescriptors.hasOwnProperty(stream.current().toLowerCase())))
override="error";else override="property";return"maybeprop"}
return"restricted_atBlock"};states.keyframes=function(type,stream,state){if(type=="word"){override="variable";return"keyframes"}
if(type=="{")return pushContext(state,stream,"top");return pass(type,stream,state)};states.at=function(type,stream,state){if(type==";")return popContext(state);if(type=="{"||type=="}")return popAndPass(type,stream,state);if(type=="word")override="tag";else if(type=="hash")override="builtin";return"at"};states.interpolation=function(type,stream,state){if(type=="}")return popContext(state);if(type=="{"||type==";")return popAndPass(type,stream,state);if(type=="word")override="variable";else if(type!="variable"&&type!="("&&type!=")")override="error";return"interpolation"};return{startState:function(base){return{tokenize:null,state:inline?"block":"top",stateArg:null,context:new Context(inline?"block":"top",base||0,null)}},token:function(stream,state){if(!state.tokenize&&stream.eatSpace())return null;var style=(state.tokenize||tokenBase)(stream,state);if(style&&typeof style=="object"){type=style[1];style=style[0]}
override=style;state.state=states[state.state](type,stream,state);return override},indent:function(state,textAfter){var cx=state.context,ch=textAfter&&textAfter.charAt(0);var indent=cx.indent;if(cx.type=="prop"&&(ch=="}"||ch==")"))cx=cx.prev;if(cx.prev){if(ch=="}"&&(cx.type=="block"||cx.type=="top"||cx.type=="interpolation"||cx.type=="restricted_atBlock")){cx=cx.prev;indent=cx.indent}else if(ch==")"&&(cx.type=="parens"||cx.type=="atBlock_parens")||ch=="{"&&(cx.type=="at"||cx.type=="atBlock")){indent=Math.max(0,cx.indent-indentUnit);cx=cx.prev}}
return indent},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});function keySet(array){var keys={};for(var i=0;i<array.length;++i){keys[array[i]]=!0}
return keys}
var documentTypes_=["domain","regexp","url","url-prefix"],documentTypes=keySet(documentTypes_);var mediaTypes_=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],mediaTypes=keySet(mediaTypes_);var mediaFeatures_=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],mediaFeatures=keySet(mediaFeatures_);var mediaValueKeywords_=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],mediaValueKeywords=keySet(mediaValueKeywords_);var propertyKeywords_=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],propertyKeywords=keySet(propertyKeywords_);var nonStandardPropertyKeywords_=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],nonStandardPropertyKeywords=keySet(nonStandardPropertyKeywords_);var fontProperties_=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],fontProperties=keySet(fontProperties_);var counterDescriptors_=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],counterDescriptors=keySet(counterDescriptors_);var colorKeywords_=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],colorKeywords=keySet(colorKeywords_);var valueKeywords_=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],valueKeywords=keySet(valueKeywords_);var allWords=documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_).concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_).concat(valueKeywords_);CodeMirror.registerHelper("hintWords","css",allWords);function tokenCComment(stream,state){var maybeEnd=!1,ch;while((ch=stream.next())!=null){if(maybeEnd&&ch=="/"){state.tokenize=null;break}
maybeEnd=(ch=="*")}
return["comment","comment"]}
CodeMirror.defineMIME("text/css",{documentTypes:documentTypes,mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,fontProperties:fontProperties,counterDescriptors:counterDescriptors,colorKeywords:colorKeywords,valueKeywords:valueKeywords,tokenHooks:{"/":function(stream,state){if(!stream.eat("*"))return!1;state.tokenize=tokenCComment;return tokenCComment(stream,state)}},name:"css"});CodeMirror.defineMIME("text/x-scss",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,allowNested:!0,tokenHooks:{"/":function(stream,state){if(stream.eat("/")){stream.skipToEnd();return["comment","comment"]}else if(stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state)}else{return["operator","operator"]}},":":function(stream){if(stream.match(/\s*\{/))
return[null,"{"];return!1},"$":function(stream){stream.match(/^[\w-]+/);if(stream.match(/^\s*:/,!1))
return["variable-2","variable-definition"];return["variable-2","variable"]},"#":function(stream){if(!stream.eat("{"))return!1;return[null,"interpolation"]}},name:"css",helperType:"scss"});CodeMirror.defineMIME("text/x-less",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,allowNested:!0,tokenHooks:{"/":function(stream,state){if(stream.eat("/")){stream.skipToEnd();return["comment","comment"]}else if(stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state)}else{return["operator","operator"]}},"@":function(stream){if(stream.eat("{"))return[null,"interpolation"];if(stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1))return!1;stream.eatWhile(/[\w\\\-]/);if(stream.match(/^\s*:/,!1))
return["variable-2","variable-definition"];return["variable-2","variable"]},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"});CodeMirror.defineMIME("text/x-gss",{documentTypes:documentTypes,mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,fontProperties:fontProperties,counterDescriptors:counterDescriptors,colorKeywords:colorKeywords,valueKeywords:valueKeywords,supportsAtComponent:!0,tokenHooks:{"/":function(stream,state){if(!stream.eat("*"))return!1;state.tokenize=tokenCComment;return tokenCComment(stream,state)}},name:"css",helperType:"gss"})})}catch(e){};try{(function(){"use strict";var mode=CodeMirror.getMode({indentUnit:2},"text/x-gss");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1),"gss")}
MT("atComponent","[def @component] {","[tag foo] {","  [property color]: [keyword black];","}","}")})()}catch(e){};try{(function(){"use strict";var mode=CodeMirror.getMode({indentUnit:2},"text/x-less");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1),"less")}
MT("variable","[variable-2 @base]: [atom #f04615];","[qualifier .class] {","  [property width]: [variable percentage]([number 0.5]); [comment // returns `50%`]","  [property color]: [variable saturate]([variable-2 @base], [number 5%]);","}");MT("amp","[qualifier .child], [qualifier .sibling] {","  [qualifier .parent] [atom &] {","    [property color]: [keyword black];","  }","  [atom &] + [atom &] {","    [property color]: [keyword red];","  }","}");MT("mixin","[qualifier .mixin] ([variable dark]; [variable-2 @color]) {","  [property color]: [atom darken]([variable-2 @color], [number 10%]);","}","[qualifier .mixin] ([variable light]; [variable-2 @color]) {","  [property color]: [atom lighten]([variable-2 @color], [number 10%]);","}","[qualifier .mixin] ([variable-2 @_]; [variable-2 @color]) {","  [property display]: [atom block];","}","[variable-2 @switch]: [variable light];","[qualifier .class] {","  [qualifier .mixin]([variable-2 @switch]; [atom #888]);","}");MT("nest","[qualifier .one] {","  [def @media] ([property width]: [number 400px]) {","    [property font-size]: [number 1.2em];","    [def @media] [attribute print] [keyword and] [property color] {","      [property color]: [keyword blue];","    }","  }","}");MT("interpolation",".@{[variable foo]} { [property font-weight]: [atom bold]; }")})()}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"text/x-scss");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1),"scss")}
MT('url_with_quotation',"[tag foo] { [property background]:[atom url]([string test.jpg]) }");MT('url_with_double_quotes',"[tag foo] { [property background]:[atom url]([string \"test.jpg\"]) }");MT('url_with_single_quotes',"[tag foo] { [property background]:[atom url]([string \'test.jpg\']) }");MT('string',"[def @import] [string \"compass/css3\"]");MT('important_keyword',"[tag foo] { [property background]:[atom url]([string \'test.jpg\']) [keyword !important] }");MT('variable',"[variable-2 $blue]:[atom #333]");MT('variable_as_attribute',"[tag foo] { [property color]:[variable-2 $blue] }");MT('numbers',"[tag foo] { [property padding]:[number 10px] [number 10] [number 10em] [number 8in] }");MT('number_percentage',"[tag foo] { [property width]:[number 80%] }");MT('selector',"[builtin #hello][qualifier .world]{}");MT('singleline_comment',"[comment // this is a comment]");MT('multiline_comment',"[comment /*foobar*/]");MT('attribute_with_hyphen',"[tag foo] { [property font-size]:[number 10px] }");MT('string_after_attribute',"[tag foo] { [property content]:[string \"::\"] }");MT('directives',"[def @include] [qualifier .mixin]");MT('basic_structure',"[tag p] { [property background]:[keyword red]; }");MT('nested_structure',"[tag p] { [tag a] { [property color]:[keyword red]; } }");MT('mixin',"[def @mixin] [tag table-base] {}");MT('number_without_semicolon',"[tag p] {[property width]:[number 12]}","[tag a] {[property color]:[keyword red];}");MT('atom_in_nested_block',"[tag p] { [tag a] { [property color]:[atom #000]; } }");MT('interpolation_in_property',"[tag foo] { #{[variable-2 $hello]}:[number 2]; }");MT('interpolation_in_selector',"[tag foo]#{[variable-2 $hello]} { [property color]:[atom #000]; }");MT('interpolation_error',"[tag foo]#{[variable foo]} { [property color]:[atom #000]; }");MT("divide_operator","[tag foo] { [property width]:[number 4] [operator /] [number 2] }");MT('nested_structure_with_id_selector',"[tag p] { [builtin #hello] { [property color]:[keyword red]; } }");MT('indent_mixin',"[def @mixin] [tag container] (","  [variable-2 $a]: [number 10],","  [variable-2 $b]: [number 10])","{}");MT('indent_nested',"[tag foo] {","  [tag bar] {","  }","}");MT('indent_parentheses',"[tag foo] {","  [property color]: [atom darken]([variable-2 $blue],","    [number 9%]);","}");MT('indent_vardef',"[variable-2 $name]:","  [string 'val'];","[tag tag] {","  [tag inner] {","    [property margin]: [number 3px];","  }","}")})()}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"css");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("atMediaUnknownType","[def @media] [attribute screen] [keyword and] [error foobarhello] { }");MT("atMediaUnknownProperty","[def @media] [attribute screen] [keyword and] ([error foobarhello]) { }");MT("atMediaMaxWidthNested","[def @media] [attribute screen] [keyword and] ([property max-width]: [number 25px]) { [tag foo] { } }");MT("atMediaFeatureValueKeyword","[def @media] ([property orientation]: [keyword landscape]) { }");MT("atMediaUnknownFeatureValueKeyword","[def @media] ([property orientation]: [error upsidedown]) { }");MT("tagSelector","[tag foo] { }");MT("classSelector","[qualifier .foo-bar_hello] { }");MT("idSelector","[builtin #foo] { [error #foo] }");MT("tagSelectorUnclosed","[tag foo] { [property margin]: [number 0] } [tag bar] { }");MT("tagStringNoQuotes","[tag foo] { [property font-family]: [variable hello] [variable world]; }");MT("tagStringDouble","[tag foo] { [property font-family]: [string \"hello world\"]; }");MT("tagStringSingle","[tag foo] { [property font-family]: [string 'hello world']; }");MT("tagColorKeyword","[tag foo] {","  [property color]: [keyword black];","  [property color]: [keyword navy];","  [property color]: [keyword yellow];","}");MT("tagColorHex3","[tag foo] { [property background]: [atom #fff]; }");MT("tagColorHex4","[tag foo] { [property background]: [atom #ffff]; }");MT("tagColorHex6","[tag foo] { [property background]: [atom #ffffff]; }");MT("tagColorHex8","[tag foo] { [property background]: [atom #ffffffff]; }");MT("tagColorHex5Invalid","[tag foo] { [property background]: [atom&error #fffff]; }");MT("tagColorHexInvalid","[tag foo] { [property background]: [atom&error #ffg]; }");MT("tagNegativeNumber","[tag foo] { [property margin]: [number -5px]; }");MT("tagPositiveNumber","[tag foo] { [property padding]: [number 5px]; }");MT("tagVendor","[tag foo] { [meta -foo-][property box-sizing]: [meta -foo-][atom border-box]; }");MT("tagBogusProperty","[tag foo] { [property&error barhelloworld]: [number 0]; }");MT("tagTwoProperties","[tag foo] { [property margin]: [number 0]; [property padding]: [number 0]; }");MT("tagTwoPropertiesURL","[tag foo] { [property background]: [atom url]([string //example.com/foo.png]); [property padding]: [number 0]; }");MT("indent_tagSelector","[tag strong], [tag em] {","  [property background]: [atom rgba](","    [number 255], [number 255], [number 0], [number .2]","  );","}");MT("indent_atMedia","[def @media] {","  [tag foo] {","    [property color]:","      [keyword yellow];","  }","}");MT("indent_comma","[tag foo] {","  [property font-family]: [variable verdana],","    [atom sans-serif];","}");MT("indent_parentheses","[tag foo]:[variable-3 before] {","  [property background]: [atom url](","[string     blahblah]","[string     etc]","[string   ]) [keyword !important];","}");MT("font_face","[def @font-face] {","  [property font-family]: [string 'myfont'];","  [error nonsense]: [string 'abc'];","  [property src]: [atom url]([string http://blah]),","    [atom url]([string http://foo]);","}");MT("empty_url","[def @import] [atom url]() [attribute screen];");MT("parens","[qualifier .foo] {","  [property background-image]: [variable fade]([atom #000], [number 20%]);","  [property border-image]: [atom linear-gradient](","    [atom to] [atom bottom],","    [variable fade]([atom #000], [number 20%]) [number 0%],","    [variable fade]([atom #000], [number 20%]) [number 100%]","  );","}");MT("css_variable",":[variable-3 root] {","  [variable-2 --main-color]: [atom #06c];","}","[tag h1][builtin #foo] {","  [property color]: [atom var]([variable-2 --main-color]);","}");MT("supports","[def @supports] ([keyword not] (([property text-align-last]: [atom justify]) [keyword or] ([meta -moz-][property text-align-last]: [atom justify])) {","  [property text-align-last]: [atom justify];","}");MT("document","[def @document] [tag url]([string http://blah]),","  [tag url-prefix]([string https://]),","  [tag domain]([string blah.com]),","  [tag regexp]([string \".*blah.+\"]) {","    [builtin #id] {","      [property background-color]: [keyword white];","    }","    [tag foo] {","      [property font-family]: [variable Verdana], [atom sans-serif];","    }","}");MT("document_url","[def @document] [tag url]([string http://blah]) { [qualifier .class] { } }");MT("document_urlPrefix","[def @document] [tag url-prefix]([string https://]) { [builtin #id] { } }");MT("document_domain","[def @document] [tag domain]([string blah.com]) { [tag foo] { } }");MT("document_regexp","[def @document] [tag regexp]([string \".*blah.+\"]) { [builtin #id] { } }");MT("counter-style","[def @counter-style] [variable binary] {","  [property system]: [atom numeric];","  [property symbols]: [number 0] [number 1];","  [property suffix]: [string \".\"];","  [property range]: [atom infinite];","  [property speak-as]: [atom numeric];","}");MT("counter-style-additive-symbols","[def @counter-style] [variable simple-roman] {","  [property system]: [atom additive];","  [property additive-symbols]: [number 10] [variable X], [number 5] [variable V], [number 1] [variable I];","  [property range]: [number 1] [number 49];","}");MT("counter-style-use","[tag ol][qualifier .roman] { [property list-style]: [variable simple-roman]; }");MT("counter-style-symbols","[tag ol] { [property list-style]: [atom symbols]([atom cyclic] [string \"*\"] [string \"\\2020\"] [string \"\\2021\"] [string \"\\A7\"]); }")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var wordRegexp=function(words){return new RegExp("^(?:"+words.join("|")+")$","i")};CodeMirror.defineMode("cypher",function(config){var tokenBase=function(stream){var ch=stream.next();if(ch==="\""||ch==="'"){stream.match(/.+?["']/);return"string"}
if(/[{}\(\),\.;\[\]]/.test(ch)){curPunc=ch;return"node"}else if(ch==="/"&&stream.eat("/")){stream.skipToEnd();return"comment"}else if(operatorChars.test(ch)){stream.eatWhile(operatorChars);return null}else{stream.eatWhile(/[_\w\d]/);if(stream.eat(":")){stream.eatWhile(/[\w\d_\-]/);return"atom"}
var word=stream.current();if(funcs.test(word))return"builtin";if(preds.test(word))return"def";if(keywords.test(word))return"keyword";return"variable"}};var pushContext=function(state,type,col){return state.context={prev:state.context,indent:state.indent,col:col,type:type}};var popContext=function(state){state.indent=state.context.indent;return state.context=state.context.prev};var indentUnit=config.indentUnit;var curPunc;var funcs=wordRegexp(["abs","acos","allShortestPaths","asin","atan","atan2","avg","ceil","coalesce","collect","cos","cot","count","degrees","e","endnode","exp","extract","filter","floor","haversin","head","id","keys","labels","last","left","length","log","log10","lower","ltrim","max","min","node","nodes","percentileCont","percentileDisc","pi","radians","rand","range","reduce","rel","relationship","relationships","replace","reverse","right","round","rtrim","shortestPath","sign","sin","size","split","sqrt","startnode","stdev","stdevp","str","substring","sum","tail","tan","timestamp","toFloat","toInt","toString","trim","type","upper"]);var preds=wordRegexp(["all","and","any","contains","exists","has","in","none","not","or","single","xor"]);var keywords=wordRegexp(["as","asc","ascending","assert","by","case","commit","constraint","create","csv","cypher","delete","desc","descending","detach","distinct","drop","else","end","ends","explain","false","fieldterminator","foreach","from","headers","in","index","is","join","limit","load","match","merge","null","on","optional","order","periodic","profile","remove","return","scan","set","skip","start","starts","then","true","union","unique","unwind","using","when","where","with","call","yield"]);var operatorChars=/[*+\-<>=&|~%^]/;return{startState:function(){return{tokenize:tokenBase,context:null,indent:0,col:0}},token:function(stream,state){if(stream.sol()){if(state.context&&(state.context.align==null)){state.context.align=!1}
state.indent=stream.indentation()}
if(stream.eatSpace()){return null}
var style=state.tokenize(stream,state);if(style!=="comment"&&state.context&&(state.context.align==null)&&state.context.type!=="pattern"){state.context.align=!0}
if(curPunc==="("){pushContext(state,")",stream.column())}else if(curPunc==="["){pushContext(state,"]",stream.column())}else if(curPunc==="{"){pushContext(state,"}",stream.column())}else if(/[\]\}\)]/.test(curPunc)){while(state.context&&state.context.type==="pattern"){popContext(state)}
if(state.context&&curPunc===state.context.type){popContext(state)}}else if(curPunc==="."&&state.context&&state.context.type==="pattern"){popContext(state)}else if(/atom|string|variable/.test(style)&&state.context){if(/[\}\]]/.test(state.context.type)){pushContext(state,"pattern",stream.column())}else if(state.context.type==="pattern"&&!state.context.align){state.context.align=!0;state.context.col=stream.column()}}
return style},indent:function(state,textAfter){var firstChar=textAfter&&textAfter.charAt(0);var context=state.context;if(/[\]\}]/.test(firstChar)){while(context&&context.type==="pattern"){context=context.prev}}
var closing=context&&firstChar===context.type;if(!context)return 0;if(context.type==="keywords")return CodeMirror.commands.newlineAndIndent;if(context.align)return context.col+(closing?0:1);return context.indent+(closing?0:indentUnit)}}});CodeMirror.modeExtensions.cypher={autoFormatLineBreaks:function(text){var i,lines,reProcessedPortion;var lines=text.split("\n");var reProcessedPortion=/\s+\b(return|where|order by|match|with|skip|limit|create|delete|set)\b\s/g;for(var i=0;i<lines.length;i++)
lines[i]=lines[i].replace(reProcessedPortion," \n$1 ").trim();return lines.join("\n")}};CodeMirror.defineMIME("application/x-cypher-query","cypher")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("d",function(config,parserConfig){var indentUnit=config.indentUnit,statementIndentUnit=parserConfig.statementIndentUnit||indentUnit,keywords=parserConfig.keywords||{},builtin=parserConfig.builtin||{},blockKeywords=parserConfig.blockKeywords||{},atoms=parserConfig.atoms||{},hooks=parserConfig.hooks||{},multiLineStrings=parserConfig.multiLineStrings;var isOperatorChar=/[+\-*&%=<>!?|\/]/;var curPunc;function tokenBase(stream,state){var ch=stream.next();if(hooks[ch]){var result=hooks[ch](stream,state);if(result!==!1)return result}
if(ch=='"'||ch=="'"||ch=="`"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(/[\[\]{}\(\),;\:\.]/.test(ch)){curPunc=ch;return null}
if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}
if(ch=="/"){if(stream.eat("+")){state.tokenize=tokenComment;return tokenNestedComment(stream,state)}
if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}
if(stream.eat("/")){stream.skipToEnd();return"comment"}}
if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}
stream.eatWhile(/[\w\$_\xa1-\uffff]/);var cur=stream.current();if(keywords.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"keyword"}
if(builtin.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"builtin"}
if(atoms.propertyIsEnumerable(cur))return"atom";return"variable"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!(escaped||multiLineStrings))
state.tokenize=null;return"string"}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=null;break}
maybeEnd=(ch=="*")}
return"comment"}
function tokenNestedComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=null;break}
maybeEnd=(ch=="+")}
return"comment"}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}
function pushContext(state,col,type){var indent=state.indented;if(state.context&&state.context.type=="statement")
indent=state.context.indented;return state.context=new Context(indent,col,type,null,state.context)}
function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}")
state.indented=state.context.indented;return state.context=state.context.prev}
return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",!1),indented:0,startOfLine:!0}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0}
if(stream.eatSpace())return null;curPunc=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment"||style=="meta")return style;if(ctx.align==null)ctx.align=!0;if((curPunc==";"||curPunc==":"||curPunc==",")&&ctx.type=="statement")popContext(state);else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state);}else if(curPunc==ctx.type)popContext(state);else if(((ctx.type=="}"||ctx.type=="top")&&curPunc!=';')||(ctx.type=="statement"&&curPunc=="newstatement"))
pushContext(state,stream.column(),"statement");state.startOfLine=!1;return style},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&state.tokenize!=null)return CodeMirror.Pass;var ctx=state.context,firstChar=textAfter&&textAfter.charAt(0);if(ctx.type=="statement"&&firstChar=="}")ctx=ctx.prev;var closing=firstChar==ctx.type;if(ctx.type=="statement")return ctx.indented+(firstChar=="{"?0:statementIndentUnit);else if(ctx.align)return ctx.column+(closing?0:1);else return ctx.indented+(closing?0:indentUnit)},electricChars:"{}"}});function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var blockKeywords="body catch class do else enum for foreach foreach_reverse if in interface mixin "+"out scope struct switch try union unittest version while with";CodeMirror.defineMIME("text/x-d",{name:"d",keywords:words("abstract alias align asm assert auto break case cast cdouble cent cfloat const continue "+"debug default delegate delete deprecated export extern final finally function goto immutable "+"import inout invariant is lazy macro module new nothrow override package pragma private "+"protected public pure ref return shared short static super synchronized template this "+"throw typedef typeid typeof volatile __FILE__ __LINE__ __gshared __traits __vector __parameters "+blockKeywords),blockKeywords:words(blockKeywords),builtin:words("bool byte char creal dchar double float idouble ifloat int ireal long real short ubyte "+"ucent uint ulong ushort wchar wstring void size_t sizediff_t"),atoms:words("exit failure success true false null"),hooks:{"@":function(stream,_state){stream.eatWhile(/[\w\$_]/);return"meta"}}})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../clike/clike"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../clike/clike"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var keywords=("this super static final const abstract class extends external factory "+"implements get native operator set typedef with enum throw rethrow "+"assert break case continue default in return new deferred async await "+"try catch finally do else for if switch while import library export "+"part of show hide is as").split(" ");var blockKeywords="try catch finally do else for if switch while".split(" ");var atoms="true false null".split(" ");var builtins="void bool num int double dynamic var String".split(" ");function set(words){var obj={};for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
function pushInterpolationStack(state){(state.interpolationStack||(state.interpolationStack=[])).push(state.tokenize)}
function popInterpolationStack(state){return(state.interpolationStack||(state.interpolationStack=[])).pop()}
function sizeInterpolationStack(state){return state.interpolationStack?state.interpolationStack.length:0}
CodeMirror.defineMIME("application/dart",{name:"clike",keywords:set(keywords),blockKeywords:set(blockKeywords),builtin:set(builtins),atoms:set(atoms),hooks:{"@":function(stream){stream.eatWhile(/[\w\$_\.]/);return"meta"},"'":function(stream,state){return tokenString("'",stream,state,!1)},"\"":function(stream,state){return tokenString("\"",stream,state,!1)},"r":function(stream,state){var peek=stream.peek();if(peek=="'"||peek=="\""){return tokenString(stream.next(),stream,state,!0)}
return!1},"}":function(_stream,state){if(sizeInterpolationStack(state)>0){state.tokenize=popInterpolationStack(state);return null}
return!1},"/":function(stream,state){if(!stream.eat("*"))return!1
state.tokenize=tokenNestedComment(1)
return state.tokenize(stream,state)}}});function tokenString(quote,stream,state,raw){var tripleQuoted=!1;if(stream.eat(quote)){if(stream.eat(quote))tripleQuoted=!0;else return"string"}
function tokenStringHelper(stream,state){var escaped=!1;while(!stream.eol()){if(!raw&&!escaped&&stream.peek()=="$"){pushInterpolationStack(state);state.tokenize=tokenInterpolation;return"string"}
var next=stream.next();if(next==quote&&!escaped&&(!tripleQuoted||stream.match(quote+quote))){state.tokenize=null;break}
escaped=!raw&&!escaped&&next=="\\"}
return"string"}
state.tokenize=tokenStringHelper;return tokenStringHelper(stream,state)}
function tokenInterpolation(stream,state){stream.eat("$");if(stream.eat("{")){state.tokenize=null}else{state.tokenize=tokenInterpolationIdentifier}
return null}
function tokenInterpolationIdentifier(stream,state){stream.eatWhile(/[\w_]/);state.tokenize=popInterpolationStack(state);return"variable"}
function tokenNestedComment(depth){return function(stream,state){var ch
while(ch=stream.next()){if(ch=="*"&&stream.eat("/")){if(depth==1){state.tokenize=null
break}else{state.tokenize=tokenNestedComment(depth-1)
return state.tokenize(stream,state)}}else if(ch=="/"&&stream.eat("*")){state.tokenize=tokenNestedComment(depth+1)
return state.tokenize(stream,state)}}
return"comment"}}
CodeMirror.registerHelper("hintWords","application/dart",keywords.concat(atoms).concat(builtins));CodeMirror.defineMode("dart",function(conf){return CodeMirror.getMode(conf,"application/dart")},"clike")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("diff",function(){var TOKEN_NAMES={'+':'positive','-':'negative','@':'meta'};return{token:function(stream){var tw_pos=stream.string.search(/[\t ]+?$/);if(!stream.sol()||tw_pos===0){stream.skipToEnd();return("error "+(TOKEN_NAMES[stream.string.charAt(0)]||'')).replace(/ $/,'')}
var token_name=TOKEN_NAMES[stream.peek()]||stream.skipToEnd();if(tw_pos===-1){stream.skipToEnd()}else{stream.pos=tw_pos}
return token_name}}});CodeMirror.defineMIME("text/x-diff","diff")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/overlay"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/overlay"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("django:inner",function(){var keywords=["block","endblock","for","endfor","true","false","filter","endfilter","loop","none","self","super","if","elif","endif","as","else","import","with","endwith","without","context","ifequal","endifequal","ifnotequal","endifnotequal","extends","include","load","comment","endcomment","empty","url","static","trans","blocktrans","endblocktrans","now","regroup","lorem","ifchanged","endifchanged","firstof","debug","cycle","csrf_token","autoescape","endautoescape","spaceless","endspaceless","ssi","templatetag","verbatim","endverbatim","widthratio"],filters=["add","addslashes","capfirst","center","cut","date","default","default_if_none","dictsort","dictsortreversed","divisibleby","escape","escapejs","filesizeformat","first","floatformat","force_escape","get_digit","iriencode","join","last","length","length_is","linebreaks","linebreaksbr","linenumbers","ljust","lower","make_list","phone2numeric","pluralize","pprint","random","removetags","rjust","safe","safeseq","slice","slugify","stringformat","striptags","time","timesince","timeuntil","title","truncatechars","truncatechars_html","truncatewords","truncatewords_html","unordered_list","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap","yesno"],operators=["==","!=","<",">","<=",">="],wordOperators=["in","not","or","and"];keywords=new RegExp("^\\b("+keywords.join("|")+")\\b");filters=new RegExp("^\\b("+filters.join("|")+")\\b");operators=new RegExp("^\\b("+operators.join("|")+")\\b");wordOperators=new RegExp("^\\b("+wordOperators.join("|")+")\\b");function tokenBase(stream,state){if(stream.match("{{")){state.tokenize=inVariable;return"tag"}else if(stream.match("{%")){state.tokenize=inTag;return"tag"}else if(stream.match("{#")){state.tokenize=inComment;return"comment"}
while(stream.next()!=null&&!stream.match(/\{[{%#]/,!1)){}
return null}
function inString(delimiter,previousTokenizer){return function(stream,state){if(!state.escapeNext&&stream.eat(delimiter)){state.tokenize=previousTokenizer}else{if(state.escapeNext){state.escapeNext=!1}
var ch=stream.next();if(ch=="\\"){state.escapeNext=!0}}
return"string"}}
function inVariable(stream,state){if(state.waitDot){state.waitDot=!1;if(stream.peek()!="."){return"null"}
if(stream.match(/\.\W+/)){return"error"}else if(stream.eat(".")){state.waitProperty=!0;return"null"}else{throw Error("Unexpected error while waiting for property.")}}
if(state.waitPipe){state.waitPipe=!1;if(stream.peek()!="|"){return"null"}
if(stream.match(/\.\W+/)){return"error"}else if(stream.eat("|")){state.waitFilter=!0;return"null"}else{throw Error("Unexpected error while waiting for filter.")}}
if(state.waitProperty){state.waitProperty=!1;if(stream.match(/\b(\w+)\b/)){state.waitDot=!0;state.waitPipe=!0;return"property"}}
if(state.waitFilter){state.waitFilter=!1;if(stream.match(filters)){return"variable-2"}}
if(stream.eatSpace()){state.waitProperty=!1;return"null"}
if(stream.match(/\b\d+(\.\d+)?\b/)){return"number"}
if(stream.match("'")){state.tokenize=inString("'",state.tokenize);return"string"}else if(stream.match('"')){state.tokenize=inString('"',state.tokenize);return"string"}
if(stream.match(/\b(\w+)\b/)&&!state.foundVariable){state.waitDot=!0;state.waitPipe=!0;return"variable"}
if(stream.match("}}")){state.waitProperty=null;state.waitFilter=null;state.waitDot=null;state.waitPipe=null;state.tokenize=tokenBase;return"tag"}
stream.next();return"null"}
function inTag(stream,state){if(state.waitDot){state.waitDot=!1;if(stream.peek()!="."){return"null"}
if(stream.match(/\.\W+/)){return"error"}else if(stream.eat(".")){state.waitProperty=!0;return"null"}else{throw Error("Unexpected error while waiting for property.")}}
if(state.waitPipe){state.waitPipe=!1;if(stream.peek()!="|"){return"null"}
if(stream.match(/\.\W+/)){return"error"}else if(stream.eat("|")){state.waitFilter=!0;return"null"}else{throw Error("Unexpected error while waiting for filter.")}}
if(state.waitProperty){state.waitProperty=!1;if(stream.match(/\b(\w+)\b/)){state.waitDot=!0;state.waitPipe=!0;return"property"}}
if(state.waitFilter){state.waitFilter=!1;if(stream.match(filters)){return"variable-2"}}
if(stream.eatSpace()){state.waitProperty=!1;return"null"}
if(stream.match(/\b\d+(\.\d+)?\b/)){return"number"}
if(stream.match("'")){state.tokenize=inString("'",state.tokenize);return"string"}else if(stream.match('"')){state.tokenize=inString('"',state.tokenize);return"string"}
if(stream.match(operators)){return"operator"}
if(stream.match(wordOperators)){return"keyword"}
var keywordMatch=stream.match(keywords);if(keywordMatch){if(keywordMatch[0]=="comment"){state.blockCommentTag=!0}
return"keyword"}
if(stream.match(/\b(\w+)\b/)){state.waitDot=!0;state.waitPipe=!0;return"variable"}
if(stream.match("%}")){state.waitProperty=null;state.waitFilter=null;state.waitDot=null;state.waitPipe=null;if(state.blockCommentTag){state.blockCommentTag=!1;state.tokenize=inBlockComment}else{state.tokenize=tokenBase}
return"tag"}
stream.next();return"null"}
function inComment(stream,state){if(stream.match(/^.*?#\}/))state.tokenize=tokenBase
else stream.skipToEnd()
return"comment"}
function inBlockComment(stream,state){if(stream.match(/\{%\s*endcomment\s*%\}/,!1)){state.tokenize=inTag;stream.match("{%");return"tag"}else{stream.next();return"comment"}}
return{startState:function(){return{tokenize:tokenBase}},token:function(stream,state){return state.tokenize(stream,state)},blockCommentStart:"{% comment %}",blockCommentEnd:"{% endcomment %}"}});CodeMirror.defineMode("django",function(config){var htmlBase=CodeMirror.getMode(config,"text/html");var djangoInner=CodeMirror.getMode(config,"django:inner");return CodeMirror.overlayMode(htmlBase,djangoInner)});CodeMirror.defineMIME("text/x-django","django")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../../addon/mode/simple"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../../addon/mode/simple"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var instructions=["from","maintainer","run","cmd","expose","env","add","copy","entrypoint","volume","user","workdir","onbuild"],instructionRegex="("+instructions.join('|')+")",instructionOnlyLine=new RegExp(instructionRegex+"\\s*$","i"),instructionWithArguments=new RegExp(instructionRegex+"(\\s+)","i");CodeMirror.defineSimpleMode("dockerfile",{start:[{regex:/#.*$/,token:"comment"},{regex:instructionOnlyLine,token:"variable-2"},{regex:instructionWithArguments,token:["variable-2",null],next:"arguments"},{regex:/./,token:null}],arguments:[{regex:/#.*$/,token:"error",next:"start"},{regex:/[^#]+\\$/,token:null},{regex:/[^#]+/,token:null,next:"start"},{regex:/$/,token:null,next:"start"},{token:null,next:"start"}],meta:{lineComment:"#"}});CodeMirror.defineMIME("text/x-dockerfile","dockerfile")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("dtd",function(config){var indentUnit=config.indentUnit,type;function ret(style,tp){type=tp;return style}
function tokenBase(stream,state){var ch=stream.next();if(ch=="<"&&stream.eat("!")){if(stream.eatWhile(/[\-]/)){state.tokenize=tokenSGMLComment;return tokenSGMLComment(stream,state)}else if(stream.eatWhile(/[\w]/))return ret("keyword","doindent")}else if(ch=="<"&&stream.eat("?")){state.tokenize=inBlock("meta","?>");return ret("meta",ch)}else if(ch=="#"&&stream.eatWhile(/[\w]/))return ret("atom","tag");else if(ch=="|")return ret("keyword","seperator");else if(ch.match(/[\(\)\[\]\-\.,\+\?>]/))return ret(null,ch);else if(ch.match(/[\[\]]/))return ret("rule",ch);else if(ch=="\""||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}else if(stream.eatWhile(/[a-zA-Z\?\+\d]/)){var sc=stream.current();if(sc.substr(sc.length-1,sc.length).match(/\?|\+/)!==null)stream.backUp(1);return ret("tag","tag")}else if(ch=="%"||ch=="*")return ret("number","number");else{stream.eatWhile(/[\w\\\-_%.{,]/);return ret(null,null)}}
function tokenSGMLComment(stream,state){var dashes=0,ch;while((ch=stream.next())!=null){if(dashes>=2&&ch==">"){state.tokenize=tokenBase;break}
dashes=(ch=="-")?dashes+1:0}
return ret("comment","comment")}
function tokenString(quote){return function(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){state.tokenize=tokenBase;break}
escaped=!escaped&&ch=="\\"}
return ret("string","tag")}}
function inBlock(style,terminator){return function(stream,state){while(!stream.eol()){if(stream.match(terminator)){state.tokenize=tokenBase;break}
stream.next()}
return style}}
return{startState:function(base){return{tokenize:tokenBase,baseIndent:base||0,stack:[]}},token:function(stream,state){if(stream.eatSpace())return null;var style=state.tokenize(stream,state);var context=state.stack[state.stack.length-1];if(stream.current()=="["||type==="doindent"||type=="[")state.stack.push("rule");else if(type==="endtag")state.stack[state.stack.length-1]="endtag";else if(stream.current()=="]"||type=="]"||(type==">"&&context=="rule"))state.stack.pop();else if(type=="[")state.stack.push("[");return style},indent:function(state,textAfter){var n=state.stack.length;if(textAfter.match(/\]\s+|\]/))n=n-1;else if(textAfter.substr(textAfter.length-1,textAfter.length)===">"){if(textAfter.substr(0,1)==="<"){}else if(type=="doindent"&&textAfter.length>1){}else if(type=="doindent")n--;else if(type==">"&&textAfter.length>1){}else if(type=="tag"&&textAfter!==">"){}else if(type=="tag"&&state.stack[state.stack.length-1]=="rule")n--;else if(type=="tag")n++;else if(textAfter===">"&&state.stack[state.stack.length-1]=="rule"&&type===">")n--;else if(textAfter===">"&&state.stack[state.stack.length-1]=="rule"){}else if(textAfter.substr(0,1)!=="<"&&textAfter.substr(0,1)===">")n=n-1;else if(textAfter===">"){}else n=n-1;if(type==null||type=="]")n--}
return state.baseIndent+n*indentUnit},electricChars:"]>"}});CodeMirror.defineMIME("application/xml-dtd","dtd")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("dylan",function(_config){var words={unnamedDefinition:["interface"],namedDefinition:["module","library","macro","C-struct","C-union","C-function","C-callable-wrapper"],typeParameterizedDefinition:["class","C-subtype","C-mapped-subtype"],otherParameterizedDefinition:["method","function","C-variable","C-address"],constantSimpleDefinition:["constant"],variableSimpleDefinition:["variable"],otherSimpleDefinition:["generic","domain","C-pointer-type","table"],statement:["if","block","begin","method","case","for","select","when","unless","until","while","iterate","profiling","dynamic-bind"],separator:["finally","exception","cleanup","else","elseif","afterwards"],other:["above","below","by","from","handler","in","instance","let","local","otherwise","slot","subclass","then","to","keyed-by","virtual"],signalingCalls:["signal","error","cerror","break","check-type","abort"]};words.otherDefinition=words.unnamedDefinition.concat(words.namedDefinition).concat(words.otherParameterizedDefinition);words.definition=words.typeParameterizedDefinition.concat(words.otherDefinition);words.parameterizedDefinition=words.typeParameterizedDefinition.concat(words.otherParameterizedDefinition);words.simpleDefinition=words.constantSimpleDefinition.concat(words.variableSimpleDefinition).concat(words.otherSimpleDefinition);words.keyword=words.statement.concat(words.separator).concat(words.other);var symbolPattern="[-_a-zA-Z?!*@<>$%]+";var symbol=new RegExp("^"+symbolPattern);var patterns={symbolKeyword:symbolPattern+":",symbolClass:"<"+symbolPattern+">",symbolGlobal:"\\*"+symbolPattern+"\\*",symbolConstant:"\\$"+symbolPattern};var patternStyles={symbolKeyword:"atom",symbolClass:"tag",symbolGlobal:"variable-2",symbolConstant:"variable-3"};for(var patternName in patterns)
if(patterns.hasOwnProperty(patternName))
patterns[patternName]=new RegExp("^"+patterns[patternName]);patterns.keyword=[/^with(?:out)?-[-_a-zA-Z?!*@<>$%]+/];var styles={};styles.keyword="keyword";styles.definition="def";styles.simpleDefinition="def";styles.signalingCalls="builtin";var wordLookup={};var styleLookup={};["keyword","definition","simpleDefinition","signalingCalls"].forEach(function(type){words[type].forEach(function(word){wordLookup[word]=type;styleLookup[word]=styles[type]})});function chain(stream,state,f){state.tokenize=f;return f(stream,state)}
function tokenBase(stream,state){var ch=stream.peek();if(ch=="'"||ch=='"'){stream.next();return chain(stream,state,tokenString(ch,"string"))}else if(ch=="/"){stream.next();if(stream.eat("*")){return chain(stream,state,tokenComment)}else if(stream.eat("/")){stream.skipToEnd();return"comment"}
stream.backUp(1)}else if(/[+\-\d\.]/.test(ch)){if(stream.match(/^[+-]?[0-9]*\.[0-9]*([esdx][+-]?[0-9]+)?/i)||stream.match(/^[+-]?[0-9]+([esdx][+-]?[0-9]+)/i)||stream.match(/^[+-]?\d+/)){return"number"}}else if(ch=="#"){stream.next();ch=stream.peek();if(ch=='"'){stream.next();return chain(stream,state,tokenString('"',"string"))}else if(ch=="b"){stream.next();stream.eatWhile(/[01]/);return"number"}else if(ch=="x"){stream.next();stream.eatWhile(/[\da-f]/i);return"number"}else if(ch=="o"){stream.next();stream.eatWhile(/[0-7]/);return"number"}else if(ch=='#'){stream.next();return"punctuation"}else if((ch=='[')||(ch=='(')){stream.next();return"bracket"}else if(stream.match(/f|t|all-keys|include|key|next|rest/i)){return"atom"}else{stream.eatWhile(/[-a-zA-Z]/);return"error"}}else if(ch=="~"){stream.next();ch=stream.peek();if(ch=="="){stream.next();ch=stream.peek();if(ch=="="){stream.next();return"operator"}
return"operator"}
return"operator"}else if(ch==":"){stream.next();ch=stream.peek();if(ch=="="){stream.next();return"operator"}else if(ch==":"){stream.next();return"punctuation"}}else if("[](){}".indexOf(ch)!=-1){stream.next();return"bracket"}else if(".,".indexOf(ch)!=-1){stream.next();return"punctuation"}else if(stream.match("end")){return"keyword"}
for(var name in patterns){if(patterns.hasOwnProperty(name)){var pattern=patterns[name];if((pattern instanceof Array&&pattern.some(function(p){return stream.match(p)}))||stream.match(pattern))
return patternStyles[name]}}
if(/[+\-*\/^=<>&|]/.test(ch)){stream.next();return"operator"}
if(stream.match("define")){return"def"}else{stream.eatWhile(/[\w\-]/);if(wordLookup[stream.current()]){return styleLookup[stream.current()]}else if(stream.current().match(symbol)){return"variable"}else{stream.next();return"variable-2"}}}
function tokenComment(stream,state){var maybeEnd=!1,maybeNested=!1,nestedCount=0,ch;while((ch=stream.next())){if(ch=="/"&&maybeEnd){if(nestedCount>0){nestedCount--}else{state.tokenize=tokenBase;break}}else if(ch=="*"&&maybeNested){nestedCount++}
maybeEnd=(ch=="*");maybeNested=(ch=="/")}
return"comment"}
function tokenString(quote,style){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!escaped){state.tokenize=tokenBase}
return style}}
return{startState:function(){return{tokenize:tokenBase,currentIndent:0}},token:function(stream,state){if(stream.eatSpace())
return null;var style=state.tokenize(stream,state);return style},blockCommentStart:"/*",blockCommentEnd:"*/"}});CodeMirror.defineMIME("text/x-dylan","dylan")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"dylan");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT('comments','[comment // This is a line comment]','[comment /* This is a block comment */]','[comment /* This is a multi]','[comment line comment]','[comment */]','[comment /* And this is a /*]','[comment /* nested */ comment */]');MT('unary_operators','[operator -][variable a]','[operator -] [variable a]','[operator ~][variable a]','[operator ~] [variable a]');MT('binary_operators','[variable a] [operator +] [variable b]','[variable a] [operator -] [variable b]','[variable a] [operator *] [variable b]','[variable a] [operator /] [variable b]','[variable a] [operator ^] [variable b]','[variable a] [operator =] [variable b]','[variable a] [operator ==] [variable b]','[variable a] [operator ~=] [variable b]','[variable a] [operator ~==] [variable b]','[variable a] [operator <] [variable b]','[variable a] [operator <=] [variable b]','[variable a] [operator >] [variable b]','[variable a] [operator >=] [variable b]','[variable a] [operator &] [variable b]','[variable a] [operator |] [variable b]','[variable a] [operator :=] [variable b]');MT('integers','[number 1]','[number 123]','[number -123]','[number +456]','[number #b010]','[number #o073]','[number #xabcDEF123]');MT('floats','[number .3]','[number -1.]','[number -2.335]','[number +3.78d1]','[number 3.78s-1]','[number -3.32e+5]');MT('characters_and_strings',"[string 'a']","[string '\\\\'']",'[string ""]','[string "a"]','[string "abc def"]','[string "More escaped characters: \\\\\\\\ \\\\a \\\\b \\\\e \\\\f \\\\n \\\\r \\\\t \\\\0 ..."]');MT('brackets','[bracket #[[]]]','[bracket #()]','[bracket #(][number 1][bracket )]','[bracket [[][number 1][punctuation ,] [number 3][bracket ]]]','[bracket ()]','[bracket {}]','[keyword if] [bracket (][variable foo][bracket )]','[bracket (][number 1][bracket )]','[bracket [[][number 1][bracket ]]]');MT('hash_words','[punctuation ##]','[atom #f]','[atom #F]','[atom #t]','[atom #T]','[atom #all-keys]','[atom #include]','[atom #key]','[atom #next]','[atom #rest]','[string #"foo"]','[error #invalid]')})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("ebnf",function(config){var commentType={slash:0,parenthesis:1};var stateType={comment:0,_string:1,characterClass:2};var bracesMode=null;if(config.bracesMode)
bracesMode=CodeMirror.getMode(config,config.bracesMode);return{startState:function(){return{stringType:null,commentType:null,braced:0,lhs:!0,localState:null,stack:[],inDefinition:!1}},token:function(stream,state){if(!stream)return;if(state.stack.length===0){if((stream.peek()=='"')||(stream.peek()=="'")){state.stringType=stream.peek();stream.next();state.stack.unshift(stateType._string)}else if(stream.match(/^\/\*/)){state.stack.unshift(stateType.comment);state.commentType=commentType.slash}else if(stream.match(/^\(\*/)){state.stack.unshift(stateType.comment);state.commentType=commentType.parenthesis}}
switch(state.stack[0]){case stateType._string:while(state.stack[0]===stateType._string&&!stream.eol()){if(stream.peek()===state.stringType){stream.next();state.stack.shift()}else if(stream.peek()==="\\"){stream.next();stream.next()}else{stream.match(/^.[^\\\"\']*/)}}
return state.lhs?"property string":"string";case stateType.comment:while(state.stack[0]===stateType.comment&&!stream.eol()){if(state.commentType===commentType.slash&&stream.match(/\*\//)){state.stack.shift();state.commentType=null}else if(state.commentType===commentType.parenthesis&&stream.match(/\*\)/)){state.stack.shift();state.commentType=null}else{stream.match(/^.[^\*]*/)}}
return"comment";case stateType.characterClass:while(state.stack[0]===stateType.characterClass&&!stream.eol()){if(!(stream.match(/^[^\]\\]+/)||stream.match(/^\\./))){state.stack.shift()}}
return"operator"}
var peek=stream.peek();if(bracesMode!==null&&(state.braced||peek==="{")){if(state.localState===null)
state.localState=CodeMirror.startState(bracesMode);var token=bracesMode.token(stream,state.localState),text=stream.current();if(!token){for(var i=0;i<text.length;i++){if(text[i]==="{"){if(state.braced===0){token="matchingbracket"}
state.braced++}else if(text[i]==="}"){state.braced--;if(state.braced===0){token="matchingbracket"}}}}
return token}
switch(peek){case "[":stream.next();state.stack.unshift(stateType.characterClass);return"bracket";case ":":case "|":case ";":stream.next();return"operator";case "%":if(stream.match("%%")){return"header"}else if(stream.match(/[%][A-Za-z]+/)){return"keyword"}else if(stream.match(/[%][}]/)){return"matchingbracket"}
break;case "/":if(stream.match(/[\/][A-Za-z]+/)){return"keyword"}
case "\\":if(stream.match(/[\][a-z]+/)){return"string-2"}
case ".":if(stream.match(".")){return"atom"}
case "*":case "-":case "+":case "^":if(stream.match(peek)){return"atom"}
case "$":if(stream.match("$$")){return"builtin"}else if(stream.match(/[$][0-9]+/)){return"variable-3"}
case "<":if(stream.match(/<<[a-zA-Z_]+>>/)){return"builtin"}}
if(stream.match(/^\/\//)){stream.skipToEnd();return"comment"}else if(stream.match(/return/)){return"operator"}else if(stream.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)){if(stream.match(/(?=[\(.])/)){return"variable"}else if(stream.match(/(?=[\s\n]*[:=])/)){return"def"}
return"variable-2"}else if(["[","]","(",")"].indexOf(stream.peek())!=-1){stream.next();return"bracket"}else if(!stream.eatSpace()){stream.next()}
return null}}});CodeMirror.defineMIME("text/x-ebnf","ebnf")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("ecl",function(config){function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
function metaHook(stream,state){if(!state.startOfLine)return!1;stream.skipToEnd();return"meta"}
var indentUnit=config.indentUnit;var keyword=words("abs acos allnodes ascii asin asstring atan atan2 ave case choose choosen choosesets clustersize combine correlation cos cosh count covariance cron dataset dedup define denormalize distribute distributed distribution ebcdic enth error evaluate event eventextra eventname exists exp failcode failmessage fetch fromunicode getisvalid global graph group hash hash32 hash64 hashcrc hashmd5 having if index intformat isvalid iterate join keyunicode length library limit ln local log loop map matched matchlength matchposition matchtext matchunicode max merge mergejoin min nolocal nonempty normalize parse pipe power preload process project pull random range rank ranked realformat recordof regexfind regexreplace regroup rejected rollup round roundup row rowdiff sample set sin sinh sizeof soapcall sort sorted sqrt stepped stored sum table tan tanh thisnode topn tounicode transfer trim truncate typeof ungroup unicodeorder variance which workunit xmldecode xmlencode xmltext xmlunicode");var variable=words("apply assert build buildindex evaluate fail keydiff keypatch loadxml nothor notify output parallel sequential soapcall wait");var variable_2=words("__compressed__ all and any as atmost before beginc++ best between case const counter csv descend encrypt end endc++ endmacro except exclusive expire export extend false few first flat from full function group header heading hole ifblock import in interface joined keep keyed last left limit load local locale lookup macro many maxcount maxlength min skew module named nocase noroot noscan nosort not of only opt or outer overwrite packed partition penalty physicallength pipe quote record relationship repeat return right scan self separator service shared skew skip sql store terminator thor threshold token transform trim true type unicodeorder unsorted validate virtual whole wild within xml xpath");var variable_3=words("ascii big_endian boolean data decimal ebcdic integer pattern qstring real record rule set of string token udecimal unicode unsigned varstring varunicode");var builtin=words("checkpoint deprecated failcode failmessage failure global independent onwarning persist priority recovery stored success wait when");var blockKeywords=words("catch class do else finally for if switch try while");var atoms=words("true false null");var hooks={"#":metaHook};var isOperatorChar=/[+\-*&%=<>!?|\/]/;var curPunc;function tokenBase(stream,state){var ch=stream.next();if(hooks[ch]){var result=hooks[ch](stream,state);if(result!==!1)return result}
if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(/[\[\]{}\(\),;\:\.]/.test(ch)){curPunc=ch;return null}
if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}
if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}
if(stream.eat("/")){stream.skipToEnd();return"comment"}}
if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}
stream.eatWhile(/[\w\$_]/);var cur=stream.current().toLowerCase();if(keyword.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"keyword"}else if(variable.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"variable"}else if(variable_2.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"variable-2"}else if(variable_3.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"variable-3"}else if(builtin.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"builtin"}else{var i=cur.length-1;while(i>=0&&(!isNaN(cur[i])||cur[i]=='_'))
--i;if(i>0){var cur2=cur.substr(0,i+1);if(variable_3.propertyIsEnumerable(cur2)){if(blockKeywords.propertyIsEnumerable(cur2))curPunc="newstatement";return"variable-3"}}}
if(atoms.propertyIsEnumerable(cur))return"atom";return null}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!escaped)
state.tokenize=tokenBase;return"string"}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return"comment"}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}
function pushContext(state,col,type){return state.context=new Context(state.indented,col,type,null,state.context)}
function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}")
state.indented=state.context.indented;return state.context=state.context.prev}
return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",!1),indented:0,startOfLine:!0}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0}
if(stream.eatSpace())return null;curPunc=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment"||style=="meta")return style;if(ctx.align==null)ctx.align=!0;if((curPunc==";"||curPunc==":")&&ctx.type=="statement")popContext(state);else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state);}else if(curPunc==ctx.type)popContext(state);else if(ctx.type=="}"||ctx.type=="top"||(ctx.type=="statement"&&curPunc=="newstatement"))
pushContext(state,stream.column(),"statement");state.startOfLine=!1;return style},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&state.tokenize!=null)return 0;var ctx=state.context,firstChar=textAfter&&textAfter.charAt(0);if(ctx.type=="statement"&&firstChar=="}")ctx=ctx.prev;var closing=firstChar==ctx.type;if(ctx.type=="statement")return ctx.indented+(firstChar=="{"?0:indentUnit);else if(ctx.align)return ctx.column+(closing?0:1);else return ctx.indented+(closing?0:indentUnit)},electricChars:"{}"}});CodeMirror.defineMIME("text/x-ecl","ecl")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("eiffel",function(){function wordObj(words){var o={};for(var i=0,e=words.length;i<e;++i)o[words[i]]=!0;return o}
var keywords=wordObj(['note','across','when','variant','until','unique','undefine','then','strip','select','retry','rescue','require','rename','reference','redefine','prefix','once','old','obsolete','loop','local','like','is','inspect','infix','include','if','frozen','from','external','export','ensure','end','elseif','else','do','creation','create','check','alias','agent','separate','invariant','inherit','indexing','feature','expanded','deferred','class','Void','True','Result','Precursor','False','Current','create','attached','detachable','as','and','implies','not','or']);var operators=wordObj([":=","and then","and","or","<<",">>"]);function chain(newtok,stream,state){state.tokenize.push(newtok);return newtok(stream,state)}
function tokenBase(stream,state){if(stream.eatSpace())return null;var ch=stream.next();if(ch=='"'||ch=="'"){return chain(readQuoted(ch,"string"),stream,state)}else if(ch=="-"&&stream.eat("-")){stream.skipToEnd();return"comment"}else if(ch==":"&&stream.eat("=")){return"operator"}else if(/[0-9]/.test(ch)){stream.eatWhile(/[xXbBCc0-9\.]/);stream.eat(/[\?\!]/);return"ident"}else if(/[a-zA-Z_0-9]/.test(ch)){stream.eatWhile(/[a-zA-Z_0-9]/);stream.eat(/[\?\!]/);return"ident"}else if(/[=+\-\/*^%<>~]/.test(ch)){stream.eatWhile(/[=+\-\/*^%<>~]/);return"operator"}else{return null}}
function readQuoted(quote,style,unescaped){return function(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&(unescaped||!escaped)){state.tokenize.pop();break}
escaped=!escaped&&ch=="%"}
return style}}
return{startState:function(){return{tokenize:[tokenBase]}},token:function(stream,state){var style=state.tokenize[state.tokenize.length-1](stream,state);if(style=="ident"){var word=stream.current();style=keywords.propertyIsEnumerable(stream.current())?"keyword":operators.propertyIsEnumerable(stream.current())?"operator":/^[A-Z][A-Z_0-9]*$/g.test(word)?"tag":/^0[bB][0-1]+$/g.test(word)?"number":/^0[cC][0-7]+$/g.test(word)?"number":/^0[xX][a-fA-F0-9]+$/g.test(word)?"number":/^([0-9]+\.[0-9]*)|([0-9]*\.[0-9]+)$/g.test(word)?"number":/^[0-9]+$/g.test(word)?"number":"variable"}
return style},lineComment:"--"}});CodeMirror.defineMIME("text/x-eiffel","eiffel")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("elm",function(){function switchState(source,setState,f){setState(f);return f(source,setState)}
var smallRE=/[a-z_]/;var largeRE=/[A-Z]/;var digitRE=/[0-9]/;var hexitRE=/[0-9A-Fa-f]/;var octitRE=/[0-7]/;var idRE=/[a-z_A-Z0-9\']/;var symbolRE=/[-!#$%&*+.\/<=>?@\\^|~:\u03BB\u2192]/;var specialRE=/[(),;[\]`{}]/;var whiteCharRE=/[ \t\v\f]/;function normal(){return function(source,setState){if(source.eatWhile(whiteCharRE)){return null}
var ch=source.next();if(specialRE.test(ch)){if(ch=='{'&&source.eat('-')){var t="comment";if(source.eat('#'))t="meta";return switchState(source,setState,ncomment(t,1))}
return null}
if(ch=='\''){if(source.eat('\\'))
source.next();else source.next();if(source.eat('\''))
return"string";return"error"}
if(ch=='"'){return switchState(source,setState,stringLiteral)}
if(largeRE.test(ch)){source.eatWhile(idRE);if(source.eat('.'))
return"qualifier";return"variable-2"}
if(smallRE.test(ch)){var isDef=source.pos===1;source.eatWhile(idRE);return isDef?"variable-3":"variable"}
if(digitRE.test(ch)){if(ch=='0'){if(source.eat(/[xX]/)){source.eatWhile(hexitRE);return"integer"}
if(source.eat(/[oO]/)){source.eatWhile(octitRE);return"number"}}
source.eatWhile(digitRE);var t="number";if(source.eat('.')){t="number";source.eatWhile(digitRE)}
if(source.eat(/[eE]/)){t="number";source.eat(/[-+]/);source.eatWhile(digitRE)}
return t}
if(symbolRE.test(ch)){if(ch=='-'&&source.eat(/-/)){source.eatWhile(/-/);if(!source.eat(symbolRE)){source.skipToEnd();return"comment"}}
source.eatWhile(symbolRE);return"builtin"}
return"error"}}
function ncomment(type,nest){if(nest==0){return normal()}
return function(source,setState){var currNest=nest;while(!source.eol()){var ch=source.next();if(ch=='{'&&source.eat('-')){++currNest}else if(ch=='-'&&source.eat('}')){--currNest;if(currNest==0){setState(normal());return type}}}
setState(ncomment(type,currNest));return type}}
function stringLiteral(source,setState){while(!source.eol()){var ch=source.next();if(ch=='"'){setState(normal());return"string"}
if(ch=='\\'){if(source.eol()||source.eat(whiteCharRE)){setState(stringGap);return"string"}
if(!source.eat('&'))source.next()}}
setState(normal());return"error"}
function stringGap(source,setState){if(source.eat('\\')){return switchState(source,setState,stringLiteral)}
source.next();setState(normal());return"error"}
var wellKnownWords=(function(){var wkw={};var keywords=["case","of","as","if","then","else","let","in","infix","infixl","infixr","type","alias","input","output","foreign","loopback","module","where","import","exposing","_","..","|",":","=","\\","\"","->","<-"];for(var i=keywords.length;i--;)
wkw[keywords[i]]="keyword";return wkw})();return{startState:function(){return{f:normal()}},copyState:function(s){return{f:s.f}},token:function(stream,state){var t=state.f(stream,function(s){state.f=s});var w=stream.current();return(wellKnownWords.hasOwnProperty(w))?wellKnownWords[w]:t}}});CodeMirror.defineMIME("text/x-elm","elm")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMIME("text/x-erlang","erlang");CodeMirror.defineMode("erlang",function(cmCfg){"use strict";var typeWords=["-type","-spec","-export_type","-opaque"];var keywordWords=["after","begin","catch","case","cond","end","fun","if","let","of","query","receive","try","when"];var separatorRE=/[\->,;]/;var separatorWords=["->",";",","];var operatorAtomWords=["and","andalso","band","bnot","bor","bsl","bsr","bxor","div","not","or","orelse","rem","xor"];var operatorSymbolRE=/[\+\-\*\/<>=\|:!]/;var operatorSymbolWords=["=","+","-","*","/",">",">=","<","=<","=:=","==","=/=","/=","||","<-","!"];var openParenRE=/[<\(\[\{]/;var openParenWords=["<<","(","[","{"];var closeParenRE=/[>\)\]\}]/;var closeParenWords=["}","]",")",">>"];var guardWords=["is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_record","is_reference","is_tuple","atom","binary","bitstring","boolean","function","integer","list","number","pid","port","record","reference","tuple"];var bifWords=["abs","adler32","adler32_combine","alive","apply","atom_to_binary","atom_to_list","binary_to_atom","binary_to_existing_atom","binary_to_list","binary_to_term","bit_size","bitstring_to_list","byte_size","check_process_code","contact_binary","crc32","crc32_combine","date","decode_packet","delete_module","disconnect_node","element","erase","exit","float","float_to_list","garbage_collect","get","get_keys","group_leader","halt","hd","integer_to_list","internal_bif","iolist_size","iolist_to_binary","is_alive","is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_process_alive","is_record","is_reference","is_tuple","length","link","list_to_atom","list_to_binary","list_to_bitstring","list_to_existing_atom","list_to_float","list_to_integer","list_to_pid","list_to_tuple","load_module","make_ref","module_loaded","monitor_node","node","node_link","node_unlink","nodes","notalive","now","open_port","pid_to_list","port_close","port_command","port_connect","port_control","pre_loaded","process_flag","process_info","processes","purge_module","put","register","registered","round","self","setelement","size","spawn","spawn_link","spawn_monitor","spawn_opt","split_binary","statistics","term_to_binary","time","throw","tl","trunc","tuple_size","tuple_to_list","unlink","unregister","whereis"];var anumRE=/[\w@Ø-ÞÀ-Öß-öø-ÿ]/;var escapesRE=/[0-7]{1,3}|[bdefnrstv\\"']|\^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;function tokenizer(stream,state){if(state.in_string){state.in_string=(!doubleQuote(stream));return rval(state,stream,"string")}
if(state.in_atom){state.in_atom=(!singleQuote(stream));return rval(state,stream,"atom")}
if(stream.eatSpace()){return rval(state,stream,"whitespace")}
if(!peekToken(state)&&stream.match(/-\s*[a-zß-öø-ÿ][\wØ-ÞÀ-Öß-öø-ÿ]*/)){if(is_member(stream.current(),typeWords)){return rval(state,stream,"type")}else{return rval(state,stream,"attribute")}}
var ch=stream.next();if(ch=='%'){stream.skipToEnd();return rval(state,stream,"comment")}
if(ch==":"){return rval(state,stream,"colon")}
if(ch=='?'){stream.eatSpace();stream.eatWhile(anumRE);return rval(state,stream,"macro")}
if(ch=="#"){stream.eatSpace();stream.eatWhile(anumRE);return rval(state,stream,"record")}
if(ch=="$"){if(stream.next()=="\\"&&!stream.match(escapesRE)){return rval(state,stream,"error")}
return rval(state,stream,"number")}
if(ch=="."){return rval(state,stream,"dot")}
if(ch=='\''){if(!(state.in_atom=(!singleQuote(stream)))){if(stream.match(/\s*\/\s*[0-9]/,!1)){stream.match(/\s*\/\s*[0-9]/,!0);return rval(state,stream,"fun")}
if(stream.match(/\s*\(/,!1)||stream.match(/\s*:/,!1)){return rval(state,stream,"function")}}
return rval(state,stream,"atom")}
if(ch=='"'){state.in_string=(!doubleQuote(stream));return rval(state,stream,"string")}
if(/[A-Z_Ø-ÞÀ-Ö]/.test(ch)){stream.eatWhile(anumRE);return rval(state,stream,"variable")}
if(/[a-z_ß-öø-ÿ]/.test(ch)){stream.eatWhile(anumRE);if(stream.match(/\s*\/\s*[0-9]/,!1)){stream.match(/\s*\/\s*[0-9]/,!0);return rval(state,stream,"fun")}
var w=stream.current();if(is_member(w,keywordWords)){return rval(state,stream,"keyword")}else if(is_member(w,operatorAtomWords)){return rval(state,stream,"operator")}else if(stream.match(/\s*\(/,!1)){if(is_member(w,bifWords)&&((peekToken(state).token!=":")||(peekToken(state,2).token=="erlang"))){return rval(state,stream,"builtin")}else if(is_member(w,guardWords)){return rval(state,stream,"guard")}else{return rval(state,stream,"function")}}else if(lookahead(stream)==":"){if(w=="erlang"){return rval(state,stream,"builtin")}else{return rval(state,stream,"function")}}else if(is_member(w,["true","false"])){return rval(state,stream,"boolean")}else{return rval(state,stream,"atom")}}
var digitRE=/[0-9]/;var radixRE=/[0-9a-zA-Z]/;if(digitRE.test(ch)){stream.eatWhile(digitRE);if(stream.eat('#')){if(!stream.eatWhile(radixRE)){stream.backUp(1)}}else if(stream.eat('.')){if(!stream.eatWhile(digitRE)){stream.backUp(1)}else{if(stream.eat(/[eE]/)){if(stream.eat(/[-+]/)){if(!stream.eatWhile(digitRE)){stream.backUp(2)}}else{if(!stream.eatWhile(digitRE)){stream.backUp(1)}}}}}
return rval(state,stream,"number")}
if(nongreedy(stream,openParenRE,openParenWords)){return rval(state,stream,"open_paren")}
if(nongreedy(stream,closeParenRE,closeParenWords)){return rval(state,stream,"close_paren")}
if(greedy(stream,separatorRE,separatorWords)){return rval(state,stream,"separator")}
if(greedy(stream,operatorSymbolRE,operatorSymbolWords)){return rval(state,stream,"operator")}
return rval(state,stream,null)}
function nongreedy(stream,re,words){if(stream.current().length==1&&re.test(stream.current())){stream.backUp(1);while(re.test(stream.peek())){stream.next();if(is_member(stream.current(),words)){return!0}}
stream.backUp(stream.current().length-1)}
return!1}
function greedy(stream,re,words){if(stream.current().length==1&&re.test(stream.current())){while(re.test(stream.peek())){stream.next()}
while(0<stream.current().length){if(is_member(stream.current(),words)){return!0}else{stream.backUp(1)}}
stream.next()}
return!1}
function doubleQuote(stream){return quote(stream,'"','\\')}
function singleQuote(stream){return quote(stream,'\'','\\')}
function quote(stream,quoteChar,escapeChar){while(!stream.eol()){var ch=stream.next();if(ch==quoteChar){return!0}else if(ch==escapeChar){stream.next()}}
return!1}
function lookahead(stream){var m=stream.match(/([\n\s]+|%[^\n]*\n)*(.)/,!1);return m?m.pop():""}
function is_member(element,list){return(-1<list.indexOf(element))}
function rval(state,stream,type){pushToken(state,realToken(type,stream));switch(type){case "atom":return"atom";case "attribute":return"attribute";case "boolean":return"atom";case "builtin":return"builtin";case "close_paren":return null;case "colon":return null;case "comment":return"comment";case "dot":return null;case "error":return"error";case "fun":return"meta";case "function":return"tag";case "guard":return"property";case "keyword":return"keyword";case "macro":return"variable-2";case "number":return"number";case "open_paren":return null;case "operator":return"operator";case "record":return"bracket";case "separator":return null;case "string":return"string";case "type":return"def";case "variable":return"variable";default:return null}}
function aToken(tok,col,ind,typ){return{token:tok,column:col,indent:ind,type:typ}}
function realToken(type,stream){return aToken(stream.current(),stream.column(),stream.indentation(),type)}
function fakeToken(type){return aToken(type,0,0,type)}
function peekToken(state,depth){var len=state.tokenStack.length;var dep=(depth?depth:1);if(len<dep){return!1}else{return state.tokenStack[len-dep]}}
function pushToken(state,token){if(!(token.type=="comment"||token.type=="whitespace")){state.tokenStack=maybe_drop_pre(state.tokenStack,token);state.tokenStack=maybe_drop_post(state.tokenStack)}}
function maybe_drop_pre(s,token){var last=s.length-1;if(0<last&&s[last].type==="record"&&token.type==="dot"){s.pop()}else if(0<last&&s[last].type==="group"){s.pop();s.push(token)}else{s.push(token)}
return s}
function maybe_drop_post(s){if(!s.length)return s
var last=s.length-1;if(s[last].type==="dot"){return[]}
if(last>1&&s[last].type==="fun"&&s[last-1].token==="fun"){return s.slice(0,last-1)}
switch(s[last].token){case "}":return d(s,{g:["{"]});case "]":return d(s,{i:["["]});case ")":return d(s,{i:["("]});case ">>":return d(s,{i:["<<"]});case "end":return d(s,{i:["begin","case","fun","if","receive","try"]});case ",":return d(s,{e:["begin","try","when","->",",","(","[","{","<<"]});case "->":return d(s,{r:["when"],m:["try","if","case","receive"]});case ";":return d(s,{E:["case","fun","if","receive","try","when"]});case "catch":return d(s,{e:["try"]});case "of":return d(s,{e:["case"]});case "after":return d(s,{e:["receive","try"]});default:return s}}
function d(stack,tt){for(var type in tt){var len=stack.length-1;var tokens=tt[type];for(var i=len-1;-1<i;i--){if(is_member(stack[i].token,tokens)){var ss=stack.slice(0,i);switch(type){case "m":return ss.concat(stack[i]).concat(stack[len]);case "r":return ss.concat(stack[len]);case "i":return ss;case "g":return ss.concat(fakeToken("group"));case "E":return ss.concat(stack[i]);case "e":return ss.concat(stack[i])}}}}
return(type=="E"?[]:stack)}
function indenter(state,textAfter){var t;var unit=cmCfg.indentUnit;var wordAfter=wordafter(textAfter);var currT=peekToken(state,1);var prevT=peekToken(state,2);if(state.in_string||state.in_atom){return CodeMirror.Pass}else if(!prevT){return 0}else if(currT.token=="when"){return currT.column+unit}else if(wordAfter==="when"&&prevT.type==="function"){return prevT.indent+unit}else if(wordAfter==="("&&currT.token==="fun"){return currT.column+3}else if(wordAfter==="catch"&&(t=getToken(state,["try"]))){return t.column}else if(is_member(wordAfter,["end","after","of"])){t=getToken(state,["begin","case","fun","if","receive","try"]);return t?t.column:CodeMirror.Pass}else if(is_member(wordAfter,closeParenWords)){t=getToken(state,openParenWords);return t?t.column:CodeMirror.Pass}else if(is_member(currT.token,[",","|","||"])||is_member(wordAfter,[",","|","||"])){t=postcommaToken(state);return t?t.column+t.token.length:unit}else if(currT.token=="->"){if(is_member(prevT.token,["receive","case","if","try"])){return prevT.column+unit+unit}else{return prevT.column+unit}}else if(is_member(currT.token,openParenWords)){return currT.column+currT.token.length}else{t=defaultToken(state);return truthy(t)?t.column+unit:0}}
function wordafter(str){var m=str.match(/,|[a-z]+|\}|\]|\)|>>|\|+|\(/);return truthy(m)&&(m.index===0)?m[0]:""}
function postcommaToken(state){var objs=state.tokenStack.slice(0,-1);var i=getTokenIndex(objs,"type",["open_paren"]);return truthy(objs[i])?objs[i]:!1}
function defaultToken(state){var objs=state.tokenStack;var stop=getTokenIndex(objs,"type",["open_paren","separator","keyword"]);var oper=getTokenIndex(objs,"type",["operator"]);if(truthy(stop)&&truthy(oper)&&stop<oper){return objs[stop+1]}else if(truthy(stop)){return objs[stop]}else{return!1}}
function getToken(state,tokens){var objs=state.tokenStack;var i=getTokenIndex(objs,"token",tokens);return truthy(objs[i])?objs[i]:!1}
function getTokenIndex(objs,propname,propvals){for(var i=objs.length-1;-1<i;i--){if(is_member(objs[i][propname],propvals)){return i}}
return!1}
function truthy(x){return(x!==!1)&&(x!=null)}
return{startState:function(){return{tokenStack:[],in_string:!1,in_atom:!1}},token:function(stream,state){return tokenizer(stream,state)},indent:function(state,textAfter){return indenter(state,textAfter)},lineComment:"%"}})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../../addon/mode/simple"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../../addon/mode/simple"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineSimpleMode("factor",{start:[{regex:/#?!.*/,token:"comment"},{regex:/"""/,token:"string",next:"string3"},{regex:/"/,token:"string",next:"string"},{regex:/(?:[+-]?)(?:0x[\d,a-f]+)|(?:0o[0-7]+)|(?:0b[0,1]+)|(?:\d+.?\d*)/,token:"number"},{regex:/(\:)(\s+)(\S+)(\s+)(\()/,token:["keyword",null,"def",null,"keyword"],next:"stack"},{regex:/USING\:/,token:"keyword",next:"vocabulary"},{regex:/(USE\:|IN\:)(\s+)(\S+)/,token:["keyword",null,"variable-2"]},{regex:/<\S+>/,token:"builtin"},{regex:/;|t|f|if|\.|\[|\]|\{|\}|MAIN:/,token:"keyword"},{regex:/\S+/,token:"variable"},{regex:/./,token:null}],vocabulary:[{regex:/;/,token:"keyword",next:"start"},{regex:/\S+/,token:"variable-2"},{regex:/./,token:null}],string:[{regex:/(?:[^\\]|\\.)*?"/,token:"string",next:"start"},{regex:/.*/,token:"string"}],string3:[{regex:/(?:[^\\]|\\.)*?"""/,token:"string",next:"start"},{regex:/.*/,token:"string"}],stack:[{regex:/\)/,token:"meta",next:"start"},{regex:/--/,token:"meta"},{regex:/\S+/,token:"variable-3"},{regex:/./,token:null}],meta:{dontIndentStates:["start","vocabulary","string","string3","stack"],lineComment:["!","#!"]}});CodeMirror.defineMIME("text/x-factor","factor")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("fcl",function(config){var indentUnit=config.indentUnit;var keywords={"term":!0,"method":!0,"accu":!0,"rule":!0,"then":!0,"is":!0,"and":!0,"or":!0,"if":!0,"default":!0};var start_blocks={"var_input":!0,"var_output":!0,"fuzzify":!0,"defuzzify":!0,"function_block":!0,"ruleblock":!0};var end_blocks={"end_ruleblock":!0,"end_defuzzify":!0,"end_function_block":!0,"end_fuzzify":!0,"end_var":!0};var atoms={"true":!0,"false":!0,"nan":!0,"real":!0,"min":!0,"max":!0,"cog":!0,"cogs":!0};var isOperatorChar=/[+\-*&^%:=<>!|\/]/;function tokenBase(stream,state){var ch=stream.next();if(/[\d\.]/.test(ch)){if(ch=="."){stream.match(/^[0-9]+([eE][\-+]?[0-9]+)?/)}else if(ch=="0"){stream.match(/^[xX][0-9a-fA-F]+/)||stream.match(/^0[0-7]+/)}else{stream.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/)}
return"number"}
if(ch=="/"||ch=="("){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}
if(stream.eat("/")){stream.skipToEnd();return"comment"}}
if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}
stream.eatWhile(/[\w\$_\xa1-\uffff]/);var cur=stream.current().toLowerCase();if(keywords.propertyIsEnumerable(cur)||start_blocks.propertyIsEnumerable(cur)||end_blocks.propertyIsEnumerable(cur)){return"keyword"}
if(atoms.propertyIsEnumerable(cur))return"atom";return"variable"}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if((ch=="/"||ch==")")&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return"comment"}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}
function pushContext(state,col,type){return state.context=new Context(state.indented,col,type,null,state.context)}
function popContext(state){if(!state.context.prev)return;var t=state.context.type;if(t=="end_block")
state.indented=state.context.indented;return state.context=state.context.prev}
return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",!1),indented:0,startOfLine:!0}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0}
if(stream.eatSpace())return null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment")return style;if(ctx.align==null)ctx.align=!0;var cur=stream.current().toLowerCase();if(start_blocks.propertyIsEnumerable(cur))pushContext(state,stream.column(),"end_block");else if(end_blocks.propertyIsEnumerable(cur))popContext(state);state.startOfLine=!1;return style},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&state.tokenize!=null)return 0;var ctx=state.context;var closing=end_blocks.propertyIsEnumerable(textAfter);if(ctx.align)return ctx.column+(closing?0:1);else return ctx.indented+(closing?0:indentUnit)},electricChars:"ryk",fold:"brace",blockCommentStart:"(*",blockCommentEnd:"*)",lineComment:"//"}});CodeMirror.defineMIME("text/x-fcl","fcl")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function toWordList(words){var ret=[];words.split(' ').forEach(function(e){ret.push({name:e})});return ret}
var coreWordList=toWordList('INVERT AND OR XOR\
 2* 2/ LSHIFT RSHIFT\
 0= = 0< < > U< MIN MAX\
 2DROP 2DUP 2OVER 2SWAP ?DUP DEPTH DROP DUP OVER ROT SWAP\
 >R R> R@\
 + - 1+ 1- ABS NEGATE\
 S>D * M* UM*\
 FM/MOD SM/REM UM/MOD */ */MOD / /MOD MOD\
 HERE , @ ! CELL+ CELLS C, C@ C! CHARS 2@ 2!\
 ALIGN ALIGNED +! ALLOT\
 CHAR [CHAR] [ ] BL\
 FIND EXECUTE IMMEDIATE COUNT LITERAL STATE\
 ; DOES> >BODY\
 EVALUATE\
 SOURCE >IN\
 <# # #S #> HOLD SIGN BASE >NUMBER HEX DECIMAL\
 FILL MOVE\
 . CR EMIT SPACE SPACES TYPE U. .R U.R\
 ACCEPT\
 TRUE FALSE\
 <> U> 0<> 0>\
 NIP TUCK ROLL PICK\
 2>R 2R@ 2R>\
 WITHIN UNUSED MARKER\
 I J\
 TO\
 COMPILE, [COMPILE]\
 SAVE-INPUT RESTORE-INPUT\
 PAD ERASE\
 2LITERAL DNEGATE\
 D- D+ D0< D0= D2* D2/ D< D= DMAX DMIN D>S DABS\
 M+ M*/ D. D.R 2ROT DU<\
 CATCH THROW\
 FREE RESIZE ALLOCATE\
 CS-PICK CS-ROLL\
 GET-CURRENT SET-CURRENT FORTH-WORDLIST GET-ORDER SET-ORDER\
 PREVIOUS SEARCH-WORDLIST WORDLIST FIND ALSO ONLY FORTH DEFINITIONS ORDER\
 -TRAILING /STRING SEARCH COMPARE CMOVE CMOVE> BLANK SLITERAL');var immediateWordList=toWordList('IF ELSE THEN BEGIN WHILE REPEAT UNTIL RECURSE [IF] [ELSE] [THEN] ?DO DO LOOP +LOOP UNLOOP LEAVE EXIT AGAIN CASE OF ENDOF ENDCASE');CodeMirror.defineMode('forth',function(){function searchWordList(wordList,word){var i;for(i=wordList.length-1;i>=0;i--){if(wordList[i].name===word.toUpperCase()){return wordList[i]}}
return undefined}
return{startState:function(){return{state:'',base:10,coreWordList:coreWordList,immediateWordList:immediateWordList,wordList:[]}},token:function(stream,stt){var mat;if(stream.eatSpace()){return null}
if(stt.state===''){if(stream.match(/^(\]|:NONAME)(\s|$)/i)){stt.state=' compilation';return'builtin compilation'}
mat=stream.match(/^(\:)\s+(\S+)(\s|$)+/);if(mat){stt.wordList.push({name:mat[2].toUpperCase()});stt.state=' compilation';return'def'+stt.state}
mat=stream.match(/^(VARIABLE|2VARIABLE|CONSTANT|2CONSTANT|CREATE|POSTPONE|VALUE|WORD)\s+(\S+)(\s|$)+/i);if(mat){stt.wordList.push({name:mat[2].toUpperCase()});return'def'+stt.state}
mat=stream.match(/^(\'|\[\'\])\s+(\S+)(\s|$)+/);if(mat){return'builtin'+stt.state}}else{if(stream.match(/^(\;|\[)(\s)/)){stt.state='';stream.backUp(1);return'builtin compilation'}
if(stream.match(/^(\;|\[)($)/)){stt.state='';return'builtin compilation'}
if(stream.match(/^(POSTPONE)\s+\S+(\s|$)+/)){return'builtin'}}
mat=stream.match(/^(\S+)(\s+|$)/);if(mat){if(searchWordList(stt.wordList,mat[1])!==undefined){return'variable'+stt.state}
if(mat[1]==='\\'){stream.skipToEnd();return'comment'+stt.state}
if(searchWordList(stt.coreWordList,mat[1])!==undefined){return'builtin'+stt.state}
if(searchWordList(stt.immediateWordList,mat[1])!==undefined){return'keyword'+stt.state}
if(mat[1]==='('){stream.eatWhile(function(s){return s!==')'});stream.eat(')');return'comment'+stt.state}
if(mat[1]==='.('){stream.eatWhile(function(s){return s!==')'});stream.eat(')');return'string'+stt.state}
if(mat[1]==='S"'||mat[1]==='."'||mat[1]==='C"'){stream.eatWhile(function(s){return s!=='"'});stream.eat('"');return'string'+stt.state}
if(mat[1]-0xfffffffff){return'number'+stt.state}
return'atom'+stt.state}}}});CodeMirror.defineMIME("text/x-forth","forth")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("fortran",function(){function words(array){var keys={};for(var i=0;i<array.length;++i){keys[array[i]]=!0}
return keys}
var keywords=words(["abstract","accept","allocatable","allocate","array","assign","asynchronous","backspace","bind","block","byte","call","case","class","close","common","contains","continue","cycle","data","deallocate","decode","deferred","dimension","do","elemental","else","encode","end","endif","entry","enumerator","equivalence","exit","external","extrinsic","final","forall","format","function","generic","go","goto","if","implicit","import","include","inquire","intent","interface","intrinsic","module","namelist","non_intrinsic","non_overridable","none","nopass","nullify","open","optional","options","parameter","pass","pause","pointer","print","private","program","protected","public","pure","read","recursive","result","return","rewind","save","select","sequence","stop","subroutine","target","then","to","type","use","value","volatile","where","while","write"]);var builtins=words(["abort","abs","access","achar","acos","adjustl","adjustr","aimag","aint","alarm","all","allocated","alog","amax","amin","amod","and","anint","any","asin","associated","atan","besj","besjn","besy","besyn","bit_size","btest","cabs","ccos","ceiling","cexp","char","chdir","chmod","clog","cmplx","command_argument_count","complex","conjg","cos","cosh","count","cpu_time","cshift","csin","csqrt","ctime","c_funloc","c_loc","c_associated","c_null_ptr","c_null_funptr","c_f_pointer","c_null_char","c_alert","c_backspace","c_form_feed","c_new_line","c_carriage_return","c_horizontal_tab","c_vertical_tab","dabs","dacos","dasin","datan","date_and_time","dbesj","dbesj","dbesjn","dbesy","dbesy","dbesyn","dble","dcos","dcosh","ddim","derf","derfc","dexp","digits","dim","dint","dlog","dlog","dmax","dmin","dmod","dnint","dot_product","dprod","dsign","dsinh","dsin","dsqrt","dtanh","dtan","dtime","eoshift","epsilon","erf","erfc","etime","exit","exp","exponent","extends_type_of","fdate","fget","fgetc","float","floor","flush","fnum","fputc","fput","fraction","fseek","fstat","ftell","gerror","getarg","get_command","get_command_argument","get_environment_variable","getcwd","getenv","getgid","getlog","getpid","getuid","gmtime","hostnm","huge","iabs","iachar","iand","iargc","ibclr","ibits","ibset","ichar","idate","idim","idint","idnint","ieor","ierrno","ifix","imag","imagpart","index","int","ior","irand","isatty","ishft","ishftc","isign","iso_c_binding","is_iostat_end","is_iostat_eor","itime","kill","kind","lbound","len","len_trim","lge","lgt","link","lle","llt","lnblnk","loc","log","logical","long","lshift","lstat","ltime","matmul","max","maxexponent","maxloc","maxval","mclock","merge","move_alloc","min","minexponent","minloc","minval","mod","modulo","mvbits","nearest","new_line","nint","not","or","pack","perror","precision","present","product","radix","rand","random_number","random_seed","range","real","realpart","rename","repeat","reshape","rrspacing","rshift","same_type_as","scale","scan","second","selected_int_kind","selected_real_kind","set_exponent","shape","short","sign","signal","sinh","sin","sleep","sngl","spacing","spread","sqrt","srand","stat","sum","symlnk","system","system_clock","tan","tanh","time","tiny","transfer","transpose","trim","ttynam","ubound","umask","unlink","unpack","verify","xor","zabs","zcos","zexp","zlog","zsin","zsqrt"]);var dataTypes=words(["c_bool","c_char","c_double","c_double_complex","c_float","c_float_complex","c_funptr","c_int","c_int16_t","c_int32_t","c_int64_t","c_int8_t","c_int_fast16_t","c_int_fast32_t","c_int_fast64_t","c_int_fast8_t","c_int_least16_t","c_int_least32_t","c_int_least64_t","c_int_least8_t","c_intmax_t","c_intptr_t","c_long","c_long_double","c_long_double_complex","c_long_long","c_ptr","c_short","c_signed_char","c_size_t","character","complex","double","integer","logical","real"]);var isOperatorChar=/[+\-*&=<>\/\:]/;var litOperator=new RegExp("(\.and\.|\.or\.|\.eq\.|\.lt\.|\.le\.|\.gt\.|\.ge\.|\.ne\.|\.not\.|\.eqv\.|\.neqv\.)","i");function tokenBase(stream,state){if(stream.match(litOperator)){return'operator'}
var ch=stream.next();if(ch=="!"){stream.skipToEnd();return"comment"}
if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(/[\[\]\(\),]/.test(ch)){return null}
if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}
if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}
stream.eatWhile(/[\w\$_]/);var word=stream.current().toLowerCase();if(keywords.hasOwnProperty(word)){return'keyword'}
if(builtins.hasOwnProperty(word)||dataTypes.hasOwnProperty(word)){return'builtin'}
return"variable"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!escaped)state.tokenize=null;return"string"}}
return{startState:function(){return{tokenize:null}},token:function(stream,state){if(stream.eatSpace())return null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment"||style=="meta")return style;return style}}});CodeMirror.defineMIME("text/x-fortran","fortran")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("gas",function(_config,parserConfig){'use strict';var custom=[];var lineCommentStartSymbol="";var directives={".abort":"builtin",".align":"builtin",".altmacro":"builtin",".ascii":"builtin",".asciz":"builtin",".balign":"builtin",".balignw":"builtin",".balignl":"builtin",".bundle_align_mode":"builtin",".bundle_lock":"builtin",".bundle_unlock":"builtin",".byte":"builtin",".cfi_startproc":"builtin",".comm":"builtin",".data":"builtin",".def":"builtin",".desc":"builtin",".dim":"builtin",".double":"builtin",".eject":"builtin",".else":"builtin",".elseif":"builtin",".end":"builtin",".endef":"builtin",".endfunc":"builtin",".endif":"builtin",".equ":"builtin",".equiv":"builtin",".eqv":"builtin",".err":"builtin",".error":"builtin",".exitm":"builtin",".extern":"builtin",".fail":"builtin",".file":"builtin",".fill":"builtin",".float":"builtin",".func":"builtin",".global":"builtin",".gnu_attribute":"builtin",".hidden":"builtin",".hword":"builtin",".ident":"builtin",".if":"builtin",".incbin":"builtin",".include":"builtin",".int":"builtin",".internal":"builtin",".irp":"builtin",".irpc":"builtin",".lcomm":"builtin",".lflags":"builtin",".line":"builtin",".linkonce":"builtin",".list":"builtin",".ln":"builtin",".loc":"builtin",".loc_mark_labels":"builtin",".local":"builtin",".long":"builtin",".macro":"builtin",".mri":"builtin",".noaltmacro":"builtin",".nolist":"builtin",".octa":"builtin",".offset":"builtin",".org":"builtin",".p2align":"builtin",".popsection":"builtin",".previous":"builtin",".print":"builtin",".protected":"builtin",".psize":"builtin",".purgem":"builtin",".pushsection":"builtin",".quad":"builtin",".reloc":"builtin",".rept":"builtin",".sbttl":"builtin",".scl":"builtin",".section":"builtin",".set":"builtin",".short":"builtin",".single":"builtin",".size":"builtin",".skip":"builtin",".sleb128":"builtin",".space":"builtin",".stab":"builtin",".string":"builtin",".struct":"builtin",".subsection":"builtin",".symver":"builtin",".tag":"builtin",".text":"builtin",".title":"builtin",".type":"builtin",".uleb128":"builtin",".val":"builtin",".version":"builtin",".vtable_entry":"builtin",".vtable_inherit":"builtin",".warning":"builtin",".weak":"builtin",".weakref":"builtin",".word":"builtin"};var registers={};function x86(_parserConfig){lineCommentStartSymbol="#";registers.ax="variable";registers.eax="variable-2";registers.rax="variable-3";registers.bx="variable";registers.ebx="variable-2";registers.rbx="variable-3";registers.cx="variable";registers.ecx="variable-2";registers.rcx="variable-3";registers.dx="variable";registers.edx="variable-2";registers.rdx="variable-3";registers.si="variable";registers.esi="variable-2";registers.rsi="variable-3";registers.di="variable";registers.edi="variable-2";registers.rdi="variable-3";registers.sp="variable";registers.esp="variable-2";registers.rsp="variable-3";registers.bp="variable";registers.ebp="variable-2";registers.rbp="variable-3";registers.ip="variable";registers.eip="variable-2";registers.rip="variable-3";registers.cs="keyword";registers.ds="keyword";registers.ss="keyword";registers.es="keyword";registers.fs="keyword";registers.gs="keyword"}
function armv6(_parserConfig){lineCommentStartSymbol="@";directives.syntax="builtin";registers.r0="variable";registers.r1="variable";registers.r2="variable";registers.r3="variable";registers.r4="variable";registers.r5="variable";registers.r6="variable";registers.r7="variable";registers.r8="variable";registers.r9="variable";registers.r10="variable";registers.r11="variable";registers.r12="variable";registers.sp="variable-2";registers.lr="variable-2";registers.pc="variable-2";registers.r13=registers.sp;registers.r14=registers.lr;registers.r15=registers.pc;custom.push(function(ch,stream){if(ch==='#'){stream.eatWhile(/\w/);return"number"}})}
var arch=(parserConfig.architecture||"x86").toLowerCase();if(arch==="x86"){x86(parserConfig)}else if(arch==="arm"||arch==="armv6"){armv6(parserConfig)}
function nextUntilUnescaped(stream,end){var escaped=!1,next;while((next=stream.next())!=null){if(next===end&&!escaped){return!1}
escaped=!escaped&&next==="\\"}
return escaped}
function clikeComment(stream,state){var maybeEnd=!1,ch;while((ch=stream.next())!=null){if(ch==="/"&&maybeEnd){state.tokenize=null;break}
maybeEnd=(ch==="*")}
return"comment"}
return{startState:function(){return{tokenize:null}},token:function(stream,state){if(state.tokenize){return state.tokenize(stream,state)}
if(stream.eatSpace()){return null}
var style,cur,ch=stream.next();if(ch==="/"){if(stream.eat("*")){state.tokenize=clikeComment;return clikeComment(stream,state)}}
if(ch===lineCommentStartSymbol){stream.skipToEnd();return"comment"}
if(ch==='"'){nextUntilUnescaped(stream,'"');return"string"}
if(ch==='.'){stream.eatWhile(/\w/);cur=stream.current().toLowerCase();style=directives[cur];return style||null}
if(ch==='='){stream.eatWhile(/\w/);return"tag"}
if(ch==='{'){return"braket"}
if(ch==='}'){return"braket"}
if(/\d/.test(ch)){if(ch==="0"&&stream.eat("x")){stream.eatWhile(/[0-9a-fA-F]/);return"number"}
stream.eatWhile(/\d/);return"number"}
if(/\w/.test(ch)){stream.eatWhile(/\w/);if(stream.eat(":")){return'tag'}
cur=stream.current().toLowerCase();style=registers[cur];return style||null}
for(var i=0;i<custom.length;i++){style=custom[i](ch,stream,state);if(style){return style}}},lineComment:lineCommentStartSymbol,blockCommentStart:"/*",blockCommentEnd:"*/"}})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../markdown/markdown"),require("../../addon/mode/overlay"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../markdown/markdown","../../addon/mode/overlay"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var urlRE=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i

CodeMirror.defineMode("gfm", function(config, modeConfig) {
  var codeDepth = 0;
  function blankLine(state) {
    state.code = false;
    return null;
  }
  var gfmOverlay = {
    startState: function() {
      return {
        code: false,
        codeBlock: false,
        ateSpace: false
      };
    },
    copyState: function(s) {
      return {
        code: s.code,
        codeBlock: s.codeBlock,
        ateSpace: s.ateSpace
      };
    },
    token: function(stream, state) {
      state.combineTokens = null;

      // Hack to prevent formatting override inside code blocks (block and inline)
      if (state.codeBlock) {
        if (stream.match(/^```+/)){state.codeBlock=!1;return null}
stream.skipToEnd();return null}
if(stream.sol()){state.code=!1}
if(stream.sol()&&stream.match(/^```+/)){stream.skipToEnd();state.codeBlock=!0;return null}
if(stream.peek()==='`'){stream.next();var before=stream.pos;stream.eatWhile('`');var difference=1+stream.pos-before;if(!state.code){codeDepth=difference;state.code=!0}else{if(difference===codeDepth){state.code=!1}}
return null}else if(state.code){stream.next();return null}
if(stream.eatSpace()){state.ateSpace=!0;return null}
if(stream.sol()||state.ateSpace){state.ateSpace=!1;if(modeConfig.gitHubSpice!==!1){if(stream.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/)){state.combineTokens=!0;return"link"}else if(stream.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/)){state.combineTokens=!0;return"link"}}}
if(stream.match(urlRE)&&stream.string.slice(stream.start-2,stream.start)!="]("&&(stream.start==0||/\W/.test(stream.string.charAt(stream.start-1)))){state.combineTokens=!0;return"link"}
stream.next();return null},blankLine:blankLine};var markdownConfig={underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:'```',strikethrough:!0};for(var attr in modeConfig){markdownConfig[attr]=modeConfig[attr]}
markdownConfig.name="markdown";return CodeMirror.overlayMode(CodeMirror.getMode(config,markdownConfig),gfmOverlay)},"markdown");CodeMirror.defineMIME("text/x-gfm","gfm")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({tabSize:4},"gfm");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
var modeHighlightFormatting=CodeMirror.getMode({tabSize:4},{name:"gfm",highlightFormatting:!0});function FT(name){test.mode(name,modeHighlightFormatting,Array.prototype.slice.call(arguments,1))}
FT("codeBackticks","[comment&formatting&formatting-code `][comment foo][comment&formatting&formatting-code `]");FT("doubleBackticks","[comment&formatting&formatting-code ``][comment foo ` bar][comment&formatting&formatting-code ``]");FT("codeBlock","[comment&formatting&formatting-code-block ```css]","[tag foo]","[comment&formatting&formatting-code-block ```]");FT("taskList","[variable-2&formatting&formatting-list&formatting-list-ul - ][meta&formatting&formatting-task [ ]]][variable-2  foo]","[variable-2&formatting&formatting-list&formatting-list-ul - ][property&formatting&formatting-task [x]]][variable-2  foo]");FT("formatting_strikethrough","[strikethrough&formatting&formatting-strikethrough ~~][strikethrough foo][strikethrough&formatting&formatting-strikethrough ~~]");FT("formatting_strikethrough","foo [strikethrough&formatting&formatting-strikethrough ~~][strikethrough bar][strikethrough&formatting&formatting-strikethrough ~~]");MT("emInWordAsterisk","foo[em *bar*]hello");MT("emInWordUnderscore","foo_bar_hello");MT("emStrongUnderscore","[strong __][em&strong _foo__][em _] bar");MT("fencedCodeBlocks","[comment ```]","[comment foo]","","[comment ```]","bar");MT("fencedCodeBlockModeSwitching","[comment ```javascript]","[variable foo]","","[comment ```]","bar");MT("fencedCodeBlockModeSwitchingObjc","[comment ```objective-c]","[keyword @property] [variable NSString] [operator *] [variable foo];","[comment ```]","bar");MT("fencedCodeBlocksNoTildes","~~~","foo","~~~");MT("taskListAsterisk","[variable-2 * []] foo]","[variable-2 * [ ]]bar]","[variable-2 * [x]]hello]","[variable-2 * ][meta [ ]]][variable-2  [world]]]","    [variable-3 * ][property [x]]][variable-3  foo]");MT("taskListPlus","[variable-2 + []] foo]","[variable-2 + [ ]]bar]","[variable-2 + [x]]hello]","[variable-2 + ][meta [ ]]][variable-2  [world]]]","    [variable-3 + ][property [x]]][variable-3  foo]");MT("taskListDash","[variable-2 - []] foo]","[variable-2 - [ ]]bar]","[variable-2 - [x]]hello]","[variable-2 - ][meta [ ]]][variable-2  [world]]]","    [variable-3 - ][property [x]]][variable-3  foo]");MT("taskListNumber","[variable-2 1. []] foo]","[variable-2 2. [ ]]bar]","[variable-2 3. [x]]hello]","[variable-2 4. ][meta [ ]]][variable-2  [world]]]","    [variable-3 1. ][property [x]]][variable-3  foo]");MT("SHA","foo [link be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2] bar");MT("SHAEmphasis","[em *foo ][em&link be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2][em *]");MT("shortSHA","foo [link be6a8cc] bar");MT("tooShortSHA","foo be6a8c bar");MT("longSHA","foo be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd22 bar");MT("badSHA","foo be6a8cc1c1ecfe9489fb51e4869af15a13fc2cg2 bar");MT("userSHA","foo [link bar@be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2] hello");MT("userSHAEmphasis","[em *foo ][em&link bar@be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2][em *]");MT("userProjectSHA","foo [link bar/hello@be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2] world");MT("userProjectSHAEmphasis","[em *foo ][em&link bar/hello@be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2][em *]");MT("num","foo [link #1] bar");MT("numEmphasis","[em *foo ][em&link #1][em *]");MT("badNum","foo #1bar hello");MT("userNum","foo [link bar#1] hello");MT("userNumEmphasis","[em *foo ][em&link bar#1][em *]");MT("userProjectNum","foo [link bar/hello#1] world");MT("userProjectNumEmphasis","[em *foo ][em&link bar/hello#1][em *]");MT("vanillaLink","foo [link http://www.example.com/] bar");MT("vanillaLinkNoScheme","foo [link www.example.com] bar");MT("vanillaLinkHttps","foo [link https://www.example.com/] bar");MT("vanillaLinkDataSchema","foo [link data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==] bar");MT("vanillaLinkPunctuation","foo [link http://www.example.com/]. bar");MT("vanillaLinkExtension","foo [link http://www.example.com/index.html] bar");MT("vanillaLinkEmphasis","foo [em *][em&link http://www.example.com/index.html][em *] bar");MT("notALink","foo asfd:asdf bar");MT("notALink","[comment ```css]","[tag foo] {[property color]:[keyword black];}","[comment ```][link http://www.example.com/]");MT("notALink","[comment ``foo `bar` http://www.example.com/``] hello");MT("notALink","[comment `foo]","[comment&link http://www.example.com/]","[comment `] foo","","[link http://www.example.com/]");MT("headerCodeBlockGithub","[header&header-1 # heading]","","[comment ```]","[comment code]","[comment ```]","","Commit: [link be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2]","Issue: [link #1]","Link: [link http://www.example.com/]");MT("strikethrough","[strikethrough ~~foo~~]");MT("strikethroughWithStartingSpace","~~ foo~~");MT("strikethroughUnclosedStrayTildes","[strikethrough ~~foo~~~]");MT("strikethroughUnclosedStrayTildes","[strikethrough ~~foo ~~]");MT("strikethroughUnclosedStrayTildes","[strikethrough ~~foo ~~ bar]");MT("strikethroughUnclosedStrayTildes","[strikethrough ~~foo ~~ bar~~]hello");MT("strikethroughOneLetter","[strikethrough ~~a~~]");MT("strikethroughWrapped","[strikethrough ~~foo]","[strikethrough foo~~]");MT("strikethroughParagraph","[strikethrough ~~foo]","","foo[strikethrough ~~bar]");MT("strikethroughEm","[strikethrough ~~foo][em&strikethrough *bar*][strikethrough ~~]");MT("strikethroughEm","[em *][em&strikethrough ~~foo~~][em *]");MT("strikethroughStrong","[strikethrough ~~][strong&strikethrough **foo**][strikethrough ~~]");MT("strikethroughStrong","[strong **][strong&strikethrough ~~foo~~][strong **]")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("gherkin",function(){return{startState:function(){return{lineNumber:0,tableHeaderLine:!1,allowFeature:!0,allowBackground:!1,allowScenario:!1,allowSteps:!1,allowPlaceholders:!1,allowMultilineArgument:!1,inMultilineString:!1,inMultilineTable:!1,inKeywordLine:!1}},token:function(stream,state){if(stream.sol()){state.lineNumber++;state.inKeywordLine=!1;if(state.inMultilineTable){state.tableHeaderLine=!1;if(!stream.match(/\s*\|/,!1)){state.allowMultilineArgument=!1;state.inMultilineTable=!1}}}
stream.eatSpace();if(state.allowMultilineArgument){if(state.inMultilineString){if(stream.match('"""')){state.inMultilineString=!1;state.allowMultilineArgument=!1}else{stream.match(/.*/)}
return"string"}
if(state.inMultilineTable){if(stream.match(/\|\s*/)){return"bracket"}else{stream.match(/[^\|]*/);return state.tableHeaderLine?"header":"string"}}
if(stream.match('"""')){state.inMultilineString=!0;return"string"}else if(stream.match("|")){state.inMultilineTable=!0;state.tableHeaderLine=!0;return"bracket"}}
if(stream.match(/#.*/)){return"comment"}else if(!state.inKeywordLine&&stream.match(/@\S+/)){return"tag"}else if(!state.inKeywordLine&&state.allowFeature&&stream.match(/(機能|功能|フィーチャ|기능|โครงหลัก|ความสามารถ|ความต้องการทางธุรกิจ|ಹೆಚ್ಚಳ|గుణము|ਮੁਹਾਂਦਰਾ|ਨਕਸ਼ ਨੁਹਾਰ|ਖਾਸੀਅਤ|रूप लेख|وِیژگی|خاصية|תכונה|Функціонал|Функция|Функционалност|Функционал|Үзенчәлеклелек|Свойство|Особина|Мөмкинлек|Могућност|Λειτουργία|Δυνατότητα|Właściwość|Vlastnosť|Trajto|Tính năng|Savybė|Pretty much|Požiadavka|Požadavek|Potrzeba biznesowa|Özellik|Osobina|Ominaisuus|Omadus|OH HAI|Mogućnost|Mogucnost|Jellemző|Hwæt|Hwaet|Funzionalità|Funktionalitéit|Funktionalität|Funkcja|Funkcionalnost|Funkcionalitāte|Funkcia|Fungsi|Functionaliteit|Funcționalitate|Funcţionalitate|Functionalitate|Funcionalitat|Funcionalidade|Fonctionnalité|Fitur|Fīča|Feature|Eiginleiki|Egenskap|Egenskab|Característica|Caracteristica|Business Need|Aspekt|Arwedd|Ahoy matey!|Ability):/)){state.allowScenario=!0;state.allowBackground=!0;state.allowPlaceholders=!1;state.allowSteps=!1;state.allowMultilineArgument=!1;state.inKeywordLine=!0;return"keyword"}else if(!state.inKeywordLine&&state.allowBackground&&stream.match(/(背景|배경|แนวคิด|ಹಿನ್ನೆಲೆ|నేపథ్యం|ਪਿਛੋਕੜ|पृष्ठभूमि|زمینه|الخلفية|רקע|Тарих|Предыстория|Предистория|Позадина|Передумова|Основа|Контекст|Кереш|Υπόβαθρο|Założenia|Yo\-ho\-ho|Tausta|Taust|Situācija|Rerefons|Pozadina|Pozadie|Pozadí|Osnova|Latar Belakang|Kontext|Konteksts|Kontekstas|Kontekst|Háttér|Hannergrond|Grundlage|Geçmiş|Fundo|Fono|First off|Dis is what went down|Dasar|Contexto|Contexte|Context|Contesto|Cenário de Fundo|Cenario de Fundo|Cefndir|Bối cảnh|Bakgrunnur|Bakgrunn|Bakgrund|Baggrund|Background|B4|Antecedents|Antecedentes|Ær|Aer|Achtergrond):/)){state.allowPlaceholders=!1;state.allowSteps=!0;state.allowBackground=!1;state.allowMultilineArgument=!1;state.inKeywordLine=!0;return"keyword"}else if(!state.inKeywordLine&&state.allowScenario&&stream.match(/(場景大綱|场景大纲|劇本大綱|剧本大纲|テンプレ|シナリオテンプレート|シナリオテンプレ|シナリオアウトライン|시나리오 개요|สรุปเหตุการณ์|โครงสร้างของเหตุการณ์|ವಿವರಣೆ|కథనం|ਪਟਕਥਾ ਰੂਪ ਰੇਖਾ|ਪਟਕਥਾ ਢਾਂਚਾ|परिदृश्य रूपरेखा|سيناريو مخطط|الگوی سناریو|תבנית תרחיש|Сценарийның төзелеше|Сценарий структураси|Структура сценарію|Структура сценария|Структура сценарија|Скица|Рамка на сценарий|Концепт|Περιγραφή Σεναρίου|Wharrimean is|Template Situai|Template Senario|Template Keadaan|Tapausaihio|Szenariogrundriss|Szablon scenariusza|Swa hwær swa|Swa hwaer swa|Struktura scenarija|Structură scenariu|Structura scenariu|Skica|Skenario konsep|Shiver me timbers|Senaryo taslağı|Schema dello scenario|Scenariomall|Scenariomal|Scenario Template|Scenario Outline|Scenario Amlinellol|Scenārijs pēc parauga|Scenarijaus šablonas|Reckon it's like|Raamstsenaarium|Plang vum Szenario|Plan du Scénario|Plan du scénario|Osnova scénáře|Osnova Scenára|Náčrt Scenáru|Náčrt Scénáře|Náčrt Scenára|MISHUN SRSLY|Menggariskan Senario|Lýsing Dæma|Lýsing Atburðarásar|Konturo de la scenaro|Koncept|Khung tình huống|Khung kịch bản|Forgatókönyv vázlat|Esquema do Cenário|Esquema do Cenario|Esquema del escenario|Esquema de l'escenari|Esbozo do escenario|Delineação do Cenário|Delineacao do Cenario|All y'all|Abstrakt Scenario|Abstract Scenario):/)){state.allowPlaceholders=!0;state.allowSteps=!0;state.allowMultilineArgument=!1;state.inKeywordLine=!0;return"keyword"}else if(state.allowScenario&&stream.match(/(例子|例|サンプル|예|ชุดของเหตุการณ์|ชุดของตัวอย่าง|ಉದಾಹರಣೆಗಳು|ఉదాహరణలు|ਉਦਾਹਰਨਾਂ|उदाहरण|نمونه ها|امثلة|דוגמאות|Үрнәкләр|Сценарији|Примеры|Примери|Приклади|Мисоллар|Мисаллар|Σενάρια|Παραδείγματα|You'll wanna|Voorbeelden|Variantai|Tapaukset|Se þe|Se the|Se ðe|Scenarios|Scenariji|Scenarijai|Przykłady|Primjeri|Primeri|Příklady|Príklady|Piemēri|Példák|Pavyzdžiai|Paraugs|Örnekler|Juhtumid|Exemplos|Exemples|Exemple|Exempel|EXAMPLZ|Examples|Esempi|Enghreifftiau|Ekzemploj|Eksempler|Ejemplos|Dữ liệu|Dead men tell no tales|Dæmi|Contoh|Cenários|Cenarios|Beispiller|Beispiele|Atburðarásir):/)){state.allowPlaceholders=!1;state.allowSteps=!0;state.allowBackground=!1;state.allowMultilineArgument=!0;return"keyword"}else if(!state.inKeywordLine&&state.allowScenario&&stream.match(/(場景|场景|劇本|剧本|シナリオ|시나리오|เหตุการณ์|ಕಥಾಸಾರಾಂಶ|సన్నివేశం|ਪਟਕਥਾ|परिदृश्य|سيناريو|سناریو|תרחיש|Сценарій|Сценарио|Сценарий|Пример|Σενάριο|Tình huống|The thing of it is|Tapaus|Szenario|Swa|Stsenaarium|Skenario|Situai|Senaryo|Senario|Scenaro|Scenariusz|Scenariu|Scénario|Scenario|Scenarijus|Scenārijs|Scenarij|Scenarie|Scénář|Scenár|Primer|MISHUN|Kịch bản|Keadaan|Heave to|Forgatókönyv|Escenario|Escenari|Cenário|Cenario|Awww, look mate|Atburðarás):/)){state.allowPlaceholders=!1;state.allowSteps=!0;state.allowBackground=!1;state.allowMultilineArgument=!1;state.inKeywordLine=!0;return"keyword"}else if(!state.inKeywordLine&&state.allowSteps&&stream.match(/(那麼|那么|而且|當|当|并且|同時|同时|前提|假设|假設|假定|假如|但是|但し|並且|もし|ならば|ただし|しかし|かつ|하지만|조건|먼저|만일|만약|단|그리고|그러면|และ |เมื่อ |แต่ |ดังนั้น |กำหนดให้ |ಸ್ಥಿತಿಯನ್ನು |ಮತ್ತು |ನೀಡಿದ |ನಂತರ |ಆದರೆ |మరియు |చెప్పబడినది |కాని |ఈ పరిస్థితిలో |అప్పుడు |ਪਰ |ਤਦ |ਜੇਕਰ |ਜਿਵੇਂ ਕਿ |ਜਦੋਂ |ਅਤੇ |यदि |परन्तु |पर |तब |तदा |तथा |जब |चूंकि |किन्तु |कदा |और |अगर |و |هنگامی |متى |لكن |عندما |ثم |بفرض |با فرض |اما |اذاً |آنگاه |כאשר |וגם |בהינתן |אזי |אז |אבל |Якщо |Һәм |Унда |Тоді |Тогда |То |Также |Та |Пусть |Припустимо, що |Припустимо |Онда |Но |Нехай |Нәтиҗәдә |Лекин |Ләкин |Коли |Когда |Когато |Када |Кад |К тому же |І |И |Задато |Задати |Задате |Если |Допустим |Дано |Дадено |Вә |Ва |Бирок |Әмма |Әйтик |Әгәр |Аммо |Али |Але |Агар |А також |А |Τότε |Όταν |Και |Δεδομένου |Αλλά |Þurh |Þegar |Þa þe |Þá |Þa |Zatati |Zakładając |Zadato |Zadate |Zadano |Zadani |Zadan |Za předpokladu |Za predpokladu |Youse know when youse got |Youse know like when |Yna |Yeah nah |Y'know |Y |Wun |Wtedy |When y'all |When |Wenn |WEN |wann |Ve |Và |Und |Un |ugeholl |Too right |Thurh |Thì |Then y'all |Then |Tha the |Tha |Tetapi |Tapi |Tak |Tada |Tad |Stel |Soit |Siis |Și |Şi |Si |Sed |Se |Så |Quando |Quand |Quan |Pryd |Potom |Pokud |Pokiaľ |Però |Pero |Pak |Oraz |Onda |Ond |Oletetaan |Og |Och |O zaman |Niin |Nhưng |När |Når |Mutta |Men |Mas |Maka |Majd |Mając |Mais |Maar |mä |Ma |Lorsque |Lorsqu'|Logo |Let go and haul |Kun |Kuid |Kui |Kiedy |Khi |Ketika |Kemudian |Keď |Když |Kaj |Kai |Kada |Kad |Jeżeli |Jeśli |Ja |It's just unbelievable |Ir |I CAN HAZ |I |Ha |Givun |Givet |Given y'all |Given |Gitt |Gegeven |Gegeben seien |Gegeben sei |Gdy |Gangway! |Fakat |Étant donnés |Etant donnés |Étant données |Etant données |Étant donnée |Etant donnée |Étant donné |Etant donné |Et |És |Entonces |Entón |Então |Entao |En |Eğer ki |Ef |Eeldades |E |Ðurh |Duota |Dun |Donitaĵo |Donat |Donada |Do |Diyelim ki |Diberi |Dengan |Den youse gotta |DEN |De |Dato |Dați fiind |Daţi fiind |Dati fiind |Dati |Date fiind |Date |Data |Dat fiind |Dar |Dann |dann |Dan |Dados |Dado |Dadas |Dada |Ða ðe |Ða |Cuando |Cho |Cando |Când |Cand |Cal |But y'all |But at the end of the day I reckon |BUT |But |Buh |Blimey! |Biết |Bet |Bagi |Aye |awer |Avast! |Atunci |Atesa |Atès |Apabila |Anrhegedig a |Angenommen |And y'all |And |AN |An |an |Amikor |Amennyiben |Ama |Als |Alors |Allora |Ali |Aleshores |Ale |Akkor |Ak |Adott |Ac |Aber |A zároveň |A tiež |A taktiež |A také |A |a |7 |\* )/)){state.inStep=!0;state.allowPlaceholders=!0;state.allowMultilineArgument=!0;state.inKeywordLine=!0;return"keyword"}else if(stream.match(/"[^"]*"?/)){return"string"}else if(state.allowPlaceholders&&stream.match(/<[^>]*>?/)){return"variable"}else{stream.next();stream.eatWhile(/[^@"<#]/);return null}}}});CodeMirror.defineMIME("text/x-feature","gherkin")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("go",function(config){var indentUnit=config.indentUnit;var keywords={"break":!0,"case":!0,"chan":!0,"const":!0,"continue":!0,"default":!0,"defer":!0,"else":!0,"fallthrough":!0,"for":!0,"func":!0,"go":!0,"goto":!0,"if":!0,"import":!0,"interface":!0,"map":!0,"package":!0,"range":!0,"return":!0,"select":!0,"struct":!0,"switch":!0,"type":!0,"var":!0,"bool":!0,"byte":!0,"complex64":!0,"complex128":!0,"float32":!0,"float64":!0,"int8":!0,"int16":!0,"int32":!0,"int64":!0,"string":!0,"uint8":!0,"uint16":!0,"uint32":!0,"uint64":!0,"int":!0,"uint":!0,"uintptr":!0,"error":!0};var atoms={"true":!0,"false":!0,"iota":!0,"nil":!0,"append":!0,"cap":!0,"close":!0,"complex":!0,"copy":!0,"imag":!0,"len":!0,"make":!0,"new":!0,"panic":!0,"print":!0,"println":!0,"real":!0,"recover":!0};var isOperatorChar=/[+\-*&^%:=<>!|\/]/;var curPunc;function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"||ch=="`"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(/[\d\.]/.test(ch)){if(ch=="."){stream.match(/^[0-9]+([eE][\-+]?[0-9]+)?/)}else if(ch=="0"){stream.match(/^[xX][0-9a-fA-F]+/)||stream.match(/^0[0-7]+/)}else{stream.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/)}
return"number"}
if(/[\[\]{}\(\),;\:\.]/.test(ch)){curPunc=ch;return null}
if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}
if(stream.eat("/")){stream.skipToEnd();return"comment"}}
if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}
stream.eatWhile(/[\w\$_\xa1-\uffff]/);var cur=stream.current();if(keywords.propertyIsEnumerable(cur)){if(cur=="case"||cur=="default")curPunc="case";return"keyword"}
if(atoms.propertyIsEnumerable(cur))return"atom";return"variable"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&quote!="`"&&next=="\\"}
if(end||!(escaped||quote=="`"))
state.tokenize=tokenBase;return"string"}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return"comment"}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}
function pushContext(state,col,type){return state.context=new Context(state.indented,col,type,null,state.context)}
function popContext(state){if(!state.context.prev)return;var t=state.context.type;if(t==")"||t=="]"||t=="}")
state.indented=state.context.indented;return state.context=state.context.prev}
return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",!1),indented:0,startOfLine:!0}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0;if(ctx.type=="case")ctx.type="}"}
if(stream.eatSpace())return null;curPunc=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment")return style;if(ctx.align==null)ctx.align=!0;if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="case")ctx.type="case";else if(curPunc=="}"&&ctx.type=="}")ctx=popContext(state);else if(curPunc==ctx.type)popContext(state);state.startOfLine=!1;return style},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&state.tokenize!=null)return 0;var ctx=state.context,firstChar=textAfter&&textAfter.charAt(0);if(ctx.type=="case"&&/^(?:case|default)\b/.test(textAfter)){state.context.type="}";return ctx.indented}
var closing=firstChar==ctx.type;if(ctx.align)return ctx.column+(closing?0:1);else return ctx.indented+(closing?0:indentUnit)},electricChars:"{}):",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});CodeMirror.defineMIME("text/x-go","go")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("groovy",function(config){function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var keywords=words("abstract as assert boolean break byte case catch char class const continue def default "+"do double else enum extends final finally float for goto if implements import in "+"instanceof int interface long native new package private protected public return "+"short static strictfp super switch synchronized threadsafe throw throws transient "+"try void volatile while");var blockKeywords=words("catch class do else finally for if switch try while enum interface def");var standaloneKeywords=words("return break continue");var atoms=words("null true false this");var curPunc;function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"){return startString(ch,stream,state)}
if(/[\[\]{}\(\),;\:\.]/.test(ch)){curPunc=ch;return null}
if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);if(stream.eat(/eE/)){stream.eat(/\+\-/);stream.eatWhile(/\d/)}
return"number"}
if(ch=="/"){if(stream.eat("*")){state.tokenize.push(tokenComment);return tokenComment(stream,state)}
if(stream.eat("/")){stream.skipToEnd();return"comment"}
if(expectExpression(state.lastToken,!1)){return startString(ch,stream,state)}}
if(ch=="-"&&stream.eat(">")){curPunc="->";return null}
if(/[+\-*&%=<>!?|\/~]/.test(ch)){stream.eatWhile(/[+\-*&%=<>|~]/);return"operator"}
stream.eatWhile(/[\w\$_]/);if(ch=="@"){stream.eatWhile(/[\w\$_\.]/);return"meta"}
if(state.lastToken==".")return"property";if(stream.eat(":")){curPunc="proplabel";return"property"}
var cur=stream.current();if(atoms.propertyIsEnumerable(cur)){return"atom"}
if(keywords.propertyIsEnumerable(cur)){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";else if(standaloneKeywords.propertyIsEnumerable(cur))curPunc="standalone";return"keyword"}
return"variable"}
tokenBase.isBase=!0;function startString(quote,stream,state){var tripleQuoted=!1;if(quote!="/"&&stream.eat(quote)){if(stream.eat(quote))tripleQuoted=!0;else return"string"}
function t(stream,state){var escaped=!1,next,end=!tripleQuoted;while((next=stream.next())!=null){if(next==quote&&!escaped){if(!tripleQuoted){break}
if(stream.match(quote+quote)){end=!0;break}}
if(quote=='"'&&next=="$"&&!escaped&&stream.eat("{")){state.tokenize.push(tokenBaseUntilBrace());return"string"}
escaped=!escaped&&next=="\\"}
if(end)state.tokenize.pop();return"string"}
state.tokenize.push(t);return t(stream,state)}
function tokenBaseUntilBrace(){var depth=1;function t(stream,state){if(stream.peek()=="}"){depth--;if(depth==0){state.tokenize.pop();return state.tokenize[state.tokenize.length-1](stream,state)}}else if(stream.peek()=="{"){depth++}
return tokenBase(stream,state)}
t.isBase=!0;return t}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize.pop();break}
maybeEnd=(ch=="*")}
return"comment"}
function expectExpression(last,newline){return!last||last=="operator"||last=="->"||/[\.\[\{\(,;:]/.test(last)||last=="newstatement"||last=="keyword"||last=="proplabel"||(last=="standalone"&&!newline)}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}
function pushContext(state,col,type){return state.context=new Context(state.indented,col,type,null,state.context)}
function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}")
state.indented=state.context.indented;return state.context=state.context.prev}
return{startState:function(basecolumn){return{tokenize:[tokenBase],context:new Context((basecolumn||0)-config.indentUnit,0,"top",!1),indented:0,startOfLine:!0,lastToken:null}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0;if(ctx.type=="statement"&&!expectExpression(state.lastToken,!0)){popContext(state);ctx=state.context}}
if(stream.eatSpace())return null;curPunc=null;var style=state.tokenize[state.tokenize.length-1](stream,state);if(style=="comment")return style;if(ctx.align==null)ctx.align=!0;if((curPunc==";"||curPunc==":")&&ctx.type=="statement")popContext(state);else if(curPunc=="->"&&ctx.type=="statement"&&ctx.prev.type=="}"){popContext(state);state.context.align=!1}else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state);}else if(curPunc==ctx.type)popContext(state);else if(ctx.type=="}"||ctx.type=="top"||(ctx.type=="statement"&&curPunc=="newstatement"))
pushContext(state,stream.column(),"statement");state.startOfLine=!1;state.lastToken=curPunc||style;return style},indent:function(state,textAfter){if(!state.tokenize[state.tokenize.length-1].isBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),ctx=state.context;if(ctx.type=="statement"&&!expectExpression(state.lastToken,!0))ctx=ctx.prev;var closing=firstChar==ctx.type;if(ctx.type=="statement")return ctx.indented+(firstChar=="{"?0:config.indentUnit);else if(ctx.align)return ctx.column+(closing?0:1);else return ctx.indented+(closing?0:config.indentUnit)},electricChars:"{}",closeBrackets:{triples:"'\""},fold:"brace"}});CodeMirror.defineMIME("text/x-groovy","groovy")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../ruby/ruby"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../htmlmixed/htmlmixed","../ruby/ruby"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("haml",function(config){var htmlMode=CodeMirror.getMode(config,{name:"htmlmixed"});var rubyMode=CodeMirror.getMode(config,"ruby");function rubyInQuote(endQuote){return function(stream,state){var ch=stream.peek();if(ch==endQuote&&state.rubyState.tokenize.length==1){stream.next();state.tokenize=html;return"closeAttributeTag"}else{return ruby(stream,state)}}}
function ruby(stream,state){if(stream.match("-#")){stream.skipToEnd();return"comment"}
return rubyMode.token(stream,state.rubyState)}
function html(stream,state){var ch=stream.peek();if(state.previousToken.style=="comment"){if(state.indented>state.previousToken.indented){stream.skipToEnd();return"commentLine"}}
if(state.startOfLine){if(ch=="!"&&stream.match("!!")){stream.skipToEnd();return"tag"}else if(stream.match(/^%[\w:#\.]+=/)){state.tokenize=ruby;return"hamlTag"}else if(stream.match(/^%[\w:]+/)){return"hamlTag"}else if(ch=="/"){stream.skipToEnd();return"comment"}}
if(state.startOfLine||state.previousToken.style=="hamlTag"){if(ch=="#"||ch=="."){stream.match(/[\w-#\.]*/);return"hamlAttribute"}}
if(state.startOfLine&&!stream.match("-->",!1)&&(ch=="="||ch=="-")){state.tokenize=ruby;return state.tokenize(stream,state)}
if(state.previousToken.style=="hamlTag"||state.previousToken.style=="closeAttributeTag"||state.previousToken.style=="hamlAttribute"){if(ch=="("){state.tokenize=rubyInQuote(")");return state.tokenize(stream,state)}else if(ch=="{"){if(!stream.match(/^\{%.*/)){state.tokenize=rubyInQuote("}");return state.tokenize(stream,state)}}}
return htmlMode.token(stream,state.htmlState)}
return{startState:function(){var htmlState=CodeMirror.startState(htmlMode);var rubyState=CodeMirror.startState(rubyMode);return{htmlState:htmlState,rubyState:rubyState,indented:0,previousToken:{style:null,indented:0},tokenize:html}},copyState:function(state){return{htmlState:CodeMirror.copyState(htmlMode,state.htmlState),rubyState:CodeMirror.copyState(rubyMode,state.rubyState),indented:state.indented,previousToken:state.previousToken,tokenize:state.tokenize}},token:function(stream,state){if(stream.sol()){state.indented=stream.indentation();state.startOfLine=!0}
if(stream.eatSpace())return null;var style=state.tokenize(stream,state);state.startOfLine=!1;if(style&&style!="commentLine"){state.previousToken={style:style,indented:state.indented}}
if(stream.eol()&&state.tokenize==ruby){stream.backUp(1);var ch=stream.peek();stream.next();if(ch&&ch!=","){state.tokenize=html}}
if(style=="hamlTag"){style="tag"}else if(style=="commentLine"){style="comment"}else if(style=="hamlAttribute"){style="attribute"}else if(style=="closeAttributeTag"){style=null}
return style}}},"htmlmixed","ruby");CodeMirror.defineMIME("text/x-haml","haml")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({tabSize:4,indentUnit:2},"haml");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("elementName","[tag %h1] Hey There");MT("oneElementPerLine","[tag %h1] Hey There %h2");MT("idSelector","[tag %h1][attribute #test] Hey There");MT("classSelector","[tag %h1][attribute .hello] Hey There");MT("docType","[tag !!! XML]");MT("comment","[comment / Hello WORLD]");MT("notComment","[tag %h1] This is not a / comment ");MT("attributes","[tag %a]([variable title][operator =][string \"test\"]){[atom :title] [operator =>] [string \"test\"]}");MT("htmlCode","[tag&bracket <][tag h1][tag&bracket >]Title[tag&bracket </][tag h1][tag&bracket >]");MT("rubyBlock","[operator =][variable-2 @item]");MT("selectorRubyBlock","[tag %a.selector=] [variable-2 @item]");MT("nestedRubyBlock","[tag %a]","   [operator =][variable puts] [string \"test\"]");MT("multilinePlaintext","[tag %p]","  Hello,","  World");MT("multilineRuby","[tag %p]","  [comment -# this is a comment]","     [comment and this is a comment too]","  Date/Time","  [operator -] [variable now] [operator =] [tag DateTime][operator .][property now]","  [tag %strong=] [variable now]","  [operator -] [keyword if] [variable now] [operator >] [tag DateTime][operator .][property parse]([string \"December 31, 2006\"])","     [operator =][string \"Happy\"]","     [operator =][string \"Belated\"]","     [operator =][string \"Birthday\"]");MT("multilineComment","[comment /]","  [comment Multiline]","  [comment Comment]");MT("hamlComment","[comment -# this is a comment]");MT("multilineHamlComment","[comment -# this is a comment]","   [comment and this is a comment too]");MT("multilineHTMLComment","[comment <!--]","  [comment what a comment]","  [comment -->]");MT("hamlAfterRubyTag","[attribute .block]","  [tag %strong=] [variable now]","  [attribute .test]","     [operator =][variable now]","  [attribute .right]");MT("stretchedRuby","[operator =] [variable puts] [string \"Hello\"],","   [string \"World\"]");MT("interpolationInHashAttribute","[tag %div]{[atom :id] [operator =>] [string \"#{][variable test][string }_#{][variable ting][string }\"]} test");MT("interpolationInHTMLAttribute","[tag %div]([variable title][operator =][string \"#{][variable test][string }_#{][variable ting]()[string }\"]) Test")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../../addon/mode/simple"),require("../../addon/mode/multiplex"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../../addon/mode/simple","../../addon/mode/multiplex"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineSimpleMode("handlebars-tags",{start:[{regex:/\{\{!--/,push:"dash_comment",token:"comment"},{regex:/\{\{!/,push:"comment",token:"comment"},{regex:/\{\{/,push:"handlebars",token:"tag"}],handlebars:[{regex:/\}\}/,pop:!0,token:"tag"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"},{regex:/'(?:[^\\']|\\.)*'?/,token:"string"},{regex:/>|[#\/]([A-Za-z_]\w*)/,token:"keyword"},{regex:/(?:else|this)\b/,token:"keyword"},{regex:/\d+/i,token:"number"},{regex:/=|~|@|true|false/,token:"atom"},{regex:/(?:\.\.\/)*(?:[A-Za-z_][\w\.]*)+/,token:"variable-2"}],dash_comment:[{regex:/--\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],comment:[{regex:/\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}]});CodeMirror.defineMode("handlebars",function(config,parserConfig){var handlebars=CodeMirror.getMode(config,"handlebars-tags");if(!parserConfig||!parserConfig.base)return handlebars;return CodeMirror.multiplexingMode(CodeMirror.getMode(config,parserConfig.base),{open:"{{",close:"}}",mode:handlebars,parseDelimiters:!0})});CodeMirror.defineMIME("text/x-handlebars-template","handlebars")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("haskell",function(_config,modeConfig){function switchState(source,setState,f){setState(f);return f(source,setState)}
var smallRE=/[a-z_]/;var largeRE=/[A-Z]/;var digitRE=/\d/;var hexitRE=/[0-9A-Fa-f]/;var octitRE=/[0-7]/;var idRE=/[a-z_A-Z0-9'\xa1-\uffff]/;var symbolRE=/[-!#$%&*+.\/<=>?@\\^|~:]/;var specialRE=/[(),;[\]`{}]/;var whiteCharRE=/[ \t\v\f]/;function normal(source,setState){if(source.eatWhile(whiteCharRE)){return null}
var ch=source.next();if(specialRE.test(ch)){if(ch=='{'&&source.eat('-')){var t="comment";if(source.eat('#')){t="meta"}
return switchState(source,setState,ncomment(t,1))}
return null}
if(ch=='\''){if(source.eat('\\')){source.next()}else{source.next()}
if(source.eat('\'')){return"string"}
return"error"}
if(ch=='"'){return switchState(source,setState,stringLiteral)}
if(largeRE.test(ch)){source.eatWhile(idRE);if(source.eat('.')){return"qualifier"}
return"variable-2"}
if(smallRE.test(ch)){source.eatWhile(idRE);return"variable"}
if(digitRE.test(ch)){if(ch=='0'){if(source.eat(/[xX]/)){source.eatWhile(hexitRE);return"integer"}
if(source.eat(/[oO]/)){source.eatWhile(octitRE);return"number"}}
source.eatWhile(digitRE);var t="number";if(source.match(/^\.\d+/)){t="number"}
if(source.eat(/[eE]/)){t="number";source.eat(/[-+]/);source.eatWhile(digitRE)}
return t}
if(ch=="."&&source.eat("."))
return"keyword";if(symbolRE.test(ch)){if(ch=='-'&&source.eat(/-/)){source.eatWhile(/-/);if(!source.eat(symbolRE)){source.skipToEnd();return"comment"}}
var t="variable";if(ch==':'){t="variable-2"}
source.eatWhile(symbolRE);return t}
return"error"}
function ncomment(type,nest){if(nest==0){return normal}
return function(source,setState){var currNest=nest;while(!source.eol()){var ch=source.next();if(ch=='{'&&source.eat('-')){++currNest}else if(ch=='-'&&source.eat('}')){--currNest;if(currNest==0){setState(normal);return type}}}
setState(ncomment(type,currNest));return type}}
function stringLiteral(source,setState){while(!source.eol()){var ch=source.next();if(ch=='"'){setState(normal);return"string"}
if(ch=='\\'){if(source.eol()||source.eat(whiteCharRE)){setState(stringGap);return"string"}
if(source.eat('&')){}else{source.next()}}}
setState(normal);return"error"}
function stringGap(source,setState){if(source.eat('\\')){return switchState(source,setState,stringLiteral)}
source.next();setState(normal);return"error"}
var wellKnownWords=(function(){var wkw={};function setType(t){return function(){for(var i=0;i<arguments.length;i++)
wkw[arguments[i]]=t}}
setType("keyword")("case","class","data","default","deriving","do","else","foreign","if","import","in","infix","infixl","infixr","instance","let","module","newtype","of","then","type","where","_");setType("keyword")("\.\.",":","::","=","\\","\"","<-","->","@","~","=>");setType("builtin")("!!","$!","$","&&","+","++","-",".","/","/=","<","<=","=<<","==",">",">=",">>",">>=","^","^^","||","*","**");setType("builtin")("Bool","Bounded","Char","Double","EQ","Either","Enum","Eq","False","FilePath","Float","Floating","Fractional","Functor","GT","IO","IOError","Int","Integer","Integral","Just","LT","Left","Maybe","Monad","Nothing","Num","Ord","Ordering","Rational","Read","ReadS","Real","RealFloat","RealFrac","Right","Show","ShowS","String","True");setType("builtin")("abs","acos","acosh","all","and","any","appendFile","asTypeOf","asin","asinh","atan","atan2","atanh","break","catch","ceiling","compare","concat","concatMap","const","cos","cosh","curry","cycle","decodeFloat","div","divMod","drop","dropWhile","either","elem","encodeFloat","enumFrom","enumFromThen","enumFromThenTo","enumFromTo","error","even","exp","exponent","fail","filter","flip","floatDigits","floatRadix","floatRange","floor","fmap","foldl","foldl1","foldr","foldr1","fromEnum","fromInteger","fromIntegral","fromRational","fst","gcd","getChar","getContents","getLine","head","id","init","interact","ioError","isDenormalized","isIEEE","isInfinite","isNaN","isNegativeZero","iterate","last","lcm","length","lex","lines","log","logBase","lookup","map","mapM","mapM_","max","maxBound","maximum","maybe","min","minBound","minimum","mod","negate","not","notElem","null","odd","or","otherwise","pi","pred","print","product","properFraction","putChar","putStr","putStrLn","quot","quotRem","read","readFile","readIO","readList","readLn","readParen","reads","readsPrec","realToFrac","recip","rem","repeat","replicate","return","reverse","round","scaleFloat","scanl","scanl1","scanr","scanr1","seq","sequence","sequence_","show","showChar","showList","showParen","showString","shows","showsPrec","significand","signum","sin","sinh","snd","span","splitAt","sqrt","subtract","succ","sum","tail","take","takeWhile","tan","tanh","toEnum","toInteger","toRational","truncate","uncurry","undefined","unlines","until","unwords","unzip","unzip3","userError","words","writeFile","zip","zip3","zipWith","zipWith3");var override=modeConfig.overrideKeywords;if(override)for(var word in override)if(override.hasOwnProperty(word))
wkw[word]=override[word];return wkw})();return{startState:function(){return{f:normal}},copyState:function(s){return{f:s.f}},token:function(stream,state){var t=state.f(stream,function(s){state.f=s});var w=stream.current();return wellKnownWords.hasOwnProperty(w)?wellKnownWords[w]:t},blockCommentStart:"{-",blockCommentEnd:"-}",lineComment:"--"}});CodeMirror.defineMIME("text/x-haskell","haskell")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../haskell/haskell"))
else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../haskell/haskell"],mod)
else mod(CodeMirror)})(function(CodeMirror){"use strict"
CodeMirror.defineMode("haskell-literate",function(config,parserConfig){var baseMode=CodeMirror.getMode(config,(parserConfig&&parserConfig.base)||"haskell")
return{startState:function(){return{inCode:!1,baseState:CodeMirror.startState(baseMode)}},token:function(stream,state){if(stream.sol()){if(state.inCode=stream.eat(">"))
return"meta"}
if(state.inCode){return baseMode.token(stream,state.baseState)}else{stream.skipToEnd()
return"comment"}},innerMode:function(state){return state.inCode?{state:state.baseState,mode:baseMode}:null}}},"haskell")
CodeMirror.defineMIME("text/x-literate-haskell","haskell-literate")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("haxe",function(config,parserConfig){var indentUnit=config.indentUnit;function kw(type){return{type:type,style:"keyword"}}
var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c");var operator=kw("operator"),atom={type:"atom",style:"atom"},attribute={type:"attribute",style:"attribute"};var type=kw("typedef");var keywords={"if":A,"while":A,"else":B,"do":B,"try":B,"return":C,"break":C,"continue":C,"new":C,"throw":C,"var":kw("var"),"inline":attribute,"static":attribute,"using":kw("import"),"public":attribute,"private":attribute,"cast":kw("cast"),"import":kw("import"),"macro":kw("macro"),"function":kw("function"),"catch":kw("catch"),"untyped":kw("untyped"),"callback":kw("cb"),"for":kw("for"),"switch":kw("switch"),"case":kw("case"),"default":kw("default"),"in":operator,"never":kw("property_access"),"trace":kw("trace"),"class":type,"abstract":type,"enum":type,"interface":type,"typedef":type,"extends":type,"implements":type,"dynamic":type,"true":atom,"false":atom,"null":atom};var isOperatorChar=/[+\-*&%=<>!?|]/;function chain(stream,state,f){state.tokenize=f;return f(stream,state)}
function toUnescaped(stream,end){var escaped=!1,next;while((next=stream.next())!=null){if(next==end&&!escaped)
return!0;escaped=!escaped&&next=="\\"}}
var type,content;function ret(tp,style,cont){type=tp;content=cont;return style}
function haxeTokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"){return chain(stream,state,haxeTokenString(ch))}else if(/[\[\]{}\(\),;\:\.]/.test(ch)){return ret(ch)}else if(ch=="0"&&stream.eat(/x/i)){stream.eatWhile(/[\da-f]/i);return ret("number","number")}else if(/\d/.test(ch)||ch=="-"&&stream.eat(/\d/)){stream.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/);return ret("number","number")}else if(state.reAllowed&&(ch=="~"&&stream.eat(/\//))){toUnescaped(stream,"/");stream.eatWhile(/[gimsu]/);return ret("regexp","string-2")}else if(ch=="/"){if(stream.eat("*")){return chain(stream,state,haxeTokenComment)}else if(stream.eat("/")){stream.skipToEnd();return ret("comment","comment")}else{stream.eatWhile(isOperatorChar);return ret("operator",null,stream.current())}}else if(ch=="#"){stream.skipToEnd();return ret("conditional","meta")}else if(ch=="@"){stream.eat(/:/);stream.eatWhile(/[\w_]/);return ret("metadata","meta")}else if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return ret("operator",null,stream.current())}else{var word;if(/[A-Z]/.test(ch)){stream.eatWhile(/[\w_<>]/);word=stream.current();return ret("type","variable-3",word)}else{stream.eatWhile(/[\w_]/);var word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return(known&&state.kwAllowed)?ret(known.type,known.style,word):ret("variable","variable",word)}}}
function haxeTokenString(quote){return function(stream,state){if(toUnescaped(stream,quote))
state.tokenize=haxeTokenBase;return ret("string","string")}}
function haxeTokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=haxeTokenBase;break}
maybeEnd=(ch=="*")}
return ret("comment","comment")}
var atomicTypes={"atom":!0,"number":!0,"variable":!0,"string":!0,"regexp":!0};function HaxeLexical(indented,column,type,align,prev,info){this.indented=indented;this.column=column;this.type=type;this.prev=prev;this.info=info;if(align!=null)this.align=align}
function inScope(state,varname){for(var v=state.localVars;v;v=v.next)
if(v.name==varname)return!0}
function parseHaxe(state,style,type,content,stream){var cc=state.cc;cx.state=state;cx.stream=stream;cx.marked=null,cx.cc=cc;if(!state.lexical.hasOwnProperty("align"))
state.lexical.align=!0;while(!0){var combinator=cc.length?cc.pop():statement;if(combinator(type,content)){while(cc.length&&cc[cc.length-1].lex)
cc.pop()();if(cx.marked)return cx.marked;if(type=="variable"&&inScope(state,content))return"variable-2";if(type=="variable"&&imported(state,content))return"variable-3";return style}}}
function imported(state,typename){if(/[a-z]/.test(typename.charAt(0)))
return!1;var len=state.importedtypes.length;for(var i=0;i<len;i++)
if(state.importedtypes[i]==typename)return!0}
function registerimport(importname){var state=cx.state;for(var t=state.importedtypes;t;t=t.next)
if(t.name==importname)return;state.importedtypes={name:importname,next:state.importedtypes}}
var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;i>=0;i--)cx.cc.push(arguments[i]);}
function cont(){pass.apply(null,arguments);return!0}
function inList(name,list){for(var v=list;v;v=v.next)
if(v.name==name)return!0;return!1}
function register(varname){var state=cx.state;if(state.context){cx.marked="def";if(inList(varname,state.localVars))return;state.localVars={name:varname,next:state.localVars}}else if(state.globalVars){if(inList(varname,state.globalVars))return;state.globalVars={name:varname,next:state.globalVars}}}
var defaultVars={name:"this",next:null};function pushcontext(){if(!cx.state.context)cx.state.localVars=defaultVars;cx.state.context={prev:cx.state.context,vars:cx.state.localVars}}
function popcontext(){cx.state.localVars=cx.state.context.vars;cx.state.context=cx.state.context.prev}
popcontext.lex=!0;function pushlex(type,info){var result=function(){var state=cx.state;state.lexical=new HaxeLexical(state.indented,cx.stream.column(),type,null,state.lexical,info)};result.lex=!0;return result}
function poplex(){var state=cx.state;if(state.lexical.prev){if(state.lexical.type==")")
state.indented=state.lexical.indented;state.lexical=state.lexical.prev}}
poplex.lex=!0;function expect(wanted){function f(type){if(type==wanted)return cont();else if(wanted==";")return pass();else return cont(f)}
return f}
function statement(type){if(type=="@")return cont(metadef);if(type=="var")return cont(pushlex("vardef"),vardef1,expect(";"),poplex);if(type=="keyword a")return cont(pushlex("form"),expression,statement,poplex);if(type=="keyword b")return cont(pushlex("form"),statement,poplex);if(type=="{")return cont(pushlex("}"),pushcontext,block,poplex,popcontext);if(type==";")return cont();if(type=="attribute")return cont(maybeattribute);if(type=="function")return cont(functiondef);if(type=="for")return cont(pushlex("form"),expect("("),pushlex(")"),forspec1,expect(")"),poplex,statement,poplex);if(type=="variable")return cont(pushlex("stat"),maybelabel);if(type=="switch")return cont(pushlex("form"),expression,pushlex("}","switch"),expect("{"),block,poplex,poplex);if(type=="case")return cont(expression,expect(":"));if(type=="default")return cont(expect(":"));if(type=="catch")return cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext);if(type=="import")return cont(importdef,expect(";"));if(type=="typedef")return cont(typedef);return pass(pushlex("stat"),expression,expect(";"),poplex)}
function expression(type){if(atomicTypes.hasOwnProperty(type))return cont(maybeoperator);if(type=="type")return cont(maybeoperator);if(type=="function")return cont(functiondef);if(type=="keyword c")return cont(maybeexpression);if(type=="(")return cont(pushlex(")"),maybeexpression,expect(")"),poplex,maybeoperator);if(type=="operator")return cont(expression);if(type=="[")return cont(pushlex("]"),commasep(maybeexpression,"]"),poplex,maybeoperator);if(type=="{")return cont(pushlex("}"),commasep(objprop,"}"),poplex,maybeoperator);return cont()}
function maybeexpression(type){if(type.match(/[;\}\)\],]/))return pass();return pass(expression)}
function maybeoperator(type,value){if(type=="operator"&&/\+\+|--/.test(value))return cont(maybeoperator);if(type=="operator"||type==":")return cont(expression);if(type==";")return;if(type=="(")return cont(pushlex(")"),commasep(expression,")"),poplex,maybeoperator);if(type==".")return cont(property,maybeoperator);if(type=="[")return cont(pushlex("]"),expression,expect("]"),poplex,maybeoperator)}
function maybeattribute(type){if(type=="attribute")return cont(maybeattribute);if(type=="function")return cont(functiondef);if(type=="var")return cont(vardef1)}
function metadef(type){if(type==":")return cont(metadef);if(type=="variable")return cont(metadef);if(type=="(")return cont(pushlex(")"),commasep(metaargs,")"),poplex,statement)}
function metaargs(type){if(type=="variable")return cont()}
function importdef(type,value){if(type=="variable"&&/[A-Z]/.test(value.charAt(0))){registerimport(value);return cont()}else if(type=="variable"||type=="property"||type=="."||value=="*")return cont(importdef)}
function typedef(type,value){if(type=="variable"&&/[A-Z]/.test(value.charAt(0))){registerimport(value);return cont()}else if(type=="type"&&/[A-Z]/.test(value.charAt(0))){return cont()}}
function maybelabel(type){if(type==":")return cont(poplex,statement);return pass(maybeoperator,expect(";"),poplex)}
function property(type){if(type=="variable"){cx.marked="property";return cont()}}
function objprop(type){if(type=="variable")cx.marked="property";if(atomicTypes.hasOwnProperty(type))return cont(expect(":"),expression)}
function commasep(what,end){function proceed(type){if(type==",")return cont(what,proceed);if(type==end)return cont();return cont(expect(end))}
return function(type){if(type==end)return cont();else return pass(what,proceed)}}
function block(type){if(type=="}")return cont();return pass(statement,block)}
function vardef1(type,value){if(type=="variable"){register(value);return cont(typeuse,vardef2)}
return cont()}
function vardef2(type,value){if(value=="=")return cont(expression,vardef2);if(type==",")return cont(vardef1)}
function forspec1(type,value){if(type=="variable"){register(value);return cont(forin,expression)}else{return pass()}}
function forin(_type,value){if(value=="in")return cont()}
function functiondef(type,value){if(type=="variable"||type=="type"){register(value);return cont(functiondef)}
if(value=="new")return cont(functiondef);if(type=="(")return cont(pushlex(")"),pushcontext,commasep(funarg,")"),poplex,typeuse,statement,popcontext)}
function typeuse(type){if(type==":")return cont(typestring)}
function typestring(type){if(type=="type")return cont();if(type=="variable")return cont();if(type=="{")return cont(pushlex("}"),commasep(typeprop,"}"),poplex)}
function typeprop(type){if(type=="variable")return cont(typeuse)}
function funarg(type,value){if(type=="variable"){register(value);return cont(typeuse)}}
return{startState:function(basecolumn){var defaulttypes=["Int","Float","String","Void","Std","Bool","Dynamic","Array"];var state={tokenize:haxeTokenBase,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new HaxeLexical((basecolumn||0)-indentUnit,0,"block",!1),localVars:parserConfig.localVars,importedtypes:defaulttypes,context:parserConfig.localVars&&{vars:parserConfig.localVars},indented:0};if(parserConfig.globalVars&&typeof parserConfig.globalVars=="object")
state.globalVars=parserConfig.globalVars;return state},token:function(stream,state){if(stream.sol()){if(!state.lexical.hasOwnProperty("align"))
state.lexical.align=!1;state.indented=stream.indentation()}
if(stream.eatSpace())return null;var style=state.tokenize(stream,state);if(type=="comment")return style;state.reAllowed=!!(type=="operator"||type=="keyword c"||type.match(/^[\[{}\(,;:]$/));state.kwAllowed=type!='.';return parseHaxe(state,style,type,content,stream)},indent:function(state,textAfter){if(state.tokenize!=haxeTokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical;if(lexical.type=="stat"&&firstChar=="}")lexical=lexical.prev;var type=lexical.type,closing=firstChar==type;if(type=="vardef")return lexical.indented+4;else if(type=="form"&&firstChar=="{")return lexical.indented;else if(type=="stat"||type=="form")return lexical.indented+indentUnit;else if(lexical.info=="switch"&&!closing)
return lexical.indented+(/^(?:case|default)\b/.test(textAfter)?indentUnit:2*indentUnit);else if(lexical.align)return lexical.column+(closing?0:1);else return lexical.indented+(closing?0:indentUnit)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});CodeMirror.defineMIME("text/x-haxe","haxe");CodeMirror.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(stream,state){var ch=stream.peek();var sol=stream.sol();if(ch=="#"){stream.skipToEnd();return"comment"}
if(sol&&ch=="-"){var style="variable-2";stream.eat(/-/);if(stream.peek()=="-"){stream.eat(/-/);style="keyword a"}
if(stream.peek()=="D"){stream.eat(/[D]/);style="keyword c";state.define=!0}
stream.eatWhile(/[A-Z]/i);return style}
var ch=stream.peek();if(state.inString==!1&&ch=="'"){state.inString=!0;ch=stream.next()}
if(state.inString==!0){if(stream.skipTo("'")){}else{stream.skipToEnd()}
if(stream.peek()=="'"){stream.next();state.inString=!1}
return"string"}
stream.next();return null},lineComment:"#"}});CodeMirror.defineMIME("text/x-hxml","hxml")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/multiplex"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/multiplex"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("htmlembedded",function(config,parserConfig){return CodeMirror.multiplexingMode(CodeMirror.getMode(config,"htmlmixed"),{open:parserConfig.open||parserConfig.scriptStartRegex||"<%",close:parserConfig.close||parserConfig.scriptEndRegex||"%>",mode:CodeMirror.getMode(config,parserConfig.scriptingModeSpec)})},"htmlmixed");CodeMirror.defineMIME("application/x-ejs",{name:"htmlembedded",scriptingModeSpec:"javascript"});CodeMirror.defineMIME("application/x-aspx",{name:"htmlembedded",scriptingModeSpec:"text/x-csharp"});CodeMirror.defineMIME("application/x-jsp",{name:"htmlembedded",scriptingModeSpec:"text/x-java"});CodeMirror.defineMIME("application/x-erb",{name:"htmlembedded",scriptingModeSpec:"ruby"})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var defaultTags={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function maybeBackup(stream,pat,style){var cur=stream.current(),close=cur.search(pat);if(close>-1){stream.backUp(cur.length-close)}else if(cur.match(/<\/?$/)){stream.backUp(cur.length);if(!stream.match(pat,!1))stream.match(cur)}
return style}
var attrRegexpCache={};function getAttrRegexp(attr){var regexp=attrRegexpCache[attr];if(regexp)return regexp;return attrRegexpCache[attr]=new RegExp("\\s+"+attr+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")}
function getAttrValue(text,attr){var match=text.match(getAttrRegexp(attr))
return match?/^\s*(.*?)\s*$/.exec(match[2])[1]:""}
function getTagRegexp(tagName,anchored){return new RegExp((anchored?"^":"")+"<\/\s*"+tagName+"\s*>","i")}
function addTags(from,to){for(var tag in from){var dest=to[tag]||(to[tag]=[]);var source=from[tag];for(var i=source.length-1;i>=0;i--)
dest.unshift(source[i])}}
function findMatchingMode(tagInfo,tagText){for(var i=0;i<tagInfo.length;i++){var spec=tagInfo[i];if(!spec[0]||spec[1].test(getAttrValue(tagText,spec[0])))return spec[2]}}
CodeMirror.defineMode("htmlmixed",function(config,parserConfig){var htmlMode=CodeMirror.getMode(config,{name:"xml",htmlMode:!0,multilineTagIndentFactor:parserConfig.multilineTagIndentFactor,multilineTagIndentPastTag:parserConfig.multilineTagIndentPastTag});var tags={};var configTags=parserConfig&&parserConfig.tags,configScript=parserConfig&&parserConfig.scriptTypes;addTags(defaultTags,tags);if(configTags)addTags(configTags,tags);if(configScript)for(var i=configScript.length-1;i>=0;i--)
tags.script.unshift(["type",configScript[i].matches,configScript[i].mode])
function html(stream,state){var style=htmlMode.token(stream,state.htmlState),tag=/\btag\b/.test(style),tagName
if(tag&&!/[<>\s\/]/.test(stream.current())&&(tagName=state.htmlState.tagName&&state.htmlState.tagName.toLowerCase())&&tags.hasOwnProperty(tagName)){state.inTag=tagName+" "}else if(state.inTag&&tag&&/>$/.test(stream.current())){var inTag=/^([\S]+) (.*)/.exec(state.inTag)
state.inTag=null
var modeSpec=stream.current()==">"&&findMatchingMode(tags[inTag[1]],inTag[2])
var mode=CodeMirror.getMode(config,modeSpec)
var endTagA=getTagRegexp(inTag[1],!0),endTag=getTagRegexp(inTag[1],!1);state.token=function(stream,state){if(stream.match(endTagA,!1)){state.token=html;state.localState=state.localMode=null;return null}
return maybeBackup(stream,endTag,state.localMode.token(stream,state.localState))};state.localMode=mode;state.localState=CodeMirror.startState(mode,htmlMode.indent(state.htmlState,""))}else if(state.inTag){state.inTag+=stream.current()
if(stream.eol())state.inTag+=" "}
return style};return{startState:function(){var state=CodeMirror.startState(htmlMode);return{token:html,inTag:null,localMode:null,localState:null,htmlState:state}},copyState:function(state){var local;if(state.localState){local=CodeMirror.copyState(state.localMode,state.localState)}
return{token:state.token,inTag:state.inTag,localMode:state.localMode,localState:local,htmlState:CodeMirror.copyState(htmlMode,state.htmlState)}},token:function(stream,state){return state.token(stream,state)},indent:function(state,textAfter){if(!state.localMode||/^\s*<\//.test(textAfter))
return htmlMode.indent(state.htmlState,textAfter);else if(state.localMode.indent)
return state.localMode.indent(state.localState,textAfter);else return CodeMirror.Pass},innerMode:function(state){return{state:state.localState||state.htmlState,mode:state.localMode||htmlMode}}}},"xml","javascript","css");CodeMirror.defineMIME("text/html","htmlmixed")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("http",function(){function failFirstLine(stream,state){stream.skipToEnd();state.cur=header;return"error"}
function start(stream,state){if(stream.match(/^HTTP\/\d\.\d/)){state.cur=responseStatusCode;return"keyword"}else if(stream.match(/^[A-Z]+/)&&/[ \t]/.test(stream.peek())){state.cur=requestPath;return"keyword"}else{return failFirstLine(stream,state)}}
function responseStatusCode(stream,state){var code=stream.match(/^\d+/);if(!code)return failFirstLine(stream,state);state.cur=responseStatusText;var status=Number(code[0]);if(status>=100&&status<200){return"positive informational"}else if(status>=200&&status<300){return"positive success"}else if(status>=300&&status<400){return"positive redirect"}else if(status>=400&&status<500){return"negative client-error"}else if(status>=500&&status<600){return"negative server-error"}else{return"error"}}
function responseStatusText(stream,state){stream.skipToEnd();state.cur=header;return null}
function requestPath(stream,state){stream.eatWhile(/\S/);state.cur=requestProtocol;return"string-2"}
function requestProtocol(stream,state){if(stream.match(/^HTTP\/\d\.\d$/)){state.cur=header;return"keyword"}else{return failFirstLine(stream,state)}}
function header(stream){if(stream.sol()&&!stream.eat(/[ \t]/)){if(stream.match(/^.*?:/)){return"atom"}else{stream.skipToEnd();return"error"}}else{stream.skipToEnd();return"string"}}
function body(stream){stream.skipToEnd();return null}
return{token:function(stream,state){var cur=state.cur;if(cur!=header&&cur!=body&&stream.eatSpace())return null;return cur(stream,state)},blankLine:function(state){state.cur=body},startState:function(){return{cur:start}}}});CodeMirror.defineMIME("message/http","http")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function wordRegexp(words){return new RegExp('^(('+words.join(')|(')+'))\\b','i')};var builtinArray=['a_correlate','abs','acos','adapt_hist_equal','alog','alog2','alog10','amoeba','annotate','app_user_dir','app_user_dir_query','arg_present','array_equal','array_indices','arrow','ascii_template','asin','assoc','atan','axis','axis','bandpass_filter','bandreject_filter','barplot','bar_plot','beseli','beselj','beselk','besely','beta','biginteger','bilinear','bin_date','binary_template','bindgen','binomial','bit_ffs','bit_population','blas_axpy','blk_con','boolarr','boolean','boxplot','box_cursor','breakpoint','broyden','bubbleplot','butterworth','bytarr','byte','byteorder','bytscl','c_correlate','calendar','caldat','call_external','call_function','call_method','call_procedure','canny','catch','cd','cdf','ceil','chebyshev','check_math','chisqr_cvf','chisqr_pdf','choldc','cholsol','cindgen','cir_3pnt','clipboard','close','clust_wts','cluster','cluster_tree','cmyk_convert','code_coverage','color_convert','color_exchange','color_quan','color_range_map','colorbar','colorize_sample','colormap_applicable','colormap_gradient','colormap_rotation','colortable','comfit','command_line_args','common','compile_opt','complex','complexarr','complexround','compute_mesh_normals','cond','congrid','conj','constrained_min','contour','contour','convert_coord','convol','convol_fft','coord2to3','copy_lun','correlate','cos','cosh','cpu','cramer','createboxplotdata','create_cursor','create_struct','create_view','crossp','crvlength','ct_luminance','cti_test','cursor','curvefit','cv_coord','cvttobm','cw_animate','cw_animate_getp','cw_animate_load','cw_animate_run','cw_arcball','cw_bgroup','cw_clr_index','cw_colorsel','cw_defroi','cw_field','cw_filesel','cw_form','cw_fslider','cw_light_editor','cw_light_editor_get','cw_light_editor_set','cw_orient','cw_palette_editor','cw_palette_editor_get','cw_palette_editor_set','cw_pdmenu','cw_rgbslider','cw_tmpl','cw_zoom','db_exists','dblarr','dcindgen','dcomplex','dcomplexarr','define_key','define_msgblk','define_msgblk_from_file','defroi','defsysv','delvar','dendro_plot','dendrogram','deriv','derivsig','determ','device','dfpmin','diag_matrix','dialog_dbconnect','dialog_message','dialog_pickfile','dialog_printersetup','dialog_printjob','dialog_read_image','dialog_write_image','dictionary','digital_filter','dilate','dindgen','dissolve','dist','distance_measure','dlm_load','dlm_register','doc_library','double','draw_roi','edge_dog','efont','eigenql','eigenvec','ellipse','elmhes','emboss','empty','enable_sysrtn','eof','eos','erase','erf','erfc','erfcx','erode','errorplot','errplot','estimator_filter','execute','exit','exp','expand','expand_path','expint','extrac','extract_slice','f_cvf','f_pdf','factorial','fft','file_basename','file_chmod','file_copy','file_delete','file_dirname','file_expand_path','file_gunzip','file_gzip','file_info','file_lines','file_link','file_mkdir','file_move','file_poll_input','file_readlink','file_same','file_search','file_tar','file_test','file_untar','file_unzip','file_which','file_zip','filepath','findgen','finite','fix','flick','float','floor','flow3','fltarr','flush','format_axis_values','forward_function','free_lun','fstat','fulstr','funct','function','fv_test','fx_root','fz_roots','gamma','gamma_ct','gauss_cvf','gauss_pdf','gauss_smooth','gauss2dfit','gaussfit','gaussian_function','gaussint','get_drive_list','get_dxf_objects','get_kbrd','get_login_info','get_lun','get_screen_size','getenv','getwindows','greg2jul','grib','grid_input','grid_tps','grid3','griddata','gs_iter','h_eq_ct','h_eq_int','hanning','hash','hdf','hdf5','heap_free','heap_gc','heap_nosave','heap_refcount','heap_save','help','hilbert','hist_2d','hist_equal','histogram','hls','hough','hqr','hsv','i18n_multibytetoutf8','i18n_multibytetowidechar','i18n_utf8tomultibyte','i18n_widechartomultibyte','ibeta','icontour','iconvertcoord','idelete','identity','idl_base64','idl_container','idl_validname','idlexbr_assistant','idlitsys_createtool','idlunit','iellipse','igamma','igetcurrent','igetdata','igetid','igetproperty','iimage','image','image_cont','image_statistics','image_threshold','imaginary','imap','indgen','int_2d','int_3d','int_tabulated','intarr','interpol','interpolate','interval_volume','invert','ioctl','iopen','ir_filter','iplot','ipolygon','ipolyline','iputdata','iregister','ireset','iresolve','irotate','isa','isave','iscale','isetcurrent','isetproperty','ishft','isocontour','isosurface','isurface','itext','itranslate','ivector','ivolume','izoom','journal','json_parse','json_serialize','jul2greg','julday','keyword_set','krig2d','kurtosis','kw_test','l64indgen','la_choldc','la_cholmprove','la_cholsol','la_determ','la_eigenproblem','la_eigenql','la_eigenvec','la_elmhes','la_gm_linear_model','la_hqr','la_invert','la_least_square_equality','la_least_squares','la_linear_equation','la_ludc','la_lumprove','la_lusol','la_svd','la_tridc','la_trimprove','la_triql','la_trired','la_trisol','label_date','label_region','ladfit','laguerre','lambda','lambdap','lambertw','laplacian','least_squares_filter','leefilt','legend','legendre','linbcg','lindgen','linfit','linkimage','list','ll_arc_distance','lmfit','lmgr','lngamma','lnp_test','loadct','locale_get','logical_and','logical_or','logical_true','lon64arr','lonarr','long','long64','lsode','lu_complex','ludc','lumprove','lusol','m_correlate','machar','make_array','make_dll','make_rt','map','mapcontinents','mapgrid','map_2points','map_continents','map_grid','map_image','map_patch','map_proj_forward','map_proj_image','map_proj_info','map_proj_init','map_proj_inverse','map_set','matrix_multiply','matrix_power','max','md_test','mean','meanabsdev','mean_filter','median','memory','mesh_clip','mesh_decimate','mesh_issolid','mesh_merge','mesh_numtriangles','mesh_obj','mesh_smooth','mesh_surfacearea','mesh_validate','mesh_volume','message','min','min_curve_surf','mk_html_help','modifyct','moment','morph_close','morph_distance','morph_gradient','morph_hitormiss','morph_open','morph_thin','morph_tophat','multi','n_elements','n_params','n_tags','ncdf','newton','noise_hurl','noise_pick','noise_scatter','noise_slur','norm','obj_class','obj_destroy','obj_hasmethod','obj_isa','obj_new','obj_valid','objarr','on_error','on_ioerror','online_help','openr','openu','openw','oplot','oploterr','orderedhash','p_correlate','parse_url','particle_trace','path_cache','path_sep','pcomp','plot','plot3d','plot','plot_3dbox','plot_field','ploterr','plots','polar_contour','polar_surface','polyfill','polyshade','pnt_line','point_lun','polarplot','poly','poly_2d','poly_area','poly_fit','polyfillv','polygon','polyline','polywarp','popd','powell','pref_commit','pref_get','pref_set','prewitt','primes','print','printf','printd','pro','product','profile','profiler','profiles','project_vol','ps_show_fonts','psafm','pseudo','ptr_free','ptr_new','ptr_valid','ptrarr','pushd','qgrid3','qhull','qromb','qromo','qsimp','query_*','query_ascii','query_bmp','query_csv','query_dicom','query_gif','query_image','query_jpeg','query_jpeg2000','query_mrsid','query_pict','query_png','query_ppm','query_srf','query_tiff','query_video','query_wav','r_correlate','r_test','radon','randomn','randomu','ranks','rdpix','read','readf','read_ascii','read_binary','read_bmp','read_csv','read_dicom','read_gif','read_image','read_interfile','read_jpeg','read_jpeg2000','read_mrsid','read_pict','read_png','read_ppm','read_spr','read_srf','read_sylk','read_tiff','read_video','read_wav','read_wave','read_x11_bitmap','read_xwd','reads','readu','real_part','rebin','recall_commands','recon3','reduce_colors','reform','region_grow','register_cursor','regress','replicate','replicate_inplace','resolve_all','resolve_routine','restore','retall','return','reverse','rk4','roberts','rot','rotate','round','routine_filepath','routine_info','rs_test','s_test','save','savgol','scale3','scale3d','scatterplot','scatterplot3d','scope_level','scope_traceback','scope_varfetch','scope_varname','search2d','search3d','sem_create','sem_delete','sem_lock','sem_release','set_plot','set_shading','setenv','sfit','shade_surf','shade_surf_irr','shade_volume','shift','shift_diff','shmdebug','shmmap','shmunmap','shmvar','show3','showfont','signum','simplex','sin','sindgen','sinh','size','skewness','skip_lun','slicer3','slide_image','smooth','sobel','socket','sort','spawn','sph_4pnt','sph_scat','spher_harm','spl_init','spl_interp','spline','spline_p','sprsab','sprsax','sprsin','sprstp','sqrt','standardize','stddev','stop','strarr','strcmp','strcompress','streamline','streamline','stregex','stretch','string','strjoin','strlen','strlowcase','strmatch','strmessage','strmid','strpos','strput','strsplit','strtrim','struct_assign','struct_hide','strupcase','surface','surface','surfr','svdc','svdfit','svsol','swap_endian','swap_endian_inplace','symbol','systime','t_cvf','t_pdf','t3d','tag_names','tan','tanh','tek_color','temporary','terminal_size','tetra_clip','tetra_surface','tetra_volume','text','thin','thread','threed','tic','time_test2','timegen','timer','timestamp','timestamptovalues','tm_test','toc','total','trace','transpose','tri_surf','triangulate','trigrid','triql','trired','trisol','truncate_lun','ts_coef','ts_diff','ts_fcast','ts_smooth','tv','tvcrs','tvlct','tvrd','tvscl','typename','uindgen','uint','uintarr','ul64indgen','ulindgen','ulon64arr','ulonarr','ulong','ulong64','uniq','unsharp_mask','usersym','value_locate','variance','vector','vector_field','vel','velovect','vert_t3d','voigt','volume','voronoi','voxel_proj','wait','warp_tri','watershed','wdelete','wf_draw','where','widget_base','widget_button','widget_combobox','widget_control','widget_displaycontextmenu','widget_draw','widget_droplist','widget_event','widget_info','widget_label','widget_list','widget_propertysheet','widget_slider','widget_tab','widget_table','widget_text','widget_tree','widget_tree_move','widget_window','wiener_filter','window','window','write_bmp','write_csv','write_gif','write_image','write_jpeg','write_jpeg2000','write_nrif','write_pict','write_png','write_ppm','write_spr','write_srf','write_sylk','write_tiff','write_video','write_wav','write_wave','writeu','wset','wshow','wtn','wv_applet','wv_cwt','wv_cw_wavelet','wv_denoise','wv_dwt','wv_fn_coiflet','wv_fn_daubechies','wv_fn_gaussian','wv_fn_haar','wv_fn_morlet','wv_fn_paul','wv_fn_symlet','wv_import_data','wv_import_wavelet','wv_plot3d_wps','wv_plot_multires','wv_pwt','wv_tool_denoise','xbm_edit','xdisplayfile','xdxf','xfont','xinteranimate','xloadct','xmanager','xmng_tmpl','xmtool','xobjview','xobjview_rotate','xobjview_write_image','xpalette','xpcolor','xplot3d','xregistered','xroi','xsq_test','xsurface','xvaredit','xvolume','xvolume_rotate','xvolume_write_image','xyouts','zlib_compress','zlib_uncompress','zoom','zoom_24'];var builtins=wordRegexp(builtinArray);var keywordArray=['begin','end','endcase','endfor','endwhile','endif','endrep','endforeach','break','case','continue','for','foreach','goto','if','then','else','repeat','until','switch','while','do','pro','function'];var keywords=wordRegexp(keywordArray);CodeMirror.registerHelper("hintWords","idl",builtinArray.concat(keywordArray));var identifiers=new RegExp('^[_a-z\xa1-\uffff][_a-z0-9\xa1-\uffff]*','i');var singleOperators=/[+\-*&=<>\/@#~$]/;var boolOperators=new RegExp('(and|or|eq|lt|le|gt|ge|ne|not)','i');function tokenBase(stream){if(stream.eatSpace())return null;if(stream.match(';')){stream.skipToEnd();return'comment'}
if(stream.match(/^[0-9\.+-]/,!1)){if(stream.match(/^[+-]?0x[0-9a-fA-F]+/))
return'number';if(stream.match(/^[+-]?\d*\.\d+([EeDd][+-]?\d+)?/))
return'number';if(stream.match(/^[+-]?\d+([EeDd][+-]?\d+)?/))
return'number'}
if(stream.match(/^"([^"]|(""))*"/)){return'string'}
if(stream.match(/^'([^']|(''))*'/)){return'string'}
if(stream.match(keywords)){return'keyword'}
if(stream.match(builtins)){return'builtin'}
if(stream.match(identifiers)){return'variable'}
if(stream.match(singleOperators)||stream.match(boolOperators)){return'operator'}
stream.next();return null};CodeMirror.defineMode('idl',function(){return{token:function(stream){return tokenBase(stream)}}});CodeMirror.defineMIME('text/x-idl','idl')})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function expressionAllowed(stream,state,backUp){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(state.lastType)||(state.lastType=="quasi"&&/\{\s*$/.test(stream.string.slice(0,stream.pos-(backUp||0))))}
CodeMirror.defineMode("javascript",function(config,parserConfig){var indentUnit=config.indentUnit;var statementIndent=parserConfig.statementIndent;var jsonldMode=parserConfig.jsonld;var jsonMode=parserConfig.json||jsonldMode;var isTS=parserConfig.typescript;var wordRE=parserConfig.wordCharacters||/[\w$\xa1-\uffff]/;var keywords=function(){function kw(type){return{type:type,style:"keyword"}}
var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c");var operator=kw("operator"),atom={type:"atom",style:"atom"};var jsKeywords={"if":kw("if"),"while":A,"with":A,"else":B,"do":B,"try":B,"finally":B,"return":C,"break":C,"continue":C,"new":kw("new"),"delete":C,"throw":C,"debugger":C,"var":kw("var"),"const":kw("var"),"let":kw("var"),"function":kw("function"),"catch":kw("catch"),"for":kw("for"),"switch":kw("switch"),"case":kw("case"),"default":kw("default"),"in":operator,"typeof":operator,"instanceof":operator,"true":atom,"false":atom,"null":atom,"undefined":atom,"NaN":atom,"Infinity":atom,"this":kw("this"),"class":kw("class"),"super":kw("atom"),"yield":C,"export":kw("export"),"import":kw("import"),"extends":C,"await":C,"async":kw("async")};if(isTS){var type={type:"variable",style:"variable-3"};var tsKeywords={"interface":kw("class"),"implements":C,"namespace":C,"module":kw("module"),"enum":kw("module"),"type":kw("type"),"public":kw("modifier"),"private":kw("modifier"),"protected":kw("modifier"),"abstract":kw("modifier"),"as":operator,"string":type,"number":type,"boolean":type,"any":type};for(var attr in tsKeywords){jsKeywords[attr]=tsKeywords[attr]}}
return jsKeywords}();var isOperatorChar=/[+\-*&%=<>!?|~^]/;var isJsonldKeyword=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function readRegexp(stream){var escaped=!1,next,inSet=!1;while((next=stream.next())!=null){if(!escaped){if(next=="/"&&!inSet)return;if(next=="[")inSet=!0;else if(inSet&&next=="]")inSet=!1}
escaped=!escaped&&next=="\\"}}
var type,content;function ret(tp,style,cont){type=tp;content=cont;return style}
function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}else if(ch=="."&&stream.match(/^\d+(?:[eE][+\-]?\d+)?/)){return ret("number","number")}else if(ch=="."&&stream.match("..")){return ret("spread","meta")}else if(/[\[\]{}\(\),;\:\.]/.test(ch)){return ret(ch)}else if(ch=="="&&stream.eat(">")){return ret("=>","operator")}else if(ch=="0"&&stream.eat(/x/i)){stream.eatWhile(/[\da-f]/i);return ret("number","number")}else if(ch=="0"&&stream.eat(/o/i)){stream.eatWhile(/[0-7]/i);return ret("number","number")}else if(ch=="0"&&stream.eat(/b/i)){stream.eatWhile(/[01]/i);return ret("number","number")}else if(/\d/.test(ch)){stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return ret("number","number")}else if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}else if(stream.eat("/")){stream.skipToEnd();return ret("comment","comment")}else if(expressionAllowed(stream,state,1)){readRegexp(stream);stream.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return ret("regexp","string-2")}else{stream.eatWhile(isOperatorChar);return ret("operator","operator",stream.current())}}else if(ch=="`"){state.tokenize=tokenQuasi;return tokenQuasi(stream,state)}else if(ch=="#"){stream.skipToEnd();return ret("error","error")}else if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return ret("operator","operator",stream.current())}else if(wordRE.test(ch)){stream.eatWhile(wordRE);var word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return(known&&state.lastType!=".")?ret(known.type,known.style,word):ret("variable","variable",word)}}
function tokenString(quote){return function(stream,state){var escaped=!1,next;if(jsonldMode&&stream.peek()=="@"&&stream.match(isJsonldKeyword)){state.tokenize=tokenBase;return ret("jsonld-keyword","meta")}
while((next=stream.next())!=null){if(next==quote&&!escaped)break;escaped=!escaped&&next=="\\"}
if(!escaped)state.tokenize=tokenBase;return ret("string","string")}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return ret("comment","comment")}
function tokenQuasi(stream,state){var escaped=!1,next;while((next=stream.next())!=null){if(!escaped&&(next=="`"||next=="$"&&stream.eat("{"))){state.tokenize=tokenBase;break}
escaped=!escaped&&next=="\\"}
return ret("quasi","string-2",stream.current())}
var brackets="([{}])";function findFatArrow(stream,state){if(state.fatArrowAt)state.fatArrowAt=null;var arrow=stream.string.indexOf("=>",stream.start);if(arrow<0)return;var depth=0,sawSomething=!1;for(var pos=arrow-1;pos>=0;--pos){var ch=stream.string.charAt(pos);var bracket=brackets.indexOf(ch);if(bracket>=0&&bracket<3){if(!depth){++pos;break}
if(--depth==0){if(ch=="(")sawSomething=!0;break}}else if(bracket>=3&&bracket<6){++depth}else if(wordRE.test(ch)){sawSomething=!0}else if(/["'\/]/.test(ch)){return}else if(sawSomething&&!depth){++pos;break}}
if(sawSomething&&!depth)state.fatArrowAt=pos}
var atomicTypes={"atom":!0,"number":!0,"variable":!0,"string":!0,"regexp":!0,"this":!0,"jsonld-keyword":!0};function JSLexical(indented,column,type,align,prev,info){this.indented=indented;this.column=column;this.type=type;this.prev=prev;this.info=info;if(align!=null)this.align=align}
function inScope(state,varname){for(var v=state.localVars;v;v=v.next)
if(v.name==varname)return!0;for(var cx=state.context;cx;cx=cx.prev){for(var v=cx.vars;v;v=v.next)
if(v.name==varname)return!0}}
function parseJS(state,style,type,content,stream){var cc=state.cc;cx.state=state;cx.stream=stream;cx.marked=null,cx.cc=cc;cx.style=style;if(!state.lexical.hasOwnProperty("align"))
state.lexical.align=!0;while(!0){var combinator=cc.length?cc.pop():jsonMode?expression:statement;if(combinator(type,content)){while(cc.length&&cc[cc.length-1].lex)
cc.pop()();if(cx.marked)return cx.marked;if(type=="variable"&&inScope(state,content))return"variable-2";return style}}}
var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;i>=0;i--)cx.cc.push(arguments[i]);}
function cont(){pass.apply(null,arguments);return!0}
function register(varname){function inList(list){for(var v=list;v;v=v.next)
if(v.name==varname)return!0;return!1}
var state=cx.state;cx.marked="def";if(state.context){if(inList(state.localVars))return;state.localVars={name:varname,next:state.localVars}}else{if(inList(state.globalVars))return;if(parserConfig.globalVars)
state.globalVars={name:varname,next:state.globalVars}}}
var defaultVars={name:"this",next:{name:"arguments"}};function pushcontext(){cx.state.context={prev:cx.state.context,vars:cx.state.localVars};cx.state.localVars=defaultVars}
function popcontext(){cx.state.localVars=cx.state.context.vars;cx.state.context=cx.state.context.prev}
function pushlex(type,info){var result=function(){var state=cx.state,indent=state.indented;if(state.lexical.type=="stat")indent=state.lexical.indented;else for(var outer=state.lexical;outer&&outer.type==")"&&outer.align;outer=outer.prev)
indent=outer.indented;state.lexical=new JSLexical(indent,cx.stream.column(),type,null,state.lexical,info)};result.lex=!0;return result}
function poplex(){var state=cx.state;if(state.lexical.prev){if(state.lexical.type==")")
state.indented=state.lexical.indented;state.lexical=state.lexical.prev}}
poplex.lex=!0;function expect(wanted){function exp(type){if(type==wanted)return cont();else if(wanted==";")return pass();else return cont(exp)};return exp}
function statement(type,value){if(type=="var")return cont(pushlex("vardef",value.length),vardef,expect(";"),poplex);if(type=="keyword a")return cont(pushlex("form"),parenExpr,statement,poplex);if(type=="keyword b")return cont(pushlex("form"),statement,poplex);if(type=="{")return cont(pushlex("}"),block,poplex);if(type==";")return cont();if(type=="if"){if(cx.state.lexical.info=="else"&&cx.state.cc[cx.state.cc.length-1]==poplex)
cx.state.cc.pop()();return cont(pushlex("form"),parenExpr,statement,poplex,maybeelse)}
if(type=="function")return cont(functiondef);if(type=="for")return cont(pushlex("form"),forspec,statement,poplex);if(type=="variable")return cont(pushlex("stat"),maybelabel);if(type=="switch")return cont(pushlex("form"),parenExpr,pushlex("}","switch"),expect("{"),block,poplex,poplex);if(type=="case")return cont(expression,expect(":"));if(type=="default")return cont(expect(":"));if(type=="catch")return cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext);if(type=="class")return cont(pushlex("form"),className,poplex);if(type=="export")return cont(pushlex("stat"),afterExport,poplex);if(type=="import")return cont(pushlex("stat"),afterImport,poplex);if(type=="module")return cont(pushlex("form"),pattern,pushlex("}"),expect("{"),block,poplex,poplex)
if(type=="type")return cont(typeexpr,expect("operator"),typeexpr,expect(";"));if(type=="async")return cont(statement)
return pass(pushlex("stat"),expression,expect(";"),poplex)}
function expression(type){return expressionInner(type,!1)}
function expressionNoComma(type){return expressionInner(type,!0)}
function parenExpr(type){if(type!="(")return pass()
return cont(pushlex(")"),expression,expect(")"),poplex)}
function expressionInner(type,noComma){if(cx.state.fatArrowAt==cx.stream.start){var body=noComma?arrowBodyNoComma:arrowBody;if(type=="(")return cont(pushcontext,pushlex(")"),commasep(pattern,")"),poplex,expect("=>"),body,popcontext);else if(type=="variable")return pass(pushcontext,pattern,expect("=>"),body,popcontext)}
var maybeop=noComma?maybeoperatorNoComma:maybeoperatorComma;if(atomicTypes.hasOwnProperty(type))return cont(maybeop);if(type=="function")return cont(functiondef,maybeop);if(type=="keyword c"||type=="async")return cont(noComma?maybeexpressionNoComma:maybeexpression);if(type=="(")return cont(pushlex(")"),maybeexpression,expect(")"),poplex,maybeop);if(type=="operator"||type=="spread")return cont(noComma?expressionNoComma:expression);if(type=="[")return cont(pushlex("]"),arrayLiteral,poplex,maybeop);if(type=="{")return contCommasep(objprop,"}",null,maybeop);if(type=="quasi")return pass(quasi,maybeop);if(type=="new")return cont(maybeTarget(noComma));return cont()}
function maybeexpression(type){if(type.match(/[;\}\)\],]/))return pass();return pass(expression)}
function maybeexpressionNoComma(type){if(type.match(/[;\}\)\],]/))return pass();return pass(expressionNoComma)}
function maybeoperatorComma(type,value){if(type==",")return cont(expression);return maybeoperatorNoComma(type,value,!1)}
function maybeoperatorNoComma(type,value,noComma){var me=noComma==!1?maybeoperatorComma:maybeoperatorNoComma;var expr=noComma==!1?expression:expressionNoComma;if(type=="=>")return cont(pushcontext,noComma?arrowBodyNoComma:arrowBody,popcontext);if(type=="operator"){if(/\+\+|--/.test(value))return cont(me);if(value=="?")return cont(expression,expect(":"),expr);return cont(expr)}
if(type=="quasi"){return pass(quasi,me)}
if(type==";")return;if(type=="(")return contCommasep(expressionNoComma,")","call",me);if(type==".")return cont(property,me);if(type=="[")return cont(pushlex("]"),maybeexpression,expect("]"),poplex,me)}
function quasi(type,value){if(type!="quasi")return pass();if(value.slice(value.length-2)!="${")return cont(quasi);return cont(expression,continueQuasi)}
function continueQuasi(type){if(type=="}"){cx.marked="string-2";cx.state.tokenize=tokenQuasi;return cont(quasi)}}
function arrowBody(type){findFatArrow(cx.stream,cx.state);return pass(type=="{"?statement:expression)}
function arrowBodyNoComma(type){findFatArrow(cx.stream,cx.state);return pass(type=="{"?statement:expressionNoComma)}
function maybeTarget(noComma){return function(type){if(type==".")return cont(noComma?targetNoComma:target);else return pass(noComma?expressionNoComma:expression)}}
function target(_,value){if(value=="target"){cx.marked="keyword";return cont(maybeoperatorComma)}}
function targetNoComma(_,value){if(value=="target"){cx.marked="keyword";return cont(maybeoperatorNoComma)}}
function maybelabel(type){if(type==":")return cont(poplex,statement);return pass(maybeoperatorComma,expect(";"),poplex)}
function property(type){if(type=="variable"){cx.marked="property";return cont()}}
function objprop(type,value){if(type=="async"){cx.marked="property";return cont(objprop)}else if(type=="variable"||cx.style=="keyword"){cx.marked="property";if(value=="get"||value=="set")return cont(getterSetter);return cont(afterprop)}else if(type=="number"||type=="string"){cx.marked=jsonldMode?"property":(cx.style+" property");return cont(afterprop)}else if(type=="jsonld-keyword"){return cont(afterprop)}else if(type=="modifier"){return cont(objprop)}else if(type=="["){return cont(expression,expect("]"),afterprop)}else if(type=="spread"){return cont(expression)}else if(type==":"){return pass(afterprop)}}
function getterSetter(type){if(type!="variable")return pass(afterprop);cx.marked="property";return cont(functiondef)}
function afterprop(type){if(type==":")return cont(expressionNoComma);if(type=="(")return pass(functiondef)}
function commasep(what,end){function proceed(type,value){if(type==","){var lex=cx.state.lexical;if(lex.info=="call")lex.pos=(lex.pos||0)+1;return cont(function(type,value){if(type==end||value==end)return pass()
return pass(what)},proceed)}
if(type==end||value==end)return cont();return cont(expect(end))}
return function(type,value){if(type==end||value==end)return cont();return pass(what,proceed)}}
function contCommasep(what,end,info){for(var i=3;i<arguments.length;i++)
cx.cc.push(arguments[i]);return cont(pushlex(end,info),commasep(what,end),poplex)}
function block(type){if(type=="}")return cont();return pass(statement,block)}
function maybetype(type,value){if(isTS){if(type==":")return cont(typeexpr);if(value=="?")return cont(maybetype)}}
function maybedefault(_,value){if(value=="=")return cont(expressionNoComma)}
function typeexpr(type){if(type=="variable"){cx.marked="variable-3";return cont(afterType)}
if(type=="{")return cont(commasep(typeprop,"}"))
if(type=="(")return cont(commasep(typearg,")"),maybeReturnType)}
function maybeReturnType(type){if(type=="=>")return cont(typeexpr)}
function typeprop(type){if(type=="variable"||cx.style=="keyword"){cx.marked="property"
return cont(typeprop)}else if(type==":"){return cont(typeexpr)}}
function typearg(type){if(type=="variable")return cont(typearg)
else if(type==":")return cont(typeexpr)}
function afterType(type,value){if(value=="<")return cont(commasep(typeexpr,">"),afterType)
if(type=="[")return cont(expect("]"),afterType)}
function vardef(){return pass(pattern,maybetype,maybeAssign,vardefCont)}
function pattern(type,value){if(type=="modifier")return cont(pattern)
if(type=="variable"){register(value);return cont()}
if(type=="spread")return cont(pattern);if(type=="[")return contCommasep(pattern,"]");if(type=="{")return contCommasep(proppattern,"}")}
function proppattern(type,value){if(type=="variable"&&!cx.stream.match(/^\s*:/,!1)){register(value);return cont(maybeAssign)}
if(type=="variable")cx.marked="property";if(type=="spread")return cont(pattern);if(type=="}")return pass();return cont(expect(":"),pattern,maybeAssign)}
function maybeAssign(_type,value){if(value=="=")return cont(expressionNoComma)}
function vardefCont(type){if(type==",")return cont(vardef)}
function maybeelse(type,value){if(type=="keyword b"&&value=="else")return cont(pushlex("form","else"),statement,poplex)}
function forspec(type){if(type=="(")return cont(pushlex(")"),forspec1,expect(")"),poplex)}
function forspec1(type){if(type=="var")return cont(vardef,expect(";"),forspec2);if(type==";")return cont(forspec2);if(type=="variable")return cont(formaybeinof);return pass(expression,expect(";"),forspec2)}
function formaybeinof(_type,value){if(value=="in"||value=="of"){cx.marked="keyword";return cont(expression)}
return cont(maybeoperatorComma,forspec2)}
function forspec2(type,value){if(type==";")return cont(forspec3);if(value=="in"||value=="of"){cx.marked="keyword";return cont(expression)}
return pass(expression,expect(";"),forspec3)}
function forspec3(type){if(type!=")")cont(expression)}
function functiondef(type,value){if(value=="*"){cx.marked="keyword";return cont(functiondef)}
if(type=="variable"){register(value);return cont(functiondef)}
if(type=="(")return cont(pushcontext,pushlex(")"),commasep(funarg,")"),poplex,maybetype,statement,popcontext)}
function funarg(type){if(type=="spread")return cont(funarg);return pass(pattern,maybetype,maybedefault)}
function className(type,value){if(type=="variable"){register(value);return cont(classNameAfter)}}
function classNameAfter(type,value){if(value=="extends")return cont(isTS?typeexpr:expression,classNameAfter);if(type=="{")return cont(pushlex("}"),classBody,poplex)}
function classBody(type,value){if(type=="variable"||cx.style=="keyword"){if((value=="static"||value=="get"||value=="set"||(isTS&&(value=="public"||value=="private"||value=="protected")))&&cx.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)){cx.marked="keyword";return cont(classBody)}
cx.marked="property";return cont(isTS?classfield:functiondef,classBody)}
if(value=="*"){cx.marked="keyword";return cont(classBody)}
if(type==";")return cont(classBody);if(type=="}")return cont()}
function classfield(type){if(type==":")return cont(typeexpr)
return pass(functiondef)}
function afterExport(_type,value){if(value=="*"){cx.marked="keyword";return cont(maybeFrom,expect(";"))}
if(value=="default"){cx.marked="keyword";return cont(expression,expect(";"))}
return pass(statement)}
function afterImport(type){if(type=="string")return cont();return pass(importSpec,maybeFrom)}
function importSpec(type,value){if(type=="{")return contCommasep(importSpec,"}");if(type=="variable")register(value);if(value=="*")cx.marked="keyword";return cont(maybeAs)}
function maybeAs(_type,value){if(value=="as"){cx.marked="keyword";return cont(importSpec)}}
function maybeFrom(_type,value){if(value=="from"){cx.marked="keyword";return cont(expression)}}
function arrayLiteral(type){if(type=="]")return cont();return pass(commasep(expressionNoComma,"]"))}
function isContinuedStatement(state,textAfter){return state.lastType=="operator"||state.lastType==","||isOperatorChar.test(textAfter.charAt(0))||/[,.]/.test(textAfter.charAt(0))}
return{startState:function(basecolumn){var state={tokenize:tokenBase,lastType:"sof",cc:[],lexical:new JSLexical((basecolumn||0)-indentUnit,0,"block",!1),localVars:parserConfig.localVars,context:parserConfig.localVars&&{vars:parserConfig.localVars},indented:basecolumn||0};if(parserConfig.globalVars&&typeof parserConfig.globalVars=="object")
state.globalVars=parserConfig.globalVars;return state},token:function(stream,state){if(stream.sol()){if(!state.lexical.hasOwnProperty("align"))
state.lexical.align=!1;state.indented=stream.indentation();findFatArrow(stream,state)}
if(state.tokenize!=tokenComment&&stream.eatSpace())return null;var style=state.tokenize(stream,state);if(type=="comment")return style;state.lastType=type=="operator"&&(content=="++"||content=="--")?"incdec":type;return parseJS(state,style,type,content,stream)},indent:function(state,textAfter){if(state.tokenize==tokenComment)return CodeMirror.Pass;if(state.tokenize!=tokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical,top
if(!/^\s*else\b/.test(textAfter))for(var i=state.cc.length-1;i>=0;--i){var c=state.cc[i];if(c==poplex)lexical=lexical.prev;else if(c!=maybeelse)break}
while((lexical.type=="stat"||lexical.type=="form")&&(firstChar=="}"||((top=state.cc[state.cc.length-1])&&(top==maybeoperatorComma||top==maybeoperatorNoComma)&&!/^[,\.=+\-*:?[\(]/.test(textAfter))))
lexical=lexical.prev;if(statementIndent&&lexical.type==")"&&lexical.prev.type=="stat")
lexical=lexical.prev;var type=lexical.type,closing=firstChar==type;if(type=="vardef")return lexical.indented+(state.lastType=="operator"||state.lastType==","?lexical.info+1:0);else if(type=="form"&&firstChar=="{")return lexical.indented;else if(type=="form")return lexical.indented+indentUnit;else if(type=="stat")
return lexical.indented+(isContinuedStatement(state,textAfter)?statementIndent||indentUnit:0);else if(lexical.info=="switch"&&!closing&&parserConfig.doubleIndentSwitch!=!1)
return lexical.indented+(/^(?:case|default)\b/.test(textAfter)?indentUnit:2*indentUnit);else if(lexical.align)return lexical.column+(closing?0:1);else return lexical.indented+(closing?0:indentUnit)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:jsonMode?null:"/*",blockCommentEnd:jsonMode?null:"*/",lineComment:jsonMode?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:jsonMode?"json":"javascript",jsonldMode:jsonldMode,jsonMode:jsonMode,expressionAllowed:expressionAllowed,skipExpression:function(state){var top=state.cc[state.cc.length-1]
if(top==expression||top==expressionNoComma)state.cc.pop()}}});CodeMirror.registerHelper("wordChars","javascript",/[\w$]/);CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/x-javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0});CodeMirror.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"javascript");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("locals","[keyword function] [def foo]([def a], [def b]) { [keyword var] [def c] [operator =] [number 10]; [keyword return] [variable-2 a] [operator +] [variable-2 c] [operator +] [variable d]; }");MT("comma-and-binop","[keyword function](){ [keyword var] [def x] [operator =] [number 1] [operator +] [number 2], [def y]; }");MT("destructuring","([keyword function]([def a], [[[def b], [def c] ]]) {","  [keyword let] {[def d], [property foo]: [def c][operator =][number 10], [def x]} [operator =] [variable foo]([variable-2 a]);","  [[[variable-2 c], [variable y] ]] [operator =] [variable-2 c];","})();");MT("destructure_trailing_comma","[keyword let] {[def a], [def b],} [operator =] [variable foo];","[keyword let] [def c];");MT("class_body","[keyword class] [def Foo] {","  [property constructor]() {}","  [property sayName]() {","    [keyword return] [string-2 `foo${][variable foo][string-2 }oo`];","  }","}");MT("class","[keyword class] [def Point] [keyword extends] [variable SuperThing] {","  [keyword get] [property prop]() { [keyword return] [number 24]; }","  [property constructor]([def x], [def y]) {","    [keyword super]([string 'something']);","    [keyword this].[property x] [operator =] [variable-2 x];","  }","}");MT("import","[keyword function] [def foo]() {","  [keyword import] [def $] [keyword from] [string 'jquery'];","  [keyword import] { [def encrypt], [def decrypt] } [keyword from] [string 'crypto'];","}");MT("import_trailing_comma","[keyword import] {[def foo], [def bar],} [keyword from] [string 'baz']")
MT("const","[keyword function] [def f]() {","  [keyword const] [[ [def a], [def b] ]] [operator =] [[ [number 1], [number 2] ]];","}");MT("for/of","[keyword for]([keyword let] [def of] [keyword of] [variable something]) {}");MT("generator","[keyword function*] [def repeat]([def n]) {","  [keyword for]([keyword var] [def i] [operator =] [number 0]; [variable-2 i] [operator <] [variable-2 n]; [operator ++][variable-2 i])","    [keyword yield] [variable-2 i];","}");MT("quotedStringAddition","[keyword let] [def f] [operator =] [variable a] [operator +] [string 'fatarrow'] [operator +] [variable c];");MT("quotedFatArrow","[keyword let] [def f] [operator =] [variable a] [operator +] [string '=>'] [operator +] [variable c];");MT("fatArrow","[variable array].[property filter]([def a] [operator =>] [variable-2 a] [operator +] [number 1]);","[variable a];","[keyword let] [def f] [operator =] ([[ [def a], [def b] ]], [def c]) [operator =>] [variable-2 a] [operator +] [variable-2 c];","[variable c];");MT("spread","[keyword function] [def f]([def a], [meta ...][def b]) {","  [variable something]([variable-2 a], [meta ...][variable-2 b]);","}");MT("quasi","[variable re][string-2 `fofdlakj${][variable x] [operator +] ([variable re][string-2 `foo`]) [operator +] [number 1][string-2 }fdsa`] [operator +] [number 2]");MT("quasi_no_function","[variable x] [operator =] [string-2 `fofdlakj${][variable x] [operator +] [string-2 `foo`] [operator +] [number 1][string-2 }fdsa`] [operator +] [number 2]");MT("indent_statement","[keyword var] [def x] [operator =] [number 10]","[variable x] [operator +=] [variable y] [operator +]","  [atom Infinity]","[keyword debugger];");MT("indent_if","[keyword if] ([number 1])","  [keyword break];","[keyword else] [keyword if] ([number 2])","  [keyword continue];","[keyword else]","  [number 10];","[keyword if] ([number 1]) {","  [keyword break];","} [keyword else] [keyword if] ([number 2]) {","  [keyword continue];","} [keyword else] {","  [number 10];","}");MT("indent_for","[keyword for] ([keyword var] [def i] [operator =] [number 0];","     [variable i] [operator <] [number 100];","     [variable i][operator ++])","  [variable doSomething]([variable i]);","[keyword debugger];");MT("indent_c_style","[keyword function] [def foo]()","{","  [keyword debugger];","}");MT("indent_else","[keyword for] (;;)","  [keyword if] ([variable foo])","    [keyword if] ([variable bar])","      [number 1];","    [keyword else]","      [number 2];","  [keyword else]","    [number 3];");MT("indent_funarg","[variable foo]([number 10000],","    [keyword function]([def a]) {","  [keyword debugger];","};");MT("indent_below_if","[keyword for] (;;)","  [keyword if] ([variable foo])","    [number 1];","[number 2];");MT("indent_semicolonless_if","[keyword function] [def foo]() {","  [keyword if] ([variable x])","    [variable foo]()","}")
MT("indent_semicolonless_if_with_statement","[keyword function] [def foo]() {","  [keyword if] ([variable x])","    [variable foo]()","  [variable bar]()","}")
MT("multilinestring","[keyword var] [def x] [operator =] [string 'foo\\]","[string bar'];");MT("scary_regexp","[string-2 /foo[[/]]bar/];");MT("indent_strange_array","[keyword var] [def x] [operator =] [[","  [number 1],,","  [number 2],","]];","[number 10];");MT("param_default","[keyword function] [def foo]([def x] [operator =] [string-2 `foo${][number 10][string-2 }bar`]) {","  [keyword return] [variable-2 x];","}");MT("new_target","[keyword function] [def F]([def target]) {","  [keyword if] ([variable-2 target] [operator &&] [keyword new].[keyword target].[property name]) {","    [keyword return] [keyword new]","      .[keyword target];","  }","}");var ts_mode=CodeMirror.getMode({indentUnit:2},"application/typescript")
function TS(name){test.mode(name,ts_mode,Array.prototype.slice.call(arguments,1))}
TS("extend_type","[keyword class] [def Foo] [keyword extends] [variable-3 Some][operator <][variable-3 Type][operator >] {}")
TS("arrow_type","[keyword let] [def x]: ([variable arg]: [variable-3 Type]) [operator =>] [variable-3 ReturnType]")
TS("typescript_class","[keyword class] [def Foo] {","  [keyword public] [keyword static] [property main]() {}","  [keyword private] [property _foo]: [variable-3 string];","}")
var jsonld_mode=CodeMirror.getMode({indentUnit:2},{name:"javascript",jsonld:!0});function LD(name){test.mode(name,jsonld_mode,Array.prototype.slice.call(arguments,1))}
LD("json_ld_keywords",'{','  [meta "@context"]: {','    [meta "@base"]: [string "http://example.com"],','    [meta "@vocab"]: [string "http://xmlns.com/foaf/0.1/"],','    [property "likesFlavor"]: {','      [meta "@container"]: [meta "@list"]','      [meta "@reverse"]: [string "@beFavoriteOf"]','    },','    [property "nick"]: { [meta "@container"]: [meta "@set"] },','    [property "nick"]: { [meta "@container"]: [meta "@index"] }','  },','  [meta "@graph"]: [[ {','    [meta "@id"]: [string "http://dbpedia.org/resource/John_Lennon"],','    [property "name"]: [string "John Lennon"],','    [property "modified"]: {','      [meta "@value"]: [string "2010-05-29T14:17:39+02:00"],','      [meta "@type"]: [string "http://www.w3.org/2001/XMLSchema#dateTime"]','    }','  } ]]','}');LD("json_ld_fake",'{','  [property "@fake"]: [string "@fake"],','  [property "@contextual"]: [string "@identifier"],','  [property "user@domain.com"]: [string "@graphical"],','  [property "@ID"]: [string "@@ID"]','}')})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("jinja2",function(){var keywords=["and","as","block","endblock","by","cycle","debug","else","elif","extends","filter","endfilter","firstof","for","endfor","if","endif","ifchanged","endifchanged","ifequal","endifequal","ifnotequal","endifnotequal","in","include","load","not","now","or","parsed","regroup","reversed","spaceless","endspaceless","ssi","templatetag","openblock","closeblock","openvariable","closevariable","openbrace","closebrace","opencomment","closecomment","widthratio","url","with","endwith","get_current_language","trans","endtrans","noop","blocktrans","endblocktrans","get_available_languages","get_current_language_bidi","plural"],operator=/^[+\-*&%=<>!?|~^]/,sign=/^[:\[\(\{]/,atom=["true","false"],number=/^(\d[+\-\*\/])?\d+(\.\d+)?/;keywords=new RegExp("(("+keywords.join(")|(")+"))\\b");atom=new RegExp("(("+atom.join(")|(")+"))\\b");function tokenBase(stream,state){var ch=stream.peek();if(state.incomment){if(!stream.skipTo("#}")){stream.skipToEnd()}else{stream.eatWhile(/\#|}/);state.incomment=!1}
return"comment"}else if(state.intag){if(state.operator){state.operator=!1;if(stream.match(atom)){return"atom"}
if(stream.match(number)){return"number"}}
if(state.sign){state.sign=!1;if(stream.match(atom)){return"atom"}
if(stream.match(number)){return"number"}}
if(state.instring){if(ch==state.instring){state.instring=!1}
stream.next();return"string"}else if(ch=="'"||ch=='"'){state.instring=ch;stream.next();return"string"}else if(stream.match(state.intag+"}")||stream.eat("-")&&stream.match(state.intag+"}")){state.intag=!1;return"tag"}else if(stream.match(operator)){state.operator=!0;return"operator"}else if(stream.match(sign)){state.sign=!0}else{if(stream.eat(" ")||stream.sol()){if(stream.match(keywords)){return"keyword"}
if(stream.match(atom)){return"atom"}
if(stream.match(number)){return"number"}
if(stream.sol()){stream.next()}}else{stream.next()}}
return"variable"}else if(stream.eat("{")){if(ch=stream.eat("#")){state.incomment=!0;if(!stream.skipTo("#}")){stream.skipToEnd()}else{stream.eatWhile(/\#|}/);state.incomment=!1}
return"comment"}else if(ch=stream.eat(/\{|%/)){state.intag=ch;if(ch=="{"){state.intag="}"}
stream.eat("-");return"tag"}}
stream.next()};return{startState:function(){return{tokenize:tokenBase}},token:function(stream,state){return state.tokenize(stream,state)}}})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"))
else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../xml/xml","../javascript/javascript"],mod)
else mod(CodeMirror)})(function(CodeMirror){"use strict"
function Context(state,mode,depth,prev){this.state=state;this.mode=mode;this.depth=depth;this.prev=prev}
function copyContext(context){return new Context(CodeMirror.copyState(context.mode,context.state),context.mode,context.depth,context.prev&&copyContext(context.prev))}
CodeMirror.defineMode("jsx",function(config,modeConfig){var xmlMode=CodeMirror.getMode(config,{name:"xml",allowMissing:!0,multilineTagIndentPastTag:!1})
var jsMode=CodeMirror.getMode(config,modeConfig&&modeConfig.base||"javascript")
function flatXMLIndent(state){var tagName=state.tagName
state.tagName=null
var result=xmlMode.indent(state,"")
state.tagName=tagName
return result}
function token(stream,state){if(state.context.mode==xmlMode)
return xmlToken(stream,state,state.context)
else return jsToken(stream,state,state.context)}
function xmlToken(stream,state,cx){if(cx.depth==2){if(stream.match(/^.*?\*\//))cx.depth=1
else stream.skipToEnd()
return"comment"}
if(stream.peek()=="{"){xmlMode.skipAttribute(cx.state)
var indent=flatXMLIndent(cx.state),xmlContext=cx.state.context
if(xmlContext&&stream.match(/^[^>]*>\s*$/,!1)){while(xmlContext.prev&&!xmlContext.startOfLine)
xmlContext=xmlContext.prev
if(xmlContext.startOfLine)indent-=config.indentUnit
else if(cx.prev.state.lexical)indent=cx.prev.state.lexical.indented}else if(cx.depth==1){indent+=config.indentUnit}
state.context=new Context(CodeMirror.startState(jsMode,indent),jsMode,0,state.context)
return null}
if(cx.depth==1){if(stream.peek()=="<"){xmlMode.skipAttribute(cx.state)
state.context=new Context(CodeMirror.startState(xmlMode,flatXMLIndent(cx.state)),xmlMode,0,state.context)
return null}else if(stream.match("//")){stream.skipToEnd()
return"comment"}else if(stream.match("/*")){cx.depth=2
return token(stream,state)}}
var style=xmlMode.token(stream,cx.state),cur=stream.current(),stop
if(/\btag\b/.test(style)){if(/>$/.test(cur)){if(cx.state.context)cx.depth=0
else state.context=state.context.prev}else if(/^</.test(cur)){cx.depth=1}}else if(!style&&(stop=cur.indexOf("{"))>-1){stream.backUp(cur.length-stop)}
return style}
function jsToken(stream,state,cx){if(stream.peek()=="<"&&jsMode.expressionAllowed(stream,cx.state)){jsMode.skipExpression(cx.state)
state.context=new Context(CodeMirror.startState(xmlMode,jsMode.indent(cx.state,"")),xmlMode,0,state.context)
return null}
var style=jsMode.token(stream,cx.state)
if(!style&&cx.depth!=null){var cur=stream.current()
if(cur=="{"){cx.depth++}else if(cur=="}"){if(--cx.depth==0)state.context=state.context.prev}}
return style}
return{startState:function(){return{context:new Context(CodeMirror.startState(jsMode),jsMode)}},copyState:function(state){return{context:copyContext(state.context)}},token:token,indent:function(state,textAfter,fullLine){return state.context.mode.indent(state.context.state,textAfter,fullLine)},innerMode:function(state){return state.context}}},"xml","javascript")
CodeMirror.defineMIME("text/jsx","jsx")
CodeMirror.defineMIME("text/typescript-jsx",{name:"jsx",base:{name:"javascript",typescript:!0}})})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"jsx")
function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("selfclose","[keyword var] [def x] [operator =] [bracket&tag <] [tag foo] [bracket&tag />] [operator +] [number 1];")
MT("openclose","([bracket&tag <][tag foo][bracket&tag >]hello [atom &amp;][bracket&tag </][tag foo][bracket&tag >][operator ++])")
MT("attr","([bracket&tag <][tag foo] [attribute abc]=[string 'value'][bracket&tag >]hello [atom &amp;][bracket&tag </][tag foo][bracket&tag >][operator ++])")
MT("braced_attr","([bracket&tag <][tag foo] [attribute abc]={[number 10]}[bracket&tag >]hello [atom &amp;][bracket&tag </][tag foo][bracket&tag >][operator ++])")
MT("braced_text","([bracket&tag <][tag foo][bracket&tag >]hello {[number 10]} [atom &amp;][bracket&tag </][tag foo][bracket&tag >][operator ++])")
MT("nested_tag","([bracket&tag <][tag foo][bracket&tag ><][tag bar][bracket&tag ></][tag bar][bracket&tag ></][tag foo][bracket&tag >][operator ++])")
MT("nested_jsx","[keyword return] (","  [bracket&tag <][tag foo][bracket&tag >]","    say {[number 1] [operator +] [bracket&tag <][tag bar] [attribute attr]={[number 10]}[bracket&tag />]}!","  [bracket&tag </][tag foo][bracket&tag >][operator ++]",")")
MT("preserve_js_context","[variable x] [operator =] [string-2 `quasi${][bracket&tag <][tag foo][bracket&tag />][string-2 }quoted`]")
MT("line_comment","([bracket&tag <][tag foo] [comment // hello]","   [bracket&tag ></][tag foo][bracket&tag >][operator ++])")
MT("line_comment_not_in_tag","([bracket&tag <][tag foo][bracket&tag >] // hello","  [bracket&tag </][tag foo][bracket&tag >][operator ++])")
MT("block_comment","([bracket&tag <][tag foo] [comment /* hello]","[comment    line 2]","[comment    line 3 */] [bracket&tag ></][tag foo][bracket&tag >][operator ++])")
MT("block_comment_not_in_tag","([bracket&tag <][tag foo][bracket&tag >]/* hello","    line 2","    line 3 */ [bracket&tag </][tag foo][bracket&tag >][operator ++])")
MT("missing_attr","([bracket&tag <][tag foo] [attribute selected][bracket&tag />][operator ++])")
MT("indent_js","([bracket&tag <][tag foo][bracket&tag >]","    [bracket&tag <][tag bar] [attribute baz]={[keyword function]() {","        [keyword return] [number 10]","      }}[bracket&tag />]","  [bracket&tag </][tag foo][bracket&tag >])")
MT("spread","([bracket&tag <][tag foo] [attribute bar]={[meta ...][variable baz] [operator /][number 2]}[bracket&tag />])")
MT("tag_attribute","([bracket&tag <][tag foo] [attribute bar]=[bracket&tag <][tag foo][bracket&tag />/>][operator ++])")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("julia",function(_conf,parserConf){var ERRORCLASS='error';function wordRegexp(words,end){if(typeof end==='undefined'){end="\\b"}
return new RegExp("^(("+words.join(")|(")+"))"+end)}
var octChar="\\\\[0-7]{1,3}";var hexChar="\\\\x[A-Fa-f0-9]{1,2}";var specialChar="\\\\[abfnrtv0%?'\"\\\\]";var singleChar="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])";var operators=parserConf.operators||/^\.?[|&^\\%*+\-<>!=\/]=?|\?|~|:|\$|\.[<>]|<<=?|>>>?=?|\.[<>=]=|->?|\/\/|\bin\b(?!\()|[\u2208\u2209](?!\()/;var delimiters=parserConf.delimiters||/^[;,()[\]{}]/;var identifiers=parserConf.identifiers||/^[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;var charsList=[octChar,hexChar,specialChar,singleChar];var blockOpeners=["begin","function","type","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"];var blockClosers=["end","else","elseif","catch","finally"];var keywordList=['if','else','elseif','while','for','begin','let','end','do','try','catch','finally','return','break','continue','global','local','const','export','import','importall','using','function','macro','module','baremodule','type','immutable','quote','typealias','abstract','bitstype'];var builtinList=['true','false','nothing','NaN','Inf'];var stringPrefixes=/^(`|"{3}|([brv]?"))/;var chars=wordRegexp(charsList,"'");var keywords=wordRegexp(keywordList);var builtins=wordRegexp(builtinList);var openers=wordRegexp(blockOpeners);var closers=wordRegexp(blockClosers);var macro=/^@[_A-Za-z][\w]*/;var symbol=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/;var typeAnnotation=/^::[^,;"{()=$\s]+({[^}]*}+)*/;function inArray(state){var ch=currentScope(state);if(ch=='['){return!0}
return!1}
function currentScope(state){if(state.scopes.length==0){return null}
return state.scopes[state.scopes.length-1]}
function tokenBase(stream,state){if(stream.match(/^#=/,!1)){state.tokenize=tokenComment;return state.tokenize(stream,state)}
var leavingExpr=state.leavingExpr;if(stream.sol()){leavingExpr=!1}
state.leavingExpr=!1;if(leavingExpr){if(stream.match(/^'+/)){return'operator'}}
if(stream.match(/^\.{2,3}/)){return'operator'}
if(stream.eatSpace()){return null}
var ch=stream.peek();if(ch==='#'){stream.skipToEnd();return'comment'}
if(ch==='['){state.scopes.push('[')}
if(ch==='('){state.scopes.push('(')}
var scope=currentScope(state);if(scope=='['&&ch===']'){state.scopes.pop();state.leavingExpr=!0}
if(scope=='('&&ch===')'){state.scopes.pop();state.leavingExpr=!0}
var match;if(!inArray(state)&&(match=stream.match(openers,!1))){state.scopes.push(match)}
if(!inArray(state)&&stream.match(closers,!1)){state.scopes.pop()}
if(inArray(state)){if(state.lastToken=='end'&&stream.match(/^:/)){return'operator'}
if(stream.match(/^end/)){return'number'}}
if(stream.match(/^=>/)){return'operator'}
if(stream.match(/^[0-9\.]/,!1)){var imMatcher=RegExp(/^im\b/);var numberLiteral=!1;if(stream.match(/^\d*\.(?!\.)\d*([Eef][\+\-]?\d+)?/i)){numberLiteral=!0}
if(stream.match(/^\d+\.(?!\.)\d*/)){numberLiteral=!0}
if(stream.match(/^\.\d+/)){numberLiteral=!0}
if(stream.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)){numberLiteral=!0}
if(stream.match(/^0x[0-9a-f]+/i)){numberLiteral=!0}
if(stream.match(/^0b[01]+/i)){numberLiteral=!0}
if(stream.match(/^0o[0-7]+/i)){numberLiteral=!0}
if(stream.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){numberLiteral=!0}
if(stream.match(/^0(?![\dx])/i)){numberLiteral=!0}
if(numberLiteral){stream.match(imMatcher);state.leavingExpr=!0;return'number'}}
if(stream.match(/^<:/)){return'operator'}
if(stream.match(typeAnnotation)){return'builtin'}
if(!leavingExpr&&stream.match(symbol)||stream.match(/:\./)){return'builtin'}
if(stream.match(/^{[^}]*}(?=\()/)){return'builtin'}
if(stream.match(operators)){return'operator'}
if(stream.match(/^'/)){state.tokenize=tokenChar;return state.tokenize(stream,state)}
if(stream.match(stringPrefixes)){state.tokenize=tokenStringFactory(stream.current());return state.tokenize(stream,state)}
if(stream.match(macro)){return'meta'}
if(stream.match(delimiters)){return null}
if(stream.match(keywords)){return'keyword'}
if(stream.match(builtins)){return'builtin'}
var isDefinition=state.isDefinition||state.lastToken=='function'||state.lastToken=='macro'||state.lastToken=='type'||state.lastToken=='immutable';if(stream.match(identifiers)){if(isDefinition){if(stream.peek()==='.'){state.isDefinition=!0;return'variable'}
state.isDefinition=!1;return'def'}
if(stream.match(/^({[^}]*})*\(/,!1)){return callOrDef(stream,state)}
state.leavingExpr=!0;return'variable'}
stream.next();return ERRORCLASS}
function callOrDef(stream,state){var match=stream.match(/^(\(\s*)/);if(match){if(state.firstParenPos<0)
state.firstParenPos=state.scopes.length;state.scopes.push('(');state.charsAdvanced+=match[1].length}
if(currentScope(state)=='('&&stream.match(/^\)/)){state.scopes.pop();state.charsAdvanced+=1;if(state.scopes.length<=state.firstParenPos){var isDefinition=stream.match(/^\s*?=(?!=)/,!1);stream.backUp(state.charsAdvanced);state.firstParenPos=-1;state.charsAdvanced=0;if(isDefinition)
return'def';return'builtin'}}
if(stream.match(/^$/g,!1)){stream.backUp(state.charsAdvanced);while(state.scopes.length>state.firstParenPos)
state.scopes.pop();state.firstParenPos=-1;state.charsAdvanced=0;return'builtin'}
state.charsAdvanced+=stream.match(/^([^()]*)/)[1].length;return callOrDef(stream,state)}
function tokenComment(stream,state){if(stream.match(/^#=/)){state.weakScopes++}
if(!stream.match(/.*?(?=(#=|=#))/)){stream.skipToEnd()}
if(stream.match(/^=#/)){state.weakScopes--;if(state.weakScopes==0)
state.tokenize=tokenBase}
return'comment'}
function tokenChar(stream,state){var isChar=!1,match;if(stream.match(chars)){isChar=!0}else if(match=stream.match(/\\u([a-f0-9]{1,4})(?=')/i)){var value=parseInt(match[1],16);if(value<=55295||value>=57344){isChar=!0;stream.next()}}else if(match=stream.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var value=parseInt(match[1],16);if(value<=1114111){isChar=!0;stream.next()}}
if(isChar){state.leavingExpr=!0;state.tokenize=tokenBase;return'string'}
if(!stream.match(/^[^']+(?=')/)){stream.skipToEnd()}
if(stream.match(/^'/)){state.tokenize=tokenBase}
return ERRORCLASS}
function tokenStringFactory(delimiter){while('bruv'.indexOf(delimiter.charAt(0).toLowerCase())>=0){delimiter=delimiter.substr(1)}
var OUTCLASS='string';function tokenString(stream,state){while(!stream.eol()){stream.eatWhile(/[^"\\]/);if(stream.eat('\\')){stream.next()}else if(stream.match(delimiter)){state.tokenize=tokenBase;state.leavingExpr=!0;return OUTCLASS}else{stream.eat(/["]/)}}
return OUTCLASS}
tokenString.isString=!0;return tokenString}
var external={startState:function(){return{tokenize:tokenBase,scopes:[],weakScopes:0,lastToken:null,leavingExpr:!1,isDefinition:!1,charsAdvanced:0,firstParenPos:-1}},token:function(stream,state){var style=state.tokenize(stream,state);var current=stream.current();if(current&&style){state.lastToken=current}
if(current==='.'){style=stream.match(identifiers,!1)||stream.match(macro,!1)||stream.match(/\(/,!1)?'operator':ERRORCLASS}
return style},indent:function(state,textAfter){var delta=0;if(textAfter=="]"||textAfter==")"||textAfter=="end"||textAfter=="else"||textAfter=="elseif"||textAfter=="catch"||textAfter=="finally"){delta=-1}
return(state.scopes.length+delta)*_conf.indentUnit},electricInput:/(end|else(if)?|catch|finally)$/,lineComment:"#",fold:"indent"};return external});CodeMirror.defineMIME("text/x-julia","julia")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode('livescript',function(){var tokenBase=function(stream,state){var next_rule=state.next||"start";if(next_rule){state.next=state.next;var nr=Rules[next_rule];if(nr.splice){for(var i$=0;i$<nr.length;++i$){var r=nr[i$];if(r.regex&&stream.match(r.regex)){state.next=r.next||state.next;return r.token}}
stream.next();return'error'}
if(stream.match(r=Rules[next_rule])){if(r.regex&&stream.match(r.regex)){state.next=r.next;return r.token}else{stream.next();return'error'}}}
stream.next();return'error'};var external={startState:function(){return{next:'start',lastToken:{style:null,indent:0,content:""}}},token:function(stream,state){while(stream.pos==stream.start)
var style=tokenBase(stream,state);state.lastToken={style:style,indent:stream.indentation(),content:stream.current()};return style.replace(/\./g,' ')},indent:function(state){var indentation=state.lastToken.indent;if(state.lastToken.content.match(indenter)){indentation+=2}
return indentation}};return external});var identifier='(?![\\d\\s])[$\\w\\xAA-\\uFFDC](?:(?!\\s)[$\\w\\xAA-\\uFFDC]|-[A-Za-z])*';var indenter=RegExp('(?:[({[=:]|[-~]>|\\b(?:e(?:lse|xport)|d(?:o|efault)|t(?:ry|hen)|finally|import(?:\\s*all)?|const|var|let|new|catch(?:\\s*'+identifier+')?))\\s*$');var keywordend='(?![$\\w]|-[A-Za-z]|\\s*:(?![:=]))';var stringfill={token:'string',regex:'.+'};var Rules={start:[{token:'comment.doc',regex:'/\\*',next:'comment'},{token:'comment',regex:'#.*'},{token:'keyword',regex:'(?:t(?:h(?:is|row|en)|ry|ypeof!?)|c(?:on(?:tinue|st)|a(?:se|tch)|lass)|i(?:n(?:stanceof)?|mp(?:ort(?:\\s+all)?|lements)|[fs])|d(?:e(?:fault|lete|bugger)|o)|f(?:or(?:\\s+own)?|inally|unction)|s(?:uper|witch)|e(?:lse|x(?:tends|port)|val)|a(?:nd|rguments)|n(?:ew|ot)|un(?:less|til)|w(?:hile|ith)|o[fr]|return|break|let|var|loop)'+keywordend},{token:'constant.language',regex:'(?:true|false|yes|no|on|off|null|void|undefined)'+keywordend},{token:'invalid.illegal',regex:'(?:p(?:ackage|r(?:ivate|otected)|ublic)|i(?:mplements|nterface)|enum|static|yield)'+keywordend},{token:'language.support.class',regex:'(?:R(?:e(?:gExp|ferenceError)|angeError)|S(?:tring|yntaxError)|E(?:rror|valError)|Array|Boolean|Date|Function|Number|Object|TypeError|URIError)'+keywordend},{token:'language.support.function',regex:'(?:is(?:NaN|Finite)|parse(?:Int|Float)|Math|JSON|(?:en|de)codeURI(?:Component)?)'+keywordend},{token:'variable.language',regex:'(?:t(?:hat|il|o)|f(?:rom|allthrough)|it|by|e)'+keywordend},{token:'identifier',regex:identifier+'\\s*:(?![:=])'},{token:'variable',regex:identifier},{token:'keyword.operator',regex:'(?:\\.{3}|\\s+\\?)'},{token:'keyword.variable',regex:'(?:@+|::|\\.\\.)',next:'key'},{token:'keyword.operator',regex:'\\.\\s*',next:'key'},{token:'string',regex:'\\\\\\S[^\\s,;)}\\]]*'},{token:'string.doc',regex:'\'\'\'',next:'qdoc'},{token:'string.doc',regex:'"""',next:'qqdoc'},{token:'string',regex:'\'',next:'qstring'},{token:'string',regex:'"',next:'qqstring'},{token:'string',regex:'`',next:'js'},{token:'string',regex:'<\\[',next:'words'},{token:'string.regex',regex:'//',next:'heregex'},{token:'string.regex',regex:'\\/(?:[^[\\/\\n\\\\]*(?:(?:\\\\.|\\[[^\\]\\n\\\\]*(?:\\\\.[^\\]\\n\\\\]*)*\\])[^[\\/\\n\\\\]*)*)\\/[gimy$]{0,4}',next:'key'},{token:'constant.numeric',regex:'(?:0x[\\da-fA-F][\\da-fA-F_]*|(?:[2-9]|[12]\\d|3[0-6])r[\\da-zA-Z][\\da-zA-Z_]*|(?:\\d[\\d_]*(?:\\.\\d[\\d_]*)?|\\.\\d[\\d_]*)(?:e[+-]?\\d[\\d_]*)?[\\w$]*)'},{token:'lparen',regex:'[({[]'},{token:'rparen',regex:'[)}\\]]',next:'key'},{token:'keyword.operator',regex:'\\S+'},{token:'text',regex:'\\s+'}],heregex:[{token:'string.regex',regex:'.*?//[gimy$?]{0,4}',next:'start'},{token:'string.regex',regex:'\\s*#{'},{token:'comment.regex',regex:'\\s+(?:#.*)?'},{token:'string.regex',regex:'\\S+'}],key:[{token:'keyword.operator',regex:'[.?@!]+'},{token:'identifier',regex:identifier,next:'start'},{token:'text',regex:'',next:'start'}],comment:[{token:'comment.doc',regex:'.*?\\*/',next:'start'},{token:'comment.doc',regex:'.+'}],qdoc:[{token:'string',regex:".*?'''",next:'key'},stringfill],qqdoc:[{token:'string',regex:'.*?"""',next:'key'},stringfill],qstring:[{token:'string',regex:'[^\\\\\']*(?:\\\\.[^\\\\\']*)*\'',next:'key'},stringfill],qqstring:[{token:'string',regex:'[^\\\\"]*(?:\\\\.[^\\\\"]*)*"',next:'key'},stringfill],js:[{token:'string',regex:'[^\\\\`]*(?:\\\\.[^\\\\`]*)*`',next:'key'},stringfill],words:[{token:'string',regex:'.*?\\]>',next:'key'},stringfill]};for(var idx in Rules){var r=Rules[idx];if(r.splice){for(var i=0,len=r.length;i<len;++i){var rr=r[i];if(typeof rr.regex==='string'){Rules[idx][i].regex=new RegExp('^'+rr.regex)}}}else if(typeof rr.regex==='string'){Rules[idx].regex=new RegExp('^'+r.regex)}}
CodeMirror.defineMIME('text/x-livescript','livescript')})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("lua",function(config,parserConfig){var indentUnit=config.indentUnit;function prefixRE(words){return new RegExp("^(?:"+words.join("|")+")","i")}
function wordRE(words){return new RegExp("^(?:"+words.join("|")+")$","i")}
var specials=wordRE(parserConfig.specials||[]);var builtins=wordRE(["_G","_VERSION","assert","collectgarbage","dofile","error","getfenv","getmetatable","ipairs","load","loadfile","loadstring","module","next","pairs","pcall","print","rawequal","rawget","rawset","require","select","setfenv","setmetatable","tonumber","tostring","type","unpack","xpcall","coroutine.create","coroutine.resume","coroutine.running","coroutine.status","coroutine.wrap","coroutine.yield","debug.debug","debug.getfenv","debug.gethook","debug.getinfo","debug.getlocal","debug.getmetatable","debug.getregistry","debug.getupvalue","debug.setfenv","debug.sethook","debug.setlocal","debug.setmetatable","debug.setupvalue","debug.traceback","close","flush","lines","read","seek","setvbuf","write","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.stderr","io.stdin","io.stdout","io.tmpfile","io.type","io.write","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.cos","math.cosh","math.deg","math.exp","math.floor","math.fmod","math.frexp","math.huge","math.ldexp","math.log","math.log10","math.max","math.min","math.modf","math.pi","math.pow","math.rad","math.random","math.randomseed","math.sin","math.sinh","math.sqrt","math.tan","math.tanh","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","package.cpath","package.loaded","package.loaders","package.loadlib","package.path","package.preload","package.seeall","string.byte","string.char","string.dump","string.find","string.format","string.gmatch","string.gsub","string.len","string.lower","string.match","string.rep","string.reverse","string.sub","string.upper","table.concat","table.insert","table.maxn","table.remove","table.sort"]);var keywords=wordRE(["and","break","elseif","false","nil","not","or","return","true","function","end","if","then","else","do","while","repeat","until","for","in","local"]);var indentTokens=wordRE(["function","if","repeat","do","\\(","{"]);var dedentTokens=wordRE(["end","until","\\)","}"]);var dedentPartial=prefixRE(["end","until","\\)","}","else","elseif"]);function readBracket(stream){var level=0;while(stream.eat("="))++level;stream.eat("[");return level}
function normal(stream,state){var ch=stream.next();if(ch=="-"&&stream.eat("-")){if(stream.eat("[")&&stream.eat("["))
return(state.cur=bracketed(readBracket(stream),"comment"))(stream,state);stream.skipToEnd();return"comment"}
if(ch=="\""||ch=="'")
return(state.cur=string(ch))(stream,state);if(ch=="["&&/[\[=]/.test(stream.peek()))
return(state.cur=bracketed(readBracket(stream),"string"))(stream,state);if(/\d/.test(ch)){stream.eatWhile(/[\w.%]/);return"number"}
if(/[\w_]/.test(ch)){stream.eatWhile(/[\w\\\-_.]/);return"variable"}
return null}
function bracketed(level,style){return function(stream,state){var curlev=null,ch;while((ch=stream.next())!=null){if(curlev==null){if(ch=="]")curlev=0}else if(ch=="=")++curlev;else if(ch=="]"&&curlev==level){state.cur=normal;break}else curlev=null}
return style}}
function string(quote){return function(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped)break;escaped=!escaped&&ch=="\\"}
if(!escaped)state.cur=normal;return"string"}}
return{startState:function(basecol){return{basecol:basecol||0,indentDepth:0,cur:normal}},token:function(stream,state){if(stream.eatSpace())return null;var style=state.cur(stream,state);var word=stream.current();if(style=="variable"){if(keywords.test(word))style="keyword";else if(builtins.test(word))style="builtin";else if(specials.test(word))style="variable-2"}
if((style!="comment")&&(style!="string")){if(indentTokens.test(word))++state.indentDepth;else if(dedentTokens.test(word))--state.indentDepth}
return style},indent:function(state,textAfter){var closing=dedentPartial.test(textAfter);return state.basecol+indentUnit*(state.indentDepth-(closing?1:0))},lineComment:"--",blockCommentStart:"--[[",blockCommentEnd:"]]"}});CodeMirror.defineMIME("text/x-lua","lua")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../xml/xml"),require("../meta"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../xml/xml","../meta"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("markdown",function(cmCfg,modeCfg){var htmlMode=CodeMirror.getMode(cmCfg,"text/html");var htmlModeMissing=htmlMode.name=="null"
function getMode(name){if(CodeMirror.findModeByName){var found=CodeMirror.findModeByName(name);if(found)name=found.mime||found.mimes[0]}
var mode=CodeMirror.getMode(cmCfg,name);return mode.name=="null"?null:mode}
if(modeCfg.highlightFormatting===undefined)
modeCfg.highlightFormatting=!1;if(modeCfg.maxBlockquoteDepth===undefined)
modeCfg.maxBlockquoteDepth=0;if(modeCfg.underscoresBreakWords===undefined)
modeCfg.underscoresBreakWords=!0;if(modeCfg.taskLists===undefined)modeCfg.taskLists=!1;if(modeCfg.strikethrough===undefined)
modeCfg.strikethrough=!1;if(modeCfg.tokenTypeOverrides===undefined)
modeCfg.tokenTypeOverrides={};var tokenTypes={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"};for(var tokenType in tokenTypes){if(tokenTypes.hasOwnProperty(tokenType)&&modeCfg.tokenTypeOverrides[tokenType]){tokenTypes[tokenType]=modeCfg.tokenTypeOverrides[tokenType]}}
var hrRE=/^([*\-_])(?:\s*\1){2,}\s*$/,ulRE=/^[*\-+]\s+/,olRE=/^[0-9]+([.)])\s+/,taskListRE=/^\[(x| )\](?=\s)/,atxHeaderRE=modeCfg.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,setextHeaderRE=/^ *(?:\={1,}|-{1,})\s*$/,textRE=/^[^#!\[\]*_\\<>` "'(~]+/,fencedCodeRE=new RegExp("^("+(modeCfg.fencedCodeBlocks===!0?"~~~+|```+":modeCfg.fencedCodeBlocks)+")[ \\t]*([\\w+#\-]*)");function switchInline(stream,state,f){state.f=state.inline=f;return f(stream,state)}
function switchBlock(stream,state,f){state.f=state.block=f;return f(stream,state)}
function lineIsEmpty(line){return!line||!/\S/.test(line.string)}
function blankLine(state){state.linkTitle=!1;state.em=!1;state.strong=!1;state.strikethrough=!1;state.quote=0;state.indentedCode=!1;if(htmlModeMissing&&state.f==htmlBlock){state.f=inlineNormal;state.block=blockNormal}
state.trailingSpace=0;state.trailingSpaceNewLine=!1;state.prevLine=state.thisLine
state.thisLine=null
return null}
function blockNormal(stream,state){var sol=stream.sol();var prevLineIsList=state.list!==!1,prevLineIsIndentedCode=state.indentedCode;state.indentedCode=!1;if(prevLineIsList){if(state.indentationDiff>=0){if(state.indentationDiff<4){state.indentation-=state.indentationDiff}
state.list=null}else if(state.indentation>0){state.list=null}else{state.list=!1}}
var match=null;if(state.indentationDiff>=4){stream.skipToEnd();if(prevLineIsIndentedCode||lineIsEmpty(state.prevLine)){state.indentation-=4;state.indentedCode=!0;return tokenTypes.code}else{return null}}else if(stream.eatSpace()){return null}else if((match=stream.match(atxHeaderRE))&&match[1].length<=6){state.header=match[1].length;if(modeCfg.highlightFormatting)state.formatting="header";state.f=state.inline;return getType(state)}else if(!lineIsEmpty(state.prevLine)&&!state.quote&&!prevLineIsList&&!prevLineIsIndentedCode&&(match=stream.match(setextHeaderRE))){state.header=match[0].charAt(0)=='='?1:2;if(modeCfg.highlightFormatting)state.formatting="header";state.f=state.inline;return getType(state)}else if(stream.eat('>')){state.quote=sol?1:state.quote+1;if(modeCfg.highlightFormatting)state.formatting="quote";stream.eatSpace();return getType(state)}else if(stream.peek()==='['){return switchInline(stream,state,footnoteLink)}else if(stream.match(hrRE,!0)){state.hr=!0;return tokenTypes.hr}else if((lineIsEmpty(state.prevLine)||prevLineIsList)&&(stream.match(ulRE,!1)||stream.match(olRE,!1))){var listType=null;if(stream.match(ulRE,!0)){listType='ul'}else{stream.match(olRE,!0);listType='ol'}
state.indentation=stream.column()+stream.current().length;state.list=!0;while(state.listStack&&stream.column()<state.listStack[state.listStack.length-1]){state.listStack.pop()}
state.listStack.push(state.indentation);if(modeCfg.taskLists&&stream.match(taskListRE,!1)){state.taskList=!0}
state.f=state.inline;if(modeCfg.highlightFormatting)state.formatting=["list","list-"+listType];return getType(state)}else if(modeCfg.fencedCodeBlocks&&(match=stream.match(fencedCodeRE,!0))){state.fencedChars=match[1]
state.localMode=getMode(match[2]);if(state.localMode)state.localState=CodeMirror.startState(state.localMode);state.f=state.block=local;if(modeCfg.highlightFormatting)state.formatting="code-block";state.code=-1
return getType(state)}
return switchInline(stream,state,state.inline)}
function htmlBlock(stream,state){var style=htmlMode.token(stream,state.htmlState);if(!htmlModeMissing){var inner=CodeMirror.innerMode(htmlMode,state.htmlState)
if((inner.mode.name=="xml"&&inner.state.tagStart===null&&(!inner.state.context&&inner.state.tokenize.isInText))||(state.md_inside&&stream.current().indexOf(">")>-1)){state.f=inlineNormal;state.block=blockNormal;state.htmlState=null}}
return style}
function local(stream,state){if(state.fencedChars&&stream.match(state.fencedChars,!1)){state.localMode=state.localState=null;state.f=state.block=leavingLocal;return null}else if(state.localMode){return state.localMode.token(stream,state.localState)}else{stream.skipToEnd();return tokenTypes.code}}
function leavingLocal(stream,state){stream.match(state.fencedChars);state.block=blockNormal;state.f=inlineNormal;state.fencedChars=null;if(modeCfg.highlightFormatting)state.formatting="code-block";state.code=1
var returnType=getType(state);state.code=0
return returnType}
function getType(state){var styles=[];if(state.formatting){styles.push(tokenTypes.formatting);if(typeof state.formatting==="string")state.formatting=[state.formatting];for(var i=0;i<state.formatting.length;i++){styles.push(tokenTypes.formatting+"-"+state.formatting[i]);if(state.formatting[i]==="header"){styles.push(tokenTypes.formatting+"-"+state.formatting[i]+"-"+state.header)}
if(state.formatting[i]==="quote"){if(!modeCfg.maxBlockquoteDepth||modeCfg.maxBlockquoteDepth>=state.quote){styles.push(tokenTypes.formatting+"-"+state.formatting[i]+"-"+state.quote)}else{styles.push("error")}}}}
if(state.taskOpen){styles.push("meta");return styles.length?styles.join(' '):null}
if(state.taskClosed){styles.push("property");return styles.length?styles.join(' '):null}
if(state.linkHref){styles.push(tokenTypes.linkHref,"url")}else{if(state.strong){styles.push(tokenTypes.strong)}
if(state.em){styles.push(tokenTypes.em)}
if(state.strikethrough){styles.push(tokenTypes.strikethrough)}
if(state.linkText){styles.push(tokenTypes.linkText)}
if(state.code){styles.push(tokenTypes.code)}
if(state.image){styles.push(tokenTypes.image)}
if(state.imageAltText){styles.push(tokenTypes.imageAltText,"link")}
if(state.imageMarker){styles.push(tokenTypes.imageMarker)}}
if(state.header){styles.push(tokenTypes.header,tokenTypes.header+"-"+state.header)}
if(state.quote){styles.push(tokenTypes.quote);if(!modeCfg.maxBlockquoteDepth||modeCfg.maxBlockquoteDepth>=state.quote){styles.push(tokenTypes.quote+"-"+state.quote)}else{styles.push(tokenTypes.quote+"-"+modeCfg.maxBlockquoteDepth)}}
if(state.list!==!1){var listMod=(state.listStack.length-1)%3;if(!listMod){styles.push(tokenTypes.list1)}else if(listMod===1){styles.push(tokenTypes.list2)}else{styles.push(tokenTypes.list3)}}
if(state.trailingSpaceNewLine){styles.push("trailing-space-new-line")}else if(state.trailingSpace){styles.push("trailing-space-"+(state.trailingSpace%2?"a":"b"))}
return styles.length?styles.join(' '):null}
function handleText(stream,state){if(stream.match(textRE,!0)){return getType(state)}
return undefined}
function inlineNormal(stream,state){var style=state.text(stream,state);if(typeof style!=='undefined')
return style;if(state.list){state.list=null;return getType(state)}
if(state.taskList){var taskOpen=stream.match(taskListRE,!0)[1]!=="x";if(taskOpen)state.taskOpen=!0;else state.taskClosed=!0;if(modeCfg.highlightFormatting)state.formatting="task";state.taskList=!1;return getType(state)}
state.taskOpen=!1;state.taskClosed=!1;if(state.header&&stream.match(/^#+$/,!0)){if(modeCfg.highlightFormatting)state.formatting="header";return getType(state)}
var sol=stream.sol();var ch=stream.next();if(state.linkTitle){state.linkTitle=!1;var matchCh=ch;if(ch==='('){matchCh=')'}
matchCh=(matchCh+'').replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var regex='^\\s*(?:[^'+matchCh+'\\\\]+|\\\\\\\\|\\\\.)'+matchCh;if(stream.match(new RegExp(regex),!0)){return tokenTypes.linkHref}}
if(ch==='`'){var previousFormatting=state.formatting;if(modeCfg.highlightFormatting)state.formatting="code";stream.eatWhile('`');var count=stream.current().length
if(state.code==0){state.code=count
return getType(state)}else if(count==state.code){var t=getType(state)
state.code=0
return t}else{state.formatting=previousFormatting
return getType(state)}}else if(state.code){return getType(state)}
if(ch==='\\'){stream.next();if(modeCfg.highlightFormatting){var type=getType(state);var formattingEscape=tokenTypes.formatting+"-escape";return type?type+" "+formattingEscape:formattingEscape}}
if(ch==='!'&&stream.match(/\[[^\]]*\] ?(?:\(|\[)/,!1)){state.imageMarker=!0;state.image=!0;if(modeCfg.highlightFormatting)state.formatting="image";return getType(state)}
if(ch==='['&&state.imageMarker){state.imageMarker=!1;state.imageAltText=!0
if(modeCfg.highlightFormatting)state.formatting="image";return getType(state)}
if(ch===']'&&state.imageAltText){if(modeCfg.highlightFormatting)state.formatting="image";var type=getType(state);state.imageAltText=!1;state.image=!1;state.inline=state.f=linkHref;return type}
if(ch==='['&&stream.match(/[^\]]*\](\(.*\)| ?\[.*?\])/,!1)&&!state.image){state.linkText=!0;if(modeCfg.highlightFormatting)state.formatting="link";return getType(state)}
if(ch===']'&&state.linkText&&stream.match(/\(.*?\)| ?\[.*?\]/,!1)){if(modeCfg.highlightFormatting)state.formatting="link";var type=getType(state);state.linkText=!1;state.inline=state.f=linkHref;return type}
if(ch==='<'&&stream.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){state.f=state.inline=linkInline;if(modeCfg.highlightFormatting)state.formatting="link";var type=getType(state);if(type){type+=" "}else{type=""}
return type+tokenTypes.linkInline}
if(ch==='<'&&stream.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){state.f=state.inline=linkInline;if(modeCfg.highlightFormatting)state.formatting="link";var type=getType(state);if(type){type+=" "}else{type=""}
return type+tokenTypes.linkEmail}
if(ch==='<'&&stream.match(/^(!--|\w)/,!1)){var end=stream.string.indexOf(">",stream.pos);if(end!=-1){var atts=stream.string.substring(stream.start,end);if(/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(atts))state.md_inside=!0}
stream.backUp(1);state.htmlState=CodeMirror.startState(htmlMode);return switchBlock(stream,state,htmlBlock)}
if(ch==='<'&&stream.match(/^\/\w*?>/)){state.md_inside=!1;return"tag"}
var ignoreUnderscore=!1;if(!modeCfg.underscoresBreakWords){if(ch==='_'&&stream.peek()!=='_'&&stream.match(/(\w)/,!1)){var prevPos=stream.pos-2;if(prevPos>=0){var prevCh=stream.string.charAt(prevPos);if(prevCh!=='_'&&prevCh.match(/(\w)/,!1)){ignoreUnderscore=!0}}}}
if(ch==='*'||(ch==='_'&&!ignoreUnderscore)){if(sol&&stream.peek()===' '){}else if(state.strong===ch&&stream.eat(ch)){if(modeCfg.highlightFormatting)state.formatting="strong";var t=getType(state);state.strong=!1;return t}else if(!state.strong&&stream.eat(ch)){state.strong=ch;if(modeCfg.highlightFormatting)state.formatting="strong";return getType(state)}else if(state.em===ch){if(modeCfg.highlightFormatting)state.formatting="em";var t=getType(state);state.em=!1;return t}else if(!state.em){state.em=ch;if(modeCfg.highlightFormatting)state.formatting="em";return getType(state)}}else if(ch===' '){if(stream.eat('*')||stream.eat('_')){if(stream.peek()===' '){return getType(state)}else{stream.backUp(1)}}}
if(modeCfg.strikethrough){if(ch==='~'&&stream.eatWhile(ch)){if(state.strikethrough){if(modeCfg.highlightFormatting)state.formatting="strikethrough";var t=getType(state);state.strikethrough=!1;return t}else if(stream.match(/^[^\s]/,!1)){state.strikethrough=!0;if(modeCfg.highlightFormatting)state.formatting="strikethrough";return getType(state)}}else if(ch===' '){if(stream.match(/^~~/,!0)){if(stream.peek()===' '){return getType(state)}else{stream.backUp(2)}}}}
if(ch===' '){if(stream.match(/ +$/,!1)){state.trailingSpace++}else if(state.trailingSpace){state.trailingSpaceNewLine=!0}}
return getType(state)}
function linkInline(stream,state){var ch=stream.next();if(ch===">"){state.f=state.inline=inlineNormal;if(modeCfg.highlightFormatting)state.formatting="link";var type=getType(state);if(type){type+=" "}else{type=""}
return type+tokenTypes.linkInline}
stream.match(/^[^>]+/,!0);return tokenTypes.linkInline}
function linkHref(stream,state){if(stream.eatSpace()){return null}
var ch=stream.next();if(ch==='('||ch==='['){state.f=state.inline=getLinkHrefInside(ch==="("?")":"]",0);if(modeCfg.highlightFormatting)state.formatting="link-string";state.linkHref=!0;return getType(state)}
return'error'}
var linkRE={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\\]]|\\.)*\])*?(?=\])/}
function getLinkHrefInside(endChar){return function(stream,state){var ch=stream.next();if(ch===endChar){state.f=state.inline=inlineNormal;if(modeCfg.highlightFormatting)state.formatting="link-string";var returnState=getType(state);state.linkHref=!1;return returnState}
stream.match(linkRE[endChar])
state.linkHref=!0;return getType(state)}}
function footnoteLink(stream,state){if(stream.match(/^([^\]\\]|\\.)*\]:/,!1)){state.f=footnoteLinkInside;stream.next();if(modeCfg.highlightFormatting)state.formatting="link";state.linkText=!0;return getType(state)}
return switchInline(stream,state,inlineNormal)}
function footnoteLinkInside(stream,state){if(stream.match(/^\]:/,!0)){state.f=state.inline=footnoteUrl;if(modeCfg.highlightFormatting)state.formatting="link";var returnType=getType(state);state.linkText=!1;return returnType}
stream.match(/^([^\]\\]|\\.)+/,!0);return tokenTypes.linkText}
function footnoteUrl(stream,state){if(stream.eatSpace()){return null}
stream.match(/^[^\s]+/,!0);if(stream.peek()===undefined){state.linkTitle=!0}else{stream.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0)}
state.f=state.inline=inlineNormal;return tokenTypes.linkHref+" url"}
var mode={startState:function(){return{f:blockNormal,prevLine:null,thisLine:null,block:blockNormal,htmlState:null,indentation:0,inline:inlineNormal,text:handleText,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(s){return{f:s.f,prevLine:s.prevLine,thisLine:s.thisLine,block:s.block,htmlState:s.htmlState&&CodeMirror.copyState(htmlMode,s.htmlState),indentation:s.indentation,localMode:s.localMode,localState:s.localMode?CodeMirror.copyState(s.localMode,s.localState):null,inline:s.inline,text:s.text,formatting:!1,linkTitle:s.linkTitle,code:s.code,em:s.em,strong:s.strong,strikethrough:s.strikethrough,header:s.header,hr:s.hr,taskList:s.taskList,list:s.list,listStack:s.listStack.slice(0),quote:s.quote,indentedCode:s.indentedCode,trailingSpace:s.trailingSpace,trailingSpaceNewLine:s.trailingSpaceNewLine,md_inside:s.md_inside,fencedChars:s.fencedChars}},token:function(stream,state){state.formatting=!1;if(stream!=state.thisLine){var forceBlankLine=state.header||state.hr;state.header=0;state.hr=!1;if(stream.match(/^\s*$/,!0)||forceBlankLine){blankLine(state);if(!forceBlankLine)return null
state.prevLine=null}
state.prevLine=state.thisLine
state.thisLine=stream
state.taskList=!1;state.trailingSpace=0;state.trailingSpaceNewLine=!1;state.f=state.block;var indentation=stream.match(/^\s*/,!0)[0].replace(/\t/g,'    ').length;state.indentationDiff=Math.min(indentation-state.indentation,4);state.indentation=state.indentation+state.indentationDiff;if(indentation>0)return null}
return state.f(stream,state)},innerMode:function(state){if(state.block==htmlBlock)return{state:state.htmlState,mode:htmlMode};if(state.localState)return{state:state.localState,mode:state.localMode};return{state:state,mode:mode}},blankLine:blankLine,getType:getType,fold:"markdown"};return mode},"xml");CodeMirror.defineMIME("text/x-markdown","markdown")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({tabSize:4},"markdown");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
var modeHighlightFormatting=CodeMirror.getMode({tabSize:4},{name:"markdown",highlightFormatting:!0});function FT(name){test.mode(name,modeHighlightFormatting,Array.prototype.slice.call(arguments,1))}
var modeAtxNoSpace=CodeMirror.getMode({tabSize:4},{name:"markdown",allowAtxHeaderWithoutSpace:!0});function AtxNoSpaceTest(name){test.mode(name,modeAtxNoSpace,Array.prototype.slice.call(arguments,1))}
var modeFenced=CodeMirror.getMode({tabSize:4},{name:"markdown",fencedCodeBlocks:!0});function FencedTest(name){test.mode(name,modeFenced,Array.prototype.slice.call(arguments,1))}
var modeOverrideClasses=CodeMirror.getMode({tabsize:4},{name:"markdown",strikethrough:!0,tokenTypeOverrides:{"header":"override-header","code":"override-code","quote":"override-quote","list1":"override-list1","list2":"override-list2","list3":"override-list3","hr":"override-hr","image":"override-image","imageAltText":"override-image-alt-text","imageMarker":"override-image-marker","linkInline":"override-link-inline","linkEmail":"override-link-email","linkText":"override-link-text","linkHref":"override-link-href","em":"override-em","strong":"override-strong","strikethrough":"override-strikethrough"}});function TokenTypeOverrideTest(name){test.mode(name,modeOverrideClasses,Array.prototype.slice.call(arguments,1))}
var modeFormattingOverride=CodeMirror.getMode({tabsize:4},{name:"markdown",highlightFormatting:!0,tokenTypeOverrides:{"formatting":"override-formatting"}});function FormatTokenTypeOverrideTest(name){test.mode(name,modeFormattingOverride,Array.prototype.slice.call(arguments,1))}
FT("formatting_emAsterisk","[em&formatting&formatting-em *][em foo][em&formatting&formatting-em *]");FT("formatting_emUnderscore","[em&formatting&formatting-em _][em foo][em&formatting&formatting-em _]");FT("formatting_strongAsterisk","[strong&formatting&formatting-strong **][strong foo][strong&formatting&formatting-strong **]");FT("formatting_strongUnderscore","[strong&formatting&formatting-strong __][strong foo][strong&formatting&formatting-strong __]");FT("formatting_codeBackticks","[comment&formatting&formatting-code `][comment foo][comment&formatting&formatting-code `]");FT("formatting_doubleBackticks","[comment&formatting&formatting-code ``][comment foo ` bar][comment&formatting&formatting-code ``]");FT("formatting_atxHeader","[header&header-1&formatting&formatting-header&formatting-header-1 # ][header&header-1 foo # bar ][header&header-1&formatting&formatting-header&formatting-header-1 #]");FT("formatting_setextHeader","foo","[header&header-1&formatting&formatting-header&formatting-header-1 =]");FT("formatting_blockquote","[quote&quote-1&formatting&formatting-quote&formatting-quote-1 > ][quote&quote-1 foo]");FT("formatting_list","[variable-2&formatting&formatting-list&formatting-list-ul - ][variable-2 foo]");FT("formatting_list","[variable-2&formatting&formatting-list&formatting-list-ol 1. ][variable-2 foo]");FT("formatting_link","[link&formatting&formatting-link [][link foo][link&formatting&formatting-link ]]][string&formatting&formatting-link-string&url (][string&url http://example.com/][string&formatting&formatting-link-string&url )]");FT("formatting_linkReference","[link&formatting&formatting-link [][link foo][link&formatting&formatting-link ]]][string&formatting&formatting-link-string&url [][string&url bar][string&formatting&formatting-link-string&url ]]]","[link&formatting&formatting-link [][link bar][link&formatting&formatting-link ]]:] [string&url http://example.com/]");FT("formatting_linkWeb","[link&formatting&formatting-link <][link http://example.com/][link&formatting&formatting-link >]");FT("formatting_linkEmail","[link&formatting&formatting-link <][link user@example.com][link&formatting&formatting-link >]");FT("formatting_escape","[formatting-escape \\*]");FT("formatting_image","[formatting&formatting-image&image&image-marker !][formatting&formatting-image&image&image-alt-text&link [[][image&image-alt-text&link alt text][formatting&formatting-image&image&image-alt-text&link ]]][formatting&formatting-link-string&string&url (][url&string http://link.to/image.jpg][formatting&formatting-link-string&string&url )]");MT("plainText","foo");MT("trailingSpace1","foo ");MT("trailingSpace2","foo[trailing-space-a  ][trailing-space-new-line  ]");MT("trailingSpace3","foo[trailing-space-a  ][trailing-space-b  ][trailing-space-new-line  ]");MT("trailingSpace4","foo[trailing-space-a  ][trailing-space-b  ][trailing-space-a  ][trailing-space-new-line  ]");MT("codeBlocksUsing4Spaces","    [comment foo]");MT("codeBlocksUsing4SpacesIndentation","    [comment bar]","        [comment hello]","            [comment world]","    [comment foo]","bar");MT("codeBlocksWithTrailingIndentedLine","    [comment foo]","        [comment bar]","    [comment baz]","    ","hello");MT("codeBlocksUsing1Tab","\t[comment foo]");MT("noCodeBlocksAfterParagraph","Foo","    Bar");MT("inlineCodeUsingBackticks","foo [comment `bar`]");MT("blockCodeSingleBacktick","[comment `]","[comment foo]","[comment `]");MT("unclosedBackticks","foo [comment `bar]");MT("doubleBackticks","[comment ``foo ` bar``]");MT("consecutiveBackticks","[comment `foo```bar`]");MT("consecutiveBackticks","[comment `foo```bar`] hello [comment `world`]");MT("unclosedBackticks","[comment ``foo ``` bar` hello]");MT("closedBackticks","[comment ``foo ``` bar` hello``] world");MT("atxH1","[header&header-1 # foo]");MT("atxH2","[header&header-2 ## foo]");MT("atxH3","[header&header-3 ### foo]");MT("atxH4","[header&header-4 #### foo]");MT("atxH5","[header&header-5 ##### foo]");MT("atxH6","[header&header-6 ###### foo]");MT("noAtxH7","####### foo");MT("noAtxH1WithoutSpace","#5 bolt");AtxNoSpaceTest("atxNoSpaceAllowed_H1NoSpace","[header&header-1 #foo]");AtxNoSpaceTest("atxNoSpaceAllowed_H4NoSpace","[header&header-4 ####foo]");AtxNoSpaceTest("atxNoSpaceAllowed_H1Space","[header&header-1 # foo]");MT("atxH1inline","[header&header-1 # foo ][header&header-1&em *bar*]");MT("setextH1","foo","[header&header-1 =]");MT("setextH1","foo","[header&header-1 ===]");MT("setextH2","foo","[header&header-2 -]");MT("setextH2","foo","[header&header-2 ---]");MT("setextH2AllowSpaces","foo","   [header&header-2 ----      ]");MT("noSetextAfterIndentedCodeBlock","     [comment foo]","[hr ---]");MT("noSetextAfterQuote","[quote&quote-1 > foo]","[hr ---]");MT("noSetextAfterList","[variable-2 - foo]","[hr ---]");MT("blockquoteSpace","[quote&quote-1 > foo]");MT("blockquoteNoSpace","[quote&quote-1 >foo]");MT("blockquoteNoBlankLine","foo","[quote&quote-1 > bar]");MT("blockquoteSpace","[quote&quote-1 > foo]","[quote&quote-1 >][quote&quote-2 > foo]","[quote&quote-1 >][quote&quote-2 >][quote&quote-3 > foo]");MT("blockquoteThenParagraph","[quote&quote-1 >foo]","","bar");MT("multiBlockquoteLazy","[quote&quote-1 >foo]","[quote&quote-1 bar]");MT("multiBlockquoteLazyThenParagraph","[quote&quote-1 >foo]","[quote&quote-1 bar]","","hello");MT("multiBlockquote","[quote&quote-1 >foo]","[quote&quote-1 >bar]");MT("multiBlockquoteThenParagraph","[quote&quote-1 >foo]","[quote&quote-1 >bar]","","hello");MT("headerAfterContinuedBlockquote","[quote&quote-1 > foo]","[quote&quote-1 bar]",""," [header&header-1 # hello]");MT("listAsterisk","foo","bar","","[variable-2 * foo]","[variable-2 * bar]");MT("listPlus","foo","bar","","[variable-2 + foo]","[variable-2 + bar]");MT("listDash","foo","bar","","[variable-2 - foo]","[variable-2 - bar]");MT("listNumber","foo","bar","","[variable-2 1. foo]","[variable-2 2. bar]");MT("listBogus","foo","1. bar","2. hello");MT("listAfterHr","[hr ---]","[variable-2 - bar]");MT("listAfterHeader","[header&header-1 # foo]","[variable-2 - bar]");MT("hrAfterList","[variable-2 - foo]","[hr -----]");MT("listAsteriskFormatting","[variable-2 * ][variable-2&em *foo*][variable-2  bar]","[variable-2 * ][variable-2&strong **foo**][variable-2  bar]","[variable-2 * ][variable-2&strong **][variable-2&em&strong *foo**][variable-2&em *][variable-2  bar]","[variable-2 * ][variable-2&comment `foo`][variable-2  bar]");MT("listPlusFormatting","[variable-2 + ][variable-2&em *foo*][variable-2  bar]","[variable-2 + ][variable-2&strong **foo**][variable-2  bar]","[variable-2 + ][variable-2&strong **][variable-2&em&strong *foo**][variable-2&em *][variable-2  bar]","[variable-2 + ][variable-2&comment `foo`][variable-2  bar]");MT("listDashFormatting","[variable-2 - ][variable-2&em *foo*][variable-2  bar]","[variable-2 - ][variable-2&strong **foo**][variable-2  bar]","[variable-2 - ][variable-2&strong **][variable-2&em&strong *foo**][variable-2&em *][variable-2  bar]","[variable-2 - ][variable-2&comment `foo`][variable-2  bar]");MT("listNumberFormatting","[variable-2 1. ][variable-2&em *foo*][variable-2  bar]","[variable-2 2. ][variable-2&strong **foo**][variable-2  bar]","[variable-2 3. ][variable-2&strong **][variable-2&em&strong *foo**][variable-2&em *][variable-2  bar]","[variable-2 4. ][variable-2&comment `foo`][variable-2  bar]");MT("listParagraph","[variable-2 * foo]","","[variable-2 * bar]");MT("listMultiParagraph","[variable-2 * foo]","","[variable-2 * bar]","","    [variable-2 hello]");MT("listMultiParagraphExtra","[variable-2 * foo]","","[variable-2 * bar]","","","    [variable-2 hello]");MT("listMultiParagraphExtraSpace","[variable-2 * foo]","","[variable-2 * bar]","","     [variable-2 hello]","","    [variable-2 world]");MT("listTab","[variable-2 * foo]","","[variable-2 * bar]","","\t[variable-2 hello]");MT("listNoIndent","[variable-2 * foo]","","[variable-2 * bar]","","hello");MT("listCommonMarkIndentationCode","[variable-2 * Code blocks also affect]","  [variable-3 * The next level starts where the contents start.]","   [variable-3 *    Anything less than that will keep the item on the same level.]","       [variable-3 * Each list item can indent the first level further and further.]","  [variable-3 * For the most part, this makes sense while writing a list.]","    [keyword * This means two items with same indentation can be different levels.]","     [keyword *  Each level has an indent requirement that can change between items.]","       [keyword * A list item that meets this will be part of the next level.]","   [variable-3 * Otherwise, it will be part of the level where it does meet this.]"," [variable-2 * World]");MT("blockquote","[variable-2 * foo]","","[variable-2 * bar]","","    [variable-2&quote&quote-1 > hello]");MT("blockquoteCode","[variable-2 * foo]","","[variable-2 * bar]","","        [comment > hello]","","    [variable-2 world]");MT("blockquoteCodeText","[variable-2 * foo]","","    [variable-2 bar]","","        [comment hello]","","    [variable-2 world]");MT("listAsteriskNested","[variable-2 * foo]","","    [variable-3 * bar]");MT("listPlusNested","[variable-2 + foo]","","    [variable-3 + bar]");MT("listDashNested","[variable-2 - foo]","","    [variable-3 - bar]");MT("listNumberNested","[variable-2 1. foo]","","    [variable-3 2. bar]");MT("listMixed","[variable-2 * foo]","","    [variable-3 + bar]","","        [keyword - hello]","","            [variable-2 1. world]");MT("listBlockquote","[variable-2 * foo]","","    [variable-3 + bar]","","        [quote&quote-1&variable-3 > hello]");MT("listCode","[variable-2 * foo]","","    [variable-3 + bar]","","            [comment hello]");MT("listCodeIndentation","[variable-2 * foo]","","        [comment bar]","            [comment hello]","                [comment world]","        [comment foo]","    [variable-2 bar]");MT("listNested","[variable-2 * foo]","","    [variable-3 * bar]","","       [variable-3 hello]");MT("listNested","[variable-2 * foo]","","    [variable-3 * bar]","","      [keyword * foo]");MT("listCodeText","[variable-2 * foo]","","        [comment bar]","","hello");MT("hrSpace","[hr * * *]");MT("hr","[hr ***]");MT("hrLong","[hr *****]");MT("hrSpaceDash","[hr - - -]");MT("hrDashLong","[hr ---------------------------------------]");MT("Images","[image&image-marker !][image&image-alt-text&link [[alt text]]][string&url (http://link.to/image.jpg)]")
MT("imageEm","[image&image-marker !][image&image-alt-text&link [[][image-alt-text&em&image&link *alt text*][image&image-alt-text&link ]]][string&url (http://link.to/image.jpg)]");MT("imageStrong","[image&image-marker !][image&image-alt-text&link [[][image-alt-text&strong&image&link **alt text**][image&image-alt-text&link ]]][string&url (http://link.to/image.jpg)]");MT("imageEmStrong","[image&image-marker !][image&image-alt-text&link [[][image-alt-text&image&strong&link **][image&image-alt-text&em&strong&link *alt text**][image&image-alt-text&em&link *][image&image-alt-text&link ]]][string&url (http://link.to/image.jpg)]");MT("linkTitle","[link [[foo]]][string&url (http://example.com/ \"bar\")] hello");MT("linkNoTitle","[link [[foo]]][string&url (http://example.com/)] bar");MT("linkImage","[link [[][link&image&image-marker !][link&image&image-alt-text&link [[alt text]]][string&url (http://link.to/image.jpg)][link ]]][string&url (http://example.com/)] bar");MT("linkEm","[link [[][link&em *foo*][link ]]][string&url (http://example.com/)] bar");MT("linkStrong","[link [[][link&strong **foo**][link ]]][string&url (http://example.com/)] bar");MT("linkEmStrong","[link [[][link&strong **][link&em&strong *foo**][link&em *][link ]]][string&url (http://example.com/)] bar");MT("imageTitle","[image&image-marker !][image&image-alt-text&link [[alt text]]][string&url (http://example.com/ \"bar\")] hello");MT("imageNoTitle","[image&image-marker !][image&image-alt-text&link [[alt text]]][string&url (http://example.com/)] bar");MT("imageAsterisks","[image&image-marker !][image&image-alt-text&link [[ ][image&image-alt-text&em&link *alt text*][image&image-alt-text&link ]]][string&url (http://link.to/image.jpg)] bar");MT("notALink","[[foo]] (bar)");MT("linkReference","[link [[foo]]][string&url [[bar]]] hello");MT("linkReferenceEm","[link [[][link&em *foo*][link ]]][string&url [[bar]]] hello");MT("linkReferenceStrong","[link [[][link&strong **foo**][link ]]][string&url [[bar]]] hello");MT("linkReferenceEmStrong","[link [[][link&strong **][link&em&strong *foo**][link&em *][link ]]][string&url [[bar]]] hello");MT("linkReferenceSpace","[link [[foo]]] [string&url [[bar]]] hello");MT("linkReferenceDoubleSpace","[[foo]]  [[bar]] hello");MT("linkImplicit","[link [[foo]]][string&url [[]]] hello");MT("labelNoTitle","[link [[foo]]:] [string&url http://example.com/]");MT("labelIndented","   [link [[foo]]:] [string&url http://example.com/]");MT("labelSpaceTitle","[link [[foo bar]]:] [string&url http://example.com/ \"hello\"]");MT("labelDoubleTitle","[link [[foo bar]]:] [string&url http://example.com/ \"hello\"] \"world\"");MT("labelTitleDoubleQuotes","[link [[foo]]:] [string&url http://example.com/  \"bar\"]");MT("labelTitleSingleQuotes","[link [[foo]]:] [string&url http://example.com/  'bar']");MT("labelTitleParentheses","[link [[foo]]:] [string&url http://example.com/  (bar)]");MT("labelTitleInvalid","[link [[foo]]:] [string&url http://example.com/] bar");MT("labelLinkAngleBrackets","[link [[foo]]:] [string&url <http://example.com/>  \"bar\"]");MT("labelTitleNextDoubleQuotes","[link [[foo]]:] [string&url http://example.com/]","[string \"bar\"] hello");MT("labelTitleNextSingleQuotes","[link [[foo]]:] [string&url http://example.com/]","[string 'bar'] hello");MT("labelTitleNextParentheses","[link [[foo]]:] [string&url http://example.com/]","[string (bar)] hello");MT("labelTitleNextMixed","[link [[foo]]:] [string&url http://example.com/]","(bar\" hello");MT("labelEscape","[link [[foo \\]] ]]:] [string&url http://example.com/]");MT("labelEscapeColon","[link [[foo \\]]: bar]]:] [string&url http://example.com/]");MT("labelEscapeEnd","[[foo\\]]: http://example.com/");MT("linkWeb","[link <http://example.com/>] foo");MT("linkWebDouble","[link <http://example.com/>] foo [link <http://example.com/>]");MT("linkEmail","[link <user@example.com>] foo");MT("linkEmailDouble","[link <user@example.com>] foo [link <user@example.com>]");MT("emAsterisk","[em *foo*] bar");MT("emUnderscore","[em _foo_] bar");MT("emInWordAsterisk","foo[em *bar*]hello");MT("emInWordUnderscore","foo[em _bar_]hello");MT("emEscapedBySpaceIn","foo [em _bar _ hello_] world");MT("emEscapedBySpaceOut","foo _ bar[em _hello_]world");MT("emEscapedByNewline","foo","_ bar[em _hello_]world");MT("emIncompleteAsterisk","foo [em *bar]");MT("emIncompleteUnderscore","foo [em _bar]");MT("strongAsterisk","[strong **foo**] bar");MT("strongUnderscore","[strong __foo__] bar");MT("emStrongAsterisk","[em *foo][em&strong **bar*][strong hello**] world");MT("emStrongUnderscore","[em _foo][em&strong __bar_][strong hello__] world");MT("emStrongMixed","[em _foo][em&strong **bar*hello__ world]");MT("emStrongMixed","[em *foo][em&strong __bar_hello** world]");MT("linkWithNestedParens","[link [[foo]]][string&url (bar(baz))]")
MT("escapeBacktick","foo \\`bar\\`");MT("doubleEscapeBacktick","foo \\\\[comment `bar\\\\`]");MT("escapeAsterisk","foo \\*bar\\*");MT("doubleEscapeAsterisk","foo \\\\[em *bar\\\\*]");MT("escapeUnderscore","foo \\_bar\\_");MT("doubleEscapeUnderscore","foo \\\\[em _bar\\\\_]");MT("escapeHash","\\# foo");MT("doubleEscapeHash","\\\\# foo");MT("escapeNewline","\\","[em *foo*]");TokenTypeOverrideTest("overrideHeader1","[override-header&override-header-1 # Foo]");TokenTypeOverrideTest("overrideHeader2","[override-header&override-header-2 ## Foo]");TokenTypeOverrideTest("overrideHeader3","[override-header&override-header-3 ### Foo]");TokenTypeOverrideTest("overrideHeader4","[override-header&override-header-4 #### Foo]");TokenTypeOverrideTest("overrideHeader5","[override-header&override-header-5 ##### Foo]");TokenTypeOverrideTest("overrideHeader6","[override-header&override-header-6 ###### Foo]");TokenTypeOverrideTest("overrideCode","[override-code `foo`]");TokenTypeOverrideTest("overrideCodeBlock","[override-code ```]","[override-code foo]","[override-code ```]");TokenTypeOverrideTest("overrideQuote","[override-quote&override-quote-1 > foo]","[override-quote&override-quote-1 > bar]");TokenTypeOverrideTest("overrideQuoteNested","[override-quote&override-quote-1 > foo]","[override-quote&override-quote-1 >][override-quote&override-quote-2 > bar]","[override-quote&override-quote-1 >][override-quote&override-quote-2 >][override-quote&override-quote-3 > baz]");TokenTypeOverrideTest("overrideLists","[override-list1 - foo]","","    [override-list2 + bar]","","        [override-list3 * baz]","","            [override-list1 1. qux]","","                [override-list2 - quux]");TokenTypeOverrideTest("overrideHr","[override-hr * * *]");TokenTypeOverrideTest("overrideImage","[override-image&override-image-marker !][override-image&override-image-alt-text&link [[alt text]]][override-link-href&url (http://link.to/image.jpg)]");TokenTypeOverrideTest("overrideLinkText","[override-link-text [[foo]]][override-link-href&url (http://example.com)]");TokenTypeOverrideTest("overrideLinkEmailAndInline","[override-link-email <][override-link-inline foo@example.com>]");TokenTypeOverrideTest("overrideEm","[override-em *foo*]");TokenTypeOverrideTest("overrideStrong","[override-strong **foo**]");TokenTypeOverrideTest("overrideStrikethrough","[override-strikethrough ~~foo~~]");FormatTokenTypeOverrideTest("overrideFormatting","[override-formatting-escape \\*]");MT("taskList","[variable-2 * [ ]] bar]");MT("noFencedCodeBlocks","~~~","foo","~~~");FencedTest("fencedCodeBlocks","[comment ```]","[comment foo]","[comment ```]","bar");FencedTest("fencedCodeBlocksMultipleChars","[comment `````]","[comment foo]","[comment ```]","[comment foo]","[comment `````]","bar");FencedTest("fencedCodeBlocksTildes","[comment ~~~]","[comment foo]","[comment ~~~]","bar");FencedTest("fencedCodeBlocksTildesMultipleChars","[comment ~~~~~]","[comment ~~~]","[comment foo]","[comment ~~~~~]","bar");FencedTest("fencedCodeBlocksMultipleChars","[comment `````]","[comment foo]","[comment ```]","[comment foo]","[comment `````]","bar");FencedTest("fencedCodeBlocksMixed","[comment ~~~]","[comment ```]","[comment foo]","[comment ~~~]","bar");MT("xmlMode","[tag&bracket <][tag div][tag&bracket >]","*foo*","[tag&bracket <][tag http://github.com][tag&bracket />]","[tag&bracket </][tag div][tag&bracket >]","[link <http://github.com/>]");MT("xmlModeWithMarkdownInside","[tag&bracket <][tag div] [attribute markdown]=[string 1][tag&bracket >]","[em *foo*]","[link <http://github.com/>]","[tag </div>]","[link <http://github.com/>]","[tag&bracket <][tag div][tag&bracket >]","[tag&bracket </][tag div][tag&bracket >]")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode('mathematica',function(_config,_parserConfig){var Identifier='[a-zA-Z\\$][a-zA-Z0-9\\$]*';var pBase="(?:\\d+)";var pFloat="(?:\\.\\d+|\\d+\\.\\d*|\\d+)";var pFloatBase="(?:\\.\\w+|\\w+\\.\\w*|\\w+)";var pPrecision="(?:`(?:`?"+pFloat+")?)";var reBaseForm=new RegExp('(?:'+pBase+'(?:\\^\\^'+pFloatBase+pPrecision+'?(?:\\*\\^[+-]?\\d+)?))');var reFloatForm=new RegExp('(?:'+pFloat+pPrecision+'?(?:\\*\\^[+-]?\\d+)?)');var reIdInContext=new RegExp('(?:`?)(?:'+Identifier+')(?:`(?:'+Identifier+'))*(?:`?)');function tokenBase(stream,state){var ch;ch=stream.next();if(ch==='"'){state.tokenize=tokenString;return state.tokenize(stream,state)}
if(ch==='('){if(stream.eat('*')){state.commentLevel++;state.tokenize=tokenComment;return state.tokenize(stream,state)}}
stream.backUp(1);if(stream.match(reBaseForm,!0,!1)){return'number'}
if(stream.match(reFloatForm,!0,!1)){return'number'}
if(stream.match(/(?:In|Out)\[[0-9]*\]/,!0,!1)){return'atom'}
if(stream.match(/([a-zA-Z\$]+(?:`?[a-zA-Z0-9\$])*::usage)/,!0,!1)){return'meta'}
if(stream.match(/([a-zA-Z\$]+(?:`?[a-zA-Z0-9\$])*::[a-zA-Z\$][a-zA-Z0-9\$]*):?/,!0,!1)){return'string-2'}
if(stream.match(/([a-zA-Z\$][a-zA-Z0-9\$]*\s*:)(?:(?:[a-zA-Z\$][a-zA-Z0-9\$]*)|(?:[^:=>~@\^\&\*\)\[\]'\?,\|])).*/,!0,!1)){return'variable-2'}
if(stream.match(/[a-zA-Z\$][a-zA-Z0-9\$]*_+[a-zA-Z\$][a-zA-Z0-9\$]*/,!0,!1)){return'variable-2'}
if(stream.match(/[a-zA-Z\$][a-zA-Z0-9\$]*_+/,!0,!1)){return'variable-2'}
if(stream.match(/_+[a-zA-Z\$][a-zA-Z0-9\$]*/,!0,!1)){return'variable-2'}
if(stream.match(/\\\[[a-zA-Z\$][a-zA-Z0-9\$]*\]/,!0,!1)){return'variable-3'}
if(stream.match(/(?:\[|\]|{|}|\(|\))/,!0,!1)){return'bracket'}
if(stream.match(/(?:#[a-zA-Z\$][a-zA-Z0-9\$]*|#+[0-9]?)/,!0,!1)){return'variable-2'}
if(stream.match(reIdInContext,!0,!1)){return'keyword'}
if(stream.match(/(?:\\|\+|\-|\*|\/|,|;|\.|:|@|~|=|>|<|&|\||_|`|'|\^|\?|!|%)/,!0,!1)){return'operator'}
stream.next();return'error'}
function tokenString(stream,state){var next,end=!1,escaped=!1;while((next=stream.next())!=null){if(next==='"'&&!escaped){end=!0;break}
escaped=!escaped&&next==='\\'}
if(end&&!escaped){state.tokenize=tokenBase}
return'string'};function tokenComment(stream,state){var prev,next;while(state.commentLevel>0&&(next=stream.next())!=null){if(prev==='('&&next==='*')state.commentLevel++;if(prev==='*'&&next===')')state.commentLevel--;prev=next}
if(state.commentLevel<=0){state.tokenize=tokenBase}
return'comment'}
return{startState:function(){return{tokenize:tokenBase,commentLevel:0}},token:function(stream,state){if(stream.eatSpace())return null;return state.tokenize(stream,state)},blockCommentStart:"(*",blockCommentEnd:"*)"}});CodeMirror.defineMIME('text/x-mathematica',{name:'mathematica'})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var rfc2822=["From","Sender","Reply-To","To","Cc","Bcc","Message-ID","In-Reply-To","References","Resent-From","Resent-Sender","Resent-To","Resent-Cc","Resent-Bcc","Resent-Message-ID","Return-Path","Received"];var rfc2822NoEmail=["Date","Subject","Comments","Keywords","Resent-Date"];CodeMirror.registerHelper("hintWords","mbox",rfc2822.concat(rfc2822NoEmail));var whitespace=/^[ \t]/;var separator=/^From /;var rfc2822Header=new RegExp("^("+rfc2822.join("|")+"): ");var rfc2822HeaderNoEmail=new RegExp("^("+rfc2822NoEmail.join("|")+"): ");var header=/^[^:]+:/;var email=/^[^ ]+@[^ ]+/;var untilEmail=/^.*?(?=[^ ]+?@[^ ]+)/;var bracketedEmail=/^<.*?>/;var untilBracketedEmail=/^.*?(?=<.*>)/;function styleForHeader(header){if(header==="Subject")return"header";return"string"}
function readToken(stream,state){if(stream.sol()){state.inSeparator=!1;if(state.inHeader&&stream.match(whitespace)){return null}else{state.inHeader=!1;state.header=null}
if(stream.match(separator)){state.inHeaders=!0;state.inSeparator=!0;return"atom"}
var match;var emailPermitted=!1;if((match=stream.match(rfc2822HeaderNoEmail))||(emailPermitted=!0)&&(match=stream.match(rfc2822Header))){state.inHeaders=!0;state.inHeader=!0;state.emailPermitted=emailPermitted;state.header=match[1];return"atom"}
if(state.inHeaders&&(match=stream.match(header))){state.inHeader=!0;state.emailPermitted=!0;state.header=match[1];return"atom"}
state.inHeaders=!1;stream.skipToEnd();return null}
if(state.inSeparator){if(stream.match(email))return"link";if(stream.match(untilEmail))return"atom";stream.skipToEnd();return"atom"}
if(state.inHeader){var style=styleForHeader(state.header);if(state.emailPermitted){if(stream.match(bracketedEmail))return style+" link";if(stream.match(untilBracketedEmail))return style}
stream.skipToEnd();return style}
stream.skipToEnd();return null};CodeMirror.defineMode("mbox",function(){return{startState:function(){return{inSeparator:!1,inHeader:!1,emailPermitted:!1,header:null,inHeaders:!1}},token:readToken,blankLine:function(state){state.inHeaders=state.inSeparator=state.inHeader=!1}}});CodeMirror.defineMIME("application/mbox","mbox")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMIME("text/mirc","mirc");CodeMirror.defineMode("mirc",function(){function parseWords(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var specials=parseWords("$! $$ $& $? $+ $abook $abs $active $activecid "+"$activewid $address $addtok $agent $agentname $agentstat $agentver "+"$alias $and $anick $ansi2mirc $aop $appactive $appstate $asc $asctime "+"$asin $atan $avoice $away $awaymsg $awaytime $banmask $base $bfind "+"$binoff $biton $bnick $bvar $bytes $calc $cb $cd $ceil $chan $chanmodes "+"$chantypes $chat $chr $cid $clevel $click $cmdbox $cmdline $cnick $color "+"$com $comcall $comchan $comerr $compact $compress $comval $cos $count "+"$cr $crc $creq $crlf $ctime $ctimer $ctrlenter $date $day $daylight "+"$dbuh $dbuw $dccignore $dccport $dde $ddename $debug $decode $decompress "+"$deltok $devent $dialog $did $didreg $didtok $didwm $disk $dlevel $dll "+"$dllcall $dname $dns $duration $ebeeps $editbox $emailaddr $encode $error "+"$eval $event $exist $feof $ferr $fgetc $file $filename $filtered $finddir "+"$finddirn $findfile $findfilen $findtok $fline $floor $fopen $fread $fserve "+"$fulladdress $fulldate $fullname $fullscreen $get $getdir $getdot $gettok $gmt "+"$group $halted $hash $height $hfind $hget $highlight $hnick $hotline "+"$hotlinepos $ial $ialchan $ibl $idle $iel $ifmatch $ignore $iif $iil "+"$inelipse $ini $inmidi $inpaste $inpoly $input $inrect $inroundrect "+"$insong $instok $int $inwave $ip $isalias $isbit $isdde $isdir $isfile "+"$isid $islower $istok $isupper $keychar $keyrpt $keyval $knick $lactive "+"$lactivecid $lactivewid $left $len $level $lf $line $lines $link $lock "+"$lock $locked $log $logstamp $logstampfmt $longfn $longip $lower $ltimer "+"$maddress $mask $matchkey $matchtok $md5 $me $menu $menubar $menucontext "+"$menutype $mid $middir $mircdir $mircexe $mircini $mklogfn $mnick $mode "+"$modefirst $modelast $modespl $mouse $msfile $network $newnick $nick $nofile "+"$nopath $noqt $not $notags $notify $null $numeric $numok $oline $onpoly "+"$opnick $or $ord $os $passivedcc $pic $play $pnick $port $portable $portfree "+"$pos $prefix $prop $protect $puttok $qt $query $rand $r $rawmsg $read $readomo "+"$readn $regex $regml $regsub $regsubex $remove $remtok $replace $replacex "+"$reptok $result $rgb $right $round $scid $scon $script $scriptdir $scriptline "+"$sdir $send $server $serverip $sfile $sha1 $shortfn $show $signal $sin "+"$site $sline $snick $snicks $snotify $sock $sockbr $sockerr $sockname "+"$sorttok $sound $sqrt $ssl $sreq $sslready $status $strip $str $stripped "+"$syle $submenu $switchbar $tan $target $ticks $time $timer $timestamp "+"$timestampfmt $timezone $tip $titlebar $toolbar $treebar $trust $ulevel "+"$ulist $upper $uptime $url $usermode $v1 $v2 $var $vcmd $vcmdstat $vcmdver "+"$version $vnick $vol $wid $width $wildsite $wildtok $window $wrap $xor");var keywords=parseWords("abook ajinvite alias aline ame amsg anick aop auser autojoin avoice "+"away background ban bcopy beep bread break breplace bset btrunc bunset bwrite "+"channel clear clearall cline clipboard close cnick color comclose comopen "+"comreg continue copy creq ctcpreply ctcps dcc dccserver dde ddeserver "+"debug dec describe dialog did didtok disable disconnect dlevel dline dll "+"dns dqwindow drawcopy drawdot drawfill drawline drawpic drawrect drawreplace "+"drawrot drawsave drawscroll drawtext ebeeps echo editbox emailaddr enable "+"events exit fclose filter findtext finger firewall flash flist flood flush "+"flushini font fopen fseek fsend fserve fullname fwrite ghide gload gmove "+"gopts goto gplay gpoint gqreq groups gshow gsize gstop gtalk gunload hadd "+"halt haltdef hdec hdel help hfree hinc hload hmake hop hsave ial ialclear "+"ialmark identd if ignore iline inc invite iuser join kick linesep links list "+"load loadbuf localinfo log mdi me menubar mkdir mnick mode msg nick noop notice "+"notify omsg onotice part partall pdcc perform play playctrl pop protect pvoice "+"qme qmsg query queryn quit raw reload remini remote remove rename renwin "+"reseterror resetidle return rlevel rline rmdir run ruser save savebuf saveini "+"say scid scon server set showmirc signam sline sockaccept sockclose socklist "+"socklisten sockmark sockopen sockpause sockread sockrename sockudp sockwrite "+"sound speak splay sreq strip switchbar timer timestamp titlebar tnick tokenize "+"toolbar topic tray treebar ulist unload unset unsetall updatenl url uwho "+"var vcadd vcmd vcrem vol while whois window winhelp write writeint if isalnum "+"isalpha isaop isavoice isban ischan ishop isignore isin isincs isletter islower "+"isnotify isnum ison isop isprotect isreg isupper isvoice iswm iswmcs "+"elseif else goto menu nicklist status title icon size option text edit "+"button check radio box scroll list combo link tab item");var functions=parseWords("if elseif else and not or eq ne in ni for foreach while switch");var isOperatorChar=/[+\-*&%=<>!?^\/\|]/;function chain(stream,state,f){state.tokenize=f;return f(stream,state)}
function tokenBase(stream,state){var beforeParams=state.beforeParams;state.beforeParams=!1;var ch=stream.next();if(/[\[\]{}\(\),\.]/.test(ch)){if(ch=="("&&beforeParams)state.inParams=!0;else if(ch==")")state.inParams=!1;return null}else if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}else if(ch=="\\"){stream.eat("\\");stream.eat(/./);return"number"}else if(ch=="/"&&stream.eat("*")){return chain(stream,state,tokenComment)}else if(ch==";"&&stream.match(/ *\( *\(/)){return chain(stream,state,tokenUnparsed)}else if(ch==";"&&!state.inParams){stream.skipToEnd();return"comment"}else if(ch=='"'){stream.eat(/"/);return"keyword"}else if(ch=="$"){stream.eatWhile(/[$_a-z0-9A-Z\.:]/);if(specials&&specials.propertyIsEnumerable(stream.current().toLowerCase())){return"keyword"}else{state.beforeParams=!0;return"builtin"}}else if(ch=="%"){stream.eatWhile(/[^,^\s^\(^\)]/);state.beforeParams=!0;return"string"}else if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}else{stream.eatWhile(/[\w\$_{}]/);var word=stream.current().toLowerCase();if(keywords&&keywords.propertyIsEnumerable(word))
return"keyword";if(functions&&functions.propertyIsEnumerable(word)){state.beforeParams=!0;return"keyword"}
return null}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return"comment"}
function tokenUnparsed(stream,state){var maybeEnd=0,ch;while(ch=stream.next()){if(ch==";"&&maybeEnd==2){state.tokenize=tokenBase;break}
if(ch==")")
maybeEnd++;else if(ch!=" ")
maybeEnd=0}
return"meta"}
return{startState:function(){return{tokenize:tokenBase,beforeParams:!1,inParams:!1}},token:function(stream,state){if(stream.eatSpace())return null;return state.tokenize(stream,state)}}})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode('mllike',function(_config,parserConfig){var words={'let':'keyword','rec':'keyword','in':'keyword','of':'keyword','and':'keyword','if':'keyword','then':'keyword','else':'keyword','for':'keyword','to':'keyword','while':'keyword','do':'keyword','done':'keyword','fun':'keyword','function':'keyword','val':'keyword','type':'keyword','mutable':'keyword','match':'keyword','with':'keyword','try':'keyword','open':'builtin','ignore':'builtin','begin':'keyword','end':'keyword'};var extraWords=parserConfig.extraWords||{};for(var prop in extraWords){if(extraWords.hasOwnProperty(prop)){words[prop]=parserConfig.extraWords[prop]}}
function tokenBase(stream,state){var ch=stream.next();if(ch==='"'){state.tokenize=tokenString;return state.tokenize(stream,state)}
if(ch==='('){if(stream.eat('*')){state.commentLevel++;state.tokenize=tokenComment;return state.tokenize(stream,state)}}
if(ch==='~'){stream.eatWhile(/\w/);return'variable-2'}
if(ch==='`'){stream.eatWhile(/\w/);return'quote'}
if(ch==='/'&&parserConfig.slashComments&&stream.eat('/')){stream.skipToEnd();return'comment'}
if(/\d/.test(ch)){stream.eatWhile(/[\d]/);if(stream.eat('.')){stream.eatWhile(/[\d]/)}
return'number'}
if(/[+\-*&%=<>!?|]/.test(ch)){return'operator'}
stream.eatWhile(/\w/);var cur=stream.current();return words.hasOwnProperty(cur)?words[cur]:'variable'}
function tokenString(stream,state){var next,end=!1,escaped=!1;while((next=stream.next())!=null){if(next==='"'&&!escaped){end=!0;break}
escaped=!escaped&&next==='\\'}
if(end&&!escaped){state.tokenize=tokenBase}
return'string'};function tokenComment(stream,state){var prev,next;while(state.commentLevel>0&&(next=stream.next())!=null){if(prev==='('&&next==='*')state.commentLevel++;if(prev==='*'&&next===')')state.commentLevel--;prev=next}
if(state.commentLevel<=0){state.tokenize=tokenBase}
return'comment'}
return{startState:function(){return{tokenize:tokenBase,commentLevel:0}},token:function(stream,state){if(stream.eatSpace())return null;return state.tokenize(stream,state)},blockCommentStart:"(*",blockCommentEnd:"*)",lineComment:parserConfig.slashComments?"//":null}});CodeMirror.defineMIME('text/x-ocaml',{name:'mllike',extraWords:{'succ':'keyword','trace':'builtin','exit':'builtin','print_string':'builtin','print_endline':'builtin','true':'atom','false':'atom','raise':'keyword'}});CodeMirror.defineMIME('text/x-fsharp',{name:'mllike',extraWords:{'abstract':'keyword','as':'keyword','assert':'keyword','base':'keyword','class':'keyword','default':'keyword','delegate':'keyword','downcast':'keyword','downto':'keyword','elif':'keyword','exception':'keyword','extern':'keyword','finally':'keyword','global':'keyword','inherit':'keyword','inline':'keyword','interface':'keyword','internal':'keyword','lazy':'keyword','let!':'keyword','member':'keyword','module':'keyword','namespace':'keyword','new':'keyword','null':'keyword','override':'keyword','private':'keyword','public':'keyword','return':'keyword','return!':'keyword','select':'keyword','static':'keyword','struct':'keyword','upcast':'keyword','use':'keyword','use!':'keyword','val':'keyword','when':'keyword','yield':'keyword','yield!':'keyword','List':'builtin','Seq':'builtin','Map':'builtin','Set':'builtin','int':'builtin','string':'builtin','raise':'builtin','failwith':'builtin','not':'builtin','true':'builtin','false':'builtin'},slashComments:!0})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("modelica",function(config,parserConfig){var indentUnit=config.indentUnit;var keywords=parserConfig.keywords||{};var builtin=parserConfig.builtin||{};var atoms=parserConfig.atoms||{};var isSingleOperatorChar=/[;=\(:\),{}.*<>+\-\/^\[\]]/;var isDoubleOperatorChar=/(:=|<=|>=|==|<>|\.\+|\.\-|\.\*|\.\/|\.\^)/;var isDigit=/[0-9]/;var isNonDigit=/[_a-zA-Z]/;function tokenLineComment(stream,state){stream.skipToEnd();state.tokenize=null;return"comment"}
function tokenBlockComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(maybeEnd&&ch=="/"){state.tokenize=null;break}
maybeEnd=(ch=="*")}
return"comment"}
function tokenString(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch=='"'&&!escaped){state.tokenize=null;state.sol=!1;break}
escaped=!escaped&&ch=="\\"}
return"string"}
function tokenIdent(stream,state){stream.eatWhile(isDigit);while(stream.eat(isDigit)||stream.eat(isNonDigit)){}
var cur=stream.current();if(state.sol&&(cur=="package"||cur=="model"||cur=="when"||cur=="connector"))state.level++;else if(state.sol&&cur=="end"&&state.level>0)state.level--;state.tokenize=null;state.sol=!1;if(keywords.propertyIsEnumerable(cur))return"keyword";else if(builtin.propertyIsEnumerable(cur))return"builtin";else if(atoms.propertyIsEnumerable(cur))return"atom";else return"variable"}
function tokenQIdent(stream,state){while(stream.eat(/[^']/)){}
state.tokenize=null;state.sol=!1;if(stream.eat("'"))
return"variable";else return"error"}
function tokenUnsignedNuber(stream,state){stream.eatWhile(isDigit);if(stream.eat('.')){stream.eatWhile(isDigit)}
if(stream.eat('e')||stream.eat('E')){if(!stream.eat('-'))
stream.eat('+');stream.eatWhile(isDigit)}
state.tokenize=null;state.sol=!1;return"number"}
return{startState:function(){return{tokenize:null,level:0,sol:!0}},token:function(stream,state){if(state.tokenize!=null){return state.tokenize(stream,state)}
if(stream.sol()){state.sol=!0}
if(stream.eatSpace()){state.tokenize=null;return null}
var ch=stream.next();if(ch=='/'&&stream.eat('/')){state.tokenize=tokenLineComment}else if(ch=='/'&&stream.eat('*')){state.tokenize=tokenBlockComment}else if(isDoubleOperatorChar.test(ch+stream.peek())){stream.next();state.tokenize=null;return"operator"}else if(isSingleOperatorChar.test(ch)){state.tokenize=null;return"operator"}else if(isNonDigit.test(ch)){state.tokenize=tokenIdent}else if(ch=="'"&&stream.peek()&&stream.peek()!="'"){state.tokenize=tokenQIdent}else if(ch=='"'){state.tokenize=tokenString}else if(isDigit.test(ch)){state.tokenize=tokenUnsignedNuber}else{state.tokenize=null;return"error"}
return state.tokenize(stream,state)},indent:function(state,textAfter){if(state.tokenize!=null)return CodeMirror.Pass;var level=state.level;if(/(algorithm)/.test(textAfter))level--;if(/(equation)/.test(textAfter))level--;if(/(initial algorithm)/.test(textAfter))level--;if(/(initial equation)/.test(textAfter))level--;if(/(end)/.test(textAfter))level--;if(level>0)
return indentUnit*level;else return 0},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)
obj[words[i]]=!0;return obj}
var modelicaKeywords="algorithm and annotation assert block break class connect connector constant constrainedby der discrete each else elseif elsewhen encapsulated end enumeration equation expandable extends external false final flow for function if import impure in initial inner input loop model not operator or outer output package parameter partial protected public pure record redeclare replaceable return stream then true type when while within";var modelicaBuiltin="abs acos actualStream asin atan atan2 cardinality ceil cos cosh delay div edge exp floor getInstanceName homotopy inStream integer log log10 mod pre reinit rem semiLinear sign sin sinh spatialDistribution sqrt tan tanh";var modelicaAtoms="Real Boolean Integer String";function def(mimes,mode){if(typeof mimes=="string")
mimes=[mimes];var words=[];function add(obj){if(obj)
for(var prop in obj)
if(obj.hasOwnProperty(prop))
words.push(prop);}
add(mode.keywords);add(mode.builtin);add(mode.atoms);if(words.length){mode.helperType=mimes[0];CodeMirror.registerHelper("hintWords",mimes[0],words)}
for(var i=0;i<mimes.length;++i)
CodeMirror.defineMIME(mimes[i],mode);}
def(["text/x-modelica"],{name:"modelica",keywords:words(modelicaKeywords),builtin:words(modelicaBuiltin),atoms:words(modelicaAtoms)})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var languages={mscgen:{"keywords":["msc"],"options":["hscale","width","arcgradient","wordwraparcs"],"attributes":["label","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"],"brackets":["\\{","\\}"],"arcsWords":["note","abox","rbox","box"],"arcsOthers":["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],"singlecomment":["//","#"],"operators":["="]},xu:{"keywords":["msc"],"options":["hscale","width","arcgradient","wordwraparcs","watermark"],"attributes":["label","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"],"brackets":["\\{","\\}"],"arcsWords":["note","abox","rbox","box","alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"],"arcsOthers":["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],"singlecomment":["//","#"],"operators":["="]},msgenny:{"keywords":null,"options":["hscale","width","arcgradient","wordwraparcs","watermark"],"attributes":null,"brackets":["\\{","\\}"],"arcsWords":["note","abox","rbox","box","alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"],"arcsOthers":["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],"singlecomment":["//","#"],"operators":["="]}}
CodeMirror.defineMode("mscgen",function(_,modeConfig){var language=languages[modeConfig&&modeConfig.language||"mscgen"]
return{startState:startStateFn,copyState:copyStateFn,token:produceTokenFunction(language),lineComment:"#",blockCommentStart:"/*",blockCommentEnd:"*/"}});CodeMirror.defineMIME("text/x-mscgen","mscgen");CodeMirror.defineMIME("text/x-xu",{name:"mscgen",language:"xu"});CodeMirror.defineMIME("text/x-msgenny",{name:"mscgen",language:"msgenny"});function wordRegexpBoundary(pWords){return new RegExp("\\b("+pWords.join("|")+")\\b","i")}
function wordRegexp(pWords){return new RegExp("("+pWords.join("|")+")","i")}
function startStateFn(){return{inComment:!1,inString:!1,inAttributeList:!1,inScript:!1}}
function copyStateFn(pState){return{inComment:pState.inComment,inString:pState.inString,inAttributeList:pState.inAttributeList,inScript:pState.inScript}}
function produceTokenFunction(pConfig){return function(pStream,pState){if(pStream.match(wordRegexp(pConfig.brackets),!0,!0)){return"bracket"}
if(!pState.inComment){if(pStream.match(/\/\*[^\*\/]*/,!0,!0)){pState.inComment=!0;return"comment"}
if(pStream.match(wordRegexp(pConfig.singlecomment),!0,!0)){pStream.skipToEnd();return"comment"}}
if(pState.inComment){if(pStream.match(/[^\*\/]*\*\//,!0,!0))
pState.inComment=!1;else pStream.skipToEnd();return"comment"}
if(!pState.inString&&pStream.match(/\"(\\\"|[^\"])*/,!0,!0)){pState.inString=!0;return"string"}
if(pState.inString){if(pStream.match(/[^\"]*\"/,!0,!0))
pState.inString=!1;else pStream.skipToEnd();return"string"}
if(!!pConfig.keywords&&pStream.match(wordRegexpBoundary(pConfig.keywords),!0,!0))
return"keyword";if(pStream.match(wordRegexpBoundary(pConfig.options),!0,!0))
return"keyword";if(pStream.match(wordRegexpBoundary(pConfig.arcsWords),!0,!0))
return"keyword";if(pStream.match(wordRegexp(pConfig.arcsOthers),!0,!0))
return"keyword";if(!!pConfig.operators&&pStream.match(wordRegexp(pConfig.operators),!0,!0))
return"operator";if(!pConfig.inAttributeList&&!!pConfig.attributes&&pStream.match(/\[/,!0,!0)){pConfig.inAttributeList=!0;return"bracket"}
if(pConfig.inAttributeList){if(pConfig.attributes!==null&&pStream.match(wordRegexpBoundary(pConfig.attributes),!0,!0)){return"attribute"}
if(pStream.match(/]/,!0,!0)){pConfig.inAttributeList=!1;return"bracket"}}
pStream.next();return"base"}}})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"mscgen");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("empty chart","[keyword msc][bracket {]","[base   ]","[bracket }]");MT("comments","[comment // a single line comment]","[comment # another  single line comment /* and */ ignored here]","[comment /* A multi-line comment even though it contains]","[comment msc keywords and \"quoted text\"*/]");MT("strings","[string \"// a string\"]","[string \"a string running over]","[string two lines\"]","[string \"with \\\"escaped quote\"]");MT("xù/ msgenny keywords classify as 'base'","[base watermark]","[base alt loop opt ref else break par seq assert]");MT("mscgen options classify as keyword","[keyword hscale]","[keyword width]","[keyword arcgradient]","[keyword wordwraparcs]");MT("mscgen arcs classify as keyword","[keyword note]","[keyword abox]","[keyword rbox]","[keyword box]","[keyword |||...---]","[keyword ..--==::]","[keyword ->]","[keyword <-]","[keyword <->]","[keyword =>]","[keyword <=]","[keyword <=>]","[keyword =>>]","[keyword <<=]","[keyword <<=>>]","[keyword >>]","[keyword <<]","[keyword <<>>]","[keyword -x]","[keyword x-]","[keyword -X]","[keyword X-]","[keyword :>]","[keyword <:]","[keyword <:>]");MT("within an attribute list, attributes classify as attribute","[bracket [[][attribute label]","[attribute id]","[attribute url]","[attribute idurl]","[attribute linecolor]","[attribute linecolour]","[attribute textcolor]","[attribute textcolour]","[attribute textbgcolor]","[attribute textbgcolour]","[attribute arclinecolor]","[attribute arclinecolour]","[attribute arctextcolor]","[attribute arctextcolour]","[attribute arctextbgcolor]","[attribute arctextbgcolour]","[attribute arcskip][bracket ]]]");MT("outside an attribute list, attributes classify as base","[base label]","[base id]","[base url]","[base idurl]","[base linecolor]","[base linecolour]","[base textcolor]","[base textcolour]","[base textbgcolor]","[base textbgcolour]","[base arclinecolor]","[base arclinecolour]","[base arctextcolor]","[base arctextcolour]","[base arctextbgcolor]","[base arctextbgcolour]","[base arcskip]");MT("a typical program","[comment # typical mscgen program]","[keyword msc][base  ][bracket {]","[keyword wordwraparcs][operator =][string \"true\"][base , ][keyword hscale][operator =][string \"0.8\"][keyword arcgradient][operator =][base 30;]","[base   a][bracket [[][attribute label][operator =][string \"Entity A\"][bracket ]]][base ,]","[base   b][bracket [[][attribute label][operator =][string \"Entity B\"][bracket ]]][base ,]","[base   c][bracket [[][attribute label][operator =][string \"Entity C\"][bracket ]]][base ;]","[base   a ][keyword =>>][base  b][bracket [[][attribute label][operator =][string \"Hello entity B\"][bracket ]]][base ;]","[base   a ][keyword <<][base  b][bracket [[][attribute label][operator =][string \"Here's an answer dude!\"][bracket ]]][base ;]","[base   c ][keyword :>][base  *][bracket [[][attribute label][operator =][string \"What about me?\"][base , ][attribute textcolor][operator =][base red][bracket ]]][base ;]","[bracket }]")})()}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"text/x-msgenny");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1),"msgenny")}
MT("comments","[comment // a single line comment]","[comment # another  single line comment /* and */ ignored here]","[comment /* A multi-line comment even though it contains]","[comment msc keywords and \"quoted text\"*/]");MT("strings","[string \"// a string\"]","[string \"a string running over]","[string two lines\"]","[string \"with \\\"escaped quote\"]");MT("xù/ msgenny keywords classify as 'keyword'","[keyword watermark]","[keyword alt]","[keyword loop]","[keyword opt]","[keyword ref]","[keyword else]","[keyword break]","[keyword par]","[keyword seq]","[keyword assert]");MT("mscgen options classify as keyword","[keyword hscale]","[keyword width]","[keyword arcgradient]","[keyword wordwraparcs]");MT("mscgen arcs classify as keyword","[keyword note]","[keyword abox]","[keyword rbox]","[keyword box]","[keyword |||...---]","[keyword ..--==::]","[keyword ->]","[keyword <-]","[keyword <->]","[keyword =>]","[keyword <=]","[keyword <=>]","[keyword =>>]","[keyword <<=]","[keyword <<=>>]","[keyword >>]","[keyword <<]","[keyword <<>>]","[keyword -x]","[keyword x-]","[keyword -X]","[keyword X-]","[keyword :>]","[keyword <:]","[keyword <:>]");MT("within an attribute list, mscgen/ xù attributes classify as base","[base [[label]","[base idurl id url]","[base linecolor linecolour textcolor textcolour textbgcolor textbgcolour]","[base arclinecolor arclinecolour arctextcolor arctextcolour arctextbgcolor arctextbgcolour]","[base arcskip]]]");MT("outside an attribute list, mscgen/ xù attributes classify as base","[base label]","[base idurl id url]","[base linecolor linecolour textcolor textcolour textbgcolor textbgcolour]","[base arclinecolor arclinecolour arctextcolor arctextcolour arctextbgcolor arctextbgcolour]","[base arcskip]");MT("a typical program","[comment # typical msgenny program]","[keyword wordwraparcs][operator =][string \"true\"][base , ][keyword hscale][operator =][string \"0.8\"][base , ][keyword arcgradient][operator =][base 30;]","[base   a : ][string \"Entity A\"][base ,]","[base   b : Entity B,]","[base   c : Entity C;]","[base   a ][keyword =>>][base  b: ][string \"Hello entity B\"][base ;]","[base   a ][keyword alt][base  c][bracket {]","[base     a ][keyword <<][base  b: ][string \"Here's an answer dude!\"][base ;]","[keyword ---][base : ][string \"sorry, won't march - comm glitch\"]","[base     a ][keyword x-][base  b: ][string \"Here's an answer dude! (won't arrive...)\"][base ;]","[bracket }]","[base   c ][keyword :>][base  *: What about me?;]")})()}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"text/x-xu");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1),"xu")}
MT("empty chart","[keyword msc][bracket {]","[base   ]","[bracket }]");MT("comments","[comment // a single line comment]","[comment # another  single line comment /* and */ ignored here]","[comment /* A multi-line comment even though it contains]","[comment msc keywords and \"quoted text\"*/]");MT("strings","[string \"// a string\"]","[string \"a string running over]","[string two lines\"]","[string \"with \\\"escaped quote\"]");MT("xù/ msgenny keywords classify as 'keyword'","[keyword watermark]","[keyword alt]","[keyword loop]","[keyword opt]","[keyword ref]","[keyword else]","[keyword break]","[keyword par]","[keyword seq]","[keyword assert]");MT("mscgen options classify as keyword","[keyword hscale]","[keyword width]","[keyword arcgradient]","[keyword wordwraparcs]");MT("mscgen arcs classify as keyword","[keyword note]","[keyword abox]","[keyword rbox]","[keyword box]","[keyword |||...---]","[keyword ..--==::]","[keyword ->]","[keyword <-]","[keyword <->]","[keyword =>]","[keyword <=]","[keyword <=>]","[keyword =>>]","[keyword <<=]","[keyword <<=>>]","[keyword >>]","[keyword <<]","[keyword <<>>]","[keyword -x]","[keyword x-]","[keyword -X]","[keyword X-]","[keyword :>]","[keyword <:]","[keyword <:>]");MT("within an attribute list, attributes classify as attribute","[bracket [[][attribute label]","[attribute id]","[attribute url]","[attribute idurl]","[attribute linecolor]","[attribute linecolour]","[attribute textcolor]","[attribute textcolour]","[attribute textbgcolor]","[attribute textbgcolour]","[attribute arclinecolor]","[attribute arclinecolour]","[attribute arctextcolor]","[attribute arctextcolour]","[attribute arctextbgcolor]","[attribute arctextbgcolour]","[attribute arcskip][bracket ]]]");MT("outside an attribute list, attributes classify as base","[base label]","[base id]","[base url]","[base idurl]","[base linecolor]","[base linecolour]","[base textcolor]","[base textcolour]","[base textbgcolor]","[base textbgcolour]","[base arclinecolor]","[base arclinecolour]","[base arctextcolor]","[base arctextcolour]","[base arctextbgcolor]","[base arctextbgcolour]","[base arcskip]");MT("a typical program","[comment # typical mscgen program]","[keyword msc][base  ][bracket {]","[keyword wordwraparcs][operator =][string \"true\"][keyword hscale][operator =][string \"0.8\"][keyword arcgradient][operator =][base 30;]","[base   a][bracket [[][attribute label][operator =][string \"Entity A\"][bracket ]]][base ,]","[base   b][bracket [[][attribute label][operator =][string \"Entity B\"][bracket ]]][base ,]","[base   c][bracket [[][attribute label][operator =][string \"Entity C\"][bracket ]]][base ;]","[base   a ][keyword =>>][base  b][bracket [[][attribute label][operator =][string \"Hello entity B\"][bracket ]]][base ;]","[base   a ][keyword <<][base  b][bracket [[][attribute label][operator =][string \"Here's an answer dude!\"][bracket ]]][base ;]","[base   c ][keyword :>][base  *][bracket [[][attribute label][operator =][string \"What about me?\"][base , ][attribute textcolor][operator =][base red][bracket ]]][base ;]","[bracket }]")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("mumps",function(){function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b","i")}
var singleOperators=new RegExp("^[\\+\\-\\*/&#!_?\\\\<>=\\'\\[\\]]");var doubleOperators=new RegExp("^(('=)|(<=)|(>=)|('>)|('<)|([[)|(]])|(^$))");var singleDelimiters=new RegExp("^[\\.,:]");var brackets=new RegExp("[()]");var identifiers=new RegExp("^[%A-Za-z][A-Za-z0-9]*");var commandKeywords=["break","close","do","else","for","goto","halt","hang","if","job","kill","lock","merge","new","open","quit","read","set","tcommit","trollback","tstart","use","view","write","xecute","b","c","d","e","f","g","h","i","j","k","l","m","n","o","q","r","s","tc","tro","ts","u","v","w","x"];var intrinsicFuncsWords=["\\$ascii","\\$char","\\$data","\\$ecode","\\$estack","\\$etrap","\\$extract","\\$find","\\$fnumber","\\$get","\\$horolog","\\$io","\\$increment","\\$job","\\$justify","\\$length","\\$name","\\$next","\\$order","\\$piece","\\$qlength","\\$qsubscript","\\$query","\\$quit","\\$random","\\$reverse","\\$select","\\$stack","\\$test","\\$text","\\$translate","\\$view","\\$x","\\$y","\\$a","\\$c","\\$d","\\$e","\\$ec","\\$es","\\$et","\\$f","\\$fn","\\$g","\\$h","\\$i","\\$j","\\$l","\\$n","\\$na","\\$o","\\$p","\\$q","\\$ql","\\$qs","\\$r","\\$re","\\$s","\\$st","\\$t","\\$tr","\\$v","\\$z"];var intrinsicFuncs=wordRegexp(intrinsicFuncsWords);var command=wordRegexp(commandKeywords);function tokenBase(stream,state){if(stream.sol()){state.label=!0;state.commandMode=0}
var ch=stream.peek();if(ch==" "||ch=="\t"){state.label=!1;if(state.commandMode==0)
state.commandMode=1;else if((state.commandMode<0)||(state.commandMode==2))
state.commandMode=0}else if((ch!=".")&&(state.commandMode>0)){if(ch==":")
state.commandMode=-1;else state.commandMode=2}
if((ch==="(")||(ch==="\u0009"))
state.label=!1;if(ch===";"){stream.skipToEnd();return"comment"}
if(stream.match(/^[-+]?\d+(\.\d+)?([eE][-+]?\d+)?/))
return"number";if(ch=='"'){if(stream.skipTo('"')){stream.next();return"string"}else{stream.skipToEnd();return"error"}}
if(stream.match(doubleOperators)||stream.match(singleOperators))
return"operator";if(stream.match(singleDelimiters))
return null;if(brackets.test(ch)){stream.next();return"bracket"}
if(state.commandMode>0&&stream.match(command))
return"variable-2";if(stream.match(intrinsicFuncs))
return"builtin";if(stream.match(identifiers))
return"variable";if(ch==="$"||ch==="^"){stream.next();return"builtin"}
if(ch==="@"){stream.next();return"string-2"}
if(/[\w%]/.test(ch)){stream.eatWhile(/[\w%]/);return"variable"}
stream.next();return"error"}
return{startState:function(){return{label:!1,commandMode:0}},token:function(stream,state){var style=tokenBase(stream,state);if(state.label)return"tag";return style}}});CodeMirror.defineMIME("text/x-mumps","mumps")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("nginx",function(config){function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var keywords=words("break return rewrite set"+" accept_mutex accept_mutex_delay access_log add_after_body add_before_body add_header addition_types aio alias allow ancient_browser ancient_browser_value auth_basic auth_basic_user_file auth_http auth_http_header auth_http_timeout autoindex autoindex_exact_size autoindex_localtime charset charset_types client_body_buffer_size client_body_in_file_only client_body_in_single_buffer client_body_temp_path client_body_timeout client_header_buffer_size client_header_timeout client_max_body_size connection_pool_size create_full_put_path daemon dav_access dav_methods debug_connection debug_points default_type degradation degrade deny devpoll_changes devpoll_events directio directio_alignment empty_gif env epoll_events error_log eventport_events expires fastcgi_bind fastcgi_buffer_size fastcgi_buffers fastcgi_busy_buffers_size fastcgi_cache fastcgi_cache_key fastcgi_cache_methods fastcgi_cache_min_uses fastcgi_cache_path fastcgi_cache_use_stale fastcgi_cache_valid fastcgi_catch_stderr fastcgi_connect_timeout fastcgi_hide_header fastcgi_ignore_client_abort fastcgi_ignore_headers fastcgi_index fastcgi_intercept_errors fastcgi_max_temp_file_size fastcgi_next_upstream fastcgi_param fastcgi_pass_header fastcgi_pass_request_body fastcgi_pass_request_headers fastcgi_read_timeout fastcgi_send_lowat fastcgi_send_timeout fastcgi_split_path_info fastcgi_store fastcgi_store_access fastcgi_temp_file_write_size fastcgi_temp_path fastcgi_upstream_fail_timeout fastcgi_upstream_max_fails flv geoip_city geoip_country google_perftools_profiles gzip gzip_buffers gzip_comp_level gzip_disable gzip_hash gzip_http_version gzip_min_length gzip_no_buffer gzip_proxied gzip_static gzip_types gzip_vary gzip_window if_modified_since ignore_invalid_headers image_filter image_filter_buffer image_filter_jpeg_quality image_filter_transparency imap_auth imap_capabilities imap_client_buffer index ip_hash keepalive_requests keepalive_timeout kqueue_changes kqueue_events large_client_header_buffers limit_conn limit_conn_log_level limit_rate limit_rate_after limit_req limit_req_log_level limit_req_zone limit_zone lingering_time lingering_timeout lock_file log_format log_not_found log_subrequest map_hash_bucket_size map_hash_max_size master_process memcached_bind memcached_buffer_size memcached_connect_timeout memcached_next_upstream memcached_read_timeout memcached_send_timeout memcached_upstream_fail_timeout memcached_upstream_max_fails merge_slashes min_delete_depth modern_browser modern_browser_value msie_padding msie_refresh multi_accept open_file_cache open_file_cache_errors open_file_cache_events open_file_cache_min_uses open_file_cache_valid open_log_file_cache output_buffers override_charset perl perl_modules perl_require perl_set pid pop3_auth pop3_capabilities port_in_redirect postpone_gzipping postpone_output protocol proxy proxy_bind proxy_buffer proxy_buffer_size proxy_buffering proxy_buffers proxy_busy_buffers_size proxy_cache proxy_cache_key proxy_cache_methods proxy_cache_min_uses proxy_cache_path proxy_cache_use_stale proxy_cache_valid proxy_connect_timeout proxy_headers_hash_bucket_size proxy_headers_hash_max_size proxy_hide_header proxy_ignore_client_abort proxy_ignore_headers proxy_intercept_errors proxy_max_temp_file_size proxy_method proxy_next_upstream proxy_pass_error_message proxy_pass_header proxy_pass_request_body proxy_pass_request_headers proxy_read_timeout proxy_redirect proxy_send_lowat proxy_send_timeout proxy_set_body proxy_set_header proxy_ssl_session_reuse proxy_store proxy_store_access proxy_temp_file_write_size proxy_temp_path proxy_timeout proxy_upstream_fail_timeout proxy_upstream_max_fails random_index read_ahead real_ip_header recursive_error_pages request_pool_size reset_timedout_connection resolver resolver_timeout rewrite_log rtsig_overflow_events rtsig_overflow_test rtsig_overflow_threshold rtsig_signo satisfy secure_link_secret send_lowat send_timeout sendfile sendfile_max_chunk server_name_in_redirect server_names_hash_bucket_size server_names_hash_max_size server_tokens set_real_ip_from smtp_auth smtp_capabilities smtp_client_buffer smtp_greeting_delay so_keepalive source_charset ssi ssi_ignore_recycled_buffers ssi_min_file_chunk ssi_silent_errors ssi_types ssi_value_length ssl ssl_certificate ssl_certificate_key ssl_ciphers ssl_client_certificate ssl_crl ssl_dhparam ssl_engine ssl_prefer_server_ciphers ssl_protocols ssl_session_cache ssl_session_timeout ssl_verify_client ssl_verify_depth starttls stub_status sub_filter sub_filter_once sub_filter_types tcp_nodelay tcp_nopush thread_stack_size timeout timer_resolution types_hash_bucket_size types_hash_max_size underscores_in_headers uninitialized_variable_warn use user userid userid_domain userid_expires userid_mark userid_name userid_p3p userid_path userid_service valid_referers variables_hash_bucket_size variables_hash_max_size worker_connections worker_cpu_affinity worker_priority worker_processes worker_rlimit_core worker_rlimit_nofile worker_rlimit_sigpending worker_threads working_directory xclient xml_entities xslt_stylesheet xslt_typesdrew@li229-23");var keywords_block=words("http mail events server types location upstream charset_map limit_except if geo map");var keywords_important=words("include root server server_name listen internal proxy_pass memcached_pass fastcgi_pass try_files");var indentUnit=config.indentUnit,type;function ret(style,tp){type=tp;return style}
function tokenBase(stream,state){stream.eatWhile(/[\w\$_]/);var cur=stream.current();if(keywords.propertyIsEnumerable(cur)){return"keyword"}else if(keywords_block.propertyIsEnumerable(cur)){return"variable-2"}else if(keywords_important.propertyIsEnumerable(cur)){return"string-2"}
var ch=stream.next();if(ch=="@"){stream.eatWhile(/[\w\\\-]/);return ret("meta",stream.current())}else if(ch=="/"&&stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state)}else if(ch=="<"&&stream.eat("!")){state.tokenize=tokenSGMLComment;return tokenSGMLComment(stream,state)}else if(ch=="=")ret(null,"compare");else if((ch=="~"||ch=="|")&&stream.eat("="))return ret(null,"compare");else if(ch=="\""||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}else if(ch=="#"){stream.skipToEnd();return ret("comment","comment")}else if(ch=="!"){stream.match(/^\s*\w*/);return ret("keyword","important")}else if(/\d/.test(ch)){stream.eatWhile(/[\w.%]/);return ret("number","unit")}else if(/[,.+>*\/]/.test(ch)){return ret(null,"select-op")}else if(/[;{}:\[\]]/.test(ch)){return ret(null,ch)}else{stream.eatWhile(/[\w\\\-]/);return ret("variable","variable")}}
function tokenCComment(stream,state){var maybeEnd=!1,ch;while((ch=stream.next())!=null){if(maybeEnd&&ch=="/"){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return ret("comment","comment")}
function tokenSGMLComment(stream,state){var dashes=0,ch;while((ch=stream.next())!=null){if(dashes>=2&&ch==">"){state.tokenize=tokenBase;break}
dashes=(ch=="-")?dashes+1:0}
return ret("comment","comment")}
function tokenString(quote){return function(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped)
break;escaped=!escaped&&ch=="\\"}
if(!escaped)state.tokenize=tokenBase;return ret("string","string")}}
return{startState:function(base){return{tokenize:tokenBase,baseIndent:base||0,stack:[]}},token:function(stream,state){if(stream.eatSpace())return null;type=null;var style=state.tokenize(stream,state);var context=state.stack[state.stack.length-1];if(type=="hash"&&context=="rule")style="atom";else if(style=="variable"){if(context=="rule")style="number";else if(!context||context=="@media{")style="tag"}
if(context=="rule"&&/^[\{\};]$/.test(type))
state.stack.pop();if(type=="{"){if(context=="@media")state.stack[state.stack.length-1]="@media{";else state.stack.push("{")}else if(type=="}")state.stack.pop();else if(type=="@media")state.stack.push("@media");else if(context=="{"&&type!="comment")state.stack.push("rule");return style},indent:function(state,textAfter){var n=state.stack.length;if(/^\}/.test(textAfter))
n-=state.stack[state.stack.length-1]=="rule"?2:1;return state.baseIndent+n*indentUnit},electricChars:"}"}});CodeMirror.defineMIME("text/x-nginx-conf","nginx")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../../addon/mode/simple"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../../addon/mode/simple"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineSimpleMode("nsis",{start:[{regex:/(?:[+-]?)(?:0x[\d,a-f]+)|(?:0o[0-7]+)|(?:0b[0,1]+)|(?:\d+.?\d*)/,token:"number"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"},{regex:/'(?:[^\\']|\\.)*'?/,token:"string"},{regex:/`(?:[^\\`]|\\.)*`?/,token:"string"},{regex:/(?:\!(include|addincludedir|addplugindir|appendfile|cd|delfile|echo|error|execute|packhdr|finalize|getdllversion|system|tempfile|warning|verbose|define|undef|insertmacro|makensis|searchparse|searchreplace))\b/,token:"keyword"},{regex:/(?:\!(if(?:n?def)?|ifmacron?def|macro))\b/,token:"keyword",indent:!0},{regex:/(?:\!(else|endif|macroend))\b/,token:"keyword",dedent:!0},{regex:/\b(?:Abort|AddBrandingImage|AddSize|AllowRootDirInstall|AllowSkipFiles|AutoCloseWindow|BGFont|BGGradient|BrandingText|BringToFront|Call|CallInstDLL|Caption|ChangeUI|CheckBitmap|ClearErrors|CompletedText|ComponentText|CopyFiles|CRCCheck|CreateDirectory|CreateFont|CreateShortCut|Delete|DeleteINISec|DeleteINIStr|DeleteRegKey|DeleteRegValue|DetailPrint|DetailsButtonText|DirText|DirVar|DirVerify|EnableWindow|EnumRegKey|EnumRegValue|Exch|Exec|ExecShell|ExecWait|ExpandEnvStrings|File|FileBufSize|FileClose|FileErrorText|FileOpen|FileRead|FileReadByte|FileReadUTF16LE|FileReadWord|FileWriteUTF16LE|FileSeek|FileWrite|FileWriteByte|FileWriteWord|FindClose|FindFirst|FindNext|FindWindow|FlushINI|GetCurInstType|GetCurrentAddress|GetDlgItem|GetDLLVersion|GetDLLVersionLocal|GetErrorLevel|GetFileTime|GetFileTimeLocal|GetFullPathName|GetFunctionAddress|GetInstDirError|GetLabelAddress|GetTempFileName|Goto|HideWindow|Icon|IfAbort|IfErrors|IfFileExists|IfRebootFlag|IfSilent|InitPluginsDir|InstallButtonText|InstallColors|InstallDir|InstallDirRegKey|InstProgressFlags|InstType|InstTypeGetText|InstTypeSetText|IntCmp|IntCmpU|IntFmt|IntOp|IsWindow|LangString|LicenseBkColor|LicenseData|LicenseForceSelection|LicenseLangString|LicenseText|LoadLanguageFile|LockWindow|LogSet|LogText|ManifestDPIAware|ManifestSupportedOS|MessageBox|MiscButtonText|Name|Nop|OutFile|Page|PageCallbacks|Pop|Push|Quit|ReadEnvStr|ReadINIStr|ReadRegDWORD|ReadRegStr|Reboot|RegDLL|Rename|RequestExecutionLevel|ReserveFile|Return|RMDir|SearchPath|SectionGetFlags|SectionGetInstTypes|SectionGetSize|SectionGetText|SectionIn|SectionSetFlags|SectionSetInstTypes|SectionSetSize|SectionSetText|SendMessage|SetAutoClose|SetBrandingImage|SetCompress|SetCompressor|SetCompressorDictSize|SetCtlColors|SetCurInstType|SetDatablockOptimize|SetDateSave|SetDetailsPrint|SetDetailsView|SetErrorLevel|SetErrors|SetFileAttributes|SetFont|SetOutPath|SetOverwrite|SetPluginUnload|SetRebootFlag|SetRegView|SetShellVarContext|SetSilent|ShowInstDetails|ShowUninstDetails|ShowWindow|SilentInstall|SilentUnInstall|Sleep|SpaceTexts|StrCmp|StrCmpS|StrCpy|StrLen|SubCaption|Unicode|UninstallButtonText|UninstallCaption|UninstallIcon|UninstallSubCaption|UninstallText|UninstPage|UnRegDLL|Var|VIAddVersionKey|VIFileVersion|VIProductVersion|WindowIcon|WriteINIStr|WriteRegBin|WriteRegDWORD|WriteRegExpandStr|WriteRegStr|WriteUninstaller|XPStyle)\b/,token:"keyword"},{regex:/\b(?:Function|PageEx|Section(?:Group)?)\b/,token:"keyword",indent:!0},{regex:/\b(?:(Function|PageEx|Section(?:Group)?)End)\b/,token:"keyword",dedent:!0},{regex:/\b(?:ARCHIVE|FILE_ATTRIBUTE_ARCHIVE|FILE_ATTRIBUTE_HIDDEN|FILE_ATTRIBUTE_NORMAL|FILE_ATTRIBUTE_OFFLINE|FILE_ATTRIBUTE_READONLY|FILE_ATTRIBUTE_SYSTEM|FILE_ATTRIBUTE_TEMPORARY|HIDDEN|HKCC|HKCR|HKCU|HKDD|HKEY_CLASSES_ROOT|HKEY_CURRENT_CONFIG|HKEY_CURRENT_USER|HKEY_DYN_DATA|HKEY_LOCAL_MACHINE|HKEY_PERFORMANCE_DATA|HKEY_USERS|HKLM|HKPD|HKU|IDABORT|IDCANCEL|IDD_DIR|IDD_INST|IDD_INSTFILES|IDD_LICENSE|IDD_SELCOM|IDD_UNINST|IDD_VERIFY|IDIGNORE|IDNO|IDOK|IDRETRY|IDYES|MB_ABORTRETRYIGNORE|MB_DEFBUTTON1|MB_DEFBUTTON2|MB_DEFBUTTON3|MB_DEFBUTTON4|MB_ICONEXCLAMATION|MB_ICONINFORMATION|MB_ICONQUESTION|MB_ICONSTOP|MB_OK|MB_OKCANCEL|MB_RETRYCANCEL|MB_RIGHT|MB_RTLREADING|MB_SETFOREGROUND|MB_TOPMOST|MB_USERICON|MB_YESNO|MB_YESNOCANCEL|NORMAL|OFFLINE|READONLY|SHCTX|SHELL_CONTEXT|SW_HIDE|SW_SHOWDEFAULT|SW_SHOWMAXIMIZED|SW_SHOWMINIMIZED|SW_SHOWNORMAL|SYSTEM|TEMPORARY)\b/,token:"atom"},{regex:/\b(?:admin|all|auto|both|bottom|bzip2|components|current|custom|directory|force|hide|highest|ifdiff|ifnewer|instfiles|lastused|leave|left|license|listonly|lzma|nevershow|none|normal|notset|right|show|silent|silentlog|textonly|top|try|un\.components|un\.custom|un\.directory|un\.instfiles|un\.license|uninstConfirm|user|Win10|Win7|Win8|WinVista|zlib)\b/,token:"builtin"},{regex:/\$\{(?:And(?:If(?:Not)?|Unless)|Break|Case(?:Else)?|Continue|Default|Do(?:Until|While)?|Else(?:If(?:Not)?|Unless)?|End(?:If|Select|Switch)|Exit(?:Do|For|While)|For(?:Each)?|If(?:Cmd|Not(?:Then)?|Then)?|Loop(?:Until|While)?|Or(?:If(?:Not)?|Unless)|Select|Switch|Unless|While)\}/,token:"variable-2",indent:!0},{regex:/\$\{(?:BannerTrimPath|DirState|DriveSpace|Get(BaseName|Drives|ExeName|ExePath|FileAttributes|FileExt|FileName|FileVersion|Options|OptionsS|Parameters|Parent|Root|Size|Time)|Locate|RefreshShellIcons)\}/,token:"variable-2",dedent:!0},{regex:/\$\{(?:Memento(?:Section(?:Done|End|Restore|Save)?|UnselectedSection))\}/,token:"variable-2",dedent:!0},{regex:/\$\{(?:Config(?:Read|ReadS|Write|WriteS)|File(?:Join|ReadFromEnd|Recode)|Line(?:Find|Read|Sum)|Text(?:Compare|CompareS)|TrimNewLines)\}/,token:"variable-2",dedent:!0},{regex:/\$\{(?:(?:At(?:Least|Most)|Is)(?:ServicePack|Win(?:7|8|10|95|98|200(?:0|3|8(?:R2)?)|ME|NT4|Vista|XP))|Is(?:NT|Server))\}/,token:"variable",dedent:!0},{regex:/\$\{(?:StrFilterS?|Version(?:Compare|Convert)|Word(?:AddS?|Find(?:(?:2|3)X)?S?|InsertS?|ReplaceS?))\}/,token:"variable-2",dedent:!0},{regex:/\$\{(?:RunningX64)\}/,token:"variable",dedent:!0},{regex:/\$\{(?:Disable|Enable)X64FSRedirection\}/,token:"variable-2",dedent:!0},{regex:/(#|;).*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/[-+\/*=<>!]+/,token:"operator"},{regex:/\$[\w]+/,token:"variable"},{regex:/\${[\w]+}/,token:"variable-2"},{regex:/\$\([\w]+\)/,token:"variable-3"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{electricInput:/^\s*((Function|PageEx|Section|Section(Group)?)End|(\!(endif|macroend))|\$\{(End(If|Unless|While)|Loop(Until)|Next)\})$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:["#",";"]}});CodeMirror.defineMIME("text/x-nsis","nsis")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("ntriples",function(){var Location={PRE_SUBJECT:0,WRITING_SUB_URI:1,WRITING_BNODE_URI:2,PRE_PRED:3,WRITING_PRED_URI:4,PRE_OBJ:5,WRITING_OBJ_URI:6,WRITING_OBJ_BNODE:7,WRITING_OBJ_LITERAL:8,WRITING_LIT_LANG:9,WRITING_LIT_TYPE:10,POST_OBJ:11,ERROR:12};function transitState(currState,c){var currLocation=currState.location;var ret;if(currLocation==Location.PRE_SUBJECT&&c=='<')ret=Location.WRITING_SUB_URI;else if(currLocation==Location.PRE_SUBJECT&&c=='_')ret=Location.WRITING_BNODE_URI;else if(currLocation==Location.PRE_PRED&&c=='<')ret=Location.WRITING_PRED_URI;else if(currLocation==Location.PRE_OBJ&&c=='<')ret=Location.WRITING_OBJ_URI;else if(currLocation==Location.PRE_OBJ&&c=='_')ret=Location.WRITING_OBJ_BNODE;else if(currLocation==Location.PRE_OBJ&&c=='"')ret=Location.WRITING_OBJ_LITERAL;else if(currLocation==Location.WRITING_SUB_URI&&c=='>')ret=Location.PRE_PRED;else if(currLocation==Location.WRITING_BNODE_URI&&c==' ')ret=Location.PRE_PRED;else if(currLocation==Location.WRITING_PRED_URI&&c=='>')ret=Location.PRE_OBJ;else if(currLocation==Location.WRITING_OBJ_URI&&c=='>')ret=Location.POST_OBJ;else if(currLocation==Location.WRITING_OBJ_BNODE&&c==' ')ret=Location.POST_OBJ;else if(currLocation==Location.WRITING_OBJ_LITERAL&&c=='"')ret=Location.POST_OBJ;else if(currLocation==Location.WRITING_LIT_LANG&&c==' ')ret=Location.POST_OBJ;else if(currLocation==Location.WRITING_LIT_TYPE&&c=='>')ret=Location.POST_OBJ;else if(currLocation==Location.WRITING_OBJ_LITERAL&&c=='@')ret=Location.WRITING_LIT_LANG;else if(currLocation==Location.WRITING_OBJ_LITERAL&&c=='^')ret=Location.WRITING_LIT_TYPE;else if(c==' '&&(currLocation==Location.PRE_SUBJECT||currLocation==Location.PRE_PRED||currLocation==Location.PRE_OBJ||currLocation==Location.POST_OBJ))ret=currLocation;else if(currLocation==Location.POST_OBJ&&c=='.')ret=Location.PRE_SUBJECT;else ret=Location.ERROR;currState.location=ret}
return{startState:function(){return{location:Location.PRE_SUBJECT,uris:[],anchors:[],bnodes:[],langs:[],types:[]}},token:function(stream,state){var ch=stream.next();if(ch=='<'){transitState(state,ch);var parsedURI='';stream.eatWhile(function(c){if(c!='#'&&c!='>'){parsedURI+=c;return!0}return!1});state.uris.push(parsedURI);if(stream.match('#',!1))return'variable';stream.next();transitState(state,'>');return'variable'}
if(ch=='#'){var parsedAnchor='';stream.eatWhile(function(c){if(c!='>'&&c!=' '){parsedAnchor+=c;return!0}return!1});state.anchors.push(parsedAnchor);return'variable-2'}
if(ch=='>'){transitState(state,'>');return'variable'}
if(ch=='_'){transitState(state,ch);var parsedBNode='';stream.eatWhile(function(c){if(c!=' '){parsedBNode+=c;return!0}return!1});state.bnodes.push(parsedBNode);stream.next();transitState(state,' ');return'builtin'}
if(ch=='"'){transitState(state,ch);stream.eatWhile(function(c){return c!='"'});stream.next();if(stream.peek()!='@'&&stream.peek()!='^'){transitState(state,'"')}
return'string'}
if(ch=='@'){transitState(state,'@');var parsedLang='';stream.eatWhile(function(c){if(c!=' '){parsedLang+=c;return!0}return!1});state.langs.push(parsedLang);stream.next();transitState(state,' ');return'string-2'}
if(ch=='^'){stream.next();transitState(state,'^');var parsedType='';stream.eatWhile(function(c){if(c!='>'){parsedType+=c;return!0}return!1});state.types.push(parsedType);stream.next();transitState(state,'>');return'variable'}
if(ch==' '){transitState(state,ch)}
if(ch=='.'){transitState(state,ch)}}}});CodeMirror.defineMIME("text/n-triples","ntriples")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("octave",function(){function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b")}
var singleOperators=new RegExp("^[\\+\\-\\*/&|\\^~<>!@'\\\\]");var singleDelimiters=new RegExp('^[\\(\\[\\{\\},:=;]');var doubleOperators=new RegExp("^((==)|(~=)|(<=)|(>=)|(<<)|(>>)|(\\.[\\+\\-\\*/\\^\\\\]))");var doubleDelimiters=new RegExp("^((!=)|(\\+=)|(\\-=)|(\\*=)|(/=)|(&=)|(\\|=)|(\\^=))");var tripleDelimiters=new RegExp("^((>>=)|(<<=))");var expressionEnd=new RegExp("^[\\]\\)]");var identifiers=new RegExp("^[_A-Za-z\xa1-\uffff][_A-Za-z0-9\xa1-\uffff]*");var builtins=wordRegexp(['error','eval','function','abs','acos','atan','asin','cos','cosh','exp','log','prod','sum','log10','max','min','sign','sin','sinh','sqrt','tan','reshape','break','zeros','default','margin','round','ones','rand','syn','ceil','floor','size','clear','zeros','eye','mean','std','cov','det','eig','inv','norm','rank','trace','expm','logm','sqrtm','linspace','plot','title','xlabel','ylabel','legend','text','grid','meshgrid','mesh','num2str','fft','ifft','arrayfun','cellfun','input','fliplr','flipud','ismember']);var keywords=wordRegexp(['return','case','switch','else','elseif','end','endif','endfunction','if','otherwise','do','for','while','try','catch','classdef','properties','events','methods','global','persistent','endfor','endwhile','printf','sprintf','disp','until','continue','pkg']);function tokenTranspose(stream,state){if(!stream.sol()&&stream.peek()==='\''){stream.next();state.tokenize=tokenBase;return'operator'}
state.tokenize=tokenBase;return tokenBase(stream,state)}
function tokenComment(stream,state){if(stream.match(/^.*%}/)){state.tokenize=tokenBase;return'comment'};stream.skipToEnd();return'comment'}
function tokenBase(stream,state){if(stream.eatSpace())return null;if(stream.match('%{')){state.tokenize=tokenComment;stream.skipToEnd();return'comment'}
if(stream.match(/^[%#]/)){stream.skipToEnd();return'comment'}
if(stream.match(/^[0-9\.+-]/,!1)){if(stream.match(/^[+-]?0x[0-9a-fA-F]+[ij]?/)){stream.tokenize=tokenBase;return'number'};if(stream.match(/^[+-]?\d*\.\d+([EeDd][+-]?\d+)?[ij]?/)){return'number'};if(stream.match(/^[+-]?\d+([EeDd][+-]?\d+)?[ij]?/)){return'number'}}
if(stream.match(wordRegexp(['nan','NaN','inf','Inf']))){return'number'};if(stream.match(/^"([^"]|(""))*"/)){return'string'};if(stream.match(/^'([^']|(''))*'/)){return'string'};if(stream.match(keywords)){return'keyword'};if(stream.match(builtins)){return'builtin'};if(stream.match(identifiers)){return'variable'};if(stream.match(singleOperators)||stream.match(doubleOperators)){return'operator'};if(stream.match(singleDelimiters)||stream.match(doubleDelimiters)||stream.match(tripleDelimiters)){return null};if(stream.match(expressionEnd)){state.tokenize=tokenTranspose;return null};stream.next();return'error'};return{startState:function(){return{tokenize:tokenBase}},token:function(stream,state){var style=state.tokenize(stream,state);if(style==='number'||style==='variable'){state.tokenize=tokenTranspose}
return style}}});CodeMirror.defineMIME("text/x-octave","octave")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("oz",function(conf){function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b")}
var singleOperators=/[\^@!\|<>#~\.\*\-\+\\/,=]/;var doubleOperators=/(<-)|(:=)|(=<)|(>=)|(<=)|(<:)|(>:)|(=:)|(\\=)|(\\=:)|(!!)|(==)|(::)/;var tripleOperators=/(:::)|(\.\.\.)|(=<:)|(>=:)/;var middle=["in","then","else","of","elseof","elsecase","elseif","catch","finally","with","require","prepare","import","export","define","do"];var end=["end"];var atoms=wordRegexp(["true","false","nil","unit"]);var commonKeywords=wordRegexp(["andthen","at","attr","declare","feat","from","lex","mod","mode","orelse","parser","prod","prop","scanner","self","syn","token"]);var openingKeywords=wordRegexp(["local","proc","fun","case","class","if","cond","or","dis","choice","not","thread","try","raise","lock","for","suchthat","meth","functor"]);var middleKeywords=wordRegexp(middle);var endKeywords=wordRegexp(end);function tokenBase(stream,state){if(stream.eatSpace()){return null}
if(stream.match(/[{}]/)){return"bracket"}
if(stream.match(/(\[])/)){return"keyword"}
if(stream.match(tripleOperators)||stream.match(doubleOperators)){return"operator"}
if(stream.match(atoms)){return'atom'}
var matched=stream.match(openingKeywords);if(matched){if(!state.doInCurrentLine)
state.currentIndent++;else state.doInCurrentLine=!1;if(matched[0]=="proc"||matched[0]=="fun")
state.tokenize=tokenFunProc;else if(matched[0]=="class")
state.tokenize=tokenClass;else if(matched[0]=="meth")
state.tokenize=tokenMeth;return'keyword'}
if(stream.match(middleKeywords)||stream.match(commonKeywords)){return"keyword"}
if(stream.match(endKeywords)){state.currentIndent--;return'keyword'}
var ch=stream.next();if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(/[~\d]/.test(ch)){if(ch=="~"){if(!/^[0-9]/.test(stream.peek()))
return null;else if((stream.next()=="0"&&stream.match(/^[xX][0-9a-fA-F]+/))||stream.match(/^[0-9]*(\.[0-9]+)?([eE][~+]?[0-9]+)?/))
return"number"}
if((ch=="0"&&stream.match(/^[xX][0-9a-fA-F]+/))||stream.match(/^[0-9]*(\.[0-9]+)?([eE][~+]?[0-9]+)?/))
return"number";return null}
if(ch=="%"){stream.skipToEnd();return'comment'}else if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}}
if(singleOperators.test(ch)){return"operator"}
stream.eatWhile(/\w/);return"variable"}
function tokenClass(stream,state){if(stream.eatSpace()){return null}
stream.match(/([A-Z][A-Za-z0-9_]*)|(`.+`)/);state.tokenize=tokenBase;return"variable-3"}
function tokenMeth(stream,state){if(stream.eatSpace()){return null}
stream.match(/([a-zA-Z][A-Za-z0-9_]*)|(`.+`)/);state.tokenize=tokenBase;return"def"}
function tokenFunProc(stream,state){if(stream.eatSpace()){return null}
if(!state.hasPassedFirstStage&&stream.eat("{")){state.hasPassedFirstStage=!0;return"bracket"}else if(state.hasPassedFirstStage){stream.match(/([A-Z][A-Za-z0-9_]*)|(`.+`)|\$/);state.hasPassedFirstStage=!1;state.tokenize=tokenBase;return"def"}else{state.tokenize=tokenBase;return null}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return"comment"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!escaped)
state.tokenize=tokenBase;return"string"}}
function buildElectricInputRegEx(){var allClosings=middle.concat(end);return new RegExp("[\\[\\]]|("+allClosings.join("|")+")$")}
return{startState:function(){return{tokenize:tokenBase,currentIndent:0,doInCurrentLine:!1,hasPassedFirstStage:!1}},token:function(stream,state){if(stream.sol())
state.doInCurrentLine=0;return state.tokenize(stream,state)},indent:function(state,textAfter){var trueText=textAfter.replace(/^\s+|\s+$/g,'');if(trueText.match(endKeywords)||trueText.match(middleKeywords)||trueText.match(/(\[])/))
return conf.indentUnit*(state.currentIndent-1);if(state.currentIndent<0)
return 0;return state.currentIndent*conf.indentUnit},fold:"indent",electricInput:buildElectricInputRegEx(),lineComment:"%",blockCommentStart:"/*",blockCommentEnd:"*/"}});CodeMirror.defineMIME("text/x-oz","oz")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("pascal",function(){function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var keywords=words("and array begin case const div do downto else end file for forward integer "+"boolean char function goto if in label mod nil not of or packed procedure "+"program record repeat set string then to type until var while with");var atoms={"null":!0};var isOperatorChar=/[+\-*&%=<>!?|\/]/;function tokenBase(stream,state){var ch=stream.next();if(ch=="#"&&state.startOfLine){stream.skipToEnd();return"meta"}
if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(ch=="("&&stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}
if(/[\[\]{}\(\),;\:\.]/.test(ch)){return null}
if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}
if(ch=="/"){if(stream.eat("/")){stream.skipToEnd();return"comment"}}
if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}
stream.eatWhile(/[\w\$_]/);var cur=stream.current();if(keywords.propertyIsEnumerable(cur))return"keyword";if(atoms.propertyIsEnumerable(cur))return"atom";return"variable"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!escaped)state.tokenize=null;return"string"}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch==")"&&maybeEnd){state.tokenize=null;break}
maybeEnd=(ch=="*")}
return"comment"}
return{startState:function(){return{tokenize:null}},token:function(stream,state){if(stream.eatSpace())return null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment"||style=="meta")return style;return style},electricChars:"{}"}});CodeMirror.defineMIME("text/x-pascal","pascal")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../javascript/javascript"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../javascript/javascript"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("pegjs",function(config){var jsMode=CodeMirror.getMode(config,"javascript");function identifier(stream){return stream.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)}
return{startState:function(){return{inString:!1,stringType:null,inComment:!1,inCharacterClass:!1,braced:0,lhs:!0,localState:null}},token:function(stream,state){if(stream)
if(!state.inString&&!state.inComment&&((stream.peek()=='"')||(stream.peek()=="'"))){state.stringType=stream.peek();stream.next();state.inString=!0}
if(!state.inString&&!state.inComment&&stream.match(/^\/\*/)){state.inComment=!0}
if(state.inString){while(state.inString&&!stream.eol()){if(stream.peek()===state.stringType){stream.next();state.inString=!1}else if(stream.peek()==='\\'){stream.next();stream.next()}else{stream.match(/^.[^\\\"\']*/)}}
return state.lhs?"property string":"string"}else if(state.inComment){while(state.inComment&&!stream.eol()){if(stream.match(/\*\//)){state.inComment=!1}else{stream.match(/^.[^\*]*/)}}
return"comment"}else if(state.inCharacterClass){while(state.inCharacterClass&&!stream.eol()){if(!(stream.match(/^[^\]\\]+/)||stream.match(/^\\./))){state.inCharacterClass=!1}}}else if(stream.peek()==='['){stream.next();state.inCharacterClass=!0;return'bracket'}else if(stream.match(/^\/\//)){stream.skipToEnd();return"comment"}else if(state.braced||stream.peek()==='{'){if(state.localState===null){state.localState=CodeMirror.startState(jsMode)}
var token=jsMode.token(stream,state.localState);var text=stream.current();if(!token){for(var i=0;i<text.length;i++){if(text[i]==='{'){state.braced++}else if(text[i]==='}'){state.braced--}}}
return token}else if(identifier(stream)){if(stream.peek()===':'){return'variable'}
return'variable-2'}else if(['[',']','(',')'].indexOf(stream.peek())!=-1){stream.next();return'bracket'}else if(!stream.eatSpace()){stream.next()}
return null}}},"javascript")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("perl",function(){var PERL={'->':4,'++':4,'--':4,'**':4,'=~':4,'!~':4,'*':4,'/':4,'%':4,'x':4,'+':4,'-':4,'.':4,'<<':4,'>>':4,'<':4,'>':4,'<=':4,'>=':4,'lt':4,'gt':4,'le':4,'ge':4,'==':4,'!=':4,'<=>':4,'eq':4,'ne':4,'cmp':4,'~~':4,'&':4,'|':4,'^':4,'&&':4,'||':4,'//':4,'..':4,'...':4,'?':4,':':4,'=':4,'+=':4,'-=':4,'*=':4,',':4,'=>':4,'::':4,'not':4,'and':4,'or':4,'xor':4,'BEGIN':[5,1],'END':[5,1],'PRINT':[5,1],'PRINTF':[5,1],'GETC':[5,1],'READ':[5,1],'READLINE':[5,1],'DESTROY':[5,1],'TIE':[5,1],'TIEHANDLE':[5,1],'UNTIE':[5,1],'STDIN':5,'STDIN_TOP':5,'STDOUT':5,'STDOUT_TOP':5,'STDERR':5,'STDERR_TOP':5,'$ARG':5,'$_':5,'@ARG':5,'@_':5,'$LIST_SEPARATOR':5,'$"':5,'$PROCESS_ID':5,'$PID':5,'$$':5,'$REAL_GROUP_ID':5,'$GID':5,'$(':5,'$EFFECTIVE_GROUP_ID':5,'$EGID':5,'$)':5,'$PROGRAM_NAME':5,'$0':5,'$SUBSCRIPT_SEPARATOR':5,'$SUBSEP':5,'$;':5,'$REAL_USER_ID':5,'$UID':5,'$<':5,'$EFFECTIVE_USER_ID':5,'$EUID':5,'$>':5,'$a':5,'$b':5,'$COMPILING':5,'$^C':5,'$DEBUGGING':5,'$^D':5,'${^ENCODING}':5,'$ENV':5,'%ENV':5,'$SYSTEM_FD_MAX':5,'$^F':5,'@F':5,'${^GLOBAL_PHASE}':5,'$^H':5,'%^H':5,'@INC':5,'%INC':5,'$INPLACE_EDIT':5,'$^I':5,'$^M':5,'$OSNAME':5,'$^O':5,'${^OPEN}':5,'$PERLDB':5,'$^P':5,'$SIG':5,'%SIG':5,'$BASETIME':5,'$^T':5,'${^TAINT}':5,'${^UNICODE}':5,'${^UTF8CACHE}':5,'${^UTF8LOCALE}':5,'$PERL_VERSION':5,'$^V':5,'${^WIN32_SLOPPY_STAT}':5,'$EXECUTABLE_NAME':5,'$^X':5,'$1':5,'$MATCH':5,'$&':5,'${^MATCH}':5,'$PREMATCH':5,'$`':5,'${^PREMATCH}':5,'$POSTMATCH':5,"$'":5,'${^POSTMATCH}':5,'$LAST_PAREN_MATCH':5,'$+':5,'$LAST_SUBMATCH_RESULT':5,'$^N':5,'@LAST_MATCH_END':5,'@+':5,'%LAST_PAREN_MATCH':5,'%+':5,'@LAST_MATCH_START':5,'@-':5,'%LAST_MATCH_START':5,'%-':5,'$LAST_REGEXP_CODE_RESULT':5,'$^R':5,'${^RE_DEBUG_FLAGS}':5,'${^RE_TRIE_MAXBUF}':5,'$ARGV':5,'@ARGV':5,'ARGV':5,'ARGVOUT':5,'$OUTPUT_FIELD_SEPARATOR':5,'$OFS':5,'$,':5,'$INPUT_LINE_NUMBER':5,'$NR':5,'$.':5,'$INPUT_RECORD_SEPARATOR':5,'$RS':5,'$/':5,'$OUTPUT_RECORD_SEPARATOR':5,'$ORS':5,'$\\':5,'$OUTPUT_AUTOFLUSH':5,'$|':5,'$ACCUMULATOR':5,'$^A':5,'$FORMAT_FORMFEED':5,'$^L':5,'$FORMAT_PAGE_NUMBER':5,'$%':5,'$FORMAT_LINES_LEFT':5,'$-':5,'$FORMAT_LINE_BREAK_CHARACTERS':5,'$:':5,'$FORMAT_LINES_PER_PAGE':5,'$=':5,'$FORMAT_TOP_NAME':5,'$^':5,'$FORMAT_NAME':5,'$~':5,'${^CHILD_ERROR_NATIVE}':5,'$EXTENDED_OS_ERROR':5,'$^E':5,'$EXCEPTIONS_BEING_CAUGHT':5,'$^S':5,'$WARNING':5,'$^W':5,'${^WARNING_BITS}':5,'$OS_ERROR':5,'$ERRNO':5,'$!':5,'%OS_ERROR':5,'%ERRNO':5,'%!':5,'$CHILD_ERROR':5,'$?':5,'$EVAL_ERROR':5,'$@':5,'$OFMT':5,'$#':5,'$*':5,'$ARRAY_BASE':5,'$[':5,'$OLD_PERL_VERSION':5,'$]':5,'if':[1,1],elsif:[1,1],'else':[1,1],'while':[1,1],unless:[1,1],'for':[1,1],foreach:[1,1],'abs':1,accept:1,alarm:1,'atan2':1,bind:1,binmode:1,bless:1,bootstrap:1,'break':1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,'continue':[1,1],'cos':1,crypt:1,dbmclose:1,dbmopen:1,'default':1,defined:1,'delete':1,die:1,'do':1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,'eval':1,'exec':1,exists:1,exit:1,'exp':1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,'goto':1,grep:1,hex:1,'import':1,index:1,'int':1,ioctl:1,'join':1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,'link':1,listen:1,local:2,localtime:1,lock:1,'log':1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,'new':1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,'package':1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,'return':1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,'sin':1,sleep:1,socket:1,socketpair:1,'sort':1,splice:1,'split':1,sprintf:1,'sqrt':1,srand:1,stat:1,state:1,study:1,'sub':1,'substr':1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null};var RXstyle="string-2";var RXmodifiers=/[goseximacplud]/;function tokenChain(stream,state,chain,style,tail){state.chain=null;state.style=null;state.tail=null;state.tokenize=function(stream,state){var e=!1,c,i=0;while(c=stream.next()){if(c===chain[i]&&!e){if(chain[++i]!==undefined){state.chain=chain[i];state.style=style;state.tail=tail}else if(tail)
stream.eatWhile(tail);state.tokenize=tokenPerl;return style}
e=!e&&c=="\\"}
return style};return state.tokenize(stream,state)}
function tokenSOMETHING(stream,state,string){state.tokenize=function(stream,state){if(stream.string==string)
state.tokenize=tokenPerl;stream.skipToEnd();return"string"};return state.tokenize(stream,state)}
function tokenPerl(stream,state){if(stream.eatSpace())
return null;if(state.chain)
return tokenChain(stream,state,state.chain,state.style,state.tail);if(stream.match(/^\-?[\d\.]/,!1))
if(stream.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))
return'number';if(stream.match(/^<<(?=\w)/)){stream.eatWhile(/\w/);return tokenSOMETHING(stream,state,stream.current().substr(2))}
if(stream.sol()&&stream.match(/^\=item(?!\w)/)){return tokenSOMETHING(stream,state,'=cut')}
var ch=stream.next();if(ch=='"'||ch=="'"){if(prefix(stream,3)=="<<"+ch){var p=stream.pos;stream.eatWhile(/\w/);var n=stream.current().substr(1);if(n&&stream.eat(ch))
return tokenSOMETHING(stream,state,n);stream.pos=p}
return tokenChain(stream,state,[ch],"string")}
if(ch=="q"){var c=look(stream,-2);if(!(c&&/\w/.test(c))){c=look(stream,0);if(c=="x"){c=look(stream,1);if(c=="("){eatSuffix(stream,2);return tokenChain(stream,state,[")"],RXstyle,RXmodifiers)}
if(c=="["){eatSuffix(stream,2);return tokenChain(stream,state,["]"],RXstyle,RXmodifiers)}
if(c=="{"){eatSuffix(stream,2);return tokenChain(stream,state,["}"],RXstyle,RXmodifiers)}
if(c=="<"){eatSuffix(stream,2);return tokenChain(stream,state,[">"],RXstyle,RXmodifiers)}
if(/[\^'"!~\/]/.test(c)){eatSuffix(stream,1);return tokenChain(stream,state,[stream.eat(c)],RXstyle,RXmodifiers)}}else if(c=="q"){c=look(stream,1);if(c=="("){eatSuffix(stream,2);return tokenChain(stream,state,[")"],"string")}
if(c=="["){eatSuffix(stream,2);return tokenChain(stream,state,["]"],"string")}
if(c=="{"){eatSuffix(stream,2);return tokenChain(stream,state,["}"],"string")}
if(c=="<"){eatSuffix(stream,2);return tokenChain(stream,state,[">"],"string")}
if(/[\^'"!~\/]/.test(c)){eatSuffix(stream,1);return tokenChain(stream,state,[stream.eat(c)],"string")}}else if(c=="w"){c=look(stream,1);if(c=="("){eatSuffix(stream,2);return tokenChain(stream,state,[")"],"bracket")}
if(c=="["){eatSuffix(stream,2);return tokenChain(stream,state,["]"],"bracket")}
if(c=="{"){eatSuffix(stream,2);return tokenChain(stream,state,["}"],"bracket")}
if(c=="<"){eatSuffix(stream,2);return tokenChain(stream,state,[">"],"bracket")}
if(/[\^'"!~\/]/.test(c)){eatSuffix(stream,1);return tokenChain(stream,state,[stream.eat(c)],"bracket")}}else if(c=="r"){c=look(stream,1);if(c=="("){eatSuffix(stream,2);return tokenChain(stream,state,[")"],RXstyle,RXmodifiers)}
if(c=="["){eatSuffix(stream,2);return tokenChain(stream,state,["]"],RXstyle,RXmodifiers)}
if(c=="{"){eatSuffix(stream,2);return tokenChain(stream,state,["}"],RXstyle,RXmodifiers)}
if(c=="<"){eatSuffix(stream,2);return tokenChain(stream,state,[">"],RXstyle,RXmodifiers)}
if(/[\^'"!~\/]/.test(c)){eatSuffix(stream,1);return tokenChain(stream,state,[stream.eat(c)],RXstyle,RXmodifiers)}}else if(/[\^'"!~\/(\[{<]/.test(c)){if(c=="("){eatSuffix(stream,1);return tokenChain(stream,state,[")"],"string")}
if(c=="["){eatSuffix(stream,1);return tokenChain(stream,state,["]"],"string")}
if(c=="{"){eatSuffix(stream,1);return tokenChain(stream,state,["}"],"string")}
if(c=="<"){eatSuffix(stream,1);return tokenChain(stream,state,[">"],"string")}
if(/[\^'"!~\/]/.test(c)){return tokenChain(stream,state,[stream.eat(c)],"string")}}}}
if(ch=="m"){var c=look(stream,-2);if(!(c&&/\w/.test(c))){c=stream.eat(/[(\[{<\^'"!~\/]/);if(c){if(/[\^'"!~\/]/.test(c)){return tokenChain(stream,state,[c],RXstyle,RXmodifiers)}
if(c=="("){return tokenChain(stream,state,[")"],RXstyle,RXmodifiers)}
if(c=="["){return tokenChain(stream,state,["]"],RXstyle,RXmodifiers)}
if(c=="{"){return tokenChain(stream,state,["}"],RXstyle,RXmodifiers)}
if(c=="<"){return tokenChain(stream,state,[">"],RXstyle,RXmodifiers)}}}}
if(ch=="s"){var c=/[\/>\]})\w]/.test(look(stream,-2));if(!c){c=stream.eat(/[(\[{<\^'"!~\/]/);if(c){if(c=="[")
return tokenChain(stream,state,["]","]"],RXstyle,RXmodifiers);if(c=="{")
return tokenChain(stream,state,["}","}"],RXstyle,RXmodifiers);if(c=="<")
return tokenChain(stream,state,[">",">"],RXstyle,RXmodifiers);if(c=="(")
return tokenChain(stream,state,[")",")"],RXstyle,RXmodifiers);return tokenChain(stream,state,[c,c],RXstyle,RXmodifiers)}}}
if(ch=="y"){var c=/[\/>\]})\w]/.test(look(stream,-2));if(!c){c=stream.eat(/[(\[{<\^'"!~\/]/);if(c){if(c=="[")
return tokenChain(stream,state,["]","]"],RXstyle,RXmodifiers);if(c=="{")
return tokenChain(stream,state,["}","}"],RXstyle,RXmodifiers);if(c=="<")
return tokenChain(stream,state,[">",">"],RXstyle,RXmodifiers);if(c=="(")
return tokenChain(stream,state,[")",")"],RXstyle,RXmodifiers);return tokenChain(stream,state,[c,c],RXstyle,RXmodifiers)}}}
if(ch=="t"){var c=/[\/>\]})\w]/.test(look(stream,-2));if(!c){c=stream.eat("r");if(c){c=stream.eat(/[(\[{<\^'"!~\/]/);if(c){if(c=="[")
return tokenChain(stream,state,["]","]"],RXstyle,RXmodifiers);if(c=="{")
return tokenChain(stream,state,["}","}"],RXstyle,RXmodifiers);if(c=="<")
return tokenChain(stream,state,[">",">"],RXstyle,RXmodifiers);if(c=="(")
return tokenChain(stream,state,[")",")"],RXstyle,RXmodifiers);return tokenChain(stream,state,[c,c],RXstyle,RXmodifiers)}}}}
if(ch=="`"){return tokenChain(stream,state,[ch],"variable-2")}
if(ch=="/"){if(!/~\s*$/.test(prefix(stream)))
return"operator";else return tokenChain(stream,state,[ch],RXstyle,RXmodifiers)}
if(ch=="$"){var p=stream.pos;if(stream.eatWhile(/\d/)||stream.eat("{")&&stream.eatWhile(/\d/)&&stream.eat("}"))
return"variable-2";else stream.pos=p}
if(/[$@%]/.test(ch)){var p=stream.pos;if(stream.eat("^")&&stream.eat(/[A-Z]/)||!/[@$%&]/.test(look(stream,-2))&&stream.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var c=stream.current();if(PERL[c])
return"variable-2"}
stream.pos=p}
if(/[$@%&]/.test(ch)){if(stream.eatWhile(/[\w$\[\]]/)||stream.eat("{")&&stream.eatWhile(/[\w$\[\]]/)&&stream.eat("}")){var c=stream.current();if(PERL[c])
return"variable-2";else return"variable"}}
if(ch=="#"){if(look(stream,-2)!="$"){stream.skipToEnd();return"comment"}}
if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(ch)){var p=stream.pos;stream.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/);if(PERL[stream.current()])
return"operator";else stream.pos=p}
if(ch=="_"){if(stream.pos==1){if(suffix(stream,6)=="_END__"){return tokenChain(stream,state,['\0'],"comment")}else if(suffix(stream,7)=="_DATA__"){return tokenChain(stream,state,['\0'],"variable-2")}else if(suffix(stream,7)=="_C__"){return tokenChain(stream,state,['\0'],"string")}}}
if(/\w/.test(ch)){var p=stream.pos;if(look(stream,-2)=="{"&&(look(stream,0)=="}"||stream.eatWhile(/\w/)&&look(stream,0)=="}"))
return"string";else stream.pos=p}
if(/[A-Z]/.test(ch)){var l=look(stream,-2);var p=stream.pos;stream.eatWhile(/[A-Z_]/);if(/[\da-z]/.test(look(stream,0))){stream.pos=p}else{var c=PERL[stream.current()];if(!c)
return"meta";if(c[1])
c=c[0];if(l!=":"){if(c==1)
return"keyword";else if(c==2)
return"def";else if(c==3)
return"atom";else if(c==4)
return"operator";else if(c==5)
return"variable-2";else return"meta"}else return"meta"}}
if(/[a-zA-Z_]/.test(ch)){var l=look(stream,-2);stream.eatWhile(/\w/);var c=PERL[stream.current()];if(!c)
return"meta";if(c[1])
c=c[0];if(l!=":"){if(c==1)
return"keyword";else if(c==2)
return"def";else if(c==3)
return"atom";else if(c==4)
return"operator";else if(c==5)
return"variable-2";else return"meta"}else return"meta"}
return null}
return{startState:function(){return{tokenize:tokenPerl,chain:null,style:null,tail:null}},token:function(stream,state){return(state.tokenize||tokenPerl)(stream,state)},lineComment:'#'}});CodeMirror.registerHelper("wordChars","perl",/[\w$]/);CodeMirror.defineMIME("text/x-perl","perl");function look(stream,c){return stream.string.charAt(stream.pos+(c||0))}
function prefix(stream,c){if(c){var x=stream.pos-c;return stream.string.substr((x>=0?x:0),c)}else{return stream.string.substr(0,stream.pos-1)}}
function suffix(stream,c){var y=stream.string.length;var x=y-stream.pos+1;return stream.string.substr(stream.pos,(c&&c<y?c:x))}
function eatSuffix(stream,c){var x=stream.pos+c;var y;if(x<=0)
stream.pos=0;else if(x>=(y=stream.string.length-1))
stream.pos=y;else stream.pos=x}})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function keywords(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
function matchSequence(list,end,escapes){if(list.length==0)return phpString(end);return function(stream,state){var patterns=list[0];for(var i=0;i<patterns.length;i++)if(stream.match(patterns[i][0])){state.tokenize=matchSequence(list.slice(1),end);return patterns[i][1]}
state.tokenize=phpString(end,escapes);return"string"}}
function phpString(closing,escapes){return function(stream,state){return phpString_(stream,state,closing,escapes)}}
function phpString_(stream,state,closing,escapes){if(escapes!==!1&&stream.match("${",!1)||stream.match("{$",!1)){state.tokenize=null;return"string"}
if(escapes!==!1&&stream.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/)){if(stream.match("[",!1)){state.tokenize=matchSequence([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],closing,escapes)}
if(stream.match(/\-\>\w/,!1)){state.tokenize=matchSequence([[["->",null]],[[/[\w]+/,"variable"]]],closing,escapes)}
return"variable-2"}
var escaped=!1;while(!stream.eol()&&(escaped||escapes===!1||(!stream.match("{$",!1)&&!stream.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1)))){if(!escaped&&stream.match(closing)){state.tokenize=null;state.tokStack.pop();state.tokStack.pop();break}
escaped=stream.next()=="\\"&&!escaped}
return"string"}
var phpKeywords="abstract and array as break case catch class clone const continue declare default "+"do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final "+"for foreach function global goto if implements interface instanceof namespace "+"new or private protected public static switch throw trait try use var while xor "+"die echo empty exit eval include include_once isset list require require_once return "+"print unset __halt_compiler self static parent yield insteadof finally";var phpAtoms="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__";var phpBuiltin="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count";CodeMirror.registerHelper("hintWords","php",[phpKeywords,phpAtoms,phpBuiltin].join(" ").split(" "));CodeMirror.registerHelper("wordChars","php",/[\w$]/);var phpConfig={name:"clike",helperType:"php",keywords:keywords(phpKeywords),blockKeywords:keywords("catch do else elseif for foreach if switch try while finally"),defKeywords:keywords("class function interface namespace trait"),atoms:keywords(phpAtoms),builtin:keywords(phpBuiltin),multiLineStrings:!0,hooks:{"$":function(stream){stream.eatWhile(/[\w\$_]/);return"variable-2"},"<":function(stream,state){var before;if(before=stream.match(/<<\s*/)){var quoted=stream.eat(/['"]/);stream.eatWhile(/[\w\.]/);var delim=stream.current().slice(before[0].length+(quoted?2:1));if(quoted)stream.eat(quoted);if(delim){(state.tokStack||(state.tokStack=[])).push(delim,0);state.tokenize=phpString(delim,quoted!="'");return"string"}}
return!1},"#":function(stream){while(!stream.eol()&&!stream.match("?>",!1))stream.next();return"comment"},"/":function(stream){if(stream.eat("/")){while(!stream.eol()&&!stream.match("?>",!1))stream.next();return"comment"}
return!1},'"':function(_stream,state){(state.tokStack||(state.tokStack=[])).push('"',0);state.tokenize=phpString('"');return"string"},"{":function(_stream,state){if(state.tokStack&&state.tokStack.length)
state.tokStack[state.tokStack.length-1]++;return!1},"}":function(_stream,state){if(state.tokStack&&state.tokStack.length>0&&!--state.tokStack[state.tokStack.length-1]){state.tokenize=phpString(state.tokStack[state.tokStack.length-2])}
return!1}}};CodeMirror.defineMode("php",function(config,parserConfig){var htmlMode=CodeMirror.getMode(config,"text/html");var phpMode=CodeMirror.getMode(config,phpConfig);function dispatch(stream,state){var isPHP=state.curMode==phpMode;if(stream.sol()&&state.pending&&state.pending!='"'&&state.pending!="'")state.pending=null;if(!isPHP){if(stream.match(/^<\?\w*/)){state.curMode=phpMode;if(!state.php)state.php=CodeMirror.startState(phpMode,htmlMode.indent(state.html,""))
state.curState=state.php;return"meta"}
if(state.pending=='"'||state.pending=="'"){while(!stream.eol()&&stream.next()!=state.pending){}
var style="string"}else if(state.pending&&stream.pos<state.pending.end){stream.pos=state.pending.end;var style=state.pending.style}else{var style=htmlMode.token(stream,state.curState)}
if(state.pending)state.pending=null;var cur=stream.current(),openPHP=cur.search(/<\?/),m;if(openPHP!=-1){if(style=="string"&&(m=cur.match(/[\'\"]$/))&&!/\?>/.test(cur))state.pending=m[0];else state.pending={end:stream.pos,style:style};stream.backUp(cur.length-openPHP)}
return style}else if(isPHP&&state.php.tokenize==null&&stream.match("?>")){state.curMode=htmlMode;state.curState=state.html;if(!state.php.context.prev)state.php=null;return"meta"}else{return phpMode.token(stream,state.curState)}}
return{startState:function(){var html=CodeMirror.startState(htmlMode)
var php=parserConfig.startOpen?CodeMirror.startState(phpMode):null
return{html:html,php:php,curMode:parserConfig.startOpen?phpMode:htmlMode,curState:parserConfig.startOpen?php:html,pending:null}},copyState:function(state){var html=state.html,htmlNew=CodeMirror.copyState(htmlMode,html),php=state.php,phpNew=php&&CodeMirror.copyState(phpMode,php),cur;if(state.curMode==htmlMode)cur=htmlNew;else cur=phpNew;return{html:htmlNew,php:phpNew,curMode:state.curMode,curState:cur,pending:state.pending}},token:dispatch,indent:function(state,textAfter){if((state.curMode!=phpMode&&/^\s*<\//.test(textAfter))||(state.curMode==phpMode&&/^\?>/.test(textAfter)))
return htmlMode.indent(state.html,textAfter);return state.curMode.indent(state.curState,textAfter)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(state){return{state:state.curState,mode:state.curMode}}}},"htmlmixed","clike");CodeMirror.defineMIME("application/x-httpd-php","php");CodeMirror.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0});CodeMirror.defineMIME("text/x-php",phpConfig)})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"php");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT('simple_test','[meta <?php] '+'[keyword echo] [string "aaa"]; '+'[meta ?>]');MT('variable_interpolation_non_alphanumeric','[meta <?php]','[keyword echo] [string "aaa$~$!$@$#$$$%$^$&$*$($)$.$<$>$/$\\$}$\\\"$:$;$?$|$[[$]]$+$=aaa"]','[meta ?>]');MT('variable_interpolation_digits','[meta <?php]','[keyword echo] [string "aaa$1$2$3$4$5$6$7$8$9$0aaa"]','[meta ?>]');MT('variable_interpolation_simple_syntax_1','[meta <?php]','[keyword echo] [string "aaa][variable-2 $aaa][string .aaa"];','[meta ?>]');MT('variable_interpolation_simple_syntax_2','[meta <?php]','[keyword echo] [string "][variable-2 $aaaa][[','[number 2]',']][string aa"];','[keyword echo] [string "][variable-2 $aaaa][[','[number 2345]',']][string aa"];','[keyword echo] [string "][variable-2 $aaaa][[','[number 2.3]',']][string aa"];','[keyword echo] [string "][variable-2 $aaaa][[','[variable aaaaa]',']][string aa"];','[keyword echo] [string "][variable-2 $aaaa][[','[variable-2 $aaaaa]',']][string aa"];','[keyword echo] [string "1aaa][variable-2 $aaaa][[','[number 2]',']][string aa"];','[keyword echo] [string "aaa][variable-2 $aaaa][[','[number 2345]',']][string aa"];','[keyword echo] [string "aaa][variable-2 $aaaa][[','[number 2.3]',']][string aa"];','[keyword echo] [string "aaa][variable-2 $aaaa][[','[variable aaaaa]',']][string aa"];','[keyword echo] [string "aaa][variable-2 $aaaa][[','[variable-2 $aaaaa]',']][string aa"];','[meta ?>]');MT('variable_interpolation_simple_syntax_3','[meta <?php]','[keyword echo] [string "aaa][variable-2 $aaaa]->[variable aaaaa][string .aaaaaa"];','[keyword echo] [string "aaa][variable-2 $aaaa][string ->][variable-2 $aaaaa][string .aaaaaa"];','[keyword echo] [string "aaa][variable-2 $aaaa]->[variable aaaaa][string [[2]].aaaaaa"];','[keyword echo] [string "aaa][variable-2 $aaaa]->[variable aaaaa][string ->aaaa2.aaaaaa"];','[meta ?>]');MT('variable_interpolation_escaping','[meta <?php] [comment /* Escaping */]','[keyword echo] [string "aaa\\$aaaa->aaa.aaa"];','[keyword echo] [string "aaa\\$aaaa[[2]]aaa.aaa"];','[keyword echo] [string "aaa\\$aaaa[[asd]]aaa.aaa"];','[keyword echo] [string "aaa{\\$aaaa->aaa.aaa"];','[keyword echo] [string "aaa{\\$aaaa[[2]]aaa.aaa"];','[keyword echo] [string "aaa{\\aaaaa[[asd]]aaa.aaa"];','[keyword echo] [string "aaa\\${aaaa->aaa.aaa"];','[keyword echo] [string "aaa\\${aaaa[[2]]aaa.aaa"];','[keyword echo] [string "aaa\\${aaaa[[asd]]aaa.aaa"];','[meta ?>]');MT('variable_interpolation_complex_syntax_1','[meta <?php]','[keyword echo] [string "aaa][variable-2 $]{[variable aaaa]}[string ->aaa.aaa"];','[keyword echo] [string "aaa][variable-2 $]{[variable-2 $aaaa]}[string ->aaa.aaa"];','[keyword echo] [string "aaa][variable-2 $]{[variable-2 $aaaa][[','  [number 42]',']]}[string ->aaa.aaa"];','[keyword echo] [string "aaa][variable-2 $]{[variable aaaa][meta ?>]aaaaaa');MT('variable_interpolation_complex_syntax_2','[meta <?php] [comment /* Monsters */]','[keyword echo] [string "][variable-2 $]{[variable aaa][comment /*}?>} $aaa<?php } */]}[string ->aaa.aaa"];','[keyword echo] [string "][variable-2 $]{[variable aaa][comment /*}?>*/][[','  [string "aaa][variable-2 $aaa][string {}][variable-2 $]{[variable aaa]}[string "]',']]}[string ->aaa.aaa"];','[keyword echo] [string "][variable-2 $]{[variable aaa][comment /*} } $aaa } */]}[string ->aaa.aaa"];');function build_recursive_monsters(nt,t,n){var monsters=[t];for(var i=1;i<=n;++i)
monsters[i]=nt.join(monsters[i-1]);return monsters}
var m1=build_recursive_monsters(['[string "][variable-2 $]{[variable aaa] [operator +] ','}[string "]'],'[comment /* }?>} */] [string "aaa][variable-2 $aaa][string .aaa"]',10);MT('variable_interpolation_complex_syntax_3_1','[meta <?php] [comment /* Recursive monsters */]','[keyword echo] '+m1[4]+';','[keyword echo] '+m1[7]+';','[keyword echo] '+m1[8]+';','[keyword echo] '+m1[5]+';','[keyword echo] '+m1[1]+';','[keyword echo] '+m1[6]+';','[keyword echo] '+m1[9]+';','[keyword echo] '+m1[0]+';','[keyword echo] '+m1[10]+';','[keyword echo] '+m1[2]+';','[keyword echo] '+m1[3]+';','[keyword echo] [string "end"];','[meta ?>]');var m2=build_recursive_monsters(['[string "a][variable-2 $]{[variable aaa] [operator +] ',' [operator +] ','}[string .a"]'],'[comment /* }?>{{ */] [string "a?>}{{aa][variable-2 $aaa][string .a}a?>a"]',5);MT('variable_interpolation_complex_syntax_3_2','[meta <?php] [comment /* Recursive monsters 2 */]','[keyword echo] '+m2[0]+';','[keyword echo] '+m2[1]+';','[keyword echo] '+m2[5]+';','[keyword echo] '+m2[4]+';','[keyword echo] '+m2[2]+';','[keyword echo] '+m2[3]+';','[keyword echo] [string "end"];','[meta ?>]');function build_recursive_monsters_2(mf1,mf2,nt,t,n){var monsters=[t];for(var i=1;i<=n;++i)
monsters[i]=nt[0]+mf1[i-1]+nt[1]+mf2[i-1]+nt[2]+monsters[i-1]+nt[3];return monsters}
var m3=build_recursive_monsters_2(m1,m2,['[string "a][variable-2 $]{[variable aaa] [operator +] ',' [operator +] ',' [operator +] ','}[string .a"]'],'[comment /* }?>{{ */] [string "a?>}{{aa][variable-2 $aaa][string .a}a?>a"]',4);MT('variable_interpolation_complex_syntax_3_3','[meta <?php] [comment /* Recursive monsters 2 */]','[keyword echo] '+m3[4]+';','[keyword echo] '+m3[0]+';','[keyword echo] '+m3[3]+';','[keyword echo] '+m3[1]+';','[keyword echo] '+m3[2]+';','[keyword echo] [string "end"];','[meta ?>]');MT("variable_interpolation_heredoc","[meta <?php]","[string <<<here]","[string doc ][variable-2 $]{[variable yay]}[string more]","[string here]; [comment // normal]")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("pig",function(_config,parserConfig){var keywords=parserConfig.keywords,builtins=parserConfig.builtins,types=parserConfig.types,multiLineStrings=parserConfig.multiLineStrings;var isOperatorChar=/[*+\-%<>=&?:\/!|]/;function chain(stream,state,f){state.tokenize=f;return f(stream,state)}
function tokenComment(stream,state){var isEnd=!1;var ch;while(ch=stream.next()){if(ch=="/"&&isEnd){state.tokenize=tokenBase;break}
isEnd=(ch=="*")}
return"comment"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!(escaped||multiLineStrings))
state.tokenize=tokenBase;return"error"}}
function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'")
return chain(stream,state,tokenString(ch));else if(/[\[\]{}\(\),;\.]/.test(ch))
return null;else if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}else if(ch=="/"){if(stream.eat("*")){return chain(stream,state,tokenComment)}else{stream.eatWhile(isOperatorChar);return"operator"}}else if(ch=="-"){if(stream.eat("-")){stream.skipToEnd();return"comment"}else{stream.eatWhile(isOperatorChar);return"operator"}}else if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}else{stream.eatWhile(/[\w\$_]/);if(keywords&&keywords.propertyIsEnumerable(stream.current().toUpperCase())){if(!stream.eat(")")&&!stream.eat("."))
return"keyword"}
if(builtins&&builtins.propertyIsEnumerable(stream.current().toUpperCase()))
return"variable-2";if(types&&types.propertyIsEnumerable(stream.current().toUpperCase()))
return"variable-3";return"variable"}}
return{startState:function(){return{tokenize:tokenBase,startOfLine:!0}},token:function(stream,state){if(stream.eatSpace())return null;var style=state.tokenize(stream,state);return style}}});(function(){function keywords(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var pBuiltins="ABS ACOS ARITY ASIN ATAN AVG BAGSIZE BINSTORAGE BLOOM BUILDBLOOM CBRT CEIL "+"CONCAT COR COS COSH COUNT COUNT_STAR COV CONSTANTSIZE CUBEDIMENSIONS DIFF DISTINCT DOUBLEABS "+"DOUBLEAVG DOUBLEBASE DOUBLEMAX DOUBLEMIN DOUBLEROUND DOUBLESUM EXP FLOOR FLOATABS FLOATAVG "+"FLOATMAX FLOATMIN FLOATROUND FLOATSUM GENERICINVOKER INDEXOF INTABS INTAVG INTMAX INTMIN "+"INTSUM INVOKEFORDOUBLE INVOKEFORFLOAT INVOKEFORINT INVOKEFORLONG INVOKEFORSTRING INVOKER "+"ISEMPTY JSONLOADER JSONMETADATA JSONSTORAGE LAST_INDEX_OF LCFIRST LOG LOG10 LOWER LONGABS "+"LONGAVG LONGMAX LONGMIN LONGSUM MAX MIN MAPSIZE MONITOREDUDF NONDETERMINISTIC OUTPUTSCHEMA  "+"PIGSTORAGE PIGSTREAMING RANDOM REGEX_EXTRACT REGEX_EXTRACT_ALL REPLACE ROUND SIN SINH SIZE "+"SQRT STRSPLIT SUBSTRING SUM STRINGCONCAT STRINGMAX STRINGMIN STRINGSIZE TAN TANH TOBAG "+"TOKENIZE TOMAP TOP TOTUPLE TRIM TEXTLOADER TUPLESIZE UCFIRST UPPER UTF8STORAGECONVERTER ";var pKeywords="VOID IMPORT RETURNS DEFINE LOAD FILTER FOREACH ORDER CUBE DISTINCT COGROUP "+"JOIN CROSS UNION SPLIT INTO IF OTHERWISE ALL AS BY USING INNER OUTER ONSCHEMA PARALLEL "+"PARTITION GROUP AND OR NOT GENERATE FLATTEN ASC DESC IS STREAM THROUGH STORE MAPREDUCE "+"SHIP CACHE INPUT OUTPUT STDERROR STDIN STDOUT LIMIT SAMPLE LEFT RIGHT FULL EQ GT LT GTE LTE "+"NEQ MATCHES TRUE FALSE DUMP";var pTypes="BOOLEAN INT LONG FLOAT DOUBLE CHARARRAY BYTEARRAY BAG TUPLE MAP ";CodeMirror.defineMIME("text/x-pig",{name:"pig",builtins:keywords(pBuiltins),keywords:keywords(pKeywords),types:keywords(pTypes)});CodeMirror.registerHelper("hintWords","pig",(pBuiltins+pTypes+pKeywords).split(" "))}())})}catch(e){};try{(function(mod){'use strict';if(typeof exports=='object'&&typeof module=='object')
mod(require('codemirror'));else if(typeof define=='function'&&define.amd)
define(['codemirror'],mod);else mod(window.CodeMirror)})(function(CodeMirror){'use strict';CodeMirror.defineMode('powershell',function(){function buildRegexp(patterns,options){options=options||{};var prefix=options.prefix!==undefined?options.prefix:'^';var suffix=options.suffix!==undefined?options.suffix:'\\b';for(var i=0;i<patterns.length;i++){if(patterns[i]instanceof RegExp){patterns[i]=patterns[i].source}else{patterns[i]=patterns[i].replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&')}}
return new RegExp(prefix+'('+patterns.join('|')+')'+suffix,'i')}
var notCharacterOrDash='(?=[^A-Za-z\\d\\-_]|$)';var varNames=/[\w\-:]/
var keywords=buildRegexp([/begin|break|catch|continue|data|default|do|dynamicparam/,/else|elseif|end|exit|filter|finally|for|foreach|from|function|if|in/,/param|process|return|switch|throw|trap|try|until|where|while/],{suffix:notCharacterOrDash});var punctuation=/[\[\]{},;`\.]|@[({]/;var wordOperators=buildRegexp(['f',/b?not/,/[ic]?split/,'join',/is(not)?/,'as',/[ic]?(eq|ne|[gl][te])/,/[ic]?(not)?(like|match|contains)/,/[ic]?replace/,/b?(and|or|xor)/],{prefix:'-'});var symbolOperators=/[+\-*\/%]=|\+\+|--|\.\.|[+\-*&^%:=!|\/]|<(?!#)|(?!#)>/;var operators=buildRegexp([wordOperators,symbolOperators],{suffix:''});var numbers=/^((0x[\da-f]+)|((\d+\.\d+|\d\.|\.\d+|\d+)(e[\+\-]?\d+)?))[ld]?([kmgtp]b)?/i;var identifiers=/^[A-Za-z\_][A-Za-z\-\_\d]*\b/;var symbolBuiltins=/[A-Z]:|%|\?/i;var namedBuiltins=buildRegexp([/Add-(Computer|Content|History|Member|PSSnapin|Type)/,/Checkpoint-Computer/,/Clear-(Content|EventLog|History|Host|Item(Property)?|Variable)/,/Compare-Object/,/Complete-Transaction/,/Connect-PSSession/,/ConvertFrom-(Csv|Json|SecureString|StringData)/,/Convert-Path/,/ConvertTo-(Csv|Html|Json|SecureString|Xml)/,/Copy-Item(Property)?/,/Debug-Process/,/Disable-(ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)/,/Disconnect-PSSession/,/Enable-(ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)/,/(Enter|Exit)-PSSession/,/Export-(Alias|Clixml|Console|Counter|Csv|FormatData|ModuleMember|PSSession)/,/ForEach-Object/,/Format-(Custom|List|Table|Wide)/,new RegExp('Get-(Acl|Alias|AuthenticodeSignature|ChildItem|Command|ComputerRestorePoint|Content|ControlPanelItem|Counter|Credential'+'|Culture|Date|Event|EventLog|EventSubscriber|ExecutionPolicy|FormatData|Help|History|Host|HotFix|Item|ItemProperty|Job'+'|Location|Member|Module|PfxCertificate|Process|PSBreakpoint|PSCallStack|PSDrive|PSProvider|PSSession|PSSessionConfiguration'+'|PSSnapin|Random|Service|TraceSource|Transaction|TypeData|UICulture|Unique|Variable|Verb|WinEvent|WmiObject)'),/Group-Object/,/Import-(Alias|Clixml|Counter|Csv|LocalizedData|Module|PSSession)/,/ImportSystemModules/,/Invoke-(Command|Expression|History|Item|RestMethod|WebRequest|WmiMethod)/,/Join-Path/,/Limit-EventLog/,/Measure-(Command|Object)/,/Move-Item(Property)?/,new RegExp('New-(Alias|Event|EventLog|Item(Property)?|Module|ModuleManifest|Object|PSDrive|PSSession|PSSessionConfigurationFile'+'|PSSessionOption|PSTransportOption|Service|TimeSpan|Variable|WebServiceProxy|WinEvent)'),/Out-(Default|File|GridView|Host|Null|Printer|String)/,/Pause/,/(Pop|Push)-Location/,/Read-Host/,/Receive-(Job|PSSession)/,/Register-(EngineEvent|ObjectEvent|PSSessionConfiguration|WmiEvent)/,/Remove-(Computer|Event|EventLog|Item(Property)?|Job|Module|PSBreakpoint|PSDrive|PSSession|PSSnapin|TypeData|Variable|WmiObject)/,/Rename-(Computer|Item(Property)?)/,/Reset-ComputerMachinePassword/,/Resolve-Path/,/Restart-(Computer|Service)/,/Restore-Computer/,/Resume-(Job|Service)/,/Save-Help/,/Select-(Object|String|Xml)/,/Send-MailMessage/,new RegExp('Set-(Acl|Alias|AuthenticodeSignature|Content|Date|ExecutionPolicy|Item(Property)?|Location|PSBreakpoint|PSDebug'+'|PSSessionConfiguration|Service|StrictMode|TraceSource|Variable|WmiInstance)'),/Show-(Command|ControlPanelItem|EventLog)/,/Sort-Object/,/Split-Path/,/Start-(Job|Process|Service|Sleep|Transaction|Transcript)/,/Stop-(Computer|Job|Process|Service|Transcript)/,/Suspend-(Job|Service)/,/TabExpansion2/,/Tee-Object/,/Test-(ComputerSecureChannel|Connection|ModuleManifest|Path|PSSessionConfigurationFile)/,/Trace-Command/,/Unblock-File/,/Undo-Transaction/,/Unregister-(Event|PSSessionConfiguration)/,/Update-(FormatData|Help|List|TypeData)/,/Use-Transaction/,/Wait-(Event|Job|Process)/,/Where-Object/,/Write-(Debug|Error|EventLog|Host|Output|Progress|Verbose|Warning)/,/cd|help|mkdir|more|oss|prompt/,/ac|asnp|cat|cd|chdir|clc|clear|clhy|cli|clp|cls|clv|cnsn|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|dnsn|ebp/,/echo|epal|epcsv|epsn|erase|etsn|exsn|fc|fl|foreach|ft|fw|gal|gbp|gc|gci|gcm|gcs|gdr|ghy|gi|gjb|gl|gm|gmo|gp|gps/,/group|gsn|gsnp|gsv|gu|gv|gwmi|h|history|icm|iex|ihy|ii|ipal|ipcsv|ipmo|ipsn|irm|ise|iwmi|iwr|kill|lp|ls|man|md/,/measure|mi|mount|move|mp|mv|nal|ndr|ni|nmo|npssc|nsn|nv|ogv|oh|popd|ps|pushd|pwd|r|rbp|rcjb|rcsn|rd|rdr|ren|ri/,/rjb|rm|rmdir|rmo|rni|rnp|rp|rsn|rsnp|rujb|rv|rvpa|rwmi|sajb|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls/,/sort|sp|spjb|spps|spsv|start|sujb|sv|swmi|tee|trcm|type|where|wjb|write/],{prefix:'',suffix:''});var variableBuiltins=buildRegexp([/[$?^_]|Args|ConfirmPreference|ConsoleFileName|DebugPreference|Error|ErrorActionPreference|ErrorView|ExecutionContext/,/FormatEnumerationLimit|Home|Host|Input|MaximumAliasCount|MaximumDriveCount|MaximumErrorCount|MaximumFunctionCount/,/MaximumHistoryCount|MaximumVariableCount|MyInvocation|NestedPromptLevel|OutputEncoding|Pid|Profile|ProgressPreference/,/PSBoundParameters|PSCommandPath|PSCulture|PSDefaultParameterValues|PSEmailServer|PSHome|PSScriptRoot|PSSessionApplicationName/,/PSSessionConfigurationName|PSSessionOption|PSUICulture|PSVersionTable|Pwd|ShellId|StackTrace|VerbosePreference/,/WarningPreference|WhatIfPreference/,/Event|EventArgs|EventSubscriber|Sender/,/Matches|Ofs|ForEach|LastExitCode|PSCmdlet|PSItem|PSSenderInfo|This/,/!0|!1|null/],{prefix:'\\$',suffix:''});var builtins=buildRegexp([symbolBuiltins,namedBuiltins,variableBuiltins],{suffix:notCharacterOrDash});var grammar={keyword:keywords,number:numbers,operator:operators,builtin:builtins,punctuation:punctuation,identifier:identifiers};function tokenBase(stream,state){var parent=state.returnStack[state.returnStack.length-1];if(parent&&parent.shouldReturnFrom(state)){state.tokenize=parent.tokenize;state.returnStack.pop();return state.tokenize(stream,state)}
if(stream.eatSpace()){return null}
if(stream.eat('(')){state.bracketNesting+=1;return'punctuation'}
if(stream.eat(')')){state.bracketNesting-=1;return'punctuation'}
for(var key in grammar){if(stream.match(grammar[key])){return key}}
var ch=stream.next();if(ch==="'"){return tokenSingleQuoteString(stream,state)}
if(ch==='$'){return tokenVariable(stream,state)}
if(ch==='"'){return tokenDoubleQuoteString(stream,state)}
if(ch==='<'&&stream.eat('#')){state.tokenize=tokenComment;return tokenComment(stream,state)}
if(ch==='#'){stream.skipToEnd();return'comment'}
if(ch==='@'){var quoteMatch=stream.eat(/["']/);if(quoteMatch&&stream.eol()){state.tokenize=tokenMultiString;state.startQuote=quoteMatch[0];return tokenMultiString(stream,state)}else if(stream.peek().match(/[({]/)){return'punctuation'}else if(stream.peek().match(varNames)){return tokenVariable(stream,state)}}
return'error'}
function tokenSingleQuoteString(stream,state){var ch;while((ch=stream.peek())!=null){stream.next();if(ch==="'"&&!stream.eat("'")){state.tokenize=tokenBase;return'string'}}
return'error'}
function tokenDoubleQuoteString(stream,state){var ch;while((ch=stream.peek())!=null){if(ch==='$'){state.tokenize=tokenStringInterpolation;return'string'}
stream.next();if(ch==='`'){stream.next();continue}
if(ch==='"'&&!stream.eat('"')){state.tokenize=tokenBase;return'string'}}
return'error'}
function tokenStringInterpolation(stream,state){return tokenInterpolation(stream,state,tokenDoubleQuoteString)}
function tokenMultiStringReturn(stream,state){state.tokenize=tokenMultiString;state.startQuote='"'
return tokenMultiString(stream,state)}
function tokenHereStringInterpolation(stream,state){return tokenInterpolation(stream,state,tokenMultiStringReturn)}
function tokenInterpolation(stream,state,parentTokenize){if(stream.match('$(')){var savedBracketNesting=state.bracketNesting;state.returnStack.push({shouldReturnFrom:function(state){return state.bracketNesting===savedBracketNesting},tokenize:parentTokenize});state.tokenize=tokenBase;state.bracketNesting+=1;return'punctuation'}else{stream.next();state.returnStack.push({shouldReturnFrom:function(){return!0},tokenize:parentTokenize});state.tokenize=tokenVariable;return state.tokenize(stream,state)}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while((ch=stream.next())!=null){if(maybeEnd&&ch=='>'){state.tokenize=tokenBase;break}
maybeEnd=(ch==='#')}
return'comment'}
function tokenVariable(stream,state){var ch=stream.peek();if(stream.eat('{')){state.tokenize=tokenVariableWithBraces;return tokenVariableWithBraces(stream,state)}else if(ch!=undefined&&ch.match(varNames)){stream.eatWhile(varNames);state.tokenize=tokenBase;return'variable-2'}else{state.tokenize=tokenBase;return'error'}}
function tokenVariableWithBraces(stream,state){var ch;while((ch=stream.next())!=null){if(ch==='}'){state.tokenize=tokenBase;break}}
return'variable-2'}
function tokenMultiString(stream,state){var quote=state.startQuote;if(stream.sol()&&stream.match(new RegExp(quote+'@'))){state.tokenize=tokenBase}else if(quote==='"'){while(!stream.eol()){var ch=stream.peek();if(ch==='$'){state.tokenize=tokenHereStringInterpolation;return'string'}
stream.next();if(ch==='`'){stream.next()}}}else{stream.skipToEnd()}
return'string'}
var external={startState:function(){return{returnStack:[],bracketNesting:0,tokenize:tokenBase}},token:function(stream,state){return state.tokenize(stream,state)},blockCommentStart:'<#',blockCommentEnd:'#>',lineComment:'#',fold:'brace'};return external});CodeMirror.defineMIME('application/x-powershell','powershell')})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"powershell");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT('comment','[number 1][comment # A]');MT('comment_multiline','[number 1][comment <#]','[comment ABC]','[comment #>][number 2]');['0','1234','12kb','12mb','12Gb','12Tb','12PB','12L','12D','12lkb','12dtb','1.234','1.234e56','1.','1.e2','.2','.2e34','1.2MB','1.kb','.1dTB','1.e1gb','.2','.2e34','0x1','0xabcdef','0x3tb','0xelmb'].forEach(function(number){MT("number_"+number,"[number "+number+"]")});MT('string_literal_escaping',"[string 'a''']");MT('string_literal_variable',"[string 'a $x']");MT('string_escaping_1','[string "a `""]');MT('string_escaping_2','[string "a """]');MT('string_variable_escaping','[string "a `$x"]');MT('string_variable','[string "a ][variable-2 $x][string  b"]');MT('string_variable_spaces','[string "a ][variable-2 ${x y}][string  b"]');MT('string_expression','[string "a ][punctuation $(][variable-2 $x][operator +][number 3][punctuation )][string  b"]');MT('string_expression_nested','[string "A][punctuation $(][string "a][punctuation $(][string "w"][punctuation )][string b"][punctuation )][string B"]');MT('string_heredoc','[string @"]','[string abc]','[string "@]');MT('string_heredoc_quotes','[string @"]','[string abc "\']','[string "@]');MT('string_heredoc_variable','[string @"]','[string a ][variable-2 $x][string  b]','[string "@]');MT('string_heredoc_nested_string','[string @"]','[string a][punctuation $(][string "w"][punctuation )][string b]','[string "@]');MT('string_heredoc_literal_quotes',"[string @']",'[string abc "\']',"[string '@]");MT('array',"[punctuation @(][string 'a'][punctuation ,][string 'b'][punctuation )]");MT('hash',"[punctuation @{][string 'key'][operator :][string 'value'][punctuation }]");MT('variable',"[variable-2 $test]");MT('variable_global',"[variable-2 $global:test]");MT('variable_spaces',"[variable-2 ${test test}]");MT('operator_splat',"[variable-2 @x]");MT('variable_builtin',"[builtin $ErrorActionPreference]");MT('variable_builtin_symbols',"[builtin $$]");MT('operator',"[operator +]");MT('operator_unary',"[operator +][number 3]");MT('operator_long',"[operator -match]");['(',')','[[',']]','{','}',',','`',';','.'].forEach(function(punctuation){MT("punctuation_"+punctuation.replace(/^[\[\]]/,''),"[punctuation "+punctuation+"]")});MT('keyword',"[keyword if]");MT('call_builtin',"[builtin Get-ChildItem]")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("properties",function(){return{token:function(stream,state){var sol=stream.sol()||state.afterSection;var eol=stream.eol();state.afterSection=!1;if(sol){if(state.nextMultiline){state.inMultiline=!0;state.nextMultiline=!1}else{state.position="def"}}
if(eol&&!state.nextMultiline){state.inMultiline=!1;state.position="def"}
if(sol){while(stream.eatSpace()){}}
var ch=stream.next();if(sol&&(ch==="#"||ch==="!"||ch===";")){state.position="comment";stream.skipToEnd();return"comment"}else if(sol&&ch==="["){state.afterSection=!0;stream.skipTo("]");stream.eat("]");return"header"}else if(ch==="="||ch===":"){state.position="quote";return null}else if(ch==="\\"&&state.position==="quote"){if(stream.eol()){state.nextMultiline=!0}}
return state.position},startState:function(){return{position:"def",nextMultiline:!1,inMultiline:!1,afterSection:!1}}}});CodeMirror.defineMIME("text/x-properties","properties");CodeMirror.defineMIME("text/x-ini","properties")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b","i")};var keywordArray=["package","message","import","syntax","required","optional","repeated","reserved","default","extensions","packed","bool","bytes","double","enum","float","string","int32","int64","uint32","uint64","sint32","sint64","fixed32","fixed64","sfixed32","sfixed64"];var keywords=wordRegexp(keywordArray);CodeMirror.registerHelper("hintWords","protobuf",keywordArray);var identifiers=new RegExp("^[_A-Za-z\xa1-\uffff][_A-Za-z0-9\xa1-\uffff]*");function tokenBase(stream){if(stream.eatSpace())return null;if(stream.match("//")){stream.skipToEnd();return"comment"}
if(stream.match(/^[0-9\.+-]/,!1)){if(stream.match(/^[+-]?0x[0-9a-fA-F]+/))
return"number";if(stream.match(/^[+-]?\d*\.\d+([EeDd][+-]?\d+)?/))
return"number";if(stream.match(/^[+-]?\d+([EeDd][+-]?\d+)?/))
return"number"}
if(stream.match(/^"([^"]|(""))*"/)){return"string"}
if(stream.match(/^'([^']|(''))*'/)){return"string"}
if(stream.match(keywords)){return"keyword"}
if(stream.match(identifiers)){return"variable"};stream.next();return null};CodeMirror.defineMode("protobuf",function(){return{token:tokenBase}});CodeMirror.defineMIME("text/x-protobuf","protobuf")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../javascript/javascript"),require("../css/css"),require("../htmlmixed/htmlmixed"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../javascript/javascript","../css/css","../htmlmixed/htmlmixed"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("pug",function(config){var KEYWORD='keyword';var DOCTYPE='meta';var ID='builtin';var CLASS='qualifier';var ATTRS_NEST={'{':'}','(':')','[':']'};var jsMode=CodeMirror.getMode(config,'javascript');function State(){this.javaScriptLine=!1;this.javaScriptLineExcludesColon=!1;this.javaScriptArguments=!1;this.javaScriptArgumentsDepth=0;this.isInterpolating=!1;this.interpolationNesting=0;this.jsState=CodeMirror.startState(jsMode);this.restOfLine='';this.isIncludeFiltered=!1;this.isEach=!1;this.lastTag='';this.scriptType='';this.isAttrs=!1;this.attrsNest=[];this.inAttributeName=!0;this.attributeIsType=!1;this.attrValue='';this.indentOf=Infinity;this.indentToken='';this.innerMode=null;this.innerState=null;this.innerModeForLine=!1}
State.prototype.copy=function(){var res=new State();res.javaScriptLine=this.javaScriptLine;res.javaScriptLineExcludesColon=this.javaScriptLineExcludesColon;res.javaScriptArguments=this.javaScriptArguments;res.javaScriptArgumentsDepth=this.javaScriptArgumentsDepth;res.isInterpolating=this.isInterpolating;res.interpolationNesting=this.interpolationNesting;res.jsState=CodeMirror.copyState(jsMode,this.jsState);res.innerMode=this.innerMode;if(this.innerMode&&this.innerState){res.innerState=CodeMirror.copyState(this.innerMode,this.innerState)}
res.restOfLine=this.restOfLine;res.isIncludeFiltered=this.isIncludeFiltered;res.isEach=this.isEach;res.lastTag=this.lastTag;res.scriptType=this.scriptType;res.isAttrs=this.isAttrs;res.attrsNest=this.attrsNest.slice();res.inAttributeName=this.inAttributeName;res.attributeIsType=this.attributeIsType;res.attrValue=this.attrValue;res.indentOf=this.indentOf;res.indentToken=this.indentToken;res.innerModeForLine=this.innerModeForLine;return res};function javaScript(stream,state){if(stream.sol()){state.javaScriptLine=!1;state.javaScriptLineExcludesColon=!1}
if(state.javaScriptLine){if(state.javaScriptLineExcludesColon&&stream.peek()===':'){state.javaScriptLine=!1;state.javaScriptLineExcludesColon=!1;return}
var tok=jsMode.token(stream,state.jsState);if(stream.eol())state.javaScriptLine=!1;return tok||!0}}
function javaScriptArguments(stream,state){if(state.javaScriptArguments){if(state.javaScriptArgumentsDepth===0&&stream.peek()!=='('){state.javaScriptArguments=!1;return}
if(stream.peek()==='('){state.javaScriptArgumentsDepth++}else if(stream.peek()===')'){state.javaScriptArgumentsDepth--}
if(state.javaScriptArgumentsDepth===0){state.javaScriptArguments=!1;return}
var tok=jsMode.token(stream,state.jsState);return tok||!0}}
function yieldStatement(stream){if(stream.match(/^yield\b/)){return'keyword'}}
function doctype(stream){if(stream.match(/^(?:doctype) *([^\n]+)?/)){return DOCTYPE}}
function interpolation(stream,state){if(stream.match('#{')){state.isInterpolating=!0;state.interpolationNesting=0;return'punctuation'}}
function interpolationContinued(stream,state){if(state.isInterpolating){if(stream.peek()==='}'){state.interpolationNesting--;if(state.interpolationNesting<0){stream.next();state.isInterpolating=!1;return'punctuation'}}else if(stream.peek()==='{'){state.interpolationNesting++}
return jsMode.token(stream,state.jsState)||!0}}
function caseStatement(stream,state){if(stream.match(/^case\b/)){state.javaScriptLine=!0;return KEYWORD}}
function when(stream,state){if(stream.match(/^when\b/)){state.javaScriptLine=!0;state.javaScriptLineExcludesColon=!0;return KEYWORD}}
function defaultStatement(stream){if(stream.match(/^default\b/)){return KEYWORD}}
function extendsStatement(stream,state){if(stream.match(/^extends?\b/)){state.restOfLine='string';return KEYWORD}}
function append(stream,state){if(stream.match(/^append\b/)){state.restOfLine='variable';return KEYWORD}}
function prepend(stream,state){if(stream.match(/^prepend\b/)){state.restOfLine='variable';return KEYWORD}}
function block(stream,state){if(stream.match(/^block\b *(?:(prepend|append)\b)?/)){state.restOfLine='variable';return KEYWORD}}
function include(stream,state){if(stream.match(/^include\b/)){state.restOfLine='string';return KEYWORD}}
function includeFiltered(stream,state){if(stream.match(/^include:([a-zA-Z0-9\-]+)/,!1)&&stream.match('include')){state.isIncludeFiltered=!0;return KEYWORD}}
function includeFilteredContinued(stream,state){if(state.isIncludeFiltered){var tok=filter(stream,state);state.isIncludeFiltered=!1;state.restOfLine='string';return tok}}
function mixin(stream,state){if(stream.match(/^mixin\b/)){state.javaScriptLine=!0;return KEYWORD}}
function call(stream,state){if(stream.match(/^\+([-\w]+)/)){if(!stream.match(/^\( *[-\w]+ *=/,!1)){state.javaScriptArguments=!0;state.javaScriptArgumentsDepth=0}
return'variable'}
if(stream.match(/^\+#{/,!1)){stream.next();state.mixinCallAfter=!0;return interpolation(stream,state)}}
function callArguments(stream,state){if(state.mixinCallAfter){state.mixinCallAfter=!1;if(!stream.match(/^\( *[-\w]+ *=/,!1)){state.javaScriptArguments=!0;state.javaScriptArgumentsDepth=0}
return!0}}
function conditional(stream,state){if(stream.match(/^(if|unless|else if|else)\b/)){state.javaScriptLine=!0;return KEYWORD}}
function each(stream,state){if(stream.match(/^(- *)?(each|for)\b/)){state.isEach=!0;return KEYWORD}}
function eachContinued(stream,state){if(state.isEach){if(stream.match(/^ in\b/)){state.javaScriptLine=!0;state.isEach=!1;return KEYWORD}else if(stream.sol()||stream.eol()){state.isEach=!1}else if(stream.next()){while(!stream.match(/^ in\b/,!1)&&stream.next());return'variable'}}}
function whileStatement(stream,state){if(stream.match(/^while\b/)){state.javaScriptLine=!0;return KEYWORD}}
function tag(stream,state){var captures;if(captures=stream.match(/^(\w(?:[-:\w]*\w)?)\/?/)){state.lastTag=captures[1].toLowerCase();if(state.lastTag==='script'){state.scriptType='application/javascript'}
return'tag'}}
function filter(stream,state){if(stream.match(/^:([\w\-]+)/)){var innerMode;if(config&&config.innerModes){innerMode=config.innerModes(stream.current().substring(1))}
if(!innerMode){innerMode=stream.current().substring(1)}
if(typeof innerMode==='string'){innerMode=CodeMirror.getMode(config,innerMode)}
setInnerMode(stream,state,innerMode);return'atom'}}
function code(stream,state){if(stream.match(/^(!?=|-)/)){state.javaScriptLine=!0;return'punctuation'}}
function id(stream){if(stream.match(/^#([\w-]+)/)){return ID}}
function className(stream){if(stream.match(/^\.([\w-]+)/)){return CLASS}}
function attrs(stream,state){if(stream.peek()=='('){stream.next();state.isAttrs=!0;state.attrsNest=[];state.inAttributeName=!0;state.attrValue='';state.attributeIsType=!1;return'punctuation'}}
function attrsContinued(stream,state){if(state.isAttrs){if(ATTRS_NEST[stream.peek()]){state.attrsNest.push(ATTRS_NEST[stream.peek()])}
if(state.attrsNest[state.attrsNest.length-1]===stream.peek()){state.attrsNest.pop()}else if(stream.eat(')')){state.isAttrs=!1;return'punctuation'}
if(state.inAttributeName&&stream.match(/^[^=,\)!]+/)){if(stream.peek()==='='||stream.peek()==='!'){state.inAttributeName=!1;state.jsState=CodeMirror.startState(jsMode);if(state.lastTag==='script'&&stream.current().trim().toLowerCase()==='type'){state.attributeIsType=!0}else{state.attributeIsType=!1}}
return'attribute'}
var tok=jsMode.token(stream,state.jsState);if(state.attributeIsType&&tok==='string'){state.scriptType=stream.current().toString()}
if(state.attrsNest.length===0&&(tok==='string'||tok==='variable'||tok==='keyword')){try{Function('','var x '+state.attrValue.replace(/,\s*$/,'').replace(/^!/,''));state.inAttributeName=!0;state.attrValue='';stream.backUp(stream.current().length);return attrsContinued(stream,state)}catch(ex){}}
state.attrValue+=stream.current();return tok||!0}}
function attributesBlock(stream,state){if(stream.match(/^&attributes\b/)){state.javaScriptArguments=!0;state.javaScriptArgumentsDepth=0;return'keyword'}}
function indent(stream){if(stream.sol()&&stream.eatSpace()){return'indent'}}
function comment(stream,state){if(stream.match(/^ *\/\/(-)?([^\n]*)/)){state.indentOf=stream.indentation();state.indentToken='comment';return'comment'}}
function colon(stream){if(stream.match(/^: */)){return'colon'}}
function text(stream,state){if(stream.match(/^(?:\| ?| )([^\n]+)/)){return'string'}
if(stream.match(/^(<[^\n]*)/,!1)){setInnerMode(stream,state,'htmlmixed');state.innerModeForLine=!0;return innerMode(stream,state,!0)}}
function dot(stream,state){if(stream.eat('.')){var innerMode=null;if(state.lastTag==='script'&&state.scriptType.toLowerCase().indexOf('javascript')!=-1){innerMode=state.scriptType.toLowerCase().replace(/"|'/g,'')}else if(state.lastTag==='style'){innerMode='css'}
setInnerMode(stream,state,innerMode);return'dot'}}
function fail(stream){stream.next();return null}
function setInnerMode(stream,state,mode){mode=CodeMirror.mimeModes[mode]||mode;mode=config.innerModes?config.innerModes(mode)||mode:mode;mode=CodeMirror.mimeModes[mode]||mode;mode=CodeMirror.getMode(config,mode);state.indentOf=stream.indentation();if(mode&&mode.name!=='null'){state.innerMode=mode}else{state.indentToken='string'}}
function innerMode(stream,state,force){if(stream.indentation()>state.indentOf||(state.innerModeForLine&&!stream.sol())||force){if(state.innerMode){if(!state.innerState){state.innerState=state.innerMode.startState?CodeMirror.startState(state.innerMode,stream.indentation()):{}}
return stream.hideFirstChars(state.indentOf+2,function(){return state.innerMode.token(stream,state.innerState)||!0})}else{stream.skipToEnd();return state.indentToken}}else if(stream.sol()){state.indentOf=Infinity;state.indentToken=null;state.innerMode=null;state.innerState=null}}
function restOfLine(stream,state){if(stream.sol()){state.restOfLine=''}
if(state.restOfLine){stream.skipToEnd();var tok=state.restOfLine;state.restOfLine='';return tok}}
function startState(){return new State()}
function copyState(state){return state.copy()}
function nextToken(stream,state){var tok=innerMode(stream,state)||restOfLine(stream,state)||interpolationContinued(stream,state)||includeFilteredContinued(stream,state)||eachContinued(stream,state)||attrsContinued(stream,state)||javaScript(stream,state)||javaScriptArguments(stream,state)||callArguments(stream,state)||yieldStatement(stream,state)||doctype(stream,state)||interpolation(stream,state)||caseStatement(stream,state)||when(stream,state)||defaultStatement(stream,state)||extendsStatement(stream,state)||append(stream,state)||prepend(stream,state)||block(stream,state)||include(stream,state)||includeFiltered(stream,state)||mixin(stream,state)||call(stream,state)||conditional(stream,state)||each(stream,state)||whileStatement(stream,state)||tag(stream,state)||filter(stream,state)||code(stream,state)||id(stream,state)||className(stream,state)||attrs(stream,state)||attributesBlock(stream,state)||indent(stream,state)||text(stream,state)||comment(stream,state)||colon(stream,state)||dot(stream,state)||fail(stream,state);return tok===!0?null:tok}
return{startState:startState,copyState:copyState,token:nextToken}},'javascript','css','htmlmixed');CodeMirror.defineMIME('text/x-pug','pug');CodeMirror.defineMIME('text/x-jade','pug')})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("puppet",function(){var words={};var variable_regex=/({)?([a-z][a-z0-9_]*)?((::[a-z][a-z0-9_]*)*::)?[a-zA-Z0-9_]+(})?/;function define(style,string){var split=string.split(' ');for(var i=0;i<split.length;i++){words[split[i]]=style}}
define('keyword','class define site node include import inherits');define('keyword','case if else in and elsif default or');define('atom','false true running present absent file directory undef');define('builtin','action augeas burst chain computer cron destination dport exec '+'file filebucket group host icmp iniface interface jump k5login limit log_level '+'log_prefix macauthorization mailalias maillist mcx mount nagios_command '+'nagios_contact nagios_contactgroup nagios_host nagios_hostdependency '+'nagios_hostescalation nagios_hostextinfo nagios_hostgroup nagios_service '+'nagios_servicedependency nagios_serviceescalation nagios_serviceextinfo '+'nagios_servicegroup nagios_timeperiod name notify outiface package proto reject '+'resources router schedule scheduled_task selboolean selmodule service source '+'sport ssh_authorized_key sshkey stage state table tidy todest toports tosource '+'user vlan yumrepo zfs zone zpool');function tokenString(stream,state){var current,prev,found_var=!1;while(!stream.eol()&&(current=stream.next())!=state.pending){if(current==='$'&&prev!='\\'&&state.pending=='"'){found_var=!0;break}
prev=current}
if(found_var){stream.backUp(1)}
if(current==state.pending){state.continueString=!1}else{state.continueString=!0}
return"string"}
function tokenize(stream,state){var word=stream.match(/[\w]+/,!1);var attribute=stream.match(/(\s+)?\w+\s+=>.*/,!1);var resource=stream.match(/(\s+)?[\w:_]+(\s+)?{/,!1);var special_resource=stream.match(/(\s+)?[@]{1,2}[\w:_]+(\s+)?{/,!1);var ch=stream.next();if(ch==='$'){if(stream.match(variable_regex)){return state.continueString?'variable-2':'variable'}
return"error"}
if(state.continueString){stream.backUp(1);return tokenString(stream,state)}
if(state.inDefinition){if(stream.match(/(\s+)?[\w:_]+(\s+)?/)){return'def'}
stream.match(/\s+{/);state.inDefinition=!1}
if(state.inInclude){stream.match(/(\s+)?\S+(\s+)?/);state.inInclude=!1;return'def'}
if(stream.match(/(\s+)?\w+\(/)){stream.backUp(1);return'def'}
if(attribute){stream.match(/(\s+)?\w+/);return'tag'}
if(word&&words.hasOwnProperty(word)){stream.backUp(1);stream.match(/[\w]+/);if(stream.match(/\s+\S+\s+{/,!1)){state.inDefinition=!0}
if(word=='include'){state.inInclude=!0}
return words[word]}
if(/(^|\s+)[A-Z][\w:_]+/.test(word)){stream.backUp(1);stream.match(/(^|\s+)[A-Z][\w:_]+/);return'def'}
if(resource){stream.match(/(\s+)?[\w:_]+/);return'def'}
if(special_resource){stream.match(/(\s+)?[@]{1,2}/);return'special'}
if(ch=="#"){stream.skipToEnd();return"comment"}
if(ch=="'"||ch=='"'){state.pending=ch;return tokenString(stream,state)}
if(ch=='{'||ch=='}'){return'bracket'}
if(ch=='/'){stream.match(/.*?\//);return'variable-3'}
if(ch.match(/[0-9]/)){stream.eatWhile(/[0-9]+/);return'number'}
if(ch=='='){if(stream.peek()=='>'){stream.next()}
return"operator"}
stream.eatWhile(/[\w-]/);return null}
return{startState:function(){var state={};state.inDefinition=!1;state.inInclude=!1;state.continueString=!1;state.pending=!1;return state},token:function(stream,state){if(stream.eatSpace())return null;return tokenize(stream,state)}}});CodeMirror.defineMIME("text/x-puppet","puppet")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b")}
var wordOperators=wordRegexp(["and","or","not","is"]);var commonKeywords=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"];var commonBuiltins=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];CodeMirror.registerHelper("hintWords","python",commonKeywords.concat(commonBuiltins));function top(state){return state.scopes[state.scopes.length-1]}
CodeMirror.defineMode("python",function(conf,parserConf){var ERRORCLASS="error";var singleDelimiters=parserConf.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/;var doubleOperators=parserConf.doubleOperators||/^([!<>]==|<>|<<|>>|\/\/|\*\*)/;var doubleDelimiters=parserConf.doubleDelimiters||/^(\+=|\-=|\*=|%=|\/=|&=|\|=|\^=)/;var tripleDelimiters=parserConf.tripleDelimiters||/^(\/\/=|>>=|<<=|\*\*=)/;var hangingIndent=parserConf.hangingIndent||conf.indentUnit;var myKeywords=commonKeywords,myBuiltins=commonBuiltins;if(parserConf.extra_keywords!=undefined)
myKeywords=myKeywords.concat(parserConf.extra_keywords);if(parserConf.extra_builtins!=undefined)
myBuiltins=myBuiltins.concat(parserConf.extra_builtins);var py3=!(parserConf.version&&Number(parserConf.version)<3)
if(py3){var singleOperators=parserConf.singleOperators||/^[\+\-\*\/%&|\^~<>!@]/;var identifiers=parserConf.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;myKeywords=myKeywords.concat(["nonlocal","False","True","None","async","await"]);myBuiltins=myBuiltins.concat(["ascii","bytes","exec","print"]);var stringPrefixes=new RegExp("^(([rbuf]|(br))?('{3}|\"{3}|['\"]))","i")}else{var singleOperators=parserConf.singleOperators||/^[\+\-\*\/%&|\^~<>!]/;var identifiers=parserConf.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;myKeywords=myKeywords.concat(["exec","print"]);myBuiltins=myBuiltins.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]);var stringPrefixes=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}
var keywords=wordRegexp(myKeywords);var builtins=wordRegexp(myBuiltins);function tokenBase(stream,state){if(stream.sol())state.indent=stream.indentation()
if(stream.sol()&&top(state).type=="py"){var scopeOffset=top(state).offset;if(stream.eatSpace()){var lineOffset=stream.indentation();if(lineOffset>scopeOffset)
pushPyScope(state);else if(lineOffset<scopeOffset&&dedent(stream,state))
state.errorToken=!0;return null}else{var style=tokenBaseInner(stream,state);if(scopeOffset>0&&dedent(stream,state))
style+=" "+ERRORCLASS;return style}}
return tokenBaseInner(stream,state)}
function tokenBaseInner(stream,state){if(stream.eatSpace())return null;var ch=stream.peek();if(ch=="#"){stream.skipToEnd();return"comment"}
if(stream.match(/^[0-9\.]/,!1)){var floatLiteral=!1;if(stream.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)){floatLiteral=!0}
if(stream.match(/^\d+\.\d*/)){floatLiteral=!0}
if(stream.match(/^\.\d+/)){floatLiteral=!0}
if(floatLiteral){stream.eat(/J/i);return"number"}
var intLiteral=!1;if(stream.match(/^0x[0-9a-f]+/i))intLiteral=!0;if(stream.match(/^0b[01]+/i))intLiteral=!0;if(stream.match(/^0o[0-7]+/i))intLiteral=!0;if(stream.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){stream.eat(/J/i);intLiteral=!0}
if(stream.match(/^0(?![\dx])/i))intLiteral=!0;if(intLiteral){stream.eat(/L/i);return"number"}}
if(stream.match(stringPrefixes)){state.tokenize=tokenStringFactory(stream.current());return state.tokenize(stream,state)}
if(stream.match(tripleDelimiters)||stream.match(doubleDelimiters))
return"punctuation";if(stream.match(doubleOperators)||stream.match(singleOperators))
return"operator";if(stream.match(singleDelimiters))
return"punctuation";if(state.lastToken=="."&&stream.match(identifiers))
return"property";if(stream.match(keywords)||stream.match(wordOperators))
return"keyword";if(stream.match(builtins))
return"builtin";if(stream.match(/^(self|cls)\b/))
return"variable-2";if(stream.match(identifiers)){if(state.lastToken=="def"||state.lastToken=="class")
return"def";return"variable"}
stream.next();return ERRORCLASS}
function tokenStringFactory(delimiter){while("rubf".indexOf(delimiter.charAt(0).toLowerCase())>=0)
delimiter=delimiter.substr(1);var singleline=delimiter.length==1;var OUTCLASS="string";function tokenString(stream,state){while(!stream.eol()){stream.eatWhile(/[^'"\\]/);if(stream.eat("\\")){stream.next();if(singleline&&stream.eol())
return OUTCLASS}else if(stream.match(delimiter)){state.tokenize=tokenBase;return OUTCLASS}else{stream.eat(/['"]/)}}
if(singleline){if(parserConf.singleLineStringErrors)
return ERRORCLASS;else state.tokenize=tokenBase}
return OUTCLASS}
tokenString.isString=!0;return tokenString}
function pushPyScope(state){while(top(state).type!="py")state.scopes.pop()
state.scopes.push({offset:top(state).offset+conf.indentUnit,type:"py",align:null})}
function pushBracketScope(stream,state,type){var align=stream.match(/^([\s\[\{\(]|#.*)*$/,!1)?null:stream.column()+1
state.scopes.push({offset:state.indent+hangingIndent,type:type,align:align})}
function dedent(stream,state){var indented=stream.indentation();while(state.scopes.length>1&&top(state).offset>indented){if(top(state).type!="py")return!0;state.scopes.pop()}
return top(state).offset!=indented}
function tokenLexer(stream,state){if(stream.sol())state.beginningOfLine=!0;var style=state.tokenize(stream,state);var current=stream.current();if(state.beginningOfLine&&current=="@")
return stream.match(identifiers,!1)?"meta":py3?"operator":ERRORCLASS;if(/\S/.test(current))state.beginningOfLine=!1;if((style=="variable"||style=="builtin")&&state.lastToken=="meta")
style="meta";if(current=="pass"||current=="return")
state.dedent+=1;if(current=="lambda")state.lambda=!0;if(current==":"&&!state.lambda&&top(state).type=="py")
pushPyScope(state);var delimiter_index=current.length==1?"[({".indexOf(current):-1;if(delimiter_index!=-1)
pushBracketScope(stream,state,"])}".slice(delimiter_index,delimiter_index+1));delimiter_index="])}".indexOf(current);if(delimiter_index!=-1){if(top(state).type==current)state.indent=state.scopes.pop().offset-hangingIndent
else return ERRORCLASS}
if(state.dedent>0&&stream.eol()&&top(state).type=="py"){if(state.scopes.length>1)state.scopes.pop();state.dedent-=1}
return style}
var external={startState:function(basecolumn){return{tokenize:tokenBase,scopes:[{offset:basecolumn||0,type:"py",align:null}],indent:basecolumn||0,lastToken:null,lambda:!1,dedent:0}},token:function(stream,state){var addErr=state.errorToken;if(addErr)state.errorToken=!1;var style=tokenLexer(stream,state);if(style&&style!="comment")
state.lastToken=(style=="keyword"||style=="punctuation")?stream.current():style;if(style=="punctuation")style=null;if(stream.eol()&&state.lambda)
state.lambda=!1;return addErr?style+" "+ERRORCLASS:style},indent:function(state,textAfter){if(state.tokenize!=tokenBase)
return state.tokenize.isString?CodeMirror.Pass:0;var scope=top(state),closing=scope.type==textAfter.charAt(0)
if(scope.align!=null)
return scope.align-(closing?1:0)
else return scope.offset-(closing?hangingIndent:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"};return external});CodeMirror.defineMIME("text/x-python","python");var words=function(str){return str.split(" ")};CodeMirror.defineMIME("text/x-cython",{name:"python",extra_keywords:words("by cdef cimport cpdef ctypedef enum except"+"extern gil include nogil property public"+"readonly struct union DEF IF ELIF ELSE")})})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:4},{name:"python",version:3,singleLineStringErrors:!1});function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("decoratorStartOfLine","[meta @dec]","[keyword def] [def function]():","    [keyword pass]");MT("decoratorIndented","[keyword class] [def Foo]:","    [meta @dec]","    [keyword def] [def function]():","        [keyword pass]");MT("matmulWithSpace:","[variable a] [operator @] [variable b]");MT("matmulWithoutSpace:","[variable a][operator @][variable b]");MT("matmulSpaceBefore:","[variable a] [operator @][variable b]");MT("fValidStringPrefix","[string f'this is a {formatted} string']");MT("uValidStringPrefix","[string u'this is an unicode string']")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("q",function(config){var indentUnit=config.indentUnit,curPunc,keywords=buildRE(["abs","acos","aj","aj0","all","and","any","asc","asin","asof","atan","attr","avg","avgs","bin","by","ceiling","cols","cor","cos","count","cov","cross","csv","cut","delete","deltas","desc","dev","differ","distinct","div","do","each","ej","enlist","eval","except","exec","exit","exp","fby","fills","first","fkeys","flip","floor","from","get","getenv","group","gtime","hclose","hcount","hdel","hopen","hsym","iasc","idesc","if","ij","in","insert","inter","inv","key","keys","last","like","list","lj","load","log","lower","lsq","ltime","ltrim","mavg","max","maxs","mcount","md5","mdev","med","meta","min","mins","mmax","mmin","mmu","mod","msum","neg","next","not","null","or","over","parse","peach","pj","plist","prd","prds","prev","prior","rand","rank","ratios","raze","read0","read1","reciprocal","reverse","rload","rotate","rsave","rtrim","save","scan","select","set","setenv","show","signum","sin","sqrt","ss","ssr","string","sublist","sum","sums","sv","system","tables","tan","til","trim","txf","type","uj","ungroup","union","update","upper","upsert","value","var","view","views","vs","wavg","where","where","while","within","wj","wj1","wsum","xasc","xbar","xcol","xcols","xdesc","xexp","xgroup","xkey","xlog","xprev","xrank"]),E=/[|/&^!+:\\\-*%$=~#;@><,?_\'\"\[\(\]\)\s{}]/;function buildRE(w){return new RegExp("^("+w.join("|")+")$")}
function tokenBase(stream,state){var sol=stream.sol(),c=stream.next();curPunc=null;if(sol)
if(c=="/")
return(state.tokenize=tokenLineComment)(stream,state);else if(c=="\\"){if(stream.eol()||/\s/.test(stream.peek()))
return stream.skipToEnd(),/^\\\s*$/.test(stream.current())?(state.tokenize=tokenCommentToEOF)(stream,state):state.tokenize=tokenBase,"comment";else return state.tokenize=tokenBase,"builtin"}
if(/\s/.test(c))
return stream.peek()=="/"?(stream.skipToEnd(),"comment"):"whitespace";if(c=='"')
return(state.tokenize=tokenString)(stream,state);if(c=='`')
return stream.eatWhile(/[A-Z|a-z|\d|_|:|\/|\.]/),"symbol";if(("."==c&&/\d/.test(stream.peek()))||/\d/.test(c)){var t=null;stream.backUp(1);if(stream.match(/^\d{4}\.\d{2}(m|\.\d{2}([D|T](\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)?)?)/)||stream.match(/^\d+D(\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)/)||stream.match(/^\d{2}:\d{2}(:\d{2}(\.\d{1,9})?)?/)||stream.match(/^\d+[ptuv]{1}/))
t="temporal";else if(stream.match(/^0[NwW]{1}/)||stream.match(/^0x[\d|a-f|A-F]*/)||stream.match(/^[0|1]+[b]{1}/)||stream.match(/^\d+[chijn]{1}/)||stream.match(/-?\d*(\.\d*)?(e[+\-]?\d+)?(e|f)?/))
t="number";return(t&&(!(c=stream.peek())||E.test(c)))?t:(stream.next(),"error")}
if(/[A-Z|a-z]|\./.test(c))
return stream.eatWhile(/[A-Z|a-z|\.|_|\d]/),keywords.test(stream.current())?"keyword":"variable";if(/[|/&^!+:\\\-*%$=~#;@><\.,?_\']/.test(c))
return null;if(/[{}\(\[\]\)]/.test(c))
return null;return"error"}
function tokenLineComment(stream,state){return stream.skipToEnd(),/\/\s*$/.test(stream.current())?(state.tokenize=tokenBlockComment)(stream,state):(state.tokenize=tokenBase),"comment"}
function tokenBlockComment(stream,state){var f=stream.sol()&&stream.peek()=="\\";stream.skipToEnd();if(f&&/^\\\s*$/.test(stream.current()))
state.tokenize=tokenBase;return"comment"}
function tokenCommentToEOF(stream){return stream.skipToEnd(),"comment"}
function tokenString(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())){if(next=="\""&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end)state.tokenize=tokenBase;return"string"}
function pushContext(state,type,col){state.context={prev:state.context,indent:state.indent,col:col,type:type}}
function popContext(state){state.indent=state.context.indent;state.context=state.context.prev}
return{startState:function(){return{tokenize:tokenBase,context:null,indent:0,col:0}},token:function(stream,state){if(stream.sol()){if(state.context&&state.context.align==null)
state.context.align=!1;state.indent=stream.indentation()}
var style=state.tokenize(stream,state);if(style!="comment"&&state.context&&state.context.align==null&&state.context.type!="pattern"){state.context.align=!0}
if(curPunc=="(")pushContext(state,")",stream.column());else if(curPunc=="[")pushContext(state,"]",stream.column());else if(curPunc=="{")pushContext(state,"}",stream.column());else if(/[\]\}\)]/.test(curPunc)){while(state.context&&state.context.type=="pattern")popContext(state);if(state.context&&curPunc==state.context.type)popContext(state)}else if(curPunc=="."&&state.context&&state.context.type=="pattern")popContext(state);else if(/atom|string|variable/.test(style)&&state.context){if(/[\}\]]/.test(state.context.type))
pushContext(state,"pattern",stream.column());else if(state.context.type=="pattern"&&!state.context.align){state.context.align=!0;state.context.col=stream.column()}}
return style},indent:function(state,textAfter){var firstChar=textAfter&&textAfter.charAt(0);var context=state.context;if(/[\]\}]/.test(firstChar))
while(context&&context.type=="pattern")context=context.prev;var closing=context&&firstChar==context.type;if(!context)
return 0;else if(context.type=="pattern")
return context.col;else if(context.align)
return context.col+(closing?0:1);else return context.indent+(closing?0:indentUnit)}}});CodeMirror.defineMIME("text/x-q","q")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.registerHelper("wordChars","r",/[\w.]/);CodeMirror.defineMode("r",function(config){function wordObj(str){var words=str.split(" "),res={};for(var i=0;i<words.length;++i)res[words[i]]=!0;return res}
var atoms=wordObj("NULL NA Inf NaN NA_integer_ NA_real_ NA_complex_ NA_character_");var builtins=wordObj("list quote bquote eval return call parse deparse");var keywords=wordObj("if else repeat while function for in next break");var blockkeywords=wordObj("if else repeat while function for");var opChars=/[+\-*\/^<>=!&|~$:]/;var curPunc;function tokenBase(stream,state){curPunc=null;var ch=stream.next();if(ch=="#"){stream.skipToEnd();return"comment"}else if(ch=="0"&&stream.eat("x")){stream.eatWhile(/[\da-f]/i);return"number"}else if(ch=="."&&stream.eat(/\d/)){stream.match(/\d*(?:e[+\-]?\d+)?/);return"number"}else if(/\d/.test(ch)){stream.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/);return"number"}else if(ch=="'"||ch=='"'){state.tokenize=tokenString(ch);return"string"}else if(ch=="."&&stream.match(/.[.\d]+/)){return"keyword"}else if(/[\w\.]/.test(ch)&&ch!="_"){stream.eatWhile(/[\w\.]/);var word=stream.current();if(atoms.propertyIsEnumerable(word))return"atom";if(keywords.propertyIsEnumerable(word)){if(blockkeywords.propertyIsEnumerable(word)&&!stream.match(/\s*if(\s+|$)/,!1))
curPunc="block";return"keyword"}
if(builtins.propertyIsEnumerable(word))return"builtin";return"variable"}else if(ch=="%"){if(stream.skipTo("%"))stream.next();return"variable-2"}else if(ch=="<"&&stream.eat("-")){return"arrow"}else if(ch=="="&&state.ctx.argList){return"arg-is"}else if(opChars.test(ch)){if(ch=="$")return"dollar";stream.eatWhile(opChars);return"operator"}else if(/[\(\){}\[\];]/.test(ch)){curPunc=ch;if(ch==";")return"semi";return null}else{return null}}
function tokenString(quote){return function(stream,state){if(stream.eat("\\")){var ch=stream.next();if(ch=="x")stream.match(/^[a-f0-9]{2}/i);else if((ch=="u"||ch=="U")&&stream.eat("{")&&stream.skipTo("}"))stream.next();else if(ch=="u")stream.match(/^[a-f0-9]{4}/i);else if(ch=="U")stream.match(/^[a-f0-9]{8}/i);else if(/[0-7]/.test(ch))stream.match(/^[0-7]{1,2}/);return"string-2"}else{var next;while((next=stream.next())!=null){if(next==quote){state.tokenize=tokenBase;break}
if(next=="\\"){stream.backUp(1);break}}
return"string"}}}
function push(state,type,stream){state.ctx={type:type,indent:state.indent,align:null,column:stream.column(),prev:state.ctx}}
function pop(state){state.indent=state.ctx.indent;state.ctx=state.ctx.prev}
return{startState:function(){return{tokenize:tokenBase,ctx:{type:"top",indent:-config.indentUnit,align:!1},indent:0,afterIdent:!1}},token:function(stream,state){if(stream.sol()){if(state.ctx.align==null)state.ctx.align=!1;state.indent=stream.indentation()}
if(stream.eatSpace())return null;var style=state.tokenize(stream,state);if(style!="comment"&&state.ctx.align==null)state.ctx.align=!0;var ctype=state.ctx.type;if((curPunc==";"||curPunc=="{"||curPunc=="}")&&ctype=="block")pop(state);if(curPunc=="{")push(state,"}",stream);else if(curPunc=="("){push(state,")",stream);if(state.afterIdent)state.ctx.argList=!0}else if(curPunc=="[")push(state,"]",stream);else if(curPunc=="block")push(state,"block",stream);else if(curPunc==ctype)pop(state);state.afterIdent=style=="variable"||style=="keyword";return style},indent:function(state,textAfter){if(state.tokenize!=tokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),ctx=state.ctx,closing=firstChar==ctx.type;if(ctx.type=="block")return ctx.indent+(firstChar=="{"?0:config.indentUnit);else if(ctx.align)return ctx.column+(closing?0:1);else return ctx.indent+(closing?0:config.indentUnit)},lineComment:"#"}});CodeMirror.defineMIME("text/x-rsrc","r")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("rpm-changes",function(){var headerSeperator=/^-+$/;var headerLine=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)  ?\d{1,2} \d{2}:\d{2}(:\d{2})? [A-Z]{3,4} \d{4} - /;var simpleEmail=/^[\w+.-]+@[\w.-]+/;return{token:function(stream){if(stream.sol()){if(stream.match(headerSeperator)){return'tag'}
if(stream.match(headerLine)){return'tag'}}
if(stream.match(simpleEmail)){return'string'}
stream.next();return null}}});CodeMirror.defineMIME("text/x-rpm-changes","rpm-changes");CodeMirror.defineMode("rpm-spec",function(){var arch=/^(i386|i586|i686|x86_64|ppc64le|ppc64|ppc|ia64|s390x|s390|sparc64|sparcv9|sparc|noarch|alphaev6|alpha|hppa|mipsel)/;var preamble=/^[a-zA-Z0-9()]+:/;var section=/^%(debug_package|package|description|prep|build|install|files|clean|changelog|preinstall|preun|postinstall|postun|pretrans|posttrans|pre|post|triggerin|triggerun|verifyscript|check|triggerpostun|triggerprein|trigger)/;var control_flow_complex=/^%(ifnarch|ifarch|if)/;var control_flow_simple=/^%(else|endif)/;var operators=/^(\!|\?|\<\=|\<|\>\=|\>|\=\=|\&\&|\|\|)/;return{startState:function(){return{controlFlow:!1,macroParameters:!1,section:!1}},token:function(stream,state){var ch=stream.peek();if(ch=="#"){stream.skipToEnd();return"comment"}
if(stream.sol()){if(stream.match(preamble)){return"header"}
if(stream.match(section)){return"atom"}}
if(stream.match(/^\$\w+/)){return"def"}
if(stream.match(/^\$\{\w+\}/)){return"def"}
if(stream.match(control_flow_simple)){return"keyword"}
if(stream.match(control_flow_complex)){state.controlFlow=!0;return"keyword"}
if(state.controlFlow){if(stream.match(operators)){return"operator"}
if(stream.match(/^(\d+)/)){return"number"}
if(stream.eol()){state.controlFlow=!1}}
if(stream.match(arch)){if(stream.eol()){state.controlFlow=!1}
return"number"}
if(stream.match(/^%[\w]+/)){if(stream.match(/^\(/)){state.macroParameters=!0}
return"keyword"}
if(state.macroParameters){if(stream.match(/^\d+/)){return"number"}
if(stream.match(/^\)/)){state.macroParameters=!1;return"keyword"}}
if(stream.match(/^%\{\??[\w \-\:\!]+\}/)){if(stream.eol()){state.controlFlow=!1}
return"def"}
stream.next();return null}}});CodeMirror.defineMIME("text/x-rpm-spec","rpm-spec")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../python/python"),require("../stex/stex"),require("../../addon/mode/overlay"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../python/python","../stex/stex","../../addon/mode/overlay"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode('rst',function(config,options){var rx_strong=/^\*\*[^\*\s](?:[^\*]*[^\*\s])?\*\*/;var rx_emphasis=/^\*[^\*\s](?:[^\*]*[^\*\s])?\*/;var rx_literal=/^``[^`\s](?:[^`]*[^`\s])``/;var rx_number=/^(?:[\d]+(?:[\.,]\d+)*)/;var rx_positive=/^(?:\s\+[\d]+(?:[\.,]\d+)*)/;var rx_negative=/^(?:\s\-[\d]+(?:[\.,]\d+)*)/;var rx_uri_protocol="[Hh][Tt][Tt][Pp][Ss]?://";var rx_uri_domain="(?:[\\d\\w.-]+)\\.(?:\\w{2,6})";var rx_uri_path="(?:/[\\d\\w\\#\\%\\&\\-\\.\\,\\/\\:\\=\\?\\~]+)*";var rx_uri=new RegExp("^"+rx_uri_protocol+rx_uri_domain+rx_uri_path);var overlay={token:function(stream){if(stream.match(rx_strong)&&stream.match(/\W+|$/,!1))
return'strong';if(stream.match(rx_emphasis)&&stream.match(/\W+|$/,!1))
return'em';if(stream.match(rx_literal)&&stream.match(/\W+|$/,!1))
return'string-2';if(stream.match(rx_number))
return'number';if(stream.match(rx_positive))
return'positive';if(stream.match(rx_negative))
return'negative';if(stream.match(rx_uri))
return'link';while(stream.next()!=null){if(stream.match(rx_strong,!1))break;if(stream.match(rx_emphasis,!1))break;if(stream.match(rx_literal,!1))break;if(stream.match(rx_number,!1))break;if(stream.match(rx_positive,!1))break;if(stream.match(rx_negative,!1))break;if(stream.match(rx_uri,!1))break}
return null}};var mode=CodeMirror.getMode(config,options.backdrop||'rst-base');return CodeMirror.overlayMode(mode,overlay,!0)},'python','stex');CodeMirror.defineMode('rst-base',function(config){function format(string){var args=Array.prototype.slice.call(arguments,1);return string.replace(/{(\d+)}/g,function(match,n){return typeof args[n]!='undefined'?args[n]:match})}
var mode_python=CodeMirror.getMode(config,'python');var mode_stex=CodeMirror.getMode(config,'stex');var SEPA="\\s+";var TAIL="(?:\\s*|\\W|$)",rx_TAIL=new RegExp(format('^{0}',TAIL));var NAME="(?:[^\\W\\d_](?:[\\w!\"#$%&'()\\*\\+,\\-\\.\/:;<=>\\?]*[^\\W_])?)",rx_NAME=new RegExp(format('^{0}',NAME));var NAME_WWS="(?:[^\\W\\d_](?:[\\w\\s!\"#$%&'()\\*\\+,\\-\\.\/:;<=>\\?]*[^\\W_])?)";var REF_NAME=format('(?:{0}|`{1}`)',NAME,NAME_WWS);var TEXT1="(?:[^\\s\\|](?:[^\\|]*[^\\s\\|])?)";var TEXT2="(?:[^\\`]+)",rx_TEXT2=new RegExp(format('^{0}',TEXT2));var rx_section=new RegExp("^([!'#$%&\"()*+,-./:;<=>?@\\[\\\\\\]^_`{|}~])\\1{3,}\\s*$");var rx_explicit=new RegExp(format('^\\.\\.{0}',SEPA));var rx_link=new RegExp(format('^_{0}:{1}|^__:{1}',REF_NAME,TAIL));var rx_directive=new RegExp(format('^{0}::{1}',REF_NAME,TAIL));var rx_substitution=new RegExp(format('^\\|{0}\\|{1}{2}::{3}',TEXT1,SEPA,REF_NAME,TAIL));var rx_footnote=new RegExp(format('^\\[(?:\\d+|#{0}?|\\*)]{1}',REF_NAME,TAIL));var rx_citation=new RegExp(format('^\\[{0}\\]{1}',REF_NAME,TAIL));var rx_substitution_ref=new RegExp(format('^\\|{0}\\|',TEXT1));var rx_footnote_ref=new RegExp(format('^\\[(?:\\d+|#{0}?|\\*)]_',REF_NAME));var rx_citation_ref=new RegExp(format('^\\[{0}\\]_',REF_NAME));var rx_link_ref1=new RegExp(format('^{0}__?',REF_NAME));var rx_link_ref2=new RegExp(format('^`{0}`_',TEXT2));var rx_role_pre=new RegExp(format('^:{0}:`{1}`{2}',NAME,TEXT2,TAIL));var rx_role_suf=new RegExp(format('^`{1}`:{0}:{2}',NAME,TEXT2,TAIL));var rx_role=new RegExp(format('^:{0}:{1}',NAME,TAIL));var rx_directive_name=new RegExp(format('^{0}',REF_NAME));var rx_directive_tail=new RegExp(format('^::{0}',TAIL));var rx_substitution_text=new RegExp(format('^\\|{0}\\|',TEXT1));var rx_substitution_sepa=new RegExp(format('^{0}',SEPA));var rx_substitution_name=new RegExp(format('^{0}',REF_NAME));var rx_substitution_tail=new RegExp(format('^::{0}',TAIL));var rx_link_head=new RegExp("^_");var rx_link_name=new RegExp(format('^{0}|_',REF_NAME));var rx_link_tail=new RegExp(format('^:{0}',TAIL));var rx_verbatim=new RegExp('^::\\s*$');var rx_examples=new RegExp('^\\s+(?:>>>|In \\[\\d+\\]:)\\s');function to_normal(stream,state){var token=null;if(stream.sol()&&stream.match(rx_examples,!1)){change(state,to_mode,{mode:mode_python,local:CodeMirror.startState(mode_python)})}else if(stream.sol()&&stream.match(rx_explicit)){change(state,to_explicit);token='meta'}else if(stream.sol()&&stream.match(rx_section)){change(state,to_normal);token='header'}else if(phase(state)==rx_role_pre||stream.match(rx_role_pre,!1)){switch(stage(state)){case 0:change(state,to_normal,context(rx_role_pre,1));stream.match(/^:/);token='meta';break;case 1:change(state,to_normal,context(rx_role_pre,2));stream.match(rx_NAME);token='keyword';if(stream.current().match(/^(?:math|latex)/)){state.tmp_stex=!0}
break;case 2:change(state,to_normal,context(rx_role_pre,3));stream.match(/^:`/);token='meta';break;case 3:if(state.tmp_stex){state.tmp_stex=undefined;state.tmp={mode:mode_stex,local:CodeMirror.startState(mode_stex)}}
if(state.tmp){if(stream.peek()=='`'){change(state,to_normal,context(rx_role_pre,4));state.tmp=undefined;break}
token=state.tmp.mode.token(stream,state.tmp.local);break}
change(state,to_normal,context(rx_role_pre,4));stream.match(rx_TEXT2);token='string';break;case 4:change(state,to_normal,context(rx_role_pre,5));stream.match(/^`/);token='meta';break;case 5:change(state,to_normal,context(rx_role_pre,6));stream.match(rx_TAIL);break;default:change(state,to_normal)}}else if(phase(state)==rx_role_suf||stream.match(rx_role_suf,!1)){switch(stage(state)){case 0:change(state,to_normal,context(rx_role_suf,1));stream.match(/^`/);token='meta';break;case 1:change(state,to_normal,context(rx_role_suf,2));stream.match(rx_TEXT2);token='string';break;case 2:change(state,to_normal,context(rx_role_suf,3));stream.match(/^`:/);token='meta';break;case 3:change(state,to_normal,context(rx_role_suf,4));stream.match(rx_NAME);token='keyword';break;case 4:change(state,to_normal,context(rx_role_suf,5));stream.match(/^:/);token='meta';break;case 5:change(state,to_normal,context(rx_role_suf,6));stream.match(rx_TAIL);break;default:change(state,to_normal)}}else if(phase(state)==rx_role||stream.match(rx_role,!1)){switch(stage(state)){case 0:change(state,to_normal,context(rx_role,1));stream.match(/^:/);token='meta';break;case 1:change(state,to_normal,context(rx_role,2));stream.match(rx_NAME);token='keyword';break;case 2:change(state,to_normal,context(rx_role,3));stream.match(/^:/);token='meta';break;case 3:change(state,to_normal,context(rx_role,4));stream.match(rx_TAIL);break;default:change(state,to_normal)}}else if(phase(state)==rx_substitution_ref||stream.match(rx_substitution_ref,!1)){switch(stage(state)){case 0:change(state,to_normal,context(rx_substitution_ref,1));stream.match(rx_substitution_text);token='variable-2';break;case 1:change(state,to_normal,context(rx_substitution_ref,2));if(stream.match(/^_?_?/))token='link';break;default:change(state,to_normal)}}else if(stream.match(rx_footnote_ref)){change(state,to_normal);token='quote'}else if(stream.match(rx_citation_ref)){change(state,to_normal);token='quote'}else if(stream.match(rx_link_ref1)){change(state,to_normal);if(!stream.peek()||stream.peek().match(/^\W$/)){token='link'}}else if(phase(state)==rx_link_ref2||stream.match(rx_link_ref2,!1)){switch(stage(state)){case 0:if(!stream.peek()||stream.peek().match(/^\W$/)){change(state,to_normal,context(rx_link_ref2,1))}else{stream.match(rx_link_ref2)}
break;case 1:change(state,to_normal,context(rx_link_ref2,2));stream.match(/^`/);token='link';break;case 2:change(state,to_normal,context(rx_link_ref2,3));stream.match(rx_TEXT2);break;case 3:change(state,to_normal,context(rx_link_ref2,4));stream.match(/^`_/);token='link';break;default:change(state,to_normal)}}else if(stream.match(rx_verbatim)){change(state,to_verbatim)}else{if(stream.next())change(state,to_normal)}
return token}
function to_explicit(stream,state){var token=null;if(phase(state)==rx_substitution||stream.match(rx_substitution,!1)){switch(stage(state)){case 0:change(state,to_explicit,context(rx_substitution,1));stream.match(rx_substitution_text);token='variable-2';break;case 1:change(state,to_explicit,context(rx_substitution,2));stream.match(rx_substitution_sepa);break;case 2:change(state,to_explicit,context(rx_substitution,3));stream.match(rx_substitution_name);token='keyword';break;case 3:change(state,to_explicit,context(rx_substitution,4));stream.match(rx_substitution_tail);token='meta';break;default:change(state,to_normal)}}else if(phase(state)==rx_directive||stream.match(rx_directive,!1)){switch(stage(state)){case 0:change(state,to_explicit,context(rx_directive,1));stream.match(rx_directive_name);token='keyword';if(stream.current().match(/^(?:math|latex)/))
state.tmp_stex=!0;else if(stream.current().match(/^python/))
state.tmp_py=!0;break;case 1:change(state,to_explicit,context(rx_directive,2));stream.match(rx_directive_tail);token='meta';if(stream.match(/^latex\s*$/)||state.tmp_stex){state.tmp_stex=undefined;change(state,to_mode,{mode:mode_stex,local:CodeMirror.startState(mode_stex)})}
break;case 2:change(state,to_explicit,context(rx_directive,3));if(stream.match(/^python\s*$/)||state.tmp_py){state.tmp_py=undefined;change(state,to_mode,{mode:mode_python,local:CodeMirror.startState(mode_python)})}
break;default:change(state,to_normal)}}else if(phase(state)==rx_link||stream.match(rx_link,!1)){switch(stage(state)){case 0:change(state,to_explicit,context(rx_link,1));stream.match(rx_link_head);stream.match(rx_link_name);token='link';break;case 1:change(state,to_explicit,context(rx_link,2));stream.match(rx_link_tail);token='meta';break;default:change(state,to_normal)}}else if(stream.match(rx_footnote)){change(state,to_normal);token='quote'}else if(stream.match(rx_citation)){change(state,to_normal);token='quote'}else{stream.eatSpace();if(stream.eol()){change(state,to_normal)}else{stream.skipToEnd();change(state,to_comment);token='comment'}}
return token}
function to_comment(stream,state){return as_block(stream,state,'comment')}
function to_verbatim(stream,state){return as_block(stream,state,'meta')}
function as_block(stream,state,token){if(stream.eol()||stream.eatSpace()){stream.skipToEnd();return token}else{change(state,to_normal);return null}}
function to_mode(stream,state){if(state.ctx.mode&&state.ctx.local){if(stream.sol()){if(!stream.eatSpace())change(state,to_normal);return null}
return state.ctx.mode.token(stream,state.ctx.local)}
change(state,to_normal);return null}
function context(phase,stage,mode,local){return{phase:phase,stage:stage,mode:mode,local:local}}
function change(state,tok,ctx){state.tok=tok;state.ctx=ctx||{}}
function stage(state){return state.ctx.stage||0}
function phase(state){return state.ctx.phase}
return{startState:function(){return{tok:to_normal,ctx:context(undefined,0)}},copyState:function(state){var ctx=state.ctx,tmp=state.tmp;if(ctx.local)
ctx={mode:ctx.mode,local:CodeMirror.copyState(ctx.mode,ctx.local)};if(tmp)
tmp={mode:tmp.mode,local:CodeMirror.copyState(tmp.mode,tmp.local)};return{tok:state.tok,ctx:ctx,tmp:tmp}},innerMode:function(state){return state.tmp?{state:state.tmp.local,mode:state.tmp.mode}:state.ctx.mode?{state:state.ctx.local,mode:state.ctx.mode}:null},token:function(stream,state){return state.tok(stream,state)}}},'python','stex');CodeMirror.defineMIME('text/x-rst','rst')})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("ruby",function(config){function wordObj(words){var o={};for(var i=0,e=words.length;i<e;++i)o[words[i]]=!0;return o}
var keywords=wordObj(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]);var indentWords=wordObj(["def","class","case","for","while","until","module","then","catch","loop","proc","begin"]);var dedentWords=wordObj(["end","until"]);var matching={"[":"]","{":"}","(":")"};var curPunc;function chain(newtok,stream,state){state.tokenize.push(newtok);return newtok(stream,state)}
function tokenBase(stream,state){if(stream.sol()&&stream.match("=begin")&&stream.eol()){state.tokenize.push(readBlockComment);return"comment"}
if(stream.eatSpace())return null;var ch=stream.next(),m;if(ch=="`"||ch=="'"||ch=='"'){return chain(readQuoted(ch,"string",ch=='"'||ch=="`"),stream,state)}else if(ch=="/"){var currentIndex=stream.current().length;if(stream.skipTo("/")){var search_till=stream.current().length;stream.backUp(stream.current().length-currentIndex);var balance=0;while(stream.current().length<search_till){var chchr=stream.next();if(chchr=="(")balance+=1;else if(chchr==")")balance-=1;if(balance<0)break}
stream.backUp(stream.current().length-currentIndex);if(balance==0)
return chain(readQuoted(ch,"string-2",!0),stream,state)}
return"operator"}else if(ch=="%"){var style="string",embed=!0;if(stream.eat("s"))style="atom";else if(stream.eat(/[WQ]/))style="string";else if(stream.eat(/[r]/))style="string-2";else if(stream.eat(/[wxq]/)){style="string";embed=!1}
var delim=stream.eat(/[^\w\s=]/);if(!delim)return"operator";if(matching.propertyIsEnumerable(delim))delim=matching[delim];return chain(readQuoted(delim,style,embed,!0),stream,state)}else if(ch=="#"){stream.skipToEnd();return"comment"}else if(ch=="<"&&(m=stream.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/))){return chain(readHereDoc(m[1]),stream,state)}else if(ch=="0"){if(stream.eat("x"))stream.eatWhile(/[\da-fA-F]/);else if(stream.eat("b"))stream.eatWhile(/[01]/);else stream.eatWhile(/[0-7]/);return"number"}else if(/\d/.test(ch)){stream.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/);return"number"}else if(ch=="?"){while(stream.match(/^\\[CM]-/)){}
if(stream.eat("\\"))stream.eatWhile(/\w/);else stream.next();return"string"}else if(ch==":"){if(stream.eat("'"))return chain(readQuoted("'","atom",!1),stream,state);if(stream.eat('"'))return chain(readQuoted('"',"atom",!0),stream,state);if(stream.eat(/[\<\>]/)){stream.eat(/[\<\>]/);return"atom"}
if(stream.eat(/[\+\-\*\/\&\|\:\!]/)){return"atom"}
if(stream.eat(/[a-zA-Z$@_\xa1-\uffff]/)){stream.eatWhile(/[\w$\xa1-\uffff]/);stream.eat(/[\?\!\=]/);return"atom"}
return"operator"}else if(ch=="@"&&stream.match(/^@?[a-zA-Z_\xa1-\uffff]/)){stream.eat("@");stream.eatWhile(/[\w\xa1-\uffff]/);return"variable-2"}else if(ch=="$"){if(stream.eat(/[a-zA-Z_]/)){stream.eatWhile(/[\w]/)}else if(stream.eat(/\d/)){stream.eat(/\d/)}else{stream.next()}
return"variable-3"}else if(/[a-zA-Z_\xa1-\uffff]/.test(ch)){stream.eatWhile(/[\w\xa1-\uffff]/);stream.eat(/[\?\!]/);if(stream.eat(":"))return"atom";return"ident"}else if(ch=="|"&&(state.varList||state.lastTok=="{"||state.lastTok=="do")){curPunc="|";return null}else if(/[\(\)\[\]{}\\;]/.test(ch)){curPunc=ch;return null}else if(ch=="-"&&stream.eat(">")){return"arrow"}else if(/[=+\-\/*:\.^%<>~|]/.test(ch)){var more=stream.eatWhile(/[=+\-\/*:\.^%<>~|]/);if(ch=="."&&!more)curPunc=".";return"operator"}else{return null}}
function tokenBaseUntilBrace(depth){if(!depth)depth=1;return function(stream,state){if(stream.peek()=="}"){if(depth==1){state.tokenize.pop();return state.tokenize[state.tokenize.length-1](stream,state)}else{state.tokenize[state.tokenize.length-1]=tokenBaseUntilBrace(depth-1)}}else if(stream.peek()=="{"){state.tokenize[state.tokenize.length-1]=tokenBaseUntilBrace(depth+1)}
return tokenBase(stream,state)}}
function tokenBaseOnce(){var alreadyCalled=!1;return function(stream,state){if(alreadyCalled){state.tokenize.pop();return state.tokenize[state.tokenize.length-1](stream,state)}
alreadyCalled=!0;return tokenBase(stream,state)}}
function readQuoted(quote,style,embed,unescaped){return function(stream,state){var escaped=!1,ch;if(state.context.type==='read-quoted-paused'){state.context=state.context.prev;stream.eat("}")}
while((ch=stream.next())!=null){if(ch==quote&&(unescaped||!escaped)){state.tokenize.pop();break}
if(embed&&ch=="#"&&!escaped){if(stream.eat("{")){if(quote=="}"){state.context={prev:state.context,type:'read-quoted-paused'}}
state.tokenize.push(tokenBaseUntilBrace());break}else if(/[@\$]/.test(stream.peek())){state.tokenize.push(tokenBaseOnce());break}}
escaped=!escaped&&ch=="\\"}
return style}}
function readHereDoc(phrase){return function(stream,state){if(stream.match(phrase))state.tokenize.pop();else stream.skipToEnd();return"string"}}
function readBlockComment(stream,state){if(stream.sol()&&stream.match("=end")&&stream.eol())
state.tokenize.pop();stream.skipToEnd();return"comment"}
return{startState:function(){return{tokenize:[tokenBase],indented:0,context:{type:"top",indented:-config.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(stream,state){curPunc=null;if(stream.sol())state.indented=stream.indentation();var style=state.tokenize[state.tokenize.length-1](stream,state),kwtype;var thisTok=curPunc;if(style=="ident"){var word=stream.current();style=state.lastTok=="."?"property":keywords.propertyIsEnumerable(stream.current())?"keyword":/^[A-Z]/.test(word)?"tag":(state.lastTok=="def"||state.lastTok=="class"||state.varList)?"def":"variable";if(style=="keyword"){thisTok=word;if(indentWords.propertyIsEnumerable(word))kwtype="indent";else if(dedentWords.propertyIsEnumerable(word))kwtype="dedent";else if((word=="if"||word=="unless")&&stream.column()==stream.indentation())
kwtype="indent";else if(word=="do"&&state.context.indented<state.indented)
kwtype="indent"}}
if(curPunc||(style&&style!="comment"))state.lastTok=thisTok;if(curPunc=="|")state.varList=!state.varList;if(kwtype=="indent"||/[\(\[\{]/.test(curPunc))
state.context={prev:state.context,type:curPunc||style,indented:state.indented};else if((kwtype=="dedent"||/[\)\]\}]/.test(curPunc))&&state.context.prev)
state.context=state.context.prev;if(stream.eol())
state.continuedLine=(curPunc=="\\"||style=="operator");return style},indent:function(state,textAfter){if(state.tokenize[state.tokenize.length-1]!=tokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0);var ct=state.context;var closing=ct.type==matching[firstChar]||ct.type=="keyword"&&/^(?:end|until|else|elsif|when|rescue)\b/.test(textAfter);return ct.indented+(closing?0:config.indentUnit)+(state.continuedLine?config.indentUnit:0)},electricInput:/^\s*(?:end|rescue|\})$/,lineComment:"#"}});CodeMirror.defineMIME("text/x-ruby","ruby")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"ruby");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("divide_equal_operator","[variable bar] [operator /=] [variable foo]");MT("divide_equal_operator_no_spacing","[variable foo][operator /=][number 42]")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../../addon/mode/simple"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../../addon/mode/simple"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineSimpleMode("rust",{start:[{regex:/b?"/,token:"string",next:"string"},{regex:/b?r"/,token:"string",next:"string_raw"},{regex:/b?r#+"/,token:"string",next:"string_raw_hash"},{regex:/'(?:[^'\\]|\\(?:[nrt0'"]|x[\da-fA-F]{2}|u\{[\da-fA-F]{6}\}))'/,token:"string-2"},{regex:/b'(?:[^']|\\(?:['\\nrt0]|x[\da-fA-F]{2}))'/,token:"string-2"},{regex:/(?:(?:[0-9][0-9_]*)(?:(?:[Ee][+-]?[0-9_]+)|\.[0-9_]+(?:[Ee][+-]?[0-9_]+)?)(?:f32|f64)?)|(?:0(?:b[01_]+|(?:o[0-7_]+)|(?:x[0-9a-fA-F_]+))|(?:[0-9][0-9_]*))(?:u8|u16|u32|u64|i8|i16|i32|i64|isize|usize)?/,token:"number"},{regex:/(let(?:\s+mut)?|fn|enum|mod|struct|type)(\s+)([a-zA-Z_][a-zA-Z0-9_]*)/,token:["keyword",null,"def"]},{regex:/(?:abstract|alignof|as|box|break|continue|const|crate|do|else|enum|extern|fn|for|final|if|impl|in|loop|macro|match|mod|move|offsetof|override|priv|proc|pub|pure|ref|return|self|sizeof|static|struct|super|trait|type|typeof|unsafe|unsized|use|virtual|where|while|yield)\b/,token:"keyword"},{regex:/\b(?:Self|isize|usize|char|bool|u8|u16|u32|u64|f16|f32|f64|i8|i16|i32|i64|str|Option)\b/,token:"atom"},{regex:/\b(?:true|false|Some|None|Ok|Err)\b/,token:"builtin"},{regex:/\b(fn)(\s+)([a-zA-Z_][a-zA-Z0-9_]*)/,token:["keyword",null,"def"]},{regex:/#!?\[.*\]/,token:"meta"},{regex:/\/\/.*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/[-+\/*=<>!]+/,token:"operator"},{regex:/[a-zA-Z_]\w*!/,token:"variable-3"},{regex:/[a-zA-Z_]\w*/,token:"variable"},{regex:/[\{\[\(]/,indent:!0},{regex:/[\}\]\)]/,dedent:!0}],string:[{regex:/"/,token:"string",next:"start"},{regex:/(?:[^\\"]|\\(?:.|$))*/,token:"string"}],string_raw:[{regex:/"/,token:"string",next:"start"},{regex:/[^"]*/,token:"string"}],string_raw_hash:[{regex:/"#+/,token:"string",next:"start"},{regex:/(?:[^"]|"(?!#))*/,token:"string"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],electricInput:/^\s*\}$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});CodeMirror.defineMIME("text/x-rustsrc","rust")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:4},"rust");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT('integer_test','[number 123i32]','[number 123u32]','[number 123_u32]','[number 0xff_u8]','[number 0o70_i16]','[number 0b1111_1111_1001_0000_i32]','[number 0usize]');MT('float_test','[number 123.0f64]','[number 0.1f64]','[number 0.1f32]','[number 12E+99_f64]');MT('string-literals-test','[string "foo"]','[string r"foo"]','[string "\\"foo\\""]','[string r#""foo""#]','[string "foo #\\"# bar"]','[string b"foo"]','[string br"foo"]','[string b"\\"foo\\""]','[string br#""foo""#]','[string br##"foo #" bar"##]',"[string-2 'h']","[string-2 b'h']")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("sas",function(){var words={};var isDoubleOperatorSym={eq:'operator',lt:'operator',le:'operator',gt:'operator',ge:'operator',"in":'operator',ne:'operator',or:'operator'};var isDoubleOperatorChar=/(<=|>=|!=|<>)/;var isSingleOperatorChar=/[=\(:\),{}.*<>+\-\/^\[\]]/;function define(style,string,context){if(context){var split=string.split(' ');for(var i=0;i<split.length;i++){words[split[i]]={style:style,state:context}}}}
define('def','stack pgm view source debug nesting nolist',['inDataStep']);define('def','if while until for do do; end end; then else cancel',['inDataStep']);define('def','label format _n_ _error_',['inDataStep']);define('def','ALTER BUFNO BUFSIZE CNTLLEV COMPRESS DLDMGACTION ENCRYPT ENCRYPTKEY EXTENDOBSCOUNTER GENMAX GENNUM INDEX LABEL OBSBUF OUTREP PW PWREQ READ REPEMPTY REPLACE REUSE ROLE SORTEDBY SPILL TOBSNO TYPE WRITE FILECLOSE FIRSTOBS IN OBS POINTOBS WHERE WHEREUP IDXNAME IDXWHERE DROP KEEP RENAME',['inDataStep']);define('def','filevar finfo finv fipname fipnamel fipstate first firstobs floor',['inDataStep']);define('def','varfmt varinfmt varlabel varlen varname varnum varray varrayx vartype verify vformat vformatd vformatdx vformatn vformatnx vformatw vformatwx vformatx vinarray vinarrayx vinformat vinformatd vinformatdx vinformatn vinformatnx vinformatw vinformatwx vinformatx vlabel vlabelx vlength vlengthx vname vnamex vnferr vtype vtypex weekday',['inDataStep']);define('def','zipfips zipname zipnamel zipstate',['inDataStep']);define('def','put putc putn',['inDataStep']);define('builtin','data run',['inDataStep']);define('def','data',['inProc']);define('def','%if %end %end; %else %else; %do %do; %then',['inMacro']);define('builtin','proc run; quit; libname filename %macro %mend option options',['ALL']);define('def','footnote title libname ods',['ALL']);define('def','%let %put %global %sysfunc %eval ',['ALL']);define('variable','&sysbuffr &syscc &syscharwidth &syscmd &sysdate &sysdate9 &sysday &sysdevic &sysdmg &sysdsn &sysencoding &sysenv &syserr &syserrortext &sysfilrc &syshostname &sysindex &sysinfo &sysjobid &syslast &syslckrc &syslibrc &syslogapplname &sysmacroname &sysmenv &sysmsg &sysncpu &sysodspath &sysparm &syspbuff &sysprocessid &sysprocessname &sysprocname &sysrc &sysscp &sysscpl &sysscpl &syssite &sysstartid &sysstartname &systcpiphostname &systime &sysuserid &sysver &sysvlong &sysvlong4 &syswarningtext',['ALL']);define('def','source2 nosource2 page pageno pagesize',['ALL']);define('def','_all_ _character_ _cmd_ _freq_ _i_ _infile_ _last_ _msg_ _null_ _numeric_ _temporary_ _type_ abort abs addr adjrsq airy alpha alter altlog altprint and arcos array arsin as atan attrc attrib attrn authserver autoexec awscontrol awsdef awsmenu awsmenumerge awstitle backward band base betainv between blocksize blshift bnot bor brshift bufno bufsize bxor by byerr byline byte calculated call cards cards4 catcache cbufno cdf ceil center cexist change chisq cinv class cleanup close cnonct cntllev coalesce codegen col collate collin column comamid comaux1 comaux2 comdef compbl compound compress config continue convert cos cosh cpuid create cross crosstab css curobs cv daccdb daccdbsl daccsl daccsyd dacctab dairy datalines datalines4 datejul datepart datetime day dbcslang dbcstype dclose ddm delete delimiter depdb depdbsl depsl depsyd deptab dequote descending descript design= device dflang dhms dif digamma dim dinfo display distinct dkricond dkrocond dlm dnum do dopen doptname doptnum dread drop dropnote dsname dsnferr echo else emaildlg emailid emailpw emailserver emailsys encrypt end endsas engine eof eov erf erfc error errorcheck errors exist exp fappend fclose fcol fdelete feedback fetch fetchobs fexist fget file fileclose fileexist filefmt filename fileref  fmterr fmtsearch fnonct fnote font fontalias  fopen foptname foptnum force formatted formchar formdelim formdlim forward fpoint fpos fput fread frewind frlen from fsep fuzz fwrite gaminv gamma getoption getvarc getvarn go goto group gwindow hbar hbound helpenv helploc hms honorappearance hosthelp hostprint hour hpct html hvar ibessel ibr id if index indexc indexw initcmd initstmt inner input inputc inputn inr insert int intck intnx into intrr invaliddata irr is jbessel join juldate keep kentb kurtosis label lag last lbound leave left length levels lgamma lib  library libref line linesize link list log log10 log2 logpdf logpmf logsdf lostcard lowcase lrecl ls macro macrogen maps mautosource max maxdec maxr mdy mean measures median memtype merge merror min minute missing missover mlogic mod mode model modify month mopen mort mprint mrecall msglevel msymtabmax mvarsize myy n nest netpv new news nmiss no nobatch nobs nocaps nocardimage nocenter nocharcode nocmdmac nocol nocum nodate nodbcs nodetails nodmr nodms nodmsbatch nodup nodupkey noduplicates noechoauto noequals noerrorabend noexitwindows nofullstimer noicon noimplmac noint nolist noloadlist nomiss nomlogic nomprint nomrecall nomsgcase nomstored nomultenvappl nonotes nonumber noobs noovp nopad nopercent noprint noprintinit normal norow norsasuser nosetinit  nosplash nosymbolgen note notes notitle notitles notsorted noverbose noxsync noxwait npv null number numkeys nummousekeys nway obs  on open     order ordinal otherwise out outer outp= output over ovp p(1 5 10 25 50 75 90 95 99) pad pad2  paired parm parmcards path pathdll pathname pdf peek peekc pfkey pmf point poisson poke position printer probbeta probbnml probchi probf probgam probhypr probit probnegb probnorm probsig probt procleave prt ps  pw pwreq qtr quote r ranbin rancau ranexp rangam range ranks rannor ranpoi rantbl rantri ranuni read recfm register regr remote remove rename repeat replace resolve retain return reuse reverse rewind right round rsquare rtf rtrace rtraceloc s s2 samploc sasautos sascontrol sasfrscr sasmsg sasmstore sasscript sasuser saving scan sdf second select selection separated seq serror set setcomm setot sign simple sin sinh siteinfo skewness skip sle sls sortedby sortpgm sortseq sortsize soundex  spedis splashlocation split spool sqrt start std stderr stdin stfips stimer stname stnamel stop stopover subgroup subpopn substr sum sumwgt symbol symbolgen symget symput sysget sysin sysleave sysmsg sysparm sysprint sysprintfont sysprod sysrc system t table tables tan tanh tapeclose tbufsize terminal test then timepart tinv  tnonct to today tol tooldef totper transformout translate trantab tranwrd trigamma trim trimn trunc truncover type unformatted uniform union until upcase update user usericon uss validate value var  weight when where while wincharset window work workinit workterm write wsum xsync xwait yearcutoff yes yyq  min max',['inDataStep','inProc']);define('operator','and not ',['inDataStep','inProc']);function tokenize(stream,state){var ch=stream.next();if(ch==='/'&&stream.eat('*')){state.continueComment=!0;return"comment"}else if(state.continueComment===!0){if(ch==='*'&&stream.peek()==='/'){stream.next();state.continueComment=!1}else if(stream.skipTo('*')){stream.skipTo('*');stream.next();if(stream.eat('/'))
state.continueComment=!1}else{stream.skipToEnd()}
return"comment"}
var doubleOperator=ch+stream.peek();var myString=stream.string;var myRegexp=/(?:^\s*|[;]\s*)(\*.*?);/ig;var match=myRegexp.exec(myString);if(match!==null){if(match.index===0&&(stream.column()!==(match.index+match[0].length-1))){stream.backUp(stream.column());stream.skipTo(';');stream.next();return'comment'}else if(match.index+1<stream.column()&&stream.column()<match.index+match[0].length-1){stream.backUp(stream.column()-match.index-1);stream.skipTo(';');stream.next();return'comment'}}else if((ch==='"'||ch==="'")&&!state.continueString){state.continueString=ch
return"string"}else if(state.continueString){if(state.continueString==ch){state.continueString=null}else if(stream.skipTo(state.continueString)){stream.next();state.continueString=null}else{stream.skipToEnd()}
return"string"}else if(state.continueString!==null&&stream.eol()){stream.skipTo(state.continueString)||stream.skipToEnd();return"string"}else if(/[\d\.]/.test(ch)){if(ch===".")
stream.match(/^[0-9]+([eE][\-+]?[0-9]+)?/);else if(ch==="0")
stream.match(/^[xX][0-9a-fA-F]+/)||stream.match(/^0[0-7]+/);else stream.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/);return"number"}else if(isDoubleOperatorChar.test(ch+stream.peek())){stream.next();return"operator"}else if(isDoubleOperatorSym.hasOwnProperty(doubleOperator)){stream.next();if(stream.peek()===' ')
return isDoubleOperatorSym[doubleOperator.toLowerCase()]}else if(isSingleOperatorChar.test(ch)){return"operator"}
var word;if(stream.match(/[%&;\w]+/,!1)!=null){word=ch+stream.match(/[%&;\w]+/,!0);if(/&/.test(word))return'variable'}else{word=ch}
if(state.nextword){stream.match(/[\w]+/);if(stream.peek()==='.')stream.skipTo(' ');state.nextword=!1;return'variable-2'}
word=word.toLowerCase()
if(state.inDataStep){if(word==='run;'||stream.match(/run\s;/)){state.inDataStep=!1;return'builtin'}
if((word)&&stream.next()==='.'){if(/\w/.test(stream.peek()))return'variable-2';else return'variable'}
if(word&&words.hasOwnProperty(word)&&(words[word].state.indexOf("inDataStep")!==-1||words[word].state.indexOf("ALL")!==-1)){if(stream.start<stream.pos)
stream.backUp(stream.pos-stream.start);for(var i=0;i<word.length;++i)stream.next();return words[word].style}}
if(state.inProc){if(word==='run;'||word==='quit;'){state.inProc=!1;return'builtin'}
if(word&&words.hasOwnProperty(word)&&(words[word].state.indexOf("inProc")!==-1||words[word].state.indexOf("ALL")!==-1)){stream.match(/[\w]+/);return words[word].style}}
if(state.inMacro){if(word==='%mend'){if(stream.peek()===';')stream.next();state.inMacro=!1;return'builtin'}
if(word&&words.hasOwnProperty(word)&&(words[word].state.indexOf("inMacro")!==-1||words[word].state.indexOf("ALL")!==-1)){stream.match(/[\w]+/);return words[word].style}
return'atom'}
if(word&&words.hasOwnProperty(word)){stream.backUp(1);stream.match(/[\w]+/);if(word==='data'&&/=/.test(stream.peek())===!1){state.inDataStep=!0;state.nextword=!0;return'builtin'}
if(word==='proc'){state.inProc=!0;state.nextword=!0;return'builtin'}
if(word==='%macro'){state.inMacro=!0;state.nextword=!0;return'builtin'}
if(/title[1-9]/.test(word))return'def';if(word==='footnote'){stream.eat(/[1-9]/);return'def'}
if(state.inDataStep===!0&&words[word].state.indexOf("inDataStep")!==-1)
return words[word].style;if(state.inProc===!0&&words[word].state.indexOf("inProc")!==-1)
return words[word].style;if(state.inMacro===!0&&words[word].state.indexOf("inMacro")!==-1)
return words[word].style;if(words[word].state.indexOf("ALL")!==-1)
return words[word].style;return null}
return null}
return{startState:function(){return{inDataStep:!1,inProc:!1,inMacro:!1,nextword:!1,continueString:null,continueComment:!1}},token:function(stream,state){if(stream.eatSpace())return null;return tokenize(stream,state)},blockCommentStart:"/*",blockCommentEnd:"*/"}});CodeMirror.defineMIME("text/x-sas","sas")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("sass",function(config){function tokenRegexp(words){return new RegExp("^"+words.join("|"))}
var keywords=["true","false","null","auto"];var keywordsRegexp=new RegExp("^"+keywords.join("|"));var operators=["\\(","\\)","=",">","<","==",">=","<=","\\+","-","\\!=","/","\\*","%","and","or","not",";","\\{","\\}",":"];var opRegexp=tokenRegexp(operators);var pseudoElementsRegexp=/^::?[a-zA-Z_][\w\-]*/;function urlTokens(stream,state){var ch=stream.peek();if(ch===")"){stream.next();state.tokenizer=tokenBase;return"operator"}else if(ch==="("){stream.next();stream.eatSpace();return"operator"}else if(ch==="'"||ch==='"'){state.tokenizer=buildStringTokenizer(stream.next());return"string"}else{state.tokenizer=buildStringTokenizer(")",!1);return"string"}}
function comment(indentation,multiLine){return function(stream,state){if(stream.sol()&&stream.indentation()<=indentation){state.tokenizer=tokenBase;return tokenBase(stream,state)}
if(multiLine&&stream.skipTo("*/")){stream.next();stream.next();state.tokenizer=tokenBase}else{stream.skipToEnd()}
return"comment"}}
function buildStringTokenizer(quote,greedy){if(greedy==null){greedy=!0}
function stringTokenizer(stream,state){var nextChar=stream.next();var peekChar=stream.peek();var previousChar=stream.string.charAt(stream.pos-2);var endingString=((nextChar!=="\\"&&peekChar===quote)||(nextChar===quote&&previousChar!=="\\"));if(endingString){if(nextChar!==quote&&greedy){stream.next()}
state.tokenizer=tokenBase;return"string"}else if(nextChar==="#"&&peekChar==="{"){state.tokenizer=buildInterpolationTokenizer(stringTokenizer);stream.next();return"operator"}else{return"string"}}
return stringTokenizer}
function buildInterpolationTokenizer(currentTokenizer){return function(stream,state){if(stream.peek()==="}"){stream.next();state.tokenizer=currentTokenizer;return"operator"}else{return tokenBase(stream,state)}}}
function indent(state){if(state.indentCount==0){state.indentCount++;var lastScopeOffset=state.scopes[0].offset;var currentOffset=lastScopeOffset+config.indentUnit;state.scopes.unshift({offset:currentOffset})}}
function dedent(state){if(state.scopes.length==1)return;state.scopes.shift()}
function tokenBase(stream,state){var ch=stream.peek();if(stream.match("/*")){state.tokenizer=comment(stream.indentation(),!0);return state.tokenizer(stream,state)}
if(stream.match("//")){state.tokenizer=comment(stream.indentation(),!1);return state.tokenizer(stream,state)}
if(stream.match("#{")){state.tokenizer=buildInterpolationTokenizer(tokenBase);return"operator"}
if(ch==='"'||ch==="'"){stream.next();state.tokenizer=buildStringTokenizer(ch);return"string"}
if(!state.cursorHalf){if(ch==="."){stream.next();if(stream.match(/^[\w-]+/)){indent(state);return"atom"}else if(stream.peek()==="#"){indent(state);return"atom"}}
if(ch==="#"){stream.next();if(stream.match(/^[\w-]+/)){indent(state);return"atom"}
if(stream.peek()==="#"){indent(state);return"atom"}}
if(ch==="$"){stream.next();stream.eatWhile(/[\w-]/);return"variable-2"}
if(stream.match(/^-?[0-9\.]+/))
return"number";if(stream.match(/^(px|em|in)\b/))
return"unit";if(stream.match(keywordsRegexp))
return"keyword";if(stream.match(/^url/)&&stream.peek()==="("){state.tokenizer=urlTokens;return"atom"}
if(ch==="="){if(stream.match(/^=[\w-]+/)){indent(state);return"meta"}}
if(ch==="+"){if(stream.match(/^\+[\w-]+/)){return"variable-3"}}
if(ch==="@"){if(stream.match(/@extend/)){if(!stream.match(/\s*[\w]/))
dedent(state)}}
if(stream.match(/^@(else if|if|media|else|for|each|while|mixin|function)/)){indent(state);return"meta"}
if(ch==="@"){stream.next();stream.eatWhile(/[\w-]/);return"meta"}
if(stream.eatWhile(/[\w-]/)){if(stream.match(/ *: *[\w-\+\$#!\("']/,!1)){return"property"}else if(stream.match(/ *:/,!1)){indent(state);state.cursorHalf=1;return"atom"}else if(stream.match(/ *,/,!1)){return"atom"}else{indent(state);return"atom"}}
if(ch===":"){if(stream.match(pseudoElementsRegexp)){return"keyword"}
stream.next();state.cursorHalf=1;return"operator"}}else{if(ch==="#"){stream.next();if(stream.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/)){if(!stream.peek()){state.cursorHalf=0}
return"number"}}
if(stream.match(/^-?[0-9\.]+/)){if(!stream.peek()){state.cursorHalf=0}
return"number"}
if(stream.match(/^(px|em|in)\b/)){if(!stream.peek()){state.cursorHalf=0}
return"unit"}
if(stream.match(keywordsRegexp)){if(!stream.peek()){state.cursorHalf=0}
return"keyword"}
if(stream.match(/^url/)&&stream.peek()==="("){state.tokenizer=urlTokens;if(!stream.peek()){state.cursorHalf=0}
return"atom"}
if(ch==="$"){stream.next();stream.eatWhile(/[\w-]/);if(!stream.peek()){state.cursorHalf=0}
return"variable-3"}
if(ch==="!"){stream.next();if(!stream.peek()){state.cursorHalf=0}
return stream.match(/^[\w]+/)?"keyword":"operator"}
if(stream.match(opRegexp)){if(!stream.peek()){state.cursorHalf=0}
return"operator"}
if(stream.eatWhile(/[\w-]/)){if(!stream.peek()){state.cursorHalf=0}
return"attribute"}
if(!stream.peek()){state.cursorHalf=0;return null}}
if(stream.match(opRegexp))
return"operator";stream.next();return null}
function tokenLexer(stream,state){if(stream.sol())state.indentCount=0;var style=state.tokenizer(stream,state);var current=stream.current();if(current==="@return"||current==="}"){dedent(state)}
if(style!==null){var startOfToken=stream.pos-current.length;var withCurrentIndent=startOfToken+(config.indentUnit*state.indentCount);var newScopes=[];for(var i=0;i<state.scopes.length;i++){var scope=state.scopes[i];if(scope.offset<=withCurrentIndent)
newScopes.push(scope)}
state.scopes=newScopes}
return style}
return{startState:function(){return{tokenizer:tokenBase,scopes:[{offset:0,type:"sass"}],indentCount:0,cursorHalf:0,definedVars:[],definedMixins:[]}},token:function(stream,state){var style=tokenLexer(stream,state);state.lastToken={style:style,content:stream.current()};return style},indent:function(state){return state.scopes[0].offset}}});CodeMirror.defineMIME("text/x-sass","sass")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("scheme",function(){var BUILTIN="builtin",COMMENT="comment",STRING="string",ATOM="atom",NUMBER="number",BRACKET="bracket";var INDENT_WORD_SKIP=2;function makeKeywords(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var keywords=makeKeywords("λ case-lambda call/cc class define-class exit-handler field import inherit init-field interface let*-values let-values let/ec mixin opt-lambda override protect provide public rename require require-for-syntax syntax syntax-case syntax-error unit/sig unless when with-syntax and begin call-with-current-continuation call-with-input-file call-with-output-file case cond define define-syntax delay do dynamic-wind else for-each if lambda let let* let-syntax letrec letrec-syntax map or syntax-rules abs acos angle append apply asin assoc assq assv atan boolean? caar cadr call-with-input-file call-with-output-file call-with-values car cdddar cddddr cdr ceiling char->integer char-alphabetic? char-ci<=? char-ci<? char-ci=? char-ci>=? char-ci>? char-downcase char-lower-case? char-numeric? char-ready? char-upcase char-upper-case? char-whitespace? char<=? char<? char=? char>=? char>? char? close-input-port close-output-port complex? cons cos current-input-port current-output-port denominator display eof-object? eq? equal? eqv? eval even? exact->inexact exact? exp expt #f floor force gcd imag-part inexact->exact inexact? input-port? integer->char integer? interaction-environment lcm length list list->string list->vector list-ref list-tail list? load log magnitude make-polar make-rectangular make-string make-vector max member memq memv min modulo negative? newline not null-environment null? number->string number? numerator odd? open-input-file open-output-file output-port? pair? peek-char port? positive? procedure? quasiquote quote quotient rational? rationalize read read-char real-part real? remainder reverse round scheme-report-environment set! set-car! set-cdr! sin sqrt string string->list string->number string->symbol string-append string-ci<=? string-ci<? string-ci=? string-ci>=? string-ci>? string-copy string-fill! string-length string-ref string-set! string<=? string<? string=? string>=? string>? string? substring symbol->string symbol? #t tan transcript-off transcript-on truncate values vector vector->list vector-fill! vector-length vector-ref vector-set! with-input-from-file with-output-to-file write write-char zero?");var indentKeys=makeKeywords("define let letrec let* lambda");function stateStack(indent,type,prev){this.indent=indent;this.type=type;this.prev=prev}
function pushStack(state,indent,type){state.indentStack=new stateStack(indent,type,state.indentStack)}
function popStack(state){state.indentStack=state.indentStack.prev}
var binaryMatcher=new RegExp(/^(?:[-+]i|[-+][01]+#*(?:\/[01]+#*)?i|[-+]?[01]+#*(?:\/[01]+#*)?@[-+]?[01]+#*(?:\/[01]+#*)?|[-+]?[01]+#*(?:\/[01]+#*)?[-+](?:[01]+#*(?:\/[01]+#*)?)?i|[-+]?[01]+#*(?:\/[01]+#*)?)(?=[()\s;"]|$)/i);var octalMatcher=new RegExp(/^(?:[-+]i|[-+][0-7]+#*(?:\/[0-7]+#*)?i|[-+]?[0-7]+#*(?:\/[0-7]+#*)?@[-+]?[0-7]+#*(?:\/[0-7]+#*)?|[-+]?[0-7]+#*(?:\/[0-7]+#*)?[-+](?:[0-7]+#*(?:\/[0-7]+#*)?)?i|[-+]?[0-7]+#*(?:\/[0-7]+#*)?)(?=[()\s;"]|$)/i);var hexMatcher=new RegExp(/^(?:[-+]i|[-+][\da-f]+#*(?:\/[\da-f]+#*)?i|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?@[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?[-+](?:[\da-f]+#*(?:\/[\da-f]+#*)?)?i|[-+]?[\da-f]+#*(?:\/[\da-f]+#*)?)(?=[()\s;"]|$)/i);var decimalMatcher=new RegExp(/^(?:[-+]i|[-+](?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)i|[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)@[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)|[-+]?(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)[-+](?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*)?i|(?:(?:(?:\d+#+\.?#*|\d+\.\d*#*|\.\d+#*|\d+)(?:[esfdl][-+]?\d+)?)|\d+#*\/\d+#*))(?=[()\s;"]|$)/i);function isBinaryNumber(stream){return stream.match(binaryMatcher)}
function isOctalNumber(stream){return stream.match(octalMatcher)}
function isDecimalNumber(stream,backup){if(backup===!0){stream.backUp(1)}
return stream.match(decimalMatcher)}
function isHexNumber(stream){return stream.match(hexMatcher)}
return{startState:function(){return{indentStack:null,indentation:0,mode:!1,sExprComment:!1}},token:function(stream,state){if(state.indentStack==null&&stream.sol()){state.indentation=stream.indentation()}
if(stream.eatSpace()){return null}
var returnType=null;switch(state.mode){case "string":var next,escaped=!1;while((next=stream.next())!=null){if(next=="\""&&!escaped){state.mode=!1;break}
escaped=!escaped&&next=="\\"}
returnType=STRING;break;case "comment":var next,maybeEnd=!1;while((next=stream.next())!=null){if(next=="#"&&maybeEnd){state.mode=!1;break}
maybeEnd=(next=="|")}
returnType=COMMENT;break;case "s-expr-comment":state.mode=!1;if(stream.peek()=="("||stream.peek()=="["){state.sExprComment=0}else{stream.eatWhile(/[^/s]/);returnType=COMMENT;break}
default:var ch=stream.next();if(ch=="\""){state.mode="string";returnType=STRING}else if(ch=="'"){returnType=ATOM}else if(ch=='#'){if(stream.eat("|")){state.mode="comment";returnType=COMMENT}else if(stream.eat(/[tf]/i)){returnType=ATOM}else if(stream.eat(';')){state.mode="s-expr-comment";returnType=COMMENT}else{var numTest=null,hasExactness=!1,hasRadix=!0;if(stream.eat(/[ei]/i)){hasExactness=!0}else{stream.backUp(1)}
if(stream.match(/^#b/i)){numTest=isBinaryNumber}else if(stream.match(/^#o/i)){numTest=isOctalNumber}else if(stream.match(/^#x/i)){numTest=isHexNumber}else if(stream.match(/^#d/i)){numTest=isDecimalNumber}else if(stream.match(/^[-+0-9.]/,!1)){hasRadix=!1;numTest=isDecimalNumber}else if(!hasExactness){stream.eat('#')}
if(numTest!=null){if(hasRadix&&!hasExactness){stream.match(/^#[ei]/i)}
if(numTest(stream))
returnType=NUMBER}}}else if(/^[-+0-9.]/.test(ch)&&isDecimalNumber(stream,!0)){returnType=NUMBER}else if(ch==";"){stream.skipToEnd();returnType=COMMENT}else if(ch=="("||ch=="["){var keyWord='';var indentTemp=stream.column(),letter;while((letter=stream.eat(/[^\s\(\[\;\)\]]/))!=null){keyWord+=letter}
if(keyWord.length>0&&indentKeys.propertyIsEnumerable(keyWord)){pushStack(state,indentTemp+INDENT_WORD_SKIP,ch)}else{stream.eatSpace();if(stream.eol()||stream.peek()==";"){pushStack(state,indentTemp+1,ch)}else{pushStack(state,indentTemp+stream.current().length,ch)}}
stream.backUp(stream.current().length-1);if(typeof state.sExprComment=="number")state.sExprComment++;returnType=BRACKET}else if(ch==")"||ch=="]"){returnType=BRACKET;if(state.indentStack!=null&&state.indentStack.type==(ch==")"?"(":"[")){popStack(state);if(typeof state.sExprComment=="number"){if(--state.sExprComment==0){returnType=COMMENT;state.sExprComment=!1}}}}else{stream.eatWhile(/[\w\$_\-!$%&*+\.\/:<=>?@\^~]/);if(keywords&&keywords.propertyIsEnumerable(stream.current())){returnType=BUILTIN}else returnType="variable"}}
return(typeof state.sExprComment=="number")?COMMENT:returnType},indent:function(state){if(state.indentStack==null)return state.indentation;return state.indentStack.indent},closeBrackets:{pairs:"()[]{}\"\""},lineComment:";;"}});CodeMirror.defineMIME("text/x-scheme","scheme")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode('shell',function(){var words={};function define(style,string){var split=string.split(' ');for(var i=0;i<split.length;i++){words[split[i]]=style}};define('atom','true false');define('keyword','if then do else elif while until for in esac fi fin '+'fil done exit set unset export function');define('builtin','ab awk bash beep cat cc cd chown chmod chroot clear cp '+'curl cut diff echo find gawk gcc get git grep kill killall ln ls make '+'mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh '+'shopt shred source sort sleep ssh start stop su sudo tee telnet top '+'touch vi vim wall wc wget who write yes zsh');function tokenBase(stream,state){if(stream.eatSpace())return null;var sol=stream.sol();var ch=stream.next();if(ch==='\\'){stream.next();return null}
if(ch==='\''||ch==='"'||ch==='`'){state.tokens.unshift(tokenString(ch));return tokenize(stream,state)}
if(ch==='#'){if(sol&&stream.eat('!')){stream.skipToEnd();return'meta'}
stream.skipToEnd();return'comment'}
if(ch==='$'){state.tokens.unshift(tokenDollar);return tokenize(stream,state)}
if(ch==='+'||ch==='='){return'operator'}
if(ch==='-'){stream.eat('-');stream.eatWhile(/\w/);return'attribute'}
if(/\d/.test(ch)){stream.eatWhile(/\d/);if(stream.eol()||!/\w/.test(stream.peek())){return'number'}}
stream.eatWhile(/[\w-]/);var cur=stream.current();if(stream.peek()==='='&&/\w+/.test(cur))return'def';return words.hasOwnProperty(cur)?words[cur]:null}
function tokenString(quote){return function(stream,state){var next,end=!1,escaped=!1;while((next=stream.next())!=null){if(next===quote&&!escaped){end=!0;break}
if(next==='$'&&!escaped&&quote!=='\''){escaped=!0;stream.backUp(1);state.tokens.unshift(tokenDollar);break}
escaped=!escaped&&next==='\\'}
if(end||!escaped){state.tokens.shift()}
return(quote==='`'||quote===')'?'quote':'string')}};var tokenDollar=function(stream,state){if(state.tokens.length>1)stream.eat('$');var ch=stream.next(),hungry=/\w/;if(ch==='{')hungry=/[^}]/;if(ch==='('){state.tokens[0]=tokenString(')');return tokenize(stream,state)}
if(!/\d/.test(ch)){stream.eatWhile(hungry);stream.eat('}')}
state.tokens.shift();return'def'};function tokenize(stream,state){return(state.tokens[0]||tokenBase)(stream,state)};return{startState:function(){return{tokens:[]}},token:function(stream,state){return tokenize(stream,state)},lineComment:'#',fold:"brace"}});CodeMirror.defineMIME('text/x-sh','shell')})}catch(e){};try{(function(){var mode=CodeMirror.getMode({},"shell");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("var","text [def $var] text");MT("varBraces","text[def ${var}]text");MT("varVar","text [def $a$b] text");MT("varBracesVarBraces","text[def ${a}${b}]text");MT("singleQuotedVar","[string 'text $var text']");MT("singleQuotedVarBraces","[string 'text ${var} text']");MT("doubleQuotedVar",'[string "text ][def $var][string  text"]');MT("doubleQuotedVarBraces",'[string "text][def ${var}][string text"]');MT("doubleQuotedVarPunct",'[string "text ][def $@][string  text"]');MT("doubleQuotedVarVar",'[string "][def $a$b][string "]');MT("doubleQuotedVarBracesVarBraces",'[string "][def ${a}${b}][string "]');MT("notAString","text\\'text");MT("escapes","outside\\'\\\"\\`\\\\[string \"inside\\`\\'\\\"\\\\`\\$notAVar\"]outside\\$\\(notASubShell\\)");MT("subshell","[builtin echo] [quote $(whoami)] s log, stardate [quote `date`].");MT("doubleQuotedSubshell","[builtin echo] [string \"][quote $(whoami)][string 's log, stardate `date`.\"]");MT("hashbang","[meta #!/bin/bash]");MT("comment","text [comment # Blurb]");MT("numbers","[number 0] [number 1] [number 2]");MT("keywords","[keyword while] [atom true]; [keyword do]","  [builtin sleep] [number 3]","[keyword done]");MT("options","[builtin ls] [attribute -l] [attribute --human-readable]");MT("operator","[def var][operator =]value")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("sieve",function(config){function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var keywords=words("if elsif else stop require");var atoms=words("true false not");var indentUnit=config.indentUnit;function tokenBase(stream,state){var ch=stream.next();if(ch=="/"&&stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state)}
if(ch==='#'){stream.skipToEnd();return"comment"}
if(ch=="\""){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(ch=="("){state._indent.push("(");state._indent.push("{");return null}
if(ch==="{"){state._indent.push("{");return null}
if(ch==")"){state._indent.pop();state._indent.pop()}
if(ch==="}"){state._indent.pop();return null}
if(ch==",")
return null;if(ch==";")
return null;if(/[{}\(\),;]/.test(ch))
return null;if(/\d/.test(ch)){stream.eatWhile(/[\d]/);stream.eat(/[KkMmGg]/);return"number"}
if(ch==":"){stream.eatWhile(/[a-zA-Z_]/);stream.eatWhile(/[a-zA-Z0-9_]/);return"operator"}
stream.eatWhile(/\w/);var cur=stream.current();if((cur=="text")&&stream.eat(":")){state.tokenize=tokenMultiLineString;return"string"}
if(keywords.propertyIsEnumerable(cur))
return"keyword";if(atoms.propertyIsEnumerable(cur))
return"atom";return null}
function tokenMultiLineString(stream,state){state._multiLineString=!0;if(!stream.sol()){stream.eatSpace();if(stream.peek()=="#"){stream.skipToEnd();return"comment"}
stream.skipToEnd();return"string"}
if((stream.next()==".")&&(stream.eol())){state._multiLineString=!1;state.tokenize=tokenBase}
return"string"}
function tokenCComment(stream,state){var maybeEnd=!1,ch;while((ch=stream.next())!=null){if(maybeEnd&&ch=="/"){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return"comment"}
function tokenString(quote){return function(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped)
break;escaped=!escaped&&ch=="\\"}
if(!escaped)state.tokenize=tokenBase;return"string"}}
return{startState:function(base){return{tokenize:tokenBase,baseIndent:base||0,_indent:[]}},token:function(stream,state){if(stream.eatSpace())
return null;return(state.tokenize||tokenBase)(stream,state)},indent:function(state,_textAfter){var length=state._indent.length;if(_textAfter&&(_textAfter[0]=="}"))
length--;if(length<0)
length=0;return length*indentUnit},electricChars:"}"}});CodeMirror.defineMIME("application/sieve","sieve")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../ruby/ruby"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../htmlmixed/htmlmixed","../ruby/ruby"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("slim",function(config){var htmlMode=CodeMirror.getMode(config,{name:"htmlmixed"});var rubyMode=CodeMirror.getMode(config,"ruby");var modes={html:htmlMode,ruby:rubyMode};var embedded={ruby:"ruby",javascript:"javascript",css:"text/css",sass:"text/x-sass",scss:"text/x-scss",less:"text/x-less",styl:"text/x-styl",coffee:"coffeescript",asciidoc:"text/x-asciidoc",markdown:"text/x-markdown",textile:"text/x-textile",creole:"text/x-creole",wiki:"text/x-wiki",mediawiki:"text/x-mediawiki",rdoc:"text/x-rdoc",builder:"text/x-builder",nokogiri:"text/x-nokogiri",erb:"application/x-erb"};var embeddedRegexp=function(map){var arr=[];for(var key in map)arr.push(key);return new RegExp("^("+arr.join('|')+"):")}(embedded);var styleMap={"commentLine":"comment","slimSwitch":"operator special","slimTag":"tag","slimId":"attribute def","slimClass":"attribute qualifier","slimAttribute":"attribute","slimSubmode":"keyword special","closeAttributeTag":null,"slimDoctype":null,"lineContinuation":null};var closing={"{":"}","[":"]","(":")"};var nameStartChar="_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD";var nameChar=nameStartChar+"\\-0-9\xB7\u0300-\u036F\u203F-\u2040";var nameRegexp=new RegExp("^[:"+nameStartChar+"](?::["+nameChar+"]|["+nameChar+"]*)");var attributeNameRegexp=new RegExp("^[:"+nameStartChar+"][:\\."+nameChar+"]*(?=\\s*=)");var wrappedAttributeNameRegexp=new RegExp("^[:"+nameStartChar+"][:\\."+nameChar+"]*");var classNameRegexp=/^\.-?[_a-zA-Z]+[\w\-]*/;var classIdRegexp=/^#[_a-zA-Z]+[\w\-]*/;function backup(pos,tokenize,style){var restore=function(stream,state){state.tokenize=tokenize;if(stream.pos<pos){stream.pos=pos;return style}
return state.tokenize(stream,state)};return function(stream,state){state.tokenize=restore;return tokenize(stream,state)}}
function maybeBackup(stream,state,pat,offset,style){var cur=stream.current();var idx=cur.search(pat);if(idx>-1){state.tokenize=backup(stream.pos,state.tokenize,style);stream.backUp(cur.length-idx-offset)}
return style}
function continueLine(state,column){state.stack={parent:state.stack,style:"continuation",indented:column,tokenize:state.line};state.line=state.tokenize}
function finishContinue(state){if(state.line==state.tokenize){state.line=state.stack.tokenize;state.stack=state.stack.parent}}
function lineContinuable(column,tokenize){return function(stream,state){finishContinue(state);if(stream.match(/^\\$/)){continueLine(state,column);return"lineContinuation"}
var style=tokenize(stream,state);if(stream.eol()&&stream.current().match(/(?:^|[^\\])(?:\\\\)*\\$/)){stream.backUp(1)}
return style}}
function commaContinuable(column,tokenize){return function(stream,state){finishContinue(state);var style=tokenize(stream,state);if(stream.eol()&&stream.current().match(/,$/)){continueLine(state,column)}
return style}}
function rubyInQuote(endQuote,tokenize){return function(stream,state){var ch=stream.peek();if(ch==endQuote&&state.rubyState.tokenize.length==1){stream.next();state.tokenize=tokenize;return"closeAttributeTag"}else{return ruby(stream,state)}}}
function startRubySplat(tokenize){var rubyState;var runSplat=function(stream,state){if(state.rubyState.tokenize.length==1&&!state.rubyState.context.prev){stream.backUp(1);if(stream.eatSpace()){state.rubyState=rubyState;state.tokenize=tokenize;return tokenize(stream,state)}
stream.next()}
return ruby(stream,state)};return function(stream,state){rubyState=state.rubyState;state.rubyState=CodeMirror.startState(rubyMode);state.tokenize=runSplat;return ruby(stream,state)}}
function ruby(stream,state){return rubyMode.token(stream,state.rubyState)}
function htmlLine(stream,state){if(stream.match(/^\\$/)){return"lineContinuation"}
return html(stream,state)}
function html(stream,state){if(stream.match(/^#\{/)){state.tokenize=rubyInQuote("}",state.tokenize);return null}
return maybeBackup(stream,state,/[^\\]#\{/,1,htmlMode.token(stream,state.htmlState))}
function startHtmlLine(lastTokenize){return function(stream,state){var style=htmlLine(stream,state);if(stream.eol())state.tokenize=lastTokenize;return style}}
function startHtmlMode(stream,state,offset){state.stack={parent:state.stack,style:"html",indented:stream.column()+offset,tokenize:state.line};state.line=state.tokenize=html;return null}
function comment(stream,state){stream.skipToEnd();return state.stack.style}
function commentMode(stream,state){state.stack={parent:state.stack,style:"comment",indented:state.indented+1,tokenize:state.line};state.line=comment;return comment(stream,state)}
function attributeWrapper(stream,state){if(stream.eat(state.stack.endQuote)){state.line=state.stack.line;state.tokenize=state.stack.tokenize;state.stack=state.stack.parent;return null}
if(stream.match(wrappedAttributeNameRegexp)){state.tokenize=attributeWrapperAssign;return"slimAttribute"}
stream.next();return null}
function attributeWrapperAssign(stream,state){if(stream.match(/^==?/)){state.tokenize=attributeWrapperValue;return null}
return attributeWrapper(stream,state)}
function attributeWrapperValue(stream,state){var ch=stream.peek();if(ch=='"'||ch=="\'"){state.tokenize=readQuoted(ch,"string",!0,!1,attributeWrapper);stream.next();return state.tokenize(stream,state)}
if(ch=='['){return startRubySplat(attributeWrapper)(stream,state)}
if(stream.match(/^(true|false|nil)\b/)){state.tokenize=attributeWrapper;return"keyword"}
return startRubySplat(attributeWrapper)(stream,state)}
function startAttributeWrapperMode(state,endQuote,tokenize){state.stack={parent:state.stack,style:"wrapper",indented:state.indented+1,tokenize:tokenize,line:state.line,endQuote:endQuote};state.line=state.tokenize=attributeWrapper;return null}
function sub(stream,state){if(stream.match(/^#\{/)){state.tokenize=rubyInQuote("}",state.tokenize);return null}
var subStream=new CodeMirror.StringStream(stream.string.slice(state.stack.indented),stream.tabSize);subStream.pos=stream.pos-state.stack.indented;subStream.start=stream.start-state.stack.indented;subStream.lastColumnPos=stream.lastColumnPos-state.stack.indented;subStream.lastColumnValue=stream.lastColumnValue-state.stack.indented;var style=state.subMode.token(subStream,state.subState);stream.pos=subStream.pos+state.stack.indented;return style}
function firstSub(stream,state){state.stack.indented=stream.column();state.line=state.tokenize=sub;return state.tokenize(stream,state)}
function createMode(mode){var query=embedded[mode];var spec=CodeMirror.mimeModes[query];if(spec){return CodeMirror.getMode(config,spec)}
var factory=CodeMirror.modes[query];if(factory){return factory(config,{name:query})}
return CodeMirror.getMode(config,"null")}
function getMode(mode){if(!modes.hasOwnProperty(mode)){return modes[mode]=createMode(mode)}
return modes[mode]}
function startSubMode(mode,state){var subMode=getMode(mode);var subState=CodeMirror.startState(subMode);state.subMode=subMode;state.subState=subState;state.stack={parent:state.stack,style:"sub",indented:state.indented+1,tokenize:state.line};state.line=state.tokenize=firstSub;return"slimSubmode"}
function doctypeLine(stream,_state){stream.skipToEnd();return"slimDoctype"}
function startLine(stream,state){var ch=stream.peek();if(ch=='<'){return(state.tokenize=startHtmlLine(state.tokenize))(stream,state)}
if(stream.match(/^[|']/)){return startHtmlMode(stream,state,1)}
if(stream.match(/^\/(!|\[\w+])?/)){return commentMode(stream,state)}
if(stream.match(/^(-|==?[<>]?)/)){state.tokenize=lineContinuable(stream.column(),commaContinuable(stream.column(),ruby));return"slimSwitch"}
if(stream.match(/^doctype\b/)){state.tokenize=doctypeLine;return"keyword"}
var m=stream.match(embeddedRegexp);if(m){return startSubMode(m[1],state)}
return slimTag(stream,state)}
function slim(stream,state){if(state.startOfLine){return startLine(stream,state)}
return slimTag(stream,state)}
function slimTag(stream,state){if(stream.eat('*')){state.tokenize=startRubySplat(slimTagExtras);return null}
if(stream.match(nameRegexp)){state.tokenize=slimTagExtras;return"slimTag"}
return slimClass(stream,state)}
function slimTagExtras(stream,state){if(stream.match(/^(<>?|><?)/)){state.tokenize=slimClass;return null}
return slimClass(stream,state)}
function slimClass(stream,state){if(stream.match(classIdRegexp)){state.tokenize=slimClass;return"slimId"}
if(stream.match(classNameRegexp)){state.tokenize=slimClass;return"slimClass"}
return slimAttribute(stream,state)}
function slimAttribute(stream,state){if(stream.match(/^([\[\{\(])/)){return startAttributeWrapperMode(state,closing[RegExp.$1],slimAttribute)}
if(stream.match(attributeNameRegexp)){state.tokenize=slimAttributeAssign;return"slimAttribute"}
if(stream.peek()=='*'){stream.next();state.tokenize=startRubySplat(slimContent);return null}
return slimContent(stream,state)}
function slimAttributeAssign(stream,state){if(stream.match(/^==?/)){state.tokenize=slimAttributeValue;return null}
return slimAttribute(stream,state)}
function slimAttributeValue(stream,state){var ch=stream.peek();if(ch=='"'||ch=="\'"){state.tokenize=readQuoted(ch,"string",!0,!1,slimAttribute);stream.next();return state.tokenize(stream,state)}
if(ch=='['){return startRubySplat(slimAttribute)(stream,state)}
if(ch==':'){return startRubySplat(slimAttributeSymbols)(stream,state)}
if(stream.match(/^(true|false|nil)\b/)){state.tokenize=slimAttribute;return"keyword"}
return startRubySplat(slimAttribute)(stream,state)}
function slimAttributeSymbols(stream,state){stream.backUp(1);if(stream.match(/^[^\s],(?=:)/)){state.tokenize=startRubySplat(slimAttributeSymbols);return null}
stream.next();return slimAttribute(stream,state)}
function readQuoted(quote,style,embed,unescaped,nextTokenize){return function(stream,state){finishContinue(state);var fresh=stream.current().length==0;if(stream.match(/^\\$/,fresh)){if(!fresh)return style;continueLine(state,state.indented);return"lineContinuation"}
if(stream.match(/^#\{/,fresh)){if(!fresh)return style;state.tokenize=rubyInQuote("}",state.tokenize);return null}
var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&(unescaped||!escaped)){state.tokenize=nextTokenize;break}
if(embed&&ch=="#"&&!escaped){if(stream.eat("{")){stream.backUp(2);break}}
escaped=!escaped&&ch=="\\"}
if(stream.eol()&&escaped){stream.backUp(1)}
return style}}
function slimContent(stream,state){if(stream.match(/^==?/)){state.tokenize=ruby;return"slimSwitch"}
if(stream.match(/^\/$/)){state.tokenize=slim;return null}
if(stream.match(/^:/)){state.tokenize=slimTag;return"slimSwitch"}
startHtmlMode(stream,state,0);return state.tokenize(stream,state)}
var mode={startState:function(){var htmlState=CodeMirror.startState(htmlMode);var rubyState=CodeMirror.startState(rubyMode);return{htmlState:htmlState,rubyState:rubyState,stack:null,last:null,tokenize:slim,line:slim,indented:0}},copyState:function(state){return{htmlState:CodeMirror.copyState(htmlMode,state.htmlState),rubyState:CodeMirror.copyState(rubyMode,state.rubyState),subMode:state.subMode,subState:state.subMode&&CodeMirror.copyState(state.subMode,state.subState),stack:state.stack,last:state.last,tokenize:state.tokenize,line:state.line}},token:function(stream,state){if(stream.sol()){state.indented=stream.indentation();state.startOfLine=!0;state.tokenize=state.line;while(state.stack&&state.stack.indented>state.indented&&state.last!="slimSubmode"){state.line=state.tokenize=state.stack.tokenize;state.stack=state.stack.parent;state.subMode=null;state.subState=null}}
if(stream.eatSpace())return null;var style=state.tokenize(stream,state);state.startOfLine=!1;if(style)state.last=style;return styleMap.hasOwnProperty(style)?styleMap[style]:style},blankLine:function(state){if(state.subMode&&state.subMode.blankLine){return state.subMode.blankLine(state.subState)}},innerMode:function(state){if(state.subMode)return{state:state.subState,mode:state.subMode};return{state:state,mode:mode}}};return mode},"htmlmixed","ruby");CodeMirror.defineMIME("text/x-slim","slim");CodeMirror.defineMIME("application/x-slim","slim")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({tabSize:4,indentUnit:2},"slim");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("elementName","[tag h1] Hey There");MT("oneElementPerLine","[tag h1] Hey There .h2");MT("idShortcut","[attribute&def #test] Hey There");MT("tagWithIdShortcuts","[tag h1][attribute&def #test] Hey There");MT("classShortcut","[attribute&qualifier .hello] Hey There");MT("tagWithIdAndClassShortcuts","[tag h1][attribute&def #test][attribute&qualifier .hello] Hey There");MT("docType","[keyword doctype] xml");MT("comment","[comment / Hello WORLD]");MT("notComment","[tag h1] This is not a / comment ");MT("attributes","[tag a]([attribute title]=[string \"test\"]) [attribute href]=[string \"link\"]}");MT("multiLineAttributes","[tag a]([attribute title]=[string \"test\"]","  ) [attribute href]=[string \"link\"]}");MT("htmlCode","[tag&bracket <][tag h1][tag&bracket >]Title[tag&bracket </][tag h1][tag&bracket >]");MT("rubyBlock","[operator&special =][variable-2 @item]");MT("selectorRubyBlock","[tag a][attribute&qualifier .test][operator&special =] [variable-2 @item]");MT("nestedRubyBlock","[tag a]","  [operator&special =][variable puts] [string \"test\"]");MT("multilinePlaintext","[tag p]","  | Hello,","    World");MT("multilineRuby","[tag p]","  [comment /# this is a comment]","     [comment and this is a comment too]","  | Date/Time","  [operator&special -] [variable now] [operator =] [tag DateTime][operator .][property now]","  [tag strong][operator&special =] [variable now]","  [operator&special -] [keyword if] [variable now] [operator >] [tag DateTime][operator .][property parse]([string \"December 31, 2006\"])","     [operator&special =][string \"Happy\"]","     [operator&special =][string \"Belated\"]","     [operator&special =][string \"Birthday\"]");MT("multilineComment","[comment /]","  [comment Multiline]","  [comment Comment]");MT("hamlAfterRubyTag","[attribute&qualifier .block]","  [tag strong][operator&special =] [variable now]","  [attribute&qualifier .test]","     [operator&special =][variable now]","  [attribute&qualifier .right]");MT("stretchedRuby","[operator&special =] [variable puts] [string \"Hello\"],","   [string \"World\"]");MT("interpolationInHashAttribute","[tag div]{[attribute id] = [string \"]#{[variable test]}[string _]#{[variable ting]}[string \"]} test");MT("interpolationInHTMLAttribute","[tag div]([attribute title]=[string \"]#{[variable test]}[string _]#{[variable ting]()}[string \"]) Test")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode('smalltalk',function(config){var specialChars=/[+\-\/\\*~<>=@%|&?!.,:;^]/;var keywords=/true|false|nil|self|super|thisContext/;var Context=function(tokenizer,parent){this.next=tokenizer;this.parent=parent};var Token=function(name,context,eos){this.name=name;this.context=context;this.eos=eos};var State=function(){this.context=new Context(next,null);this.expectVariable=!0;this.indentation=0;this.userIndentationDelta=0};State.prototype.userIndent=function(indentation){this.userIndentationDelta=indentation>0?(indentation/config.indentUnit-this.indentation):0};var next=function(stream,context,state){var token=new Token(null,context,!1);var aChar=stream.next();if(aChar==='"'){token=nextComment(stream,new Context(nextComment,context))}else if(aChar==='\''){token=nextString(stream,new Context(nextString,context))}else if(aChar==='#'){if(stream.peek()==='\''){stream.next();token=nextSymbol(stream,new Context(nextSymbol,context))}else{if(stream.eatWhile(/[^\s.{}\[\]()]/))
token.name='string-2';else token.name='meta'}}else if(aChar==='$'){if(stream.next()==='<'){stream.eatWhile(/[^\s>]/);stream.next()}
token.name='string-2'}else if(aChar==='|'&&state.expectVariable){token.context=new Context(nextTemporaries,context)}else if(/[\[\]{}()]/.test(aChar)){token.name='bracket';token.eos=/[\[{(]/.test(aChar);if(aChar==='['){state.indentation++}else if(aChar===']'){state.indentation=Math.max(0,state.indentation-1)}}else if(specialChars.test(aChar)){stream.eatWhile(specialChars);token.name='operator';token.eos=aChar!==';'}else if(/\d/.test(aChar)){stream.eatWhile(/[\w\d]/);token.name='number'}else if(/[\w_]/.test(aChar)){stream.eatWhile(/[\w\d_]/);token.name=state.expectVariable?(keywords.test(stream.current())?'keyword':'variable'):null}else{token.eos=state.expectVariable}
return token};var nextComment=function(stream,context){stream.eatWhile(/[^"]/);return new Token('comment',stream.eat('"')?context.parent:context,!0)};var nextString=function(stream,context){stream.eatWhile(/[^']/);return new Token('string',stream.eat('\'')?context.parent:context,!1)};var nextSymbol=function(stream,context){stream.eatWhile(/[^']/);return new Token('string-2',stream.eat('\'')?context.parent:context,!1)};var nextTemporaries=function(stream,context){var token=new Token(null,context,!1);var aChar=stream.next();if(aChar==='|'){token.context=context.parent;token.eos=!0}else{stream.eatWhile(/[^|]/);token.name='variable'}
return token};return{startState:function(){return new State},token:function(stream,state){state.userIndent(stream.indentation());if(stream.eatSpace()){return null}
var token=state.context.next(stream,state.context,state);state.context=token.context;state.expectVariable=token.eos;return token.name},blankLine:function(state){state.userIndent(0)},indent:function(state,textAfter){var i=state.context.next===next&&textAfter&&textAfter.charAt(0)===']'?-1:state.userIndentationDelta;return(state.indentation+i)*config.indentUnit},electricChars:']'}});CodeMirror.defineMIME('text/x-stsrc',{name:'smalltalk'})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("smarty",function(config,parserConf){var rightDelimiter=parserConf.rightDelimiter||"}";var leftDelimiter=parserConf.leftDelimiter||"{";var version=parserConf.version||2;var baseMode=CodeMirror.getMode(config,parserConf.baseMode||"null");var keyFunctions=["debug","extends","function","include","literal"];var regs={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/};var last;function cont(style,lastType){last=lastType;return style}
function chain(stream,state,parser){state.tokenize=parser;return parser(stream,state)}
function doesNotCount(stream,pos){if(pos==null)pos=stream.pos;return version===3&&leftDelimiter=="{"&&(pos==stream.string.length||/\s/.test(stream.string.charAt(pos)))}
function tokenTop(stream,state){var string=stream.string;for(var scan=stream.pos;;){var nextMatch=string.indexOf(leftDelimiter,scan);scan=nextMatch+leftDelimiter.length;if(nextMatch==-1||!doesNotCount(stream,nextMatch+leftDelimiter.length))break}
if(nextMatch==stream.pos){stream.match(leftDelimiter);if(stream.eat("*")){return chain(stream,state,tokenBlock("comment","*"+rightDelimiter))}else{state.depth++;state.tokenize=tokenSmarty;last="startTag";return"tag"}}
if(nextMatch>-1)stream.string=string.slice(0,nextMatch);var token=baseMode.token(stream,state.base);if(nextMatch>-1)stream.string=string;return token}
function tokenSmarty(stream,state){if(stream.match(rightDelimiter,!0)){if(version===3){state.depth--;if(state.depth<=0){state.tokenize=tokenTop}}else{state.tokenize=tokenTop}
return cont("tag",null)}
if(stream.match(leftDelimiter,!0)){state.depth++;return cont("tag","startTag")}
var ch=stream.next();if(ch=="$"){stream.eatWhile(regs.validIdentifier);return cont("variable-2","variable")}else if(ch=="|"){return cont("operator","pipe")}else if(ch=="."){return cont("operator","property")}else if(regs.stringChar.test(ch)){state.tokenize=tokenAttribute(ch);return cont("string","string")}else if(regs.operatorChars.test(ch)){stream.eatWhile(regs.operatorChars);return cont("operator","operator")}else if(ch=="["||ch=="]"){return cont("bracket","bracket")}else if(ch=="("||ch==")"){return cont("bracket","operator")}else if(/\d/.test(ch)){stream.eatWhile(/\d/);return cont("number","number")}else{if(state.last=="variable"){if(ch=="@"){stream.eatWhile(regs.validIdentifier);return cont("property","property")}else if(ch=="|"){stream.eatWhile(regs.validIdentifier);return cont("qualifier","modifier")}}else if(state.last=="pipe"){stream.eatWhile(regs.validIdentifier);return cont("qualifier","modifier")}else if(state.last=="whitespace"){stream.eatWhile(regs.validIdentifier);return cont("attribute","modifier")}if(state.last=="property"){stream.eatWhile(regs.validIdentifier);return cont("property",null)}else if(/\s/.test(ch)){last="whitespace";return null}
var str="";if(ch!="/"){str+=ch}
var c=null;while(c=stream.eat(regs.validIdentifier)){str+=c}
for(var i=0,j=keyFunctions.length;i<j;i++){if(keyFunctions[i]==str){return cont("keyword","keyword")}}
if(/\s/.test(ch)){return null}
return cont("tag","tag")}}
function tokenAttribute(quote){return function(stream,state){var prevChar=null;var currChar=null;while(!stream.eol()){currChar=stream.peek();if(stream.next()==quote&&prevChar!=='\\'){state.tokenize=tokenSmarty;break}
prevChar=currChar}
return"string"}}
function tokenBlock(style,terminator){return function(stream,state){while(!stream.eol()){if(stream.match(terminator)){state.tokenize=tokenTop;break}
stream.next()}
return style}}
return{startState:function(){return{base:CodeMirror.startState(baseMode),tokenize:tokenTop,last:null,depth:0}},copyState:function(state){return{base:CodeMirror.copyState(baseMode,state.base),tokenize:state.tokenize,last:state.last,depth:state.depth}},innerMode:function(state){if(state.tokenize==tokenTop)
return{mode:baseMode,state:state.base}},token:function(stream,state){var style=state.tokenize(stream,state);state.last=last;return style},indent:function(state,text){if(state.tokenize==tokenTop&&baseMode.indent)
return baseMode.indent(state.base,text);else return CodeMirror.Pass},blockCommentStart:leftDelimiter+"*",blockCommentEnd:"*"+rightDelimiter}});CodeMirror.defineMIME("text/x-smarty","smarty")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("solr",function(){"use strict";var isStringChar=/[^\s\|\!\+\-\*\?\~\^\&\:\(\)\[\]\{\}\^\"\\]/;var isOperatorChar=/[\|\!\+\-\*\?\~\^\&]/;var isOperatorString=/^(OR|AND|NOT|TO)$/i;function isNumber(word){return parseFloat(word,10).toString()===word}
function tokenString(quote){return function(stream,state){var escaped=!1,next;while((next=stream.next())!=null){if(next==quote&&!escaped)break;escaped=!escaped&&next=="\\"}
if(!escaped)state.tokenize=tokenBase;return"string"}}
function tokenOperator(operator){return function(stream,state){var style="operator";if(operator=="+")
style+=" positive";else if(operator=="-")
style+=" negative";else if(operator=="|")
stream.eat(/\|/);else if(operator=="&")
stream.eat(/\&/);else if(operator=="^")
style+=" boost";state.tokenize=tokenBase;return style}}
function tokenWord(ch){return function(stream,state){var word=ch;while((ch=stream.peek())&&ch.match(isStringChar)!=null){word+=stream.next()}
state.tokenize=tokenBase;if(isOperatorString.test(word))
return"operator";else if(isNumber(word))
return"number";else if(stream.peek()==":")
return"field";else return"string"}}
function tokenBase(stream,state){var ch=stream.next();if(ch=='"')
state.tokenize=tokenString(ch);else if(isOperatorChar.test(ch))
state.tokenize=tokenOperator(ch);else if(isStringChar.test(ch))
state.tokenize=tokenWord(ch);return(state.tokenize!=tokenBase)?state.tokenize(stream,state):null}
return{startState:function(){return{tokenize:tokenBase}},token:function(stream,state){if(stream.eatSpace())return null;return state.tokenize(stream,state)}}});CodeMirror.defineMIME("text/x-solr","solr")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../htmlmixed/htmlmixed"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var indentingTags=["template","literal","msg","fallbackmsg","let","if","elseif","else","switch","case","default","foreach","ifempty","for","call","param","deltemplate","delcall","log"];CodeMirror.defineMode("soy",function(config){var textMode=CodeMirror.getMode(config,"text/plain");var modes={html:CodeMirror.getMode(config,{name:"text/html",multilineTagIndentFactor:2,multilineTagIndentPastTag:!1}),attributes:textMode,text:textMode,uri:textMode,css:CodeMirror.getMode(config,"text/css"),js:CodeMirror.getMode(config,{name:"text/javascript",statementIndent:2*config.indentUnit})};function last(array){return array[array.length-1]}
function tokenUntil(stream,state,untilRegExp){var oldString=stream.string;var match=untilRegExp.exec(oldString.substr(stream.pos));if(match){stream.string=oldString.substr(0,stream.pos+match.index)}
var result=stream.hideFirstChars(state.indent,function(){return state.localMode.token(stream,state.localState)});stream.string=oldString;return result}
return{startState:function(){return{kind:[],kindTag:[],soyState:[],indent:0,localMode:modes.html,localState:CodeMirror.startState(modes.html)}},copyState:function(state){return{tag:state.tag,kind:state.kind.concat([]),kindTag:state.kindTag.concat([]),soyState:state.soyState.concat([]),indent:state.indent,localMode:state.localMode,localState:CodeMirror.copyState(state.localMode,state.localState)}},token:function(stream,state){var match;switch(last(state.soyState)){case "comment":if(stream.match(/^.*?\*\//)){state.soyState.pop()}else{stream.skipToEnd()}
return"comment";case "variable":if(stream.match(/^}/)){state.indent-=2*config.indentUnit;state.soyState.pop();return"variable-2"}
stream.next();return null;case "tag":if(stream.match(/^\/?}/)){if(state.tag=="/template"||state.tag=="/deltemplate")state.indent=0;else state.indent-=(stream.current()=="/}"||indentingTags.indexOf(state.tag)==-1?2:1)*config.indentUnit;state.soyState.pop();return"keyword"}else if(stream.match(/^([\w?]+)(?==)/)){if(stream.current()=="kind"&&(match=stream.match(/^="([^"]+)/,!1))){var kind=match[1];state.kind.push(kind);state.kindTag.push(state.tag);state.localMode=modes[kind]||modes.html;state.localState=CodeMirror.startState(state.localMode)}
return"attribute"}else if(stream.match(/^"/)){state.soyState.push("string");return"string"}
stream.next();return null;case "literal":if(stream.match(/^(?=\{\/literal})/)){state.indent-=config.indentUnit;state.soyState.pop();return this.token(stream,state)}
return tokenUntil(stream,state,/\{\/literal}/);case "string":var match=stream.match(/^.*?("|\\[\s\S])/);if(!match){stream.skipToEnd()}else if(match[1]=="\""){state.soyState.pop()}
return"string"}
if(stream.match(/^\/\*/)){state.soyState.push("comment");return"comment"}else if(stream.match(stream.sol()?/^\s*\/\/.*/:/^\s+\/\/.*/)){return"comment"}else if(stream.match(/^\{\$[\w?]*/)){state.indent+=2*config.indentUnit;state.soyState.push("variable");return"variable-2"}else if(stream.match(/^\{literal}/)){state.indent+=config.indentUnit;state.soyState.push("literal");return"keyword"}else if(match=stream.match(/^\{([\/@\\]?[\w?]*)/)){if(match[1]!="/switch")
state.indent+=(/^(\/|(else|elseif|case|default)$)/.test(match[1])&&state.tag!="switch"?1:2)*config.indentUnit;state.tag=match[1];if(state.tag=="/"+last(state.kindTag)){state.kind.pop();state.kindTag.pop();state.localMode=modes[last(state.kind)]||modes.html;state.localState=CodeMirror.startState(state.localMode)}
state.soyState.push("tag");return"keyword"}
return tokenUntil(stream,state,/\{|\s+\/\/|\/\*/)},indent:function(state,textAfter){var indent=state.indent,top=last(state.soyState);if(top=="comment")return CodeMirror.Pass;if(top=="literal"){if(/^\{\/literal}/.test(textAfter))indent-=config.indentUnit}else{if(/^\s*\{\/(template|deltemplate)\b/.test(textAfter))return 0;if(/^\{(\/|(fallbackmsg|elseif|else|ifempty)\b)/.test(textAfter))indent-=config.indentUnit;if(state.tag!="switch"&&/^\{(case|default)\b/.test(textAfter))indent-=config.indentUnit;if(/^\{\/switch\b/.test(textAfter))indent-=config.indentUnit}
if(indent&&state.localMode.indent)
indent+=state.localMode.indent(state.localState,textAfter);return indent},innerMode:function(state){if(state.soyState.length&&last(state.soyState)!="literal")return null;else return{state:state.localState,mode:state.localMode}},electricInput:/^\s*\{(\/|\/template|\/deltemplate|\/switch|fallbackmsg|elseif|else|case|default|ifempty|\/literal\})$/,lineComment:"//",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",fold:"indent"}},"htmlmixed");CodeMirror.registerHelper("hintWords","soy",indentingTags.concat(["delpackage","namespace","alias","print","css","debugger"]));CodeMirror.defineMIME("text/x-soy","soy")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("sparql",function(config){var indentUnit=config.indentUnit;var curPunc;function wordRegexp(words){return new RegExp("^(?:"+words.join("|")+")$","i")}
var ops=wordRegexp(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]);var keywords=wordRegexp(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load"]);var operatorChars=/[*+\-<>=&|\^\/!\?]/;function tokenBase(stream,state){var ch=stream.next();curPunc=null;if(ch=="$"||ch=="?"){if(ch=="?"&&stream.match(/\s/,!1)){return"operator"}
stream.match(/^[\w\d]*/);return"variable-2"}else if(ch=="<"&&!stream.match(/^[\s\u00a0=]/,!1)){stream.match(/^[^\s\u00a0>]*>?/);return"atom"}else if(ch=="\""||ch=="'"){state.tokenize=tokenLiteral(ch);return state.tokenize(stream,state)}else if(/[{}\(\),\.;\[\]]/.test(ch)){curPunc=ch;return"bracket"}else if(ch=="#"){stream.skipToEnd();return"comment"}else if(operatorChars.test(ch)){stream.eatWhile(operatorChars);return"operator"}else if(ch==":"){stream.eatWhile(/[\w\d\._\-]/);return"atom"}else if(ch=="@"){stream.eatWhile(/[a-z\d\-]/i);return"meta"}else{stream.eatWhile(/[_\w\d]/);if(stream.eat(":")){stream.eatWhile(/[\w\d_\-]/);return"atom"}
var word=stream.current();if(ops.test(word))
return"builtin";else if(keywords.test(word))
return"keyword";else return"variable"}}
function tokenLiteral(quote){return function(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){state.tokenize=tokenBase;break}
escaped=!escaped&&ch=="\\"}
return"string"}}
function pushContext(state,type,col){state.context={prev:state.context,indent:state.indent,col:col,type:type}}
function popContext(state){state.indent=state.context.indent;state.context=state.context.prev}
return{startState:function(){return{tokenize:tokenBase,context:null,indent:0,col:0}},token:function(stream,state){if(stream.sol()){if(state.context&&state.context.align==null)state.context.align=!1;state.indent=stream.indentation()}
if(stream.eatSpace())return null;var style=state.tokenize(stream,state);if(style!="comment"&&state.context&&state.context.align==null&&state.context.type!="pattern"){state.context.align=!0}
if(curPunc=="(")pushContext(state,")",stream.column());else if(curPunc=="[")pushContext(state,"]",stream.column());else if(curPunc=="{")pushContext(state,"}",stream.column());else if(/[\]\}\)]/.test(curPunc)){while(state.context&&state.context.type=="pattern")popContext(state);if(state.context&&curPunc==state.context.type){popContext(state);if(curPunc=="}"&&state.context&&state.context.type=="pattern")
popContext(state)}}else if(curPunc=="."&&state.context&&state.context.type=="pattern")popContext(state);else if(/atom|string|variable/.test(style)&&state.context){if(/[\}\]]/.test(state.context.type))
pushContext(state,"pattern",stream.column());else if(state.context.type=="pattern"&&!state.context.align){state.context.align=!0;state.context.col=stream.column()}}
return style},indent:function(state,textAfter){var firstChar=textAfter&&textAfter.charAt(0);var context=state.context;if(/[\]\}]/.test(firstChar))
while(context&&context.type=="pattern")context=context.prev;var closing=context&&firstChar==context.type;if(!context)
return 0;else if(context.type=="pattern")
return context.col;else if(context.align)
return context.col+(closing?0:1);else return context.indent+(closing?0:indentUnit)},lineComment:"#"}});CodeMirror.defineMIME("application/sparql-query","sparql")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("spreadsheet",function(){return{startState:function(){return{stringType:null,stack:[]}},token:function(stream,state){if(!stream)return;if(state.stack.length===0){if((stream.peek()=='"')||(stream.peek()=="'")){state.stringType=stream.peek();stream.next();state.stack.unshift("string")}}
switch(state.stack[0]){case "string":while(state.stack[0]==="string"&&!stream.eol()){if(stream.peek()===state.stringType){stream.next();state.stack.shift()}else if(stream.peek()==="\\"){stream.next();stream.next()}else{stream.match(/^.[^\\\"\']*/)}}
return"string";case "characterClass":while(state.stack[0]==="characterClass"&&!stream.eol()){if(!(stream.match(/^[^\]\\]+/)||stream.match(/^\\./)))
state.stack.shift()}
return"operator"}
var peek=stream.peek();switch(peek){case "[":stream.next();state.stack.unshift("characterClass");return"bracket";case ":":stream.next();return"operator";case "\\":if(stream.match(/\\[a-z]+/))return"string-2";else{stream.next();return"atom"}
case ".":case ",":case ";":case "*":case "-":case "+":case "^":case "<":case "/":case "=":stream.next();return"atom";case "$":stream.next();return"builtin"}
if(stream.match(/\d+/)){if(stream.match(/^\w+/))return"error";return"number"}else if(stream.match(/^[a-zA-Z_]\w*/)){if(stream.match(/(?=[\(.])/,!1))return"keyword";return"variable-2"}else if(["[","]","(",")","{","}"].indexOf(peek)!=-1){stream.next();return"bracket"}else if(!stream.eatSpace()){stream.next()}
return null}}});CodeMirror.defineMIME("text/x-spreadsheet","spreadsheet")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("sql",function(config,parserConfig){"use strict";var client=parserConfig.client||{},atoms=parserConfig.atoms||{"false":!0,"true":!0,"null":!0},builtin=parserConfig.builtin||{},keywords=parserConfig.keywords||{},operatorChars=parserConfig.operatorChars||/^[*+\-%<>!=&|~^]/,support=parserConfig.support||{},hooks=parserConfig.hooks||{},dateSQL=parserConfig.dateSQL||{"date":!0,"time":!0,"timestamp":!0};function tokenBase(stream,state){var ch=stream.next();if(hooks[ch]){var result=hooks[ch](stream,state);if(result!==!1)return result}
if(support.hexNumber==!0&&((ch=="0"&&stream.match(/^[xX][0-9a-fA-F]+/))||(ch=="x"||ch=="X")&&stream.match(/^'[0-9a-fA-F]+'/))){return"number"}else if(support.binaryNumber==!0&&(((ch=="b"||ch=="B")&&stream.match(/^'[01]+'/))||(ch=="0"&&stream.match(/^b[01]+/)))){return"number"}else if(ch.charCodeAt(0)>47&&ch.charCodeAt(0)<58){stream.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/);support.decimallessFloat==!0&&stream.eat('.');return"number"}else if(ch=="?"&&(stream.eatSpace()||stream.eol()||stream.eat(";"))){return"variable-3"}else if(ch=="'"||(ch=='"'&&support.doubleQuote)){state.tokenize=tokenLiteral(ch);return state.tokenize(stream,state)}else if((((support.nCharCast==!0&&(ch=="n"||ch=="N"))||(support.charsetCast==!0&&ch=="_"&&stream.match(/[a-z][a-z0-9]*/i)))&&(stream.peek()=="'"||stream.peek()=='"'))){return"keyword"}else if(/^[\(\),\;\[\]]/.test(ch)){return null}else if(support.commentSlashSlash&&ch=="/"&&stream.eat("/")){stream.skipToEnd();return"comment"}else if((support.commentHash&&ch=="#")||(ch=="-"&&stream.eat("-")&&(!support.commentSpaceRequired||stream.eat(" ")))){stream.skipToEnd();return"comment"}else if(ch=="/"&&stream.eat("*")){state.tokenize=tokenComment;return state.tokenize(stream,state)}else if(ch=="."){if(support.zerolessFloat==!0&&stream.match(/^(?:\d+(?:e[+-]?\d+)?)/i)){return"number"}
if(support.ODBCdotTable==!0&&stream.match(/^[a-zA-Z_]+/)){return"variable-2"}}else if(operatorChars.test(ch)){stream.eatWhile(operatorChars);return null}else if(ch=='{'&&(stream.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||stream.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/))){return"number"}else{stream.eatWhile(/^[_\w\d]/);var word=stream.current().toLowerCase();if(dateSQL.hasOwnProperty(word)&&(stream.match(/^( )+'[^']*'/)||stream.match(/^( )+"[^"]*"/)))
return"number";if(atoms.hasOwnProperty(word))return"atom";if(builtin.hasOwnProperty(word))return"builtin";if(keywords.hasOwnProperty(word))return"keyword";if(client.hasOwnProperty(word))return"string-2";return null}}
function tokenLiteral(quote){return function(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){state.tokenize=tokenBase;break}
escaped=!escaped&&ch=="\\"}
return"string"}}
function tokenComment(stream,state){while(!0){if(stream.skipTo("*")){stream.next();if(stream.eat("/")){state.tokenize=tokenBase;break}}else{stream.skipToEnd();break}}
return"comment"}
function pushContext(stream,state,type){state.context={prev:state.context,indent:stream.indentation(),col:stream.column(),type:type}}
function popContext(state){state.indent=state.context.indent;state.context=state.context.prev}
return{startState:function(){return{tokenize:tokenBase,context:null}},token:function(stream,state){if(stream.sol()){if(state.context&&state.context.align==null)
state.context.align=!1}
if(stream.eatSpace())return null;var style=state.tokenize(stream,state);if(style=="comment")return style;if(state.context&&state.context.align==null)
state.context.align=!0;var tok=stream.current();if(tok=="(")
pushContext(stream,state,")");else if(tok=="[")
pushContext(stream,state,"]");else if(state.context&&state.context.type==tok)
popContext(state);return style},indent:function(state,textAfter){var cx=state.context;if(!cx)return CodeMirror.Pass;var closing=textAfter.charAt(0)==cx.type;if(cx.align)return cx.col+(closing?0:1);else return cx.indent+(closing?0:config.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:support.commentSlashSlash?"//":support.commentHash?"#":null}});(function(){"use strict";function hookIdentifier(stream){var ch;while((ch=stream.next())!=null){if(ch=="`"&&!stream.eat("`"))return"variable-2"}
stream.backUp(stream.current().length-1);return stream.eatWhile(/\w/)?"variable-2":null}
function hookVar(stream){if(stream.eat("@")){stream.match(/^session\./);stream.match(/^local\./);stream.match(/^global\./)}
if(stream.eat("'")){stream.match(/^.*'/);return"variable-2"}else if(stream.eat('"')){stream.match(/^.*"/);return"variable-2"}else if(stream.eat("`")){stream.match(/^.*`/);return"variable-2"}else if(stream.match(/^[0-9a-zA-Z$\.\_]+/)){return"variable-2"}
return null};function hookClient(stream){if(stream.eat("N")){return"atom"}
return stream.match(/^[a-zA-Z.#!?]/)?"variable-2":null}
var sqlKeywords="alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit ";function set(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
CodeMirror.defineMIME("text/x-sql",{name:"sql",keywords:set(sqlKeywords+"begin"),builtin:set("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable doubleQuote binaryNumber hexNumber")});CodeMirror.defineMIME("text/x-mssql",{name:"sql",client:set("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:set(sqlKeywords+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare"),builtin:set("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:set("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":hookVar}});CodeMirror.defineMIME("text/x-mysql",{name:"sql",client:set("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:set(sqlKeywords+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:set("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":hookVar,"`":hookIdentifier,"\\":hookClient}});CodeMirror.defineMIME("text/x-mariadb",{name:"sql",client:set("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:set(sqlKeywords+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:set("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":hookVar,"`":hookIdentifier,"\\":hookClient}});CodeMirror.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:set("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),builtin:set("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:set("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:set("commentSlashSlash decimallessFloat"),hooks:{}});CodeMirror.defineMIME("text/x-plsql",{name:"sql",client:set("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:set("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),builtin:set("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least length lengthb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),operatorChars:/^[*+\-%<>!=~]/,dateSQL:set("date time timestamp"),support:set("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")});CodeMirror.defineMIME("text/x-hive",{name:"sql",keywords:set("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),builtin:set("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:set("date timestamp"),support:set("ODBCdotTable doubleQuote binaryNumber hexNumber")});CodeMirror.defineMIME("text/x-pgsql",{name:"sql",client:set("source"),keywords:set(sqlKeywords+"a abort abs absent absolute access according action ada add admin after aggregate all allocate also always analyse analyze any are array array_agg array_max_cardinality asensitive assertion assignment asymmetric at atomic attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli binary bit_length blob blocked bom both breadth c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain characteristics characters character_length character_set_catalog character_set_name character_set_schema char_length check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column columns column_name command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constraint constraints constraint_catalog constraint_name constraint_schema constructor contains content continue control conversion convert copy corr corresponding cost covar_pop covar_samp cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datetime_interval_code datetime_interval_precision day db deallocate dec declare default defaults deferrable deferred defined definer degree delimiter delimiters dense_rank depth deref derived describe descriptor deterministic diagnostics dictionary disable discard disconnect dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain dynamic dynamic_function dynamic_function_code each element else empty enable encoding encrypted end end-exec end_frame end_partition enforced enum equals escape event every except exception exclude excluding exclusive exec execute exists exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreign fortran forward found frame_row free freeze fs full function functions fusion g general generated get global go goto grant granted greatest grouping groups handler header hex hierarchy hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import including increment indent index indexes indicator inherit inherits initially inline inner inout input insensitive instance instantiable instead integrity intersect intersection invoker isnull isolation k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like_regex link listen ln load local localtime localtimestamp location locator lock locked logged lower m map mapping match matched materialized max maxvalue max_cardinality member merge message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized nothing notify notnull nowait nth_value ntile null nullable nullif nulls number object occurrences_regex octets octet_length of off offset oids old only open operator option options ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password percent percentile_cont percentile_disc percent_rank period permission placing plans pli policy portion position position_regex power precedes preceding prepare prepared preserve primary prior privileges procedural procedure program public quote range rank read reads reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns revoke right role rollback rollup routine routine_catalog routine_name routine_schema row rows row_count row_number rule savepoint scale schema schema_name scope scope_catalog scope_name scope_schema scroll search second section security selective self sensitive sequence sequences serializable server server_name session session_user setof sets share show similar simple size skip snapshot some source space specific specifictype specific_name sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset substring substring_regex succeeds sum symmetric sysid system system_time system_user t tables tablesample tablespace table_name temp template temporary then ties timezone_hour timezone_minute to token top_level_count trailing transaction transactions_committed transactions_rolled_back transaction_active transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted unique unknown unlink unlisten unlogged unnamed unnest until untyped upper uri usage user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of varbinary variadic var_pop var_samp verbose version versioning view views volatile when whenever whitespace width_bucket window within work wrapper write xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes loop repeat"),builtin:set("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:set("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:set("date time timestamp"),support:set("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast")});CodeMirror.defineMIME("text/x-gql",{name:"sql",keywords:set("ancestor and asc by contains desc descendant distinct from group has in is limit offset on order select superset where"),atoms:set("false true"),builtin:set("blob datetime first key __key__ string integer double boolean null"),operatorChars:/^[*+\-%<>!=]/})}())})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("stex",function(){"use strict";function pushCommand(state,command){state.cmdState.push(command)}
function peekCommand(state){if(state.cmdState.length>0){return state.cmdState[state.cmdState.length-1]}else{return null}}
function popCommand(state){var plug=state.cmdState.pop();if(plug){plug.closeBracket()}}
function getMostPowerful(state){var context=state.cmdState;for(var i=context.length-1;i>=0;i--){var plug=context[i];if(plug.name=="DEFAULT"){continue}
return plug}
return{styleIdentifier:function(){return null}}}
function addPluginPattern(pluginName,cmdStyle,styles){return function(){this.name=pluginName;this.bracketNo=0;this.style=cmdStyle;this.styles=styles;this.argument=null;this.styleIdentifier=function(){return this.styles[this.bracketNo-1]||null};this.openBracket=function(){this.bracketNo++;return"bracket"};this.closeBracket=function(){}}}
var plugins={};plugins.importmodule=addPluginPattern("importmodule","tag",["string","builtin"]);plugins.documentclass=addPluginPattern("documentclass","tag",["","atom"]);plugins.usepackage=addPluginPattern("usepackage","tag",["atom"]);plugins.begin=addPluginPattern("begin","tag",["atom"]);plugins.end=addPluginPattern("end","tag",["atom"]);plugins.DEFAULT=function(){this.name="DEFAULT";this.style="tag";this.styleIdentifier=this.openBracket=this.closeBracket=function(){}};function setState(state,f){state.f=f}
function normal(source,state){var plug;if(source.match(/^\\[a-zA-Z@]+/)){var cmdName=source.current().slice(1);plug=plugins[cmdName]||plugins.DEFAULT;plug=new plug();pushCommand(state,plug);setState(state,beginParams);return plug.style}
if(source.match(/^\\[$&%#{}_]/)){return"tag"}
if(source.match(/^\\[,;!\/\\]/)){return"tag"}
if(source.match("\\[")){setState(state,function(source,state){return inMathMode(source,state,"\\]")});return"keyword"}
if(source.match("$$")){setState(state,function(source,state){return inMathMode(source,state,"$$")});return"keyword"}
if(source.match("$")){setState(state,function(source,state){return inMathMode(source,state,"$")});return"keyword"}
var ch=source.next();if(ch=="%"){source.skipToEnd();return"comment"}else if(ch=='}'||ch==']'){plug=peekCommand(state);if(plug){plug.closeBracket(ch);setState(state,beginParams)}else{return"error"}
return"bracket"}else if(ch=='{'||ch=='['){plug=plugins.DEFAULT;plug=new plug();pushCommand(state,plug);return"bracket"}else if(/\d/.test(ch)){source.eatWhile(/[\w.%]/);return"atom"}else{source.eatWhile(/[\w\-_]/);plug=getMostPowerful(state);if(plug.name=='begin'){plug.argument=source.current()}
return plug.styleIdentifier()}}
function inMathMode(source,state,endModeSeq){if(source.eatSpace()){return null}
if(source.match(endModeSeq)){setState(state,normal);return"keyword"}
if(source.match(/^\\[a-zA-Z@]+/)){return"tag"}
if(source.match(/^[a-zA-Z]+/)){return"variable-2"}
if(source.match(/^\\[$&%#{}_]/)){return"tag"}
if(source.match(/^\\[,;!\/]/)){return"tag"}
if(source.match(/^[\^_&]/)){return"tag"}
if(source.match(/^[+\-<>|=,\/@!*:;'"`~#?]/)){return null}
if(source.match(/^(\d+\.\d*|\d*\.\d+|\d+)/)){return"number"}
var ch=source.next();if(ch=="{"||ch=="}"||ch=="["||ch=="]"||ch=="("||ch==")"){return"bracket"}
if(ch=="%"){source.skipToEnd();return"comment"}
return"error"}
function beginParams(source,state){var ch=source.peek(),lastPlug;if(ch=='{'||ch=='['){lastPlug=peekCommand(state);lastPlug.openBracket(ch);source.eat(ch);setState(state,normal);return"bracket"}
if(/[ \t\r]/.test(ch)){source.eat(ch);return null}
setState(state,normal);popCommand(state);return normal(source,state)}
return{startState:function(){return{cmdState:[],f:normal}},copyState:function(s){return{cmdState:s.cmdState.slice(),f:s.f}},token:function(stream,state){return state.f(stream,state)},blankLine:function(state){state.f=normal;state.cmdState.length=0},lineComment:"%"}});CodeMirror.defineMIME("text/x-stex","stex");CodeMirror.defineMIME("text/x-latex","stex")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({tabSize:4},"stex");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("word","foo");MT("twoWords","foo bar");MT("beginEndDocument","[tag \\begin][bracket {][atom document][bracket }]","[tag \\end][bracket {][atom document][bracket }]");MT("beginEndEquation","[tag \\begin][bracket {][atom equation][bracket }]","  E=mc^2","[tag \\end][bracket {][atom equation][bracket }]");MT("beginModule","[tag \\begin][bracket {][atom module][bracket }[[]]]");MT("beginModuleId","[tag \\begin][bracket {][atom module][bracket }[[]id=bbt-size[bracket ]]]");MT("importModule","[tag \\importmodule][bracket [[][string b-b-t][bracket ]]{][builtin b-b-t][bracket }]");MT("importModulePath","[tag \\importmodule][bracket [[][tag \\KWARCslides][bracket {][string dmath/en/cardinality][bracket }]]{][builtin card][bracket }]");MT("psForPDF","[tag \\PSforPDF][bracket [[][atom 1][bracket ]]{]#1[bracket }]");MT("comment","[comment % foo]");MT("tagComment","[tag \\item][comment % bar]");MT("commentTag"," [comment % \\item]");MT("commentLineBreak","[comment %]","foo");MT("tagErrorCurly","[tag \\begin][error }][bracket {]");MT("tagErrorSquare","[tag \\item][error ]]][bracket {]");MT("commentCurly","[comment % }]");MT("tagHash","the [tag \\#] key");MT("tagNumber","a [tag \\$][atom 5] stetson");MT("tagPercent","[atom 100][tag \\%] beef");MT("tagAmpersand","L [tag \\&] N");MT("tagUnderscore","foo[tag \\_]bar");MT("tagBracketOpen","[tag \\emph][bracket {][tag \\{][bracket }]");MT("tagBracketClose","[tag \\emph][bracket {][tag \\}][bracket }]");MT("tagLetterNumber","section [tag \\S][atom 1]");MT("textTagNumber","para [tag \\P][atom 2]");MT("thinspace","x[tag \\,]y");MT("thickspace","x[tag \\;]y");MT("negativeThinspace","x[tag \\!]y");MT("periodNotSentence","J.\\ L.\\ is");MT("periodSentence","X[tag \\@]. The");MT("italicCorrection","[bracket {][tag \\em] If[tag \\/][bracket }] I");MT("tagBracket","[tag \\newcommand][bracket {][tag \\pop][bracket }]");MT("inlineMathTagFollowedByNumber","[keyword $][tag \\pi][number 2][keyword $]");MT("inlineMath","[keyword $][number 3][variable-2 x][tag ^][number 2.45]-[tag \\sqrt][bracket {][tag \\$\\alpha][bracket }] = [number 2][keyword $] other text");MT("displayMath","More [keyword $$]\t[variable-2 S][tag ^][variable-2 n][tag \\sum] [variable-2 i][keyword $$] other text");MT("mathWithComment","[keyword $][variable-2 x] [comment % $]","[variable-2 y][keyword $] other text");MT("lineBreakArgument","[tag \\\\][bracket [[][atom 1cm][bracket ]]]")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("stylus",function(config){var indentUnit=config.indentUnit,tagKeywords=keySet(tagKeywords_),tagVariablesRegexp=/^(a|b|i|s|col|em)$/i,propertyKeywords=keySet(propertyKeywords_),nonStandardPropertyKeywords=keySet(nonStandardPropertyKeywords_),valueKeywords=keySet(valueKeywords_),colorKeywords=keySet(colorKeywords_),documentTypes=keySet(documentTypes_),documentTypesRegexp=wordRegexp(documentTypes_),mediaFeatures=keySet(mediaFeatures_),mediaTypes=keySet(mediaTypes_),fontProperties=keySet(fontProperties_),operatorsRegexp=/^\s*([.]{2,3}|&&|\|\||\*\*|[?!=:]?=|[-+*\/%<>]=?|\?:|\~)/,wordOperatorKeywordsRegexp=wordRegexp(wordOperatorKeywords_),blockKeywords=keySet(blockKeywords_),vendorPrefixesRegexp=new RegExp(/^\-(moz|ms|o|webkit)-/i),commonAtoms=keySet(commonAtoms_),firstWordMatch="",states={},ch,style,type,override;function tokenBase(stream,state){firstWordMatch=stream.string.match(/(^[\w-]+\s*=\s*$)|(^\s*[\w-]+\s*=\s*[\w-])|(^\s*(\.|#|@|\$|\&|\[|\d|\+|::?|\{|\>|~|\/)?\s*[\w-]*([a-z0-9-]|\*|\/\*)(\(|,)?)/);state.context.line.firstWord=firstWordMatch?firstWordMatch[0].replace(/^\s*/,""):"";state.context.line.indent=stream.indentation();ch=stream.peek();if(stream.match("//")){stream.skipToEnd();return["comment","comment"]}
if(stream.match("/*")){state.tokenize=tokenCComment;return tokenCComment(stream,state)}
if(ch=="\""||ch=="'"){stream.next();state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(ch=="@"){stream.next();stream.eatWhile(/[\w\\-]/);return["def",stream.current()]}
if(ch=="#"){stream.next();if(stream.match(/^[0-9a-f]{6}|[0-9a-f]{3}/i)){return["atom","atom"]}
if(stream.match(/^[a-z][\w-]*/i)){return["builtin","hash"]}}
if(stream.match(vendorPrefixesRegexp)){return["meta","vendor-prefixes"]}
if(stream.match(/^-?[0-9]?\.?[0-9]/)){stream.eatWhile(/[a-z%]/i);return["number","unit"]}
if(ch=="!"){stream.next();return[stream.match(/^(important|optional)/i)?"keyword":"operator","important"]}
if(ch=="."&&stream.match(/^\.[a-z][\w-]*/i)){return["qualifier","qualifier"]}
if(stream.match(documentTypesRegexp)){if(stream.peek()=="(")state.tokenize=tokenParenthesized;return["property","word"]}
if(stream.match(/^[a-z][\w-]*\(/i)){stream.backUp(1);return["keyword","mixin"]}
if(stream.match(/^(\+|-)[a-z][\w-]*\(/i)){stream.backUp(1);return["keyword","block-mixin"]}
if(stream.string.match(/^\s*&/)&&stream.match(/^[-_]+[a-z][\w-]*/)){return["qualifier","qualifier"]}
if(stream.match(/^(\/|&)(-|_|:|\.|#|[a-z])/)){stream.backUp(1);return["variable-3","reference"]}
if(stream.match(/^&{1}\s*$/)){return["variable-3","reference"]}
if(stream.match(wordOperatorKeywordsRegexp)){return["operator","operator"]}
if(stream.match(/^\$?[-_]*[a-z0-9]+[\w-]*/i)){if(stream.match(/^(\.|\[)[\w-\'\"\]]+/i,!1)){if(!wordIsTag(stream.current())){stream.match(/\./);return["variable-2","variable-name"]}}
return["variable-2","word"]}
if(stream.match(operatorsRegexp)){return["operator",stream.current()]}
if(/[:;,{}\[\]\(\)]/.test(ch)){stream.next();return[null,ch]}
stream.next();return[null,null]}
function tokenCComment(stream,state){var maybeEnd=!1,ch;while((ch=stream.next())!=null){if(maybeEnd&&ch=="/"){state.tokenize=null;break}
maybeEnd=(ch=="*")}
return["comment","comment"]}
function tokenString(quote){return function(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){if(quote==")")stream.backUp(1);break}
escaped=!escaped&&ch=="\\"}
if(ch==quote||!escaped&&quote!=")")state.tokenize=null;return["string","string"]}}
function tokenParenthesized(stream,state){stream.next();if(!stream.match(/\s*[\"\')]/,!1))
state.tokenize=tokenString(")");else state.tokenize=null;return[null,"("]}
function Context(type,indent,prev,line){this.type=type;this.indent=indent;this.prev=prev;this.line=line||{firstWord:"",indent:0}}
function pushContext(state,stream,type,indent){indent=indent>=0?indent:indentUnit;state.context=new Context(type,stream.indentation()+indent,state.context);return type}
function popContext(state,currentIndent){var contextIndent=state.context.indent-indentUnit;currentIndent=currentIndent||!1;state.context=state.context.prev;if(currentIndent)state.context.indent=contextIndent;return state.context.type}
function pass(type,stream,state){return states[state.context.type](type,stream,state)}
function popAndPass(type,stream,state,n){for(var i=n||1;i>0;i--)
state.context=state.context.prev;return pass(type,stream,state)}
function wordIsTag(word){return word.toLowerCase()in tagKeywords}
function wordIsProperty(word){word=word.toLowerCase();return word in propertyKeywords||word in fontProperties}
function wordIsBlock(word){return word.toLowerCase()in blockKeywords}
function wordIsVendorPrefix(word){return word.toLowerCase().match(vendorPrefixesRegexp)}
function wordAsValue(word){var wordLC=word.toLowerCase();var override="variable-2";if(wordIsTag(word))override="tag";else if(wordIsBlock(word))override="block-keyword";else if(wordIsProperty(word))override="property";else if(wordLC in valueKeywords||wordLC in commonAtoms)override="atom";else if(wordLC=="return"||wordLC in colorKeywords)override="keyword";else if(word.match(/^[A-Z]/))override="string";return override}
function typeIsBlock(type,stream){return((endOfLine(stream)&&(type=="{"||type=="]"||type=="hash"||type=="qualifier"))||type=="block-mixin")}
function typeIsInterpolation(type,stream){return type=="{"&&stream.match(/^\s*\$?[\w-]+/i,!1)}
function typeIsPseudo(type,stream){return type==":"&&stream.match(/^[a-z-]+/,!1)}
function startOfLine(stream){return stream.sol()||stream.string.match(new RegExp("^\\s*"+escapeRegExp(stream.current())))}
function endOfLine(stream){return stream.eol()||stream.match(/^\s*$/,!1)}
function firstWordOfLine(line){var re=/^\s*[-_]*[a-z0-9]+[\w-]*/i;var result=typeof line=="string"?line.match(re):line.string.match(re);return result?result[0].replace(/^\s*/,""):""}
states.block=function(type,stream,state){if((type=="comment"&&startOfLine(stream))||(type==","&&endOfLine(stream))||type=="mixin"){return pushContext(state,stream,"block",0)}
if(typeIsInterpolation(type,stream)){return pushContext(state,stream,"interpolation")}
if(endOfLine(stream)&&type=="]"){if(!/^\s*(\.|#|:|\[|\*|&)/.test(stream.string)&&!wordIsTag(firstWordOfLine(stream))){return pushContext(state,stream,"block",0)}}
if(typeIsBlock(type,stream,state)){return pushContext(state,stream,"block")}
if(type=="}"&&endOfLine(stream)){return pushContext(state,stream,"block",0)}
if(type=="variable-name"){if(stream.string.match(/^\s?\$[\w-\.\[\]\'\"]+$/)||wordIsBlock(firstWordOfLine(stream))){return pushContext(state,stream,"variableName")}else{return pushContext(state,stream,"variableName",0)}}
if(type=="="){if(!endOfLine(stream)&&!wordIsBlock(firstWordOfLine(stream))){return pushContext(state,stream,"block",0)}
return pushContext(state,stream,"block")}
if(type=="*"){if(endOfLine(stream)||stream.match(/\s*(,|\.|#|\[|:|{)/,!1)){override="tag";return pushContext(state,stream,"block")}}
if(typeIsPseudo(type,stream)){return pushContext(state,stream,"pseudo")}
if(/@(font-face|media|supports|(-moz-)?document)/.test(type)){return pushContext(state,stream,endOfLine(stream)?"block":"atBlock")}
if(/@(-(moz|ms|o|webkit)-)?keyframes$/.test(type)){return pushContext(state,stream,"keyframes")}
if(/@extends?/.test(type)){return pushContext(state,stream,"extend",0)}
if(type&&type.charAt(0)=="@"){if(stream.indentation()>0&&wordIsProperty(stream.current().slice(1))){override="variable-2";return"block"}
if(/(@import|@require|@charset)/.test(type)){return pushContext(state,stream,"block",0)}
return pushContext(state,stream,"block")}
if(type=="reference"&&endOfLine(stream)){return pushContext(state,stream,"block")}
if(type=="("){return pushContext(state,stream,"parens")}
if(type=="vendor-prefixes"){return pushContext(state,stream,"vendorPrefixes")}
if(type=="word"){var word=stream.current();override=wordAsValue(word);if(override=="property"){if(startOfLine(stream)){return pushContext(state,stream,"block",0)}else{override="atom";return"block"}}
if(override=="tag"){if(/embed|menu|pre|progress|sub|table/.test(word)){if(wordIsProperty(firstWordOfLine(stream))){override="atom";return"block"}}
if(stream.string.match(new RegExp("\\[\\s*"+word+"|"+word+"\\s*\\]"))){override="atom";return"block"}
if(tagVariablesRegexp.test(word)){if((startOfLine(stream)&&stream.string.match(/=/))||(!startOfLine(stream)&&!stream.string.match(/^(\s*\.|#|\&|\[|\/|>|\*)/)&&!wordIsTag(firstWordOfLine(stream)))){override="variable-2";if(wordIsBlock(firstWordOfLine(stream)))return"block";return pushContext(state,stream,"block",0)}}
if(endOfLine(stream))return pushContext(state,stream,"block")}
if(override=="block-keyword"){override="keyword";if(stream.current(/(if|unless)/)&&!startOfLine(stream)){return"block"}
return pushContext(state,stream,"block")}
if(word=="return")return pushContext(state,stream,"block",0);if(override=="variable-2"&&stream.string.match(/^\s?\$[\w-\.\[\]\'\"]+$/)){return pushContext(state,stream,"block")}}
return state.context.type};states.parens=function(type,stream,state){if(type=="(")return pushContext(state,stream,"parens");if(type==")"){if(state.context.prev.type=="parens"){return popContext(state)}
if((stream.string.match(/^[a-z][\w-]*\(/i)&&endOfLine(stream))||wordIsBlock(firstWordOfLine(stream))||/(\.|#|:|\[|\*|&|>|~|\+|\/)/.test(firstWordOfLine(stream))||(!stream.string.match(/^-?[a-z][\w-\.\[\]\'\"]*\s*=/)&&wordIsTag(firstWordOfLine(stream)))){return pushContext(state,stream,"block")}
if(stream.string.match(/^[\$-]?[a-z][\w-\.\[\]\'\"]*\s*=/)||stream.string.match(/^\s*(\(|\)|[0-9])/)||stream.string.match(/^\s+[a-z][\w-]*\(/i)||stream.string.match(/^\s+[\$-]?[a-z]/i)){return pushContext(state,stream,"block",0)}
if(endOfLine(stream))return pushContext(state,stream,"block");else return pushContext(state,stream,"block",0)}
if(type&&type.charAt(0)=="@"&&wordIsProperty(stream.current().slice(1))){override="variable-2"}
if(type=="word"){var word=stream.current();override=wordAsValue(word);if(override=="tag"&&tagVariablesRegexp.test(word)){override="variable-2"}
if(override=="property"||word=="to")override="atom"}
if(type=="variable-name"){return pushContext(state,stream,"variableName")}
if(typeIsPseudo(type,stream)){return pushContext(state,stream,"pseudo")}
return state.context.type};states.vendorPrefixes=function(type,stream,state){if(type=="word"){override="property";return pushContext(state,stream,"block",0)}
return popContext(state)};states.pseudo=function(type,stream,state){if(!wordIsProperty(firstWordOfLine(stream.string))){stream.match(/^[a-z-]+/);override="variable-3";if(endOfLine(stream))return pushContext(state,stream,"block");return popContext(state)}
return popAndPass(type,stream,state)};states.atBlock=function(type,stream,state){if(type=="(")return pushContext(state,stream,"atBlock_parens");if(typeIsBlock(type,stream,state)){return pushContext(state,stream,"block")}
if(typeIsInterpolation(type,stream)){return pushContext(state,stream,"interpolation")}
if(type=="word"){var word=stream.current().toLowerCase();if(/^(only|not|and|or)$/.test(word))
override="keyword";else if(documentTypes.hasOwnProperty(word))
override="tag";else if(mediaTypes.hasOwnProperty(word))
override="attribute";else if(mediaFeatures.hasOwnProperty(word))
override="property";else if(nonStandardPropertyKeywords.hasOwnProperty(word))
override="string-2";else override=wordAsValue(stream.current());if(override=="tag"&&endOfLine(stream)){return pushContext(state,stream,"block")}}
if(type=="operator"&&/^(not|and|or)$/.test(stream.current())){override="keyword"}
return state.context.type};states.atBlock_parens=function(type,stream,state){if(type=="{"||type=="}")return state.context.type;if(type==")"){if(endOfLine(stream))return pushContext(state,stream,"block");else return pushContext(state,stream,"atBlock")}
if(type=="word"){var word=stream.current().toLowerCase();override=wordAsValue(word);if(/^(max|min)/.test(word))override="property";if(override=="tag"){tagVariablesRegexp.test(word)?override="variable-2":override="atom"}
return state.context.type}
return states.atBlock(type,stream,state)};states.keyframes=function(type,stream,state){if(stream.indentation()=="0"&&((type=="}"&&startOfLine(stream))||type=="]"||type=="hash"||type=="qualifier"||wordIsTag(stream.current()))){return popAndPass(type,stream,state)}
if(type=="{")return pushContext(state,stream,"keyframes");if(type=="}"){if(startOfLine(stream))return popContext(state,!0);else return pushContext(state,stream,"keyframes")}
if(type=="unit"&&/^[0-9]+\%$/.test(stream.current())){return pushContext(state,stream,"keyframes")}
if(type=="word"){override=wordAsValue(stream.current());if(override=="block-keyword"){override="keyword";return pushContext(state,stream,"keyframes")}}
if(/@(font-face|media|supports|(-moz-)?document)/.test(type)){return pushContext(state,stream,endOfLine(stream)?"block":"atBlock")}
if(type=="mixin"){return pushContext(state,stream,"block",0)}
return state.context.type};states.interpolation=function(type,stream,state){if(type=="{")popContext(state)&&pushContext(state,stream,"block");if(type=="}"){if(stream.string.match(/^\s*(\.|#|:|\[|\*|&|>|~|\+|\/)/i)||(stream.string.match(/^\s*[a-z]/i)&&wordIsTag(firstWordOfLine(stream)))){return pushContext(state,stream,"block")}
if(!stream.string.match(/^(\{|\s*\&)/)||stream.match(/\s*[\w-]/,!1)){return pushContext(state,stream,"block",0)}
return pushContext(state,stream,"block")}
if(type=="variable-name"){return pushContext(state,stream,"variableName",0)}
if(type=="word"){override=wordAsValue(stream.current());if(override=="tag")override="atom"}
return state.context.type};states.extend=function(type,stream,state){if(type=="["||type=="=")return"extend";if(type=="]")return popContext(state);if(type=="word"){override=wordAsValue(stream.current());return"extend"}
return popContext(state)};states.variableName=function(type,stream,state){if(type=="string"||type=="["||type=="]"||stream.current().match(/^(\.|\$)/)){if(stream.current().match(/^\.[\w-]+/i))override="variable-2";return"variableName"}
return popAndPass(type,stream,state)};return{startState:function(base){return{tokenize:null,state:"block",context:new Context("block",base||0,null)}},token:function(stream,state){if(!state.tokenize&&stream.eatSpace())return null;style=(state.tokenize||tokenBase)(stream,state);if(style&&typeof style=="object"){type=style[1];style=style[0]}
override=style;state.state=states[state.state](type,stream,state);return override},indent:function(state,textAfter,line){var cx=state.context,ch=textAfter&&textAfter.charAt(0),indent=cx.indent,lineFirstWord=firstWordOfLine(textAfter),lineIndent=line.length-line.replace(/^\s*/,"").length,prevLineFirstWord=state.context.prev?state.context.prev.line.firstWord:"",prevLineIndent=state.context.prev?state.context.prev.line.indent:lineIndent;if(cx.prev&&(ch=="}"&&(cx.type=="block"||cx.type=="atBlock"||cx.type=="keyframes")||ch==")"&&(cx.type=="parens"||cx.type=="atBlock_parens")||ch=="{"&&(cx.type=="at"))){indent=cx.indent-indentUnit;cx=cx.prev}else if(!(/(\})/.test(ch))){if(/@|\$|\d/.test(ch)||/^\{/.test(textAfter)||/^\s*\/(\/|\*)/.test(textAfter)||/^\s*\/\*/.test(prevLineFirstWord)||/^\s*[\w-\.\[\]\'\"]+\s*(\?|:|\+)?=/i.test(textAfter)||/^(\+|-)?[a-z][\w-]*\(/i.test(textAfter)||/^return/.test(textAfter)||wordIsBlock(lineFirstWord)){indent=lineIndent}else if(/(\.|#|:|\[|\*|&|>|~|\+|\/)/.test(ch)||wordIsTag(lineFirstWord)){if(/\,\s*$/.test(prevLineFirstWord)){indent=prevLineIndent}else if(/^\s+/.test(line)&&(/(\.|#|:|\[|\*|&|>|~|\+|\/)/.test(prevLineFirstWord)||wordIsTag(prevLineFirstWord))){indent=lineIndent<=prevLineIndent?prevLineIndent:prevLineIndent+indentUnit}else{indent=lineIndent}}else if(!/,\s*$/.test(line)&&(wordIsVendorPrefix(lineFirstWord)||wordIsProperty(lineFirstWord))){if(wordIsBlock(prevLineFirstWord)){indent=lineIndent<=prevLineIndent?prevLineIndent:prevLineIndent+indentUnit}else if(/^\{/.test(prevLineFirstWord)){indent=lineIndent<=prevLineIndent?lineIndent:prevLineIndent+indentUnit}else if(wordIsVendorPrefix(prevLineFirstWord)||wordIsProperty(prevLineFirstWord)){indent=lineIndent>=prevLineIndent?prevLineIndent:lineIndent}else if(/^(\.|#|:|\[|\*|&|@|\+|\-|>|~|\/)/.test(prevLineFirstWord)||/=\s*$/.test(prevLineFirstWord)||wordIsTag(prevLineFirstWord)||/^\$[\w-\.\[\]\'\"]/.test(prevLineFirstWord)){indent=prevLineIndent+indentUnit}else{indent=lineIndent}}}
return indent},electricChars:"}",lineComment:"//",fold:"indent"}});var tagKeywords_=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","bgsound","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","nobr","noframes","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video"];var documentTypes_=["domain","regexp","url","url-prefix"];var mediaTypes_=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"];var mediaFeatures_=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"];var propertyKeywords_=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode","font-smoothing","osx-font-smoothing"];var nonStandardPropertyKeywords_=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"];var fontProperties_=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"];var colorKeywords_=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"];var valueKeywords_=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scale","scale3d","scaleX","scaleY","scaleZ","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","x-large","x-small","xor","xx-large","xx-small","bicubic","optimizespeed","grayscale","row","row-reverse","wrap","wrap-reverse","column-reverse","flex-start","flex-end","space-between","space-around"];var wordOperatorKeywords_=["in","and","or","not","is not","is a","is","isnt","defined","if unless"],blockKeywords_=["for","if","else","unless","from","to"],commonAtoms_=["null","true","false","href","title","type","not-allowed","readonly","disabled"],commonDef_=["@font-face","@keyframes","@media","@viewport","@page","@host","@supports","@block","@css"];var hintWords=tagKeywords_.concat(documentTypes_,mediaTypes_,mediaFeatures_,propertyKeywords_,nonStandardPropertyKeywords_,colorKeywords_,valueKeywords_,fontProperties_,wordOperatorKeywords_,blockKeywords_,commonAtoms_,commonDef_);function wordRegexp(words){words=words.sort(function(a,b){return b>a});return new RegExp("^(("+words.join(")|(")+"))\\b")}
function keySet(array){var keys={};for(var i=0;i<array.length;++i)keys[array[i]]=!0;return keys}
function escapeRegExp(text){return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}
CodeMirror.registerHelper("hintWords","stylus",hintWords);CodeMirror.defineMIME("text/x-styl","stylus")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"))
else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod)
else mod(CodeMirror)})(function(CodeMirror){"use strict"
function wordSet(words){var set={}
for(var i=0;i<words.length;i++)set[words[i]]=!0
return set}
var keywords=wordSet(["var","let","class","deinit","enum","extension","func","import","init","protocol","static","struct","subscript","typealias","as","dynamicType","is","new","super","self","Self","Type","__COLUMN__","__FILE__","__FUNCTION__","__LINE__","break","case","continue","default","do","else","fallthrough","if","in","for","return","switch","where","while","associativity","didSet","get","infix","inout","left","mutating","none","nonmutating","operator","override","postfix","precedence","prefix","right","set","unowned","weak","willSet"])
var definingKeywords=wordSet(["var","let","class","enum","extension","func","import","protocol","struct","typealias","dynamicType","for"])
var atoms=wordSet(["Infinity","NaN","undefined","null","true","false","on","off","yes","no","nil","null","this","super"])
var types=wordSet(["String","bool","int","string","double","Double","Int","Float","float","public","private","extension"])
var operators="+-/*%=|&<>#"
var punc=";,.(){}[]"
var number=/^-?(?:(?:[\d_]+\.[_\d]*|\.[_\d]+|0o[0-7_\.]+|0b[01_\.]+)(?:e-?[\d_]+)?|0x[\d_a-f\.]+(?:p-?[\d_]+)?)/i
var identifier=/^[_A-Za-z$][_A-Za-z$0-9]*/
var property=/^[@\.][_A-Za-z$][_A-Za-z$0-9]*/
var regexp=/^\/(?!\s)(?:\/\/)?(?:\\.|[^\/])+\//
function tokenBase(stream,state,prev){if(stream.sol())state.indented=stream.indentation()
if(stream.eatSpace())return null
var ch=stream.peek()
if(ch=="/"){if(stream.match("//")){stream.skipToEnd()
return"comment"}
if(stream.match("/*")){state.tokenize.push(tokenComment)
return tokenComment(stream,state)}
if(stream.match(regexp))return"string-2"}
if(operators.indexOf(ch)>-1){stream.next()
return"operator"}
if(punc.indexOf(ch)>-1){stream.next()
stream.match("..")
return"punctuation"}
if(ch=='"'||ch=="'"){stream.next()
var tokenize=tokenString(ch)
state.tokenize.push(tokenize)
return tokenize(stream,state)}
if(stream.match(number))return"number"
if(stream.match(property))return"property"
if(stream.match(identifier)){var ident=stream.current()
if(keywords.hasOwnProperty(ident)){if(definingKeywords.hasOwnProperty(ident))
state.prev="define"
return"keyword"}
if(types.hasOwnProperty(ident))return"variable-2"
if(atoms.hasOwnProperty(ident))return"atom"
if(prev=="define")return"def"
return"variable"}
stream.next()
return null}
function tokenUntilClosingParen(){var depth=0
return function(stream,state,prev){var inner=tokenBase(stream,state,prev)
if(inner=="punctuation"){if(stream.current()=="(")++depth
else if(stream.current()==")"){if(depth==0){stream.backUp(1)
state.tokenize.pop()
return state.tokenize[state.tokenize.length-1](stream,state)}else --depth}}
return inner}}
function tokenString(quote){return function(stream,state){var ch,escaped=!1
while(ch=stream.next()){if(escaped){if(ch=="("){state.tokenize.push(tokenUntilClosingParen())
return"string"}
escaped=!1}else if(ch==quote){break}else{escaped=ch=="\\"}}
state.tokenize.pop()
return"string"}}
function tokenComment(stream,state){stream.match(/^(?:[^*]|\*(?!\/))*/)
if(stream.match("*/"))state.tokenize.pop()
return"comment"}
function Context(prev,align,indented){this.prev=prev
this.align=align
this.indented=indented}
function pushContext(state,stream){var align=stream.match(/^\s*($|\/[\/\*])/,!1)?null:stream.column()+1
state.context=new Context(state.context,align,state.indented)}
function popContext(state){if(state.context){state.indented=state.context.indented
state.context=state.context.prev}}
CodeMirror.defineMode("swift",function(config){return{startState:function(){return{prev:null,context:null,indented:0,tokenize:[]}},token:function(stream,state){var prev=state.prev
state.prev=null
var tokenize=state.tokenize[state.tokenize.length-1]||tokenBase
var style=tokenize(stream,state,prev)
if(!style||style=="comment")state.prev=prev
else if(!state.prev)state.prev=style
if(style=="punctuation"){var bracket=/[\(\[\{]|([\]\)\}])/.exec(stream.current())
if(bracket)(bracket[1]?popContext:pushContext)(state,stream)}
return style},indent:function(state,textAfter){var cx=state.context
if(!cx)return 0
var closing=/^[\]\}\)]/.test(textAfter)
if(cx.align!=null)return cx.align-(closing?1:0)
return cx.indented+(closing?0:config.indentUnit)},electricInput:/^\s*[\)\}\]]$/,lineComment:"//",blockCommentStart:"/*",blockCommentEnd:"*/"}})
CodeMirror.defineMIME("text/x-swift","swift")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("tcl",function(){function parseWords(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var keywords=parseWords("Tcl safe after append array auto_execok auto_import auto_load "+"auto_mkindex auto_mkindex_old auto_qualify auto_reset bgerror "+"binary break catch cd close concat continue dde eof encoding error "+"eval exec exit expr fblocked fconfigure fcopy file fileevent filename "+"filename flush for foreach format gets glob global history http if "+"incr info interp join lappend lindex linsert list llength load lrange "+"lreplace lsearch lset lsort memory msgcat namespace open package parray "+"pid pkg::create pkg_mkIndex proc puts pwd re_syntax read regex regexp "+"registry regsub rename resource return scan seek set socket source split "+"string subst switch tcl_endOfWord tcl_findLibrary tcl_startOfNextWord "+"tcl_wordBreakAfter tcl_startOfPreviousWord tcl_wordBreakBefore tcltest "+"tclvars tell time trace unknown unset update uplevel upvar variable "+"vwait");var functions=parseWords("if elseif else and not or eq ne in ni for foreach while switch");var isOperatorChar=/[+\-*&%=<>!?^\/\|]/;function chain(stream,state,f){state.tokenize=f;return f(stream,state)}
function tokenBase(stream,state){var beforeParams=state.beforeParams;state.beforeParams=!1;var ch=stream.next();if((ch=='"'||ch=="'")&&state.inParams){return chain(stream,state,tokenString(ch))}else if(/[\[\]{}\(\),;\.]/.test(ch)){if(ch=="("&&beforeParams)state.inParams=!0;else if(ch==")")state.inParams=!1;return null}else if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}else if(ch=="#"){if(stream.eat("*"))
return chain(stream,state,tokenComment);if(ch=="#"&&stream.match(/ *\[ *\[/))
return chain(stream,state,tokenUnparsed);stream.skipToEnd();return"comment"}else if(ch=='"'){stream.skipTo(/"/);return"comment"}else if(ch=="$"){stream.eatWhile(/[$_a-z0-9A-Z\.{:]/);stream.eatWhile(/}/);state.beforeParams=!0;return"builtin"}else if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"comment"}else{stream.eatWhile(/[\w\$_{}\xa1-\uffff]/);var word=stream.current().toLowerCase();if(keywords&&keywords.propertyIsEnumerable(word))
return"keyword";if(functions&&functions.propertyIsEnumerable(word)){state.beforeParams=!0;return"keyword"}
return null}}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end)state.tokenize=tokenBase;return"string"}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="#"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return"comment"}
function tokenUnparsed(stream,state){var maybeEnd=0,ch;while(ch=stream.next()){if(ch=="#"&&maybeEnd==2){state.tokenize=tokenBase;break}
if(ch=="]")
maybeEnd++;else if(ch!=" ")
maybeEnd=0}
return"meta"}
return{startState:function(){return{tokenize:tokenBase,beforeParams:!1,inParams:!1}},token:function(stream,state){if(stream.eatSpace())return null;return state.tokenize(stream,state)}}});CodeMirror.defineMIME("text/x-tcl","tcl")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({tabSize:4},'textile');function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT('simpleParagraphs','Some text.','','Some more text.');MT('em','foo [em _bar_]');MT('emBoogus','code_mirror');MT('strong','foo [strong *bar*]');MT('strongBogus','3 * 3 = 9');MT('italic','foo [em __bar__]');MT('italicBogus','code__mirror');MT('bold','foo [strong **bar**]');MT('boldBogus','3 ** 3 = 27');MT('simpleLink','[link "CodeMirror":http://codemirror.net]');MT('referenceLink','[link "CodeMirror":code_mirror]','Normal Text.','[link [[code_mirror]]http://codemirror.net]');MT('footCite','foo bar[qualifier [[1]]]');MT('footCiteBogus','foo bar[[1a2]]');MT('special-characters','Registered [tag (r)], '+'Trademark [tag (tm)], and '+'Copyright [tag (c)] 2008');MT('cite',"A book is [keyword ??The Count of Monte Cristo??] by Dumas.");MT('additionAndDeletion','The news networks declared [negative -Al Gore-] '+'[positive +George W. Bush+] the winner in Florida.');MT('subAndSup','f(x, n) = log [builtin ~4~] x [builtin ^n^]');MT('spanAndCode','A [quote %span element%] and [atom @code element@]');MT('spanBogus','Percentage 25% is not a span.');MT('citeBogus','Question? is not a citation.');MT('codeBogus','user@example.com');MT('subBogus','~username');MT('supBogus','foo ^ bar');MT('deletionBogus','3 - 3 = 0');MT('additionBogus','3 + 3 = 6');MT('image','An image: [string !http://www.example.com/image.png!]');MT('imageWithAltText','An image: [string !http://www.example.com/image.png (Alt Text)!]');MT('imageWithUrl','An image: [string !http://www.example.com/image.png!:http://www.example.com/]');MT('h1','[header&header-1 h1. foo]');MT('h2','[header&header-2 h2. foo]');MT('h3','[header&header-3 h3. foo]');MT('h4','[header&header-4 h4. foo]');MT('h5','[header&header-5 h5. foo]');MT('h6','[header&header-6 h6. foo]');MT('h7Bogus','h7. foo');MT('multipleHeaders','[header&header-1 h1. Heading 1]','','Some text.','','[header&header-2 h2. Heading 2]','','More text.');MT('h1inline','[header&header-1 h1. foo ][header&header-1&em _bar_][header&header-1  baz]');MT('ul','foo','bar','','[variable-2 * foo]','[variable-2 * bar]');MT('ulNoBlank','foo','bar','[variable-2 * foo]','[variable-2 * bar]');MT('ol','foo','bar','','[variable-2 # foo]','[variable-2 # bar]');MT('olNoBlank','foo','bar','[variable-2 # foo]','[variable-2 # bar]');MT('ulFormatting','[variable-2 * ][variable-2&em _foo_][variable-2  bar]','[variable-2 * ][variable-2&strong *][variable-2&em&strong _foo_]'+'[variable-2&strong *][variable-2  bar]','[variable-2 * ][variable-2&strong *foo*][variable-2  bar]');MT('olFormatting','[variable-2 # ][variable-2&em _foo_][variable-2  bar]','[variable-2 # ][variable-2&strong *][variable-2&em&strong _foo_]'+'[variable-2&strong *][variable-2  bar]','[variable-2 # ][variable-2&strong *foo*][variable-2  bar]');MT('ulNested','[variable-2 * foo]','[variable-3 ** bar]','[keyword *** bar]','[variable-2 **** bar]','[variable-3 ** bar]');MT('olNested','[variable-2 # foo]','[variable-3 ## bar]','[keyword ### bar]','[variable-2 #### bar]','[variable-3 ## bar]');MT('ulNestedWithOl','[variable-2 * foo]','[variable-3 ## bar]','[keyword *** bar]','[variable-2 #### bar]','[variable-3 ** bar]');MT('olNestedWithUl','[variable-2 # foo]','[variable-3 ** bar]','[keyword ### bar]','[variable-2 **** bar]','[variable-3 ## bar]');MT('definitionList','[number - coffee := Hot ][number&em _and_][number  black]','','Normal text.');MT('definitionListSpan','[number - coffee :=]','','[number Hot ][number&em _and_][number  black =:]','','Normal text.');MT('boo','[number - dog := woof woof]','[number - cat := meow meow]','[number - whale :=]','[number Whale noises.]','','[number Also, ][number&em _splashing_][number . =:]');MT('divWithAttribute','[punctuation div][punctuation&attribute (#my-id)][punctuation . foo bar]');MT('divWithAttributeAnd2emRightPadding','[punctuation div][punctuation&attribute (#my-id)((][punctuation . foo bar]');MT('divWithClassAndId','[punctuation div][punctuation&attribute (my-class#my-id)][punctuation . foo bar]');MT('paragraphWithCss','p[attribute {color:red;}]. foo bar');MT('paragraphNestedStyles','p. [strong *foo ][strong&em _bar_][strong *]');MT('paragraphWithLanguage','p[attribute [[fr]]]. Parlez-vous français?');MT('paragraphLeftAlign','p[attribute <]. Left');MT('paragraphRightAlign','p[attribute >]. Right');MT('paragraphRightAlign','p[attribute =]. Center');MT('paragraphJustified','p[attribute <>]. Justified');MT('paragraphWithLeftIndent1em','p[attribute (]. Left');MT('paragraphWithRightIndent1em','p[attribute )]. Right');MT('paragraphWithLeftIndent2em','p[attribute ((]. Left');MT('paragraphWithRightIndent2em','p[attribute ))]. Right');MT('paragraphWithLeftIndent3emRightIndent2em','p[attribute ((())]. Right');MT('divFormatting','[punctuation div. ][punctuation&strong *foo ]'+'[punctuation&strong&em _bar_][punctuation&strong *]');MT('phraseModifierAttributes','p[attribute (my-class)]. This is a paragraph that has a class and'+' this [em _][em&attribute (#special-phrase)][em emphasized phrase_]'+' has an id.');MT('linkWithClass','[link "(my-class). This is a link with class":http://redcloth.org]');MT('paragraphLayouts','p. This is one paragraph.','','p. This is another.');MT('div','[punctuation div. foo bar]');MT('pre','[operator pre. Text]');MT('bq.','[bracket bq. foo bar]','','Normal text.');MT('footnote','[variable fn123. foo ][variable&strong *bar*]');MT('bq..ThenParagraph','[bracket bq.. foo bar]','','[bracket More quote.]','p. Normal Text');MT('bq..ThenH1','[bracket bq.. foo bar]','','[bracket More quote.]','[header&header-1 h1. Header Text]');MT('bc..ThenParagraph','[atom bc.. # Some ruby code]','[atom obj = {foo: :bar}]','[atom puts obj]','','[atom obj[[:love]] = "*love*"]','[atom puts obj.love.upcase]','','p. Normal text.');MT('fn1..ThenParagraph','[variable fn1.. foo bar]','','[variable More.]','p. Normal Text');MT('pre..ThenParagraph','[operator pre.. foo bar]','','[operator More.]','p. Normal Text');MT('table','[variable-3&operator |_. name |_. age|]','[variable-3 |][variable-3&strong *Walter*][variable-3 |   5  |]','[variable-3 |Florence|   6  |]','','p. Normal text.');MT('tableWithAttributes','[variable-3&operator |_. name |_. age|]','[variable-3 |][variable-3&attribute /2.][variable-3  Jim |]','[variable-3 |][variable-3&attribute \\2{color: red}.][variable-3  Sam |]');MT('html','[comment <div id="wrapper">]','[comment <section id="introduction">]','','[header&header-1 h1. Welcome]','','[variable-2 * Item one]','[variable-2 * Item two]','','[comment <a href="http://example.com">Example</a>]','','[comment </section>]','[comment </div>]');MT('inlineHtml','I can use HTML directly in my [comment <span class="youbetcha">Textile</span>].');MT('notextile','[string-2 notextile. *No* formatting]');MT('notextileInline','Use [string-2 ==*asterisks*==] for [strong *strong*] text.');MT('notextileWithPre','[operator pre. *No* formatting]');MT('notextileWithSpanningPre','[operator pre.. *No* formatting]','','[operator *No* formatting]');MT('phrase-in-word','foo_bar_baz');MT('phrase-non-word','[negative -x-] aaa-bbb ccc-ddd [negative -eee-] fff [negative -ggg-]');MT('phrase-lone-dash','foo - bar - baz')})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"))}else if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod)}else{mod(CodeMirror)}})(function(CodeMirror){"use strict";var TOKEN_STYLES={addition:"positive",attributes:"attribute",bold:"strong",cite:"keyword",code:"atom",definitionList:"number",deletion:"negative",div:"punctuation",em:"em",footnote:"variable",footCite:"qualifier",header:"header",html:"comment",image:"string",italic:"em",link:"link",linkDefinition:"link",list1:"variable-2",list2:"variable-3",list3:"keyword",notextile:"string-2",pre:"operator",p:"property",quote:"bracket",span:"quote",specialChar:"tag",strong:"strong",sub:"builtin",sup:"builtin",table:"variable-3",tableHeading:"operator"};function startNewLine(stream,state){state.mode=Modes.newLayout;state.tableHeading=!1;if(state.layoutType==="definitionList"&&state.spanningLayout&&stream.match(RE("definitionListEnd"),!1))
state.spanningLayout=!1}
function handlePhraseModifier(stream,state,ch){if(ch==="_"){if(stream.eat("_"))
return togglePhraseModifier(stream,state,"italic",/__/,2);else return togglePhraseModifier(stream,state,"em",/_/,1)}
if(ch==="*"){if(stream.eat("*")){return togglePhraseModifier(stream,state,"bold",/\*\*/,2)}
return togglePhraseModifier(stream,state,"strong",/\*/,1)}
if(ch==="["){if(stream.match(/\d+\]/))state.footCite=!0;return tokenStyles(state)}
if(ch==="("){var spec=stream.match(/^(r|tm|c)\)/);if(spec)
return tokenStylesWith(state,TOKEN_STYLES.specialChar)}
if(ch==="<"&&stream.match(/(\w+)[^>]+>[^<]+<\/\1>/))
return tokenStylesWith(state,TOKEN_STYLES.html);if(ch==="?"&&stream.eat("?"))
return togglePhraseModifier(stream,state,"cite",/\?\?/,2);if(ch==="="&&stream.eat("="))
return togglePhraseModifier(stream,state,"notextile",/==/,2);if(ch==="-"&&!stream.eat("-"))
return togglePhraseModifier(stream,state,"deletion",/-/,1);if(ch==="+")
return togglePhraseModifier(stream,state,"addition",/\+/,1);if(ch==="~")
return togglePhraseModifier(stream,state,"sub",/~/,1);if(ch==="^")
return togglePhraseModifier(stream,state,"sup",/\^/,1);if(ch==="%")
return togglePhraseModifier(stream,state,"span",/%/,1);if(ch==="@")
return togglePhraseModifier(stream,state,"code",/@/,1);if(ch==="!"){var type=togglePhraseModifier(stream,state,"image",/(?:\([^\)]+\))?!/,1);stream.match(/^:\S+/);return type}
return tokenStyles(state)}
function togglePhraseModifier(stream,state,phraseModifier,closeRE,openSize){var charBefore=stream.pos>openSize?stream.string.charAt(stream.pos-openSize-1):null;var charAfter=stream.peek();if(state[phraseModifier]){if((!charAfter||/\W/.test(charAfter))&&charBefore&&/\S/.test(charBefore)){var type=tokenStyles(state);state[phraseModifier]=!1;return type}}else if((!charBefore||/\W/.test(charBefore))&&charAfter&&/\S/.test(charAfter)&&stream.match(new RegExp("^.*\\S"+closeRE.source+"(?:\\W|$)"),!1)){state[phraseModifier]=!0;state.mode=Modes.attributes}
return tokenStyles(state)};function tokenStyles(state){var disabled=textileDisabled(state);if(disabled)return disabled;var styles=[];if(state.layoutType)styles.push(TOKEN_STYLES[state.layoutType]);styles=styles.concat(activeStyles(state,"addition","bold","cite","code","deletion","em","footCite","image","italic","link","span","strong","sub","sup","table","tableHeading"));if(state.layoutType==="header")
styles.push(TOKEN_STYLES.header+"-"+state.header);return styles.length?styles.join(" "):null}
function textileDisabled(state){var type=state.layoutType;switch(type){case "notextile":case "code":case "pre":return TOKEN_STYLES[type];default:if(state.notextile)
return TOKEN_STYLES.notextile+(type?(" "+TOKEN_STYLES[type]):"");return null}}
function tokenStylesWith(state,extraStyles){var disabled=textileDisabled(state);if(disabled)return disabled;var type=tokenStyles(state);if(extraStyles)
return type?(type+" "+extraStyles):extraStyles;else return type}
function activeStyles(state){var styles=[];for(var i=1;i<arguments.length;++i){if(state[arguments[i]])
styles.push(TOKEN_STYLES[arguments[i]])}
return styles}
function blankLine(state){var spanningLayout=state.spanningLayout,type=state.layoutType;for(var key in state)if(state.hasOwnProperty(key))
delete state[key];state.mode=Modes.newLayout;if(spanningLayout){state.layoutType=type;state.spanningLayout=!0}}
var REs={cache:{},single:{bc:"bc",bq:"bq",definitionList:/- [^(?::=)]+:=+/,definitionListEnd:/.*=:\s*$/,div:"div",drawTable:/\|.*\|/,foot:/fn\d+/,header:/h[1-6]/,html:/\s*<(?:\/)?(\w+)(?:[^>]+)?>(?:[^<]+<\/\1>)?/,link:/[^"]+":\S/,linkDefinition:/\[[^\s\]]+\]\S+/,list:/(?:#+|\*+)/,notextile:"notextile",para:"p",pre:"pre",table:"table",tableCellAttributes:/[\/\\]\d+/,tableHeading:/\|_\./,tableText:/[^"_\*\[\(\?\+~\^%@|-]+/,text:/[^!"_=\*\[\(<\?\+~\^%@-]+/},attributes:{align:/(?:<>|<|>|=)/,selector:/\([^\(][^\)]+\)/,lang:/\[[^\[\]]+\]/,pad:/(?:\(+|\)+){1,2}/,css:/\{[^\}]+\}/},createRe:function(name){switch(name){case "drawTable":return REs.makeRe("^",REs.single.drawTable,"$");case "html":return REs.makeRe("^",REs.single.html,"(?:",REs.single.html,")*","$");case "linkDefinition":return REs.makeRe("^",REs.single.linkDefinition,"$");case "listLayout":return REs.makeRe("^",REs.single.list,RE("allAttributes"),"*\\s+");case "tableCellAttributes":return REs.makeRe("^",REs.choiceRe(REs.single.tableCellAttributes,RE("allAttributes")),"+\\.");case "type":return REs.makeRe("^",RE("allTypes"));case "typeLayout":return REs.makeRe("^",RE("allTypes"),RE("allAttributes"),"*\\.\\.?","(\\s+|$)");case "attributes":return REs.makeRe("^",RE("allAttributes"),"+");case "allTypes":return REs.choiceRe(REs.single.div,REs.single.foot,REs.single.header,REs.single.bc,REs.single.bq,REs.single.notextile,REs.single.pre,REs.single.table,REs.single.para);case "allAttributes":return REs.choiceRe(REs.attributes.selector,REs.attributes.css,REs.attributes.lang,REs.attributes.align,REs.attributes.pad);default:return REs.makeRe("^",REs.single[name])}},makeRe:function(){var pattern="";for(var i=0;i<arguments.length;++i){var arg=arguments[i];pattern+=(typeof arg==="string")?arg:arg.source}
return new RegExp(pattern)},choiceRe:function(){var parts=[arguments[0]];for(var i=1;i<arguments.length;++i){parts[i*2-1]="|";parts[i*2]=arguments[i]}
parts.unshift("(?:");parts.push(")");return REs.makeRe.apply(null,parts)}};function RE(name){return(REs.cache[name]||(REs.cache[name]=REs.createRe(name)))}
var Modes={newLayout:function(stream,state){if(stream.match(RE("typeLayout"),!1)){state.spanningLayout=!1;return(state.mode=Modes.blockType)(stream,state)}
var newMode;if(!textileDisabled(state)){if(stream.match(RE("listLayout"),!1))
newMode=Modes.list;else if(stream.match(RE("drawTable"),!1))
newMode=Modes.table;else if(stream.match(RE("linkDefinition"),!1))
newMode=Modes.linkDefinition;else if(stream.match(RE("definitionList")))
newMode=Modes.definitionList;else if(stream.match(RE("html"),!1))
newMode=Modes.html}
return(state.mode=(newMode||Modes.text))(stream,state)},blockType:function(stream,state){var match,type;state.layoutType=null;if(match=stream.match(RE("type")))
type=match[0];else return(state.mode=Modes.text)(stream,state);if(match=type.match(RE("header"))){state.layoutType="header";state.header=parseInt(match[0][1])}else if(type.match(RE("bq"))){state.layoutType="quote"}else if(type.match(RE("bc"))){state.layoutType="code"}else if(type.match(RE("foot"))){state.layoutType="footnote"}else if(type.match(RE("notextile"))){state.layoutType="notextile"}else if(type.match(RE("pre"))){state.layoutType="pre"}else if(type.match(RE("div"))){state.layoutType="div"}else if(type.match(RE("table"))){state.layoutType="table"}
state.mode=Modes.attributes;return tokenStyles(state)},text:function(stream,state){if(stream.match(RE("text")))return tokenStyles(state);var ch=stream.next();if(ch==='"')
return(state.mode=Modes.link)(stream,state);return handlePhraseModifier(stream,state,ch)},attributes:function(stream,state){state.mode=Modes.layoutLength;if(stream.match(RE("attributes")))
return tokenStylesWith(state,TOKEN_STYLES.attributes);else return tokenStyles(state)},layoutLength:function(stream,state){if(stream.eat(".")&&stream.eat("."))
state.spanningLayout=!0;state.mode=Modes.text;return tokenStyles(state)},list:function(stream,state){var match=stream.match(RE("list"));state.listDepth=match[0].length;var listMod=(state.listDepth-1)%3;if(!listMod)
state.layoutType="list1";else if(listMod===1)
state.layoutType="list2";else state.layoutType="list3";state.mode=Modes.attributes;return tokenStyles(state)},link:function(stream,state){state.mode=Modes.text;if(stream.match(RE("link"))){stream.match(/\S+/);return tokenStylesWith(state,TOKEN_STYLES.link)}
return tokenStyles(state)},linkDefinition:function(stream,state){stream.skipToEnd();return tokenStylesWith(state,TOKEN_STYLES.linkDefinition)},definitionList:function(stream,state){stream.match(RE("definitionList"));state.layoutType="definitionList";if(stream.match(/\s*$/))
state.spanningLayout=!0;else state.mode=Modes.attributes;return tokenStyles(state)},html:function(stream,state){stream.skipToEnd();return tokenStylesWith(state,TOKEN_STYLES.html)},table:function(stream,state){state.layoutType="table";return(state.mode=Modes.tableCell)(stream,state)},tableCell:function(stream,state){if(stream.match(RE("tableHeading")))
state.tableHeading=!0;else stream.eat("|");state.mode=Modes.tableCellAttributes;return tokenStyles(state)},tableCellAttributes:function(stream,state){state.mode=Modes.tableText;if(stream.match(RE("tableCellAttributes")))
return tokenStylesWith(state,TOKEN_STYLES.attributes);else return tokenStyles(state)},tableText:function(stream,state){if(stream.match(RE("tableText")))
return tokenStyles(state);if(stream.peek()==="|"){state.mode=Modes.tableCell;return tokenStyles(state)}
return handlePhraseModifier(stream,state,stream.next())}};CodeMirror.defineMode("textile",function(){return{startState:function(){return{mode:Modes.newLayout}},token:function(stream,state){if(stream.sol())startNewLine(stream,state);return state.mode(stream,state)},blankLine:blankLine}});CodeMirror.defineMIME("text/x-textile","textile")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("tiddlywiki",function(){var textwords={};var keywords={"allTags":!0,"closeAll":!0,"list":!0,"newJournal":!0,"newTiddler":!0,"permaview":!0,"saveChanges":!0,"search":!0,"slider":!0,"tabs":!0,"tag":!0,"tagging":!0,"tags":!0,"tiddler":!0,"timeline":!0,"today":!0,"version":!0,"option":!0,"with":!0,"filter":!0};var isSpaceName=/[\w_\-]/i,reHR=/^\-\-\-\-+$/,reWikiCommentStart=/^\/\*\*\*$/,reWikiCommentStop=/^\*\*\*\/$/,reBlockQuote=/^<<<$/,reJsCodeStart=/^\/\/\{\{\{$/,reJsCodeStop=/^\/\/\}\}\}$/,reXmlCodeStart=/^<!--\{\{\{-->$/,reXmlCodeStop=/^<!--\}\}\}-->$/,reCodeBlockStart=/^\{\{\{$/,reCodeBlockStop=/^\}\}\}$/,reUntilCodeStop=/.*?\}\}\}/;function chain(stream,state,f){state.tokenize=f;return f(stream,state)}
function tokenBase(stream,state){var sol=stream.sol(),ch=stream.peek();state.block=!1;if(sol&&/[<\/\*{}\-]/.test(ch)){if(stream.match(reCodeBlockStart)){state.block=!0;return chain(stream,state,twTokenCode)}
if(stream.match(reBlockQuote))
return'quote';if(stream.match(reWikiCommentStart)||stream.match(reWikiCommentStop))
return'comment';if(stream.match(reJsCodeStart)||stream.match(reJsCodeStop)||stream.match(reXmlCodeStart)||stream.match(reXmlCodeStop))
return'comment';if(stream.match(reHR))
return'hr'}
stream.next();if(sol&&/[\/\*!#;:>|]/.test(ch)){if(ch=="!"){stream.skipToEnd();return"header"}
if(ch=="*"){stream.eatWhile('*');return"comment"}
if(ch=="#"){stream.eatWhile('#');return"comment"}
if(ch==";"){stream.eatWhile(';');return"comment"}
if(ch==":"){stream.eatWhile(':');return"comment"}
if(ch==">"){stream.eatWhile(">");return"quote"}
if(ch=='|')
return'header'}
if(ch=='{'&&stream.match(/\{\{/))
return chain(stream,state,twTokenCode);if(/[hf]/i.test(ch)&&/[ti]/i.test(stream.peek())&&stream.match(/\b(ttps?|tp|ile):\/\/[\-A-Z0-9+&@#\/%?=~_|$!:,.;]*[A-Z0-9+&@#\/%=~_|$]/i))
return"link";if(ch=='"')
return'string';if(ch=='~')
return'brace';if(/[\[\]]/.test(ch)&&stream.match(ch))
return'brace';if(ch=="@"){stream.eatWhile(isSpaceName);return"link"}
if(/\d/.test(ch)){stream.eatWhile(/\d/);return"number"}
if(ch=="/"){if(stream.eat("%")){return chain(stream,state,twTokenComment)}else if(stream.eat("/")){return chain(stream,state,twTokenEm)}}
if(ch=="_"&&stream.eat("_"))
return chain(stream,state,twTokenUnderline);if(ch=="-"&&stream.eat("-")){if(stream.peek()!=' ')
return chain(stream,state,twTokenStrike);if(stream.peek()==' ')
return'brace'}
if(ch=="'"&&stream.eat("'"))
return chain(stream,state,twTokenStrong);if(ch=="<"&&stream.eat("<"))
return chain(stream,state,twTokenMacro);stream.eatWhile(/[\w\$_]/);return textwords.propertyIsEnumerable(stream.current())?"keyword":null}
function twTokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="%")}
return"comment"}
function twTokenStrong(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="'"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="'")}
return"strong"}
function twTokenCode(stream,state){var sb=state.block;if(sb&&stream.current()){return"comment"}
if(!sb&&stream.match(reUntilCodeStop)){state.tokenize=tokenBase;return"comment"}
if(sb&&stream.sol()&&stream.match(reCodeBlockStop)){state.tokenize=tokenBase;return"comment"}
stream.next();return"comment"}
function twTokenEm(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="/")}
return"em"}
function twTokenUnderline(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="_"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="_")}
return"underlined"}
function twTokenStrike(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="-"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="-")}
return"strikethrough"}
function twTokenMacro(stream,state){if(stream.current()=='<<'){return'macro'}
var ch=stream.next();if(!ch){state.tokenize=tokenBase;return null}
if(ch==">"){if(stream.peek()=='>'){stream.next();state.tokenize=tokenBase;return"macro"}}
stream.eatWhile(/[\w\$_]/);return keywords.propertyIsEnumerable(stream.current())?"keyword":null}
return{startState:function(){return{tokenize:tokenBase}},token:function(stream,state){if(stream.eatSpace())return null;var style=state.tokenize(stream,state);return style}}});CodeMirror.defineMIME("text/x-tiddlywiki","tiddlywiki")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("toml",function(){return{startState:function(){return{inString:!1,stringType:"",lhs:!0,inArray:0}},token:function(stream,state){if(!state.inString&&((stream.peek()=='"')||(stream.peek()=="'"))){state.stringType=stream.peek();stream.next();state.inString=!0}
if(stream.sol()&&state.inArray===0){state.lhs=!0}
if(state.inString){while(state.inString&&!stream.eol()){if(stream.peek()===state.stringType){stream.next();state.inString=!1}else if(stream.peek()==='\\'){stream.next();stream.next()}else{stream.match(/^.[^\\\"\']*/)}}
return state.lhs?"property string":"string"}else if(state.inArray&&stream.peek()===']'){stream.next();state.inArray--;return'bracket'}else if(state.lhs&&stream.peek()==='['&&stream.skipTo(']')){stream.next();if(stream.peek()===']')stream.next();return"atom"}else if(stream.peek()==="#"){stream.skipToEnd();return"comment"}else if(stream.eatSpace()){return null}else if(state.lhs&&stream.eatWhile(function(c){return c!='='&&c!=' '})){return"property"}else if(state.lhs&&stream.peek()==="="){stream.next();state.lhs=!1;return null}else if(!state.lhs&&stream.match(/^\d\d\d\d[\d\-\:\.T]*Z/)){return'atom'}else if(!state.lhs&&(stream.match('true')||stream.match('false'))){return'atom'}else if(!state.lhs&&stream.peek()==='['){state.inArray++;stream.next();return'bracket'}else if(!state.lhs&&stream.match(/^\-?\d+(?:\.\d+)?/)){return'number'}else if(!stream.eatSpace()){stream.next()}
return null}}});CodeMirror.defineMIME('text/x-toml','toml')})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/overlay"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/overlay"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("tornado:inner",function(){var keywords=["and","as","assert","autoescape","block","break","class","comment","context","continue","datetime","def","del","elif","else","end","escape","except","exec","extends","false","finally","for","from","global","if","import","in","include","is","json_encode","lambda","length","linkify","load","module","none","not","or","pass","print","put","raise","raw","return","self","set","squeeze","super","true","try","url_escape","while","with","without","xhtml_escape","yield"];keywords=new RegExp("^(("+keywords.join(")|(")+"))\\b");function tokenBase(stream,state){stream.eatWhile(/[^\{]/);var ch=stream.next();if(ch=="{"){if(ch=stream.eat(/\{|%|#/)){state.tokenize=inTag(ch);return"tag"}}}
function inTag(close){if(close=="{"){close="}"}
return function(stream,state){var ch=stream.next();if((ch==close)&&stream.eat("}")){state.tokenize=tokenBase;return"tag"}
if(stream.match(keywords)){return"keyword"}
return close=="#"?"comment":"string"}}
return{startState:function(){return{tokenize:tokenBase}},token:function(stream,state){return state.tokenize(stream,state)}}});CodeMirror.defineMode("tornado",function(config){var htmlBase=CodeMirror.getMode(config,"text/html");var tornadoInner=CodeMirror.getMode(config,"tornado:inner");return CodeMirror.overlayMode(htmlBase,tornadoInner)});CodeMirror.defineMIME("text/x-tornado","tornado")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode('troff',function(){var words={};function tokenBase(stream){if(stream.eatSpace())return null;var sol=stream.sol();var ch=stream.next();if(ch==='\\'){if(stream.match('fB')||stream.match('fR')||stream.match('fI')||stream.match('u')||stream.match('d')||stream.match('%')||stream.match('&')){return'string'}
if(stream.match('m[')){stream.skipTo(']');stream.next();return'string'}
if(stream.match('s+')||stream.match('s-')){stream.eatWhile(/[\d-]/);return'string'}
if(stream.match('\(')||stream.match('*\(')){stream.eatWhile(/[\w-]/);return'string'}
return'string'}
if(sol&&(ch==='.'||ch==='\'')){if(stream.eat('\\')&&stream.eat('\"')){stream.skipToEnd();return'comment'}}
if(sol&&ch==='.'){if(stream.match('B ')||stream.match('I ')||stream.match('R ')){return'attribute'}
if(stream.match('TH ')||stream.match('SH ')||stream.match('SS ')||stream.match('HP ')){stream.skipToEnd();return'quote'}
if((stream.match(/[A-Z]/)&&stream.match(/[A-Z]/))||(stream.match(/[a-z]/)&&stream.match(/[a-z]/))){return'attribute'}}
stream.eatWhile(/[\w-]/);var cur=stream.current();return words.hasOwnProperty(cur)?words[cur]:null}
function tokenize(stream,state){return(state.tokens[0]||tokenBase)(stream,state)};return{startState:function(){return{tokens:[]}},token:function(stream,state){return tokenize(stream,state)}}});CodeMirror.defineMIME('text/troff','troff');CodeMirror.defineMIME('text/x-troff','troff');CodeMirror.defineMIME('application/x-troff','troff')})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("ttcn",function(config,parserConfig){var indentUnit=config.indentUnit,keywords=parserConfig.keywords||{},builtin=parserConfig.builtin||{},timerOps=parserConfig.timerOps||{},portOps=parserConfig.portOps||{},configOps=parserConfig.configOps||{},verdictOps=parserConfig.verdictOps||{},sutOps=parserConfig.sutOps||{},functionOps=parserConfig.functionOps||{},verdictConsts=parserConfig.verdictConsts||{},booleanConsts=parserConfig.booleanConsts||{},otherConsts=parserConfig.otherConsts||{},types=parserConfig.types||{},visibilityModifiers=parserConfig.visibilityModifiers||{},templateMatch=parserConfig.templateMatch||{},multiLineStrings=parserConfig.multiLineStrings,indentStatements=parserConfig.indentStatements!==!1;var isOperatorChar=/[+\-*&@=<>!\/]/;var curPunc;function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(/[\[\]{}\(\),;\\:\?\.]/.test(ch)){curPunc=ch;return"punctuation"}
if(ch=="#"){stream.skipToEnd();return"atom preprocessor"}
if(ch=="%"){stream.eatWhile(/\b/);return"atom ttcn3Macros"}
if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}
if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}
if(stream.eat("/")){stream.skipToEnd();return"comment"}}
if(isOperatorChar.test(ch)){if(ch=="@"){if(stream.match("try")||stream.match("catch")||stream.match("lazy")){return"keyword"}}
stream.eatWhile(isOperatorChar);return"operator"}
stream.eatWhile(/[\w\$_\xa1-\uffff]/);var cur=stream.current();if(keywords.propertyIsEnumerable(cur))return"keyword";if(builtin.propertyIsEnumerable(cur))return"builtin";if(timerOps.propertyIsEnumerable(cur))return"def timerOps";if(configOps.propertyIsEnumerable(cur))return"def configOps";if(verdictOps.propertyIsEnumerable(cur))return"def verdictOps";if(portOps.propertyIsEnumerable(cur))return"def portOps";if(sutOps.propertyIsEnumerable(cur))return"def sutOps";if(functionOps.propertyIsEnumerable(cur))return"def functionOps";if(verdictConsts.propertyIsEnumerable(cur))return"string verdictConsts";if(booleanConsts.propertyIsEnumerable(cur))return"string booleanConsts";if(otherConsts.propertyIsEnumerable(cur))return"string otherConsts";if(types.propertyIsEnumerable(cur))return"builtin types";if(visibilityModifiers.propertyIsEnumerable(cur))
return"builtin visibilityModifiers";if(templateMatch.propertyIsEnumerable(cur))return"atom templateMatch";return"variable"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){var afterQuote=stream.peek();if(afterQuote){afterQuote=afterQuote.toLowerCase();if(afterQuote=="b"||afterQuote=="h"||afterQuote=="o")
stream.next()}
end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!(escaped||multiLineStrings))
state.tokenize=null;return"string"}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=null;break}
maybeEnd=(ch=="*")}
return"comment"}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}
function pushContext(state,col,type){var indent=state.indented;if(state.context&&state.context.type=="statement")
indent=state.context.indented;return state.context=new Context(indent,col,type,null,state.context)}
function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}")
state.indented=state.context.indented;return state.context=state.context.prev}
return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",!1),indented:0,startOfLine:!0}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0}
if(stream.eatSpace())return null;curPunc=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment")return style;if(ctx.align==null)ctx.align=!0;if((curPunc==";"||curPunc==":"||curPunc==",")&&ctx.type=="statement"){popContext(state)}else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state);}else if(curPunc==ctx.type)popContext(state);else if(indentStatements&&(((ctx.type=="}"||ctx.type=="top")&&curPunc!=';')||(ctx.type=="statement"&&curPunc=="newstatement")))
pushContext(state,stream.column(),"statement");state.startOfLine=!1;return style},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
function def(mimes,mode){if(typeof mimes=="string")mimes=[mimes];var words=[];function add(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))
words.push(prop);}
add(mode.keywords);add(mode.builtin);add(mode.timerOps);add(mode.portOps);if(words.length){mode.helperType=mimes[0];CodeMirror.registerHelper("hintWords",mimes[0],words)}
for(var i=0;i<mimes.length;++i)
CodeMirror.defineMIME(mimes[i],mode);}
def(["text/x-ttcn","text/x-ttcn3","text/x-ttcnpp"],{name:"ttcn",keywords:words("activate address alive all alt altstep and and4b any"+" break case component const continue control deactivate"+" display do else encode enumerated except exception"+" execute extends extension external for from function"+" goto group if import in infinity inout interleave"+" label language length log match message mixed mod"+" modifies module modulepar mtc noblock not not4b nowait"+" of on optional or or4b out override param pattern port"+" procedure record recursive rem repeat return runs select"+" self sender set signature system template testcase to"+" type union value valueof var variant while with xor xor4b"),builtin:words("bit2hex bit2int bit2oct bit2str char2int char2oct encvalue"+" decomp decvalue float2int float2str hex2bit hex2int"+" hex2oct hex2str int2bit int2char int2float int2hex"+" int2oct int2str int2unichar isbound ischosen ispresent"+" isvalue lengthof log2str oct2bit oct2char oct2hex oct2int"+" oct2str regexp replace rnd sizeof str2bit str2float"+" str2hex str2int str2oct substr unichar2int unichar2char"+" enum2int"),types:words("anytype bitstring boolean char charstring default float"+" hexstring integer objid octetstring universal verdicttype timer"),timerOps:words("read running start stop timeout"),portOps:words("call catch check clear getcall getreply halt raise receive"+" reply send trigger"),configOps:words("create connect disconnect done kill killed map unmap"),verdictOps:words("getverdict setverdict"),sutOps:words("action"),functionOps:words("apply derefers refers"),verdictConsts:words("error fail inconc none pass"),booleanConsts:words("true false"),otherConsts:words("null NULL omit"),visibilityModifiers:words("private public friend"),templateMatch:words("complement ifpresent subset superset permutation"),multiLineStrings:!0})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("ttcn-cfg",function(config,parserConfig){var indentUnit=config.indentUnit,keywords=parserConfig.keywords||{},fileNCtrlMaskOptions=parserConfig.fileNCtrlMaskOptions||{},externalCommands=parserConfig.externalCommands||{},multiLineStrings=parserConfig.multiLineStrings,indentStatements=parserConfig.indentStatements!==!1;var isOperatorChar=/[\|]/;var curPunc;function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(/[:=]/.test(ch)){curPunc=ch;return"punctuation"}
if(ch=="#"){stream.skipToEnd();return"comment"}
if(/\d/.test(ch)){stream.eatWhile(/[\w\.]/);return"number"}
if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}
if(ch=="["){stream.eatWhile(/[\w_\]]/);return"number sectionTitle"}
stream.eatWhile(/[\w\$_]/);var cur=stream.current();if(keywords.propertyIsEnumerable(cur))return"keyword";if(fileNCtrlMaskOptions.propertyIsEnumerable(cur))
return"negative fileNCtrlMaskOptions";if(externalCommands.propertyIsEnumerable(cur))return"negative externalCommands";return"variable"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){var afterNext=stream.peek();if(afterNext){afterNext=afterNext.toLowerCase();if(afterNext=="b"||afterNext=="h"||afterNext=="o")
stream.next()}
end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!(escaped||multiLineStrings))
state.tokenize=null;return"string"}}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}
function pushContext(state,col,type){var indent=state.indented;if(state.context&&state.context.type=="statement")
indent=state.context.indented;return state.context=new Context(indent,col,type,null,state.context)}
function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}")
state.indented=state.context.indented;return state.context=state.context.prev}
return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",!1),indented:0,startOfLine:!0}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0}
if(stream.eatSpace())return null;curPunc=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment")return style;if(ctx.align==null)ctx.align=!0;if((curPunc==";"||curPunc==":"||curPunc==",")&&ctx.type=="statement"){popContext(state)}else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state);}else if(curPunc==ctx.type)popContext(state);else if(indentStatements&&(((ctx.type=="}"||ctx.type=="top")&&curPunc!=';')||(ctx.type=="statement"&&curPunc=="newstatement")))
pushContext(state,stream.column(),"statement");state.startOfLine=!1;return style},electricChars:"{}",lineComment:"#",fold:"brace"}});function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)
obj[words[i]]=!0;return obj}
CodeMirror.defineMIME("text/x-ttcn-cfg",{name:"ttcn-cfg",keywords:words("Yes No LogFile FileMask ConsoleMask AppendFile"+" TimeStampFormat LogEventTypes SourceInfoFormat"+" LogEntityName LogSourceInfo DiskFullAction"+" LogFileNumber LogFileSize MatchingHints Detailed"+" Compact SubCategories Stack Single None Seconds"+" DateTime Time Stop Error Retry Delete TCPPort KillTimer"+" NumHCs UnixSocketsEnabled LocalAddress"),fileNCtrlMaskOptions:words("TTCN_EXECUTOR TTCN_ERROR TTCN_WARNING"+" TTCN_PORTEVENT TTCN_TIMEROP TTCN_VERDICTOP"+" TTCN_DEFAULTOP TTCN_TESTCASE TTCN_ACTION"+" TTCN_USER TTCN_FUNCTION TTCN_STATISTICS"+" TTCN_PARALLEL TTCN_MATCHING TTCN_DEBUG"+" EXECUTOR ERROR WARNING PORTEVENT TIMEROP"+" VERDICTOP DEFAULTOP TESTCASE ACTION USER"+" FUNCTION STATISTICS PARALLEL MATCHING DEBUG"+" LOG_ALL LOG_NOTHING ACTION_UNQUALIFIED"+" DEBUG_ENCDEC DEBUG_TESTPORT"+" DEBUG_UNQUALIFIED DEFAULTOP_ACTIVATE"+" DEFAULTOP_DEACTIVATE DEFAULTOP_EXIT"+" DEFAULTOP_UNQUALIFIED ERROR_UNQUALIFIED"+" EXECUTOR_COMPONENT EXECUTOR_CONFIGDATA"+" EXECUTOR_EXTCOMMAND EXECUTOR_LOGOPTIONS"+" EXECUTOR_RUNTIME EXECUTOR_UNQUALIFIED"+" FUNCTION_RND FUNCTION_UNQUALIFIED"+" MATCHING_DONE MATCHING_MCSUCCESS"+" MATCHING_MCUNSUCC MATCHING_MMSUCCESS"+" MATCHING_MMUNSUCC MATCHING_PCSUCCESS"+" MATCHING_PCUNSUCC MATCHING_PMSUCCESS"+" MATCHING_PMUNSUCC MATCHING_PROBLEM"+" MATCHING_TIMEOUT MATCHING_UNQUALIFIED"+" PARALLEL_PORTCONN PARALLEL_PORTMAP"+" PARALLEL_PTC PARALLEL_UNQUALIFIED"+" PORTEVENT_DUALRECV PORTEVENT_DUALSEND"+" PORTEVENT_MCRECV PORTEVENT_MCSEND"+" PORTEVENT_MMRECV PORTEVENT_MMSEND"+" PORTEVENT_MQUEUE PORTEVENT_PCIN"+" PORTEVENT_PCOUT PORTEVENT_PMIN"+" PORTEVENT_PMOUT PORTEVENT_PQUEUE"+" PORTEVENT_STATE PORTEVENT_UNQUALIFIED"+" STATISTICS_UNQUALIFIED STATISTICS_VERDICT"+" TESTCASE_FINISH TESTCASE_START"+" TESTCASE_UNQUALIFIED TIMEROP_GUARD"+" TIMEROP_READ TIMEROP_START TIMEROP_STOP"+" TIMEROP_TIMEOUT TIMEROP_UNQUALIFIED"+" USER_UNQUALIFIED VERDICTOP_FINAL"+" VERDICTOP_GETVERDICT VERDICTOP_SETVERDICT"+" VERDICTOP_UNQUALIFIED WARNING_UNQUALIFIED"),externalCommands:words("BeginControlPart EndControlPart BeginTestCase"+" EndTestCase"),multiLineStrings:!0})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("turtle",function(config){var indentUnit=config.indentUnit;var curPunc;function wordRegexp(words){return new RegExp("^(?:"+words.join("|")+")$","i")}
var ops=wordRegexp([]);var keywords=wordRegexp(["@prefix","@base","a"]);var operatorChars=/[*+\-<>=&|]/;function tokenBase(stream,state){var ch=stream.next();curPunc=null;if(ch=="<"&&!stream.match(/^[\s\u00a0=]/,!1)){stream.match(/^[^\s\u00a0>]*>?/);return"atom"}else if(ch=="\""||ch=="'"){state.tokenize=tokenLiteral(ch);return state.tokenize(stream,state)}else if(/[{}\(\),\.;\[\]]/.test(ch)){curPunc=ch;return null}else if(ch=="#"){stream.skipToEnd();return"comment"}else if(operatorChars.test(ch)){stream.eatWhile(operatorChars);return null}else if(ch==":"){return"operator"}else{stream.eatWhile(/[_\w\d]/);if(stream.peek()==":"){return"variable-3"}else{var word=stream.current();if(keywords.test(word)){return"meta"}
if(ch>="A"&&ch<="Z"){return"comment"}else{return"keyword"}}
var word=stream.current();if(ops.test(word))
return null;else if(keywords.test(word))
return"meta";else return"variable"}}
function tokenLiteral(quote){return function(stream,state){var escaped=!1,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){state.tokenize=tokenBase;break}
escaped=!escaped&&ch=="\\"}
return"string"}}
function pushContext(state,type,col){state.context={prev:state.context,indent:state.indent,col:col,type:type}}
function popContext(state){state.indent=state.context.indent;state.context=state.context.prev}
return{startState:function(){return{tokenize:tokenBase,context:null,indent:0,col:0}},token:function(stream,state){if(stream.sol()){if(state.context&&state.context.align==null)state.context.align=!1;state.indent=stream.indentation()}
if(stream.eatSpace())return null;var style=state.tokenize(stream,state);if(style!="comment"&&state.context&&state.context.align==null&&state.context.type!="pattern"){state.context.align=!0}
if(curPunc=="(")pushContext(state,")",stream.column());else if(curPunc=="[")pushContext(state,"]",stream.column());else if(curPunc=="{")pushContext(state,"}",stream.column());else if(/[\]\}\)]/.test(curPunc)){while(state.context&&state.context.type=="pattern")popContext(state);if(state.context&&curPunc==state.context.type)popContext(state)}else if(curPunc=="."&&state.context&&state.context.type=="pattern")popContext(state);else if(/atom|string|variable/.test(style)&&state.context){if(/[\}\]]/.test(state.context.type))
pushContext(state,"pattern",stream.column());else if(state.context.type=="pattern"&&!state.context.align){state.context.align=!0;state.context.col=stream.column()}}
return style},indent:function(state,textAfter){var firstChar=textAfter&&textAfter.charAt(0);var context=state.context;if(/[\]\}]/.test(firstChar))
while(context&&context.type=="pattern")context=context.prev;var closing=context&&firstChar==context.type;if(!context)
return 0;else if(context.type=="pattern")
return context.col;else if(context.align)
return context.col+(closing?0:1);else return context.indent+(closing?0:indentUnit)},lineComment:"#"}});CodeMirror.defineMIME("text/turtle","turtle")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../../addon/mode/multiplex"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../../addon/mode/multiplex"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("twig:inner",function(){var keywords=["and","as","autoescape","endautoescape","block","do","endblock","else","elseif","extends","for","endfor","embed","endembed","filter","endfilter","flush","from","if","endif","in","is","include","import","not","or","set","spaceless","endspaceless","with","endwith","trans","endtrans","blocktrans","endblocktrans","macro","endmacro","use","verbatim","endverbatim"],operator=/^[+\-*&%=<>!?|~^]/,sign=/^[:\[\(\{]/,atom=["true","false","null","empty","defined","divisibleby","divisible by","even","odd","iterable","sameas","same as"],number=/^(\d[+\-\*\/])?\d+(\.\d+)?/;keywords=new RegExp("(("+keywords.join(")|(")+"))\\b");atom=new RegExp("(("+atom.join(")|(")+"))\\b");function tokenBase(stream,state){var ch=stream.peek();if(state.incomment){if(!stream.skipTo("#}")){stream.skipToEnd()}else{stream.eatWhile(/\#|}/);state.incomment=!1}
return"comment"}else if(state.intag){if(state.operator){state.operator=!1;if(stream.match(atom)){return"atom"}
if(stream.match(number)){return"number"}}
if(state.sign){state.sign=!1;if(stream.match(atom)){return"atom"}
if(stream.match(number)){return"number"}}
if(state.instring){if(ch==state.instring){state.instring=!1}
stream.next();return"string"}else if(ch=="'"||ch=='"'){state.instring=ch;stream.next();return"string"}else if(stream.match(state.intag+"}")||stream.eat("-")&&stream.match(state.intag+"}")){state.intag=!1;return"tag"}else if(stream.match(operator)){state.operator=!0;return"operator"}else if(stream.match(sign)){state.sign=!0}else{if(stream.eat(" ")||stream.sol()){if(stream.match(keywords)){return"keyword"}
if(stream.match(atom)){return"atom"}
if(stream.match(number)){return"number"}
if(stream.sol()){stream.next()}}else{stream.next()}}
return"variable"}else if(stream.eat("{")){if(ch=stream.eat("#")){state.incomment=!0;if(!stream.skipTo("#}")){stream.skipToEnd()}else{stream.eatWhile(/\#|}/);state.incomment=!1}
return"comment"}else if(ch=stream.eat(/\{|%/)){state.intag=ch;if(ch=="{"){state.intag="}"}
stream.eat("-");return"tag"}}
stream.next()};return{startState:function(){return{}},token:function(stream,state){return tokenBase(stream,state)}}});CodeMirror.defineMode("twig",function(config,parserConfig){var twigInner=CodeMirror.getMode(config,"twig:inner");if(!parserConfig||!parserConfig.base)return twigInner;return CodeMirror.multiplexingMode(CodeMirror.getMode(config,parserConfig.base),{open:/\{[{#%]/,close:/[}#%]\}/,mode:twigInner,parseDelimiters:!0})});CodeMirror.defineMIME("text/x-twig","twig")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("vb",function(conf,parserConf){var ERRORCLASS='error';function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b","i")}
var singleOperators=new RegExp("^[\\+\\-\\*/%&\\\\|\\^~<>!]");var singleDelimiters=new RegExp('^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]');var doubleOperators=new RegExp("^((==)|(<>)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))");var doubleDelimiters=new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))");var tripleDelimiters=new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))");var identifiers=new RegExp("^[_A-Za-z][_A-Za-z0-9]*");var openingKeywords=['class','module','sub','enum','select','while','if','function','get','set','property','try'];var middleKeywords=['else','elseif','case','catch'];var endKeywords=['next','loop'];var operatorKeywords=['and','or','not','xor','in'];var wordOperators=wordRegexp(operatorKeywords);var commonKeywords=['as','dim','break','continue','optional','then','until','goto','byval','byref','new','handles','property','return','const','private','protected','friend','public','shared','static','true','false'];var commontypes=['integer','string','double','decimal','boolean','short','char','float','single'];var keywords=wordRegexp(commonKeywords);var types=wordRegexp(commontypes);var stringPrefixes='"';var opening=wordRegexp(openingKeywords);var middle=wordRegexp(middleKeywords);var closing=wordRegexp(endKeywords);var doubleClosing=wordRegexp(['end']);var doOpening=wordRegexp(['do']);var indentInfo=null;CodeMirror.registerHelper("hintWords","vb",openingKeywords.concat(middleKeywords).concat(endKeywords).concat(operatorKeywords).concat(commonKeywords).concat(commontypes));function indent(_stream,state){state.currentIndent++}
function dedent(_stream,state){state.currentIndent--}
function tokenBase(stream,state){if(stream.eatSpace()){return null}
var ch=stream.peek();if(ch==="'"){stream.skipToEnd();return'comment'}
if(stream.match(/^((&H)|(&O))?[0-9\.a-f]/i,!1)){var floatLiteral=!1;if(stream.match(/^\d*\.\d+F?/i)){floatLiteral=!0}else if(stream.match(/^\d+\.\d*F?/)){floatLiteral=!0}else if(stream.match(/^\.\d+F?/)){floatLiteral=!0}
if(floatLiteral){stream.eat(/J/i);return'number'}
var intLiteral=!1;if(stream.match(/^&H[0-9a-f]+/i)){intLiteral=!0}else if(stream.match(/^&O[0-7]+/i)){intLiteral=!0}else if(stream.match(/^[1-9]\d*F?/)){stream.eat(/J/i);intLiteral=!0}else if(stream.match(/^0(?![\dx])/i)){intLiteral=!0}
if(intLiteral){stream.eat(/L/i);return'number'}}
if(stream.match(stringPrefixes)){state.tokenize=tokenStringFactory(stream.current());return state.tokenize(stream,state)}
if(stream.match(tripleDelimiters)||stream.match(doubleDelimiters)){return null}
if(stream.match(doubleOperators)||stream.match(singleOperators)||stream.match(wordOperators)){return'operator'}
if(stream.match(singleDelimiters)){return null}
if(stream.match(doOpening)){indent(stream,state);state.doInCurrentLine=!0;return'keyword'}
if(stream.match(opening)){if(!state.doInCurrentLine)
indent(stream,state);else state.doInCurrentLine=!1;return'keyword'}
if(stream.match(middle)){return'keyword'}
if(stream.match(doubleClosing)){dedent(stream,state);dedent(stream,state);return'keyword'}
if(stream.match(closing)){dedent(stream,state);return'keyword'}
if(stream.match(types)){return'keyword'}
if(stream.match(keywords)){return'keyword'}
if(stream.match(identifiers)){return'variable'}
stream.next();return ERRORCLASS}
function tokenStringFactory(delimiter){var singleline=delimiter.length==1;var OUTCLASS='string';return function(stream,state){while(!stream.eol()){stream.eatWhile(/[^'"]/);if(stream.match(delimiter)){state.tokenize=tokenBase;return OUTCLASS}else{stream.eat(/['"]/)}}
if(singleline){if(parserConf.singleLineStringErrors){return ERRORCLASS}else{state.tokenize=tokenBase}}
return OUTCLASS}}
function tokenLexer(stream,state){var style=state.tokenize(stream,state);var current=stream.current();if(current==='.'){style=state.tokenize(stream,state);current=stream.current();if(style==='variable'){return'variable'}else{return ERRORCLASS}}
var delimiter_index='[({'.indexOf(current);if(delimiter_index!==-1){indent(stream,state)}
if(indentInfo==='dedent'){if(dedent(stream,state)){return ERRORCLASS}}
delimiter_index='])}'.indexOf(current);if(delimiter_index!==-1){if(dedent(stream,state)){return ERRORCLASS}}
return style}
var external={electricChars:"dDpPtTfFeE ",startState:function(){return{tokenize:tokenBase,lastToken:null,currentIndent:0,nextLineIndent:0,doInCurrentLine:!1}},token:function(stream,state){if(stream.sol()){state.currentIndent+=state.nextLineIndent;state.nextLineIndent=0;state.doInCurrentLine=0}
var style=tokenLexer(stream,state);state.lastToken={style:style,content:stream.current()};return style},indent:function(state,textAfter){var trueText=textAfter.replace(/^\s+|\s+$/g,'');if(trueText.match(closing)||trueText.match(doubleClosing)||trueText.match(middle))return conf.indentUnit*(state.currentIndent-1);if(state.currentIndent<0)return 0;return state.currentIndent*conf.indentUnit},lineComment:"'"};return external});CodeMirror.defineMIME("text/x-vb","vb")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("vbscript",function(conf,parserConf){var ERRORCLASS='error';function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b","i")}
var singleOperators=new RegExp("^[\\+\\-\\*/&\\\\\\^<>=]");var doubleOperators=new RegExp("^((<>)|(<=)|(>=))");var singleDelimiters=new RegExp('^[\\.,]');var brakets=new RegExp('^[\\(\\)]');var identifiers=new RegExp("^[A-Za-z][_A-Za-z0-9]*");var openingKeywords=['class','sub','select','while','if','function','property','with','for'];var middleKeywords=['else','elseif','case'];var endKeywords=['next','loop','wend'];var wordOperators=wordRegexp(['and','or','not','xor','is','mod','eqv','imp']);var commonkeywords=['dim','redim','then','until','randomize','byval','byref','new','property','exit','in','const','private','public','get','set','let','stop','on error resume next','on error goto 0','option explicit','call','me'];var atomWords=['true','false','nothing','empty','null'];var builtinFuncsWords=['abs','array','asc','atn','cbool','cbyte','ccur','cdate','cdbl','chr','cint','clng','cos','csng','cstr','date','dateadd','datediff','datepart','dateserial','datevalue','day','escape','eval','execute','exp','filter','formatcurrency','formatdatetime','formatnumber','formatpercent','getlocale','getobject','getref','hex','hour','inputbox','instr','instrrev','int','fix','isarray','isdate','isempty','isnull','isnumeric','isobject','join','lbound','lcase','left','len','loadpicture','log','ltrim','rtrim','trim','maths','mid','minute','month','monthname','msgbox','now','oct','replace','rgb','right','rnd','round','scriptengine','scriptenginebuildversion','scriptenginemajorversion','scriptengineminorversion','second','setlocale','sgn','sin','space','split','sqr','strcomp','string','strreverse','tan','time','timer','timeserial','timevalue','typename','ubound','ucase','unescape','vartype','weekday','weekdayname','year'];var builtinConsts=['vbBlack','vbRed','vbGreen','vbYellow','vbBlue','vbMagenta','vbCyan','vbWhite','vbBinaryCompare','vbTextCompare','vbSunday','vbMonday','vbTuesday','vbWednesday','vbThursday','vbFriday','vbSaturday','vbUseSystemDayOfWeek','vbFirstJan1','vbFirstFourDays','vbFirstFullWeek','vbGeneralDate','vbLongDate','vbShortDate','vbLongTime','vbShortTime','vbObjectError','vbOKOnly','vbOKCancel','vbAbortRetryIgnore','vbYesNoCancel','vbYesNo','vbRetryCancel','vbCritical','vbQuestion','vbExclamation','vbInformation','vbDefaultButton1','vbDefaultButton2','vbDefaultButton3','vbDefaultButton4','vbApplicationModal','vbSystemModal','vbOK','vbCancel','vbAbort','vbRetry','vbIgnore','vbYes','vbNo','vbCr','VbCrLf','vbFormFeed','vbLf','vbNewLine','vbNullChar','vbNullString','vbTab','vbVerticalTab','vbUseDefault','vbTrue','vbFalse','vbEmpty','vbNull','vbInteger','vbLong','vbSingle','vbDouble','vbCurrency','vbDate','vbString','vbObject','vbError','vbBoolean','vbVariant','vbDataObject','vbDecimal','vbByte','vbArray'];var builtinObjsWords=['WScript','err','debug','RegExp'];var knownProperties=['description','firstindex','global','helpcontext','helpfile','ignorecase','length','number','pattern','source','value','count'];var knownMethods=['clear','execute','raise','replace','test','write','writeline','close','open','state','eof','update','addnew','end','createobject','quit'];var aspBuiltinObjsWords=['server','response','request','session','application'];var aspKnownProperties=['buffer','cachecontrol','charset','contenttype','expires','expiresabsolute','isclientconnected','pics','status','clientcertificate','cookies','form','querystring','servervariables','totalbytes','contents','staticobjects','codepage','lcid','sessionid','timeout','scripttimeout'];var aspKnownMethods=['addheader','appendtolog','binarywrite','end','flush','redirect','binaryread','remove','removeall','lock','unlock','abandon','getlasterror','htmlencode','mappath','transfer','urlencode'];var knownWords=knownMethods.concat(knownProperties);builtinObjsWords=builtinObjsWords.concat(builtinConsts);if(conf.isASP){builtinObjsWords=builtinObjsWords.concat(aspBuiltinObjsWords);knownWords=knownWords.concat(aspKnownMethods,aspKnownProperties)};var keywords=wordRegexp(commonkeywords);var atoms=wordRegexp(atomWords);var builtinFuncs=wordRegexp(builtinFuncsWords);var builtinObjs=wordRegexp(builtinObjsWords);var known=wordRegexp(knownWords);var stringPrefixes='"';var opening=wordRegexp(openingKeywords);var middle=wordRegexp(middleKeywords);var closing=wordRegexp(endKeywords);var doubleClosing=wordRegexp(['end']);var doOpening=wordRegexp(['do']);var noIndentWords=wordRegexp(['on error resume next','exit']);var comment=wordRegexp(['rem']);function indent(_stream,state){state.currentIndent++}
function dedent(_stream,state){state.currentIndent--}
function tokenBase(stream,state){if(stream.eatSpace()){return'space'}
var ch=stream.peek();if(ch==="'"){stream.skipToEnd();return'comment'}
if(stream.match(comment)){stream.skipToEnd();return'comment'}
if(stream.match(/^((&H)|(&O))?[0-9\.]/i,!1)&&!stream.match(/^((&H)|(&O))?[0-9\.]+[a-z_]/i,!1)){var floatLiteral=!1;if(stream.match(/^\d*\.\d+/i)){floatLiteral=!0}else if(stream.match(/^\d+\.\d*/)){floatLiteral=!0}else if(stream.match(/^\.\d+/)){floatLiteral=!0}
if(floatLiteral){stream.eat(/J/i);return'number'}
var intLiteral=!1;if(stream.match(/^&H[0-9a-f]+/i)){intLiteral=!0}else if(stream.match(/^&O[0-7]+/i)){intLiteral=!0}else if(stream.match(/^[1-9]\d*F?/)){stream.eat(/J/i);intLiteral=!0}else if(stream.match(/^0(?![\dx])/i)){intLiteral=!0}
if(intLiteral){stream.eat(/L/i);return'number'}}
if(stream.match(stringPrefixes)){state.tokenize=tokenStringFactory(stream.current());return state.tokenize(stream,state)}
if(stream.match(doubleOperators)||stream.match(singleOperators)||stream.match(wordOperators)){return'operator'}
if(stream.match(singleDelimiters)){return null}
if(stream.match(brakets)){return"bracket"}
if(stream.match(noIndentWords)){state.doInCurrentLine=!0;return'keyword'}
if(stream.match(doOpening)){indent(stream,state);state.doInCurrentLine=!0;return'keyword'}
if(stream.match(opening)){if(!state.doInCurrentLine)
indent(stream,state);else state.doInCurrentLine=!1;return'keyword'}
if(stream.match(middle)){return'keyword'}
if(stream.match(doubleClosing)){dedent(stream,state);dedent(stream,state);return'keyword'}
if(stream.match(closing)){if(!state.doInCurrentLine)
dedent(stream,state);else state.doInCurrentLine=!1;return'keyword'}
if(stream.match(keywords)){return'keyword'}
if(stream.match(atoms)){return'atom'}
if(stream.match(known)){return'variable-2'}
if(stream.match(builtinFuncs)){return'builtin'}
if(stream.match(builtinObjs)){return'variable-2'}
if(stream.match(identifiers)){return'variable'}
stream.next();return ERRORCLASS}
function tokenStringFactory(delimiter){var singleline=delimiter.length==1;var OUTCLASS='string';return function(stream,state){while(!stream.eol()){stream.eatWhile(/[^'"]/);if(stream.match(delimiter)){state.tokenize=tokenBase;return OUTCLASS}else{stream.eat(/['"]/)}}
if(singleline){if(parserConf.singleLineStringErrors){return ERRORCLASS}else{state.tokenize=tokenBase}}
return OUTCLASS}}
function tokenLexer(stream,state){var style=state.tokenize(stream,state);var current=stream.current();if(current==='.'){style=state.tokenize(stream,state);current=stream.current();if(style&&(style.substr(0,8)==='variable'||style==='builtin'||style==='keyword')){if(style==='builtin'||style==='keyword')style='variable';if(knownWords.indexOf(current.substr(1))>-1)style='variable-2';return style}else{return ERRORCLASS}}
return style}
var external={electricChars:"dDpPtTfFeE ",startState:function(){return{tokenize:tokenBase,lastToken:null,currentIndent:0,nextLineIndent:0,doInCurrentLine:!1,ignoreKeyword:!1}},token:function(stream,state){if(stream.sol()){state.currentIndent+=state.nextLineIndent;state.nextLineIndent=0;state.doInCurrentLine=0}
var style=tokenLexer(stream,state);state.lastToken={style:style,content:stream.current()};if(style==='space')style=null;return style},indent:function(state,textAfter){var trueText=textAfter.replace(/^\s+|\s+$/g,'');if(trueText.match(closing)||trueText.match(doubleClosing)||trueText.match(middle))return conf.indentUnit*(state.currentIndent-1);if(state.currentIndent<0)return 0;return state.currentIndent*conf.indentUnit}};return external});CodeMirror.defineMIME("text/vbscript","vbscript")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("velocity",function(){function parseWords(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var keywords=parseWords("#end #else #break #stop #[[ #]] "+"#{end} #{else} #{break} #{stop}");var functions=parseWords("#if #elseif #foreach #set #include #parse #macro #define #evaluate "+"#{if} #{elseif} #{foreach} #{set} #{include} #{parse} #{macro} #{define} #{evaluate}");var specials=parseWords("$foreach.count $foreach.hasNext $foreach.first $foreach.last $foreach.topmost $foreach.parent.count $foreach.parent.hasNext $foreach.parent.first $foreach.parent.last $foreach.parent $velocityCount $!bodyContent $bodyContent");var isOperatorChar=/[+\-*&%=<>!?:\/|]/;function chain(stream,state,f){state.tokenize=f;return f(stream,state)}
function tokenBase(stream,state){var beforeParams=state.beforeParams;state.beforeParams=!1;var ch=stream.next();if((ch=="'")&&!state.inString&&state.inParams){state.lastTokenWasBuiltin=!1;return chain(stream,state,tokenString(ch))}else if((ch=='"')){state.lastTokenWasBuiltin=!1;if(state.inString){state.inString=!1;return"string"}else if(state.inParams)
return chain(stream,state,tokenString(ch))}else if(/[\[\]{}\(\),;\.]/.test(ch)){if(ch=="("&&beforeParams)
state.inParams=!0;else if(ch==")"){state.inParams=!1;state.lastTokenWasBuiltin=!0}
return null}else if(/\d/.test(ch)){state.lastTokenWasBuiltin=!1;stream.eatWhile(/[\w\.]/);return"number"}else if(ch=="#"&&stream.eat("*")){state.lastTokenWasBuiltin=!1;return chain(stream,state,tokenComment)}else if(ch=="#"&&stream.match(/ *\[ *\[/)){state.lastTokenWasBuiltin=!1;return chain(stream,state,tokenUnparsed)}else if(ch=="#"&&stream.eat("#")){state.lastTokenWasBuiltin=!1;stream.skipToEnd();return"comment"}else if(ch=="$"){stream.eatWhile(/[\w\d\$_\.{}]/);if(specials&&specials.propertyIsEnumerable(stream.current())){return"keyword"}else{state.lastTokenWasBuiltin=!0;state.beforeParams=!0;return"builtin"}}else if(isOperatorChar.test(ch)){state.lastTokenWasBuiltin=!1;stream.eatWhile(isOperatorChar);return"operator"}else{stream.eatWhile(/[\w\$_{}@]/);var word=stream.current();if(keywords&&keywords.propertyIsEnumerable(word))
return"keyword";if(functions&&functions.propertyIsEnumerable(word)||(stream.current().match(/^#@?[a-z0-9_]+ *$/i)&&stream.peek()=="(")&&!(functions&&functions.propertyIsEnumerable(word.toLowerCase()))){state.beforeParams=!0;state.lastTokenWasBuiltin=!1;return"keyword"}
if(state.inString){state.lastTokenWasBuiltin=!1;return"string"}
if(stream.pos>word.length&&stream.string.charAt(stream.pos-word.length-1)=="."&&state.lastTokenWasBuiltin)
return"builtin";state.lastTokenWasBuiltin=!1;return null}}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if((next==quote)&&!escaped){end=!0;break}
if(quote=='"'&&stream.peek()=='$'&&!escaped){state.inString=!0;end=!0;break}
escaped=!escaped&&next=="\\"}
if(end)state.tokenize=tokenBase;return"string"}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="#"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return"comment"}
function tokenUnparsed(stream,state){var maybeEnd=0,ch;while(ch=stream.next()){if(ch=="#"&&maybeEnd==2){state.tokenize=tokenBase;break}
if(ch=="]")
maybeEnd++;else if(ch!=" ")
maybeEnd=0}
return"meta"}
return{startState:function(){return{tokenize:tokenBase,beforeParams:!1,inParams:!1,inString:!1,lastTokenWasBuiltin:!1}},token:function(stream,state){if(stream.eatSpace())return null;return state.tokenize(stream,state)},blockCommentStart:"#*",blockCommentEnd:"*#",lineComment:"##",fold:"velocity"}});CodeMirror.defineMIME("text/velocity","velocity")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:4},"verilog");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("binary_literals","[number 1'b0]","[number 1'b1]","[number 1'bx]","[number 1'bz]","[number 1'bX]","[number 1'bZ]","[number 1'B0]","[number 1'B1]","[number 1'Bx]","[number 1'Bz]","[number 1'BX]","[number 1'BZ]","[number 1'b0]","[number 1'b1]","[number 2'b01]","[number 2'bxz]","[number 2'b11]","[number 2'b10]","[number 2'b1Z]","[number 12'b0101_0101_0101]","[number 1'b 0]","[number 'b0101]");MT("octal_literals","[number 3'o7]","[number 3'O7]","[number 3'so7]","[number 3'SO7]");MT("decimal_literals","[number 0]","[number 1]","[number 7]","[number 123_456]","[number 'd33]","[number 8'd255]","[number 8'D255]","[number 8'sd255]","[number 8'SD255]","[number 32'd123]","[number 32 'd123]","[number 32 'd 123]");MT("hex_literals","[number 4'h0]","[number 4'ha]","[number 4'hF]","[number 4'hx]","[number 4'hz]","[number 4'hX]","[number 4'hZ]","[number 32'hdc78]","[number 32'hDC78]","[number 32 'hDC78]","[number 32'h DC78]","[number 32 'h DC78]","[number 32'h44x7]","[number 32'hFFF?]");MT("real_number_literals","[number 1.2]","[number 0.1]","[number 2394.26331]","[number 1.2E12]","[number 1.2e12]","[number 1.30e-2]","[number 0.1e-0]","[number 23E10]","[number 29E-2]","[number 236.123_763_e-12]");MT("operators","[meta ^]");MT("keywords","[keyword logic]","[keyword logic] [variable foo]","[keyword reg] [variable abc]");MT("variables","[variable _leading_underscore]","[variable _if]","[number 12] [variable foo]","[variable foo] [number 14]");MT("tick_defines","[def `FOO]","[def `foo]","[def `FOO_bar]");MT("system_calls","[meta $display]","[meta $vpi_printf]");MT("line_comment","[comment // Hello world]");MT("align_port_map_style1","[variable mod] [variable mod][bracket (].[variable a][bracket (][variable a][bracket )],","        .[variable b][bracket (][variable b][bracket )]","       [bracket )];","");MT("align_port_map_style2","[variable mod] [variable mod][bracket (]","    .[variable a][bracket (][variable a][bracket )],","    .[variable b][bracket (][variable b][bracket )]","[bracket )];","");MT("indent_single_statement_if","[keyword if] [bracket (][variable foo][bracket )]","    [keyword break];","");MT("no_indent_after_single_line_if","[keyword if] [bracket (][variable foo][bracket )] [keyword break];","");MT("indent_after_if_begin_same_line","[keyword if] [bracket (][variable foo][bracket )] [keyword begin]","    [keyword break];","    [keyword break];","[keyword end]","");MT("indent_after_if_begin_next_line","[keyword if] [bracket (][variable foo][bracket )]","    [keyword begin]","        [keyword break];","        [keyword break];","    [keyword end]","");MT("indent_single_statement_if_else","[keyword if] [bracket (][variable foo][bracket )]","    [keyword break];","[keyword else]","    [keyword break];","");MT("indent_if_else_begin_same_line","[keyword if] [bracket (][variable foo][bracket )] [keyword begin]","    [keyword break];","    [keyword break];","[keyword end] [keyword else] [keyword begin]","    [keyword break];","    [keyword break];","[keyword end]","");MT("indent_if_else_begin_next_line","[keyword if] [bracket (][variable foo][bracket )]","    [keyword begin]","        [keyword break];","        [keyword break];","    [keyword end]","[keyword else]","    [keyword begin]","        [keyword break];","        [keyword break];","    [keyword end]","");MT("indent_if_nested_without_begin","[keyword if] [bracket (][variable foo][bracket )]","    [keyword if] [bracket (][variable foo][bracket )]","        [keyword if] [bracket (][variable foo][bracket )]","            [keyword break];","");MT("indent_case","[keyword case] [bracket (][variable state][bracket )]","    [variable FOO]:","        [keyword break];","    [variable BAR]:","        [keyword break];","[keyword endcase]","");MT("unindent_after_end_with_preceding_text","[keyword begin]","    [keyword break]; [keyword end]","");MT("export_function_one_line_does_not_indent","[keyword export] [string \"DPI-C\"] [keyword function] [variable helloFromSV];","");MT("export_task_one_line_does_not_indent","[keyword export] [string \"DPI-C\"] [keyword task] [variable helloFromSV];","");MT("export_function_two_lines_indents_properly","[keyword export]","    [string \"DPI-C\"] [keyword function] [variable helloFromSV];","");MT("export_task_two_lines_indents_properly","[keyword export]","    [string \"DPI-C\"] [keyword task] [variable helloFromSV];","");MT("import_function_one_line_does_not_indent","[keyword import] [string \"DPI-C\"] [keyword function] [variable helloFromC];","");MT("import_task_one_line_does_not_indent","[keyword import] [string \"DPI-C\"] [keyword task] [variable helloFromC];","");MT("import_package_single_line_does_not_indent","[keyword import] [variable p]::[variable x];","[keyword import] [variable p]::[variable y];","");MT("covergroup_with_function_indents_properly","[keyword covergroup] [variable cg] [keyword with] [keyword function] [variable sample][bracket (][keyword bit] [variable b][bracket )];","    [variable c] : [keyword coverpoint] [variable c];","[keyword endgroup]: [variable cg]","")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("verilog",function(config,parserConfig){var indentUnit=config.indentUnit,statementIndentUnit=parserConfig.statementIndentUnit||indentUnit,dontAlignCalls=parserConfig.dontAlignCalls,noIndentKeywords=parserConfig.noIndentKeywords||[],multiLineStrings=parserConfig.multiLineStrings,hooks=parserConfig.hooks||{};function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var keywords=words("accept_on alias always always_comb always_ff always_latch and assert assign assume automatic before begin bind "+"bins binsof bit break buf bufif0 bufif1 byte case casex casez cell chandle checker class clocking cmos config "+"const constraint context continue cover covergroup coverpoint cross deassign default defparam design disable "+"dist do edge else end endcase endchecker endclass endclocking endconfig endfunction endgenerate endgroup "+"endinterface endmodule endpackage endprimitive endprogram endproperty endspecify endsequence endtable endtask "+"enum event eventually expect export extends extern final first_match for force foreach forever fork forkjoin "+"function generate genvar global highz0 highz1 if iff ifnone ignore_bins illegal_bins implements implies import "+"incdir include initial inout input inside instance int integer interconnect interface intersect join join_any "+"join_none large let liblist library local localparam logic longint macromodule matches medium modport module "+"nand negedge nettype new nexttime nmos nor noshowcancelled not notif0 notif1 null or output package packed "+"parameter pmos posedge primitive priority program property protected pull0 pull1 pulldown pullup "+"pulsestyle_ondetect pulsestyle_onevent pure rand randc randcase randsequence rcmos real realtime ref reg "+"reject_on release repeat restrict return rnmos rpmos rtran rtranif0 rtranif1 s_always s_eventually s_nexttime "+"s_until s_until_with scalared sequence shortint shortreal showcancelled signed small soft solve specify "+"specparam static string strong strong0 strong1 struct super supply0 supply1 sync_accept_on sync_reject_on "+"table tagged task this throughout time timeprecision timeunit tran tranif0 tranif1 tri tri0 tri1 triand trior "+"trireg type typedef union unique unique0 unsigned until until_with untyped use uwire var vectored virtual void "+"wait wait_order wand weak weak0 weak1 while wildcard wire with within wor xnor xor");var isOperatorChar=/[\+\-\*\/!~&|^%=?:]/;var isBracketChar=/[\[\]{}()]/;var unsignedNumber=/\d[0-9_]*/;var decimalLiteral=/\d*\s*'s?d\s*\d[0-9_]*/i;var binaryLiteral=/\d*\s*'s?b\s*[xz01][xz01_]*/i;var octLiteral=/\d*\s*'s?o\s*[xz0-7][xz0-7_]*/i;var hexLiteral=/\d*\s*'s?h\s*[0-9a-fxz?][0-9a-fxz?_]*/i;var realLiteral=/(\d[\d_]*(\.\d[\d_]*)?E-?[\d_]+)|(\d[\d_]*\.\d[\d_]*)/i;var closingBracketOrWord=/^((\w+)|[)}\]])/;var closingBracket=/[)}\]]/;var curPunc;var curKeyword;var blockKeywords=words("case checker class clocking config function generate interface module package"+"primitive program property specify sequence table task");var openClose={};for(var keyword in blockKeywords){openClose[keyword]="end"+keyword}
openClose.begin="end";openClose.casex="endcase";openClose.casez="endcase";openClose["do"]="while";openClose.fork="join;join_any;join_none";openClose.covergroup="endgroup";for(var i in noIndentKeywords){var keyword=noIndentKeywords[i];if(openClose[keyword]){openClose[keyword]=undefined}}
var statementKeywords=words("always always_comb always_ff always_latch assert assign assume else export for foreach forever if import initial repeat while");function tokenBase(stream,state){var ch=stream.peek(),style;if(hooks[ch]&&(style=hooks[ch](stream,state))!=!1)return style;if(hooks.tokenBase&&(style=hooks.tokenBase(stream,state))!=!1)
return style;if(/[,;:\.]/.test(ch)){curPunc=stream.next();return null}
if(isBracketChar.test(ch)){curPunc=stream.next();return"bracket"}
if(ch=='`'){stream.next();if(stream.eatWhile(/[\w\$_]/)){return"def"}else{return null}}
if(ch=='$'){stream.next();if(stream.eatWhile(/[\w\$_]/)){return"meta"}else{return null}}
if(ch=='#'){stream.next();stream.eatWhile(/[\d_.]/);return"def"}
if(ch=='"'){stream.next();state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(ch=="/"){stream.next();if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}
if(stream.eat("/")){stream.skipToEnd();return"comment"}
stream.backUp(1)}
if(stream.match(realLiteral)||stream.match(decimalLiteral)||stream.match(binaryLiteral)||stream.match(octLiteral)||stream.match(hexLiteral)||stream.match(unsignedNumber)||stream.match(realLiteral)){return"number"}
if(stream.eatWhile(isOperatorChar)){return"meta"}
if(stream.eatWhile(/[\w\$_]/)){var cur=stream.current();if(keywords[cur]){if(openClose[cur]){curPunc="newblock"}
if(statementKeywords[cur]){curPunc="newstatement"}
curKeyword=cur;return"keyword"}
return"variable"}
stream.next();return null}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="\\"}
if(end||!(escaped||multiLineStrings))
state.tokenize=tokenBase;return"string"}}
function tokenComment(stream,state){var maybeEnd=!1,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}
maybeEnd=(ch=="*")}
return"comment"}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}
function pushContext(state,col,type){var indent=state.indented;var c=new Context(indent,col,type,null,state.context);return state.context=c}
function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}"){state.indented=state.context.indented}
return state.context=state.context.prev}
function isClosing(text,contextClosing){if(text==contextClosing){return!0}else{var closingKeywords=contextClosing.split(";");for(var i in closingKeywords){if(text==closingKeywords[i]){return!0}}
return!1}}
function buildElectricInputRegEx(){var allClosings=[];for(var i in openClose){if(openClose[i]){var closings=openClose[i].split(";");for(var j in closings){allClosings.push(closings[j])}}}
var re=new RegExp("[{}()\\[\\]]|("+allClosings.join("|")+")$");return re}
return{electricInput:buildElectricInputRegEx(),startState:function(basecolumn){var state={tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",!1),indented:0,startOfLine:!0};if(hooks.startState)hooks.startState(state);return state},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0}
if(hooks.token)hooks.token(stream,state);if(stream.eatSpace())return null;curPunc=null;curKeyword=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment"||style=="meta"||style=="variable")return style;if(ctx.align==null)ctx.align=!0;if(curPunc==ctx.type){popContext(state)}else if((curPunc==";"&&ctx.type=="statement")||(ctx.type&&isClosing(curKeyword,ctx.type))){ctx=popContext(state);while(ctx&&ctx.type=="statement")ctx=popContext(state);}else if(curPunc=="{"){pushContext(state,stream.column(),"}")}else if(curPunc=="["){pushContext(state,stream.column(),"]")}else if(curPunc=="("){pushContext(state,stream.column(),")")}else if(ctx&&ctx.type=="endcase"&&curPunc==":"){pushContext(state,stream.column(),"statement")}else if(curPunc=="newstatement"){pushContext(state,stream.column(),"statement")}else if(curPunc=="newblock"){if(curKeyword=="function"&&ctx&&(ctx.type=="statement"||ctx.type=="endgroup")){}else if(curKeyword=="task"&&ctx&&ctx.type=="statement"){}else{var close=openClose[curKeyword];pushContext(state,stream.column(),close)}}
state.startOfLine=!1;return style},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&state.tokenize!=null)return CodeMirror.Pass;if(hooks.indent){var fromHook=hooks.indent(state);if(fromHook>=0)return fromHook}
var ctx=state.context,firstChar=textAfter&&textAfter.charAt(0);if(ctx.type=="statement"&&firstChar=="}")ctx=ctx.prev;var closing=!1;var possibleClosing=textAfter.match(closingBracketOrWord);if(possibleClosing)
closing=isClosing(possibleClosing[0],ctx.type);if(ctx.type=="statement")return ctx.indented+(firstChar=="{"?0:statementIndentUnit);else if(closingBracket.test(ctx.type)&&ctx.align&&!dontAlignCalls)return ctx.column+(closing?0:1);else if(ctx.type==")"&&!closing)return ctx.indented+statementIndentUnit;else return ctx.indented+(closing?0:indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});CodeMirror.defineMIME("text/x-verilog",{name:"verilog"});CodeMirror.defineMIME("text/x-systemverilog",{name:"verilog"});var tlvchScopePrefixes={">":"property","->":"property","-":"hr","|":"link","?$":"qualifier","?*":"qualifier","@-":"variable-3","@":"variable-3","?":"qualifier"};function tlvGenIndent(stream,state){var tlvindentUnit=2;var rtnIndent=-1,indentUnitRq=0,curIndent=stream.indentation();switch(state.tlvCurCtlFlowChar){case "\\":curIndent=0;break;case "|":if(state.tlvPrevPrevCtlFlowChar=="@"){indentUnitRq=-2;break}
if(tlvchScopePrefixes[state.tlvPrevCtlFlowChar])
indentUnitRq=1;break;case "M":if(state.tlvPrevPrevCtlFlowChar=="@"){indentUnitRq=-2;break}
if(tlvchScopePrefixes[state.tlvPrevCtlFlowChar])
indentUnitRq=1;break;case "@":if(state.tlvPrevCtlFlowChar=="S")
indentUnitRq=-1;if(state.tlvPrevCtlFlowChar=="|")
indentUnitRq=1;break;case "S":if(state.tlvPrevCtlFlowChar=="@")
indentUnitRq=1;if(tlvchScopePrefixes[state.tlvPrevCtlFlowChar])
indentUnitRq=1;break}
var statementIndentUnit=tlvindentUnit;rtnIndent=curIndent+(indentUnitRq*statementIndentUnit);return rtnIndent>=0?rtnIndent:curIndent}
CodeMirror.defineMIME("text/x-tlv",{name:"verilog",hooks:{"\\":function(stream,state){var vxIndent=0,style=!1;var curPunc=stream.string;if((stream.sol())&&((/\\SV/.test(stream.string))||(/\\TLV/.test(stream.string)))){curPunc=(/\\TLV_version/.test(stream.string))?"\\TLV_version":stream.string;stream.skipToEnd();if(curPunc=="\\SV"&&state.vxCodeActive){state.vxCodeActive=!1};if((/\\TLV/.test(curPunc)&&!state.vxCodeActive)||(curPunc=="\\TLV_version"&&state.vxCodeActive)){state.vxCodeActive=!0};style="keyword";state.tlvCurCtlFlowChar=state.tlvPrevPrevCtlFlowChar=state.tlvPrevCtlFlowChar="";if(state.vxCodeActive==!0){state.tlvCurCtlFlowChar="\\";vxIndent=tlvGenIndent(stream,state)}
state.vxIndentRq=vxIndent}
return style},tokenBase:function(stream,state){var vxIndent=0,style=!1;var tlvisOperatorChar=/[\[\]=:]/;var tlvkpScopePrefixs={"**":"variable-2","*":"variable-2","$$":"variable","$":"variable","^^":"attribute","^":"attribute"};var ch=stream.peek();var vxCurCtlFlowCharValueAtStart=state.tlvCurCtlFlowChar;if(state.vxCodeActive==!0){if(/[\[\]{}\(\);\:]/.test(ch)){style="meta";stream.next()}else if(ch=="/"){stream.next();if(stream.eat("/")){stream.skipToEnd();style="comment";state.tlvCurCtlFlowChar="S"}else{stream.backUp(1)}}else if(ch=="@"){style=tlvchScopePrefixes[ch];state.tlvCurCtlFlowChar="@";stream.next();stream.eatWhile(/[\w\$_]/)}else if(stream.match(/\b[mM]4+/,!0)){stream.skipTo("(");style="def";state.tlvCurCtlFlowChar="M"}else if(ch=="!"&&stream.sol()){style="comment";stream.next()}else if(tlvisOperatorChar.test(ch)){stream.eatWhile(tlvisOperatorChar);style="operator"}else if(ch=="#"){state.tlvCurCtlFlowChar=(state.tlvCurCtlFlowChar=="")?ch:state.tlvCurCtlFlowChar;stream.next();stream.eatWhile(/[+-]\d/);style="tag"}else if(tlvkpScopePrefixs.propertyIsEnumerable(ch)){style=tlvkpScopePrefixs[ch];state.tlvCurCtlFlowChar=state.tlvCurCtlFlowChar==""?"S":state.tlvCurCtlFlowChar;stream.next();stream.match(/[a-zA-Z_0-9]+/)}else if(style=tlvchScopePrefixes[ch]||!1){state.tlvCurCtlFlowChar=state.tlvCurCtlFlowChar==""?ch:state.tlvCurCtlFlowChar;stream.next();stream.match(/[a-zA-Z_0-9]+/)}
if(state.tlvCurCtlFlowChar!=vxCurCtlFlowCharValueAtStart){vxIndent=tlvGenIndent(stream,state);state.vxIndentRq=vxIndent}}
return style},token:function(stream,state){if(state.vxCodeActive==!0&&stream.sol()&&state.tlvCurCtlFlowChar!=""){state.tlvPrevPrevCtlFlowChar=state.tlvPrevCtlFlowChar;state.tlvPrevCtlFlowChar=state.tlvCurCtlFlowChar;state.tlvCurCtlFlowChar=""}},indent:function(state){return(state.vxCodeActive==!0)?state.vxIndentRq:-1},startState:function(state){state.tlvCurCtlFlowChar="";state.tlvPrevCtlFlowChar="";state.tlvPrevPrevCtlFlowChar="";state.vxCodeActive=!0;state.vxIndentRq=0}}})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function words(str){var obj={},words=str.split(",");for(var i=0;i<words.length;++i){var allCaps=words[i].toUpperCase();var firstCap=words[i].charAt(0).toUpperCase()+words[i].slice(1);obj[words[i]]=!0;obj[allCaps]=!0;obj[firstCap]=!0}
return obj}
function metaHook(stream){stream.eatWhile(/[\w\$_]/);return"meta"}
CodeMirror.defineMode("vhdl",function(config,parserConfig){var indentUnit=config.indentUnit,atoms=parserConfig.atoms||words("null"),hooks=parserConfig.hooks||{"`":metaHook,"$":metaHook},multiLineStrings=parserConfig.multiLineStrings;var keywords=words("abs,access,after,alias,all,and,architecture,array,assert,attribute,begin,block,"+"body,buffer,bus,case,component,configuration,constant,disconnect,downto,else,elsif,end,end block,end case,"+"end component,end for,end generate,end if,end loop,end process,end record,end units,entity,exit,file,for,"+"function,generate,generic,generic map,group,guarded,if,impure,in,inertial,inout,is,label,library,linkage,"+"literal,loop,map,mod,nand,new,next,nor,null,of,on,open,or,others,out,package,package body,port,port map,"+"postponed,procedure,process,pure,range,record,register,reject,rem,report,return,rol,ror,select,severity,signal,"+"sla,sll,sra,srl,subtype,then,to,transport,type,unaffected,units,until,use,variable,wait,when,while,with,xnor,xor");var blockKeywords=words("architecture,entity,begin,case,port,else,elsif,end,for,function,if");var isOperatorChar=/[&|~><!\)\(*#%@+\/=?\:;}{,\.\^\-\[\]]/;var curPunc;function tokenBase(stream,state){var ch=stream.next();if(hooks[ch]){var result=hooks[ch](stream,state);if(result!==!1)return result}
if(ch=='"'){state.tokenize=tokenString2(ch);return state.tokenize(stream,state)}
if(ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}
if(/[\[\]{}\(\),;\:\.]/.test(ch)){curPunc=ch;return null}
if(/[\d']/.test(ch)){stream.eatWhile(/[\w\.']/);return"number"}
if(ch=="-"){if(stream.eat("-")){stream.skipToEnd();return"comment"}}
if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return"operator"}
stream.eatWhile(/[\w\$_]/);var cur=stream.current();if(keywords.propertyIsEnumerable(cur.toLowerCase())){if(blockKeywords.propertyIsEnumerable(cur))curPunc="newstatement";return"keyword"}
if(atoms.propertyIsEnumerable(cur))return"atom";return"variable"}
function tokenString(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="--"}
if(end||!(escaped||multiLineStrings))
state.tokenize=tokenBase;return"string"}}
function tokenString2(quote){return function(stream,state){var escaped=!1,next,end=!1;while((next=stream.next())!=null){if(next==quote&&!escaped){end=!0;break}
escaped=!escaped&&next=="--"}
if(end||!(escaped||multiLineStrings))
state.tokenize=tokenBase;return"string-2"}}
function Context(indented,column,type,align,prev){this.indented=indented;this.column=column;this.type=type;this.align=align;this.prev=prev}
function pushContext(state,col,type){return state.context=new Context(state.indented,col,type,null,state.context)}
function popContext(state){var t=state.context.type;if(t==")"||t=="]"||t=="}")
state.indented=state.context.indented;return state.context=state.context.prev}
return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",!1),indented:0,startOfLine:!0}},token:function(stream,state){var ctx=state.context;if(stream.sol()){if(ctx.align==null)ctx.align=!1;state.indented=stream.indentation();state.startOfLine=!0}
if(stream.eatSpace())return null;curPunc=null;var style=(state.tokenize||tokenBase)(stream,state);if(style=="comment"||style=="meta")return style;if(ctx.align==null)ctx.align=!0;if((curPunc==";"||curPunc==":")&&ctx.type=="statement")popContext(state);else if(curPunc=="{")pushContext(state,stream.column(),"}");else if(curPunc=="[")pushContext(state,stream.column(),"]");else if(curPunc=="(")pushContext(state,stream.column(),")");else if(curPunc=="}"){while(ctx.type=="statement")ctx=popContext(state);if(ctx.type=="}")ctx=popContext(state);while(ctx.type=="statement")ctx=popContext(state);}else if(curPunc==ctx.type)popContext(state);else if(ctx.type=="}"||ctx.type=="top"||(ctx.type=="statement"&&curPunc=="newstatement"))
pushContext(state,stream.column(),"statement");state.startOfLine=!1;return style},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&state.tokenize!=null)return 0;var firstChar=textAfter&&textAfter.charAt(0),ctx=state.context,closing=firstChar==ctx.type;if(ctx.type=="statement")return ctx.indented+(firstChar=="{"?0:indentUnit);else if(ctx.align)return ctx.column+(closing?0:1);else return ctx.indented+(closing?0:indentUnit)},electricChars:"{}"}});CodeMirror.defineMIME("text/x-vhdl","vhdl")})}catch(e){};try{(function(mod){"use strict";if(typeof exports==="object"&&typeof module==="object"){mod(require("../../lib/codemirror"),require("../../addon/mode/overlay"),require("../xml/xml"),require("../javascript/javascript"),require("../coffeescript/coffeescript"),require("../css/css"),require("../sass/sass"),require("../stylus/stylus"),require("../pug/pug"),require("../handlebars/handlebars"))}else if(typeof define==="function"&&define.amd){define(["../../lib/codemirror","../../addon/mode/overlay","../xml/xml","../javascript/javascript","../coffeescript/coffeescript","../css/css","../sass/sass","../stylus/stylus","../pug/pug","../handlebars/handlebars"],mod)}else{mod(CodeMirror)}})(function(CodeMirror){var tagLanguages={script:[["lang",/coffee(script)?/,"coffeescript"],["type",/^(?:text|application)\/(?:x-)?coffee(?:script)?$/,"coffeescript"]],style:[["lang",/^stylus$/i,"stylus"],["lang",/^sass$/i,"sass"],["type",/^(text\/)?(x-)?styl(us)?$/i,"stylus"],["type",/^text\/sass/i,"sass"]],template:[["lang",/^vue-template$/i,"vue"],["lang",/^pug$/i,"pug"],["lang",/^handlebars$/i,"handlebars"],["type",/^(text\/)?(x-)?pug$/i,"pug"],["type",/^text\/x-handlebars-template$/i,"handlebars"],[null,null,"vue-template"]]};CodeMirror.defineMode("vue-template",function(config,parserConfig){var mustacheOverlay={token:function(stream){if(stream.match(/^\{\{.*?\}\}/))return"meta mustache";while(stream.next()&&!stream.match("{{",!1)){}
return null}};return CodeMirror.overlayMode(CodeMirror.getMode(config,parserConfig.backdrop||"text/html"),mustacheOverlay)});CodeMirror.defineMode("vue",function(config){return CodeMirror.getMode(config,{name:"htmlmixed",tags:tagLanguages})},"htmlmixed","xml","javascript","coffeescript","css","sass","stylus","pug","handlebars");CodeMirror.defineMIME("script/x-vue","vue")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function wordRegexp(words){return new RegExp("^(("+words.join(")|(")+"))\\b")};var builtinArray=["Clamp","Constructor","EnforceRange","Exposed","ImplicitThis","Global","PrimaryGlobal","LegacyArrayClass","LegacyUnenumerableNamedProperties","LenientThis","NamedConstructor","NewObject","NoInterfaceObject","OverrideBuiltins","PutForwards","Replaceable","SameObject","TreatNonObjectAsNull","TreatNullAs","EmptyString","Unforgeable","Unscopeable"];var builtins=wordRegexp(builtinArray);var typeArray=["unsigned","short","long","unrestricted","float","double","boolean","byte","octet","Promise","ArrayBuffer","DataView","Int8Array","Int16Array","Int32Array","Uint8Array","Uint16Array","Uint32Array","Uint8ClampedArray","Float32Array","Float64Array","ByteString","DOMString","USVString","sequence","object","RegExp","Error","DOMException","FrozenArray","any","void"];var types=wordRegexp(typeArray);var keywordArray=["attribute","callback","const","deleter","dictionary","enum","getter","implements","inherit","interface","iterable","legacycaller","maplike","partial","required","serializer","setlike","setter","static","stringifier","typedef","optional","readonly","or"];var keywords=wordRegexp(keywordArray);var atomArray=["true","false","Infinity","NaN","null"];var atoms=wordRegexp(atomArray);CodeMirror.registerHelper("hintWords","webidl",builtinArray.concat(typeArray).concat(keywordArray).concat(atomArray));var startDefArray=["callback","dictionary","enum","interface"];var startDefs=wordRegexp(startDefArray);var endDefArray=["typedef"];var endDefs=wordRegexp(endDefArray);var singleOperators=/^[:<=>?]/;var integers=/^-?([1-9][0-9]*|0[Xx][0-9A-Fa-f]+|0[0-7]*)/;var floats=/^-?(([0-9]+\.[0-9]*|[0-9]*\.[0-9]+)([Ee][+-]?[0-9]+)?|[0-9]+[Ee][+-]?[0-9]+)/;var identifiers=/^_?[A-Za-z][0-9A-Z_a-z-]*/;var identifiersEnd=/^_?[A-Za-z][0-9A-Z_a-z-]*(?=\s*;)/;var strings=/^"[^"]*"/;var multilineComments=/^\/\*.*?\*\//;var multilineCommentsStart=/^\/\*.*/;var multilineCommentsEnd=/^.*?\*\//;function readToken(stream,state){if(stream.eatSpace())return null;if(state.inComment){if(stream.match(multilineCommentsEnd)){state.inComment=!1;return"comment"}
stream.skipToEnd();return"comment"}
if(stream.match("//")){stream.skipToEnd();return"comment"}
if(stream.match(multilineComments))return"comment";if(stream.match(multilineCommentsStart)){state.inComment=!0;return"comment"}
if(stream.match(/^-?[0-9\.]/,!1)){if(stream.match(integers)||stream.match(floats))return"number"}
if(stream.match(strings))return"string";if(state.startDef&&stream.match(identifiers))return"def";if(state.endDef&&stream.match(identifiersEnd)){state.endDef=!1;return"def"}
if(stream.match(keywords))return"keyword";if(stream.match(types)){var lastToken=state.lastToken;var nextToken=(stream.match(/^\s*(.+?)\b/,!1)||[])[1];if(lastToken===":"||lastToken==="implements"||nextToken==="implements"||nextToken==="="){return"builtin"}else{return"variable-3"}}
if(stream.match(builtins))return"builtin";if(stream.match(atoms))return"atom";if(stream.match(identifiers))return"variable";if(stream.match(singleOperators))return"operator";stream.next();return null};CodeMirror.defineMode("webidl",function(){return{startState:function(){return{inComment:!1,lastToken:"",startDef:!1,endDef:!1}},token:function(stream,state){var style=readToken(stream,state);if(style){var cur=stream.current();state.lastToken=cur;if(style==="keyword"){state.startDef=startDefs.test(cur);state.endDef=state.endDef||endDefs.test(cur)}else{state.startDef=!1}}
return style}}});CodeMirror.defineMIME("text/x-webidl","webidl")})}catch(e){};try{(function(){var mode=CodeMirror.getMode({indentUnit:2},"xml"),mname="xml";function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1),mname)}
MT("matching","[tag&bracket <][tag top][tag&bracket >]","  text","  [tag&bracket <][tag inner][tag&bracket />]","[tag&bracket </][tag top][tag&bracket >]");MT("nonmatching","[tag&bracket <][tag top][tag&bracket >]","  [tag&bracket <][tag inner][tag&bracket />]","  [tag&bracket </][tag&error tip][tag&bracket&error >]");MT("doctype","[meta <!doctype foobar>]","[tag&bracket <][tag top][tag&bracket />]");MT("cdata","[tag&bracket <][tag top][tag&bracket >]","  [atom <![CDATA[foo]","[atom barbazguh]]]]>]","[tag&bracket </][tag top][tag&bracket >]");mode=CodeMirror.getMode({indentUnit:2},"text/html");MT("selfclose","[tag&bracket <][tag html][tag&bracket >]","  [tag&bracket <][tag link] [attribute rel]=[string stylesheet] [attribute href]=[string \"/foobar\"][tag&bracket >]","[tag&bracket </][tag html][tag&bracket >]");MT("list","[tag&bracket <][tag ol][tag&bracket >]","  [tag&bracket <][tag li][tag&bracket >]one","  [tag&bracket <][tag li][tag&bracket >]two","[tag&bracket </][tag ol][tag&bracket >]");MT("valueless","[tag&bracket <][tag input] [attribute type]=[string checkbox] [attribute checked][tag&bracket />]");MT("pThenArticle","[tag&bracket <][tag p][tag&bracket >]","  foo","[tag&bracket <][tag article][tag&bracket >]bar")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var htmlConfig={autoSelfClosers:{'area':!0,'base':!0,'br':!0,'col':!0,'command':!0,'embed':!0,'frame':!0,'hr':!0,'img':!0,'input':!0,'keygen':!0,'link':!0,'meta':!0,'param':!0,'source':!0,'track':!0,'wbr':!0,'menuitem':!0},implicitlyClosed:{'dd':!0,'li':!0,'optgroup':!0,'option':!0,'p':!0,'rp':!0,'rt':!0,'tbody':!0,'td':!0,'tfoot':!0,'th':!0,'tr':!0},contextGrabbers:{'dd':{'dd':!0,'dt':!0},'dt':{'dd':!0,'dt':!0},'li':{'li':!0},'option':{'option':!0,'optgroup':!0},'optgroup':{'optgroup':!0},'p':{'address':!0,'article':!0,'aside':!0,'blockquote':!0,'dir':!0,'div':!0,'dl':!0,'fieldset':!0,'footer':!0,'form':!0,'h1':!0,'h2':!0,'h3':!0,'h4':!0,'h5':!0,'h6':!0,'header':!0,'hgroup':!0,'hr':!0,'menu':!0,'nav':!0,'ol':!0,'p':!0,'pre':!0,'section':!0,'table':!0,'ul':!0},'rp':{'rp':!0,'rt':!0},'rt':{'rp':!0,'rt':!0},'tbody':{'tbody':!0,'tfoot':!0},'td':{'td':!0,'th':!0},'tfoot':{'tbody':!0},'th':{'td':!0,'th':!0},'thead':{'tbody':!0,'tfoot':!0},'tr':{'tr':!0}},doNotIndent:{"pre":!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}
var xmlConfig={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1}
CodeMirror.defineMode("xml",function(editorConf,config_){var indentUnit=editorConf.indentUnit
var config={}
var defaults=config_.htmlMode?htmlConfig:xmlConfig
for(var prop in defaults)config[prop]=defaults[prop]
for(var prop in config_)config[prop]=config_[prop]
var type,setStyle;function inText(stream,state){function chain(parser){state.tokenize=parser;return parser(stream,state)}
var ch=stream.next();if(ch=="<"){if(stream.eat("!")){if(stream.eat("[")){if(stream.match("CDATA["))return chain(inBlock("atom","]]>"));else return null}else if(stream.match("--")){return chain(inBlock("comment","-->"))}else if(stream.match("DOCTYPE",!0,!0)){stream.eatWhile(/[\w\._\-]/);return chain(doctype(1))}else{return null}}else if(stream.eat("?")){stream.eatWhile(/[\w\._\-]/);state.tokenize=inBlock("meta","?>");return"meta"}else{type=stream.eat("/")?"closeTag":"openTag";state.tokenize=inTag;return"tag bracket"}}else if(ch=="&"){var ok;if(stream.eat("#")){if(stream.eat("x")){ok=stream.eatWhile(/[a-fA-F\d]/)&&stream.eat(";")}else{ok=stream.eatWhile(/[\d]/)&&stream.eat(";")}}else{ok=stream.eatWhile(/[\w\.\-:]/)&&stream.eat(";")}
return ok?"atom":"error"}else{stream.eatWhile(/[^&<]/);return null}}
inText.isInText=!0;function inTag(stream,state){var ch=stream.next();if(ch==">"||(ch=="/"&&stream.eat(">"))){state.tokenize=inText;type=ch==">"?"endTag":"selfcloseTag";return"tag bracket"}else if(ch=="="){type="equals";return null}else if(ch=="<"){state.tokenize=inText;state.state=baseState;state.tagName=state.tagStart=null;var next=state.tokenize(stream,state);return next?next+" tag error":"tag error"}else if(/[\'\"]/.test(ch)){state.tokenize=inAttribute(ch);state.stringStartCol=stream.column();return state.tokenize(stream,state)}else{stream.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}}
function inAttribute(quote){var closure=function(stream,state){while(!stream.eol()){if(stream.next()==quote){state.tokenize=inTag;break}}
return"string"};closure.isInAttribute=!0;return closure}
function inBlock(style,terminator){return function(stream,state){while(!stream.eol()){if(stream.match(terminator)){state.tokenize=inText;break}
stream.next()}
return style}}
function doctype(depth){return function(stream,state){var ch;while((ch=stream.next())!=null){if(ch=="<"){state.tokenize=doctype(depth+1);return state.tokenize(stream,state)}else if(ch==">"){if(depth==1){state.tokenize=inText;break}else{state.tokenize=doctype(depth-1);return state.tokenize(stream,state)}}}
return"meta"}}
function Context(state,tagName,startOfLine){this.prev=state.context;this.tagName=tagName;this.indent=state.indented;this.startOfLine=startOfLine;if(config.doNotIndent.hasOwnProperty(tagName)||(state.context&&state.context.noIndent))
this.noIndent=!0}
function popContext(state){if(state.context)state.context=state.context.prev}
function maybePopContext(state,nextTagName){var parentTagName;while(!0){if(!state.context){return}
parentTagName=state.context.tagName;if(!config.contextGrabbers.hasOwnProperty(parentTagName)||!config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)){return}
popContext(state)}}
function baseState(type,stream,state){if(type=="openTag"){state.tagStart=stream.column();return tagNameState}else if(type=="closeTag"){return closeTagNameState}else{return baseState}}
function tagNameState(type,stream,state){if(type=="word"){state.tagName=stream.current();setStyle="tag";return attrState}else{setStyle="error";return tagNameState}}
function closeTagNameState(type,stream,state){if(type=="word"){var tagName=stream.current();if(state.context&&state.context.tagName!=tagName&&config.implicitlyClosed.hasOwnProperty(state.context.tagName))
popContext(state);if((state.context&&state.context.tagName==tagName)||config.matchClosing===!1){setStyle="tag";return closeState}else{setStyle="tag error";return closeStateErr}}else{setStyle="error";return closeStateErr}}
function closeState(type,_stream,state){if(type!="endTag"){setStyle="error";return closeState}
popContext(state);return baseState}
function closeStateErr(type,stream,state){setStyle="error";return closeState(type,stream,state)}
function attrState(type,_stream,state){if(type=="word"){setStyle="attribute";return attrEqState}else if(type=="endTag"||type=="selfcloseTag"){var tagName=state.tagName,tagStart=state.tagStart;state.tagName=state.tagStart=null;if(type=="selfcloseTag"||config.autoSelfClosers.hasOwnProperty(tagName)){maybePopContext(state,tagName)}else{maybePopContext(state,tagName);state.context=new Context(state,tagName,tagStart==state.indented)}
return baseState}
setStyle="error";return attrState}
function attrEqState(type,stream,state){if(type=="equals")return attrValueState;if(!config.allowMissing)setStyle="error";return attrState(type,stream,state)}
function attrValueState(type,stream,state){if(type=="string")return attrContinuedState;if(type=="word"&&config.allowUnquoted){setStyle="string";return attrState}
setStyle="error";return attrState(type,stream,state)}
function attrContinuedState(type,stream,state){if(type=="string")return attrContinuedState;return attrState(type,stream,state)}
return{startState:function(baseIndent){var state={tokenize:inText,state:baseState,indented:baseIndent||0,tagName:null,tagStart:null,context:null}
if(baseIndent!=null)state.baseIndent=baseIndent
return state},token:function(stream,state){if(!state.tagName&&stream.sol())
state.indented=stream.indentation();if(stream.eatSpace())return null;type=null;var style=state.tokenize(stream,state);if((style||type)&&style!="comment"){setStyle=null;state.state=state.state(type||style,stream,state);if(setStyle)
style=setStyle=="error"?style+" error":setStyle}
return style},indent:function(state,textAfter,fullLine){var context=state.context;if(state.tokenize.isInAttribute){if(state.tagStart==state.indented)
return state.stringStartCol+1;else return state.indented+indentUnit}
if(context&&context.noIndent)return CodeMirror.Pass;if(state.tokenize!=inTag&&state.tokenize!=inText)
return fullLine?fullLine.match(/^(\s*)/)[0].length:0;if(state.tagName){if(config.multilineTagIndentPastTag!==!1)
return state.tagStart+state.tagName.length+2;else return state.tagStart+indentUnit*(config.multilineTagIndentFactor||1)}
if(config.alignCDATA&&/<!\[CDATA\[/.test(textAfter))return 0;var tagAfter=textAfter&&/^<(\/)?([\w_:\.-]*)/.exec(textAfter);if(tagAfter&&tagAfter[1]){while(context){if(context.tagName==tagAfter[2]){context=context.prev;break}else if(config.implicitlyClosed.hasOwnProperty(context.tagName)){context=context.prev}else{break}}}else if(tagAfter){while(context){var grabbers=config.contextGrabbers[context.tagName];if(grabbers&&grabbers.hasOwnProperty(tagAfter[2]))
context=context.prev;else break}}
while(context&&context.prev&&!context.startOfLine)
context=context.prev;if(context)return context.indent+indentUnit;else return state.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:config.htmlMode?"html":"xml",helperType:config.htmlMode?"html":"xml",skipAttribute:function(state){if(state.state==attrValueState)
state.state=attrState}}});CodeMirror.defineMIME("text/xml","xml");CodeMirror.defineMIME("application/xml","xml");if(!CodeMirror.mimeModes.hasOwnProperty("text/html"))
CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0})})}catch(e){};try{(function(){var mode=CodeMirror.getMode({tabSize:4},"xquery");function MT(name){test.mode(name,mode,Array.prototype.slice.call(arguments,1))}
MT("eviltest","[keyword xquery] [keyword version] [variable &quot;1][keyword .][atom 0][keyword -][variable ml&quot;][def&variable ;]      [comment (: this is       : a          \"comment\" :)]","      [keyword let] [variable $let] [keyword :=] [variable &lt;x] [variable attr][keyword =][variable &quot;value&quot;&gt;&quot;test&quot;&lt;func&gt][def&variable ;function]() [variable $var] {[keyword function]()} {[variable $var]}[variable &lt;][keyword /][variable func&gt;&lt;][keyword /][variable x&gt;]","      [keyword let] [variable $joe][keyword :=][atom 1]","      [keyword return] [keyword element] [variable element] {","          [keyword attribute] [variable attribute] { [atom 1] },","          [keyword element] [variable test] { [variable &#39;a&#39;] },           [keyword attribute] [variable foo] { [variable &quot;bar&quot;] },","          [def&variable fn:doc]()[[ [variable foo][keyword /][variable @bar] [keyword eq] [variable $let] ]],","          [keyword //][variable x] }                 [comment (: a more 'evil' test :)]","      [comment (: Modified Blakeley example (: with nested comment :) ... :)]","      [keyword declare] [keyword private] [keyword function] [def&variable local:declare]() {()}[variable ;]","      [keyword declare] [keyword private] [keyword function] [def&variable local:private]() {()}[variable ;]","      [keyword declare] [keyword private] [keyword function] [def&variable local:function]() {()}[variable ;]","      [keyword declare] [keyword private] [keyword function] [def&variable local:local]() {()}[variable ;]","      [keyword let] [variable $let] [keyword :=] [variable &lt;let&gt;let] [variable $let] [keyword :=] [variable &quot;let&quot;&lt;][keyword /let][variable &gt;]","      [keyword return] [keyword element] [variable element] {","          [keyword attribute] [variable attribute] { [keyword try] { [def&variable xdmp:version]() } [keyword catch]([variable $e]) { [def&variable xdmp:log]([variable $e]) } },","          [keyword attribute] [variable fn:doc] { [variable &quot;bar&quot;] [variable castable] [keyword as] [atom xs:string] },","          [keyword element] [variable text] { [keyword text] { [variable &quot;text&quot;] } },","          [def&variable fn:doc]()[[ [qualifier child::][variable eq][keyword /]([variable @bar] [keyword |] [qualifier attribute::][variable attribute]) [keyword eq] [variable $let] ]],","          [keyword //][variable fn:doc]","      }");MT("testEmptySequenceKeyword","[string \"foo\"] [keyword instance] [keyword of] [keyword empty-sequence]()");MT("testMultiAttr","[tag <p ][attribute a1]=[string \"foo\"] [attribute a2]=[string \"bar\"][tag >][variable hello] [variable world][tag </p>]");MT("test namespaced variable","[keyword declare] [keyword namespace] [variable e] [keyword =] [string \"http://example.com/ANamespace\"][variable ;declare] [keyword variable] [variable $e:exampleComThisVarIsNotRecognized] [keyword as] [keyword element]([keyword *]) [variable external;]");MT("test EQName variable","[keyword declare] [keyword variable] [variable $\"http://www.example.com/ns/my\":var] [keyword :=] [atom 12][variable ;]","[tag <out>]{[variable $\"http://www.example.com/ns/my\":var]}[tag </out>]");MT("test EQName function","[keyword declare] [keyword function] [def&variable \"http://www.example.com/ns/my\":fn] ([variable $a] [keyword as] [atom xs:integer]) [keyword as] [atom xs:integer] {","   [variable $a] [keyword +] [atom 2]","}[variable ;]","[tag <out>]{[def&variable \"http://www.example.com/ns/my\":fn]([atom 12])}[tag </out>]");MT("test EQName function with single quotes","[keyword declare] [keyword function] [def&variable 'http://www.example.com/ns/my':fn] ([variable $a] [keyword as] [atom xs:integer]) [keyword as] [atom xs:integer] {","   [variable $a] [keyword +] [atom 2]","}[variable ;]","[tag <out>]{[def&variable 'http://www.example.com/ns/my':fn]([atom 12])}[tag </out>]");MT("testProcessingInstructions","[def&variable data]([comment&meta <?target content?>]) [keyword instance] [keyword of] [atom xs:string]");MT("testQuoteEscapeDouble","[keyword let] [variable $rootfolder] [keyword :=] [string \"c:\\builds\\winnt\\HEAD\\qa\\scripts\\\"]","[keyword let] [variable $keysfolder] [keyword :=] [def&variable concat]([variable $rootfolder], [string \"keys\\\"])")})()}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("xquery",function(){var keywords=function(){function kw(type){return{type:type,style:"keyword"}}
var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c"),operator=kw("operator"),atom={type:"atom",style:"atom"},punctuation={type:"punctuation",style:null},qualifier={type:"axis_specifier",style:"qualifier"};var kwObj={'if':A,'switch':A,'while':A,'for':A,'else':B,'then':B,'try':B,'finally':B,'catch':B,'element':C,'attribute':C,'let':C,'implements':C,'import':C,'module':C,'namespace':C,'return':C,'super':C,'this':C,'throws':C,'where':C,'private':C,',':punctuation,'null':atom,'fn:false()':atom,'fn:true()':atom};var basic=['after','ancestor','ancestor-or-self','and','as','ascending','assert','attribute','before','by','case','cast','child','comment','declare','default','define','descendant','descendant-or-self','descending','document','document-node','element','else','eq','every','except','external','following','following-sibling','follows','for','function','if','import','in','instance','intersect','item','let','module','namespace','node','node','of','only','or','order','parent','precedes','preceding','preceding-sibling','processing-instruction','ref','return','returns','satisfies','schema','schema-element','self','some','sortby','stable','text','then','to','treat','typeswitch','union','variable','version','where','xquery','empty-sequence'];for(var i=0,l=basic.length;i<l;i++){kwObj[basic[i]]=kw(basic[i])};var types=['xs:string','xs:float','xs:decimal','xs:double','xs:integer','xs:boolean','xs:date','xs:dateTime','xs:time','xs:duration','xs:dayTimeDuration','xs:time','xs:yearMonthDuration','numeric','xs:hexBinary','xs:base64Binary','xs:anyURI','xs:QName','xs:byte','xs:boolean','xs:anyURI','xf:yearMonthDuration'];for(var i=0,l=types.length;i<l;i++){kwObj[types[i]]=atom};var operators=['eq','ne','lt','le','gt','ge',':=','=','>','>=','<','<=','.','|','?','and','or','div','idiv','mod','*','/','+','-'];for(var i=0,l=operators.length;i<l;i++){kwObj[operators[i]]=operator};var axis_specifiers=["self::","attribute::","child::","descendant::","descendant-or-self::","parent::","ancestor::","ancestor-or-self::","following::","preceding::","following-sibling::","preceding-sibling::"];for(var i=0,l=axis_specifiers.length;i<l;i++){kwObj[axis_specifiers[i]]=qualifier};return kwObj}();function chain(stream,state,f){state.tokenize=f;return f(stream,state)}
function tokenBase(stream,state){var ch=stream.next(),mightBeFunction=!1,isEQName=isEQNameAhead(stream);if(ch=="<"){if(stream.match("!--",!0))
return chain(stream,state,tokenXMLComment);if(stream.match("![CDATA",!1)){state.tokenize=tokenCDATA;return"tag"}
if(stream.match("?",!1)){return chain(stream,state,tokenPreProcessing)}
var isclose=stream.eat("/");stream.eatSpace();var tagName="",c;while((c=stream.eat(/[^\s\u00a0=<>\"\'\/?]/)))tagName+=c;return chain(stream,state,tokenTag(tagName,isclose))}else if(ch=="{"){pushStateStack(state,{type:"codeblock"});return null}else if(ch=="}"){popStateStack(state);return null}else if(isInXmlBlock(state)){if(ch==">")
return"tag";else if(ch=="/"&&stream.eat(">")){popStateStack(state);return"tag"}else return"variable"}else if(/\d/.test(ch)){stream.match(/^\d*(?:\.\d*)?(?:E[+\-]?\d+)?/);return"atom"}else if(ch==="("&&stream.eat(":")){pushStateStack(state,{type:"comment"});return chain(stream,state,tokenComment)}else if(!isEQName&&(ch==='"'||ch==="'"))
return chain(stream,state,tokenString(ch));else if(ch==="$"){return chain(stream,state,tokenVariable)}else if(ch===":"&&stream.eat("=")){return"keyword"}else if(ch==="("){pushStateStack(state,{type:"paren"});return null}else if(ch===")"){popStateStack(state);return null}else if(ch==="["){pushStateStack(state,{type:"bracket"});return null}else if(ch==="]"){popStateStack(state);return null}else{var known=keywords.propertyIsEnumerable(ch)&&keywords[ch];if(isEQName&&ch==='\"')while(stream.next()!=='"'){}
if(isEQName&&ch==='\'')while(stream.next()!=='\''){}
if(!known)stream.eatWhile(/[\w\$_-]/);var foundColon=stream.eat(":");if(!stream.eat(":")&&foundColon){stream.eatWhile(/[\w\$_-]/)}
if(stream.match(/^[ \t]*\(/,!1)){mightBeFunction=!0}
var word=stream.current();known=keywords.propertyIsEnumerable(word)&&keywords[word];if(mightBeFunction&&!known)known={type:"function_call",style:"variable def"};if(isInXmlConstructor(state)){popStateStack(state);return"variable"}
if(word=="element"||word=="attribute"||known.type=="axis_specifier")pushStateStack(state,{type:"xmlconstructor"});return known?known.style:"variable"}}
function tokenComment(stream,state){var maybeEnd=!1,maybeNested=!1,nestedCount=0,ch;while(ch=stream.next()){if(ch==")"&&maybeEnd){if(nestedCount>0)
nestedCount--;else{popStateStack(state);break}}else if(ch==":"&&maybeNested){nestedCount++}
maybeEnd=(ch==":");maybeNested=(ch=="(")}
return"comment"}
function tokenString(quote,f){return function(stream,state){var ch;if(isInString(state)&&stream.current()==quote){popStateStack(state);if(f)state.tokenize=f;return"string"}
pushStateStack(state,{type:"string",name:quote,tokenize:tokenString(quote,f)});if(stream.match("{",!1)&&isInXmlAttributeBlock(state)){state.tokenize=tokenBase;return"string"}
while(ch=stream.next()){if(ch==quote){popStateStack(state);if(f)state.tokenize=f;break}else{if(stream.match("{",!1)&&isInXmlAttributeBlock(state)){state.tokenize=tokenBase;return"string"}}}
return"string"}}
function tokenVariable(stream,state){var isVariableChar=/[\w\$_-]/;if(stream.eat("\"")){while(stream.next()!=='\"'){};stream.eat(":")}else{stream.eatWhile(isVariableChar);if(!stream.match(":=",!1))stream.eat(":")}
stream.eatWhile(isVariableChar);state.tokenize=tokenBase;return"variable"}
function tokenTag(name,isclose){return function(stream,state){stream.eatSpace();if(isclose&&stream.eat(">")){popStateStack(state);state.tokenize=tokenBase;return"tag"}
if(!stream.eat("/"))
pushStateStack(state,{type:"tag",name:name,tokenize:tokenBase});if(!stream.eat(">")){state.tokenize=tokenAttribute;return"tag"}else{state.tokenize=tokenBase}
return"tag"}}
function tokenAttribute(stream,state){var ch=stream.next();if(ch=="/"&&stream.eat(">")){if(isInXmlAttributeBlock(state))popStateStack(state);if(isInXmlBlock(state))popStateStack(state);return"tag"}
if(ch==">"){if(isInXmlAttributeBlock(state))popStateStack(state);return"tag"}
if(ch=="=")
return null;if(ch=='"'||ch=="'")
return chain(stream,state,tokenString(ch,tokenAttribute));if(!isInXmlAttributeBlock(state))
pushStateStack(state,{type:"attribute",tokenize:tokenAttribute});stream.eat(/[a-zA-Z_:]/);stream.eatWhile(/[-a-zA-Z0-9_:.]/);stream.eatSpace();if(stream.match(">",!1)||stream.match("/",!1)){popStateStack(state);state.tokenize=tokenBase}
return"attribute"}
function tokenXMLComment(stream,state){var ch;while(ch=stream.next()){if(ch=="-"&&stream.match("->",!0)){state.tokenize=tokenBase;return"comment"}}}
function tokenCDATA(stream,state){var ch;while(ch=stream.next()){if(ch=="]"&&stream.match("]",!0)){state.tokenize=tokenBase;return"comment"}}}
function tokenPreProcessing(stream,state){var ch;while(ch=stream.next()){if(ch=="?"&&stream.match(">",!0)){state.tokenize=tokenBase;return"comment meta"}}}
function isInXmlBlock(state){return isIn(state,"tag")}
function isInXmlAttributeBlock(state){return isIn(state,"attribute")}
function isInXmlConstructor(state){return isIn(state,"xmlconstructor")}
function isInString(state){return isIn(state,"string")}
function isEQNameAhead(stream){if(stream.current()==='"')
return stream.match(/^[^\"]+\"\:/,!1);else if(stream.current()==='\'')
return stream.match(/^[^\"]+\'\:/,!1);else return!1}
function isIn(state,type){return(state.stack.length&&state.stack[state.stack.length-1].type==type)}
function pushStateStack(state,newState){state.stack.push(newState)}
function popStateStack(state){state.stack.pop();var reinstateTokenize=state.stack.length&&state.stack[state.stack.length-1].tokenize;state.tokenize=reinstateTokenize||tokenBase}
return{startState:function(){return{tokenize:tokenBase,cc:[],stack:[]}},token:function(stream,state){if(stream.eatSpace())return null;var style=state.tokenize(stream,state);return style},blockCommentStart:"(:",blockCommentEnd:":)"}});CodeMirror.defineMIME("application/xquery","xquery")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode('yacas',function(_config,_parserConfig){function words(str){var obj={},words=str.split(" ");for(var i=0;i<words.length;++i)obj[words[i]]=!0;return obj}
var bodiedOps=words("Assert BackQuote D Defun Deriv For ForEach FromFile "+"FromString Function Integrate InverseTaylor Limit "+"LocalSymbols Macro MacroRule MacroRulePattern "+"NIntegrate Rule RulePattern Subst TD TExplicitSum "+"TSum Taylor Taylor1 Taylor2 Taylor3 ToFile "+"ToStdout ToString TraceRule Until While");var pFloatForm="(?:(?:\\.\\d+|\\d+\\.\\d*|\\d+)(?:[eE][+-]?\\d+)?)";var pIdentifier="(?:[a-zA-Z\\$'][a-zA-Z0-9\\$']*)";var reFloatForm=new RegExp(pFloatForm);var reIdentifier=new RegExp(pIdentifier);var rePattern=new RegExp(pIdentifier+"?_"+pIdentifier);var reFunctionLike=new RegExp(pIdentifier+"\\s*\\(");function tokenBase(stream,state){var ch;ch=stream.next();if(ch==='"'){state.tokenize=tokenString;return state.tokenize(stream,state)}
if(ch==='/'){if(stream.eat('*')){state.tokenize=tokenComment;return state.tokenize(stream,state)}
if(stream.eat("/")){stream.skipToEnd();return"comment"}}
stream.backUp(1);var m=stream.match(/^(\w+)\s*\(/,!1);if(m!==null&&bodiedOps.hasOwnProperty(m[1]))
state.scopes.push('bodied');var scope=currentScope(state);if(scope==='bodied'&&ch==='[')
state.scopes.pop();if(ch==='['||ch==='{'||ch==='(')
state.scopes.push(ch);scope=currentScope(state);if(scope==='['&&ch===']'||scope==='{'&&ch==='}'||scope==='('&&ch===')')
state.scopes.pop();if(ch===';'){while(scope==='bodied'){state.scopes.pop();scope=currentScope(state)}}
if(stream.match(/\d+ *#/,!0,!1)){return'qualifier'}
if(stream.match(reFloatForm,!0,!1)){return'number'}
if(stream.match(rePattern,!0,!1)){return'variable-3'}
if(stream.match(/(?:\[|\]|{|}|\(|\))/,!0,!1)){return'bracket'}
if(stream.match(reFunctionLike,!0,!1)){stream.backUp(1);return'variable'}
if(stream.match(reIdentifier,!0,!1)){return'variable-2'}
if(stream.match(/(?:\\|\+|\-|\*|\/|,|;|\.|:|@|~|=|>|<|&|\||_|`|'|\^|\?|!|%)/,!0,!1)){return'operator'}
return'error'}
function tokenString(stream,state){var next,end=!1,escaped=!1;while((next=stream.next())!=null){if(next==='"'&&!escaped){end=!0;break}
escaped=!escaped&&next==='\\'}
if(end&&!escaped){state.tokenize=tokenBase}
return'string'};function tokenComment(stream,state){var prev,next;while((next=stream.next())!=null){if(prev==='*'&&next==='/'){state.tokenize=tokenBase;break}
prev=next}
return'comment'}
function currentScope(state){var scope=null;if(state.scopes.length>0)
scope=state.scopes[state.scopes.length-1];return scope}
return{startState:function(){return{tokenize:tokenBase,scopes:[]}},token:function(stream,state){if(stream.eatSpace())return null;return state.tokenize(stream,state)},indent:function(state,textAfter){if(state.tokenize!==tokenBase&&state.tokenize!==null)
return CodeMirror.Pass;var delta=0;if(textAfter===']'||textAfter==='];'||textAfter==='}'||textAfter==='};'||textAfter===');')
delta=-1;return(state.scopes.length+delta)*_config.indentUnit},electricChars:"{}[]();",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});CodeMirror.defineMIME('text/x-yacas',{name:'yacas'})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("yaml",function(){var cons=['true','false','on','off','yes','no'];var keywordRegex=new RegExp("\\b(("+cons.join(")|(")+"))$",'i');return{token:function(stream,state){var ch=stream.peek();var esc=state.escaped;state.escaped=!1;if(ch=="#"&&(stream.pos==0||/\s/.test(stream.string.charAt(stream.pos-1)))){stream.skipToEnd();return"comment"}
if(stream.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))
return"string";if(state.literal&&stream.indentation()>state.keyCol){stream.skipToEnd();return"string"}else if(state.literal){state.literal=!1}
if(stream.sol()){state.keyCol=0;state.pair=!1;state.pairStart=!1;if(stream.match(/---/)){return"def"}
if(stream.match(/\.\.\./)){return"def"}
if(stream.match(/\s*-\s+/)){return'meta'}}
if(stream.match(/^(\{|\}|\[|\])/)){if(ch=='{')
state.inlinePairs++;else if(ch=='}')
state.inlinePairs--;else if(ch=='[')
state.inlineList++;else state.inlineList--;return'meta'}
if(state.inlineList>0&&!esc&&ch==','){stream.next();return'meta'}
if(state.inlinePairs>0&&!esc&&ch==','){state.keyCol=0;state.pair=!1;state.pairStart=!1;stream.next();return'meta'}
if(state.pairStart){if(stream.match(/^\s*(\||\>)\s*/)){state.literal=!0;return'meta'};if(stream.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i)){return'variable-2'}
if(state.inlinePairs==0&&stream.match(/^\s*-?[0-9\.\,]+\s?$/)){return'number'}
if(state.inlinePairs>0&&stream.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/)){return'number'}
if(stream.match(keywordRegex)){return'keyword'}}
if(!state.pair&&stream.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)){state.pair=!0;state.keyCol=stream.indentation();return"atom"}
if(state.pair&&stream.match(/^:\s*/)){state.pairStart=!0;return'meta'}
state.pairStart=!1;state.escaped=(ch=='\\');stream.next();return null},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}}});CodeMirror.defineMIME("text/x-yaml","yaml")})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"),require("../yaml/yaml"))
else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror","../yaml/yaml"],mod)
else mod(CodeMirror)})(function(CodeMirror){var START=0,FRONTMATTER=1,BODY=2
CodeMirror.defineMode("yaml-frontmatter",function(config,parserConfig){var yamlMode=CodeMirror.getMode(config,"yaml")
var innerMode=CodeMirror.getMode(config,parserConfig&&parserConfig.base||"gfm")
function curMode(state){return state.state==BODY?innerMode:yamlMode}
return{startState:function(){return{state:START,inner:CodeMirror.startState(yamlMode)}},copyState:function(state){return{state:state.state,inner:CodeMirror.copyState(curMode(state),state.inner)}},token:function(stream,state){if(state.state==START){if(stream.match(/---/,!1)){state.state=FRONTMATTER
return yamlMode.token(stream,state.inner)}else{state.state=BODY
state.inner=CodeMirror.startState(innerMode)
return innerMode.token(stream,state.inner)}}else if(state.state==FRONTMATTER){var end=stream.sol()&&stream.match(/---/,!1)
var style=yamlMode.token(stream,state.inner)
if(end){state.state=BODY
state.inner=CodeMirror.startState(innerMode)}
return style}else{return innerMode.token(stream,state.inner)}},innerMode:function(state){return{mode:curMode(state),state:state.inner}},blankLine:function(state){var mode=curMode(state)
if(mode.blankLine)return mode.blankLine(state.inner)}}})})}catch(e){};try{(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode('z80',function(_config,parserConfig){var ez80=parserConfig.ez80;var keywords1,keywords2;if(ez80){keywords1=/^(exx?|(ld|cp)([di]r?)?|[lp]ea|pop|push|ad[cd]|cpl|daa|dec|inc|neg|sbc|sub|and|bit|[cs]cf|x?or|res|set|r[lr]c?a?|r[lr]d|s[lr]a|srl|djnz|nop|[de]i|halt|im|in([di]mr?|ir?|irx|2r?)|ot(dmr?|[id]rx|imr?)|out(0?|[di]r?|[di]2r?)|tst(io)?|slp)(\.([sl]?i)?[sl])?\b/i;keywords2=/^(((call|j[pr]|rst|ret[in]?)(\.([sl]?i)?[sl])?)|(rs|st)mix)\b/i}else{keywords1=/^(exx?|(ld|cp|in)([di]r?)?|pop|push|ad[cd]|cpl|daa|dec|inc|neg|sbc|sub|and|bit|[cs]cf|x?or|res|set|r[lr]c?a?|r[lr]d|s[lr]a|srl|djnz|nop|rst|[de]i|halt|im|ot[di]r|out[di]?)\b/i;keywords2=/^(call|j[pr]|ret[in]?|b_?(call|jump))\b/i}
var variables1=/^(af?|bc?|c|de?|e|hl?|l|i[xy]?|r|sp)\b/i;var variables2=/^(n?[zc]|p[oe]?|m)\b/i;var errors=/^([hl][xy]|i[xy][hl]|slia|sll)\b/i;var numbers=/^([\da-f]+h|[0-7]+o|[01]+b|\d+d?)\b/i;return{startState:function(){return{context:0}},token:function(stream,state){if(!stream.column())
state.context=0;if(stream.eatSpace())
return null;var w;if(stream.eatWhile(/\w/)){if(ez80&&stream.eat('.')){stream.eatWhile(/\w/)}
w=stream.current();if(stream.indentation()){if((state.context==1||state.context==4)&&variables1.test(w)){state.context=4;return'var2'}
if(state.context==2&&variables2.test(w)){state.context=4;return'var3'}
if(keywords1.test(w)){state.context=1;return'keyword'}else if(keywords2.test(w)){state.context=2;return'keyword'}else if(state.context==4&&numbers.test(w)){return'number'}
if(errors.test(w))
return'error'}else if(stream.match(numbers)){return'number'}else{return null}}else if(stream.eat(';')){stream.skipToEnd();return'comment'}else if(stream.eat('"')){while(w=stream.next()){if(w=='"')
break;if(w=='\\')
stream.next()}
return'string'}else if(stream.eat('\'')){if(stream.match(/\\?.'/))
return'number'}else if(stream.eat('.')||stream.sol()&&stream.eat('#')){state.context=5;if(stream.eatWhile(/\w/))
return'def'}else if(stream.eat('$')){if(stream.eatWhile(/[\da-f]/i))
return'number'}else if(stream.eat('%')){if(stream.eatWhile(/[01]/))
return'number'}else{stream.next()}
return null}}});CodeMirror.defineMIME("text/x-z80","z80");CodeMirror.defineMIME("text/x-ez80",{name:"z80",ez80:!0})})}catch(e){};
/* rank:50standard - minify:ok. vendor_bundled/vendor/npm-asset/popper.js/dist/umd/popper.js */
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1-lts
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global.Popper=factory())}(this,(function(){'use strict';var isBrowser=typeof window!=='undefined'&&typeof document!=='undefined'&&typeof navigator!=='undefined';var timeoutDuration=function(){var longerTimeoutBrowsers=['Edge','Trident','Firefox'];for(var i=0;i<longerTimeoutBrowsers.length;i+=1){if(isBrowser&&navigator.userAgent.indexOf(longerTimeoutBrowsers[i])>=0){return 1}}
return 0}();function microtaskDebounce(fn){var called=!1;return function(){if(called){return}
called=!0;window.Promise.resolve().then(function(){called=!1;fn()})}}
function taskDebounce(fn){var scheduled=!1;return function(){if(!scheduled){scheduled=!0;setTimeout(function(){scheduled=!1;fn()},timeoutDuration)}}}
var supportsMicroTasks=isBrowser&&window.Promise;var debounce=supportsMicroTasks?microtaskDebounce:taskDebounce;function isFunction(functionToCheck){var getType={};return functionToCheck&&getType.toString.call(functionToCheck)==='[object Function]'}
function getStyleComputedProperty(element,property){if(element.nodeType!==1){return[]}
var window=element.ownerDocument.defaultView;var css=window.getComputedStyle(element,null);return property?css[property]:css}
function getParentNode(element){if(element.nodeName==='HTML'){return element}
return element.parentNode||element.host}
function getScrollParent(element){if(!element){return document.body}
switch(element.nodeName){case 'HTML':case 'BODY':return element.ownerDocument.body;case '#document':return element.body}
var _getStyleComputedProp=getStyleComputedProperty(element),overflow=_getStyleComputedProp.overflow,overflowX=_getStyleComputedProp.overflowX,overflowY=_getStyleComputedProp.overflowY;if(/(auto|scroll|overlay)/.test(overflow+overflowY+overflowX)){return element}
return getScrollParent(getParentNode(element))}
function getReferenceNode(reference){return reference&&reference.referenceNode?reference.referenceNode:reference}
var isIE11=isBrowser&&!!(window.MSInputMethodContext&&document.documentMode);var isIE10=isBrowser&&/MSIE 10/.test(navigator.userAgent);function isIE(version){if(version===11){return isIE11}
if(version===10){return isIE10}
return isIE11||isIE10}
function getOffsetParent(element){if(!element){return document.documentElement}
var noOffsetParent=isIE(10)?document.body:null;var offsetParent=element.offsetParent||null;while(offsetParent===noOffsetParent&&element.nextElementSibling){offsetParent=(element=element.nextElementSibling).offsetParent}
var nodeName=offsetParent&&offsetParent.nodeName;if(!nodeName||nodeName==='BODY'||nodeName==='HTML'){return element?element.ownerDocument.documentElement:document.documentElement}
if(['TH','TD','TABLE'].indexOf(offsetParent.nodeName)!==-1&&getStyleComputedProperty(offsetParent,'position')==='static'){return getOffsetParent(offsetParent)}
return offsetParent}
function isOffsetContainer(element){var nodeName=element.nodeName;if(nodeName==='BODY'){return!1}
return nodeName==='HTML'||getOffsetParent(element.firstElementChild)===element}
function getRoot(node){if(node.parentNode!==null){return getRoot(node.parentNode)}
return node}
function findCommonOffsetParent(element1,element2){if(!element1||!element1.nodeType||!element2||!element2.nodeType){return document.documentElement}
var order=element1.compareDocumentPosition(element2)&Node.DOCUMENT_POSITION_FOLLOWING;var start=order?element1:element2;var end=order?element2:element1;var range=document.createRange();range.setStart(start,0);range.setEnd(end,0);var commonAncestorContainer=range.commonAncestorContainer;if(element1!==commonAncestorContainer&&element2!==commonAncestorContainer||start.contains(end)){if(isOffsetContainer(commonAncestorContainer)){return commonAncestorContainer}
return getOffsetParent(commonAncestorContainer)}
var element1root=getRoot(element1);if(element1root.host){return findCommonOffsetParent(element1root.host,element2)}else{return findCommonOffsetParent(element1,getRoot(element2).host)}}
function getScroll(element){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'top';var upperSide=side==='top'?'scrollTop':'scrollLeft';var nodeName=element.nodeName;if(nodeName==='BODY'||nodeName==='HTML'){var html=element.ownerDocument.documentElement;var scrollingElement=element.ownerDocument.scrollingElement||html;return scrollingElement[upperSide]}
return element[upperSide]}
function includeScroll(rect,element){var subtract=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var scrollTop=getScroll(element,'top');var scrollLeft=getScroll(element,'left');var modifier=subtract?-1:1;rect.top+=scrollTop*modifier;rect.bottom+=scrollTop*modifier;rect.left+=scrollLeft*modifier;rect.right+=scrollLeft*modifier;return rect}
function getBordersSize(styles,axis){var sideA=axis==='x'?'Left':'Top';var sideB=sideA==='Left'?'Right':'Bottom';return parseFloat(styles['border'+sideA+'Width'])+parseFloat(styles['border'+sideB+'Width'])}
function getSize(axis,body,html,computedStyle){return Math.max(body['offset'+axis],body['scroll'+axis],html['client'+axis],html['offset'+axis],html['scroll'+axis],isIE(10)?parseInt(html['offset'+axis])+parseInt(computedStyle['margin'+(axis==='Height'?'Top':'Left')])+parseInt(computedStyle['margin'+(axis==='Height'?'Bottom':'Right')]):0)}
function getWindowSizes(document){var body=document.body;var html=document.documentElement;var computedStyle=isIE(10)&&getComputedStyle(html);return{height:getSize('Height',body,html,computedStyle),width:getSize('Width',body,html,computedStyle)}}
var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value" in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}
return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var defineProperty=function(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0})}else{obj[key]=value}
return obj};var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}
return target};function getClientRect(offsets){return _extends({},offsets,{right:offsets.left+offsets.width,bottom:offsets.top+offsets.height})}
function getBoundingClientRect(element){var rect={};try{if(isIE(10)){rect=element.getBoundingClientRect();var scrollTop=getScroll(element,'top');var scrollLeft=getScroll(element,'left');rect.top+=scrollTop;rect.left+=scrollLeft;rect.bottom+=scrollTop;rect.right+=scrollLeft}else{rect=element.getBoundingClientRect()}}catch(e){}
var result={left:rect.left,top:rect.top,width:rect.right-rect.left,height:rect.bottom-rect.top};var sizes=element.nodeName==='HTML'?getWindowSizes(element.ownerDocument):{};var width=sizes.width||element.clientWidth||result.width;var height=sizes.height||element.clientHeight||result.height;var horizScrollbar=element.offsetWidth-width;var vertScrollbar=element.offsetHeight-height;if(horizScrollbar||vertScrollbar){var styles=getStyleComputedProperty(element);horizScrollbar-=getBordersSize(styles,'x');vertScrollbar-=getBordersSize(styles,'y');result.width-=horizScrollbar;result.height-=vertScrollbar}
return getClientRect(result)}
function getOffsetRectRelativeToArbitraryNode(children,parent){var fixedPosition=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var isIE10=isIE(10);var isHTML=parent.nodeName==='HTML';var childrenRect=getBoundingClientRect(children);var parentRect=getBoundingClientRect(parent);var scrollParent=getScrollParent(children);var styles=getStyleComputedProperty(parent);var borderTopWidth=parseFloat(styles.borderTopWidth);var borderLeftWidth=parseFloat(styles.borderLeftWidth);if(fixedPosition&&isHTML){parentRect.top=Math.max(parentRect.top,0);parentRect.left=Math.max(parentRect.left,0)}
var offsets=getClientRect({top:childrenRect.top-parentRect.top-borderTopWidth,left:childrenRect.left-parentRect.left-borderLeftWidth,width:childrenRect.width,height:childrenRect.height});offsets.marginTop=0;offsets.marginLeft=0;if(!isIE10&&isHTML){var marginTop=parseFloat(styles.marginTop);var marginLeft=parseFloat(styles.marginLeft);offsets.top-=borderTopWidth-marginTop;offsets.bottom-=borderTopWidth-marginTop;offsets.left-=borderLeftWidth-marginLeft;offsets.right-=borderLeftWidth-marginLeft;offsets.marginTop=marginTop;offsets.marginLeft=marginLeft}
if(isIE10&&!fixedPosition?parent.contains(scrollParent):parent===scrollParent&&scrollParent.nodeName!=='BODY'){offsets=includeScroll(offsets,parent)}
return offsets}
function getViewportOffsetRectRelativeToArtbitraryNode(element){var excludeScroll=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var html=element.ownerDocument.documentElement;var relativeOffset=getOffsetRectRelativeToArbitraryNode(element,html);var width=Math.max(html.clientWidth,window.innerWidth||0);var height=Math.max(html.clientHeight,window.innerHeight||0);var scrollTop=!excludeScroll?getScroll(html):0;var scrollLeft=!excludeScroll?getScroll(html,'left'):0;var offset={top:scrollTop-relativeOffset.top+relativeOffset.marginTop,left:scrollLeft-relativeOffset.left+relativeOffset.marginLeft,width:width,height:height};return getClientRect(offset)}
function isFixed(element){var nodeName=element.nodeName;if(nodeName==='BODY'||nodeName==='HTML'){return!1}
if(getStyleComputedProperty(element,'position')==='fixed'){return!0}
var parentNode=getParentNode(element);if(!parentNode){return!1}
return isFixed(parentNode)}
function getFixedPositionOffsetParent(element){if(!element||!element.parentElement||isIE()){return document.documentElement}
var el=element.parentElement;while(el&&getStyleComputedProperty(el,'transform')==='none'){el=el.parentElement}
return el||document.documentElement}
function getBoundaries(popper,reference,padding,boundariesElement){var fixedPosition=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!1;var boundaries={top:0,left:0};var offsetParent=fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,getReferenceNode(reference));if(boundariesElement==='viewport'){boundaries=getViewportOffsetRectRelativeToArtbitraryNode(offsetParent,fixedPosition)}else{var boundariesNode=void 0;if(boundariesElement==='scrollParent'){boundariesNode=getScrollParent(getParentNode(reference));if(boundariesNode.nodeName==='BODY'){boundariesNode=popper.ownerDocument.documentElement}}else if(boundariesElement==='window'){boundariesNode=popper.ownerDocument.documentElement}else{boundariesNode=boundariesElement}
var offsets=getOffsetRectRelativeToArbitraryNode(boundariesNode,offsetParent,fixedPosition);if(boundariesNode.nodeName==='HTML'&&!isFixed(offsetParent)){var _getWindowSizes=getWindowSizes(popper.ownerDocument),height=_getWindowSizes.height,width=_getWindowSizes.width;boundaries.top+=offsets.top-offsets.marginTop;boundaries.bottom=height+offsets.top;boundaries.left+=offsets.left-offsets.marginLeft;boundaries.right=width+offsets.left}else{boundaries=offsets}}
padding=padding||0;var isPaddingNumber=typeof padding==='number';boundaries.left+=isPaddingNumber?padding:padding.left||0;boundaries.top+=isPaddingNumber?padding:padding.top||0;boundaries.right-=isPaddingNumber?padding:padding.right||0;boundaries.bottom-=isPaddingNumber?padding:padding.bottom||0;return boundaries}
function getArea(_ref){var width=_ref.width,height=_ref.height;return width*height}
function computeAutoPlacement(placement,refRect,popper,reference,boundariesElement){var padding=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;if(placement.indexOf('auto')===-1){return placement}
var boundaries=getBoundaries(popper,reference,padding,boundariesElement);var rects={top:{width:boundaries.width,height:refRect.top-boundaries.top},right:{width:boundaries.right-refRect.right,height:boundaries.height},bottom:{width:boundaries.width,height:boundaries.bottom-refRect.bottom},left:{width:refRect.left-boundaries.left,height:boundaries.height}};var sortedAreas=Object.keys(rects).map(function(key){return _extends({key:key},rects[key],{area:getArea(rects[key])})}).sort(function(a,b){return b.area-a.area});var filteredAreas=sortedAreas.filter(function(_ref2){var width=_ref2.width,height=_ref2.height;return width>=popper.clientWidth&&height>=popper.clientHeight});var computedPlacement=filteredAreas.length>0?filteredAreas[0].key:sortedAreas[0].key;var variation=placement.split('-')[1];return computedPlacement+(variation?'-'+variation:'')}
function getReferenceOffsets(state,popper,reference){var fixedPosition=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var commonOffsetParent=fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,getReferenceNode(reference));return getOffsetRectRelativeToArbitraryNode(reference,commonOffsetParent,fixedPosition)}
function getOuterSizes(element){var window=element.ownerDocument.defaultView;var styles=window.getComputedStyle(element);var x=parseFloat(styles.marginTop||0)+parseFloat(styles.marginBottom||0);var y=parseFloat(styles.marginLeft||0)+parseFloat(styles.marginRight||0);var result={width:element.offsetWidth+y,height:element.offsetHeight+x};return result}
function getOppositePlacement(placement){var hash={left:'right',right:'left',bottom:'top',top:'bottom'};return placement.replace(/left|right|bottom|top/g,function(matched){return hash[matched]})}
function getPopperOffsets(popper,referenceOffsets,placement){placement=placement.split('-')[0];var popperRect=getOuterSizes(popper);var popperOffsets={width:popperRect.width,height:popperRect.height};var isHoriz=['right','left'].indexOf(placement)!==-1;var mainSide=isHoriz?'top':'left';var secondarySide=isHoriz?'left':'top';var measurement=isHoriz?'height':'width';var secondaryMeasurement=!isHoriz?'height':'width';popperOffsets[mainSide]=referenceOffsets[mainSide]+referenceOffsets[measurement]/2-popperRect[measurement]/2;if(placement===secondarySide){popperOffsets[secondarySide]=referenceOffsets[secondarySide]-popperRect[secondaryMeasurement]}else{popperOffsets[secondarySide]=referenceOffsets[getOppositePlacement(secondarySide)]}
return popperOffsets}
function find(arr,check){if(Array.prototype.find){return arr.find(check)}
return arr.filter(check)[0]}
function findIndex(arr,prop,value){if(Array.prototype.findIndex){return arr.findIndex(function(cur){return cur[prop]===value})}
var match=find(arr,function(obj){return obj[prop]===value});return arr.indexOf(match)}
function runModifiers(modifiers,data,ends){var modifiersToRun=ends===undefined?modifiers:modifiers.slice(0,findIndex(modifiers,'name',ends));modifiersToRun.forEach(function(modifier){if(modifier['function']){console.warn('`modifier.function` is deprecated, use `modifier.fn`!')}
var fn=modifier['function']||modifier.fn;if(modifier.enabled&&isFunction(fn)){data.offsets.popper=getClientRect(data.offsets.popper);data.offsets.reference=getClientRect(data.offsets.reference);data=fn(data,modifier)}});return data}
function update(){if(this.state.isDestroyed){return}
var data={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};data.offsets.reference=getReferenceOffsets(this.state,this.popper,this.reference,this.options.positionFixed);data.placement=computeAutoPlacement(this.options.placement,data.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding);data.originalPlacement=data.placement;data.positionFixed=this.options.positionFixed;data.offsets.popper=getPopperOffsets(this.popper,data.offsets.reference,data.placement);data.offsets.popper.position=this.options.positionFixed?'fixed':'absolute';data=runModifiers(this.modifiers,data);if(!this.state.isCreated){this.state.isCreated=!0;this.options.onCreate(data)}else{this.options.onUpdate(data)}}
function isModifierEnabled(modifiers,modifierName){return modifiers.some(function(_ref){var name=_ref.name,enabled=_ref.enabled;return enabled&&name===modifierName})}
function getSupportedPropertyName(property){var prefixes=[!1,'ms','Webkit','Moz','O'];var upperProp=property.charAt(0).toUpperCase()+property.slice(1);for(var i=0;i<prefixes.length;i++){var prefix=prefixes[i];var toCheck=prefix?''+prefix+upperProp:property;if(typeof document.body.style[toCheck]!=='undefined'){return toCheck}}
return null}
function destroy(){this.state.isDestroyed=!0;if(isModifierEnabled(this.modifiers,'applyStyle')){this.popper.removeAttribute('x-placement');this.popper.style.position='';this.popper.style.top='';this.popper.style.left='';this.popper.style.right='';this.popper.style.bottom='';this.popper.style.willChange='';this.popper.style[getSupportedPropertyName('transform')]=''}
this.disableEventListeners();if(this.options.removeOnDestroy){this.popper.parentNode.removeChild(this.popper)}
return this}
function getWindow(element){var ownerDocument=element.ownerDocument;return ownerDocument?ownerDocument.defaultView:window}
function attachToScrollParents(scrollParent,event,callback,scrollParents){var isBody=scrollParent.nodeName==='BODY';var target=isBody?scrollParent.ownerDocument.defaultView:scrollParent;target.addEventListener(event,callback,{passive:!0});if(!isBody){attachToScrollParents(getScrollParent(target.parentNode),event,callback,scrollParents)}
scrollParents.push(target)}
function setupEventListeners(reference,options,state,updateBound){state.updateBound=updateBound;getWindow(reference).addEventListener('resize',state.updateBound,{passive:!0});var scrollElement=getScrollParent(reference);attachToScrollParents(scrollElement,'scroll',state.updateBound,state.scrollParents);state.scrollElement=scrollElement;state.eventsEnabled=!0;return state}
function enableEventListeners(){if(!this.state.eventsEnabled){this.state=setupEventListeners(this.reference,this.options,this.state,this.scheduleUpdate)}}
function removeEventListeners(reference,state){getWindow(reference).removeEventListener('resize',state.updateBound);state.scrollParents.forEach(function(target){target.removeEventListener('scroll',state.updateBound)});state.updateBound=null;state.scrollParents=[];state.scrollElement=null;state.eventsEnabled=!1;return state}
function disableEventListeners(){if(this.state.eventsEnabled){cancelAnimationFrame(this.scheduleUpdate);this.state=removeEventListeners(this.reference,this.state)}}
function isNumeric(n){return n!==''&&!isNaN(parseFloat(n))&&isFinite(n)}
function setStyles(element,styles){Object.keys(styles).forEach(function(prop){var unit='';if(['width','height','top','right','bottom','left'].indexOf(prop)!==-1&&isNumeric(styles[prop])){unit='px'}
element.style[prop]=styles[prop]+unit})}
function setAttributes(element,attributes){Object.keys(attributes).forEach(function(prop){var value=attributes[prop];if(value!==!1){element.setAttribute(prop,attributes[prop])}else{element.removeAttribute(prop)}})}
function applyStyle(data){setStyles(data.instance.popper,data.styles);setAttributes(data.instance.popper,data.attributes);if(data.arrowElement&&Object.keys(data.arrowStyles).length){setStyles(data.arrowElement,data.arrowStyles)}
return data}
function applyStyleOnLoad(reference,popper,options,modifierOptions,state){var referenceOffsets=getReferenceOffsets(state,popper,reference,options.positionFixed);var placement=computeAutoPlacement(options.placement,referenceOffsets,popper,reference,options.modifiers.flip.boundariesElement,options.modifiers.flip.padding);popper.setAttribute('x-placement',placement);setStyles(popper,{position:options.positionFixed?'fixed':'absolute'});return options}
function getRoundedOffsets(data,shouldRound){var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var round=Math.round,floor=Math.floor;var noRound=function noRound(v){return v};var referenceWidth=round(reference.width);var popperWidth=round(popper.width);var isVertical=['left','right'].indexOf(data.placement)!==-1;var isVariation=data.placement.indexOf('-')!==-1;var sameWidthParity=referenceWidth%2===popperWidth%2;var bothOddWidth=referenceWidth%2===1&&popperWidth%2===1;var horizontalToInteger=!shouldRound?noRound:isVertical||isVariation||sameWidthParity?round:floor;var verticalToInteger=!shouldRound?noRound:round;return{left:horizontalToInteger(bothOddWidth&&!isVariation&&shouldRound?popper.left-1:popper.left),top:verticalToInteger(popper.top),bottom:verticalToInteger(popper.bottom),right:horizontalToInteger(popper.right)}}
var isFirefox=isBrowser&&/Firefox/i.test(navigator.userAgent);function computeStyle(data,options){var x=options.x,y=options.y;var popper=data.offsets.popper;var legacyGpuAccelerationOption=find(data.instance.modifiers,function(modifier){return modifier.name==='applyStyle'}).gpuAcceleration;if(legacyGpuAccelerationOption!==undefined){console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!')}
var gpuAcceleration=legacyGpuAccelerationOption!==undefined?legacyGpuAccelerationOption:options.gpuAcceleration;var offsetParent=getOffsetParent(data.instance.popper);var offsetParentRect=getBoundingClientRect(offsetParent);var styles={position:popper.position};var offsets=getRoundedOffsets(data,window.devicePixelRatio<2||!isFirefox);var sideA=x==='bottom'?'top':'bottom';var sideB=y==='right'?'left':'right';var prefixedProperty=getSupportedPropertyName('transform');var left=void 0,top=void 0;if(sideA==='bottom'){if(offsetParent.nodeName==='HTML'){top=-offsetParent.clientHeight+offsets.bottom}else{top=-offsetParentRect.height+offsets.bottom}}else{top=offsets.top}
if(sideB==='right'){if(offsetParent.nodeName==='HTML'){left=-offsetParent.clientWidth+offsets.right}else{left=-offsetParentRect.width+offsets.right}}else{left=offsets.left}
if(gpuAcceleration&&prefixedProperty){styles[prefixedProperty]='translate3d('+left+'px, '+top+'px, 0)';styles[sideA]=0;styles[sideB]=0;styles.willChange='transform'}else{var invertTop=sideA==='bottom'?-1:1;var invertLeft=sideB==='right'?-1:1;styles[sideA]=top*invertTop;styles[sideB]=left*invertLeft;styles.willChange=sideA+', '+sideB}
var attributes={'x-placement':data.placement};data.attributes=_extends({},attributes,data.attributes);data.styles=_extends({},styles,data.styles);data.arrowStyles=_extends({},data.offsets.arrow,data.arrowStyles);return data}
function isModifierRequired(modifiers,requestingName,requestedName){var requesting=find(modifiers,function(_ref){var name=_ref.name;return name===requestingName});var isRequired=!!requesting&&modifiers.some(function(modifier){return modifier.name===requestedName&&modifier.enabled&&modifier.order<requesting.order});if(!isRequired){var _requesting='`'+requestingName+'`';var requested='`'+requestedName+'`';console.warn(requested+' modifier is required by '+_requesting+' modifier in order to work, be sure to include it before '+_requesting+'!')}
return isRequired}
function arrow(data,options){var _data$offsets$arrow;if(!isModifierRequired(data.instance.modifiers,'arrow','keepTogether')){return data}
var arrowElement=options.element;if(typeof arrowElement==='string'){arrowElement=data.instance.popper.querySelector(arrowElement);if(!arrowElement){return data}}else{if(!data.instance.popper.contains(arrowElement)){console.warn('WARNING: `arrow.element` must be child of its popper element!');return data}}
var placement=data.placement.split('-')[0];var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var isVertical=['left','right'].indexOf(placement)!==-1;var len=isVertical?'height':'width';var sideCapitalized=isVertical?'Top':'Left';var side=sideCapitalized.toLowerCase();var altSide=isVertical?'left':'top';var opSide=isVertical?'bottom':'right';var arrowElementSize=getOuterSizes(arrowElement)[len];if(reference[opSide]-arrowElementSize<popper[side]){data.offsets.popper[side]-=popper[side]-(reference[opSide]-arrowElementSize)}
if(reference[side]+arrowElementSize>popper[opSide]){data.offsets.popper[side]+=reference[side]+arrowElementSize-popper[opSide]}
data.offsets.popper=getClientRect(data.offsets.popper);var center=reference[side]+reference[len]/2-arrowElementSize/2;var css=getStyleComputedProperty(data.instance.popper);var popperMarginSide=parseFloat(css['margin'+sideCapitalized]);var popperBorderSide=parseFloat(css['border'+sideCapitalized+'Width']);var sideValue=center-data.offsets.popper[side]-popperMarginSide-popperBorderSide;sideValue=Math.max(Math.min(popper[len]-arrowElementSize,sideValue),0);data.arrowElement=arrowElement;data.offsets.arrow=(_data$offsets$arrow={},defineProperty(_data$offsets$arrow,side,Math.round(sideValue)),defineProperty(_data$offsets$arrow,altSide,''),_data$offsets$arrow);return data}
function getOppositeVariation(variation){if(variation==='end'){return'start'}else if(variation==='start'){return'end'}
return variation}
var placements=['auto-start','auto','auto-end','top-start','top','top-end','right-start','right','right-end','bottom-end','bottom','bottom-start','left-end','left','left-start'];var validPlacements=placements.slice(3);function clockwise(placement){var counter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var index=validPlacements.indexOf(placement);var arr=validPlacements.slice(index+1).concat(validPlacements.slice(0,index));return counter?arr.reverse():arr}
var BEHAVIORS={FLIP:'flip',CLOCKWISE:'clockwise',COUNTERCLOCKWISE:'counterclockwise'};function flip(data,options){if(isModifierEnabled(data.instance.modifiers,'inner')){return data}
if(data.flipped&&data.placement===data.originalPlacement){return data}
var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,options.boundariesElement,data.positionFixed);var placement=data.placement.split('-')[0];var placementOpposite=getOppositePlacement(placement);var variation=data.placement.split('-')[1]||'';var flipOrder=[];switch(options.behavior){case BEHAVIORS.FLIP:flipOrder=[placement,placementOpposite];break;case BEHAVIORS.CLOCKWISE:flipOrder=clockwise(placement);break;case BEHAVIORS.COUNTERCLOCKWISE:flipOrder=clockwise(placement,!0);break;default:flipOrder=options.behavior}
flipOrder.forEach(function(step,index){if(placement!==step||flipOrder.length===index+1){return data}
placement=data.placement.split('-')[0];placementOpposite=getOppositePlacement(placement);var popperOffsets=data.offsets.popper;var refOffsets=data.offsets.reference;var floor=Math.floor;var overlapsRef=placement==='left'&&floor(popperOffsets.right)>floor(refOffsets.left)||placement==='right'&&floor(popperOffsets.left)<floor(refOffsets.right)||placement==='top'&&floor(popperOffsets.bottom)>floor(refOffsets.top)||placement==='bottom'&&floor(popperOffsets.top)<floor(refOffsets.bottom);var overflowsLeft=floor(popperOffsets.left)<floor(boundaries.left);var overflowsRight=floor(popperOffsets.right)>floor(boundaries.right);var overflowsTop=floor(popperOffsets.top)<floor(boundaries.top);var overflowsBottom=floor(popperOffsets.bottom)>floor(boundaries.bottom);var overflowsBoundaries=placement==='left'&&overflowsLeft||placement==='right'&&overflowsRight||placement==='top'&&overflowsTop||placement==='bottom'&&overflowsBottom;var isVertical=['top','bottom'].indexOf(placement)!==-1;var flippedVariationByRef=!!options.flipVariations&&(isVertical&&variation==='start'&&overflowsLeft||isVertical&&variation==='end'&&overflowsRight||!isVertical&&variation==='start'&&overflowsTop||!isVertical&&variation==='end'&&overflowsBottom);var flippedVariationByContent=!!options.flipVariationsByContent&&(isVertical&&variation==='start'&&overflowsRight||isVertical&&variation==='end'&&overflowsLeft||!isVertical&&variation==='start'&&overflowsBottom||!isVertical&&variation==='end'&&overflowsTop);var flippedVariation=flippedVariationByRef||flippedVariationByContent;if(overlapsRef||overflowsBoundaries||flippedVariation){data.flipped=!0;if(overlapsRef||overflowsBoundaries){placement=flipOrder[index+1]}
if(flippedVariation){variation=getOppositeVariation(variation)}
data.placement=placement+(variation?'-'+variation:'');data.offsets.popper=_extends({},data.offsets.popper,getPopperOffsets(data.instance.popper,data.offsets.reference,data.placement));data=runModifiers(data.instance.modifiers,data,'flip')}});return data}
function keepTogether(data){var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var placement=data.placement.split('-')[0];var floor=Math.floor;var isVertical=['top','bottom'].indexOf(placement)!==-1;var side=isVertical?'right':'bottom';var opSide=isVertical?'left':'top';var measurement=isVertical?'width':'height';if(popper[side]<floor(reference[opSide])){data.offsets.popper[opSide]=floor(reference[opSide])-popper[measurement]}
if(popper[opSide]>floor(reference[side])){data.offsets.popper[opSide]=floor(reference[side])}
return data}
function toValue(str,measurement,popperOffsets,referenceOffsets){var split=str.match(/((?:\-|\+)?\d*\.?\d*)(.*)/);var value=+split[1];var unit=split[2];if(!value){return str}
if(unit.indexOf('%')===0){var element=void 0;switch(unit){case '%p':element=popperOffsets;break;case '%':case '%r':default:element=referenceOffsets}
var rect=getClientRect(element);return rect[measurement]/100*value}else if(unit==='vh'||unit==='vw'){var size=void 0;if(unit==='vh'){size=Math.max(document.documentElement.clientHeight,window.innerHeight||0)}else{size=Math.max(document.documentElement.clientWidth,window.innerWidth||0)}
return size/100*value}else{return value}}
function parseOffset(offset,popperOffsets,referenceOffsets,basePlacement){var offsets=[0,0];var useHeight=['right','left'].indexOf(basePlacement)!==-1;var fragments=offset.split(/(\+|\-)/).map(function(frag){return frag.trim()});var divider=fragments.indexOf(find(fragments,function(frag){return frag.search(/,|\s/)!==-1}));if(fragments[divider]&&fragments[divider].indexOf(',')===-1){console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.')}
var splitRegex=/\s*,\s*|\s+/;var ops=divider!==-1?[fragments.slice(0,divider).concat([fragments[divider].split(splitRegex)[0]]),[fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider+1))]:[fragments];ops=ops.map(function(op,index){var measurement=(index===1?!useHeight:useHeight)?'height':'width';var mergeWithPrevious=!1;return op.reduce(function(a,b){if(a[a.length-1]===''&&['+','-'].indexOf(b)!==-1){a[a.length-1]=b;mergeWithPrevious=!0;return a}else if(mergeWithPrevious){a[a.length-1]+=b;mergeWithPrevious=!1;return a}else{return a.concat(b)}},[]).map(function(str){return toValue(str,measurement,popperOffsets,referenceOffsets)})});ops.forEach(function(op,index){op.forEach(function(frag,index2){if(isNumeric(frag)){offsets[index]+=frag*(op[index2-1]==='-'?-1:1)}})});return offsets}
function offset(data,_ref){var offset=_ref.offset;var placement=data.placement,_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var basePlacement=placement.split('-')[0];var offsets=void 0;if(isNumeric(+offset)){offsets=[+offset,0]}else{offsets=parseOffset(offset,popper,reference,basePlacement)}
if(basePlacement==='left'){popper.top+=offsets[0];popper.left-=offsets[1]}else if(basePlacement==='right'){popper.top+=offsets[0];popper.left+=offsets[1]}else if(basePlacement==='top'){popper.left+=offsets[0];popper.top-=offsets[1]}else if(basePlacement==='bottom'){popper.left+=offsets[0];popper.top+=offsets[1]}
data.popper=popper;return data}
function preventOverflow(data,options){var boundariesElement=options.boundariesElement||getOffsetParent(data.instance.popper);if(data.instance.reference===boundariesElement){boundariesElement=getOffsetParent(boundariesElement)}
var transformProp=getSupportedPropertyName('transform');var popperStyles=data.instance.popper.style;var top=popperStyles.top,left=popperStyles.left,transform=popperStyles[transformProp];popperStyles.top='';popperStyles.left='';popperStyles[transformProp]='';var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,boundariesElement,data.positionFixed);popperStyles.top=top;popperStyles.left=left;popperStyles[transformProp]=transform;options.boundaries=boundaries;var order=options.priority;var popper=data.offsets.popper;var check={primary:function primary(placement){var value=popper[placement];if(popper[placement]<boundaries[placement]&&!options.escapeWithReference){value=Math.max(popper[placement],boundaries[placement])}
return defineProperty({},placement,value)},secondary:function secondary(placement){var mainSide=placement==='right'?'left':'top';var value=popper[mainSide];if(popper[placement]>boundaries[placement]&&!options.escapeWithReference){value=Math.min(popper[mainSide],boundaries[placement]-(placement==='right'?popper.width:popper.height))}
return defineProperty({},mainSide,value)}};order.forEach(function(placement){var side=['left','top'].indexOf(placement)!==-1?'primary':'secondary';popper=_extends({},popper,check[side](placement))});data.offsets.popper=popper;return data}
function shift(data){var placement=data.placement;var basePlacement=placement.split('-')[0];var shiftvariation=placement.split('-')[1];if(shiftvariation){var _data$offsets=data.offsets,reference=_data$offsets.reference,popper=_data$offsets.popper;var isVertical=['bottom','top'].indexOf(basePlacement)!==-1;var side=isVertical?'left':'top';var measurement=isVertical?'width':'height';var shiftOffsets={start:defineProperty({},side,reference[side]),end:defineProperty({},side,reference[side]+reference[measurement]-popper[measurement])};data.offsets.popper=_extends({},popper,shiftOffsets[shiftvariation])}
return data}
function hide(data){if(!isModifierRequired(data.instance.modifiers,'hide','preventOverflow')){return data}
var refRect=data.offsets.reference;var bound=find(data.instance.modifiers,function(modifier){return modifier.name==='preventOverflow'}).boundaries;if(refRect.bottom<bound.top||refRect.left>bound.right||refRect.top>bound.bottom||refRect.right<bound.left){if(data.hide===!0){return data}
data.hide=!0;data.attributes['x-out-of-boundaries']=''}else{if(data.hide===!1){return data}
data.hide=!1;data.attributes['x-out-of-boundaries']=!1}
return data}
function inner(data){var placement=data.placement;var basePlacement=placement.split('-')[0];var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var isHoriz=['left','right'].indexOf(basePlacement)!==-1;var subtractLength=['top','left'].indexOf(basePlacement)===-1;popper[isHoriz?'left':'top']=reference[basePlacement]-(subtractLength?popper[isHoriz?'width':'height']:0);data.placement=getOppositePlacement(placement);data.offsets.popper=getClientRect(popper);return data}
var modifiers={shift:{order:100,enabled:!0,fn:shift},offset:{order:200,enabled:!0,fn:offset,offset:0},preventOverflow:{order:300,enabled:!0,fn:preventOverflow,priority:['left','right','top','bottom'],padding:5,boundariesElement:'scrollParent'},keepTogether:{order:400,enabled:!0,fn:keepTogether},arrow:{order:500,enabled:!0,fn:arrow,element:'[x-arrow]'},flip:{order:600,enabled:!0,fn:flip,behavior:'flip',padding:5,boundariesElement:'viewport',flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:inner},hide:{order:800,enabled:!0,fn:hide},computeStyle:{order:850,enabled:!0,fn:computeStyle,gpuAcceleration:!0,x:'bottom',y:'right'},applyStyle:{order:900,enabled:!0,fn:applyStyle,onLoad:applyStyleOnLoad,gpuAcceleration:undefined}};var Defaults={placement:'bottom',positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function onCreate(){},onUpdate:function onUpdate(){},modifiers:modifiers};var Popper=function(){function Popper(reference,popper){var _this=this;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};classCallCheck(this,Popper);this.scheduleUpdate=function(){return requestAnimationFrame(_this.update)};this.update=debounce(this.update.bind(this));this.options=_extends({},Popper.Defaults,options);this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]};this.reference=reference&&reference.jquery?reference[0]:reference;this.popper=popper&&popper.jquery?popper[0]:popper;this.options.modifiers={};Object.keys(_extends({},Popper.Defaults.modifiers,options.modifiers)).forEach(function(name){_this.options.modifiers[name]=_extends({},Popper.Defaults.modifiers[name]||{},options.modifiers?options.modifiers[name]:{})});this.modifiers=Object.keys(this.options.modifiers).map(function(name){return _extends({name:name},_this.options.modifiers[name])}).sort(function(a,b){return a.order-b.order});this.modifiers.forEach(function(modifierOptions){if(modifierOptions.enabled&&isFunction(modifierOptions.onLoad)){modifierOptions.onLoad(_this.reference,_this.popper,_this.options,modifierOptions,_this.state)}});this.update();var eventsEnabled=this.options.eventsEnabled;if(eventsEnabled){this.enableEventListeners()}
this.state.eventsEnabled=eventsEnabled}
createClass(Popper,[{key:'update',value:function update$$1(){return update.call(this)}},{key:'destroy',value:function destroy$$1(){return destroy.call(this)}},{key:'enableEventListeners',value:function enableEventListeners$$1(){return enableEventListeners.call(this)}},{key:'disableEventListeners',value:function disableEventListeners$$1(){return disableEventListeners.call(this)}}]);return Popper}();Popper.Utils=(typeof window!=='undefined'?window:global).PopperUtils;Popper.placements=placements;Popper.Defaults=Defaults;return Popper})));
/* rank:50standard - minify:ok. vendor_bundled/vendor/twbs/bootstrap/dist/js/bootstrap.js */
/*!
  * Bootstrap v4.6.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports,require('jquery'),require('popper.js')):typeof define==='function'&&define.amd?define(['exports','jquery','popper.js'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.bootstrap={},global.jQuery,global.Popper))}(this,(function(exports,$,Popper){'use strict';function _interopDefaultLegacy(e){return e&&typeof e==='object'&&'default' in e?e:{'default':e}}
var $__default=_interopDefaultLegacy($);var Popper__default=_interopDefaultLegacy(Popper);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value" in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}
return target};return _extends.apply(this,arguments)}
function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass}
var TRANSITION_END='transitionend';var MAX_UID=1000000;var MILLISECONDS_MULTIPLIER=1000;function toType(obj){if(obj===null||typeof obj==='undefined'){return""+obj}
return{}.toString.call(obj).match(/\s([a-z]+)/i)[1].toLowerCase()}
function getSpecialTransitionEndEvent(){return{bindType:TRANSITION_END,delegateType:TRANSITION_END,handle:function handle(event){if($__default['default'](event.target).is(this)){return event.handleObj.handler.apply(this,arguments)}
return undefined}}}
function transitionEndEmulator(duration){var _this=this;var called=!1;$__default['default'](this).one(Util.TRANSITION_END,function(){called=!0});setTimeout(function(){if(!called){Util.triggerTransitionEnd(_this)}},duration);return this}
function setTransitionEndSupport(){$__default['default'].fn.emulateTransitionEnd=transitionEndEmulator;$__default['default'].event.special[Util.TRANSITION_END]=getSpecialTransitionEndEvent()}
var Util={TRANSITION_END:'bsTransitionEnd',getUID:function getUID(prefix){do{prefix+=~~(Math.random()*MAX_UID)}while(document.getElementById(prefix));return prefix},getSelectorFromElement:function getSelectorFromElement(element){var selector=element.getAttribute('data-target');if(!selector||selector==='#'){var hrefAttr=element.getAttribute('href');selector=hrefAttr&&hrefAttr!=='#'?hrefAttr.trim():''}
try{return document.querySelector(selector)?selector:null}catch(_){return null}},getTransitionDurationFromElement:function getTransitionDurationFromElement(element){if(!element){return 0}
var transitionDuration=$__default['default'](element).css('transition-duration');var transitionDelay=$__default['default'](element).css('transition-delay');var floatTransitionDuration=parseFloat(transitionDuration);var floatTransitionDelay=parseFloat(transitionDelay);if(!floatTransitionDuration&&!floatTransitionDelay){return 0}
transitionDuration=transitionDuration.split(',')[0];transitionDelay=transitionDelay.split(',')[0];return(parseFloat(transitionDuration)+parseFloat(transitionDelay))*MILLISECONDS_MULTIPLIER},reflow:function reflow(element){return element.offsetHeight},triggerTransitionEnd:function triggerTransitionEnd(element){$__default['default'](element).trigger(TRANSITION_END)},supportsTransitionEnd:function supportsTransitionEnd(){return Boolean(TRANSITION_END)},isElement:function isElement(obj){return(obj[0]||obj).nodeType},typeCheckConfig:function typeCheckConfig(componentName,config,configTypes){for(var property in configTypes){if(Object.prototype.hasOwnProperty.call(configTypes,property)){var expectedTypes=configTypes[property];var value=config[property];var valueType=value&&Util.isElement(value)?'element':toType(value);if(!new RegExp(expectedTypes).test(valueType)){throw new Error(componentName.toUpperCase()+": "+("Option \""+property+"\" provided type \""+valueType+"\" ")+("but expected type \""+expectedTypes+"\"."))}}}},findShadowRoot:function findShadowRoot(element){if(!document.documentElement.attachShadow){return null}
if(typeof element.getRootNode==='function'){var root=element.getRootNode();return root instanceof ShadowRoot?root:null}
if(element instanceof ShadowRoot){return element}
if(!element.parentNode){return null}
return Util.findShadowRoot(element.parentNode)},jQueryDetection:function jQueryDetection(){if(typeof $__default['default']==='undefined'){throw new TypeError('Bootstrap\'s JavaScript requires jQuery. jQuery must be included before Bootstrap\'s JavaScript.')}
var version=$__default['default'].fn.jquery.split(' ')[0].split('.');var minMajor=1;var ltMajor=2;var minMinor=9;var minPatch=1;var maxMajor=4;if(version[0]<ltMajor&&version[1]<minMinor||version[0]===minMajor&&version[1]===minMinor&&version[2]<minPatch||version[0]>=maxMajor){throw new Error('Bootstrap\'s JavaScript requires at least jQuery v1.9.1 but less than v4.0.0')}}};Util.jQueryDetection();setTransitionEndSupport();var NAME='alert';var VERSION='4.6.0';var DATA_KEY='bs.alert';var EVENT_KEY="."+DATA_KEY;var DATA_API_KEY='.data-api';var JQUERY_NO_CONFLICT=$__default['default'].fn[NAME];var SELECTOR_DISMISS='[data-dismiss="alert"]';var EVENT_CLOSE="close"+EVENT_KEY;var EVENT_CLOSED="closed"+EVENT_KEY;var EVENT_CLICK_DATA_API="click"+EVENT_KEY+DATA_API_KEY;var CLASS_NAME_ALERT='alert';var CLASS_NAME_FADE='fade';var CLASS_NAME_SHOW='show';var Alert=function(){function Alert(element){this._element=element}
var _proto=Alert.prototype;_proto.close=function close(element){var rootElement=this._element;if(element){rootElement=this._getRootElement(element)}
var customEvent=this._triggerCloseEvent(rootElement);if(customEvent.isDefaultPrevented()){return}
this._removeElement(rootElement)};_proto.dispose=function dispose(){$__default['default'].removeData(this._element,DATA_KEY);this._element=null};_proto._getRootElement=function _getRootElement(element){var selector=Util.getSelectorFromElement(element);var parent=!1;if(selector){parent=document.querySelector(selector)}
if(!parent){parent=$__default['default'](element).closest("."+CLASS_NAME_ALERT)[0]}
return parent};_proto._triggerCloseEvent=function _triggerCloseEvent(element){var closeEvent=$__default['default'].Event(EVENT_CLOSE);$__default['default'](element).trigger(closeEvent);return closeEvent};_proto._removeElement=function _removeElement(element){var _this=this;$__default['default'](element).removeClass(CLASS_NAME_SHOW);if(!$__default['default'](element).hasClass(CLASS_NAME_FADE)){this._destroyElement(element);return}
var transitionDuration=Util.getTransitionDurationFromElement(element);$__default['default'](element).one(Util.TRANSITION_END,function(event){return _this._destroyElement(element,event)}).emulateTransitionEnd(transitionDuration)};_proto._destroyElement=function _destroyElement(element){$__default['default'](element).detach().trigger(EVENT_CLOSED).remove()};Alert._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var $element=$__default['default'](this);var data=$element.data(DATA_KEY);if(!data){data=new Alert(this);$element.data(DATA_KEY,data)}
if(config==='close'){data[config](this)}})};Alert._handleDismiss=function _handleDismiss(alertInstance){return function(event){if(event){event.preventDefault()}
alertInstance.close(this)}};_createClass(Alert,null,[{key:"VERSION",get:function get(){return VERSION}}]);return Alert}();$__default['default'](document).on(EVENT_CLICK_DATA_API,SELECTOR_DISMISS,Alert._handleDismiss(new Alert()));$__default['default'].fn[NAME]=Alert._jQueryInterface;$__default['default'].fn[NAME].Constructor=Alert;$__default['default'].fn[NAME].noConflict=function(){$__default['default'].fn[NAME]=JQUERY_NO_CONFLICT;return Alert._jQueryInterface};var NAME$1='button';var VERSION$1='4.6.0';var DATA_KEY$1='bs.button';var EVENT_KEY$1="."+DATA_KEY$1;var DATA_API_KEY$1='.data-api';var JQUERY_NO_CONFLICT$1=$__default['default'].fn[NAME$1];var CLASS_NAME_ACTIVE='active';var CLASS_NAME_BUTTON='btn';var CLASS_NAME_FOCUS='focus';var SELECTOR_DATA_TOGGLE_CARROT='[data-toggle^="button"]';var SELECTOR_DATA_TOGGLES='[data-toggle="buttons"]';var SELECTOR_DATA_TOGGLE='[data-toggle="button"]';var SELECTOR_DATA_TOGGLES_BUTTONS='[data-toggle="buttons"] .btn';var SELECTOR_INPUT='input:not([type="hidden"])';var SELECTOR_ACTIVE='.active';var SELECTOR_BUTTON='.btn';var EVENT_CLICK_DATA_API$1="click"+EVENT_KEY$1+DATA_API_KEY$1;var EVENT_FOCUS_BLUR_DATA_API="focus"+EVENT_KEY$1+DATA_API_KEY$1+" "+("blur"+EVENT_KEY$1+DATA_API_KEY$1);var EVENT_LOAD_DATA_API="load"+EVENT_KEY$1+DATA_API_KEY$1;var Button=function(){function Button(element){this._element=element;this.shouldAvoidTriggerChange=!1}
var _proto=Button.prototype;_proto.toggle=function toggle(){var triggerChangeEvent=!0;var addAriaPressed=!0;var rootElement=$__default['default'](this._element).closest(SELECTOR_DATA_TOGGLES)[0];if(rootElement){var input=this._element.querySelector(SELECTOR_INPUT);if(input){if(input.type==='radio'){if(input.checked&&this._element.classList.contains(CLASS_NAME_ACTIVE)){triggerChangeEvent=!1}else{var activeElement=rootElement.querySelector(SELECTOR_ACTIVE);if(activeElement){$__default['default'](activeElement).removeClass(CLASS_NAME_ACTIVE)}}}
if(triggerChangeEvent){if(input.type==='checkbox'||input.type==='radio'){input.checked=!this._element.classList.contains(CLASS_NAME_ACTIVE)}
if(!this.shouldAvoidTriggerChange){$__default['default'](input).trigger('change')}}
input.focus();addAriaPressed=!1}}
if(!(this._element.hasAttribute('disabled')||this._element.classList.contains('disabled'))){if(addAriaPressed){this._element.setAttribute('aria-pressed',!this._element.classList.contains(CLASS_NAME_ACTIVE))}
if(triggerChangeEvent){$__default['default'](this._element).toggleClass(CLASS_NAME_ACTIVE)}}};_proto.dispose=function dispose(){$__default['default'].removeData(this._element,DATA_KEY$1);this._element=null};Button._jQueryInterface=function _jQueryInterface(config,avoidTriggerChange){return this.each(function(){var $element=$__default['default'](this);var data=$element.data(DATA_KEY$1);if(!data){data=new Button(this);$element.data(DATA_KEY$1,data)}
data.shouldAvoidTriggerChange=avoidTriggerChange;if(config==='toggle'){data[config]()}})};_createClass(Button,null,[{key:"VERSION",get:function get(){return VERSION$1}}]);return Button}();$__default['default'](document).on(EVENT_CLICK_DATA_API$1,SELECTOR_DATA_TOGGLE_CARROT,function(event){var button=event.target;var initialButton=button;if(!$__default['default'](button).hasClass(CLASS_NAME_BUTTON)){button=$__default['default'](button).closest(SELECTOR_BUTTON)[0]}
if(!button||button.hasAttribute('disabled')||button.classList.contains('disabled')){event.preventDefault()}else{var inputBtn=button.querySelector(SELECTOR_INPUT);if(inputBtn&&(inputBtn.hasAttribute('disabled')||inputBtn.classList.contains('disabled'))){event.preventDefault();return}
if(initialButton.tagName==='INPUT'||button.tagName!=='LABEL'){Button._jQueryInterface.call($__default['default'](button),'toggle',initialButton.tagName==='INPUT')}}}).on(EVENT_FOCUS_BLUR_DATA_API,SELECTOR_DATA_TOGGLE_CARROT,function(event){var button=$__default['default'](event.target).closest(SELECTOR_BUTTON)[0];$__default['default'](button).toggleClass(CLASS_NAME_FOCUS,/^focus(in)?$/.test(event.type))});$__default['default'](window).on(EVENT_LOAD_DATA_API,function(){var buttons=[].slice.call(document.querySelectorAll(SELECTOR_DATA_TOGGLES_BUTTONS));for(var i=0,len=buttons.length;i<len;i++){var button=buttons[i];var input=button.querySelector(SELECTOR_INPUT);if(input.checked||input.hasAttribute('checked')){button.classList.add(CLASS_NAME_ACTIVE)}else{button.classList.remove(CLASS_NAME_ACTIVE)}}
buttons=[].slice.call(document.querySelectorAll(SELECTOR_DATA_TOGGLE));for(var _i=0,_len=buttons.length;_i<_len;_i++){var _button=buttons[_i];if(_button.getAttribute('aria-pressed')==='true'){_button.classList.add(CLASS_NAME_ACTIVE)}else{_button.classList.remove(CLASS_NAME_ACTIVE)}}});$__default['default'].fn[NAME$1]=Button._jQueryInterface;$__default['default'].fn[NAME$1].Constructor=Button;$__default['default'].fn[NAME$1].noConflict=function(){$__default['default'].fn[NAME$1]=JQUERY_NO_CONFLICT$1;return Button._jQueryInterface};var NAME$2='carousel';var VERSION$2='4.6.0';var DATA_KEY$2='bs.carousel';var EVENT_KEY$2="."+DATA_KEY$2;var DATA_API_KEY$2='.data-api';var JQUERY_NO_CONFLICT$2=$__default['default'].fn[NAME$2];var ARROW_LEFT_KEYCODE=37;var ARROW_RIGHT_KEYCODE=39;var TOUCHEVENT_COMPAT_WAIT=500;var SWIPE_THRESHOLD=40;var Default={interval:5000,keyboard:!0,slide:!1,pause:'hover',wrap:!0,touch:!0};var DefaultType={interval:'(number|boolean)',keyboard:'boolean',slide:'(boolean|string)',pause:'(string|boolean)',wrap:'boolean',touch:'boolean'};var DIRECTION_NEXT='next';var DIRECTION_PREV='prev';var DIRECTION_LEFT='left';var DIRECTION_RIGHT='right';var EVENT_SLIDE="slide"+EVENT_KEY$2;var EVENT_SLID="slid"+EVENT_KEY$2;var EVENT_KEYDOWN="keydown"+EVENT_KEY$2;var EVENT_MOUSEENTER="mouseenter"+EVENT_KEY$2;var EVENT_MOUSELEAVE="mouseleave"+EVENT_KEY$2;var EVENT_TOUCHSTART="touchstart"+EVENT_KEY$2;var EVENT_TOUCHMOVE="touchmove"+EVENT_KEY$2;var EVENT_TOUCHEND="touchend"+EVENT_KEY$2;var EVENT_POINTERDOWN="pointerdown"+EVENT_KEY$2;var EVENT_POINTERUP="pointerup"+EVENT_KEY$2;var EVENT_DRAG_START="dragstart"+EVENT_KEY$2;var EVENT_LOAD_DATA_API$1="load"+EVENT_KEY$2+DATA_API_KEY$2;var EVENT_CLICK_DATA_API$2="click"+EVENT_KEY$2+DATA_API_KEY$2;var CLASS_NAME_CAROUSEL='carousel';var CLASS_NAME_ACTIVE$1='active';var CLASS_NAME_SLIDE='slide';var CLASS_NAME_RIGHT='carousel-item-right';var CLASS_NAME_LEFT='carousel-item-left';var CLASS_NAME_NEXT='carousel-item-next';var CLASS_NAME_PREV='carousel-item-prev';var CLASS_NAME_POINTER_EVENT='pointer-event';var SELECTOR_ACTIVE$1='.active';var SELECTOR_ACTIVE_ITEM='.active.carousel-item';var SELECTOR_ITEM='.carousel-item';var SELECTOR_ITEM_IMG='.carousel-item img';var SELECTOR_NEXT_PREV='.carousel-item-next, .carousel-item-prev';var SELECTOR_INDICATORS='.carousel-indicators';var SELECTOR_DATA_SLIDE='[data-slide], [data-slide-to]';var SELECTOR_DATA_RIDE='[data-ride="carousel"]';var PointerType={TOUCH:'touch',PEN:'pen'};var Carousel=function(){function Carousel(element,config){this._items=null;this._interval=null;this._activeElement=null;this._isPaused=!1;this._isSliding=!1;this.touchTimeout=null;this.touchStartX=0;this.touchDeltaX=0;this._config=this._getConfig(config);this._element=element;this._indicatorsElement=this._element.querySelector(SELECTOR_INDICATORS);this._touchSupported='ontouchstart' in document.documentElement||navigator.maxTouchPoints>0;this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent);this._addEventListeners()}
var _proto=Carousel.prototype;_proto.next=function next(){if(!this._isSliding){this._slide(DIRECTION_NEXT)}};_proto.nextWhenVisible=function nextWhenVisible(){var $element=$__default['default'](this._element);if(!document.hidden&&$element.is(':visible')&&$element.css('visibility')!=='hidden'){this.next()}};_proto.prev=function prev(){if(!this._isSliding){this._slide(DIRECTION_PREV)}};_proto.pause=function pause(event){if(!event){this._isPaused=!0}
if(this._element.querySelector(SELECTOR_NEXT_PREV)){Util.triggerTransitionEnd(this._element);this.cycle(!0)}
clearInterval(this._interval);this._interval=null};_proto.cycle=function cycle(event){if(!event){this._isPaused=!1}
if(this._interval){clearInterval(this._interval);this._interval=null}
if(this._config.interval&&!this._isPaused){this._updateInterval();this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval)}};_proto.to=function to(index){var _this=this;this._activeElement=this._element.querySelector(SELECTOR_ACTIVE_ITEM);var activeIndex=this._getItemIndex(this._activeElement);if(index>this._items.length-1||index<0){return}
if(this._isSliding){$__default['default'](this._element).one(EVENT_SLID,function(){return _this.to(index)});return}
if(activeIndex===index){this.pause();this.cycle();return}
var direction=index>activeIndex?DIRECTION_NEXT:DIRECTION_PREV;this._slide(direction,this._items[index])};_proto.dispose=function dispose(){$__default['default'](this._element).off(EVENT_KEY$2);$__default['default'].removeData(this._element,DATA_KEY$2);this._items=null;this._config=null;this._element=null;this._interval=null;this._isPaused=null;this._isSliding=null;this._activeElement=null;this._indicatorsElement=null};_proto._getConfig=function _getConfig(config){config=_extends({},Default,config);Util.typeCheckConfig(NAME$2,config,DefaultType);return config};_proto._handleSwipe=function _handleSwipe(){var absDeltax=Math.abs(this.touchDeltaX);if(absDeltax<=SWIPE_THRESHOLD){return}
var direction=absDeltax/this.touchDeltaX;this.touchDeltaX=0;if(direction>0){this.prev()}
if(direction<0){this.next()}};_proto._addEventListeners=function _addEventListeners(){var _this2=this;if(this._config.keyboard){$__default['default'](this._element).on(EVENT_KEYDOWN,function(event){return _this2._keydown(event)})}
if(this._config.pause==='hover'){$__default['default'](this._element).on(EVENT_MOUSEENTER,function(event){return _this2.pause(event)}).on(EVENT_MOUSELEAVE,function(event){return _this2.cycle(event)})}
if(this._config.touch){this._addTouchEventListeners()}};_proto._addTouchEventListeners=function _addTouchEventListeners(){var _this3=this;if(!this._touchSupported){return}
var start=function start(event){if(_this3._pointerEvent&&PointerType[event.originalEvent.pointerType.toUpperCase()]){_this3.touchStartX=event.originalEvent.clientX}else if(!_this3._pointerEvent){_this3.touchStartX=event.originalEvent.touches[0].clientX}};var move=function move(event){if(event.originalEvent.touches&&event.originalEvent.touches.length>1){_this3.touchDeltaX=0}else{_this3.touchDeltaX=event.originalEvent.touches[0].clientX-_this3.touchStartX}};var end=function end(event){if(_this3._pointerEvent&&PointerType[event.originalEvent.pointerType.toUpperCase()]){_this3.touchDeltaX=event.originalEvent.clientX-_this3.touchStartX}
_this3._handleSwipe();if(_this3._config.pause==='hover'){_this3.pause();if(_this3.touchTimeout){clearTimeout(_this3.touchTimeout)}
_this3.touchTimeout=setTimeout(function(event){return _this3.cycle(event)},TOUCHEVENT_COMPAT_WAIT+_this3._config.interval)}};$__default['default'](this._element.querySelectorAll(SELECTOR_ITEM_IMG)).on(EVENT_DRAG_START,function(e){return e.preventDefault()});if(this._pointerEvent){$__default['default'](this._element).on(EVENT_POINTERDOWN,function(event){return start(event)});$__default['default'](this._element).on(EVENT_POINTERUP,function(event){return end(event)});this._element.classList.add(CLASS_NAME_POINTER_EVENT)}else{$__default['default'](this._element).on(EVENT_TOUCHSTART,function(event){return start(event)});$__default['default'](this._element).on(EVENT_TOUCHMOVE,function(event){return move(event)});$__default['default'](this._element).on(EVENT_TOUCHEND,function(event){return end(event)})}};_proto._keydown=function _keydown(event){if(/input|textarea/i.test(event.target.tagName)){return}
switch(event.which){case ARROW_LEFT_KEYCODE:event.preventDefault();this.prev();break;case ARROW_RIGHT_KEYCODE:event.preventDefault();this.next();break}};_proto._getItemIndex=function _getItemIndex(element){this._items=element&&element.parentNode?[].slice.call(element.parentNode.querySelectorAll(SELECTOR_ITEM)):[];return this._items.indexOf(element)};_proto._getItemByDirection=function _getItemByDirection(direction,activeElement){var isNextDirection=direction===DIRECTION_NEXT;var isPrevDirection=direction===DIRECTION_PREV;var activeIndex=this._getItemIndex(activeElement);var lastItemIndex=this._items.length-1;var isGoingToWrap=isPrevDirection&&activeIndex===0||isNextDirection&&activeIndex===lastItemIndex;if(isGoingToWrap&&!this._config.wrap){return activeElement}
var delta=direction===DIRECTION_PREV?-1:1;var itemIndex=(activeIndex+delta)%this._items.length;return itemIndex===-1?this._items[this._items.length-1]:this._items[itemIndex]};_proto._triggerSlideEvent=function _triggerSlideEvent(relatedTarget,eventDirectionName){var targetIndex=this._getItemIndex(relatedTarget);var fromIndex=this._getItemIndex(this._element.querySelector(SELECTOR_ACTIVE_ITEM));var slideEvent=$__default['default'].Event(EVENT_SLIDE,{relatedTarget:relatedTarget,direction:eventDirectionName,from:fromIndex,to:targetIndex});$__default['default'](this._element).trigger(slideEvent);return slideEvent};_proto._setActiveIndicatorElement=function _setActiveIndicatorElement(element){if(this._indicatorsElement){var indicators=[].slice.call(this._indicatorsElement.querySelectorAll(SELECTOR_ACTIVE$1));$__default['default'](indicators).removeClass(CLASS_NAME_ACTIVE$1);var nextIndicator=this._indicatorsElement.children[this._getItemIndex(element)];if(nextIndicator){$__default['default'](nextIndicator).addClass(CLASS_NAME_ACTIVE$1)}}};_proto._updateInterval=function _updateInterval(){var element=this._activeElement||this._element.querySelector(SELECTOR_ACTIVE_ITEM);if(!element){return}
var elementInterval=parseInt(element.getAttribute('data-interval'),10);if(elementInterval){this._config.defaultInterval=this._config.defaultInterval||this._config.interval;this._config.interval=elementInterval}else{this._config.interval=this._config.defaultInterval||this._config.interval}};_proto._slide=function _slide(direction,element){var _this4=this;var activeElement=this._element.querySelector(SELECTOR_ACTIVE_ITEM);var activeElementIndex=this._getItemIndex(activeElement);var nextElement=element||activeElement&&this._getItemByDirection(direction,activeElement);var nextElementIndex=this._getItemIndex(nextElement);var isCycling=Boolean(this._interval);var directionalClassName;var orderClassName;var eventDirectionName;if(direction===DIRECTION_NEXT){directionalClassName=CLASS_NAME_LEFT;orderClassName=CLASS_NAME_NEXT;eventDirectionName=DIRECTION_LEFT}else{directionalClassName=CLASS_NAME_RIGHT;orderClassName=CLASS_NAME_PREV;eventDirectionName=DIRECTION_RIGHT}
if(nextElement&&$__default['default'](nextElement).hasClass(CLASS_NAME_ACTIVE$1)){this._isSliding=!1;return}
var slideEvent=this._triggerSlideEvent(nextElement,eventDirectionName);if(slideEvent.isDefaultPrevented()){return}
if(!activeElement||!nextElement){return}
this._isSliding=!0;if(isCycling){this.pause()}
this._setActiveIndicatorElement(nextElement);this._activeElement=nextElement;var slidEvent=$__default['default'].Event(EVENT_SLID,{relatedTarget:nextElement,direction:eventDirectionName,from:activeElementIndex,to:nextElementIndex});if($__default['default'](this._element).hasClass(CLASS_NAME_SLIDE)){$__default['default'](nextElement).addClass(orderClassName);Util.reflow(nextElement);$__default['default'](activeElement).addClass(directionalClassName);$__default['default'](nextElement).addClass(directionalClassName);var transitionDuration=Util.getTransitionDurationFromElement(activeElement);$__default['default'](activeElement).one(Util.TRANSITION_END,function(){$__default['default'](nextElement).removeClass(directionalClassName+" "+orderClassName).addClass(CLASS_NAME_ACTIVE$1);$__default['default'](activeElement).removeClass(CLASS_NAME_ACTIVE$1+" "+orderClassName+" "+directionalClassName);_this4._isSliding=!1;setTimeout(function(){return $__default['default'](_this4._element).trigger(slidEvent)},0)}).emulateTransitionEnd(transitionDuration)}else{$__default['default'](activeElement).removeClass(CLASS_NAME_ACTIVE$1);$__default['default'](nextElement).addClass(CLASS_NAME_ACTIVE$1);this._isSliding=!1;$__default['default'](this._element).trigger(slidEvent)}
if(isCycling){this.cycle()}};Carousel._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var data=$__default['default'](this).data(DATA_KEY$2);var _config=_extends({},Default,$__default['default'](this).data());if(typeof config==='object'){_config=_extends({},_config,config)}
var action=typeof config==='string'?config:_config.slide;if(!data){data=new Carousel(this,_config);$__default['default'](this).data(DATA_KEY$2,data)}
if(typeof config==='number'){data.to(config)}else if(typeof action==='string'){if(typeof data[action]==='undefined'){throw new TypeError("No method named \""+action+"\"")}
data[action]()}else if(_config.interval&&_config.ride){data.pause();data.cycle()}})};Carousel._dataApiClickHandler=function _dataApiClickHandler(event){var selector=Util.getSelectorFromElement(this);if(!selector){return}
var target=$__default['default'](selector)[0];if(!target||!$__default['default'](target).hasClass(CLASS_NAME_CAROUSEL)){return}
var config=_extends({},$__default['default'](target).data(),$__default['default'](this).data());var slideIndex=this.getAttribute('data-slide-to');if(slideIndex){config.interval=!1}
Carousel._jQueryInterface.call($__default['default'](target),config);if(slideIndex){$__default['default'](target).data(DATA_KEY$2).to(slideIndex)}
event.preventDefault()};_createClass(Carousel,null,[{key:"VERSION",get:function get(){return VERSION$2}},{key:"Default",get:function get(){return Default}}]);return Carousel}();$__default['default'](document).on(EVENT_CLICK_DATA_API$2,SELECTOR_DATA_SLIDE,Carousel._dataApiClickHandler);$__default['default'](window).on(EVENT_LOAD_DATA_API$1,function(){var carousels=[].slice.call(document.querySelectorAll(SELECTOR_DATA_RIDE));for(var i=0,len=carousels.length;i<len;i++){var $carousel=$__default['default'](carousels[i]);Carousel._jQueryInterface.call($carousel,$carousel.data())}});$__default['default'].fn[NAME$2]=Carousel._jQueryInterface;$__default['default'].fn[NAME$2].Constructor=Carousel;$__default['default'].fn[NAME$2].noConflict=function(){$__default['default'].fn[NAME$2]=JQUERY_NO_CONFLICT$2;return Carousel._jQueryInterface};var NAME$3='collapse';var VERSION$3='4.6.0';var DATA_KEY$3='bs.collapse';var EVENT_KEY$3="."+DATA_KEY$3;var DATA_API_KEY$3='.data-api';var JQUERY_NO_CONFLICT$3=$__default['default'].fn[NAME$3];var Default$1={toggle:!0,parent:''};var DefaultType$1={toggle:'boolean',parent:'(string|element)'};var EVENT_SHOW="show"+EVENT_KEY$3;var EVENT_SHOWN="shown"+EVENT_KEY$3;var EVENT_HIDE="hide"+EVENT_KEY$3;var EVENT_HIDDEN="hidden"+EVENT_KEY$3;var EVENT_CLICK_DATA_API$3="click"+EVENT_KEY$3+DATA_API_KEY$3;var CLASS_NAME_SHOW$1='show';var CLASS_NAME_COLLAPSE='collapse';var CLASS_NAME_COLLAPSING='collapsing';var CLASS_NAME_COLLAPSED='collapsed';var DIMENSION_WIDTH='width';var DIMENSION_HEIGHT='height';var SELECTOR_ACTIVES='.show, .collapsing';var SELECTOR_DATA_TOGGLE$1='[data-toggle="collapse"]';var Collapse=function(){function Collapse(element,config){this._isTransitioning=!1;this._element=element;this._config=this._getConfig(config);this._triggerArray=[].slice.call(document.querySelectorAll("[data-toggle=\"collapse\"][href=\"#"+element.id+"\"],"+("[data-toggle=\"collapse\"][data-target=\"#"+element.id+"\"]")));var toggleList=[].slice.call(document.querySelectorAll(SELECTOR_DATA_TOGGLE$1));for(var i=0,len=toggleList.length;i<len;i++){var elem=toggleList[i];var selector=Util.getSelectorFromElement(elem);var filterElement=[].slice.call(document.querySelectorAll(selector)).filter(function(foundElem){return foundElem===element});if(selector!==null&&filterElement.length>0){this._selector=selector;this._triggerArray.push(elem)}}
this._parent=this._config.parent?this._getParent():null;if(!this._config.parent){this._addAriaAndCollapsedClass(this._element,this._triggerArray)}
if(this._config.toggle){this.toggle()}}
var _proto=Collapse.prototype;_proto.toggle=function toggle(){if($__default['default'](this._element).hasClass(CLASS_NAME_SHOW$1)){this.hide()}else{this.show()}};_proto.show=function show(){var _this=this;if(this._isTransitioning||$__default['default'](this._element).hasClass(CLASS_NAME_SHOW$1)){return}
var actives;var activesData;if(this._parent){actives=[].slice.call(this._parent.querySelectorAll(SELECTOR_ACTIVES)).filter(function(elem){if(typeof _this._config.parent==='string'){return elem.getAttribute('data-parent')===_this._config.parent}
return elem.classList.contains(CLASS_NAME_COLLAPSE)});if(actives.length===0){actives=null}}
if(actives){activesData=$__default['default'](actives).not(this._selector).data(DATA_KEY$3);if(activesData&&activesData._isTransitioning){return}}
var startEvent=$__default['default'].Event(EVENT_SHOW);$__default['default'](this._element).trigger(startEvent);if(startEvent.isDefaultPrevented()){return}
if(actives){Collapse._jQueryInterface.call($__default['default'](actives).not(this._selector),'hide');if(!activesData){$__default['default'](actives).data(DATA_KEY$3,null)}}
var dimension=this._getDimension();$__default['default'](this._element).removeClass(CLASS_NAME_COLLAPSE).addClass(CLASS_NAME_COLLAPSING);this._element.style[dimension]=0;if(this._triggerArray.length){$__default['default'](this._triggerArray).removeClass(CLASS_NAME_COLLAPSED).attr('aria-expanded',!0)}
this.setTransitioning(!0);var complete=function complete(){$__default['default'](_this._element).removeClass(CLASS_NAME_COLLAPSING).addClass(CLASS_NAME_COLLAPSE+" "+CLASS_NAME_SHOW$1);_this._element.style[dimension]='';_this.setTransitioning(!1);$__default['default'](_this._element).trigger(EVENT_SHOWN)};var capitalizedDimension=dimension[0].toUpperCase()+dimension.slice(1);var scrollSize="scroll"+capitalizedDimension;var transitionDuration=Util.getTransitionDurationFromElement(this._element);$__default['default'](this._element).one(Util.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration);this._element.style[dimension]=this._element[scrollSize]+"px"};_proto.hide=function hide(){var _this2=this;if(this._isTransitioning||!$__default['default'](this._element).hasClass(CLASS_NAME_SHOW$1)){return}
var startEvent=$__default['default'].Event(EVENT_HIDE);$__default['default'](this._element).trigger(startEvent);if(startEvent.isDefaultPrevented()){return}
var dimension=this._getDimension();this._element.style[dimension]=this._element.getBoundingClientRect()[dimension]+"px";Util.reflow(this._element);$__default['default'](this._element).addClass(CLASS_NAME_COLLAPSING).removeClass(CLASS_NAME_COLLAPSE+" "+CLASS_NAME_SHOW$1);var triggerArrayLength=this._triggerArray.length;if(triggerArrayLength>0){for(var i=0;i<triggerArrayLength;i++){var trigger=this._triggerArray[i];var selector=Util.getSelectorFromElement(trigger);if(selector!==null){var $elem=$__default['default']([].slice.call(document.querySelectorAll(selector)));if(!$elem.hasClass(CLASS_NAME_SHOW$1)){$__default['default'](trigger).addClass(CLASS_NAME_COLLAPSED).attr('aria-expanded',!1)}}}}
this.setTransitioning(!0);var complete=function complete(){_this2.setTransitioning(!1);$__default['default'](_this2._element).removeClass(CLASS_NAME_COLLAPSING).addClass(CLASS_NAME_COLLAPSE).trigger(EVENT_HIDDEN)};this._element.style[dimension]='';var transitionDuration=Util.getTransitionDurationFromElement(this._element);$__default['default'](this._element).one(Util.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration)};_proto.setTransitioning=function setTransitioning(isTransitioning){this._isTransitioning=isTransitioning};_proto.dispose=function dispose(){$__default['default'].removeData(this._element,DATA_KEY$3);this._config=null;this._parent=null;this._element=null;this._triggerArray=null;this._isTransitioning=null};_proto._getConfig=function _getConfig(config){config=_extends({},Default$1,config);config.toggle=Boolean(config.toggle);Util.typeCheckConfig(NAME$3,config,DefaultType$1);return config};_proto._getDimension=function _getDimension(){var hasWidth=$__default['default'](this._element).hasClass(DIMENSION_WIDTH);return hasWidth?DIMENSION_WIDTH:DIMENSION_HEIGHT};_proto._getParent=function _getParent(){var _this3=this;var parent;if(Util.isElement(this._config.parent)){parent=this._config.parent;if(typeof this._config.parent.jquery!=='undefined'){parent=this._config.parent[0]}}else{parent=document.querySelector(this._config.parent)}
var selector="[data-toggle=\"collapse\"][data-parent=\""+this._config.parent+"\"]";var children=[].slice.call(parent.querySelectorAll(selector));$__default['default'](children).each(function(i,element){_this3._addAriaAndCollapsedClass(Collapse._getTargetFromElement(element),[element])});return parent};_proto._addAriaAndCollapsedClass=function _addAriaAndCollapsedClass(element,triggerArray){var isOpen=$__default['default'](element).hasClass(CLASS_NAME_SHOW$1);if(triggerArray.length){$__default['default'](triggerArray).toggleClass(CLASS_NAME_COLLAPSED,!isOpen).attr('aria-expanded',isOpen)}};Collapse._getTargetFromElement=function _getTargetFromElement(element){var selector=Util.getSelectorFromElement(element);return selector?document.querySelector(selector):null};Collapse._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var $element=$__default['default'](this);var data=$element.data(DATA_KEY$3);var _config=_extends({},Default$1,$element.data(),typeof config==='object'&&config?config:{});if(!data&&_config.toggle&&typeof config==='string'&&/show|hide/.test(config)){_config.toggle=!1}
if(!data){data=new Collapse(this,_config);$element.data(DATA_KEY$3,data)}
if(typeof config==='string'){if(typeof data[config]==='undefined'){throw new TypeError("No method named \""+config+"\"")}
data[config]()}})};_createClass(Collapse,null,[{key:"VERSION",get:function get(){return VERSION$3}},{key:"Default",get:function get(){return Default$1}}]);return Collapse}();$__default['default'](document).on(EVENT_CLICK_DATA_API$3,SELECTOR_DATA_TOGGLE$1,function(event){if(event.currentTarget.tagName==='A'){event.preventDefault()}
var $trigger=$__default['default'](this);var selector=Util.getSelectorFromElement(this);var selectors=[].slice.call(document.querySelectorAll(selector));$__default['default'](selectors).each(function(){var $target=$__default['default'](this);var data=$target.data(DATA_KEY$3);var config=data?'toggle':$trigger.data();Collapse._jQueryInterface.call($target,config)})});$__default['default'].fn[NAME$3]=Collapse._jQueryInterface;$__default['default'].fn[NAME$3].Constructor=Collapse;$__default['default'].fn[NAME$3].noConflict=function(){$__default['default'].fn[NAME$3]=JQUERY_NO_CONFLICT$3;return Collapse._jQueryInterface};var NAME$4='dropdown';var VERSION$4='4.6.0';var DATA_KEY$4='bs.dropdown';var EVENT_KEY$4="."+DATA_KEY$4;var DATA_API_KEY$4='.data-api';var JQUERY_NO_CONFLICT$4=$__default['default'].fn[NAME$4];var ESCAPE_KEYCODE=27;var SPACE_KEYCODE=32;var TAB_KEYCODE=9;var ARROW_UP_KEYCODE=38;var ARROW_DOWN_KEYCODE=40;var RIGHT_MOUSE_BUTTON_WHICH=3;var REGEXP_KEYDOWN=new RegExp(ARROW_UP_KEYCODE+"|"+ARROW_DOWN_KEYCODE+"|"+ESCAPE_KEYCODE);var EVENT_HIDE$1="hide"+EVENT_KEY$4;var EVENT_HIDDEN$1="hidden"+EVENT_KEY$4;var EVENT_SHOW$1="show"+EVENT_KEY$4;var EVENT_SHOWN$1="shown"+EVENT_KEY$4;var EVENT_CLICK="click"+EVENT_KEY$4;var EVENT_CLICK_DATA_API$4="click"+EVENT_KEY$4+DATA_API_KEY$4;var EVENT_KEYDOWN_DATA_API="keydown"+EVENT_KEY$4+DATA_API_KEY$4;var EVENT_KEYUP_DATA_API="keyup"+EVENT_KEY$4+DATA_API_KEY$4;var CLASS_NAME_DISABLED='disabled';var CLASS_NAME_SHOW$2='show';var CLASS_NAME_DROPUP='dropup';var CLASS_NAME_DROPRIGHT='dropright';var CLASS_NAME_DROPLEFT='dropleft';var CLASS_NAME_MENURIGHT='dropdown-menu-right';var CLASS_NAME_POSITION_STATIC='position-static';var SELECTOR_DATA_TOGGLE$2='[data-toggle="dropdown"]';var SELECTOR_FORM_CHILD='.dropdown form';var SELECTOR_MENU='.dropdown-menu';var SELECTOR_NAVBAR_NAV='.navbar-nav';var SELECTOR_VISIBLE_ITEMS='.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)';var PLACEMENT_TOP='top-start';var PLACEMENT_TOPEND='top-end';var PLACEMENT_BOTTOM='bottom-start';var PLACEMENT_BOTTOMEND='bottom-end';var PLACEMENT_RIGHT='right-start';var PLACEMENT_LEFT='left-start';var Default$2={offset:0,flip:!0,boundary:'scrollParent',reference:'toggle',display:'dynamic',popperConfig:null};var DefaultType$2={offset:'(number|string|function)',flip:'boolean',boundary:'(string|element)',reference:'(string|element)',display:'string',popperConfig:'(null|object)'};var Dropdown=function(){function Dropdown(element,config){this._element=element;this._popper=null;this._config=this._getConfig(config);this._menu=this._getMenuElement();this._inNavbar=this._detectNavbar();this._addEventListeners()}
var _proto=Dropdown.prototype;_proto.toggle=function toggle(){if(this._element.disabled||$__default['default'](this._element).hasClass(CLASS_NAME_DISABLED)){return}
var isActive=$__default['default'](this._menu).hasClass(CLASS_NAME_SHOW$2);Dropdown._clearMenus();if(isActive){return}
this.show(!0)};_proto.show=function show(usePopper){if(usePopper===void 0){usePopper=!1}
if(this._element.disabled||$__default['default'](this._element).hasClass(CLASS_NAME_DISABLED)||$__default['default'](this._menu).hasClass(CLASS_NAME_SHOW$2)){return}
var relatedTarget={relatedTarget:this._element};var showEvent=$__default['default'].Event(EVENT_SHOW$1,relatedTarget);var parent=Dropdown._getParentFromElement(this._element);$__default['default'](parent).trigger(showEvent);if(showEvent.isDefaultPrevented()){return}
if(!this._inNavbar&&usePopper){if(typeof Popper__default['default']==='undefined'){throw new TypeError('Bootstrap\'s dropdowns require Popper (https://popper.js.org)')}
var referenceElement=this._element;if(this._config.reference==='parent'){referenceElement=parent}else if(Util.isElement(this._config.reference)){referenceElement=this._config.reference;if(typeof this._config.reference.jquery!=='undefined'){referenceElement=this._config.reference[0]}}
if(this._config.boundary!=='scrollParent'){$__default['default'](parent).addClass(CLASS_NAME_POSITION_STATIC)}
this._popper=new Popper__default['default'](referenceElement,this._menu,this._getPopperConfig())}
if('ontouchstart' in document.documentElement&&$__default['default'](parent).closest(SELECTOR_NAVBAR_NAV).length===0){$__default['default'](document.body).children().on('mouseover',null,$__default['default'].noop)}
this._element.focus();this._element.setAttribute('aria-expanded',!0);$__default['default'](this._menu).toggleClass(CLASS_NAME_SHOW$2);$__default['default'](parent).toggleClass(CLASS_NAME_SHOW$2).trigger($__default['default'].Event(EVENT_SHOWN$1,relatedTarget))};_proto.hide=function hide(){if(this._element.disabled||$__default['default'](this._element).hasClass(CLASS_NAME_DISABLED)||!$__default['default'](this._menu).hasClass(CLASS_NAME_SHOW$2)){return}
var relatedTarget={relatedTarget:this._element};var hideEvent=$__default['default'].Event(EVENT_HIDE$1,relatedTarget);var parent=Dropdown._getParentFromElement(this._element);$__default['default'](parent).trigger(hideEvent);if(hideEvent.isDefaultPrevented()){return}
if(this._popper){this._popper.destroy()}
$__default['default'](this._menu).toggleClass(CLASS_NAME_SHOW$2);$__default['default'](parent).toggleClass(CLASS_NAME_SHOW$2).trigger($__default['default'].Event(EVENT_HIDDEN$1,relatedTarget))};_proto.dispose=function dispose(){$__default['default'].removeData(this._element,DATA_KEY$4);$__default['default'](this._element).off(EVENT_KEY$4);this._element=null;this._menu=null;if(this._popper!==null){this._popper.destroy();this._popper=null}};_proto.update=function update(){this._inNavbar=this._detectNavbar();if(this._popper!==null){this._popper.scheduleUpdate()}};_proto._addEventListeners=function _addEventListeners(){var _this=this;$__default['default'](this._element).on(EVENT_CLICK,function(event){event.preventDefault();event.stopPropagation();_this.toggle()})};_proto._getConfig=function _getConfig(config){config=_extends({},this.constructor.Default,$__default['default'](this._element).data(),config);Util.typeCheckConfig(NAME$4,config,this.constructor.DefaultType);return config};_proto._getMenuElement=function _getMenuElement(){if(!this._menu){var parent=Dropdown._getParentFromElement(this._element);if(parent){this._menu=parent.querySelector(SELECTOR_MENU)}}
return this._menu};_proto._getPlacement=function _getPlacement(){var $parentDropdown=$__default['default'](this._element.parentNode);var placement=PLACEMENT_BOTTOM;if($parentDropdown.hasClass(CLASS_NAME_DROPUP)){placement=$__default['default'](this._menu).hasClass(CLASS_NAME_MENURIGHT)?PLACEMENT_TOPEND:PLACEMENT_TOP}else if($parentDropdown.hasClass(CLASS_NAME_DROPRIGHT)){placement=PLACEMENT_RIGHT}else if($parentDropdown.hasClass(CLASS_NAME_DROPLEFT)){placement=PLACEMENT_LEFT}else if($__default['default'](this._menu).hasClass(CLASS_NAME_MENURIGHT)){placement=PLACEMENT_BOTTOMEND}
return placement};_proto._detectNavbar=function _detectNavbar(){return $__default['default'](this._element).closest('.navbar').length>0};_proto._getOffset=function _getOffset(){var _this2=this;var offset={};if(typeof this._config.offset==='function'){offset.fn=function(data){data.offsets=_extends({},data.offsets,_this2._config.offset(data.offsets,_this2._element)||{});return data}}else{offset.offset=this._config.offset}
return offset};_proto._getPopperConfig=function _getPopperConfig(){var popperConfig={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};if(this._config.display==='static'){popperConfig.modifiers.applyStyle={enabled:!1}}
return _extends({},popperConfig,this._config.popperConfig)};Dropdown._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var data=$__default['default'](this).data(DATA_KEY$4);var _config=typeof config==='object'?config:null;if(!data){data=new Dropdown(this,_config);$__default['default'](this).data(DATA_KEY$4,data)}
if(typeof config==='string'){if(typeof data[config]==='undefined'){throw new TypeError("No method named \""+config+"\"")}
data[config]()}})};Dropdown._clearMenus=function _clearMenus(event){if(event&&(event.which===RIGHT_MOUSE_BUTTON_WHICH||event.type==='keyup'&&event.which!==TAB_KEYCODE)){return}
var toggles=[].slice.call(document.querySelectorAll(SELECTOR_DATA_TOGGLE$2));for(var i=0,len=toggles.length;i<len;i++){var parent=Dropdown._getParentFromElement(toggles[i]);var context=$__default['default'](toggles[i]).data(DATA_KEY$4);var relatedTarget={relatedTarget:toggles[i]};if(event&&event.type==='click'){relatedTarget.clickEvent=event}
if(!context){continue}
var dropdownMenu=context._menu;if(!$__default['default'](parent).hasClass(CLASS_NAME_SHOW$2)){continue}
if(event&&(event.type==='click'&&/input|textarea/i.test(event.target.tagName)||event.type==='keyup'&&event.which===TAB_KEYCODE)&&$__default['default'].contains(parent,event.target)){continue}
var hideEvent=$__default['default'].Event(EVENT_HIDE$1,relatedTarget);$__default['default'](parent).trigger(hideEvent);if(hideEvent.isDefaultPrevented()){continue}
if('ontouchstart' in document.documentElement){$__default['default'](document.body).children().off('mouseover',null,$__default['default'].noop)}
toggles[i].setAttribute('aria-expanded','false');if(context._popper){context._popper.destroy()}
$__default['default'](dropdownMenu).removeClass(CLASS_NAME_SHOW$2);$__default['default'](parent).removeClass(CLASS_NAME_SHOW$2).trigger($__default['default'].Event(EVENT_HIDDEN$1,relatedTarget))}};Dropdown._getParentFromElement=function _getParentFromElement(element){var parent;var selector=Util.getSelectorFromElement(element);if(selector){parent=document.querySelector(selector)}
return parent||element.parentNode};Dropdown._dataApiKeydownHandler=function _dataApiKeydownHandler(event){if(/input|textarea/i.test(event.target.tagName)?event.which===SPACE_KEYCODE||event.which!==ESCAPE_KEYCODE&&(event.which!==ARROW_DOWN_KEYCODE&&event.which!==ARROW_UP_KEYCODE||$__default['default'](event.target).closest(SELECTOR_MENU).length):!REGEXP_KEYDOWN.test(event.which)){return}
if(this.disabled||$__default['default'](this).hasClass(CLASS_NAME_DISABLED)){return}
var parent=Dropdown._getParentFromElement(this);var isActive=$__default['default'](parent).hasClass(CLASS_NAME_SHOW$2);if(!isActive&&event.which===ESCAPE_KEYCODE){return}
event.preventDefault();event.stopPropagation();if(!isActive||event.which===ESCAPE_KEYCODE||event.which===SPACE_KEYCODE){if(event.which===ESCAPE_KEYCODE){$__default['default'](parent.querySelector(SELECTOR_DATA_TOGGLE$2)).trigger('focus')}
$__default['default'](this).trigger('click');return}
var items=[].slice.call(parent.querySelectorAll(SELECTOR_VISIBLE_ITEMS)).filter(function(item){return $__default['default'](item).is(':visible')});if(items.length===0){return}
var index=items.indexOf(event.target);if(event.which===ARROW_UP_KEYCODE&&index>0){index--}
if(event.which===ARROW_DOWN_KEYCODE&&index<items.length-1){index++}
if(index<0){index=0}
items[index].focus()};_createClass(Dropdown,null,[{key:"VERSION",get:function get(){return VERSION$4}},{key:"Default",get:function get(){return Default$2}},{key:"DefaultType",get:function get(){return DefaultType$2}}]);return Dropdown}();$__default['default'](document).on(EVENT_KEYDOWN_DATA_API,SELECTOR_DATA_TOGGLE$2,Dropdown._dataApiKeydownHandler).on(EVENT_KEYDOWN_DATA_API,SELECTOR_MENU,Dropdown._dataApiKeydownHandler).on(EVENT_CLICK_DATA_API$4+" "+EVENT_KEYUP_DATA_API,Dropdown._clearMenus).on(EVENT_CLICK_DATA_API$4,SELECTOR_DATA_TOGGLE$2,function(event){event.preventDefault();event.stopPropagation();Dropdown._jQueryInterface.call($__default['default'](this),'toggle')}).on(EVENT_CLICK_DATA_API$4,SELECTOR_FORM_CHILD,function(e){e.stopPropagation()});$__default['default'].fn[NAME$4]=Dropdown._jQueryInterface;$__default['default'].fn[NAME$4].Constructor=Dropdown;$__default['default'].fn[NAME$4].noConflict=function(){$__default['default'].fn[NAME$4]=JQUERY_NO_CONFLICT$4;return Dropdown._jQueryInterface};var NAME$5='modal';var VERSION$5='4.6.0';var DATA_KEY$5='bs.modal';var EVENT_KEY$5="."+DATA_KEY$5;var DATA_API_KEY$5='.data-api';var JQUERY_NO_CONFLICT$5=$__default['default'].fn[NAME$5];var ESCAPE_KEYCODE$1=27;var Default$3={backdrop:!0,keyboard:!0,focus:!0,show:!0};var DefaultType$3={backdrop:'(boolean|string)',keyboard:'boolean',focus:'boolean',show:'boolean'};var EVENT_HIDE$2="hide"+EVENT_KEY$5;var EVENT_HIDE_PREVENTED="hidePrevented"+EVENT_KEY$5;var EVENT_HIDDEN$2="hidden"+EVENT_KEY$5;var EVENT_SHOW$2="show"+EVENT_KEY$5;var EVENT_SHOWN$2="shown"+EVENT_KEY$5;var EVENT_FOCUSIN="focusin"+EVENT_KEY$5;var EVENT_RESIZE="resize"+EVENT_KEY$5;var EVENT_CLICK_DISMISS="click.dismiss"+EVENT_KEY$5;var EVENT_KEYDOWN_DISMISS="keydown.dismiss"+EVENT_KEY$5;var EVENT_MOUSEUP_DISMISS="mouseup.dismiss"+EVENT_KEY$5;var EVENT_MOUSEDOWN_DISMISS="mousedown.dismiss"+EVENT_KEY$5;var EVENT_CLICK_DATA_API$5="click"+EVENT_KEY$5+DATA_API_KEY$5;var CLASS_NAME_SCROLLABLE='modal-dialog-scrollable';var CLASS_NAME_SCROLLBAR_MEASURER='modal-scrollbar-measure';var CLASS_NAME_BACKDROP='modal-backdrop';var CLASS_NAME_OPEN='modal-open';var CLASS_NAME_FADE$1='fade';var CLASS_NAME_SHOW$3='show';var CLASS_NAME_STATIC='modal-static';var SELECTOR_DIALOG='.modal-dialog';var SELECTOR_MODAL_BODY='.modal-body';var SELECTOR_DATA_TOGGLE$3='[data-toggle="modal"]';var SELECTOR_DATA_DISMISS='[data-dismiss="modal"]';var SELECTOR_FIXED_CONTENT='.fixed-top, .fixed-bottom, .is-fixed, .sticky-top';var SELECTOR_STICKY_CONTENT='.sticky-top';var Modal=function(){function Modal(element,config){this._config=this._getConfig(config);this._element=element;this._dialog=element.querySelector(SELECTOR_DIALOG);this._backdrop=null;this._isShown=!1;this._isBodyOverflowing=!1;this._ignoreBackdropClick=!1;this._isTransitioning=!1;this._scrollbarWidth=0}
var _proto=Modal.prototype;_proto.toggle=function toggle(relatedTarget){return this._isShown?this.hide():this.show(relatedTarget)};_proto.show=function show(relatedTarget){var _this=this;if(this._isShown||this._isTransitioning){return}
if($__default['default'](this._element).hasClass(CLASS_NAME_FADE$1)){this._isTransitioning=!0}
var showEvent=$__default['default'].Event(EVENT_SHOW$2,{relatedTarget:relatedTarget});$__default['default'](this._element).trigger(showEvent);if(this._isShown||showEvent.isDefaultPrevented()){return}
this._isShown=!0;this._checkScrollbar();this._setScrollbar();this._adjustDialog();this._setEscapeEvent();this._setResizeEvent();$__default['default'](this._element).on(EVENT_CLICK_DISMISS,SELECTOR_DATA_DISMISS,function(event){return _this.hide(event)});$__default['default'](this._dialog).on(EVENT_MOUSEDOWN_DISMISS,function(){$__default['default'](_this._element).one(EVENT_MOUSEUP_DISMISS,function(event){if($__default['default'](event.target).is(_this._element)){_this._ignoreBackdropClick=!0}})});this._showBackdrop(function(){return _this._showElement(relatedTarget)})};_proto.hide=function hide(event){var _this2=this;if(event){event.preventDefault()}
if(!this._isShown||this._isTransitioning){return}
var hideEvent=$__default['default'].Event(EVENT_HIDE$2);$__default['default'](this._element).trigger(hideEvent);if(!this._isShown||hideEvent.isDefaultPrevented()){return}
this._isShown=!1;var transition=$__default['default'](this._element).hasClass(CLASS_NAME_FADE$1);if(transition){this._isTransitioning=!0}
this._setEscapeEvent();this._setResizeEvent();$__default['default'](document).off(EVENT_FOCUSIN);$__default['default'](this._element).removeClass(CLASS_NAME_SHOW$3);$__default['default'](this._element).off(EVENT_CLICK_DISMISS);$__default['default'](this._dialog).off(EVENT_MOUSEDOWN_DISMISS);if(transition){var transitionDuration=Util.getTransitionDurationFromElement(this._element);$__default['default'](this._element).one(Util.TRANSITION_END,function(event){return _this2._hideModal(event)}).emulateTransitionEnd(transitionDuration)}else{this._hideModal()}};_proto.dispose=function dispose(){[window,this._element,this._dialog].forEach(function(htmlElement){return $__default['default'](htmlElement).off(EVENT_KEY$5)});$__default['default'](document).off(EVENT_FOCUSIN);$__default['default'].removeData(this._element,DATA_KEY$5);this._config=null;this._element=null;this._dialog=null;this._backdrop=null;this._isShown=null;this._isBodyOverflowing=null;this._ignoreBackdropClick=null;this._isTransitioning=null;this._scrollbarWidth=null};_proto.handleUpdate=function handleUpdate(){this._adjustDialog()};_proto._getConfig=function _getConfig(config){config=_extends({},Default$3,config);Util.typeCheckConfig(NAME$5,config,DefaultType$3);return config};_proto._triggerBackdropTransition=function _triggerBackdropTransition(){var _this3=this;var hideEventPrevented=$__default['default'].Event(EVENT_HIDE_PREVENTED);$__default['default'](this._element).trigger(hideEventPrevented);if(hideEventPrevented.isDefaultPrevented()){return}
var isModalOverflowing=this._element.scrollHeight>document.documentElement.clientHeight;if(!isModalOverflowing){this._element.style.overflowY='hidden'}
this._element.classList.add(CLASS_NAME_STATIC);var modalTransitionDuration=Util.getTransitionDurationFromElement(this._dialog);$__default['default'](this._element).off(Util.TRANSITION_END);$__default['default'](this._element).one(Util.TRANSITION_END,function(){_this3._element.classList.remove(CLASS_NAME_STATIC);if(!isModalOverflowing){$__default['default'](_this3._element).one(Util.TRANSITION_END,function(){_this3._element.style.overflowY=''}).emulateTransitionEnd(_this3._element,modalTransitionDuration)}}).emulateTransitionEnd(modalTransitionDuration);this._element.focus()};_proto._showElement=function _showElement(relatedTarget){var _this4=this;var transition=$__default['default'](this._element).hasClass(CLASS_NAME_FADE$1);var modalBody=this._dialog?this._dialog.querySelector(SELECTOR_MODAL_BODY):null;if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE){document.body.appendChild(this._element)}
this._element.style.display='block';this._element.removeAttribute('aria-hidden');this._element.setAttribute('aria-modal',!0);this._element.setAttribute('role','dialog');if($__default['default'](this._dialog).hasClass(CLASS_NAME_SCROLLABLE)&&modalBody){modalBody.scrollTop=0}else{this._element.scrollTop=0}
if(transition){Util.reflow(this._element)}
$__default['default'](this._element).addClass(CLASS_NAME_SHOW$3);if(this._config.focus){this._enforceFocus()}
var shownEvent=$__default['default'].Event(EVENT_SHOWN$2,{relatedTarget:relatedTarget});var transitionComplete=function transitionComplete(){if(_this4._config.focus){_this4._element.focus()}
_this4._isTransitioning=!1;$__default['default'](_this4._element).trigger(shownEvent)};if(transition){var transitionDuration=Util.getTransitionDurationFromElement(this._dialog);$__default['default'](this._dialog).one(Util.TRANSITION_END,transitionComplete).emulateTransitionEnd(transitionDuration)}else{transitionComplete()}};_proto._enforceFocus=function _enforceFocus(){var _this5=this;$__default['default'](document).off(EVENT_FOCUSIN).on(EVENT_FOCUSIN,function(event){if(document!==event.target&&_this5._element!==event.target&&$__default['default'](_this5._element).has(event.target).length===0){_this5._element.focus()}})};_proto._setEscapeEvent=function _setEscapeEvent(){var _this6=this;if(this._isShown){$__default['default'](this._element).on(EVENT_KEYDOWN_DISMISS,function(event){if(_this6._config.keyboard&&event.which===ESCAPE_KEYCODE$1){event.preventDefault();_this6.hide()}else if(!_this6._config.keyboard&&event.which===ESCAPE_KEYCODE$1){_this6._triggerBackdropTransition()}})}else if(!this._isShown){$__default['default'](this._element).off(EVENT_KEYDOWN_DISMISS)}};_proto._setResizeEvent=function _setResizeEvent(){var _this7=this;if(this._isShown){$__default['default'](window).on(EVENT_RESIZE,function(event){return _this7.handleUpdate(event)})}else{$__default['default'](window).off(EVENT_RESIZE)}};_proto._hideModal=function _hideModal(){var _this8=this;this._element.style.display='none';this._element.setAttribute('aria-hidden',!0);this._element.removeAttribute('aria-modal');this._element.removeAttribute('role');this._isTransitioning=!1;this._showBackdrop(function(){$__default['default'](document.body).removeClass(CLASS_NAME_OPEN);_this8._resetAdjustments();_this8._resetScrollbar();$__default['default'](_this8._element).trigger(EVENT_HIDDEN$2)})};_proto._removeBackdrop=function _removeBackdrop(){if(this._backdrop){$__default['default'](this._backdrop).remove();this._backdrop=null}};_proto._showBackdrop=function _showBackdrop(callback){var _this9=this;var animate=$__default['default'](this._element).hasClass(CLASS_NAME_FADE$1)?CLASS_NAME_FADE$1:'';if(this._isShown&&this._config.backdrop){this._backdrop=document.createElement('div');this._backdrop.className=CLASS_NAME_BACKDROP;if(animate){this._backdrop.classList.add(animate)}
$__default['default'](this._backdrop).appendTo(document.body);$__default['default'](this._element).on(EVENT_CLICK_DISMISS,function(event){if(_this9._ignoreBackdropClick){_this9._ignoreBackdropClick=!1;return}
if(event.target!==event.currentTarget){return}
if(_this9._config.backdrop==='static'){_this9._triggerBackdropTransition()}else{_this9.hide()}});if(animate){Util.reflow(this._backdrop)}
$__default['default'](this._backdrop).addClass(CLASS_NAME_SHOW$3);if(!callback){return}
if(!animate){callback();return}
var backdropTransitionDuration=Util.getTransitionDurationFromElement(this._backdrop);$__default['default'](this._backdrop).one(Util.TRANSITION_END,callback).emulateTransitionEnd(backdropTransitionDuration)}else if(!this._isShown&&this._backdrop){$__default['default'](this._backdrop).removeClass(CLASS_NAME_SHOW$3);var callbackRemove=function callbackRemove(){_this9._removeBackdrop();if(callback){callback()}};if($__default['default'](this._element).hasClass(CLASS_NAME_FADE$1)){var _backdropTransitionDuration=Util.getTransitionDurationFromElement(this._backdrop);$__default['default'](this._backdrop).one(Util.TRANSITION_END,callbackRemove).emulateTransitionEnd(_backdropTransitionDuration)}else{callbackRemove()}}else if(callback){callback()}};_proto._adjustDialog=function _adjustDialog(){var isModalOverflowing=this._element.scrollHeight>document.documentElement.clientHeight;if(!this._isBodyOverflowing&&isModalOverflowing){this._element.style.paddingLeft=this._scrollbarWidth+"px"}
if(this._isBodyOverflowing&&!isModalOverflowing){this._element.style.paddingRight=this._scrollbarWidth+"px"}};_proto._resetAdjustments=function _resetAdjustments(){this._element.style.paddingLeft='';this._element.style.paddingRight=''};_proto._checkScrollbar=function _checkScrollbar(){var rect=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(rect.left+rect.right)<window.innerWidth;this._scrollbarWidth=this._getScrollbarWidth()};_proto._setScrollbar=function _setScrollbar(){var _this10=this;if(this._isBodyOverflowing){var fixedContent=[].slice.call(document.querySelectorAll(SELECTOR_FIXED_CONTENT));var stickyContent=[].slice.call(document.querySelectorAll(SELECTOR_STICKY_CONTENT));$__default['default'](fixedContent).each(function(index,element){var actualPadding=element.style.paddingRight;var calculatedPadding=$__default['default'](element).css('padding-right');$__default['default'](element).data('padding-right',actualPadding).css('padding-right',parseFloat(calculatedPadding)+_this10._scrollbarWidth+"px")});$__default['default'](stickyContent).each(function(index,element){var actualMargin=element.style.marginRight;var calculatedMargin=$__default['default'](element).css('margin-right');$__default['default'](element).data('margin-right',actualMargin).css('margin-right',parseFloat(calculatedMargin)-_this10._scrollbarWidth+"px")});var actualPadding=document.body.style.paddingRight;var calculatedPadding=$__default['default'](document.body).css('padding-right');$__default['default'](document.body).data('padding-right',actualPadding).css('padding-right',parseFloat(calculatedPadding)+this._scrollbarWidth+"px")}
$__default['default'](document.body).addClass(CLASS_NAME_OPEN)};_proto._resetScrollbar=function _resetScrollbar(){var fixedContent=[].slice.call(document.querySelectorAll(SELECTOR_FIXED_CONTENT));$__default['default'](fixedContent).each(function(index,element){var padding=$__default['default'](element).data('padding-right');$__default['default'](element).removeData('padding-right');element.style.paddingRight=padding?padding:''});var elements=[].slice.call(document.querySelectorAll(""+SELECTOR_STICKY_CONTENT));$__default['default'](elements).each(function(index,element){var margin=$__default['default'](element).data('margin-right');if(typeof margin!=='undefined'){$__default['default'](element).css('margin-right',margin).removeData('margin-right')}});var padding=$__default['default'](document.body).data('padding-right');$__default['default'](document.body).removeData('padding-right');document.body.style.paddingRight=padding?padding:''};_proto._getScrollbarWidth=function _getScrollbarWidth(){var scrollDiv=document.createElement('div');scrollDiv.className=CLASS_NAME_SCROLLBAR_MEASURER;document.body.appendChild(scrollDiv);var scrollbarWidth=scrollDiv.getBoundingClientRect().width-scrollDiv.clientWidth;document.body.removeChild(scrollDiv);return scrollbarWidth};Modal._jQueryInterface=function _jQueryInterface(config,relatedTarget){return this.each(function(){var data=$__default['default'](this).data(DATA_KEY$5);var _config=_extends({},Default$3,$__default['default'](this).data(),typeof config==='object'&&config?config:{});if(!data){data=new Modal(this,_config);$__default['default'](this).data(DATA_KEY$5,data)}
if(typeof config==='string'){if(typeof data[config]==='undefined'){throw new TypeError("No method named \""+config+"\"")}
data[config](relatedTarget)}else if(_config.show){data.show(relatedTarget)}})};_createClass(Modal,null,[{key:"VERSION",get:function get(){return VERSION$5}},{key:"Default",get:function get(){return Default$3}}]);return Modal}();$__default['default'](document).on(EVENT_CLICK_DATA_API$5,SELECTOR_DATA_TOGGLE$3,function(event){var _this11=this;var target;var selector=Util.getSelectorFromElement(this);if(selector){target=document.querySelector(selector)}
var config=$__default['default'](target).data(DATA_KEY$5)?'toggle':_extends({},$__default['default'](target).data(),$__default['default'](this).data());if(this.tagName==='A'||this.tagName==='AREA'){event.preventDefault()}
var $target=$__default['default'](target).one(EVENT_SHOW$2,function(showEvent){if(showEvent.isDefaultPrevented()){return}
$target.one(EVENT_HIDDEN$2,function(){if($__default['default'](_this11).is(':visible')){_this11.focus()}})});Modal._jQueryInterface.call($__default['default'](target),config,this)});$__default['default'].fn[NAME$5]=Modal._jQueryInterface;$__default['default'].fn[NAME$5].Constructor=Modal;$__default['default'].fn[NAME$5].noConflict=function(){$__default['default'].fn[NAME$5]=JQUERY_NO_CONFLICT$5;return Modal._jQueryInterface};var uriAttrs=['background','cite','href','itemtype','longdesc','poster','src','xlink:href'];var ARIA_ATTRIBUTE_PATTERN=/^aria-[\w-]*$/i;var DefaultWhitelist={'*':['class','dir','id','lang','role',ARIA_ATTRIBUTE_PATTERN],a:['target','href','title','rel'],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:['src','srcset','alt','title','width','height'],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};var SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/gi;var DATA_URL_PATTERN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function allowedAttribute(attr,allowedAttributeList){var attrName=attr.nodeName.toLowerCase();if(allowedAttributeList.indexOf(attrName)!==-1){if(uriAttrs.indexOf(attrName)!==-1){return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN)||attr.nodeValue.match(DATA_URL_PATTERN))}
return!0}
var regExp=allowedAttributeList.filter(function(attrRegex){return attrRegex instanceof RegExp});for(var i=0,len=regExp.length;i<len;i++){if(attrName.match(regExp[i])){return!0}}
return!1}
function sanitizeHtml(unsafeHtml,whiteList,sanitizeFn){if(unsafeHtml.length===0){return unsafeHtml}
if(sanitizeFn&&typeof sanitizeFn==='function'){return sanitizeFn(unsafeHtml)}
var domParser=new window.DOMParser();var createdDocument=domParser.parseFromString(unsafeHtml,'text/html');var whitelistKeys=Object.keys(whiteList);var elements=[].slice.call(createdDocument.body.querySelectorAll('*'));var _loop=function _loop(i,len){var el=elements[i];var elName=el.nodeName.toLowerCase();if(whitelistKeys.indexOf(el.nodeName.toLowerCase())===-1){el.parentNode.removeChild(el);return"continue"}
var attributeList=[].slice.call(el.attributes);var whitelistedAttributes=[].concat(whiteList['*']||[],whiteList[elName]||[]);attributeList.forEach(function(attr){if(!allowedAttribute(attr,whitelistedAttributes)){el.removeAttribute(attr.nodeName)}})};for(var i=0,len=elements.length;i<len;i++){var _ret=_loop(i);if(_ret==="continue")continue}
return createdDocument.body.innerHTML}
var NAME$6='tooltip';var VERSION$6='4.6.0';var DATA_KEY$6='bs.tooltip';var EVENT_KEY$6="."+DATA_KEY$6;var JQUERY_NO_CONFLICT$6=$__default['default'].fn[NAME$6];var CLASS_PREFIX='bs-tooltip';var BSCLS_PREFIX_REGEX=new RegExp("(^|\\s)"+CLASS_PREFIX+"\\S+",'g');var DISALLOWED_ATTRIBUTES=['sanitize','whiteList','sanitizeFn'];var DefaultType$4={animation:'boolean',template:'string',title:'(string|element|function)',trigger:'string',delay:'(number|object)',html:'boolean',selector:'(string|boolean)',placement:'(string|function)',offset:'(number|string|function)',container:'(string|element|boolean)',fallbackPlacement:'(string|array)',boundary:'(string|element)',customClass:'(string|function)',sanitize:'boolean',sanitizeFn:'(null|function)',whiteList:'object',popperConfig:'(null|object)'};var AttachmentMap={AUTO:'auto',TOP:'top',RIGHT:'right',BOTTOM:'bottom',LEFT:'left'};var Default$4={animation:!0,template:'<div class="tooltip" role="tooltip">'+'<div class="arrow"></div>'+'<div class="tooltip-inner"></div></div>',trigger:'hover focus',title:'',delay:0,html:!1,selector:!1,placement:'top',offset:0,container:!1,fallbackPlacement:'flip',boundary:'scrollParent',customClass:'',sanitize:!0,sanitizeFn:null,whiteList:DefaultWhitelist,popperConfig:null};var HOVER_STATE_SHOW='show';var HOVER_STATE_OUT='out';var Event={HIDE:"hide"+EVENT_KEY$6,HIDDEN:"hidden"+EVENT_KEY$6,SHOW:"show"+EVENT_KEY$6,SHOWN:"shown"+EVENT_KEY$6,INSERTED:"inserted"+EVENT_KEY$6,CLICK:"click"+EVENT_KEY$6,FOCUSIN:"focusin"+EVENT_KEY$6,FOCUSOUT:"focusout"+EVENT_KEY$6,MOUSEENTER:"mouseenter"+EVENT_KEY$6,MOUSELEAVE:"mouseleave"+EVENT_KEY$6};var CLASS_NAME_FADE$2='fade';var CLASS_NAME_SHOW$4='show';var SELECTOR_TOOLTIP_INNER='.tooltip-inner';var SELECTOR_ARROW='.arrow';var TRIGGER_HOVER='hover';var TRIGGER_FOCUS='focus';var TRIGGER_CLICK='click';var TRIGGER_MANUAL='manual';var Tooltip=function(){function Tooltip(element,config){if(typeof Popper__default['default']==='undefined'){throw new TypeError('Bootstrap\'s tooltips require Popper (https://popper.js.org)')}
this._isEnabled=!0;this._timeout=0;this._hoverState='';this._activeTrigger={};this._popper=null;this.element=element;this.config=this._getConfig(config);this.tip=null;this._setListeners()}
var _proto=Tooltip.prototype;_proto.enable=function enable(){this._isEnabled=!0};_proto.disable=function disable(){this._isEnabled=!1};_proto.toggleEnabled=function toggleEnabled(){this._isEnabled=!this._isEnabled};_proto.toggle=function toggle(event){if(!this._isEnabled){return}
if(event){var dataKey=this.constructor.DATA_KEY;var context=$__default['default'](event.currentTarget).data(dataKey);if(!context){context=new this.constructor(event.currentTarget,this._getDelegateConfig());$__default['default'](event.currentTarget).data(dataKey,context)}
context._activeTrigger.click=!context._activeTrigger.click;if(context._isWithActiveTrigger()){context._enter(null,context)}else{context._leave(null,context)}}else{if($__default['default'](this.getTipElement()).hasClass(CLASS_NAME_SHOW$4)){this._leave(null,this);return}
this._enter(null,this)}};_proto.dispose=function dispose(){clearTimeout(this._timeout);$__default['default'].removeData(this.element,this.constructor.DATA_KEY);$__default['default'](this.element).off(this.constructor.EVENT_KEY);$__default['default'](this.element).closest('.modal').off('hide.bs.modal',this._hideModalHandler);if(this.tip){$__default['default'](this.tip).remove()}
this._isEnabled=null;this._timeout=null;this._hoverState=null;this._activeTrigger=null;if(this._popper){this._popper.destroy()}
this._popper=null;this.element=null;this.config=null;this.tip=null};_proto.show=function show(){var _this=this;if($__default['default'](this.element).css('display')==='none'){throw new Error('Please use show on visible elements')}
var showEvent=$__default['default'].Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){$__default['default'](this.element).trigger(showEvent);var shadowRoot=Util.findShadowRoot(this.element);var isInTheDom=$__default['default'].contains(shadowRoot!==null?shadowRoot:this.element.ownerDocument.documentElement,this.element);if(showEvent.isDefaultPrevented()||!isInTheDom){return}
var tip=this.getTipElement();var tipId=Util.getUID(this.constructor.NAME);tip.setAttribute('id',tipId);this.element.setAttribute('aria-describedby',tipId);this.setContent();if(this.config.animation){$__default['default'](tip).addClass(CLASS_NAME_FADE$2)}
var placement=typeof this.config.placement==='function'?this.config.placement.call(this,tip,this.element):this.config.placement;var attachment=this._getAttachment(placement);this.addAttachmentClass(attachment);var container=this._getContainer();$__default['default'](tip).data(this.constructor.DATA_KEY,this);if(!$__default['default'].contains(this.element.ownerDocument.documentElement,this.tip)){$__default['default'](tip).appendTo(container)}
$__default['default'](this.element).trigger(this.constructor.Event.INSERTED);this._popper=new Popper__default['default'](this.element,tip,this._getPopperConfig(attachment));$__default['default'](tip).addClass(CLASS_NAME_SHOW$4);$__default['default'](tip).addClass(this.config.customClass);if('ontouchstart' in document.documentElement){$__default['default'](document.body).children().on('mouseover',null,$__default['default'].noop)}
var complete=function complete(){if(_this.config.animation){_this._fixTransition()}
var prevHoverState=_this._hoverState;_this._hoverState=null;$__default['default'](_this.element).trigger(_this.constructor.Event.SHOWN);if(prevHoverState===HOVER_STATE_OUT){_this._leave(null,_this)}};if($__default['default'](this.tip).hasClass(CLASS_NAME_FADE$2)){var transitionDuration=Util.getTransitionDurationFromElement(this.tip);$__default['default'](this.tip).one(Util.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration)}else{complete()}}};_proto.hide=function hide(callback){var _this2=this;var tip=this.getTipElement();var hideEvent=$__default['default'].Event(this.constructor.Event.HIDE);var complete=function complete(){if(_this2._hoverState!==HOVER_STATE_SHOW&&tip.parentNode){tip.parentNode.removeChild(tip)}
_this2._cleanTipClass();_this2.element.removeAttribute('aria-describedby');$__default['default'](_this2.element).trigger(_this2.constructor.Event.HIDDEN);if(_this2._popper!==null){_this2._popper.destroy()}
if(callback){callback()}};$__default['default'](this.element).trigger(hideEvent);if(hideEvent.isDefaultPrevented()){return}
$__default['default'](tip).removeClass(CLASS_NAME_SHOW$4);if('ontouchstart' in document.documentElement){$__default['default'](document.body).children().off('mouseover',null,$__default['default'].noop)}
this._activeTrigger[TRIGGER_CLICK]=!1;this._activeTrigger[TRIGGER_FOCUS]=!1;this._activeTrigger[TRIGGER_HOVER]=!1;if($__default['default'](this.tip).hasClass(CLASS_NAME_FADE$2)){var transitionDuration=Util.getTransitionDurationFromElement(tip);$__default['default'](tip).one(Util.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration)}else{complete()}
this._hoverState=''};_proto.update=function update(){if(this._popper!==null){this._popper.scheduleUpdate()}};_proto.isWithContent=function isWithContent(){return Boolean(this.getTitle())};_proto.addAttachmentClass=function addAttachmentClass(attachment){$__default['default'](this.getTipElement()).addClass(CLASS_PREFIX+"-"+attachment)};_proto.getTipElement=function getTipElement(){this.tip=this.tip||$__default['default'](this.config.template)[0];return this.tip};_proto.setContent=function setContent(){var tip=this.getTipElement();this.setElementContent($__default['default'](tip.querySelectorAll(SELECTOR_TOOLTIP_INNER)),this.getTitle());$__default['default'](tip).removeClass(CLASS_NAME_FADE$2+" "+CLASS_NAME_SHOW$4)};_proto.setElementContent=function setElementContent($element,content){if(typeof content==='object'&&(content.nodeType||content.jquery)){if(this.config.html){if(!$__default['default'](content).parent().is($element)){$element.empty().append(content)}}else{$element.text($__default['default'](content).text())}
return}
if(this.config.html){if(this.config.sanitize){content=sanitizeHtml(content,this.config.whiteList,this.config.sanitizeFn)}
$element.html(content)}else{$element.text(content)}};_proto.getTitle=function getTitle(){var title=this.element.getAttribute('data-original-title');if(!title){title=typeof this.config.title==='function'?this.config.title.call(this.element):this.config.title}
return title};_proto._getPopperConfig=function _getPopperConfig(attachment){var _this3=this;var defaultBsConfig={placement:attachment,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:SELECTOR_ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function onCreate(data){if(data.originalPlacement!==data.placement){_this3._handlePopperPlacementChange(data)}},onUpdate:function onUpdate(data){return _this3._handlePopperPlacementChange(data)}};return _extends({},defaultBsConfig,this.config.popperConfig)};_proto._getOffset=function _getOffset(){var _this4=this;var offset={};if(typeof this.config.offset==='function'){offset.fn=function(data){data.offsets=_extends({},data.offsets,_this4.config.offset(data.offsets,_this4.element)||{});return data}}else{offset.offset=this.config.offset}
return offset};_proto._getContainer=function _getContainer(){if(this.config.container===!1){return document.body}
if(Util.isElement(this.config.container)){return $__default['default'](this.config.container)}
return $__default['default'](document).find(this.config.container)};_proto._getAttachment=function _getAttachment(placement){return AttachmentMap[placement.toUpperCase()]};_proto._setListeners=function _setListeners(){var _this5=this;var triggers=this.config.trigger.split(' ');triggers.forEach(function(trigger){if(trigger==='click'){$__default['default'](_this5.element).on(_this5.constructor.Event.CLICK,_this5.config.selector,function(event){return _this5.toggle(event)})}else if(trigger!==TRIGGER_MANUAL){var eventIn=trigger===TRIGGER_HOVER?_this5.constructor.Event.MOUSEENTER:_this5.constructor.Event.FOCUSIN;var eventOut=trigger===TRIGGER_HOVER?_this5.constructor.Event.MOUSELEAVE:_this5.constructor.Event.FOCUSOUT;$__default['default'](_this5.element).on(eventIn,_this5.config.selector,function(event){return _this5._enter(event)}).on(eventOut,_this5.config.selector,function(event){return _this5._leave(event)})}});this._hideModalHandler=function(){if(_this5.element){_this5.hide()}};$__default['default'](this.element).closest('.modal').on('hide.bs.modal',this._hideModalHandler);if(this.config.selector){this.config=_extends({},this.config,{trigger:'manual',selector:''})}else{this._fixTitle()}};_proto._fixTitle=function _fixTitle(){var titleType=typeof this.element.getAttribute('data-original-title');if(this.element.getAttribute('title')||titleType!=='string'){this.element.setAttribute('data-original-title',this.element.getAttribute('title')||'');this.element.setAttribute('title','')}};_proto._enter=function _enter(event,context){var dataKey=this.constructor.DATA_KEY;context=context||$__default['default'](event.currentTarget).data(dataKey);if(!context){context=new this.constructor(event.currentTarget,this._getDelegateConfig());$__default['default'](event.currentTarget).data(dataKey,context)}
if(event){context._activeTrigger[event.type==='focusin'?TRIGGER_FOCUS:TRIGGER_HOVER]=!0}
if($__default['default'](context.getTipElement()).hasClass(CLASS_NAME_SHOW$4)||context._hoverState===HOVER_STATE_SHOW){context._hoverState=HOVER_STATE_SHOW;return}
clearTimeout(context._timeout);context._hoverState=HOVER_STATE_SHOW;if(!context.config.delay||!context.config.delay.show){context.show();return}
context._timeout=setTimeout(function(){if(context._hoverState===HOVER_STATE_SHOW){context.show()}},context.config.delay.show)};_proto._leave=function _leave(event,context){var dataKey=this.constructor.DATA_KEY;context=context||$__default['default'](event.currentTarget).data(dataKey);if(!context){context=new this.constructor(event.currentTarget,this._getDelegateConfig());$__default['default'](event.currentTarget).data(dataKey,context)}
if(event){context._activeTrigger[event.type==='focusout'?TRIGGER_FOCUS:TRIGGER_HOVER]=!1}
if(context._isWithActiveTrigger()){return}
clearTimeout(context._timeout);context._hoverState=HOVER_STATE_OUT;if(!context.config.delay||!context.config.delay.hide){context.hide();return}
context._timeout=setTimeout(function(){if(context._hoverState===HOVER_STATE_OUT){context.hide()}},context.config.delay.hide)};_proto._isWithActiveTrigger=function _isWithActiveTrigger(){for(var trigger in this._activeTrigger){if(this._activeTrigger[trigger]){return!0}}
return!1};_proto._getConfig=function _getConfig(config){var dataAttributes=$__default['default'](this.element).data();Object.keys(dataAttributes).forEach(function(dataAttr){if(DISALLOWED_ATTRIBUTES.indexOf(dataAttr)!==-1){delete dataAttributes[dataAttr]}});config=_extends({},this.constructor.Default,dataAttributes,typeof config==='object'&&config?config:{});if(typeof config.delay==='number'){config.delay={show:config.delay,hide:config.delay}}
if(typeof config.title==='number'){config.title=config.title.toString()}
if(typeof config.content==='number'){config.content=config.content.toString()}
Util.typeCheckConfig(NAME$6,config,this.constructor.DefaultType);if(config.sanitize){config.template=sanitizeHtml(config.template,config.whiteList,config.sanitizeFn)}
return config};_proto._getDelegateConfig=function _getDelegateConfig(){var config={};if(this.config){for(var key in this.config){if(this.constructor.Default[key]!==this.config[key]){config[key]=this.config[key]}}}
return config};_proto._cleanTipClass=function _cleanTipClass(){var $tip=$__default['default'](this.getTipElement());var tabClass=$tip.attr('class').match(BSCLS_PREFIX_REGEX);if(tabClass!==null&&tabClass.length){$tip.removeClass(tabClass.join(''))}};_proto._handlePopperPlacementChange=function _handlePopperPlacementChange(popperData){this.tip=popperData.instance.popper;this._cleanTipClass();this.addAttachmentClass(this._getAttachment(popperData.placement))};_proto._fixTransition=function _fixTransition(){var tip=this.getTipElement();var initConfigAnimation=this.config.animation;if(tip.getAttribute('x-placement')!==null){return}
$__default['default'](tip).removeClass(CLASS_NAME_FADE$2);this.config.animation=!1;this.hide();this.show();this.config.animation=initConfigAnimation};Tooltip._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var $element=$__default['default'](this);var data=$element.data(DATA_KEY$6);var _config=typeof config==='object'&&config;if(!data&&/dispose|hide/.test(config)){return}
if(!data){data=new Tooltip(this,_config);$element.data(DATA_KEY$6,data)}
if(typeof config==='string'){if(typeof data[config]==='undefined'){throw new TypeError("No method named \""+config+"\"")}
data[config]()}})};_createClass(Tooltip,null,[{key:"VERSION",get:function get(){return VERSION$6}},{key:"Default",get:function get(){return Default$4}},{key:"NAME",get:function get(){return NAME$6}},{key:"DATA_KEY",get:function get(){return DATA_KEY$6}},{key:"Event",get:function get(){return Event}},{key:"EVENT_KEY",get:function get(){return EVENT_KEY$6}},{key:"DefaultType",get:function get(){return DefaultType$4}}]);return Tooltip}();$__default['default'].fn[NAME$6]=Tooltip._jQueryInterface;$__default['default'].fn[NAME$6].Constructor=Tooltip;$__default['default'].fn[NAME$6].noConflict=function(){$__default['default'].fn[NAME$6]=JQUERY_NO_CONFLICT$6;return Tooltip._jQueryInterface};var NAME$7='popover';var VERSION$7='4.6.0';var DATA_KEY$7='bs.popover';var EVENT_KEY$7="."+DATA_KEY$7;var JQUERY_NO_CONFLICT$7=$__default['default'].fn[NAME$7];var CLASS_PREFIX$1='bs-popover';var BSCLS_PREFIX_REGEX$1=new RegExp("(^|\\s)"+CLASS_PREFIX$1+"\\S+",'g');var Default$5=_extends({},Tooltip.Default,{placement:'right',trigger:'click',content:'',template:'<div class="popover" role="tooltip">'+'<div class="arrow"></div>'+'<h3 class="popover-header"></h3>'+'<div class="popover-body"></div></div>'});var DefaultType$5=_extends({},Tooltip.DefaultType,{content:'(string|element|function)'});var CLASS_NAME_FADE$3='fade';var CLASS_NAME_SHOW$5='show';var SELECTOR_TITLE='.popover-header';var SELECTOR_CONTENT='.popover-body';var Event$1={HIDE:"hide"+EVENT_KEY$7,HIDDEN:"hidden"+EVENT_KEY$7,SHOW:"show"+EVENT_KEY$7,SHOWN:"shown"+EVENT_KEY$7,INSERTED:"inserted"+EVENT_KEY$7,CLICK:"click"+EVENT_KEY$7,FOCUSIN:"focusin"+EVENT_KEY$7,FOCUSOUT:"focusout"+EVENT_KEY$7,MOUSEENTER:"mouseenter"+EVENT_KEY$7,MOUSELEAVE:"mouseleave"+EVENT_KEY$7};var Popover=function(_Tooltip){_inheritsLoose(Popover,_Tooltip);function Popover(){return _Tooltip.apply(this,arguments)||this}
var _proto=Popover.prototype;_proto.isWithContent=function isWithContent(){return this.getTitle()||this._getContent()};_proto.addAttachmentClass=function addAttachmentClass(attachment){$__default['default'](this.getTipElement()).addClass(CLASS_PREFIX$1+"-"+attachment)};_proto.getTipElement=function getTipElement(){this.tip=this.tip||$__default['default'](this.config.template)[0];return this.tip};_proto.setContent=function setContent(){var $tip=$__default['default'](this.getTipElement());this.setElementContent($tip.find(SELECTOR_TITLE),this.getTitle());var content=this._getContent();if(typeof content==='function'){content=content.call(this.element)}
this.setElementContent($tip.find(SELECTOR_CONTENT),content);$tip.removeClass(CLASS_NAME_FADE$3+" "+CLASS_NAME_SHOW$5)};_proto._getContent=function _getContent(){return this.element.getAttribute('data-content')||this.config.content};_proto._cleanTipClass=function _cleanTipClass(){var $tip=$__default['default'](this.getTipElement());var tabClass=$tip.attr('class').match(BSCLS_PREFIX_REGEX$1);if(tabClass!==null&&tabClass.length>0){$tip.removeClass(tabClass.join(''))}};Popover._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var data=$__default['default'](this).data(DATA_KEY$7);var _config=typeof config==='object'?config:null;if(!data&&/dispose|hide/.test(config)){return}
if(!data){data=new Popover(this,_config);$__default['default'](this).data(DATA_KEY$7,data)}
if(typeof config==='string'){if(typeof data[config]==='undefined'){throw new TypeError("No method named \""+config+"\"")}
data[config]()}})};_createClass(Popover,null,[{key:"VERSION",get:function get(){return VERSION$7}},{key:"Default",get:function get(){return Default$5}},{key:"NAME",get:function get(){return NAME$7}},{key:"DATA_KEY",get:function get(){return DATA_KEY$7}},{key:"Event",get:function get(){return Event$1}},{key:"EVENT_KEY",get:function get(){return EVENT_KEY$7}},{key:"DefaultType",get:function get(){return DefaultType$5}}]);return Popover}(Tooltip);$__default['default'].fn[NAME$7]=Popover._jQueryInterface;$__default['default'].fn[NAME$7].Constructor=Popover;$__default['default'].fn[NAME$7].noConflict=function(){$__default['default'].fn[NAME$7]=JQUERY_NO_CONFLICT$7;return Popover._jQueryInterface};var NAME$8='scrollspy';var VERSION$8='4.6.0';var DATA_KEY$8='bs.scrollspy';var EVENT_KEY$8="."+DATA_KEY$8;var DATA_API_KEY$6='.data-api';var JQUERY_NO_CONFLICT$8=$__default['default'].fn[NAME$8];var Default$6={offset:10,method:'auto',target:''};var DefaultType$6={offset:'number',method:'string',target:'(string|element)'};var EVENT_ACTIVATE="activate"+EVENT_KEY$8;var EVENT_SCROLL="scroll"+EVENT_KEY$8;var EVENT_LOAD_DATA_API$2="load"+EVENT_KEY$8+DATA_API_KEY$6;var CLASS_NAME_DROPDOWN_ITEM='dropdown-item';var CLASS_NAME_ACTIVE$2='active';var SELECTOR_DATA_SPY='[data-spy="scroll"]';var SELECTOR_NAV_LIST_GROUP='.nav, .list-group';var SELECTOR_NAV_LINKS='.nav-link';var SELECTOR_NAV_ITEMS='.nav-item';var SELECTOR_LIST_ITEMS='.list-group-item';var SELECTOR_DROPDOWN='.dropdown';var SELECTOR_DROPDOWN_ITEMS='.dropdown-item';var SELECTOR_DROPDOWN_TOGGLE='.dropdown-toggle';var METHOD_OFFSET='offset';var METHOD_POSITION='position';var ScrollSpy=function(){function ScrollSpy(element,config){var _this=this;this._element=element;this._scrollElement=element.tagName==='BODY'?window:element;this._config=this._getConfig(config);this._selector=this._config.target+" "+SELECTOR_NAV_LINKS+","+(this._config.target+" "+SELECTOR_LIST_ITEMS+",")+(this._config.target+" "+SELECTOR_DROPDOWN_ITEMS);this._offsets=[];this._targets=[];this._activeTarget=null;this._scrollHeight=0;$__default['default'](this._scrollElement).on(EVENT_SCROLL,function(event){return _this._process(event)});this.refresh();this._process()}
var _proto=ScrollSpy.prototype;_proto.refresh=function refresh(){var _this2=this;var autoMethod=this._scrollElement===this._scrollElement.window?METHOD_OFFSET:METHOD_POSITION;var offsetMethod=this._config.method==='auto'?autoMethod:this._config.method;var offsetBase=offsetMethod===METHOD_POSITION?this._getScrollTop():0;this._offsets=[];this._targets=[];this._scrollHeight=this._getScrollHeight();var targets=[].slice.call(document.querySelectorAll(this._selector));targets.map(function(element){var target;var targetSelector=Util.getSelectorFromElement(element);if(targetSelector){target=document.querySelector(targetSelector)}
if(target){var targetBCR=target.getBoundingClientRect();if(targetBCR.width||targetBCR.height){return[$__default['default'](target)[offsetMethod]().top+offsetBase,targetSelector]}}
return null}).filter(function(item){return item}).sort(function(a,b){return a[0]-b[0]}).forEach(function(item){_this2._offsets.push(item[0]);_this2._targets.push(item[1])})};_proto.dispose=function dispose(){$__default['default'].removeData(this._element,DATA_KEY$8);$__default['default'](this._scrollElement).off(EVENT_KEY$8);this._element=null;this._scrollElement=null;this._config=null;this._selector=null;this._offsets=null;this._targets=null;this._activeTarget=null;this._scrollHeight=null};_proto._getConfig=function _getConfig(config){config=_extends({},Default$6,typeof config==='object'&&config?config:{});if(typeof config.target!=='string'&&Util.isElement(config.target)){var id=$__default['default'](config.target).attr('id');if(!id){id=Util.getUID(NAME$8);$__default['default'](config.target).attr('id',id)}
config.target="#"+id}
Util.typeCheckConfig(NAME$8,config,DefaultType$6);return config};_proto._getScrollTop=function _getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop};_proto._getScrollHeight=function _getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)};_proto._getOffsetHeight=function _getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height};_proto._process=function _process(){var scrollTop=this._getScrollTop()+this._config.offset;var scrollHeight=this._getScrollHeight();var maxScroll=this._config.offset+scrollHeight-this._getOffsetHeight();if(this._scrollHeight!==scrollHeight){this.refresh()}
if(scrollTop>=maxScroll){var target=this._targets[this._targets.length-1];if(this._activeTarget!==target){this._activate(target)}
return}
if(this._activeTarget&&scrollTop<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null;this._clear();return}
for(var i=this._offsets.length;i--;){var isActiveTarget=this._activeTarget!==this._targets[i]&&scrollTop>=this._offsets[i]&&(typeof this._offsets[i+1]==='undefined'||scrollTop<this._offsets[i+1]);if(isActiveTarget){this._activate(this._targets[i])}}};_proto._activate=function _activate(target){this._activeTarget=target;this._clear();var queries=this._selector.split(',').map(function(selector){return selector+"[data-target=\""+target+"\"],"+selector+"[href=\""+target+"\"]"});var $link=$__default['default']([].slice.call(document.querySelectorAll(queries.join(','))));if($link.hasClass(CLASS_NAME_DROPDOWN_ITEM)){$link.closest(SELECTOR_DROPDOWN).find(SELECTOR_DROPDOWN_TOGGLE).addClass(CLASS_NAME_ACTIVE$2);$link.addClass(CLASS_NAME_ACTIVE$2)}else{$link.addClass(CLASS_NAME_ACTIVE$2);$link.parents(SELECTOR_NAV_LIST_GROUP).prev(SELECTOR_NAV_LINKS+", "+SELECTOR_LIST_ITEMS).addClass(CLASS_NAME_ACTIVE$2);$link.parents(SELECTOR_NAV_LIST_GROUP).prev(SELECTOR_NAV_ITEMS).children(SELECTOR_NAV_LINKS).addClass(CLASS_NAME_ACTIVE$2)}
$__default['default'](this._scrollElement).trigger(EVENT_ACTIVATE,{relatedTarget:target})};_proto._clear=function _clear(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(node){return node.classList.contains(CLASS_NAME_ACTIVE$2)}).forEach(function(node){return node.classList.remove(CLASS_NAME_ACTIVE$2)})};ScrollSpy._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var data=$__default['default'](this).data(DATA_KEY$8);var _config=typeof config==='object'&&config;if(!data){data=new ScrollSpy(this,_config);$__default['default'](this).data(DATA_KEY$8,data)}
if(typeof config==='string'){if(typeof data[config]==='undefined'){throw new TypeError("No method named \""+config+"\"")}
data[config]()}})};_createClass(ScrollSpy,null,[{key:"VERSION",get:function get(){return VERSION$8}},{key:"Default",get:function get(){return Default$6}}]);return ScrollSpy}();$__default['default'](window).on(EVENT_LOAD_DATA_API$2,function(){var scrollSpys=[].slice.call(document.querySelectorAll(SELECTOR_DATA_SPY));var scrollSpysLength=scrollSpys.length;for(var i=scrollSpysLength;i--;){var $spy=$__default['default'](scrollSpys[i]);ScrollSpy._jQueryInterface.call($spy,$spy.data())}});$__default['default'].fn[NAME$8]=ScrollSpy._jQueryInterface;$__default['default'].fn[NAME$8].Constructor=ScrollSpy;$__default['default'].fn[NAME$8].noConflict=function(){$__default['default'].fn[NAME$8]=JQUERY_NO_CONFLICT$8;return ScrollSpy._jQueryInterface};var NAME$9='tab';var VERSION$9='4.6.0';var DATA_KEY$9='bs.tab';var EVENT_KEY$9="."+DATA_KEY$9;var DATA_API_KEY$7='.data-api';var JQUERY_NO_CONFLICT$9=$__default['default'].fn[NAME$9];var EVENT_HIDE$3="hide"+EVENT_KEY$9;var EVENT_HIDDEN$3="hidden"+EVENT_KEY$9;var EVENT_SHOW$3="show"+EVENT_KEY$9;var EVENT_SHOWN$3="shown"+EVENT_KEY$9;var EVENT_CLICK_DATA_API$6="click"+EVENT_KEY$9+DATA_API_KEY$7;var CLASS_NAME_DROPDOWN_MENU='dropdown-menu';var CLASS_NAME_ACTIVE$3='active';var CLASS_NAME_DISABLED$1='disabled';var CLASS_NAME_FADE$4='fade';var CLASS_NAME_SHOW$6='show';var SELECTOR_DROPDOWN$1='.dropdown';var SELECTOR_NAV_LIST_GROUP$1='.nav, .list-group';var SELECTOR_ACTIVE$2='.active';var SELECTOR_ACTIVE_UL='> li > .active';var SELECTOR_DATA_TOGGLE$4='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]';var SELECTOR_DROPDOWN_TOGGLE$1='.dropdown-toggle';var SELECTOR_DROPDOWN_ACTIVE_CHILD='> .dropdown-menu .active';var Tab=function(){function Tab(element){this._element=element}
var _proto=Tab.prototype;_proto.show=function show(){var _this=this;if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&$__default['default'](this._element).hasClass(CLASS_NAME_ACTIVE$3)||$__default['default'](this._element).hasClass(CLASS_NAME_DISABLED$1)){return}
var target;var previous;var listElement=$__default['default'](this._element).closest(SELECTOR_NAV_LIST_GROUP$1)[0];var selector=Util.getSelectorFromElement(this._element);if(listElement){var itemSelector=listElement.nodeName==='UL'||listElement.nodeName==='OL'?SELECTOR_ACTIVE_UL:SELECTOR_ACTIVE$2;previous=$__default['default'].makeArray($__default['default'](listElement).find(itemSelector));previous=previous[previous.length-1]}
var hideEvent=$__default['default'].Event(EVENT_HIDE$3,{relatedTarget:this._element});var showEvent=$__default['default'].Event(EVENT_SHOW$3,{relatedTarget:previous});if(previous){$__default['default'](previous).trigger(hideEvent)}
$__default['default'](this._element).trigger(showEvent);if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented()){return}
if(selector){target=document.querySelector(selector)}
this._activate(this._element,listElement);var complete=function complete(){var hiddenEvent=$__default['default'].Event(EVENT_HIDDEN$3,{relatedTarget:_this._element});var shownEvent=$__default['default'].Event(EVENT_SHOWN$3,{relatedTarget:previous});$__default['default'](previous).trigger(hiddenEvent);$__default['default'](_this._element).trigger(shownEvent)};if(target){this._activate(target,target.parentNode,complete)}else{complete()}};_proto.dispose=function dispose(){$__default['default'].removeData(this._element,DATA_KEY$9);this._element=null};_proto._activate=function _activate(element,container,callback){var _this2=this;var activeElements=container&&(container.nodeName==='UL'||container.nodeName==='OL')?$__default['default'](container).find(SELECTOR_ACTIVE_UL):$__default['default'](container).children(SELECTOR_ACTIVE$2);var active=activeElements[0];var isTransitioning=callback&&active&&$__default['default'](active).hasClass(CLASS_NAME_FADE$4);var complete=function complete(){return _this2._transitionComplete(element,active,callback)};if(active&&isTransitioning){var transitionDuration=Util.getTransitionDurationFromElement(active);$__default['default'](active).removeClass(CLASS_NAME_SHOW$6).one(Util.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration)}else{complete()}};_proto._transitionComplete=function _transitionComplete(element,active,callback){if(active){$__default['default'](active).removeClass(CLASS_NAME_ACTIVE$3);var dropdownChild=$__default['default'](active.parentNode).find(SELECTOR_DROPDOWN_ACTIVE_CHILD)[0];if(dropdownChild){$__default['default'](dropdownChild).removeClass(CLASS_NAME_ACTIVE$3)}
if(active.getAttribute('role')==='tab'){active.setAttribute('aria-selected',!1)}}
$__default['default'](element).addClass(CLASS_NAME_ACTIVE$3);if(element.getAttribute('role')==='tab'){element.setAttribute('aria-selected',!0)}
Util.reflow(element);if(element.classList.contains(CLASS_NAME_FADE$4)){element.classList.add(CLASS_NAME_SHOW$6)}
if(element.parentNode&&$__default['default'](element.parentNode).hasClass(CLASS_NAME_DROPDOWN_MENU)){var dropdownElement=$__default['default'](element).closest(SELECTOR_DROPDOWN$1)[0];if(dropdownElement){var dropdownToggleList=[].slice.call(dropdownElement.querySelectorAll(SELECTOR_DROPDOWN_TOGGLE$1));$__default['default'](dropdownToggleList).addClass(CLASS_NAME_ACTIVE$3)}
element.setAttribute('aria-expanded',!0)}
if(callback){callback()}};Tab._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var $this=$__default['default'](this);var data=$this.data(DATA_KEY$9);if(!data){data=new Tab(this);$this.data(DATA_KEY$9,data)}
if(typeof config==='string'){if(typeof data[config]==='undefined'){throw new TypeError("No method named \""+config+"\"")}
data[config]()}})};_createClass(Tab,null,[{key:"VERSION",get:function get(){return VERSION$9}}]);return Tab}();$__default['default'](document).on(EVENT_CLICK_DATA_API$6,SELECTOR_DATA_TOGGLE$4,function(event){event.preventDefault();Tab._jQueryInterface.call($__default['default'](this),'show')});$__default['default'].fn[NAME$9]=Tab._jQueryInterface;$__default['default'].fn[NAME$9].Constructor=Tab;$__default['default'].fn[NAME$9].noConflict=function(){$__default['default'].fn[NAME$9]=JQUERY_NO_CONFLICT$9;return Tab._jQueryInterface};var NAME$a='toast';var VERSION$a='4.6.0';var DATA_KEY$a='bs.toast';var EVENT_KEY$a="."+DATA_KEY$a;var JQUERY_NO_CONFLICT$a=$__default['default'].fn[NAME$a];var EVENT_CLICK_DISMISS$1="click.dismiss"+EVENT_KEY$a;var EVENT_HIDE$4="hide"+EVENT_KEY$a;var EVENT_HIDDEN$4="hidden"+EVENT_KEY$a;var EVENT_SHOW$4="show"+EVENT_KEY$a;var EVENT_SHOWN$4="shown"+EVENT_KEY$a;var CLASS_NAME_FADE$5='fade';var CLASS_NAME_HIDE='hide';var CLASS_NAME_SHOW$7='show';var CLASS_NAME_SHOWING='showing';var DefaultType$7={animation:'boolean',autohide:'boolean',delay:'number'};var Default$7={animation:!0,autohide:!0,delay:500};var SELECTOR_DATA_DISMISS$1='[data-dismiss="toast"]';var Toast=function(){function Toast(element,config){this._element=element;this._config=this._getConfig(config);this._timeout=null;this._setListeners()}
var _proto=Toast.prototype;_proto.show=function show(){var _this=this;var showEvent=$__default['default'].Event(EVENT_SHOW$4);$__default['default'](this._element).trigger(showEvent);if(showEvent.isDefaultPrevented()){return}
this._clearTimeout();if(this._config.animation){this._element.classList.add(CLASS_NAME_FADE$5)}
var complete=function complete(){_this._element.classList.remove(CLASS_NAME_SHOWING);_this._element.classList.add(CLASS_NAME_SHOW$7);$__default['default'](_this._element).trigger(EVENT_SHOWN$4);if(_this._config.autohide){_this._timeout=setTimeout(function(){_this.hide()},_this._config.delay)}};this._element.classList.remove(CLASS_NAME_HIDE);Util.reflow(this._element);this._element.classList.add(CLASS_NAME_SHOWING);if(this._config.animation){var transitionDuration=Util.getTransitionDurationFromElement(this._element);$__default['default'](this._element).one(Util.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration)}else{complete()}};_proto.hide=function hide(){if(!this._element.classList.contains(CLASS_NAME_SHOW$7)){return}
var hideEvent=$__default['default'].Event(EVENT_HIDE$4);$__default['default'](this._element).trigger(hideEvent);if(hideEvent.isDefaultPrevented()){return}
this._close()};_proto.dispose=function dispose(){this._clearTimeout();if(this._element.classList.contains(CLASS_NAME_SHOW$7)){this._element.classList.remove(CLASS_NAME_SHOW$7)}
$__default['default'](this._element).off(EVENT_CLICK_DISMISS$1);$__default['default'].removeData(this._element,DATA_KEY$a);this._element=null;this._config=null};_proto._getConfig=function _getConfig(config){config=_extends({},Default$7,$__default['default'](this._element).data(),typeof config==='object'&&config?config:{});Util.typeCheckConfig(NAME$a,config,this.constructor.DefaultType);return config};_proto._setListeners=function _setListeners(){var _this2=this;$__default['default'](this._element).on(EVENT_CLICK_DISMISS$1,SELECTOR_DATA_DISMISS$1,function(){return _this2.hide()})};_proto._close=function _close(){var _this3=this;var complete=function complete(){_this3._element.classList.add(CLASS_NAME_HIDE);$__default['default'](_this3._element).trigger(EVENT_HIDDEN$4)};this._element.classList.remove(CLASS_NAME_SHOW$7);if(this._config.animation){var transitionDuration=Util.getTransitionDurationFromElement(this._element);$__default['default'](this._element).one(Util.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration)}else{complete()}};_proto._clearTimeout=function _clearTimeout(){clearTimeout(this._timeout);this._timeout=null};Toast._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var $element=$__default['default'](this);var data=$element.data(DATA_KEY$a);var _config=typeof config==='object'&&config;if(!data){data=new Toast(this,_config);$element.data(DATA_KEY$a,data)}
if(typeof config==='string'){if(typeof data[config]==='undefined'){throw new TypeError("No method named \""+config+"\"")}
data[config](this)}})};_createClass(Toast,null,[{key:"VERSION",get:function get(){return VERSION$a}},{key:"DefaultType",get:function get(){return DefaultType$7}},{key:"Default",get:function get(){return Default$7}}]);return Toast}();$__default['default'].fn[NAME$a]=Toast._jQueryInterface;$__default['default'].fn[NAME$a].Constructor=Toast;$__default['default'].fn[NAME$a].noConflict=function(){$__default['default'].fn[NAME$a]=JQUERY_NO_CONFLICT$a;return Toast._jQueryInterface};exports.Alert=Alert;exports.Button=Button;exports.Carousel=Carousel;exports.Collapse=Collapse;exports.Dropdown=Dropdown;exports.Modal=Modal;exports.Popover=Popover;exports.Scrollspy=ScrollSpy;exports.Tab=Tab;exports.Toast=Toast;exports.Tooltip=Tooltip;exports.Util=Util;Object.defineProperty(exports,'__esModule',{value:!0})})));
/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-bootstrapmodalfix.js */
$.fn.modal.Constructor.prototype.enforceFocus=function(){$(document).off('focusin.bs.modal').on('focusin.bs.modal',$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length&&!$(e.target.parentNode).hasClass('cke_dialog_ui_input_select')&&!$(e.target.parentNode).hasClass('cke_dialog_ui_input_text')&&!$(e.target).hasClass('ui-datepicker-month')&&!$(e.target).hasClass('ui-datepicker-year')){this.$element.trigger('focus')}},this))};
/* rank:50standard - minify:ok. lib/jquery_tiki/iconsets.js */
(function($){$.fn.getIcon=function(name){var icon=jqueryTiki.iconset.icons[name],$output=$(),attr="";if(!icon){if(jqueryTiki.iconset.defaults.indexOf(name)>-1){icon={id:name}}}
if(icon){icon.tag=icon.tag||jqueryTiki.iconset.tag;icon.prepend=icon.prepend||jqueryTiki.iconset.prepend;icon.append=icon.append||jqueryTiki.iconset.append;$output=$("<"+icon.tag+">");attr=icon.prepend+icon.id+icon.append;if(icon.tag==="img"){$output.attr("src",attr);$output=$("<span>").addClass("icon").addClass("icon-"+name).append($output)}else{$output.addClass(attr).addClass("icon").addClass("icon-"+name)}}else{$output=$().getIcon("warning");console.log("iconset: icon not found:"+name)}
return $output};$.fn.setIcon=function(name){return $(this).replaceWith($(this).getIcon(name))}})(jQuery);
/* rank:50standard - minify:disabled - adding raw file.  */
;
/* rank:50standard - minify:ok. lib/tiki-js.js */
function tr(str){if(typeof lang!=="undefined"&&typeof lang[str]=='string'){return lang[str]}else{return str}}
var lang={};function browser(){var b=navigator.appName;if(b=="Netscape"){this.b="ns"}else{this.b=b}
this.version=navigator.appVersion;this.v=parseInt(this.version,10);this.ns=(this.b=="ns"&&this.v>=5);this.op=(navigator.userAgent.indexOf('Opera')>-1);this.safari=(navigator.userAgent.indexOf('Safari')>-1);this.op7=(navigator.userAgent.indexOf('Opera')>-1&&this.v>=7);this.ie56=(this.version.indexOf('MSIE 5')>-1||this.version.indexOf('MSIE 6')>-1);this.ie567=(this.version.indexOf('MSIE 5')>-1||this.version.indexOf('MSIE 6')>-1||this.version.indexOf('MSIE 7')>-1);this.iewin=(this.ie56&&navigator.userAgent.indexOf('Windows')>-1);this.iewin7=(this.ie567&&navigator.userAgent.indexOf('Windows')>-1);this.iemac=(this.ie56&&navigator.userAgent.indexOf('Mac')>-1);this.moz=(navigator.userAgent.indexOf('Mozilla')>-1);this.moz13=(navigator.userAgent.indexOf('Mozilla')>-1&&navigator.userAgent.indexOf('1.3')>-1);this.oldmoz=(navigator.userAgent.indexOf('Mozilla')>-1&&navigator.userAgent.indexOf('1.4')>-1||navigator.userAgent.indexOf('Mozilla')>-1&&navigator.userAgent.indexOf('1.5')>-1||navigator.userAgent.indexOf('Mozilla')>-1&&navigator.userAgent.indexOf('1.6')>-1);this.ns6=(navigator.userAgent.indexOf('Netscape6')>-1);this.docom=(this.ie56||this.ns||this.iewin||this.op||this.iemac||this.safari||this.moz||this.oldmoz||this.ns6)}
function toggle_dynamic_var(name){var displayContainer=document.getElementById('dyn_'+name+'_display');var editContainer=document.getElementById('dyn_'+name+'_edit');var form=document.createElement('form');form.setAttribute('method','post');form.setAttribute('name','dyn_vars');form.style.display="inline";editContainer.parentNode.insertBefore(form,editContainer);form.appendChild(editContainer);if(displayContainer.style.display=="none"){editContainer.style.display="none";displayContainer.style.display="inline"}else{displayContainer.style.display="none";editContainer.style.display="inline"}}
function chgArtType(){var articleType=document.getElementById('articletype').value;var typeProperties=articleTypes[articleType];var propertyList=['show_topline','y','show_subtitle','y','show_linkto','y','show_author','y','use_ratings','y','heading_only','n','show_image_caption','y','show_pre_publ','y','show_post_expire','y','show_image','y','show_expdate','y'];if(typeof articleCustomAttributes!='undefined'){propertyList=propertyList.concat(articleCustomAttributes)}
var l=propertyList.length,property,value,display;for(var i=0;i<l;i++){property=propertyList[i++];value=propertyList[i];if(typeProperties[property]==value||(!typeProperties[property]&&value=="n")){display=""}else{display="none"}
if(document.getElementById(property)){document.getElementById(property).style.display=display}else{var j=1;while(document.getElementById(property+'_'+j)){document.getElementById(property+'_'+j).style.display=display;j++}}}}
function toggleSpan(id){$("#"+id).toggle()}
function toggleBlock(id){$("#"+id).toggle()}
function toggleTrTd(id){$("#"+id).toggle()}
function changeText(el,newText){if(el.innerText){el.innerText=newText}else if(el.firstChild&&el.firstChild.nodeValue){el.firstChild.nodeValue=newText}}
function toggleToc(){var toc=document.getElementById('toc').getElementsByTagName('ul')[0];if(toc&&toc.style.display=='none'){toc.style.display='block'}else{toc.style.display='none'}}
function chgTrkFld(f,o){var opt=0;document.getElementById('z').style.display="none";document.getElementById('zDescription').style.display="";document.getElementById('zStaticText').style.display="none";document.getElementById('zStaticTextToolbars').style.display="none";for(var i=0;i<f.length;i++){var c=f.charAt(i);if(document.getElementById(c)){var ichoiceParent=document.getElementById('itemChoicesRow');var ichoice=document.getElementById(c+'itemChoices');if(c==o){document.getElementById(c).style.display="";document.getElementById('z').style.display="block";if(c=='S'){document.getElementById('zDescription').style.display="none";document.getElementById('zStaticText').style.display="";document.getElementById('zStaticTextToolbars').style.display=""}
if(ichoice){ichoice.style.display="";ichoiceParent.style.display=""}else{ichoiceParent.style.display="none"}}else{document.getElementById(c).style.display="none";if(ichoice){ichoice.style.display="none"}}}}}
function chgTrkLingual(item){document.getElementById("multilabelRow").style.display=(item=='t'||item=='a')?'':'none'}
function multitoggle(f,o){for(var i=0;i<f.length;i++){if(document.getElementById('fid'+f[i])){if(f[i]==o){document.getElementById('fid'+f[i]).style.display="block"}else{document.getElementById('fid'+f[i]).style.display="none"}}}}
function setMenuCon(foo){var it=foo.split(",");document.getElementById('menu_url').value=it[0];document.getElementById('menu_name').value=it[1];if(it[2]){document.getElementById('menu_section').value=it[2]}else{document.getElementById('menu_section').value=''}
if(it[3]){document.getElementById('menu_perm').value=it[3]}else{document.getElementById('menu_perm').value=''}
flip('weburls')}
function genPass(w1){var lower,upper,num,other,l,p,pstr,i,letter,j,temp;lower='abcdefghijklmnopqrstuvwxyz';upper='ABCDEFGHIJKLMNOPQRSTUVWXYZ';num='0123456789';other='_$%#!@*+';l=8;p=[];for(i=0;i<l;i++){if(i<2){letter=lower.charAt(Math.round(Math.random()*(lower.length-1)))}else if(i<4){letter=upper.charAt(Math.round(Math.random()*(upper.length-1)))}else if(i<6){letter=num.charAt(Math.round(Math.random()*(num.length-1)))}else{letter=other.charAt(Math.round(Math.random()*(other.length-1)))}
p[i]=letter}
for(i=p.length-1;i>0;i--){j=Math.floor(Math.random()*(i+1));temp=p[i];p[i]=p[j];p[j]=temp}
pstr=p.join('');document.getElementById(w1).value=pstr}
function setUserModule(foo1){document.getElementById('usermoduledata').value=foo1}
function replaceLimon(vec){document.getElementById(vec[0]).value=document.getElementById(vec[0]).value.replace(vec[1],vec[2])}
function setSelectionRange(textarea,selectionStart,selectionEnd){var $textareaEditor=syntaxHighlighter.get($(textarea));if($textareaEditor){syntaxHighlighter.setSelection($textareaEditor,selectionStart,selectionEnd);return}
$(textarea).selection(selectionStart,selectionEnd)}
function getTASelection(textarea){var $textareaEditor=syntaxHighlighter.get($(textarea));if($textareaEditor){return $textareaEditor.getSelection()}
var ta_id=$(textarea).attr("id"),r,cked,output;if(cked=typeof CKEDITOR!=='undefined'?CKEDITOR.instances[ta_id]:null){return cked.getSelection().getSelectedText()}else{if(typeof $(textarea).attr("selectionStartSaved")!='undefined'&&$(textarea).attr("selectionStartSaved")){return textarea.value.substring($(textarea).attr("selectionStartSaved"),$(textarea).attr("selectionEndSaved"))}else if((typeof textarea!='undefined')&&(typeof textarea.selectionStart!='undefined')){return textarea.value.substring(textarea.selectionStart,textarea.selectionEnd)}else{r=document.selection.createRange();return r.text}}}
var ieFirstTimeInsertKludge=null;function storeTASelection(area_id){if(typeof CKEDITOR==='undefined'||typeof CKEDITOR.instances[area_id]==='undefined'){var $el=$("#"+area_id);var sel=$el.selection();$el.attr("selectionStartSaved",sel.start).attr("selectionEndSaved",sel.end).attr("scrollTopSaved",$el.attr("scrollTop"))}
if(ieFirstTimeInsertKludge===null){ieFirstTimeInsertKludge=!0}}
function setCaretToPos(textarea,pos){setSelectionRange(textarea,pos,pos)}
function getCaretPos(textarea){var $textareaEditor=syntaxHighlighter.get($(textarea));if($textareaEditor){var endPoint=$textareaEditor.cursorCoords();return(endPoint.x?endPoint.x:0)}
if(typeof textarea.selectionEnd!='undefined'){return textarea.selectionEnd}else if(document.selection){textarea.focus();var range=document.selection.createRange();if(range===null){return 0}
var re=textarea.createTextRange();var rc=re.duplicate();re.moveToBookmark(range.getBookmark());rc.setEndPoint('EndToStart',re);return rc.text.length?rc.text.length:0}else{return 0}}
function insertAt(elementId,replaceString,blockLevel,perLine,replaceSelection){var $textarea=$('#'+elementId);var $textareaEditor=syntaxHighlighter.get($textarea);var toBeReplaced=/text|page|area_id/g;var hiddenParents=$textarea.parents('fieldset:hidden:last');if(hiddenParents.length){hiddenParents.show()}
if($textareaEditor){syntaxHighlighter.insertAt($textareaEditor,replaceString,perLine,blockLevel,replaceSelection);return}else if(typeof CKEDITOR!=='undefined'&&CKEDITOR.instances[elementId]){var cked=CKEDITOR.instances[elementId];if(cked){var isPlugin=replaceString.match(/^\s?\{/m);if(isPlugin){isPlugin=replaceString.match(/\}\s?$/m)}
isPlugin=isPlugin&&isPlugin.length>0;var sel=cked.getSelection(),rng;if(sel){rng=sel.getRanges();if(rng.length){rng=rng[0]}}
var plugin_el,com;if(isPlugin&&rng&&!rng.collapsed){com=cked.getSelection().getStartElement();if(typeof com!=='undefined'&&com&&com.$){while(!$(com.$).hasClass("tiki_plugin")&&com.$.nextSibling&&com.$!==rng.endContainer.$){com=new CKEDITOR.dom.element(com.$.nextSibling);if($(com.$).hasClass("tiki_plugin")||$(com.$).find(".tiki_plugin").length===0){break}}
if(!$(com.$).hasClass("tiki_plugin")){plugin_el=$(com.$).find(".tiki_plugin");if(plugin_el.length==1){com=new CKEDITOR.dom.element(plugin_el[0])}else{plugin_el=$(com.$).parents(".tiki_plugin:last");if(plugin_el.length==1){com=new CKEDITOR.dom.element(plugin_el[0])}else{var plugin_type=replaceString.match(/^\s?\{([\w]+)/);if(plugin_type.length>1){plugin_type=plugin_type[1].toLowerCase()}
plugin_el=$(com.$).find("[plugin="+plugin_type+"].tiki_plugin");if(plugin_el.length==1){com=new CKEDITOR.dom.element(plugin_el[0])}else{}}}}}
if(com&&com.hasClass("tiki_plugin")){var html=cked.getData().replace(com.data("syntax"),replaceString);cked.setData(html);return}}
try{cked.insertText(replaceString)}catch(e){prompt(tr("Development notice: The editor selection has been lost, here is the text to insert."),replaceString);return}
if(typeof cked.reParse==="function"&&(isPlugin||replaceString.match(/^\s?\(\(.*?\)\)\s?$/)||replaceString.match(/^||.*||$/))){var bookmarks=cked.getSelection().createBookmarks2(!0);cked.reParse();cked.getSelection().selectBookmarks(bookmarks)}}
return}
if(!$textarea.length&&elementId==="fgal_picker"){$(".cke_dialog_contents").find("input:first").val(replaceString.replace("&amp;","&"));return}else if($textarea.is(":input")&&elementId==="fgal_picker_id"){$textarea.val(replaceString);return}
$textarea.focus();var val=$textarea.val();var selection=$textarea.selection();var scrollTop=$textarea[0].scrollTop;if(selection.start===0&&selection.end===0&&typeof $textarea.attr("selectionStartSaved")!='undefined'){if($textarea.attr("selectionStartSaved")){selection.start=$textarea.attr("selectionStartSaved");selection.end=$textarea.attr("selectionEndSaved");if($textarea.attr("scrollTopSaved")){scrollTop=$textarea.attr("scrollTopSaved");$textarea.attr("scrollTopSaved","")}
$textarea.attr("selectionStartSaved","").attr("selectionEndSaved","")}else{selection.start=getCaretPos($textarea[0]);selection.end=selection.start}}
var lines,startoff=0,endoff=0;if($textarea[0].createTextRange&&$textarea[0].value!==val){val=$textarea[0].value;if(val.substring(selection.start,selection.start+1)==="\n"){selection.start++}
lines=val.substring(0,selection.start).match(/\r\n/g);if(lines){startoff-=lines.length}}
var selectionStart=selection.start;var selectionEnd=selection.end;if(blockLevel){selectionStart=val.lastIndexOf("\n",selectionStart-1)+1;var blockEnd=val.indexOf("\r",selectionEnd);if(blockEnd<0){selectionEnd=val.indexOf("\n",selectionEnd)}else{selectionEnd=blockEnd}
if(selectionEnd<0){selectionEnd=val.length}}
var newString='';if((selectionStart!=selectionEnd)&&!$textareaEditor){if(perLine){lines=val.substring(selectionStart,selectionEnd).split("\n");for(var k=0;lines.length>k;++k){if(lines[k].length!==0){newString+=replaceString.replace(toBeReplaced,lines[k])}
if(k!=lines.length-1){newString+="\n"}}}else{if(replaceSelection){newString=replaceString}else if(replaceString.match(toBeReplaced)){newString=replaceString.replace(toBeReplaced,val.substring(selectionStart,selectionEnd))}else{newString=replaceString+'\n'+val.substring(selectionStart,selectionEnd)}}
$textarea.val(val.substring(0,selectionStart)+newString+val.substring(selectionEnd));lines=newString.match(/\r\n/g);if(lines){endoff-=lines.length}
setSelectionRange($textarea[0],selectionStart+startoff,selectionStart+startoff+newString.length+endoff)}else{$textarea.val(val.substring(0,selectionStart)+replaceString+val.substring(selectionEnd));lines=replaceString.match(/\r\n/g);if(lines){endoff-=lines.length}
setCaretToPos($textarea[0],selectionStart+startoff+replaceString.length+endoff)}
$textarea.attr("scrollTop",scrollTop);if(this.iewin&&ieFirstTimeInsertKludge){setTimeout(function(){if(newString.length){setSelectionRange($textarea[0],parseInt(selectionStart,10)+parseInt(startoff,10),parseInt(selectionStart,10)+parseInt(startoff,10)+newString.length+parseInt(endoff,10))}
$textarea.attr("scrollTop",scrollTop)},1000);ieFirstTimeInsertKludge=!1}
if(hiddenParents.length){hiddenParents.hide()}
if(typeof auto_save==="function"){auto_save(elementId)}}
function setUserModuleFromCombo(id,textarea){document.getElementById(textarea).value=document.getElementById(textarea).value+document.getElementById(id).options[document.getElementById(id).selectedIndex].value}
function toggle(foo){var display=$("#"+foo).css('display');if(display=="none"){show(foo,!0,"menu")}else{if(display=="block"){hide(foo,!0,"menu")}else{show(foo,!0,"menu")}}}
function flip_thumbnail_status(id){var elem=document.getElementById(id);if(elem.className=='thumbnailcontener'){elem.className+=' thumbnailcontenerchecked'}else{elem.className='thumbnailcontener'}}
function flip_class(itemid,class1,class2){var elem=document.getElementById(itemid);if(elem&&typeof elem!='undefined'){elem.className=elem.className==class1?class2:class1;setCookie('flip_class_'+itemid,elem.className)}}
function tikitabs(focus,tabElement){var container,ofocus=focus;if(typeof tabElement==="undefined"){container=$(".tabset:first")}else{container=$(tabElement).parents(".tabset:first")}
if(focus>$("> .tabs .tabmark",container).length){focus=1}
while($("> .tabs .tabmark.tab"+focus+":first",container).is(":hidden")){focus++}
if($("> .tabs .tabmark.tab"+focus+":first",container).length===0){focus=ofocus}
$("> .tabs .tabmark:not(.tab"+focus+":first)",container).removeClass("tabactive");$("> .tabs .tabmark.tab"+focus+":first",container).addClass("tabactive");$("> .tabcontent:not(.content"+focus+":first)",container).hide();$("> .tabcontent.content"+focus+":first",container).show();setCookie($(".tabs:first",container).data("name"),focus,"tabs","session")}
function setfolderstate(foo,def,img,status){if(!status){status=getCookie(foo,"menu","o")}
if(!img){if(document.getElementsByName('icn'+foo)[0].src.search(/[\\\/]/)){img=document.getElementsByName('icn'+foo)[0].src.replace(/.*[\\\/]([^\\\/]*)$/,"$1")}else{img='folder.png'}}
var src=img;if(status=='c'){hide(foo,!1,"menu")}else{show(foo,!1,"menu")}
if(status=='c'&&def!='d'){src=src.replace(/^o/,'')}else if(status!='c'&&def=='d'&&src.indexOf('o')!==0){src='o'+img}
document.getElementsByName('icn'+foo)[0].src=document.getElementsByName('icn'+foo)[0].src.replace(/[^\\\/]*$/,src)}
function setheadingstate(foo){var status=getCookie(foo,"showhide_headings");var $foo=$("#"+foo);if(status=="o"){$foo.show();collapseSign("flipper"+foo)}else if(status=="c"){$foo.hide();expandSign("flipper"+foo)}}
function setsectionstate(foo,def,img,status){var src;if(!status){status=getCookie(foo,"menu","o")}
if(status=="o"){show(foo);if(img){src="o"+img}}else if(status!="c"&&def!='d'){show(foo);if(img){src="o"+img}}else{hide(foo);if(img){src=img}}
if(img&&document.getElementsByName('icn'+foo).length){document.getElementsByName('icn'+foo)[0].src=document.getElementsByName('icn'+foo)[0].src.replace(/[^\\\/]*$/,src)}}
function icntoggle(foo,img){var $icn=$("#icn"+foo);var src=$icn.attr("src");if(!src){src=""}
if(!img){if(src.search(/[\\\/]/)){img=src.replace(/.*[\\\/]([^\\\/]*)$/,"$1")}else{img='folder.png'}}
if($("#"+foo+":hidden").length){show(foo,!0,"menu");$icn.attr("src",src.replace(/[^\\\/]*$/,'o'+img))}else{hide(foo,!0,"menu");img=img.replace(/(^|\/|\\)o(.*)$/,'$1$2');$icn.attr("src",src.replace(/[^\\\/]*$/,img))}}
function icontoggle(foo,clicked){if($("#"+foo+":hidden").length){show(foo,!0,"menu")}else{hide(foo,!0,"menu")}
var id=clicked.id;$('#'+id+' .toggle-open').toggle();$('#'+id+' .toggle-closed').toggle();return!1}
function getHttpRequest(method,url,async){if(async===undefined){async=!1}
var request;if(window.XMLHttpRequest){request=new XMLHttpRequest()}else if(window.ActiveXObject){try
{request=new ActiveXObject("Microsoft.XMLHTTP")}catch(ex){request=new ActiveXObject("MSXML2.XMLHTTP")}}else{return!1}
if(!request){return!1}
request.open(method,url,async);return request}
function setSessionVar(name,value){var request=getHttpRequest("GET","tiki-cookie-jar.php?"+name+"="+tiki_encodeURIComponent(value));request.send('');if(tiki_cookie_jar){tiki_cookie_jar[name]=value}}
function setCookie(name,value,section,expires,path,domain,secure){if(getCookie(name,section)==value){return!0}
if(!expires){expires=new Date();expires.setFullYear(expires.getFullYear()+1)}
if(expires==="session"){expires=""}
if(typeof jqueryTiki!="undefined"&&jqueryTiki.no_cookie){var request=getHttpRequest("GET","tiki-cookie-jar.php?"+name+"="+encodeURIComponent(value));try{request.send('');tiki_cookie_jar[name]=value;return!0}catch(ex){setCookieBrowser(name,value,section,expires,path,domain,secure);return!1}}else{setCookieBrowser(name,value,section,expires,path,domain,secure);return!0}}
function setCookieBrowser(name,value,section,expires,path,domain,secure){if(section){var valSection=getCookie(section);var name2="@"+name+":";if(valSection){if(new RegExp(name2).test(valSection)){valSection=valSection.replace(new RegExp(name2+"[^@;]*"),name2+value)}else{valSection=valSection+name2+value}
setCookieBrowser(section,valSection,null,expires,path,domain,secure)}else{valSection=name2+value;setCookieBrowser(section,valSection,null,expires,path,domain,secure)}}else{var curCookie=name+"="+encodeURIComponent(value)+((expires)?"; expires="+expires.toGMTString():"")+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+((secure)?"; secure":"");document.cookie=curCookie}}
function getCookie(name,section,defval){if(typeof jqueryTiki!="undefined"&&jqueryTiki.no_cookie&&(window.XMLHttpRequest||window.ActiveXObject)&&typeof tiki_cookie_jar!="undefined"&&tiki_cookie_jar.length>0){if(typeof tiki_cookie_jar[name]=="undefined"){return defval}
return tiki_cookie_jar[name]}else{return getCookieBrowser(name,section,defval)}}
function getCookieBrowser(name,section,defval){if(typeof defval==="undefined"){defval=null}
if(section){var valSection=getCookieBrowser(section);if(valSection){var name2="@"+name+":";var val=valSection.match(new RegExp(name2+"([^@;]*)"));if(val){return decodeURIComponent(val[1])}else{return defval}}else{return defval}}else{var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!==0){return defval}}else{begin+=2}
var end=document.cookie.indexOf(";",begin);if(end==-1){end=dc.length}
return decodeURIComponent(dc.substring(begin+prefix.length,end))}}
function deleteCookie(name,section,expires,path,domain,secure){if(section){var valSection=getCookieBrowser(section);var name2="@"+name+":";if(valSection){if(new RegExp(name2).test(valSection)){valSection=valSection.replace(new RegExp(name2+"[^@;]*"),"");setCookieBrowser(section,valSection,null,expires,path,domain,secure)}}}else{document.cookie=name+"="+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}}
function fixDate(date){var base=new Date(0);var skew=base.getTime();if(skew>0){date.setTime(date.getTime()-skew)}}
function flipWithSign(foo){if(document.getElementById(foo).style.display=="none"){show(foo,!0,"showhide_headings");collapseSign("flipper"+foo)}else{hide(foo,!0,"showhide_headings");expandSign("flipper"+foo)}}
function setFlipWithSign(foo){if(getCookie(foo,"showhide_headings","o")=="o"){collapseSign("flipper"+foo);show(foo)}else{expandSign("flipper"+foo);hide(foo)}}
function expandSign(foo){if(document.getElementById(foo)){document.getElementById(foo).firstChild.nodeValue="[+]"}}
function collapseSign(foo){if(document.getElementById(foo)){document.getElementById(foo).firstChild.nodeValue="[-]"}}
function go(o){if(o.options[o.selectedIndex].value!==""){location.replace(o.options[o.selectedIndex].value);o.options[o.selectedIndex]=1}
return!1}
function targetBlank(url,mode){var features='menubar=yes,toolbar=yes,location=yes,directories=yes,fullscreen=no,titlebar=yes,hotkeys=yes,status=yes,scrollbars=yes,resizable=yes';switch(mode){case 'nw':break;case 'popup':features='menubar=no,toolbar=no,location=no,directories=no,fullscreen=no,titlebar=no,hotkeys=no,status=no,scrollbars=yes,resizable=yes';break;default:break}
window.open(url,'_blank',features)}
function confirmTheLink(theLink,theMsg){if(typeof(window.opera)!='undefined'){return!0}
var is_confirmed=confirm(theMsg);return is_confirmed}
function insertImgFile(elementId,fileId,oldfileId,type,page,attach_comment){var textarea=$('#'+elementId)[0];var fileup=$('input[name='+fileId+']')[0];var oldfile=$('input[name='+oldfileId+']')[0];var prefixEl=$('input[name=prefix]')[0];var prefix="img/wiki_up/";if(!textarea||!fileup){return}
if(prefixEl){prefix=prefixEl.value}
var filename=fileup.value,dirs,str;var oldfilename=oldfile.value;if(filename==oldfilename||filename===""){return}
oldfile.value=filename;if(filename.indexOf("/")>=0){dirs=filename.split("/");filename=dirs[dirs.length-1]}
if(filename.indexOf("\\")>=0){dirs=filename.split("\\");filename=dirs[dirs.length-1]}
if(filename.indexOf(":")>=0){dirs=filename.split(":");filename=dirs[dirs.length-1]}
if(type=="file"){str="{file name=\""+filename+"\"";var desc=$('#'+attach_comment).val();if(desc){str=str+" desc=\""+desc+"\""}
str=str+"}"}else{str="{img src=\"img/wiki_up/"+filename+"\" }\n"}
insertAt(elementId,str)}
var img_form_count=2,needToConfirm=!1;function addImgForm(){var new_text=document.createElement('span');new_text.setAttribute('id','picfile'+img_form_count);new_text.innerHTML='<input name=\'picfile'+img_form_count+'\' type=\'file\' onchange=\'insertImgFile("editwiki","picfile'+img_form_count+'","hasAlreadyInserted","img")\'/><br />';document.getElementById('new_img_form').appendChild(new_text);needToConfirm=!0;img_form_count ++}
browser();window.name='tiki';var fgals_window=null;function openFgalsWindow(filegal_manager_url,reload){if(fgals_window&&typeof fgals_window.document!="undefined"&&!fgals_window.closed){if(reload){fgals_window.location.replace(filegal_manager_url)}
fgals_window.focus()}else{fgals_window=window.open(filegal_manager_url,'_blank','menubar=1,scrollbars=1,resizable=1,height=500,width=800,left=50,top=50')}
$(window).on("unload",function(){fgals_window.close()})}
function wordCount(maxSize,source,cpt,message){var formcontent=source.value;var str=formcontent.replace(/^\s+|\s+$/g,'');formcontent=str.split(/[^\S]+/);if(maxSize>0&&formcontent.length>maxSize){alert(message);source.value=source.value.substr(0,source.value.length-1)}else{document.getElementById(cpt).value=formcontent.length}}
function charCount(maxSize,source,cpt,message){var formcontent=source.value.replace(/(\r\n|\n|\r)/g,'  ');if(maxSize>0&&formcontent.length>maxSize){alert(message);source.value=source.value.substr(0,maxSize)}else{document.getElementById(cpt).value=formcontent.length}}
var m_strUpperCase="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var m_strLowerCase="abcdefghijklmnopqrstuvwxyz";var m_strNumber="0123456789";var m_strCharacters="!@#$%^&*?_~";function checkPassword(strPassword){var nScore=0;if(strPassword.length<5){nScore+=5}else if(strPassword.length>4&&strPassword.length<8){nScore+=10}else if(strPassword.length>7){nScore+=25}
var nUpperCount=countContain(strPassword,m_strUpperCase);var nLowerCount=countContain(strPassword,m_strLowerCase);var nLowerUpperCount=nUpperCount+nLowerCount;if(nUpperCount===0&&nLowerCount!==0){nScore+=10}else if(nUpperCount!==0&&nLowerCount!==0){nScore+=20}
var nNumberCount=countContain(strPassword,m_strNumber);if(nNumberCount==1){nScore+=10}
if(nNumberCount>=3){nScore+=20}
var nCharacterCount=countContain(strPassword,m_strCharacters);if(nCharacterCount==1){nScore+=10}
if(nCharacterCount>1){nScore+=25}
if(nNumberCount!==0&&nLowerUpperCount!==0){nScore+=2}
if(nNumberCount!==0&&nLowerUpperCount!==0&&nCharacterCount!==0){nScore+=3}
if(nNumberCount!==0&&nUpperCount!==0&&nLowerCount!==0&&nCharacterCount!==0){nScore+=5}
return nScore}
function runPassword(strPassword,strFieldID){var ctlBar=document.getElementById(strFieldID+"_bar");var ctlText=document.getElementById(strFieldID+"_text");var ctlTextInner=document.getElementById(strFieldID+"_text_inner");if(!ctlBar||!ctlText||!ctlTextInner){return}
if(strPassword.length>0){var nScore=checkPassword(strPassword);ctlBar.style.width=nScore+"%";var icon,strText,strColor;if(nScore>=90){icon='ok';strText=tr("Very Secure");strColor="#0ca908"}else if(nScore>=80){icon='ok';strText=tr("Secure");strColor="#0ca908"}else if(nScore>=70){icon='ok';strText=tr("Very Strong");strColor="#0ca908"}else if(nScore>=60){icon='ok';strText=tr("Strong");strColor="#0ca908"}else if(nScore>=40){icon='none';strText=tr("Average");strColor="#e3cb00"}else if(nScore>=25){icon='error';strText=tr("Weak");strColor="#ff0000"}else{icon='error';strText=tr("Very Weak");strColor="#ff0000"}
ctlBar.style.backgroundColor=strColor;$(ctlBar).show();if(icon==='none'){$(ctlText).children('span.icon').hide()}else if(icon==='ok'){$(ctlText).children('span.icon-ok').css('color',strColor).show();$(ctlText).children('span.icon-error').hide()}else if(icon==='error'){$(ctlText).children('span.icon-ok').hide();$(ctlText).children('span.icon-error').css('color',strColor).show()}
$(ctlTextInner).text(tr('Strength')+': '+strText).show()}else{$(ctlText).children().hide();$(ctlTextInner).hide();$(ctlBar).hide()}}
function countContain(strPassword,strCheck){var nCount=0,i;for(i=0;i<strPassword.length;i++){if(strCheck.indexOf(strPassword.charAt(i))>-1){nCount++}}
return nCount}
function checkPasswordsMatch(in1,in2,el){if($(in1).val().length){if($(in1).val()==$(in2).val()){$(el).children('#match').show();$(el).children('#nomatch').hide();return!0}else{$(el).children('#match').hide();$(el).children('#nomatch').show();return!1}}else{$(el).children().hide()}}
function pollsAddOption(){var newOption=$('<input />').attr('type','text').attr('name','options[]').attr('placeholder',tr('New option')).addClass('form-control');$('#tikiPollsOptions').append($('<div class="mb-2"></div>').append(newOption))}
function pollsToggleQuickOptions(){$('#tikiPollsQuickOptions').toggle(function(){var display=$('#tikiPollsQuickOptions').css('display');if(display==='none'){$('#tikiPollsOptionsButton').text(tr('Show Options'))}else{$('#tikiPollsOptionsButton').text(tr('Hide Options'))}})}
function hidedisabled(divid,value){if(value=='disabled'){document.getElementById(divid).style.display='none'}else{document.getElementById(divid).style.display='block'}}
function adjustThumbnails(){var i,j,h=0;var t=document.getElementById("thumbnails").childNodes;for(i=0;i<t.length;i++){if(t[i].className=="thumbnailcontener"){var t2=t[i].childNodes;for(j=0;j<t2.length;j++){if(t2[j].className=="thumbnail"){t2[j].style.height="100%";t2[j].style.overflow="visible"}}
if(t[i].offsetHeight>=h){h=t[i].offsetHeight}
t[i].style.height=h+"px"}}
for(i=0;i<t.length;i++){if(t[i].className=="thumbnailcontener"){if(t[i].offsetHeight<=h){t[i].style.height=h+"px"}else{break}}}}
function open_webdav(url){if(typeof ActiveXObject!='undefined'){var EditDocumentButton=new ActiveXObject("SharePoint.OpenDocuments.1");EditDocumentButton.EditDocument(url)}else{prompt(tr('URL to open this file with WebDAV'),url)}}
function ccsValueToInteger(str){var v=str.replace(/[^\d]*$/,"");if(v){v=parseInt(v,10)}
if(isNaN(v)){return 0}else{return v}}
function checkbox_list_check_all(form,list,checking){for(var checkbox in list){document.forms[form].elements[list[checkbox]].checked=checking}}
if(!window.syntaxHighlighter){window.syntaxHighlighter={get:function(){return null}}}
function tiki_encodeURI(rawstr){return encodeURI(rawstr)}
function tiki_decodeURI(encstr){return decodeURI(encstr.replace(/\+/g," "))}
function tiki_encodeURIComponent(rawstr){var str=encodeURIComponent(rawstr);return str}
function tiki_decodeURIComponent(encstr){var str=decodeURIComponent(encstr.replace(/\+/g," "));return str}
Date.prototype.toUnix=function(){return Math.round(this.getTime()/1000.0)};var UnixDate=function(unixDate){return new Date(unixDate*1000)};Date.parseUnix=function(date){date=new Date(Date.parse(date));return date.toUnix()};function adjustRating(element,data,vote){var $sibs,$help,$unvote;if(vote==="NULL"){$sibs=$("span > a",$(element).parent());$help=$(element).prev().prev();$unvote=$(element)}else{$sibs=$(element).siblings().addBack();$help=$(element).parent().next();$unvote=$help.nextAll("a")}
for(var i=0;i<$sibs.length;i++){var v=$($sibs[i]).data("vote"),icon="";if(v<=data[0].voteavg&&data[0].numvotes>0){if(data[0].result&&data[0].my_rate==v){icon='star-selected'}else{icon='star'}}else if(v-data[0].voteavg<=0.5&&data[0].numvotes>0){if(data[0].result&&data[0].my_rate==v){icon='star-half-selected'}else{icon='star-half-rating'}}else{if(data[0].result&&data[0].my_rate==v){icon='star-empty-selected'}else{icon='star-empty'}}
$($sibs[i]).find('.icon-'+icon).css('display','inline');$($sibs[i]).find('.icon').not('.icon-'+icon).css('display','none')}
var t=tr("Number of votes:")+" "+data[0].numvotes+", "+tr("Average:")+" "+data[0].voteavg;if(data[0].result){if(data[0].my_rate!="NULL"){t=t+", "+tr("Your rating:")+" "+data[0].my_rate;$unvote.show()}else{$unvote.hide()}}else{t=t+", "+tr("Vote not accepted")}
$help.text("("+data[0].numvotes+")").next().attr("title",t)}
function sendVote(element,itemId,fieldId,vote){$(element).parent().tikiModal(" ");$.getJSON($.service('tracker','vote',{i:itemId,f:fieldId,v:vote}),function(data){$(element).parent().tikiModal();adjustRating(element,data,vote)})}
function parseQuery(str){var arr,pair,key,val,out={},b1,b2,key2;if(str.substr(0,1)==="?"||str.substr(0,1)==="#"){str=str.substr(1)}
arr=str.split("&");for(var i=0;i<arr.length;i++){pair=arr[i].split("=");key=tiki_decodeURIComponent(pair[0]);val=pair.length>1?tiki_decodeURIComponent(pair[1]):"";if((b1=key.indexOf("["))>-1&&(b2=key.substr(b1+1).indexOf("]"))>-1){key2=key.substr(b1+1,b2);key=key.substr(0,b1);if(key2){if(typeof out[key]!="object"){out[key]={}}
out[key][key2]=val}else{if(typeof out[key]!="object"){out[key]=[]}
out[key].push(val)}}else{out[key]=val}}
return out}
document.addEventListener('DOMContentLoaded',function(){setTimeout(function(){var progressBar=document.getElementById("progressBar");if(progressBar){progressBar.remove()}},500)});
/* rank:50standard - minify:disabled - adding raw file. vendor_bundled/vendor/studio-42/elfinder/js/elfinder.min.js */
/*!
 * elFinder - file manager for web
 * Version 2.1.57 (2020-06-05)
 * http://elfinder.org
 * 
 * Copyright 2009-2020, Studio 42
 * Licensed under a 3-clauses BSD license
 */
!function(e,t){if("function"==typeof define&&define.amd)define(["jquery","jquery-ui"],t);else if("undefined"!=typeof exports){var n,i;try{n=require("jquery"),i=require("jquery-ui")}catch(a){}module.exports=t(n,i)}else t(e.jQuery,e.jQuery.ui,!0)}(this,function(e,t,n){n=n||!1;var i=function(t,n,a){var o,r,s,l,c,d,p,u=this,h=[],f=["button","tooltip"],m=e(t),g=e.extend(!0,{},e._data(m.get(0),"events")),v=e("<div></div>").append(m.contents()).attr("class",m.attr("class")||"").attr("style",m.attr("style")||""),b=m.attr("id")||m.attr("id","elfauto"+e(".elfinder").length).attr("id"),y="elfinder-"+b,w="mousedown."+y,x="keydown."+y,k="keypress."+y,C="keyup."+y,z=!1,T=!1,A=["enable","disable","load","open","reload","select","add","remove","change","dblclick","getfile","lockfiles","unlockfiles","selectfiles","unselectfiles","dragstart","dragstop","search","searchend","viewchange"],j="",O={path:"",url:"",tmbUrl:"",disabled:[],separator:"/",archives:[],extract:[],copyOverwrite:!0,uploadOverwrite:!0,uploadMaxSize:0,jpgQuality:100,tmbCrop:!1,tmbReqCustomData:!1,tmb:!1},S={},I={},M={},E={},F=[],D={},U={},P=[],q={},R=[],H=[],_=new u.command(u),N="auto",L=400,W=null,B="sounds/",$="",V=!1,K=e(document.createElement("audio")).hide().appendTo("body")[0],X=0,J="",G=null,Y=function(t){var n,i,a,o,r,s,l,c,d={},p={};u.api>=2.1?(u.commandMap=t.options.uiCmdMap&&Object.keys(t.options.uiCmdMap).length?t.options.uiCmdMap:{},J!==JSON.stringify(u.commandMap)&&(J=JSON.stringify(u.commandMap))):u.options.sync=0,t.init?(I={},E={}):(s=j,n="elfinder-subtree-loaded "+u.res("class","navexpand"),r=u.res("class","navcollapse"),i=Object.keys(I),a=function(e){if(!I[e])return!0;var t="directory"===I[e].mime,i=I[e].phash;!(!t||d[i]||!p[i]&&u.navHash2Elm(I[e].hash).is(":hidden")&&u.navHash2Elm(i).next(".elfinder-navbar-subtree").children().length>100)||!t&&i===j||q[e]?t&&(p[i]=!0):(t&&!d[i]&&(d[i]=!0,u.navHash2Elm(i).removeClass(n).next(".elfinder-navbar-subtree").empty()),ee(I[e]))},o=function(){i.length&&(G&&G._abort(),G=u.asyncJob(a,i,{interval:20,numPerOnce:100}).done(function(){var t=u.storage("hide")||{items:{}};Object.keys(M).length&&e.each(M,function(e){t.items[e]||delete M[e]})}))},u.trigger("filesgc").one("filesgc",function(){i=[]}),u.one("opendone",function(){s!==j&&(m.data("lazycnt")?u.one("lazydone",o):o())})),u.sorters={},j=t.cwd.hash,Q(t.files),I[j]?(c=u.diff([t.cwd],!0),c.changed.length&&(Q(c.changed,"change"),u.change({changed:c.changed}))):Q([t.cwd]),t.changed&&t.changed.length&&Q(t.changed,"change"),l=JSON.stringify(u.sorters),$!==l&&(u.trigger("sorterupdate"),$=l),u.lastDir(j),u.autoSync()},Q=function(t,n){var i,a,o,r,s,n=n||"files",l=["sizeInfo","encoding"],c={name:!0,perm:!0,date:!0,size:!0,kind:!0},d=!u.sorters._checked&&"files"===n,p=t.length,h=function(t){var n=t||{},i=[];e.each(u.sortRules,function(e){(c[e]||"undefined"!=typeof n[e]||"mode"===e&&"undefined"!=typeof n.perm)&&i.push(e)}),u.sorters=u.arrayFlip(i,!0),u.sorters._checked=!0},f={},m=u.storage("hide")||{},g=m.items||{};for(a=0;a<p;a++)if(i=Object.assign({},t[a]),s=!(m.show||!g[i.hash]),i.name&&i.hash&&i.mime){if(s||(d&&i.phash===j&&(h(i),d=!1),!i.phash||"add"!==n&&("change"!==n||I[i.hash]&&i.size===I[i.hash])||(r=u.parents(i.phash))&&e.each(r,function(){f[this]=!0})),I[i.hash]){for(o=0;o<l.length;o++)I[i.hash][l[o]]&&!i[l[o]]&&(i[l[o]]=I[i.hash][l[o]]);i.sizeInfo&&!i.size&&(i.size=i.sizeInfo.size),ee(I[i.hash],!0)}g[i.hash]&&(M[i.hash]=i),s?(p--,t.splice(a--,1)):(I[i.hash]=i,"directory"!==i.mime||E[i.hash]||(E[i.hash]={}),i.phash&&(E[i.phash]||(E[i.phash]={}),E[i.phash][i.hash]=!0))}e.each(Object.keys(f),function(){var e=I[this];e&&e.sizeInfo&&delete e.sizeInfo}),d&&h()},Z=function(t){var n,i=t.length,a={},o=function(t){var i=I[t];i&&("directory"===i.mime&&(a[t]&&delete u.roots[a[t]],e.each(u.leafRoots,function(n,i){var a,o;(a=e.inArray(t,i))!==-1&&(1===i.length?((o=Object.assign({},I[n]))&&o._realStats&&(e.each(o._realStats,function(e,t){o[e]=t}),Z(I[n]._realStats),u.change({changed:[o]})),delete u.leafRoots[n]):u.leafRoots[n].splice(a,1))}),u.searchStatus.state<2&&e.each(I,function(e,n){n.phash==t&&o(e)})),i.phash&&(n=u.parents(i.phash))&&e.each(n,function(){r[this]=!0}),ee(I[t]))},r={};for(e.each(u.roots,function(e,t){a[t]=e});i--;)o(t[i]);e.each(Object.keys(r),function(){var e=I[this];e&&e.sizeInfo&&delete e.sizeInfo})},ee=function(e,t){var n=e.hash,i=e.phash;i&&E[i]&&delete E[i][n],t||(E[n]&&delete E[n],u.optionsByHashes[n]&&delete u.optionsByHashes[n]),delete I[n]},te=0,ne=[],ie=null,ae=function(t){var n,i=t.keyCode,a=!(!t.ctrlKey&&!t.metaKey),o="mousedown"===t.type;if(!o&&(u.keyState.keyCode=i),u.keyState.ctrlKey=a,u.keyState.shiftKey=t.shiftKey,u.keyState.metaKey=t.metaKey,u.keyState.altKey=t.altKey,!o)return"keyup"===t.type?void(u.keyState.keyCode=null):void(z&&(e.each(U,function(e,n){n.type==t.type&&n.keyCode==i&&n.shiftKey==t.shiftKey&&n.ctrlKey==a&&n.altKey==t.altKey&&(t.preventDefault(),t.stopPropagation(),n.callback(t,u),u.debug("shortcut-exec",e+" : "+n.description))}),i!=e.ui.keyCode.TAB||e(t.target).is(":input")||t.preventDefault(),"keydown"===t.type&&i==e.ui.keyCode.ESCAPE&&(m.find(".ui-widget:visible").length||u.clipboard().length&&u.clipboard([]),e.ui.ddmanager&&(n=e.ui.ddmanager.current,n&&n.helper&&n.cancel()),u.toHide(m.find(".ui-widget.elfinder-button-menu.elfinder-frontmost:visible")),u.trigger("keydownEsc",t))))},oe=new Date,re=window.parent!==window,se=function(){var t,n;if(re)try{n=e("iframe",window.parent.document),n.length&&e.each(n,function(n,i){if(i.contentWindow===window)return t=e(i),!1})}catch(i){}return t}();n||(n={}),u.UA.Mobile&&e(window).on("orientationchange."+y,function(){var e=(screen&&screen.orientation&&screen.orientation.angle||window.orientation||0)+0;e===-90&&(e=270),u.UA.Angle=e,u.UA.Rotated=e%180!==0}).trigger("orientationchange."+y),n.bootCallback&&"function"==typeof n.bootCallback&&!function(){var e=a,t=n.bootCallback;a=function(n,i){e&&"function"==typeof e&&e.call(this,n,i),t.call(this,n,i)}}(),delete n.bootCallback,this.api=null,this.newAPI=!1,this.oldAPI=!1,this.netDrivers=[],this.baseUrl="",this.i18nBaseUrl="",this.cssloaded=!1,this.theme=null,this.mimesCanMakeEmpty={},this.bootCallback,this.reloadCallback,this.id=b,this.storage=function(){try{return"localStorage"in window&&null!==window.localStorage?(u.UA.Safari&&(window.localStorage.setItem("elfstoragecheck",1),window.localStorage.removeItem("elfstoragecheck")),u.localStorage):u.cookie}catch(e){return u.cookie}}(),this.pauseUnloadCheck=function(e,t){return"undefined"==typeof e?V:(V=!!e,void(e&&!t&&requestAnimationFrame(function(){V=!1})))},this.options=Object.assign({},this._options),n.uiOptions&&n.uiOptions.toolbar&&Array.isArray(n.uiOptions.toolbar)&&e.isPlainObject(n.uiOptions.toolbar[n.uiOptions.toolbar.length-1])&&(u.options.uiOptions.toolbarExtra=Object.assign(u.options.uiOptions.toolbarExtra||{},n.uiOptions.toolbar.pop())),function(){var t=function(n,i){e.isPlainObject(n)&&e.each(n,function(n,a){e.isPlainObject(a)?(i[n]||(i[n]={}),t(a,i[n])):i[n]=a})};t(n,u.options)}(),this.options.uiOptions.toolbar.push(this.options.uiOptions.toolbarExtra),delete this.options.uiOptions.toolbarExtra,this.toUnbindEvents={},this.bind=function(e,t,n){var i,a;if(t&&("function"==typeof t||"function"==typeof t.done))for(e=(""+e).toLowerCase().replace(/^\s+|\s+$/g,"").split(/\s+/),a=e.length,i=0;i<a;i++)void 0===D[e[i]]&&(D[e[i]]=[]),D[e[i]][n?"unshift":"push"](t);return this},this.unbind=function(t,n){var i,a,o,r;for(t=(""+t).toLowerCase().split(/\s+/),a=t.length,i=0;i<a;i++)(o=D[t[i]])&&(r=e.inArray(n,o),r>-1&&o.splice(r,1));return n=null,this},this.trigger=function(t,n,i){var a,o,r,s,l=t.toLowerCase(),c="object"==typeof n,d=D[l]||[],p=[];if(this.debug("event-"+l,n),c&&"undefined"!=typeof i||(i=!0),o=d.length){for(s=e.Event(l),n&&(n._getEvent=function(){return s}),i&&(s.data=n),a=0;a<o;a++)if(d[a])if(d[a].done)p.push(d[a].done);else{if(d[a].length&&!i){if("undefined"==typeof r)try{r=JSON.stringify(n)}catch(h){r=!1}s.data=r?JSON.parse(r):n}try{if(d[a].call(s,s,this)===!1||s.isDefaultPrevented()){this.debug("event-stoped",s.type);break}}catch(f){window.console&&window.console.log&&window.console.log(f)}}if(o=p.length)for(a=0;a<o;a++)try{if(p[a].call(s,s,this)===!1||s.isDefaultPrevented()){this.debug("event-stoped",s.type+"(done)");break}}catch(f){window.console&&window.console.log&&window.console.log(f)}this.toUnbindEvents[l]&&this.toUnbindEvents[l].length&&(e.each(this.toUnbindEvents[l],function(e,t){u.unbind(t.type,t.callback)}),delete this.toUnbindEvents[l])}return this},this.getListeners=function(e){return e?D[e.toLowerCase()]:D},this.baseUrl=function(){var t,n,i;return u.options.baseUrl?u.options.baseUrl:(i="",t=null,e("head > script").each(function(){if(this.src&&this.src.match(/js\/elfinder(?:-[a-z0-9_-]+)?\.(?:min|full)\.js$/i))return t=e(this),!1}),t&&(i=t.attr("src").replace(/js\/[^\/]+$/,""),i.match(/^(https?\/\/|\/)/)||(n=e("head > base[href]").attr("href"))&&(i=n.replace(/\/$/,"")+"/"+i)),""!==i?u.options.baseUrl=i:(u.options.baseUrl||(u.options.baseUrl="./"),i=u.options.baseUrl),i)}(),this.i18nBaseUrl=(this.options.i18nBaseUrl||this.baseUrl+"js/i18n").replace(/\/$/,"")+"/",this.options.maxErrorDialogs=Math.max(1,parseInt(this.options.maxErrorDialogs||5)),O.dispInlineRegex=this.options.dispInlineRegex,this.options.cssAutoLoad&&!function(){var t=u.baseUrl,n=e('head > link[href$="css/elfinder.min.css"],link[href$="css/elfinder.full.css"]:first').length,i=function(){m.data("cssautoloadHide")&&(m.data("cssautoloadHide").remove(),m.removeData("cssautoloadHide"))},a=function(){u.cssloaded||(i(),u.cssloaded=!0,u.trigger("cssloaded"))};n||(u.cssloaded=null),Array.isArray(u.options.cssAutoLoad)&&(u.options.themes["default"]?u.cssloaded===!0?u.loadCss(u.options.cssAutoLoad):u.bind("cssloaded",function(){u.loadCss(u.options.cssAutoLoad)}):(u.options.themes=Object.assign({"default":{name:"default",cssurls:u.options.cssAutoLoad}},u.options.themes),u.options.theme||(u.options.theme="default"))),null===u.cssloaded&&(m.addClass("elfinder").data("cssautoloadHide",e("<style>.elfinder{visibility:hidden;overflow:hidden}</style>")),e("head").append(m.data("cssautoloadHide")),u.options.themes["default"]||(u.options.themes=Object.assign({"default":{name:"default",cssurls:"css/theme.css",author:"elFinder Project",license:"3-clauses BSD"}},u.options.themes),u.options.theme||(u.options.theme="default")),requestAnimationFrame(function(){"hidden"===m.css("visibility")?u.loadCss([t+"css/elfinder.min.css"],{dfd:e.Deferred().done(function(){a()}).fail(function(){i(),u.cssloaded||(u.cssloaded=!1,u.bind("init",function(){u.cssloaded||u.error(["errRead","CSS (elfinder.min)"])}))})}):a()}))}(),function(){var e,t=u.options.themes,n=Object.keys(t||{});n.length&&(e=u.storage("theme")||u.options.theme,t[e]||(e=n[0]),u.cssloaded?u.changeTheme(e):u.bind("cssloaded",function(){u.changeTheme(e)}))}(),this.optionProperties={icon:void 0,csscls:void 0,tmbUrl:void 0,uiCmdMap:{},netkey:void 0,disabled:[]},re||this.options.enableAlways||2!==e("body").children().length||(this.options.enableAlways=!0),this.options.debug===!0?this.options.debug="all":Array.isArray(this.options.debug)?!function(){var t={};e.each(u.options.debug,function(){t[this]=!0}),u.options.debug=t}():this.options.debug=!1,this.noConflicts={},this.noConflict=function(){e.each(f,function(t,n){e.fn[n]&&"function"==typeof e.fn[n].noConflict&&(u.noConflicts[n]=e.fn[n].noConflict())})},this.noConflict(),this.isCORS=!1,function(){if("undefined"!=typeof u.options.cors&&null!==u.options.cors)u.isCORS=!!u.options.cors;else{var t,i=document.createElement("a"),a=window.location.protocol,o=function(e){return e=e&&":"!==e?e:a,"https:"===e?/\:443$/:/\:80$/},r=window.location.host.replace(o(a),"");i.href=n.url,n.urlUpload&&n.urlUpload!==n.url&&(t=document.createElement("a"),t.href=n.urlUpload),(r!==i.host.replace(o(i.protocol),"")||":"!==i.protocol&&""!==i.protocol&&a!==i.protocol||t&&(r!==t.host.replace(o(t.protocol),"")||":"!==t.protocol&&""!==t.protocol&&a!==t.protocol))&&(u.isCORS=!0)}u.isCORS&&(e.isPlainObject(u.options.customHeaders)||(u.options.customHeaders={}),e.isPlainObject(u.options.xhrFields)||(u.options.xhrFields={}),u.options.requestType="post",u.options.customHeaders["X-Requested-With"]="XMLHttpRequest",u.options.xhrFields.withCredentials=!0)}(),this.requestType=/^(get|post)$/i.test(this.options.requestType)?this.options.requestType.toLowerCase():"get",s=Math.max(parseInt(this.options.requestMaxConn),1),this.optsCustomData=e.isPlainObject(this.options.customData)?this.options.customData:{},this.customData=Object.assign({},this.optsCustomData),this.prevCustomData=null,this.customHeaders=e.isPlainObject(this.options.customHeaders)?this.options.customHeaders:{},this.xhrFields=e.isPlainObject(this.options.xhrFields)?this.options.xhrFields:{},this.replaceXhrSend=function(){p||(p=XMLHttpRequest.prototype.send),XMLHttpRequest.prototype.send=function(){var t=this;return u.customHeaders&&e.each(u.customHeaders,function(e){t.setRequestHeader(e,this)}),u.xhrFields&&e.each(u.xhrFields,function(e){e in t&&(t[e]=this)}),p.apply(this,arguments)}},this.restoreXhrSend=function(){p&&(XMLHttpRequest.prototype.send=p)},this.abortCmdsOnOpen=this.options.abortCmdsOnOpen||["tmb","parents"],this.navPrefix="nav"+(i.prototype.uniqueid?i.prototype.uniqueid:"")+"-",this.cwdPrefix=i.prototype.uniqueid?"cwd"+i.prototype.uniqueid+"-":"",++i.prototype.uniqueid,this.uploadURL=n.urlUpload||n.url,this.namespace=y,this.today=new Date(oe.getFullYear(),oe.getMonth(),oe.getDate()).getTime()/1e3,this.yesterday=this.today-86400,l=this.options.UTCDate?"UTC":"",this.getHours="get"+l+"Hours",this.getMinutes="get"+l+"Minutes",this.getSeconds="get"+l+"Seconds",this.getDate="get"+l+"Date",this.getDay="get"+l+"Day",this.getMonth="get"+l+"Month",this.getFullYear="get"+l+"FullYear",this.zIndex,this.searchStatus={state:0,query:"",target:"",mime:"",mixed:!1,ininc:!1},this.lang=this.storage("lang")||this.options.lang,"jp"===this.lang&&(this.lang=this.options.lang="ja"),this.viewType=this.storage("view")||this.options.defaultView||"icons",this.sortType=this.storage("sortType")||this.options.sortType||"name",this.sortOrder=this.storage("sortOrder")||this.options.sortOrder||"asc",this.sortStickFolders=this.storage("sortStickFolders"),null===this.sortStickFolders?this.sortStickFolders=!!this.options.sortStickFolders:this.sortStickFolders=!!this.sortStickFolders,this.sortAlsoTreeview=this.storage("sortAlsoTreeview"),null===this.sortAlsoTreeview||null===this.options.sortAlsoTreeview?this.sortAlsoTreeview=!!this.options.sortAlsoTreeview:this.sortAlsoTreeview=!!this.sortAlsoTreeview,this.sortRules=e.extend(!0,{},this._sortRules,this.options.sortRules),e.each(this.sortRules,function(e,t){"function"!=typeof t&&delete u.sortRules[e]}),this.compare=e.proxy(this.compare,this),this.notifyDelay=this.options.notifyDelay>0?parseInt(this.options.notifyDelay):500,this.draggingUiHelper=null,this.droppable={greedy:!0,tolerance:"pointer",accept:".elfinder-cwd-file-wrapper,.elfinder-navbar-dir,.elfinder-cwd-file,.elfinder-cwd-filename",hoverClass:this.res("class","adroppable"),classes:{"ui-droppable-hover":this.res("class","adroppable")},autoDisable:!0,drop:function(t,n){var i,a,o,r=e(this),s=e.grep(n.helper.data("files")||[],function(e){return!!e}),l=[],c=[],d=[],p=n.helper.hasClass("elfinder-drag-helper-plus"),h="class";if("undefined"==typeof t.button||n.helper.data("namespace")!==y||!u.insideWorkzone(t.pageX,t.pageY))return!1;for(a=r.hasClass(u.res(h,"cwdfile"))?u.cwdId2Hash(r.attr("id")):r.hasClass(u.res(h,"navdir"))?u.navId2Hash(r.attr("id")):j,i=s.length;i--;)o=s[i],o!=a&&I[o].phash!=a?l.push(o):(p&&o!==a&&I[a].write?c:d).push(o);return!d.length&&(n.helper.data("droped",!0),c.length&&(n.helper.hide(),u.exec("duplicate",c,{_userAction:!0})),void(l.length&&(n.helper.hide(),u.clipboard(l,!p),u.exec("paste",a,{_userAction:!0},a).always(function(){u.clipboard([]),u.trigger("unlockfiles",{files:s})}),u.trigger("drop",{files:s}))))}},this.enabled=function(){return z&&this.visible()},this.visible=function(){return m[0].elfinder&&m.is(":visible")},this.isRoot=function(e){return!(!e.isroot&&e.phash)},this.root=function(t,n){t=t||j;var i,a;if(!n&&(e.each(u.roots,function(e,n){if(0===t.indexOf(e))return i=n,!1}),i))return i;for(i=I[t];i&&i.phash&&(n||!i.isroot);)i=I[i.phash];if(i)return i.hash;for(;a in I&&I.hasOwnProperty(a);)if(i=I[a],"directory"===i.mime&&!i.phash&&i.read)return i.hash;return""},this.cwd=function(){return I[j]||{}},this.option=function(t,n){var i,a;return n=n||j,u.optionsByHashes[n]&&"undefined"!=typeof u.optionsByHashes[n][t]?u.optionsByHashes[n][t]:!u.hasVolOptions||j===n||(a=u.file(n))&&a.phash===j?S[t]||"":(i="",e.each(u.volOptions,function(e,a){if(0===n.indexOf(e))return i=a[t]||"",!1}),i)},this.getDisabledCmds=function(t,n){var i={hidden:!0};return Array.isArray(t)||(t=[t]),e.each(t,function(e,t){var n=u.option("disabledFlip",t);n&&Object.assign(i,n)}),n?i:Object.keys(i)},this.file=function(e,t){return e?I[e]||(t?M[e]:void 0):void 0},this.files=function(t){var n={};return t?E[t]?(e.each(E[t],function(e){I[e]?n[e]=I[e]:delete E[t][e]}),Object.assign({},n)):{}:Object.assign({},I)},this.parents=function(e){for(var t,n=[];e&&(t=this.file(e));)n.unshift(t.hash),e=t.phash;return n},this.path2array=function(e,t){for(var n,i=[];e;){if(!(n=I[e])||!n.hash){i=[];break}i.unshift(t&&n.i18?n.i18:n.name),e=n.isroot?null:n.phash}return i},this.path=function(t,n,i){var a=I[t]&&I[t].path?I[t].path:this.path2array(t,n).join(S.separator);if(i&&I[t]){i=Object.assign({notify:{type:"parents",cnt:1,hideCnt:!0}},i);var o,r=e.Deferred(),s=i.notify,l=!1,c=function(){u.request({data:{cmd:"parents",target:I[t].phash},notify:s,preventFail:!0}).done(d).fail(function(){r.reject()})},d=function(){u.one("parentsdone",function(){a=u.path(t,n),""===a&&l?(l=!1,c()):(s&&(clearTimeout(o),s.cnt=-parseInt(s.cnt||0),u.notify(s)),r.resolve(a))})};return a?r.resolve(a):(u.ui.tree?(s&&(o=setTimeout(function(){u.notify(s)},u.notifyDelay)),l=!0,d(!0)):c(),r)}return a},this.url=function(t,n){var i,a=I[t],o=n||{},r=o.async||!1,s=o.temporary||!1,l=o.onetime&&u.option("onetimeUrl",t)||!1,c=o.absurl||!1,d=r||l?e.Deferred():null,p=function(e){return e&&c&&(e=u.convAbsUrl(e)),e},h=function(n){if(n)return p(n);if(a.url)return p(a.url);if("undefined"==typeof i&&(i=f()),i)return p(i+e.map(u.path2array(t),function(e){return encodeURIComponent(e)}).slice(1).join("/"));var o=Object.assign({},u.customData,{cmd:"file",target:a.hash});return u.oldAPI&&(o.cmd="open",o.current=a.phash),p(u.options.url+(u.options.url.indexOf("?")===-1?"?":"&")+e.param(o,!0))},f=function(){return u.option("url",!u.isRoot(a)&&a.phash||a.hash)};if(!a||!a.read)return r?d.resolve(""):"";if(!l||a.url&&"1"!=a.url||(i=f()))if("1"==a.url||s&&!a.url&&!(i=f()))this.request({data:{cmd:"url",target:t,options:{temporary:s?1:0}},preventDefault:!0,options:{async:r},notify:r?{type:s?"file":"url",cnt:1,hideCnt:!0}:{},progressBar:o.progressBar}).done(function(e){a.url=e.url||""}).fail(function(){a.url=""}).always(function(){var e;return a.url&&s&&(e=a.url,a.url="1"),r?void d.resolve(h(e)):h(e)});else{if(!r)return h();d.resolve(h())}else r=!0,this.request({data:{cmd:"url",target:t,options:{onetime:1}},preventDefault:!0,options:{async:r},notify:{type:"file",cnt:1,hideCnt:!0},progressBar:o.progressBar}).done(function(e){d.resolve(p(e.url||""))}).fail(function(){d.resolve("")});return r?d:void 0},this.forExternalUrl=function(e,t){var n=u.option("onetimeUrl",e),i={async:!0,absurl:!0};return i[n?"onetime":"temporary"]=!0,u.url(e,Object.assign({},t,i))},this.openUrl=function(t,n,i,a){var o=I[t],r="",s=(a||{}).onetimeSize||5242880;return o&&o.read?n&&"sameorigin"!==n||(o.url?1!=o.url&&(r=o.url):S.url&&0===o.hash.indexOf(u.cwd().volumeid)&&(r=S.url+e.map(this.path2array(t),function(e){return encodeURIComponent(e)}).slice(1).join("/")),n&&!this.isSameOrigin(r)||!r)?i&&this.hasParrotHeaders()?(a?delete a.onetimeSize:a={},!a.onetime&&!a.temporary&&o.size>s&&(o.mime.match(/^video|audio/)?a.temporary=!0:a.onetime=!0),a.onetime||a.temporary?this.url(o.hash,Object.assign({async:!0},a)).done(function(e){i(e)}).fail(function(){i("")}):this.getContents(t,"blob",a).done(function(e){r=(window.URL||window.webkitURL).createObjectURL(e),i(r)}).fail(function(){i("")})):(r=this.options.url,r=r+(r.indexOf("?")===-1?"?":"&")+(this.oldAPI?"cmd=open&current="+o.phash:"cmd=file")+"&target="+o.hash+"&_t="+(o.ts||parseInt(+new Date/1e3)),n===!0&&(r+="&download=1"),e.each(this.customData,function(e,t){r+="&"+encodeURIComponent(e)+"="+encodeURIComponent(t)}),i?void i(r):r):(r+=(r.match(/\?/)?"&":"?")+"_".repeat((r.match(/[\?&](_+)t=/g)||["&t="]).sort().shift().match(/[\?&](_*)t=/)[1].length+1)+"t="+(o.ts||parseInt(+new Date/1e3)),i?void i(r):r):""},this.tmb=function(t){var n,i,a="elfinder-cwd-bgurl",o="",r={},s=0;return!(!e.isPlainObject(t)||(u.searchStatus.state&&0!==t.hash.indexOf(u.cwd().volumeid)?(n=u.option("tmbUrl",t.hash),i=u.option("tmbCrop",t.hash)):(n=S.tmbUrl,i=S.tmbCrop),i&&(a+=" elfinder-cwd-bgurl-crop"),"self"===n&&0===t.mime.indexOf("image/")?(o=u.openUrl(t.hash),a+=" elfinder-cwd-bgself"):(u.oldAPI||n)&&t&&t.tmb&&1!=t.tmb?o=n+t.tmb:u.newAPI&&t&&t.tmb&&1!=t.tmb&&(o=t.tmb),!o))&&("self"!==n&&(t.ts&&(r._t=t.ts),S.tmbReqCustomData&&Object.keys(this.customData).length&&(r=Object.assign(r,this.customData)),Object.keys(r).length&&(o+=o.match(/\?/)?"&":"?",e.each(r,function(e,t){o+=(0===s++?"":"&")+encodeURIComponent(e)+"="+encodeURIComponent(t)}))),{url:o,className:a})},this.selected=function(){return F.slice(0)},this.selectedFiles=function(){return e.map(F,function(e){return I[e]?Object.assign({},I[e]):null})},this.fileByName=function(e,t){var n;for(n in I)if(I.hasOwnProperty(n)&&I[n].phash==t&&I[n].name==e)return I[n]},this.validResponse=function(e,t){return t.error||this.rules[this.rules[e]?e:"defaults"](t)},this.returnBytes=function(e){var t;return isNaN(e)?(e||(e=""),e=e.replace(/b$/i,""),t=e.charAt(e.length-1).toLowerCase(),e=e.replace(/[tgmk]$/i,""),"t"==t?e=1024*e*1024*1024*1024:"g"==t?e=1024*e*1024*1024:"m"==t?e=1024*e*1024:"k"==t&&(e=1024*e),e=isNaN(e)?0:parseInt(e)):(e=parseInt(e),e<1&&(e=0)),e},this.request=function(t){var n,i,a,o,r=this,l=this.options,c=e.Deferred(),d=(+new Date).toString(16)+Math.floor(1e3*Math.random()).toString(16),p=Object.assign({},r.customData,{mimes:l.onlyMimes},t.data||t),u=p.cmd,h="binary"===(t.options||{}).dataType,f=!t.asNotOpen&&"open"===u,m=!(h||t.preventDefault||t.preventFail),g=!(h||t.preventDefault||t.preventDone),v=t.progressVal||20,b=null,y=!1,w=t.progressBar?{}:t.notify?Object.assign({progress:v*t.notify.cnt},t.notify):{},x=!!t.cancel,k=h||!!t.raw,C=t.syncOnFail,z=!!t.lazy,T=t.prepare,A=t.navigate,I=(t.options||{}).cache,M=Object.assign({url:l.url,async:!0,type:this.requestType,dataType:"json",cache:r.api>=2.1029,data:p,headers:this.customHeaders,xhrFields:this.xhrFields,progress:function(e){var n=e.loaded/e.total*100;if(b&&clearTimeout(b),t.progressBar)try{t.progressBar.width(n+"%")}catch(e){}else y&&w.type&&(n*=w.cnt,v<n&&(r.notify({type:w.type,progress:n-v,cnt:0,hideCnt:w.hideCnt}),v=n));if(t.progress)try{t.progress(e)}catch(e){}}},t.options||{}),E=function(t){t.warning&&r.error(t.warning),f?Y(t):r.updateCache(t),r.lazy(function(){t.removed&&t.removed.length&&r.remove(t),t.added&&t.added.length&&r.add(t),t.changed&&t.changed.length&&r.change(t)}).then(function(){return r.lazy(function(){r.trigger(u,t,!1)})}).then(function(){return r.lazy(function(){r.trigger(u+"done")})}).then(function(){t.toasts&&Array.isArray(t.toasts)&&e.each(t.toasts,function(){this.msg&&r.toast(this)}),t.sync&&r.sync()})},F=function(e,t){var n,i,a=r.options.debug;switch(t){case"abort":n=e.quiet?"":["errConnect","errAbort"];break;case"timeout":n=["errConnect","errTimeout"];break;case"parsererror":n=["errResponse","errDataNotJSON"],e.responseText&&(!j||a&&("all"===a||a["backend-error"]))&&n.push(e.responseText);break;default:if(e.responseText)try{i=JSON.parse(e.responseText),i&&i.error&&(n=i.error)}catch(o){}if(!n)if(403==e.status)n=["errConnect","errAccess","HTTP error "+e.status];else if(404==e.status)n=["errConnect","errNotFound","HTTP error "+e.status];else if(e.status>=500)n=["errResponse","errServerError","HTTP error "+e.status];else{if(414==e.status&&"get"===M.type)return M.type="post",r.abortXHR(e),void(c.xhr=e=r.transport.send(M).fail(n).done(D));n=e.quiet?"":["errConnect","HTTP error "+e.status]}}r.trigger(u+"done"),c.reject({error:n},e,t)},D=function(t){if(r.currentReqCmd=u,t.debug&&r.responseDebug(t),r.setCustomHeaderByXhr(i),k)return r.abortXHR(i),t&&t.debug&&r.debug("backend-debug",t),c.resolve(t);if(!t)return c.reject({error:["errResponse","errDataEmpty"]},i,t);if(!e.isPlainObject(t))return c.reject({error:["errResponse","errDataNotJSON"]},i,t);if(t.error)return f&&e.each(r.leafRoots,function(t,n){r.leafRoots[t]=e.grep(n,function(e){return e!==p.target})}),c.reject({error:t.error},i,t);var n=function(){var n,a=function(n){r.leafRoots[p.target]&&t[n]&&e.each(r.leafRoots[p.target],function(e,i){var a;(a=r.file(i))&&t[n].push(a)})},o=function(){r.textMimes={},e.each(r.res("mimes","text"),function(){r.textMimes[this.toLowerCase()]=!0})};return f?a("files"):"tree"===u&&a("tree"),t=r.normalize(t),r.validResponse(u,t)?(f&&(r.api||(r.api=t.api||1,"2.0"==r.api&&"undefined"!=typeof t.options.uploadMaxSize&&(r.api="2.1"),r.newAPI=r.api>=2,r.oldAPI=!r.newAPI),t.textMimes&&Array.isArray(t.textMimes)&&(r.resources.mimes.text=t.textMimes,o()),!r.textMimes&&o(),t.options&&(S=Object.assign({},O,t.options)),t.netDrivers&&(r.netDrivers=t.netDrivers),t.maxTargets&&(r.maxTargets=t.maxTargets),p.init&&(r.uplMaxSize=r.returnBytes(t.uplMaxSize),r.uplMaxFile=t.uplMaxFile?Math.min(parseInt(t.uplMaxFile),50):20)),"function"==typeof T&&T(t),A&&(n=A.target||"added",t[n]&&t[n].length&&r.one(u+"done",function(){var i=t[n],a=r.findCwdNodes(i),o=function(){var t=r.cwd().hash;return e.map(i,function(e){return e.phash&&t===e.phash?e.hash:null})},s=o(),l=function(t){var n,i,a,l=void 0,c=t.action?t.action.data:void 0;return(c||s.length)&&t.action&&(i=t.action.msg)&&(n=t.action.cmd)&&(!t.action.cwdNot||t.action.cwdNot!==r.cwd().hash)&&(a=t.action.done,c=t.action.data,l=e("<div></div>").append(e('<button type="button" class="ui-button ui-widget ui-state-default ui-corner-all elfinder-tabstop"><span class="ui-button-text">'+r.i18n(i)+"</span></button>").on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"==t.type)}).on("click",function(){r.exec(n,c||s,{_userAction:!0,_currentType:"toast",_currentNode:e(this)}),a&&r.one(n+"done",function(){"function"==typeof a?a():"select"===a&&r.trigger("selectfiles",{files:o()})})}))),delete t.action,t.extNode=l,t};A.toast||(A.toast={}),!A.noselect&&r.trigger("selectfiles",{files:r.searchStatus.state>1?e.map(i,function(e){return e.hash}):s}),a.length?(A.noscroll||(a.first().trigger("scrolltoview",{blink:!1}),r.resources.blink(a,"lookme")),e.isPlainObject(A.toast.incwd)&&r.toast(l(A.toast.incwd))):e.isPlainObject(A.toast.inbuffer)&&r.toast(l(A.toast.inbuffer))})),c.resolve(t),void(t.debug&&r.debug("backend-debug",t))):c.reject({error:t.norError||"errResponse"},i,t)};r.abortXHR(i),z?r.lazy(n):n()},U=function(e){i&&"pending"===i.state()&&(r.abortXHR(i,{quiet:!0,abort:!0}),(!e||"unload"!==e.type&&"destroy"!==e.type)&&r.autoSync())},P=function(e){if(r.trigger(u+"done"),"autosync"==e.type){if("stop"!=e.data.action)return}else if(!("unload"==e.type||"destroy"==e.type||"openxhrabort"==e.type||e.data.added&&e.data.added.length))return;U(e)},q=function(t){var n=function(){C=!1,c.reject()};if(t&&"cmd"===t)return u;if(f){if(ie&&"pending"===ie.state()){if(ie._target===p.target)return c.reject("openabort");ie.xhr?ie.xhr.queueAbort():ie.reject("openabort")}ie=c,ie._target=p.target}if(c.always(function(){delete M.headers["X-elFinderReqid"],f&&(ie=null)}).fail(function(t,n,i){var a,s;f&&"openabort"===t&&(t="",C=!1),a={cmd:u,err:t,xhr:n,rc:i},0===t&&ne.length&&(ne=e.grep(ne,function(e){return e("cmd")!==u})),r.trigger("requestError",a),a._getEvent&&a._getEvent().isDefaultPrevented()&&(m=!1,C=!1,t&&(t.error="")),U(),f&&(o=r.file(p.target),o&&o.volumeid&&r.isRoot(o)&&delete r.volumeExpires[o.volumeid]),r.trigger(u+"fail",i),s="object"==typeof t?t.error:t,s&&(m?r.error(s):r.debug("error",r.i18n(s))),C&&r.sync()}),!u)return C=!1,c.reject({error:"errCmdReq"});if(r.maxTargets&&p.targets&&p.targets.length>r.maxTargets)return C=!1,c.reject({error:["errMaxTargets",r.maxTargets]});if(g&&c.done(E),f){for(;a=R.pop();)a.queueAbort();if(j!==p.target)for(;a=H.pop();)a.queueAbort()}return e.inArray(u,(r.cmdsToAdd+" autosync").split(" "))!==-1&&("autosync"!==u&&(r.autoSync("stop"),c.always(function(){r.autoSync()})),r.trigger("openxhrabort")),delete M.preventFail,r.api>=2.1029&&(I?M.headers["X-elFinderReqid"]=d:Object.assign(M.data,{reqid:d})),c.syncOnFail=function(e){C=!!e},te++,c.xhr=i=r.transport.send(M).always(function(){M._xhr&&"undefined"!=typeof M._xhr.responseURL&&(i.responseURL=M._xhr.responseURL||""),--te,ne.length&&ne.shift()()}).fail(F).done(D),r.api>=2.1029&&(i._requestId=d),f||p.compare&&"info"===u?(i.queueAbort=n,R.unshift(i),p.compare&&r.bind(r.cmdsToAdd+" autosync openxhrabort",P),c.always(function(){var t=e.inArray(i,R);p.compare&&r.unbind(r.cmdsToAdd+" autosync openxhrabort",P),t!==-1&&R.splice(t,1)})):e.inArray(u,r.abortCmdsOnOpen)!==-1&&(i.queueAbort=n,H.unshift(i),c.always(function(){var t=e.inArray(i,H);t!==-1&&H.splice(t,1)})),r.bind("unload destroy",P),c.always(function(){r.unbind("unload destroy",P)}),c},_=function(){return w.type&&w.cnt&&(x&&(w.cancel=c,t.eachCancel&&(w.id=+new Date)),n=setTimeout(function(){b=setTimeout(N,1e3),r.notify(w),y=!0,c.always(function(){w.cnt=-(parseInt(w.cnt)||0),r.notify(w),y=!1})},r.notifyDelay),c.always(function(){clearTimeout(n)})),te<s?q():(f?ne.unshift(q):ne.push(q),c)},N=function(){var e;y&&b&&(e=1*w.cnt,b=null,r.notify({type:w.type,progress:e,cnt:0,hideCnt:w.hideCnt}),v+=e,v/w.cnt<80&&(b=setTimeout(N,500)))},L={opts:t,result:!0};return r.api||p.init?(r.trigger("request."+u,L,!0),L.result?"object"==typeof L.result&&L.result.promise?(L.result.done(_).fail(function(){r.trigger(u+"done"),c.reject()}),c):_():(r.trigger(u+"done"),c.reject())):(C=!1,c.reject())},this.cache=function(e,t){Array.isArray(e)||(e=[e]),Q(e,t)},this.updateCache=function(t){e.isPlainObject(t)&&(t.files&&t.files.length&&Q(t.files,"files"),t.tree&&t.tree.length&&Q(t.tree,"tree"),t.removed&&t.removed.length&&Z(t.removed),t.added&&t.added.length&&Q(t.added,"add"),t.changed&&t.changed.length&&Q(t.changed,"change"))},this.diff=function(t,n,i){var a={},o=[],r=[],s=[],l=null,c=function(e){for(var t=s.length;t--;)if(s[t].hash==e)return!0};return e.each(t,function(e,t){a[t.hash]=t}),i&&i.length&&(l={},e.each(i,function(){l[this]=!0})),e.each(I,function(e,t){a[e]||n&&t.phash!==n||r.push(e)}),e.each(a,function(t,n){var i,a=I[t],r={};a?(e.each(Object.keys(a),function(){r[this]=!0}),e.each(n,function(e){if(delete r[e],!(l&&l[e]||n[e]===a[e]))return s.push(n),r={},!1}),i=Object.keys(r).length,0!==i&&(l&&e.each(r,function(e){l[e]&&--i}),0!==i&&s.push(n))):o.push(n)}),e.each(r,function(t,n){var i=I[n],o=i.phash;o&&"directory"==i.mime&&e.inArray(o,r)===-1&&a[o]&&!c(o)&&s.push(a[o])}),{added:o,removed:r,changed:s}},this.sync=function(t,n){this.autoSync("stop");var i,a=this,o=function(){var i="",a=0,o=0;return t&&n&&e.each(I,function(e,n){n.phash&&n.phash===t&&(++a,o=Math.max(o,n.ts)),i=a+":"+o}),i},r=o(),s=e.Deferred().always(function(){!i&&a.trigger("sync")}),l=[this.request({data:{cmd:"open",reload:1,target:j,tree:!t&&this.ui.tree?1:0,compare:r},preventDefault:!0})],c=function(){for(var e,t=[],n=a.file(a.root(j)),i=n?n.volumeid:null,o=a.cwd().phash;o;)(e=a.file(o))?(0!==o.indexOf(i)&&(t.push({target:o,cmd:"tree"}),a.isRoot(e)||t.push({target:o,cmd:"parents"}),n=a.file(a.root(o)),i=n?n.volumeid:null),o=e.phash):o=null;return t};return!t&&a.api>=2&&(j!==this.root()&&l.push(this.request({
data:{cmd:"parents",target:j},preventDefault:!0})),e.each(c(),function(e,t){l.push(a.request({data:{cmd:t.cmd,target:t.target},preventDefault:!0}))})),e.when.apply(e,l).fail(function(t,o){i=o&&200!=o.status,n&&e.inArray("errOpen",t)===-1?s.reject(t&&0!=o.status?t:void 0):(s.reject(t),a.parseError(t)&&a.request({data:{cmd:"open",target:a.lastDir("")||a.root(),tree:1,init:1},notify:{type:"open",cnt:1,hideCnt:!0}}))}).done(function(e){var n,i,o;if(e.cwd.compare&&r===e.cwd.compare)return s.reject();if(n={tree:[]},i=arguments.length,i>1)for(o=1;o<i;o++)arguments[o].tree&&arguments[o].tree.length&&n.tree.push.apply(n.tree,arguments[o].tree);if(a.api<2.1&&(n.tree||(n.tree=[]),n.tree.push(e.cwd)),e=a.normalize(e),!a.validResponse("open",e))return s.reject(e.norError||"errResponse");if(n=a.normalize(n),!a.validResponse("tree",n))return s.reject(n.norError||"errResponse");var l=a.diff(e.files.concat(n&&n.tree?n.tree:[]),t);return l.added.push(e.cwd),a.updateCache(l),l.removed.length&&a.remove(l),l.added.length&&a.add(l),l.changed.length&&a.change(l),s.resolve(l)}).always(function(){a.autoSync()}),s},this.upload=function(e){return this.transport.upload(e,this)},this.shortcut=function(t){var n,i,a,o,r;if(this.options.allowShortcuts&&t.pattern&&e.isFunction(t.callback))for(n=t.pattern.toUpperCase().split(/\s+/),o=0;o<n.length;o++)i=n[o],r=i.split("+"),a=1==(a=r.pop()).length?a>0?a:a.charCodeAt(0):a>0?a:e.ui.keyCode[a],a&&!U[i]&&(U[i]={keyCode:a,altKey:e.inArray("ALT",r)!=-1,ctrlKey:e.inArray("CTRL",r)!=-1,shiftKey:e.inArray("SHIFT",r)!=-1,type:t.type||"keydown",callback:t.callback,description:t.description,pattern:i});return this},this.shortcuts=function(){var t=[];return e.each(U,function(e,n){t.push([n.pattern,u.i18n(n.description)])}),t},this.clipboard=function(t,n){var i=function(){return e.map(P,function(e){return e.hash})};return void 0!==t&&(P.length&&this.trigger("unlockfiles",{files:i()}),q={},P=e.map(t||[],function(e){var t=I[e];return t?(q[e]=!0,{hash:e,phash:t.phash,name:t.name,mime:t.mime,read:t.read,locked:t.locked,cut:!!n}):null}),this.trigger("changeclipboard",{clipboard:P.slice(0,P.length)}),n&&this.trigger("lockfiles",{files:i()})),P.slice(0,P.length)},this.isCommandEnabled=function(e,t){var n,i,a=u.cwd().volumeid||"";return!t&&u.searchStatus.state>1&&u.selected().length&&(t=u.selected()[0]),n=!t||a&&0===t.indexOf(a)?S.disabledFlip:u.option("disabledFlip",t),i=this._commands[e],!!i&&(i.alwaysEnabled||!n[e])},this.exec=function(t,n,i,a){var o,r;return!a&&this.commandMap[t]&&"hidden"!==this.commandMap[t]&&(t=this.commandMap[t]),"open"===t&&((this.searchStatus.state||this.searchStatus.ininc)&&this.trigger("searchend",{noupdate:!0}),this.autoSync("stop")),!a&&n&&(e.isArray(n)?n.length&&(a=n[0]):a=n),o=this._commands[t]&&this.isCommandEnabled(t,a)?this._commands[t].exec(n,i):e.Deferred().reject("errUnknownCmd"),r=typeof o,"object"===r&&o.promise||(u.debug("warning",'"cmd.exec()" should be returned "$.Deferred" but cmd "'+t+'" returned "'+r+'"'),o=e.Deferred().resolve()),this.trigger("exec",{dfrd:o,cmd:t,files:n,opts:i,dstHash:a}),o},this.dialog=function(t,n){var i=e("<div></div>").append(t).appendTo(m).elfinderdialog(n,u),a=i.closest(".ui-dialog"),o=function(){!i.data("draged")&&i.is(":visible")&&i.elfinderdialog("posInit")};return a.length&&(u.bind("resize",o),a.on("remove",function(){u.unbind("resize",o)})),i},this.toast=function(t){return e('<div class="ui-front"></div>').appendTo(this.ui.toast).elfindertoast(t||{},this)},this.getUI=function(t){return t?this.ui[t]||e():m},this.getCommand=function(e){return void 0===e?this._commands:this._commands[e]},this.resize=function(t,n){var i,a=function(){for(var e=m.outerHeight(!0)-m.innerHeight(),t=m;t.get(0)!==W.get(0)&&(t=t.parent(),e+=t.outerHeight(!0)-t.innerHeight(),t.parent().length););return e},o=!m.hasClass("ui-resizable"),r=m.data("resizeSize")||{w:0,h:0},s={};W&&W.data("resizeTm")&&clearTimeout(W.data("resizeTm")),"string"==typeof n&&(i=n.match(/^([0-9.]+)%$/))&&(W&&W.length||(W=e(window)),W.data("marginToMyNode")||W.data("marginToMyNode",a()),W.data("fitToBaseFunc")||W.data("fitToBaseFunc",function(e){var t=W.data("resizeTm");e.preventDefault(),e.stopPropagation(),t&&cancelAnimationFrame(t),m.hasClass("elfinder-fullscreen")||u.UA.Mobile&&W.data("rotated")===u.UA.Rotated||(W.data("rotated",u.UA.Rotated),W.data("resizeTm",requestAnimationFrame(function(){u.restoreSize()})))}),"undefined"==typeof W.data("rotated")&&W.data("rotated",u.UA.Rotated),n=W.height()*(i[1]/100)-W.data("marginToMyNode"),W.off("resize."+u.namespace,W.data("fitToBaseFunc")),o&&W.on("resize."+u.namespace,W.data("fitToBaseFunc"))),m.css({width:t,height:parseInt(n)}),s.w=Math.round(m.width()),s.h=Math.round(m.height()),m.data("resizeSize",s),s.w===r.w&&s.h===r.h||(m.trigger("resize"),this.trigger("resize",{width:s.w,height:s.h}))},this.restoreSize=function(){this.resize(N,L)},this.show=function(){m.show(),this.enable().trigger("show")},this.hide=function(){this.options.enableAlways&&(T=z,z=!1),this.disable(),this.trigger("hide"),m.hide()},this.lazy=function(t,n,i){var a=function(e){var t,n=m.data("lazycnt");e?(t=!m.data("lazyrepaint")&&i.repaint,n?m.data("lazycnt",++n):m.data("lazycnt",1).addClass("elfinder-processing"),t&&m.data("lazyrepaint",!0).css("display")):n&&n>1?m.data("lazycnt",--n):(t=m.data("lazyrepaint"),m.data("lazycnt",0).removeData("lazyrepaint").removeClass("elfinder-processing"),t&&m.css("display"),u.trigger("lazydone"))},o=e.Deferred(),r=function(){o.resolve(t.call(o)),a(!1)};return n=n||0,i=i||{},a(!0),n?setTimeout(r,n):requestAnimationFrame(r),o},this.destroy=function(){m&&m[0].elfinder&&(m.hasClass("elfinder-fullscreen")&&u.toggleFullscreen(m),this.options.syncStart=!1,this.autoSync("forcestop"),this.trigger("destroy").disable(),P=[],F=[],D={},U={},e(window).off("."+y),e(document).off("."+y),u.trigger=function(){},e(K).remove(),m.off().removeData().empty().append(v.contents()).attr("class",v.attr("class")).attr("style",v.attr("style")),delete m[0].elfinder,e.each(g,function(t,n){e.each(n,function(e,t){m.on(t.type+(t.namespace?"."+t.namespace:""),t.selector,t.handler)})}))},this.autoSync=function(t){var n;if(u.options.sync>=1e3){if(r&&(clearTimeout(r),r=null,u.trigger("autosync",{action:"stop"})),"stop"===t?++X:X=Math.max(0,--X),X||"forcestop"===t||!u.options.syncStart)return;n=function(t){var i;S.syncMinMs&&(t||r)&&(t&&u.trigger("autosync",{action:"start"}),i=Math.max(u.options.sync,S.syncMinMs),r&&clearTimeout(r),r=setTimeout(function(){var t,a=!0,o=j;S.syncChkAsTs&&I[o]&&(t=I[o].ts)?u.request({data:{cmd:"info",targets:[o],compare:t,reload:1},preventDefault:!0}).done(function(e){var i;a=!0,e.compare&&(i=e.compare,i==t&&(a=!1)),a?u.sync(o).always(function(){i&&(I[o].ts=i),n()}):n()}).fail(function(t,a){var o=u.parseError(t);o&&0!=a.status?(u.error(o),Array.isArray(o)&&e.inArray("errOpen",o)!==-1&&u.request({data:{cmd:"open",target:u.lastDir("")||u.root(),tree:1,init:1},notify:{type:"open",cnt:1,hideCnt:!0}})):r=setTimeout(function(){n()},i)}):u.sync(j,!0).always(function(){n()})},i))},n(!0)}},this.insideWorkzone=function(e,t,n){var i=this.getUI("workzone").data("rectangle");return n=n||1,!(e<i.left+n||e>i.left+i.width+n||t<i.top+n||t>i.top+i.height+n)},this.toFront=function(t){var n=m.children(".ui-front").removeClass("elfinder-frontmost"),i=n.last();n.css("z-index",""),e(t).addClass("ui-front elfinder-frontmost").css("z-index",i.css("z-index")+1)},this.toHide=function(t,n){var i,a=e(t);!n&&a.hide(),a.hasClass("elfinder-frontmost")&&(a.removeClass("elfinder-frontmost"),i=m.children(".ui-front:visible:not(.elfinder-frontmost)").last(),i.length&&requestAnimationFrame(function(){m.children(".elfinder-frontmost:visible").length||(u.toFront(i),i.trigger("frontmost"))}))},this.getMaximizeCss=function(){return{width:"100%",height:"100%",margin:0,top:0,left:0,display:"block",position:"fixed",zIndex:Math.max(u.zIndex?u.zIndex+1:0,1e3),maxWidth:"",maxHeight:""}},function(){re&&u.UA.Fullscreen&&(u.UA.Fullscreen=!1,se&&"undefined"!=typeof se.attr("allowfullscreen")&&(u.UA.Fullscreen=!0));var t,n,i,a,o="elfinder-fullscreen",r="elfinder-fullscreen-native",s=function(){var t=0,n=0;e.each(m.children(".ui-dialog,.ui-draggable"),function(i,a){var o=e(a),r=o.position();r.top<0&&(o.css("top",t),t+=20),r.left<0&&(o.css("left",n),n+=20)})},l=function(){var i=u.storage("useFullscreen");a=u.UA.Fullscreen&&(i?i>0:"screen"===u.options.commandsOptions.fullscreen.mode)?{fullElm:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null},exitFull:function(){return document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():void 0},toFull:function(e){return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():!!e.msRequestFullscreen&&e.msRequestFullscreen()}}:{fullElm:function(){var e;return m.hasClass(o)?m.get(0):(e=m.find("."+o),e.length?e.get(0):null)},exitFull:function(){var i;e(window).off("resize."+y,d),void 0!==n&&e("body").css("overflow",n),n=void 0,t&&(i=t.elm,c(i),e(i).trigger("resize",{fullscreen:"off"})),e(window).trigger("resize")},toFull:function(t){return n=e("body").css("overflow")||"",e("body").css("overflow","hidden"),e(t).css(u.getMaximizeCss()).addClass(o).trigger("resize",{fullscreen:"on"}),s(),e(window).on("resize."+y,d).trigger("resize"),!0}}},c=function(n){t&&t.elm==n&&(e(n).removeClass(o+" "+r).attr("style",t.style),t=null)},d=function(t){var n;t.target===window&&(i&&cancelAnimationFrame(i),i=requestAnimationFrame(function(){(n=a.fullElm())&&e(n).trigger("resize",{fullscreen:"on"})}))};l(),e(document).on("fullscreenchange."+y+" webkitfullscreenchange."+y+" mozfullscreenchange."+y+" MSFullscreenChange."+y,function(n){if(u.UA.Fullscreen){var l=a.fullElm(),p=e(window);i&&cancelAnimationFrame(i),null===l?(p.off("resize."+y,d),t&&(l=t.elm,c(l),e(l).trigger("resize",{fullscreen:"off"}))):(e(l).addClass(o+" "+r).attr("style","width:100%; height:100%; margin:0; padding:0;").trigger("resize",{fullscreen:"on"}),p.on("resize."+y,d),s()),p.trigger("resize")}}),u.toggleFullscreen=function(n,i){var o=e(n).get(0),r=null;if(r=a.fullElm()){if(r==o){if(i===!0)return r}else if(i===!1)return r;return a.exitFull(),null}return i===!1?null:(l(),t={elm:o,style:e(o).attr("style")},a.toFull(o)!==!1?o:(t=null,null))}}(),function(){var t,n="elfinder-maximized",i=function(e){if(e.target===window&&e.data&&e.data.elm){var n=e.data.elm;t&&cancelAnimationFrame(t),t=requestAnimationFrame(function(){n.trigger("resize",{maximize:"on"})})}},a=function(t){e(window).off("resize."+y,i),e("body").css("overflow",t.data("bodyOvf")),t.removeClass(n).attr("style",t.data("orgStyle")).removeData("bodyOvf").removeData("orgStyle"),t.trigger("resize",{maximize:"off"})},o=function(t){t.data("bodyOvf",e("body").css("overflow")||"").data("orgStyle",t.attr("style")).addClass(n).css(u.getMaximizeCss()),e("body").css("overflow","hidden"),e(window).on("resize."+y,{elm:t},i),t.trigger("resize",{maximize:"on"})};u.toggleMaximize=function(t,i){var r=e(t),s=r.hasClass(n);if(s){if(i===!0)return;a(r)}else{if(i===!1)return;o(r)}}}(),Object.assign(e.ui.keyCode,{F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,DIG0:48,DIG1:49,DIG2:50,DIG3:51,DIG4:52,DIG5:53,DIG6:54,DIG7:55,DIG8:56,DIG9:57,NUM0:96,NUM1:97,NUM2:98,NUM3:99,NUM4:100,NUM5:101,NUM6:102,NUM7:103,NUM8:104,NUM9:105,CONTEXTMENU:93,DOT:190}),this.dragUpload=!1,this.xhrUpload=("undefined"!=typeof XMLHttpRequestUpload||"undefined"!=typeof XMLHttpRequestEventTarget)&&"undefined"!=typeof File&&"undefined"!=typeof FormData,this.transport={},"object"==typeof this.options.transport&&(this.transport=this.options.transport,"function"==typeof this.transport.init&&this.transport.init(this)),"function"!=typeof this.transport.send&&(this.transport.send=function(t){return u.UA.IE||(t._xhr=new XMLHttpRequest,t.xhr=function(){return t.progress&&t._xhr.addEventListener("progress",t.progress),t._xhr}),e.ajax(t)}),"iframe"==this.transport.upload?this.transport.upload=e.proxy(this.uploads.iframe,this):"function"==typeof this.transport.upload?this.dragUpload=!!this.options.dragUploadAllow:this.xhrUpload&&this.options.dragUploadAllow?(this.transport.upload=e.proxy(this.uploads.xhr,this),this.dragUpload=!0):this.transport.upload=e.proxy(this.uploads.iframe,this),this.decodeRawString=function(e){var t=function(e){var t,n,i;for(t=0,n=e.length,i=[];t<n;t++)i.push(e.charCodeAt(t));return i},n=function(e){var n,i,a,o=[];for("string"==typeof e&&(e=t(e)),n=0,i=e.length;a=e[n],n<i;n++)a>=55296&&a<=56319?o.push((1023&a)+64<<10|1023&e[++n]):o.push(a);return o},i=function(e){var t,n,i,a,o=String.fromCharCode;for(t=0,n=e.length,a="";i=e[t],t<n;t++)a+=i<=127?o(i):i<=223&&i>=194?o((31&i)<<6|63&e[++t]):i<=239&&i>=224?o((15&i)<<12|(63&e[++t])<<6|63&e[++t]):i<=247&&i>=240?o(55296|((7&i)<<8|(63&e[++t])<<2|e[++t]>>>4&3)-64,56320|(15&e[t++])<<6|63&e[t]):o(65533);return a};return i(n(e))},this.getContents=function(t,n,i){var a,o,r=this,s=e.Deferred(),l=n||"arraybuffer";return s.fail(function(){o&&"pending"===o.state()&&o.reject()}),a=r.openUrl(t),r.isSameOrigin(a)||(a=r.openUrl(t,!0)),o=r.request(Object.assign({data:{cmd:"get"},options:{url:a,type:"get",cache:!0,dataType:"binary",responseType:l,processData:!1},notify:{type:"file",cnt:1,hideCnt:!0},cancel:!0},i||{})).fail(function(){s.reject()}).done(function(e){s.resolve(e)}),s},this.getBinaryByUrl=function(t,n,i){var a,o=this,r=e.Deferred();return r.fail(function(){a&&"pending"===a.state()&&a.reject()}),a=o.request(Object.assign({data:{cmd:"get"},options:Object.assign({type:"get",cache:!0,dataType:"binary",responseType:"blob",processData:!1},t)},i||{})).fail(function(){r.reject()}).done(function(e){n&&n(e),r.resolve(e)}),r},this.getMimetype=function(e,t){var n,i,a=t;return i=(e+"").match(/\.([^.]+)$/),i&&(n=i[1])&&(o||(o=u.arrayFlip(u.mimeTypes)),(a=o[n.toLowerCase()])||(a=t)),a},u.hashCheckers=[],function(t){var n={};window.Worker&&window.ArrayBuffer&&(t.options.cdns.sparkmd5&&(n.SparkMD5=!0,t.hashCheckers.push("md5")),t.options.cdns.jssha&&(n.jsSHA=!0,t.hashCheckers=t.hashCheckers.concat(["sha1","sha224","sha256","sha384","sha512","sha3-224","sha3-256","sha3-384","sha3-512","shake128","shake256"]))),t.getContentsHashes=function(i,a,o,r){var s,l=e.Deferred(),c=t.arrayFlip(a||["md5"],!0),d=[],p={},u=o?o:{shake128len:256,shake256len:512};return l.fail(function(){s&&s.reject()}),Object.keys(n).length?s=t.getContents(i,"arraybuffer",r).done(function(a){c.md5&&n.SparkMD5&&d.push(function(){var o=e.Deferred();try{var r=t.getWorker();o.fail(function(){r&&r.terminate()}),r.onmessage=function(e){if(r&&r.terminate(),e.data.hash){var n;p.md5=e.data.hash,(n=t.file(i))&&(n.md5=p.md5)}else e.data.error&&(p.md5=e.data.error);l.notify(p),o.resolve()},r.onerror=function(e){o.reject()},r.postMessage({scripts:[t.options.cdns.sparkmd5,t.getWorkerUrl("calcfilehash.js")],data:{type:"md5",bin:a}}),l.fail(function(){o.reject()})}catch(s){o.reject(),delete n.SparkMD5}return o}()),n.jsSHA&&e.each(["1","224","256","384","512","3-224","3-256","3-384","3-512","ke128","ke256"],function(o,r){c["sha"+r]&&d.push(function(){var o=e.Deferred();try{var s=t.getWorker();o.fail(function(){s&&s.terminate()}),s.onmessage=function(e){if(s&&s.terminate(),e.data.hash){var n;p["sha"+r]=e.data.hash,(n=t.file(i))&&(n["sha"+r]=p["sha"+r])}else e.data.error&&(p["sha"+r]=e.data.error);l.notify(p),o.resolve()},s.onerror=function(e){o.reject()},s.postMessage({scripts:[t.options.cdns.jssha,t.getWorkerUrl("calcfilehash.js")],data:{type:r,bin:a,hashOpts:u}}),l.fail(function(){o.reject()})}catch(c){o.reject(),delete n.jsSHA}return o}())}),d.length?e.when.apply(null,d).always(function(){l.resolve(p)}):l.reject()}).fail(function(){l.reject()}):l.reject(),l}}(this),this.parseError=function(t){var n=t;return e.isPlainObject(n)&&(n=n.error),n},this.error=function(){var e,t=arguments[0],n=arguments[1]||null;return 1==arguments.length&&"function"==typeof t?u.bind("error",t):(e=this.parseError(t),e!==!0&&e?u.trigger("error",{error:e,opts:n}):this)},e.each(A,function(t,n){u[n]=function(){var t=arguments[0];return 1==arguments.length&&"function"==typeof t?u.bind(n,t):u.trigger(n,e.isPlainObject(t)?t:{})}}),this.enable(function(){!z&&u.api&&u.visible()&&u.ui.overlay.is(":hidden")&&!m.children(".elfinder-dialog."+u.res("class","editing")+":visible").length&&(z=!0,document.activeElement&&document.activeElement.blur(),m.removeClass("elfinder-disabled"))}).disable(function(){T=z,z=!1,m.addClass("elfinder-disabled")}).open(function(){F=[]}).select(function(t){var n=0,i=[];F=e.grep(t.data.selected||t.data.value||[],function(e){return i.length||u.maxTargets&&++n>u.maxTargets?(i.push(e),!1):!!I[e]}),i.length&&(u.trigger("unselectfiles",{files:i,inselect:!0}),u.toast({mode:"warning",msg:u.i18n(["errMaxTargets",u.maxTargets])}))}).error(function(t){var n,i,a={cssClass:"elfinder-dialog-error",title:u.i18n("error"),resizable:!1,destroyOnClose:!0,buttons:{}},o=u.getUI(),r=o.children(".elfinder-dialog-error").length;r<u.options.maxErrorDialogs?(a.buttons[u.i18n(u.i18n("btnClose"))]=function(){e(this).elfinderdialog("close")},t.data.opts&&e.isPlainObject(t.data.opts)&&Object.assign(a,t.data.opts),u.dialog('<span class="elfinder-dialog-icon elfinder-dialog-icon-error"></span>'+u.i18n(t.data.error),a)):(n=o.children(".elfinder-dialog-error:last").children(".ui-dialog-content:first"),i=n.children(".elfinder-error-counter"),i.length?i.data("cnt",parseInt(i.data("cnt"))+1).html(u.i18n(["moreErrors",i.data("cnt")])):(i=e('<span class="elfinder-error-counter">'+u.i18n(["moreErrors",1])+"</span>").data("cnt",1),n.append("<br/>",i)))}).bind("tmb",function(t){e.each(t.data.images||[],function(e,t){I[e]&&(I[e].tmb=t)})}).bind("searchstart",function(e){Object.assign(u.searchStatus,e.data),u.searchStatus.state=1}).bind("search",function(e){u.searchStatus.state=2}).bind("searchend",function(){u.searchStatus.state=0,u.searchStatus.ininc=!1,u.searchStatus.mixed=!1}).bind("canMakeEmptyFile",function(t){var n=t.data,i={};n&&Array.isArray(n.mimes)&&(n.unshift||(i=u.mimesCanMakeEmpty),e.each(n.mimes,function(){i[this]||(i[this]=u.mimeTypes[this])}),n.unshift&&(u.mimesCanMakeEmpty=Object.assign(i,u.mimesCanMakeEmpty)))}).bind("themechange",function(){requestAnimationFrame(function(){u.trigger("uiresize")})}),!0===this.options.sound&&this.bind("playsound",function(t){var n=K.canPlayType&&K.canPlayType('audio/wav; codecs="1"'),i=t.data&&t.data.soundFile;n&&i&&""!=n&&"no"!=n&&e(K).html('<source src="'+B+i+'" type="audio/wav">')[0].play()}),e.each(this.options.handlers,function(e,t){u.bind(e,t)}),this.history=new this.history(this),this.roots={},this.leafRoots={},this.volumeExpires={},this._commands={},Array.isArray(this.options.commands)||(this.options.commands=[]),e.inArray("*",this.options.commands)!==-1&&(this.options.commands=Object.keys(this.commands)),this.commandMap={},this.volOptions={},this.hasVolOptions=!1,this.trashes={},this.optionsByHashes={},this.uiAutoHide=[],this.one("open",function(){u.uiAutoHide.length&&setTimeout(function(){u.trigger("uiautohide")},500)}),this.bind("uiautohide",function(){u.uiAutoHide.length&&u.uiAutoHide.shift()()}),this.options.width&&(N=this.options.width),this.options.height&&(L=this.options.height),this.options.heightBase&&(W=e(this.options.heightBase)),B=this.options.soundPath?this.options.soundPath.replace(/\/+$/,"")+"/":this.baseUrl+B,this.options.parrotHeaders&&Array.isArray(this.options.parrotHeaders)&&this.options.parrotHeaders.length?(this.parrotHeaders=this.options.parrotHeaders,e.each(this.parrotHeaders,function(e,t){var n=u.sessionStorage("core-ph:"+t);n&&(u.customHeaders[t]=n)})):this.parrotHeaders=[],u.one("opendone",function(){var t;e(document).on("click."+y,function(t){z&&!u.options.enableAlways&&!e(t.target).closest(m).length&&u.disable()}).on(x+" "+k+" "+C+" "+w,ae),u.options.useBrowserHistory&&e(window).on("popstate."+y,function(t){var n,i,a=t.originalEvent.state||{},o=!!a.thash,r=m.find(".elfinder-frontmost:visible"),s=m.find(".elfinder-navbar-dir,.elfinder-cwd-filename").find("input,textarea");o||(a={thash:u.cwd().hash},e("html,body").animate({scrollTop:m.offset().top})),r.length||s.length?(history.pushState(a,null,location.pathname+location.search+"#elf_"+a.thash),r.length?r.hasClass(u.res("class","preventback"))||(r.hasClass("elfinder-contextmenu")?e(document).trigger(e.Event("keydown",{keyCode:e.ui.keyCode.ESCAPE,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1})):r.hasClass("elfinder-dialog")?r.elfinderdialog("close"):r.trigger("close")):s.trigger(e.Event("keydown",{keyCode:e.ui.keyCode.ESCAPE,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1}))):o?!e.isEmptyObject(u.files())&&u.request({data:{cmd:"open",target:a.thash,onhistory:1},notify:{type:"open",cnt:1,hideCnt:!0},syncOnFail:!0}):(n=function(){i.trigger("click")},u.one("open",n,!0),i=u.toast({msg:u.i18n("pressAgainToExit"),onHidden:function(){u.unbind("open",n),history.pushState(a,null,location.pathname+location.search+"#elf_"+a.thash)}}))}),e(window).on("resize."+y,function(e){e.target===this&&(t&&cancelAnimationFrame(t),t=requestAnimationFrame(function(){var e=m.data("resizeSize")||{w:0,h:0},t={w:Math.round(m.width()),h:Math.round(m.height())};m.data("resizeSize",t),t.w===e.w&&t.h===e.h||(m.trigger("resize"),u.trigger("resize",{width:t.w,height:t.h}))}))}).on("beforeunload."+y,function(t){var n,i;if(!u.pauseUnloadCheck()){if(m.is(":visible")&&(u.ui.notify.children().length&&e.inArray("hasNotifyDialog",u.options.windowCloseConfirm)!==-1?n=u.i18n("ntfsmth"):m.find("."+u.res("class","editing")).length&&e.inArray("editingFile",u.options.windowCloseConfirm)!==-1?n=u.i18n("editingFile"):(i=Object.keys(u.selected()).length)&&e.inArray("hasSelectedItem",u.options.windowCloseConfirm)!==-1?n=u.i18n("hasSelected",""+i):(i=Object.keys(u.clipboard()).length)&&e.inArray("hasClipboardData",u.options.windowCloseConfirm)!==-1&&(n=u.i18n("hasClipboard",""+i)),n))return t.returnValue=n,n;u.trigger("unload")}}),e(window).on("message."+y,function(e){var t,n,i=e.originalEvent||null;if(i&&(0===u.convAbsUrl(u.options.url).indexOf(i.origin)||0===u.convAbsUrl(u.uploadURL).indexOf(i.origin)))try{t=JSON.parse(i.data),n=t.data||null,n&&(n.error?(t.bind&&u.trigger(t.bind+"fail",n),u.error(n.error)):(n.warning&&u.error(n.warning),u.updateCache(n),n.removed&&n.removed.length&&u.remove(n),n.added&&n.added.length&&u.add(n),n.changed&&n.changed.length&&u.change(n),t.bind&&(u.trigger(t.bind,n),u.trigger(t.bind+"done")),n.sync&&u.sync()))}catch(e){u.sync()}}),u.options.enableAlways?(e(window).on("focus."+y,function(e){e.target===this&&u.enable()}),re&&e(window.top).on("focus."+y,function(){!u.enable()||se&&!se.is(":visible")||requestAnimationFrame(function(){e(window).trigger("focus")})})):re&&e(window).on("blur."+y,function(e){z&&e.target===this&&u.disable()}),re&&m.on("click",function(t){e(window).trigger("focus")}),u.options.enableByMouseOver&&m.on("mouseenter touchstart",function(t){re&&e(window).trigger("focus"),!u.enabled()&&u.enable()}),e(window).on("visibilitychange."+y,function(e){var t=document.hidden||document.webkitHidden||document.msHidden;u.options.syncStart&&u.autoSync(t?"stop":void 0)})}),m[0].elfinder=this,h.push(function(){var t=u.lang,n=u.i18nBaseUrl+"elfinder."+t+".js",i=e.Deferred().done(function(){u.i18[t]&&(u.lang=t),u.trigger("i18load"),c="en"===u.lang?u.i18.en:e.extend(!0,{},u.i18.en,u.i18[u.lang])});return u.i18[t]?i.resolve():(u.lang="en",u.hasRequire?require([n],function(){i.resolve()},function(){i.resolve()}):u.loadScript([n],function(){i.resolve()},{loadType:"tag",error:function(){i.resolve()}})),i}()),d=function(){var t;return u.messages=c.messages,e.fn.selectable&&e.fn.draggable&&e.fn.droppable&&e.fn.resizable&&e.fn.button&&e.fn.slider?m.length?u.options.url?(t=Object.assign({name:u.i18n("name"),perm:u.i18n("perms"),date:u.i18n("modify"),size:u.i18n("size"),kind:u.i18n("kind"),modestr:u.i18n("mode"),modeoct:u.i18n("mode"),modeboth:u.i18n("mode")},u.options.uiOptions.cwd.listView.columnsCustomName),u.getColumnName=function(e){return t[e]||u.i18n(e)},u.direction=c.direction,u.dateFormat=u.options.dateFormat||c.dateFormat,u.fancyFormat=u.options.fancyDateFormat||c.fancyDateFormat,u.nonameDateFormat=(u.options.nonameDateFormat||c.nonameDateFormat).replace(/[\/\\]/g,"_"),u.cssClass="ui-helper-reset ui-helper-clearfix ui-widget ui-widget-content ui-corner-all elfinder elfinder-"+("rtl"==u.direction?"rtl":"ltr")+(u.UA.Touch?" elfinder-touch"+(u.options.resizable?" touch-punch":""):"")+(u.UA.Mobile?" elfinder-mobile":"")+(u.UA.iOS?" elfinder-ios":"")+" "+u.options.cssClass,m.addClass(u.cssClass).on(w,function(){!z&&u.enable()}),function(){var t,n,i,a,o,r=x+"draggable keyup."+y+"draggable";u.draggable={appendTo:m,addClasses:!1,distance:4,revert:!0,refreshPositions:!1,cursor:"crosshair",cursorAt:{left:50,top:47},scroll:!1,start:function(r,s){var l,c,d=s.helper,p=e.grep(d.data("files")||[],function(e){return!!e&&(q[e]=!0,!0)}),h=!1;for(o=m.attr("style"),m.width(m.width()).height(m.height()),t="ltr"===u.direction,n=u.getUI("workzone").data("rectangle"),i=n.top+n.height,a=i-u.getUI("navdock").outerHeight(!0),u.draggingUiHelper=d,l=p.length;l--;)if(c=p[l],I[c].locked){h=!0,d.data("locked",!0);break}!h&&u.trigger("lockfiles",{files:p}),d.data("autoScrTm",setInterval(function(){d.data("autoScr")&&u.autoScroll[d.data("autoScr")](d.data("autoScrVal"))},50))},drag:function(o,r){var s,l,c,d=r.helper;((l=n.top>o.pageY)||a<o.pageY)&&(s=n.cwdEdge>o.pageX?(t?"navbar":"cwd")+(l?"Up":"Down"):(t?"cwd":"navbar")+(l?"Up":"Down"),l||("cwd"===s.substr(0,3)?i<o.pageY?c=i:s=null:c=a),s&&(d.data("autoScr",s),d.data("autoScrVal",Math.pow(l?n.top-o.pageY:o.pageY-c,1.3)))),s||d.data("autoScr")&&d.data("refreshPositions",1).data("autoScr",null),d.data("refreshPositions")&&e(this).elfUiWidgetInstance("draggable")&&(d.data("refreshPositions")>0?(e(this).draggable("option",{refreshPositions:!0,elfRefresh:!0}),d.data("refreshPositions",-1)):(e(this).draggable("option",{refreshPositions:!1,elfRefresh:!1}),d.data("refreshPositions",null)))},stop:function(t,n){var i,a=n.helper;e(document).off(r),e(this).elfUiWidgetInstance("draggable")&&e(this).draggable("option",{refreshPositions:!1}),u.draggingUiHelper=null,u.trigger("focus").trigger("dragstop"),a.data("droped")||(i=e.grep(a.data("files")||[],function(e){return!!e}),u.trigger("unlockfiles",{files:i}),u.trigger("selectfiles",{files:u.selected()})),u.enable(),m.attr("style",o),a.data("autoScrTm")&&clearInterval(a.data("autoScrTm"))},helper:function(t,n){var i,a,o,s=this.id?e(this):e(this).parents("[id]:first"),l=e('<div class="elfinder-drag-helper"><span class="elfinder-drag-helper-icon-status"></span></div>'),c=function(t){var n,i=t.mime,a=u.tmb(t);return n='<div class="elfinder-cwd-icon elfinder-cwd-icon-drag '+u.mime2class(i)+' ui-corner-all"></div>',a?n=e(n).addClass(a.className).css("background-image","url('"+a.url+"')").get(0).outerHTML:t.icon&&(n=e(n).css(u.getIconStyle(t,!0)).get(0).outerHTML),t.csscls&&(n='<div class="'+t.csscls+'">'+n+"</div>"),n};return u.draggingUiHelper&&u.draggingUiHelper.stop(!0,!0),u.trigger("dragstart",{target:s[0],originalEvent:t},!0),i=s.hasClass(u.res("class","cwdfile"))?u.selected():[u.navId2Hash(s.attr("id"))],l.append(c(I[i[0]])).data("files",i).data("locked",!1).data("droped",!1).data("namespace",y).data("dropover",0),(a=i.length)>1&&l.append(c(I[i[a-1]])+'<span class="elfinder-drag-num">'+a+"</span>"),e(document).on(r,function(e){var t=e.shiftKey||e.ctrlKey||e.metaKey;o!==t&&(o=t,l.is(":visible")&&l.data("dropover")&&!l.data("droped")&&(l.toggleClass("elfinder-drag-helper-plus",!!l.data("locked")||o),u.trigger(o?"unlockfiles":"lockfiles",{files:i,helper:l})))}),l}}}(),u.commands.getfile&&("function"==typeof u.options.getFileCallback?(u.bind("dblclick",function(e){e.preventDefault(),u.exec("getfile").fail(function(){u.exec("open",e.data&&e.data.file?[e.data.file]:void 0)})}),u.shortcut({pattern:"enter",description:u.i18n("cmdgetfile"),callback:function(){u.exec("getfile").fail(function(){u.exec("mac"==u.OS?"rename":"open")})}}).shortcut({pattern:"ctrl+enter",description:u.i18n("mac"==u.OS?"cmdrename":"cmdopen"),callback:function(){u.exec("mac"==u.OS?"rename":"open")}})):u.options.getFileCallback=null),e.each(u.commands,function(t,n){var i,a,o=Object.assign({},n.prototype);if(e.isFunction(n)&&!u._commands[t]&&(n.prototype.forceLoad||e.inArray(t,u.options.commands)!==-1)){if(i=n.prototype.extendsCmd||""){if(!e.isFunction(u.commands[i]))return!0;n.prototype=Object.assign({},_,new u.commands[i],n.prototype)}else n.prototype=Object.assign({},_,n.prototype);u._commands[t]=new n,n.prototype=o,a=u.options.commandsOptions[t]||{},i&&u.options.commandsOptions[i]&&(a=e.extend(!0,{},u.options.commandsOptions[i],a)),u._commands[t].setup(t,a),u._commands[t].linkedCmds.length&&e.each(u._commands[t].linkedCmds,function(t,n){var i=u.commands[n];e.isFunction(i)&&!u._commands[n]&&(i.prototype=_,u._commands[n]=new i,u._commands[n].setup(n,u.options.commandsOptions[n]||{}))})}}),u.ui={workzone:e("<div></div>").appendTo(m).elfinderworkzone(u),navbar:e("<div></div>").appendTo(m).elfindernavbar(u,u.options.uiOptions.navbar||{}),navdock:e("<div></div>").appendTo(m).elfindernavdock(u,u.options.uiOptions.navdock||{}),contextmenu:e("<div></div>").appendTo(m).elfindercontextmenu(u),overlay:e("<div></div>").appendTo(m).elfinderoverlay({show:function(){u.disable()},hide:function(){T&&u.enable()}}),cwd:e("<div></div>").appendTo(m).elfindercwd(u,u.options.uiOptions.cwd||{}),notify:u.dialog("",{cssClass:"elfinder-dialog-notify"+(u.options.notifyDialog.canClose?"":" elfinder-titlebar-button-hide"),position:u.options.notifyDialog.position,absolute:!0,resizable:!1,autoOpen:!1,allowMinimize:!0,closeOnEscape:!!u.options.notifyDialog.canClose,title:"&nbsp;",width:u.options.notifyDialog.width?parseInt(u.options.notifyDialog.width):null,minHeight:null,minimize:function(){u.ui.notify.trigger("minimize")}}),statusbar:e('<div class="ui-widget-header ui-helper-clearfix ui-corner-bottom elfinder-statusbar"></div>').hide().appendTo(m),toast:e('<div class="elfinder-toast"></div>').appendTo(m),bottomtray:e('<div class="elfinder-bottomtray">').appendTo(m),progressbar:e('<div class="elfinder-ui-progressbar">').appendTo(m)},u.trigger("uiready"),e.each(u.options.ui||[],function(t,n){var i="elfinder"+n,a=u.options.uiOptions[n]||{};!u.ui[n]&&e.fn[i]&&(u.ui[n]=e("<"+(a.tag||"div")+"/>").appendTo(m),u.ui[n][i](u,a))}),u.ui.progressbar.appendTo(u.ui.workzone),u.ui.notify.prev(".ui-dialog-titlebar").append('<div class="elfinder-ui-progressbar"></div>'),u.resize(N,L),u.options.resizable&&(m.resizable({resize:function(e,t){u.resize(t.size.width,t.size.height)},handles:"se",minWidth:300,minHeight:200}),u.UA.Touch&&m.addClass("touch-punch")),function(){var e=u.getUI("navbar"),t=u.getUI("cwd").parent();u.autoScroll={navbarUp:function(t){e.scrollTop(Math.max(0,e.scrollTop()-t))},navbarDown:function(t){e.scrollTop(e.scrollTop()+t)},cwdUp:function(e){t.scrollTop(Math.max(0,t.scrollTop()-e))},cwdDown:function(e){t.scrollTop(t.scrollTop()+e)}}}(),u.UA.Touch&&!function(){var e,t,n,i,a,o,r,s,l,c=u.getUI("navbar"),d=u.getUI("toolbar"),p="touchmove.stopscroll",h=function(e){var n=e.originalEvent.touches||[{}],i=n[0].pageY||null;(!t||i<t)&&(e.preventDefault(),s&&clearTimeout(s))},f=function(e){e.preventDefault(),s&&clearTimeout(s)},g=function(){s=setTimeout(function(){m.off(p)},100)},v=50;c=c.children().length?c:null,d=d.length?d:null,m.on("touchstart touchmove touchend",function(s){if("touchend"===s.type)return e=!1,t=!1,void g();var b,y,w,x,k,C=s.originalEvent.touches||[{}],z=C[0].pageX||null,T=C[0].pageY||null,A="ltr"===u.direction;null===z||null===T||"touchstart"===s.type&&C.length>1||("touchstart"===s.type?(n=m.offset(),
i=m.width(),c&&(e=!1,c.is(":hidden")?(l||(l=Math.max(50,i/10)),(A?z-n.left:i+n.left-z)<l&&(e=z)):s.originalEvent._preventSwipeX||(o=c.width(),y=A?z<n.left+o:z>n.left+i-o,y?(l=Math.max(50,i/10),e=z):e=!1)),d&&(t=!1,s.originalEvent._preventSwipeY||(r=d.height(),a=n.top,T-a<(d.is(":hidden")?v:r+30)&&(t=T,m.on(p,d.is(":hidden")?f:h))))):(c&&e!==!1&&(b=(A?e>z:e<z)?"navhide":"navshow",w=Math.abs(e-z),("navhide"===b&&w>.6*o||w>("navhide"===b?o/3:45)&&("navshow"===b||(A?z<n.left+20:z>n.left+i-20)))&&(u.getUI("navbar").trigger(b,{handleW:l}),e=!1)),d&&t!==!1&&(x=d.offset().top,Math.abs(t-T)>Math.min(45,r/3)&&(k=t>T?"slideUp":"slideDown",("slideDown"===k||x+20>T)&&(d.is("slideDown"===k?":hidden":":visible")&&d.stop(!0,!0).trigger("toggle",{duration:100,handleH:v}),t=!1)))))})}(),u.dragUpload&&!function(){var t,n,i=function(t){return"TEXTAREA"!==t.target.nodeName&&"INPUT"!==t.target.nodeName&&0===e(t.target).closest("div.ui-dialog-content").length},a="native-drag-enter",o="native-drag-disable",r="class",s=u.res(r,"navdir"),l=(u.res(r,"droppable"),u.res(r,"adroppable"),u.res(r,"navarrow"),u.res(r,"adroppable")),c=u.getUI("workzone"),d="ltr"===u.direction,p=function(){n&&cancelAnimationFrame(n),n=null};m.on("dragenter",function(e){p(),i(e)&&(e.preventDefault(),e.stopPropagation(),t=c.data("rectangle"))}).on("dragleave",function(e){p(),i(e)&&(e.preventDefault(),e.stopPropagation())}).on("dragover",function(e){var a;i(e)?(e.preventDefault(),e.stopPropagation(),e.originalEvent.dataTransfer.dropEffect="none",n||(n=requestAnimationFrame(function(){var i,o=t.top+t.height,r=o-u.getUI("navdock").outerHeight(!0);((a=e.pageY<t.top)||e.pageY>r)&&(i=t.cwdEdge>e.pageX?(d?"navbar":"cwd")+(a?"Up":"Down"):(d?"cwd":"navbar")+(a?"Up":"Down"),a||"cwd"===i.substr(0,3)&&(o<e.pageY?r=o:i=""),i&&u.autoScroll[i](Math.pow(a?t.top-e.pageY:e.pageY-r,1.3))),n=null}))):p()}).on("drop",function(e){p(),i(e)&&(e.stopPropagation(),e.preventDefault())}),m.on("dragenter",".native-droppable",function(t){if(t.originalEvent.dataTransfer){var n,i=e(t.currentTarget),r=t.currentTarget.id||null,s=null;if(!r){s=u.cwd(),i.data(o,!1);try{e.each(t.originalEvent.dataTransfer.types,function(e,t){"elfinderfrom:"===t.substr(0,13)&&(n=t.substr(13).toLowerCase())})}catch(t){}}s&&(!s.write||n&&n===(window.location.href+s.hash).toLowerCase())?i.data(o,!0):(t.preventDefault(),t.stopPropagation(),i.data(a,!0),i.addClass(l))}}).on("dragleave",".native-droppable",function(t){if(t.originalEvent.dataTransfer){var n=e(t.currentTarget);t.preventDefault(),t.stopPropagation(),n.data(a)?n.data(a,!1):n.removeClass(l)}}).on("dragover",".native-droppable",function(t){if(t.originalEvent.dataTransfer){var n=e(t.currentTarget);t.preventDefault(),t.stopPropagation(),t.originalEvent.dataTransfer.dropEffect=n.data(o)?"none":"copy",n.data(a,!1)}}).on("drop",".native-droppable",function(t){if(t.originalEvent&&t.originalEvent.dataTransfer){var n,i=e(t.currentTarget);t.preventDefault(),t.stopPropagation(),i.removeClass(l),n=t.currentTarget.id?i.hasClass(s)?u.navId2Hash(t.currentTarget.id):u.cwdId2Hash(t.currentTarget.id):u.cwd().hash,t.originalEvent._target=n,u.exec("upload",{dropEvt:t.originalEvent,target:n},void 0,n)}})}(),u.cssloaded===!1&&(u.cssloaded=!0,u.trigger("cssloaded")),u.zIndexCalc(),void u.trigger("init").request({data:{cmd:"open",target:u.startDir(),init:1,tree:1},preventDone:!0,notify:{type:"open",cnt:1,hideCnt:!0},freeze:!0}).fail(function(){u.trigger("fail").disable().lastDir(""),D={},U={},e(document).add(m).off("."+y),u.trigger=function(){}}).done(function(t){var n=function(e){var t=u.file(u.trashes[e]);u.options.debug;t&&t.volumeid&&delete u.volOptions[t.volumeid].trashHash,u.trashes[e]=!1,u.debug("backend-error",'Trash hash "'+e+'" was not found or not writable.')},i={};u.options.rawStringDecoder&&u.registRawStringDecoder(u.options.rawStringDecoder),u.zIndexCalc(),u.load().debug("api",u.api),m.trigger("resize"),Y(t),u.trigger("open",t,!1),u.trigger("opendone"),re&&u.options.enableAlways&&e(window).trigger("focus"),e.each(u.trashes,function(e){var t=u.file(e);t?"directory"===t.mime&&t.write||n(e):i[e]=!0}),Object.keys(i).length&&u.request({data:{cmd:"info",targets:Object.keys(i)},preventDefault:!0}).done(function(t){t&&t.files&&e.each(t.files,function(e,t){"directory"===t.mime&&t.write&&delete i[t.hash]})}).always(function(){e.each(i,n)}),u[u.options.enableAlways?"enable":"disable"]()})):alert(u.i18n("errURL")):alert(u.i18n("errNode")):alert(u.i18n("errJqui"))},a&&"function"==typeof a&&(u.bootCallback=a,a.call(m.get(0),u,{dfrdsBeforeBootup:h})),e.when.apply(null,h).done(function(){d()}).fail(function(e){u.error(e)})};return("undefined"==typeof n||n)&&(window.elFinder=i),i.prototype={uniqueid:0,res:function(e,t){return this.resources[e]&&this.resources[e][t]},OS:navigator.userAgent.indexOf("Mac")!==-1?"mac":navigator.userAgent.indexOf("Win")!==-1?"win":"other",UA:function(){var e=!document.unqueID&&!window.opera&&!window.sidebar&&"localStorage"in window&&"WebkitAppearance"in document.documentElement.style,t=e&&window.chrome,n={ltIE6:"undefined"==typeof window.addEventListener&&"undefined"==typeof document.documentElement.style.maxHeight,ltIE7:"undefined"==typeof window.addEventListener&&"undefined"==typeof document.querySelectorAll,ltIE8:"undefined"==typeof window.addEventListener&&"undefined"==typeof document.getElementsByClassName,ltIE9:document.uniqueID&&document.documentMode<=9,ltIE10:document.uniqueID&&document.documentMode<=10,gtIE11:document.uniqueID&&document.documentMode>=11,IE:document.uniqueID,Firefox:window.sidebar,Opera:window.opera,Webkit:e,Chrome:t,Edge:!(!t||!window.msCredentials),Safari:e&&!window.chrome,Mobile:"undefined"!=typeof window.orientation,Touch:"undefined"!=typeof window.ontouchstart,iOS:navigator.platform.match(/^iP(?:[ao]d|hone)/),Mac:navigator.platform.match(/^Mac/),Fullscreen:"undefined"!=typeof(document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen),Angle:0,Rotated:!1,CSS:function(){var e,t=document.createElement("a").style,n=document.createElement("p").style;return e="position:sticky;position:-webkit-sticky;",e+="width:-webkit-max-content;width:-moz-max-content;width:-ms-max-content;width:max-content;",t.cssText=e,{positionSticky:t.position.indexOf("sticky")!==-1,widthMaxContent:t.width.indexOf("max-content")!==-1,flex:"undefined"!=typeof n.flex}}()};return n}(),cookieEnabled:function(){var e=!1,t="elftest=";return document.cookie=t+"1",e=2===document.cookie.split(t).length,document.cookie=t+";max-age=0",e}(),hasRequire:"function"==typeof define&&define.amd,currentReqCmd:"",keyState:{},i18:{en:{translator:"",language:"English",direction:"ltr",dateFormat:"d.m.Y H:i",fancyDateFormat:"$1 H:i",nonameDateFormat:"ymd-His",messages:{}},months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["msJan","msFeb","msMar","msApr","msMay","msJun","msJul","msAug","msSep","msOct","msNov","msDec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},kinds:{unknown:"Unknown",directory:"Folder",group:"Selects",symlink:"Alias","symlink-broken":"AliasBroken","application/x-empty":"TextPlain","application/postscript":"Postscript","application/vnd.ms-office":"MsOffice","application/msword":"MsWord","application/vnd.ms-word":"MsWord","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"MsWord","application/vnd.ms-word.document.macroEnabled.12":"MsWord","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"MsWord","application/vnd.ms-word.template.macroEnabled.12":"MsWord","application/vnd.ms-excel":"MsExcel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"MsExcel","application/vnd.ms-excel.sheet.macroEnabled.12":"MsExcel","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"MsExcel","application/vnd.ms-excel.template.macroEnabled.12":"MsExcel","application/vnd.ms-excel.sheet.binary.macroEnabled.12":"MsExcel","application/vnd.ms-excel.addin.macroEnabled.12":"MsExcel","application/vnd.ms-powerpoint":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.presentation":"MsPP","application/vnd.ms-powerpoint.presentation.macroEnabled.12":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"MsPP","application/vnd.ms-powerpoint.slideshow.macroEnabled.12":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.template":"MsPP","application/vnd.ms-powerpoint.template.macroEnabled.12":"MsPP","application/vnd.ms-powerpoint.addin.macroEnabled.12":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.slide":"MsPP","application/vnd.ms-powerpoint.slide.macroEnabled.12":"MsPP","application/pdf":"PDF","application/xml":"XML","application/vnd.oasis.opendocument.text":"OO","application/vnd.oasis.opendocument.text-template":"OO","application/vnd.oasis.opendocument.text-web":"OO","application/vnd.oasis.opendocument.text-master":"OO","application/vnd.oasis.opendocument.graphics":"OO","application/vnd.oasis.opendocument.graphics-template":"OO","application/vnd.oasis.opendocument.presentation":"OO","application/vnd.oasis.opendocument.presentation-template":"OO","application/vnd.oasis.opendocument.spreadsheet":"OO","application/vnd.oasis.opendocument.spreadsheet-template":"OO","application/vnd.oasis.opendocument.chart":"OO","application/vnd.oasis.opendocument.formula":"OO","application/vnd.oasis.opendocument.database":"OO","application/vnd.oasis.opendocument.image":"OO","application/vnd.openofficeorg.extension":"OO","application/x-shockwave-flash":"AppFlash","application/flash-video":"Flash video","application/x-bittorrent":"Torrent","application/javascript":"JS","application/rtf":"RTF","application/rtfd":"RTF","application/x-font-ttf":"TTF","application/x-font-otf":"OTF","application/x-rpm":"RPM","application/x-web-config":"TextPlain","application/xhtml+xml":"HTML","application/docbook+xml":"DOCBOOK","application/x-awk":"AWK","application/x-gzip":"GZIP","application/x-bzip2":"BZIP","application/x-xz":"XZ","application/zip":"ZIP","application/x-zip":"ZIP","application/x-rar":"RAR","application/x-tar":"TAR","application/x-7z-compressed":"7z","application/x-jar":"JAR","text/plain":"TextPlain","text/x-php":"PHP","text/html":"HTML","text/javascript":"JS","text/css":"CSS","text/rtf":"RTF","text/rtfd":"RTF","text/x-c":"C","text/x-csrc":"C","text/x-chdr":"CHeader","text/x-c++":"CPP","text/x-c++src":"CPP","text/x-c++hdr":"CPPHeader","text/x-shellscript":"Shell","application/x-csh":"Shell","text/x-python":"Python","text/x-java":"Java","text/x-java-source":"Java","text/x-ruby":"Ruby","text/x-perl":"Perl","text/x-sql":"SQL","text/xml":"XML","text/x-comma-separated-values":"CSV","text/x-markdown":"Markdown","image/x-ms-bmp":"BMP","image/jpeg":"JPEG","image/gif":"GIF","image/png":"PNG","image/tiff":"TIFF","image/x-targa":"TGA","image/vnd.adobe.photoshop":"PSD","image/xbm":"XBITMAP","image/pxm":"PXM","audio/mpeg":"AudioMPEG","audio/midi":"AudioMIDI","audio/ogg":"AudioOGG","audio/mp4":"AudioMPEG4","audio/x-m4a":"AudioMPEG4","audio/wav":"AudioWAV","audio/x-mp3-playlist":"AudioPlaylist","video/x-dv":"VideoDV","video/mp4":"VideoMPEG4","video/mpeg":"VideoMPEG","video/x-msvideo":"VideoAVI","video/quicktime":"VideoMOV","video/x-ms-wmv":"VideoWM","video/x-flv":"VideoFlash","video/x-matroska":"VideoMKV","video/ogg":"VideoOGG"},mimeTypes:{},rules:{defaults:function(e){return!(!e||e.added&&!Array.isArray(e.added)||e.removed&&!Array.isArray(e.removed)||e.changed&&!Array.isArray(e.changed))},open:function(t){return t&&t.cwd&&t.files&&e.isPlainObject(t.cwd)&&Array.isArray(t.files)},tree:function(e){return e&&e.tree&&Array.isArray(e.tree)},parents:function(e){return e&&e.tree&&Array.isArray(e.tree)},tmb:function(t){return t&&t.images&&(e.isPlainObject(t.images)||Array.isArray(t.images))},upload:function(t){return t&&(e.isPlainObject(t.added)||Array.isArray(t.added))},search:function(e){return e&&e.files&&Array.isArray(e.files)}},commands:{},cmdsToAdd:"archive duplicate extract mkdir mkfile paste rm upload",parseUploadData:function(t){var n,i=this;if(!e.trim(t))return{error:["errResponse","errDataEmpty"]};try{n=JSON.parse(t)}catch(a){return{error:["errResponse","errDataNotJSON"]}}return n=i.normalize(n),i.validResponse("upload",n)?(n.removed=e.merge(n.removed||[],e.map(n.added||[],function(e){return i.file(e.hash)?e.hash:null})),n):{error:n.norError||["errResponse"]}},iframeCnt:0,uploads:{xhrUploading:!1,failSyncTm:null,chunkfailReq:{},checkExists:function(t,n,i,a){var o,r=e.Deferred(),s=[],l={},c=function(){for(var e=t.length;--e>-1;)t[e]._remove=!0},d=function(){r.resolve(s,l)},p=function(){var r=[],p=[],u=n!==i.cwd().hash?i.path(n,!0)+i.option("separator",n):"",h=function(e){var n=e==p.length-1,o={cssClass:"elfinder-confirm-upload",title:i.i18n("cmdupload"),text:["errExists",u+p[e].name,"confirmRepl"],all:!n,accept:{label:"btnYes",callback:function(t){n||t?d():h(++e)}},reject:{label:"btnNo",callback:function(i){var a;if(i)for(a=p.length;e<a--;)t[p[a].i]._remove=!0;else t[p[e].i]._remove=!0;n||i?d():h(++e)}},cancel:{label:"btnCancel",callback:function(){c(),d()}},buttons:[{label:"btnBackup",cssClass:"elfinder-confirm-btn-backup",callback:function(t){var i;if(t)for(i=p.length;e<i--;)s.push(p[i].name);else s.push(p[e].name);n||t?d():h(++e)}}]};a||o.buttons.push({label:"btnRename"+(n?"":"All"),cssClass:"elfinder-confirm-btn-rename",callback:function(){s=null,d()}}),i.iframeCnt>0&&delete o.reject,i.confirm(o)};return i.file(n).read?(o=e.map(t,function(e,t){return!e.name||i.UA.iOS&&"image.jpg"===e.name?null:{i:t,name:e.name}}),void i.request({data:{cmd:"ls",target:n,intersect:e.map(o,function(e){return e.name})},notify:{type:"preupload",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(t){var a,s;t&&(t.error?c():i.options.overwriteUploadConfirm&&i.option("uploadOverwrite",n)&&t.list&&(Array.isArray(t.list)?r=t.list||[]:(a=[],r=e.map(t.list,function(e){return"string"==typeof e?e:(a=a.concat(e),!1)}),a.length&&(r=r.concat(a)),l=t.list),p=e.grep(o,function(t){return e.inArray(t.name,r)!==-1}),p.length&&r.length&&n==i.cwd().hash&&(s=e.map(i.files(n),function(e){return e.name}),e.grep(r,function(t){return e.inArray(t,s)===-1}).length&&i.sync()))),p.length>0?h(0):d()}).fail(function(e){c(),d(),e&&i.error(e)})):void d()};return i.api>=2.1&&"object"==typeof t[0]?p():d(),r},checkFile:function(t,n,i){if(t.checked||"files"==t.type)return t.files;if("data"==t.type){var a,o,r=e.Deferred(),s=e.Deferred(),l=[],c=[],d=0,p=[],u=!1,h=function(e){return Array.prototype.slice.call(e||[],0)},f=function(e){var t,i,a=n.options.folderUploadExclude[n.OS]||null,o=e.length,r=function(){--d<1&&"pending"===s.state()&&s.resolve()},m=function(e){a&&e.name.match(a)||(c.push(t.fullPath||""),l.push(e)),r()},i=function(e){var t=[],n=function(){e.readEntries(function(e){if(u||!e.length){for(var i=0;i<t.length;i++){if(u){s.reject();break}f([t[i]])}r()}else t=t.concat(h(e)),n()},r)};n()};d++;for(var g=0;g<o;g++){if(u){s.reject();break}t=e[g],t&&(t.isFile?(d++,t.file(m,r)):t.isDirectory&&n.api>=2.1&&(d++,p.push(t.fullPath),i(t.createReader())))}return r(),s};return a=e.map(t.files.items,function(e){return e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry()}),e.each(a,function(e,t){if(t.isDirectory)return o=!0,!1}),a.length>0?(n.uploads.checkExists(a,i,n,o).done(function(o,s){var d=[];n.options.overwriteUploadConfirm&&n.option("uploadOverwrite",i)&&(null===o&&(t.overwrite=0,o=[]),a=e.grep(a,function(t){var a,r,l,c;return t.isDirectory&&o.length&&(a=e.inArray(t.name,o),a!==-1&&(o.splice(a,1),r=n.uniqueName(t.name+n.options.backupSuffix,null,""),e.each(s,function(e,n){if(t.name==n)return l=e,!1}),l||(l=n.fileByName(t.name,i).hash),n.lockfiles({files:[l]}),c=n.request({data:{cmd:"rename",target:l,name:r},notify:{type:"rename",cnt:1}}).fail(function(){t._remove=!0,n.sync()}).always(function(){n.unlockfiles({files:[l]})}),d.push(c))),!t._remove})),e.when.apply(e,d).done(function(){var e,t,i=+new Date;a.length>0?(t=n.escape(a[0].name),a.length>1&&(t+=" ... "+a.length+n.i18n("items")),e=setTimeout(function(){n.notify({type:"readdir",id:i,cnt:1,hideCnt:!0,msg:n.i18n("ntfreaddir")+" ("+t+")",cancel:function(){u=!0}})},n.options.notifyDelay),f(a).done(function(){e&&clearTimeout(e),n.notify({type:"readdir",id:i,cnt:-1}),u?r.reject():r.resolve([l,c,o,s,p])}).fail(function(){r.reject()})):r.reject()})}),r.promise()):r.reject()}var m=[],g=[],v=t.files[0];if("html"==t.type){var b,y=e("<html></html>").append(e.parseHTML(v.replace(/ src=/gi," _elfsrc=")));e("img[_elfsrc]",y).each(function(){var n,i,a=e(this),o=a.closest("a");o&&o.attr("href")&&o.attr("href").match(/\.(?:jpe?g|gif|bmp|png)/i)&&(i=o.attr("href")),n=a.attr("_elfsrc"),n&&(i?(e.inArray(i,m)==-1&&m.push(i),e.inArray(n,g)==-1&&g.push(n)):e.inArray(n,m)==-1&&m.push(n)),1===m.length&&m[0].match(/^data:image\/png/)&&(t.clipdata=!0)}),b=e("a[href]",y),b.each(function(){var t,n,i=function(e){var t=document.createElement("a");return t.href=e,t};(t=e(this).text())&&(n=i(e(this).attr("href")),n.href&&n.href.match(/^(?:ht|f)tp/i)&&(1===b.length||!n.pathname.match(/(?:\.html?|\/[^\/.]*)$/i)||e.trim(t).match(/\.[a-z0-9-]{1,10}$/i))&&e.inArray(n.href,m)==-1&&e.inArray(n.href,g)==-1&&m.push(n.href))})}else{var w,x,k;for(w=/((?:ht|f)tps?:\/\/[-_.!~*\'()a-z0-9;\/?:\@&=+\$,%#\*\[\]]+)/gi;x=w.exec(v);)k=x[1].replace(/&amp;/g,"&"),e.inArray(k,m)==-1&&m.push(k)}return m},xhr:function(t,n){var i=n?n:this,a=i.getUI(),o=new XMLHttpRequest,r=null,s=null,l=null,c=t.checked,d=t.isDataType||"data"==t.type,p=t.target||i.cwd().hash,u=t.dropEvt||null,h=t.extraData||null,f=i.option("uploadMaxConn",p)!=-1,m=Math.min(5,Math.max(1,i.option("uploadMaxConn",p))),g=1e4,v=30,b=0,y=function(t){var n=e.Deferred();return t.promise?t.always(function(e){n.resolve(Array.isArray(e)&&e.length?d?e[0][0]:e[0]:{})}):n.resolve(t.length?d?t[0][0]:t[0]:{}),n},w=e.Deferred().fail(function(e){var t,a=i.parseError(e);"userabort"===a&&(t=!0,a=void 0),k&&(i.uploads.xhrUploading||t)?y(k).done(function(e){t||H(a,e),e._cid?i.uploads.chunkfailReq[e._cid]||(i.uploads.chunkfailReq[e._cid]=!0,setTimeout(function(){n.request({data:{cmd:"upload",target:p,chunk:e._chunk,cid:e._cid,upload:["chunkfail"],mimes:"chunkfail"},options:{type:"post",url:i.uploadURL},preventDefault:!0}).always(function(){delete i.uploads.chunkfailReq[e._chunk]})},1e3)):(i.uploads.failSyncTm&&clearTimeout(i.uploads.failSyncTm),i.uploads.failSyncTm=setTimeout(function(){i.sync(p)},1e3))}):H(a),!t&&i.sync(),i.uploads.xhrUploading=!1,k=null}).done(function(t){i.uploads.xhrUploading=!1,k=null,t&&(i.currentReqCmd="upload",t.warning&&H(t.warning),i.updateCache(t),t.removed&&t.removed.length&&i.remove(t),t.added&&t.added.length&&i.add(t),t.changed&&t.changed.length&&i.change(t),i.trigger("upload",t,!1),i.trigger("uploaddone"),t.toasts&&Array.isArray(t.toasts)&&e.each(t.toasts,function(){this.msg&&i.toast(this)}),t.sync&&i.sync(),t.debug&&(i.responseDebug(t),n.debug("backend-debug",t)))}).always(function(){i.abortXHR(o),a.off("uploadabort",D),e(window).off("unload",D),r&&clearTimeout(r),s&&clearTimeout(s),l&&clearTimeout(l),c&&!t.multiupload&&F()&&i.notify({type:"upload",cnt:-C,progress:0,size:0}),s&&M&&i.notify({type:"chunkmerge",cnt:-C}),B&&S.children(".elfinder-notify-chunkmerge").length&&i.notify({type:"chunkmerge",cnt:-1})}),x=new FormData,k=t.input?t.input.files:i.uploads.checkFile(t,i,p),C=t.checked&&d?k[0].length:k.length,z=!1,T=0,A=0,j=0,O=!1,S=i.ui.notify,I=!0,M=!1,E=!1,F=function(){return!O&&($=S.children(".elfinder-notify-upload")).length&&(O=!0),O},D=function(e,t){E=!0,i.abortXHR(o,{quiet:!0,abort:!0}),w.reject(t),F()&&i.notify({type:"upload",cnt:$.data("cnt")*-1,progress:0,size:0})},U=function(e,t){$.children(".elfinder-notify-cancel")[e?"show":"hide"](),I=e},P=function(e){return e||(e=j),setTimeout(function(){O=!0,i.notify({type:"upload",cnt:C,progress:T-A,size:e,cancel:function(){a.trigger("uploadabort","userabort")}}),$=S.children(".elfinder-notify-upload"),A=T,t.multiupload?I&&U(!0):U(I&&T<e)},i.options.notifyDelay)},q=function(){b++<=v?(F()&&A&&i.notify({type:"upload",cnt:0,progress:0,size:A}),i.abortXHR(o,{quiet:!0}),A=T=0,setTimeout(function(){var e;E||(o.open("POST",i.uploadURL,!0),i.api>=2.1029&&(e=(+new Date).toString(16)+Math.floor(1e3*Math.random()).toString(16),"function"==typeof x["delete"]&&x["delete"]("reqid"),x.append("reqid",e),o._requestId=e),o.send(x))},g)):a.trigger("uploadabort",["errAbort","errTimeout"])},R=function(){O&&w.notifyWith($,[{cnt:$.data("cnt"),progress:$.data("progress"),total:$.data("total")}])},H=function(e,t,n){e&&i.trigger("xhruploadfail",{error:e,file:t}),n?e&&(N<i.options.maxErrorDialogs&&(Array.isArray(e)?_=_.concat(e):_.push(e)),N++):e?i.error(e):(_.length&&(N>=i.options.maxErrorDialogs&&(_=_.concat("moreErrors",N-i.options.maxErrorDialogs)),i.error(_)),_=[],N=0)},_=[],N=0,L=t.renames||null,W=t.hashes||null,B=!1,$=e();if(a.one("uploadabort",D),e(window).one("unload."+n.namespace,D),!B&&(A=T),!d&&!C)return w.reject(["errUploadNoFiles"]);o.addEventListener("error",function(){0==o.status?E?w.reject():!d&&t.files&&e.grep(t.files,function(e){return!e.type&&e.size===(i.UA.Safari?1802:0)}).length?w.reject(["errAbort","errFolderUpload"]):t.input&&e.grep(t.input.files,function(e){return!e.type&&e.size===(i.UA.Safari?1802:0)}).length?w.reject(["errUploadNoFiles"]):q():a.trigger("uploadabort","errConnect")},!1),o.addEventListener("load",function(e){var n,s,c=o.status,p=0,u="";if(i.setCustomHeaderByXhr(o),c>=400?u=c>500?"errResponse":["errResponse","errServerError"]:o.responseText||(u=["errResponse","errDataEmpty"]),u&&(a.trigger("uploadabort"),y(k||{}).done(function(e){return w.reject(e._cid?null:u)})),T=j,F()&&(p=T-A)&&(i.notify({type:"upload",cnt:0,progress:p,size:0}),R()),n=i.parseUploadData(o.responseText),n._chunkmerged){x=new FormData;var h=[{_chunkmerged:n._chunkmerged,_name:n._name,_mtime:n._mtime}];return B=!0,a.off("uploadabort",D),l=setTimeout(function(){i.notify({type:"chunkmerge",cnt:1})},i.options.notifyDelay),void(d?V(h,k[1]):V(h))}n._multiupload=!!t.multiupload,n.error?(s={cmd:"upload",err:n,xhr:o,rc:o.status},i.trigger("uploadfail",n),i.trigger("requestError",s),s._getEvent&&s._getEvent().isDefaultPrevented()&&(n.error=""),n._chunkfailure||n._multiupload?(E=!0,i.uploads.xhrUploading=!1,r&&clearTimeout(r),$.length?(i.notify({type:"upload",cnt:-C,progress:0,size:0}),w.reject(n)):w.reject()):w.reject(n)):w.resolve(n)},!1),o.upload.addEventListener("loadstart",function(e){!B&&e.lengthComputable&&(T=e.loaded,b&&(T=0),j=e.total,T||(T=parseInt(.05*j)),F()&&(i.notify({type:"upload",cnt:0,progress:T-A,size:t.multiupload?0:j}),A=T,R()))},!1),o.upload.addEventListener("progress",function(e){var n;e.lengthComputable&&!B&&o.readyState<2&&(T=e.loaded,!t.checked&&T>0&&!r&&(r=P(o._totalSize-T)),j||(j=e.total,T||(T=parseInt(.05*j))),n=T-A,F()&&n/e.total>=.05&&(i.notify({type:"upload",cnt:0,progress:n,size:0}),A=T,R()),!M&&T>=j&&!z&&(M=!0,s=setTimeout(function(){i.notify({type:"chunkmerge",cnt:C})},i.options.notifyDelay)),I&&!t.multiupload&&T>=j&&F()&&U(!1))},!1);var V=function(a,s){var l,g,v,b,y,k,T,A,j,O,S,M,D,q,R,N=0,B=1,$=[],V=0,K=C,X=0,J=[],G=(new Date).getTime().toString().substr(-9),Y=Math.min((n.uplMaxSize?n.uplMaxSize:2097152)-8190,n.options.uploadMaxChunkSize),Q=!f&&"",Z=function(a,o){var s,l,c,h=[],f=0;if(!E){for(;a.length&&h.length<o;)h.push(a.shift());if(f=h.length){l=f;for(var m=0;m<f&&!E;m++)s=d?h[m][0][0]._cid||null:h[m][0]._cid||null,c=!(!c&&!s),q[s]?D--:n.exec("upload",{type:t.type,isDataType:d,files:h[m],checked:!0,target:p,dropEvt:u,renames:L,hashes:W,multiupload:!0,overwrite:0===t.overwrite?0:void 0,clipdata:t.clipdata},void 0,p).fail(function(e){e&&"No such command"===e&&(E=!0,n.error(["errUpload","errPerm"])),s&&(q[s]=!0)}).always(function(t){t&&t.added&&(S=e.merge(S,t.added)),D<=++M&&(n.trigger("multiupload",{added:S}),r&&clearTimeout(r),F()&&i.notify({type:"upload",cnt:-C,progress:0,size:0})),a.length?Z(a,1):(--l<=1&&I&&U(!1,c),w.resolve())})}}(h.length<1||E)&&(E?(r&&clearTimeout(r),s&&(q[s]=!0),w.reject()):(w.resolve(),i.uploads.xhrUploading=!1))},ee=function(){i.uploads.xhrUploading?setTimeout(ee,100):(i.uploads.xhrUploading=!0,Z($,m))};if(!c&&(d||"files"==t.type)){for((l=n.option("uploadMaxSize",p))||(l=0),y=0;y<a.length;y++){try{j=a[y],g=j.size,Q===!1&&(Q="",i.api>=2.1&&("slice"in j?Q="slice":"mozSlice"in j?Q="mozSlice":"webkitSlice"in j&&(Q="webkitSlice")))}catch(te){C--,K--;continue}if(l&&g>l||!Q&&n.uplMaxSize&&g>n.uplMaxSize)H(["errUploadFile",j.name,"errUploadFileSize"],j,!0),C--,K--;else if(!j.type||i.uploadMimeCheck(j.type,p))if(Q&&g>Y){for(k=0,T=Y,A=-1,K=Math.floor((g-1)/Y),v=j.lastModified?Math.round(j.lastModified/1e3):0,b=t.clipdata?n.date(n.nonameDateFormat)+".png":j.name,X+=g,J[G]=0;k<g;)O=j[Q](k,T),O._chunk=b+"."+ ++A+"_"+K+".part",O._cid=G,O._range=k+","+O.size+","+g,O._mtime=v,J[G]++,N&&V++,"undefined"==typeof $[V]&&($[V]=[],d&&($[V][0]=[],$[V][1]=[])),N=Y,B=1,d?($[V][0].push(O),$[V][1].push(s[y])):$[V].push(O),k=T,T=k+Y;null==O?(H(["errUploadFile",j.name,"errUploadFileSize"],j,!0),C--,K--):(K+=A,N=0,B=1,V++)}else(n.uplMaxSize&&N+g>n.uplMaxSize||B>n.uplMaxFile)&&(N=0,B=1,V++),"undefined"==typeof $[V]&&($[V]=[],d&&($[V][0]=[],$[V][1]=[])),d?($[V][0].push(j),$[V][1].push(s[y])):$[V].push(j),N+=g,X+=g,B++;else H(["errUploadFile",j.name,"errUploadMime","("+j.type+")"],j,!0),C--,K--}if(_.length&&H(),0==$.length)return t.checked=!0,!1;if($.length>1)return r=P(X),S=[],M=0,D=$.length,q=[],ee(),!0;d?(a=$[0][0],s=$[0][1]):a=$[0]}return c||(n.UA.Safari&&t.files?o._totalSize=X:r=P(X)),c=!0,a.length||w.reject(["errUploadNoFiles"]),o.open("POST",i.uploadURL,!0),n.customHeaders&&e.each(n.customHeaders,function(e){o.setRequestHeader(e,this)}),n.xhrFields&&e.each(n.xhrFields,function(e){e in o&&(o[e]=this)}),i.api>=2.1029&&(R=(+new Date).toString(16)+Math.floor(1e3*Math.random()).toString(16),x.append("reqid",R),o._requestId=R),x.append("cmd","upload"),x.append(i.newAPI?"target":"current",p),L&&L.length&&(e.each(L,function(e,t){x.append("renames[]",t)}),x.append("suffix",n.options.backupSuffix)),W&&e.each(W,function(e,t){x.append("hashes["+e+"]",t)}),e.each(i.customData,function(e,t){x.append(e,t)}),e.each(i.options.onlyMimes,function(e,t){x.append("mimes[]",t)}),e.each(a,function(e,i){var a,o;i._chunkmerged?(x.append("chunk",i._chunkmerged),x.append("upload[]",i._name),x.append("mtime[]",i._mtime),t.clipdata&&x.append("overwrite",0),z=!0):(i._chunkfail?(x.append("upload[]","chunkfail"),x.append("mimes","chunkfail")):(t.clipdata?i._chunk||(t.overwrite=0,a=n.date(n.nonameDateFormat)+".png"):i.name&&(a=i.name,n.UA.iOS&&(a.match(/^image\.jpe?g$/i)?(t.overwrite=0,a=n.date(n.nonameDateFormat)+".jpg"):a.match(/^capturedvideo\.mov$/i)&&(t.overwrite=0,a=n.date(n.nonameDateFormat)+".mov")),o=(i.webkitRelativePath||i.relativePath||i._relativePath||"").replace(/[^\/]+$/,""),a=o+a),a?x.append("upload[]",i,a):x.append("upload[]",i)),i._chunk?(x.append("chunk",i._chunk),x.append("cid",i._cid),x.append("range",i._range),x.append("mtime[]",i._mtime),z=!0):x.append("mtime[]",i.lastModified?Math.round(i.lastModified/1e3):0))}),d&&e.each(s,function(e,t){x.append("upload_path[]",t)}),0===t.overwrite&&x.append("overwrite",0),u&&x.append("dropWith",parseInt((u.altKey?"1":"0")+(u.ctrlKey?"1":"0")+(u.metaKey?"1":"0")+(u.shiftKey?"1":"0"),2)),h&&e.each(h,function(e,t){x.append(e,t)}),o.send(x),!0};if(d)c?V(k[0],k[1]):k.done(function(t){if(L=[],C=t[0].length){if(t[4]&&t[4].length)return void n.request({data:{cmd:"mkdir",target:p,dirs:t[4]},notify:{type:"mkdir",cnt:t[4].length},preventFail:!0}).fail(function(e){e=e||["errUnknown"],"errCmdParams"===e[0]?m=1:(m=0,w.reject(e))}).done(function(n){var i=!1;n.hashes||(n.hashes={}),t[1]=e.map(t[1],function(e,a){return t[0][a]._relativePath=e.replace(/^\//,""),e=e.replace(/\/[^\/]*$/,""),""===e?p:n.hashes[e]?n.hashes[e]:(i=!0,t[0][a]._remove=!0,null)}),i&&(t[0]=e.grep(t[0],function(e){return!e._remove}))}).always(function(e){m&&(L=t[2],W=t[3],V(t[0],t[1]))});t[1]=e.map(t[1],function(){return p}),L=t[2],W=t[3],V(t[0],t[1])}else w.reject(["errUploadNoFiles"])}).fail(function(){w.reject()});else if(k.length>0)if(t.clipdata||null!=L)V(k)||w.reject();else{var K=[],X=[],J=n.options.folderUploadExclude[n.OS]||null;e.each(k,function(t,n){var i,a,o=n.webkitRelativePath||n.relativePath||"";return!!o&&(J&&n.name.match(J)?(n._remove=!0,o=void 0):(o="/"+o.replace(/\/[^\/]*$/,"").replace(/^\//,""),o&&e.inArray(o,K)===-1&&(K.push(o),i=o.substr(1).indexOf("/"),i!==-1&&(a=o.substr(0,i+1))&&e.inArray(a,K)===-1&&K.unshift(a))),void X.push(o))}),L=[],W={},K.length?!function(){var t=e.map(K,function(e){return e.substr(1).indexOf("/")===-1?{name:e.substr(1)}:null}),i=[];n.uploads.checkExists(t,p,n,!0).done(function(a,o){var r,s,l,c=[];n.options.overwriteUploadConfirm&&n.option("uploadOverwrite",p)&&(i=e.map(t,function(e){return e._remove?e.name:null}),t=e.grep(t,function(e){return!e._remove})),i.length&&e.each(X.concat(),function(t,n){0===e.inArray(n,i)&&(k[t]._remove=!0,X[t]=void 0)}),k=e.grep(k,function(e){return!e._remove}),X=e.grep(X,function(e){return void 0!==e}),t.length?(r=e.Deferred(),a.length?e.each(a,function(t,i){s=n.uniqueName(i+n.options.backupSuffix,null,""),e.each(o,function(e,t){if(a[0]==t)return l=e,!1}),l||(l=n.fileByName(a[0],p).hash),n.lockfiles({files:[l]}),c.push(n.request({data:{cmd:"rename",target:l,name:s},notify:{type:"rename",cnt:1}}).fail(function(e){w.reject(e),n.sync()}).always(function(){n.unlockfiles({files:[l]})}))}):c.push(null),e.when.apply(e,c).done(function(){n.request({data:{cmd:"mkdir",target:p,dirs:K},notify:{type:"mkdir",cnt:K.length},preventFail:!0}).fail(function(e){e=e||["errUnknown"],"errCmdParams"===e[0]?m=1:(m=0,w.reject(e))}).done(function(t){var n=!1;t.hashes||(t.hashes={}),X=e.map(X.concat(),function(e,i){return"/"===e?p:t.hashes[e]?t.hashes[e]:(n=!0,k[i]._remove=!0,null)}),n&&(k=e.grep(k,function(e){return!e._remove}))}).always(function(e){m&&(d=!0,V(k,X)||w.reject())})})):w.reject()})}():n.uploads.checkExists(k,p,n).done(function(i,a){n.options.overwriteUploadConfirm&&n.option("uploadOverwrite",p)&&(W=a,null===i?t.overwrite=0:L=i,k=e.grep(k,function(e){return!e._remove})),C=k.length,C>0?V(k)||w.reject():w.reject()})}else w.reject();return w},iframe:function(t,n){var i,a,o,r,s=n?n:this,l=!!t.input&&t.input,c=!l&&s.uploads.checkFile(t,s),d=e.Deferred().fail(function(e){e&&s.error(e)}),p="iframe-"+n.namespace+ ++s.iframeCnt,u=e('<form action="'+s.uploadURL+'" method="post" enctype="multipart/form-data" encoding="multipart/form-data" target="'+p+'" style="display:none"><input type="hidden" name="cmd" value="upload" /></form>'),h=this.UA.IE,f=function(){r&&clearTimeout(r),o&&clearTimeout(o),a&&s.notify({type:"upload",cnt:-i}),setTimeout(function(){h&&e('<iframe src="javascript:false;"></iframe>').appendTo(u),u.remove(),m.remove()},100)},m=e('<iframe src="'+(h?"javascript:false;":"about:blank")+'" name="'+p+'" style="position:absolute;left:-1000px;top:-1000px" ></iframe>').on("load",function(){m.off("load").on("load",function(){f(),d.resolve()}),o=setTimeout(function(){a=!0,s.notify({type:"upload",cnt:i})},s.options.notifyDelay),s.options.iframeTimeout>0&&(r=setTimeout(function(){f(),d.reject(["errConnect","errTimeout"])},s.options.iframeTimeout)),u.submit()}),g=t.target||s.cwd().hash,v=[],b=[],y=[],w={};if(c&&c.length)e.each(c,function(e,t){u.append('<input type="hidden" name="upload[]" value="'+t+'"/>')}),i=1;else{if(!(l&&e(l).is(":file")&&e(l).val()))return d.reject();n.options.overwriteUploadConfirm&&n.option("uploadOverwrite",g)&&(v=l.files?l.files:[{name:e(l).val().replace(/^(?:.+[\\\/])?([^\\\/]+)$/,"$1")}],b.push(s.uploads.checkExists(v,g,s).done(function(n,a){w=a,null===n?t.overwrite=0:(y=n,i=e.grep(v,function(e){return!e._remove}).length,i!=v.length&&(i=0))}))),i=l.files?l.files.length:1,u.append(l)}return e.when.apply(e,b).done(function(){
return i<1?d.reject():(u.append('<input type="hidden" name="'+(s.newAPI?"target":"current")+'" value="'+g+'"/>').append('<input type="hidden" name="html" value="1"/>').append('<input type="hidden" name="node" value="'+s.id+'"/>').append(e(l).attr("name","upload[]")),y.length>0&&(e.each(y,function(e,t){u.append('<input type="hidden" name="renames[]" value="'+s.escape(t)+'"/>')}),u.append('<input type="hidden" name="suffix" value="'+n.options.backupSuffix+'"/>')),w&&e.each(y,function(e,t){u.append('<input type="hidden" name="['+e+']" value="'+s.escape(t)+'"/>')}),0===t.overwrite&&u.append('<input type="hidden" name="overwrite" value="0"/>'),e.each(s.options.onlyMimes||[],function(e,t){u.append('<input type="hidden" name="mimes[]" value="'+s.escape(t)+'"/>')}),e.each(s.customData,function(e,t){u.append('<input type="hidden" name="'+e+'" value="'+s.escape(t)+'"/>')}),u.appendTo("body"),void m.appendTo("body"))}),d}},one:function(e,t,n){var i=this,a=e.toLowerCase(),o=function(e,n){return i.toUnbindEvents[a]||(i.toUnbindEvents[a]=[]),i.toUnbindEvents[a].push({type:a,callback:o}),(t.done?t.done:t).apply(this,arguments)};return t.done&&(o={done:o}),this.bind(a,o,n)},localStorage:function(t,n){var i,a,o,r,s,l=this,c=window.localStorage,d="elfinder-"+(t||"")+this.id,p=window.location.pathname+"-elfinder-",u=this.id,h=[];if("undefined"==typeof t)return r=p.length,s=u.length*-1,e.each(c,function(e){e.substr(0,r)===p&&e.substr(s)===u&&h.push(e)}),e.each(h,function(e,t){c.removeItem(t)}),!0;if(t=p+t+u,null===n)return c.removeItem(t);if(void 0===n&&!(i=c.getItem(t))&&(a=c.getItem(d))&&(n=a,c.removeItem(d)),void 0!==n){o=typeof n,"string"!==o&&"number"!==o&&(n=JSON.stringify(n));try{c.setItem(t,n)}catch(f){try{c.clear(),c.setItem(t,n)}catch(f){l.debug("error",f.toString())}}i=c.getItem(t)}if(i&&("{"===i.substr(0,1)||"["===i.substr(0,1)))try{return JSON.parse(i)}catch(f){}return i},sessionStorage:function(e,t){var n,i,a,o=this;try{n=window.sessionStorage}catch(r){}if(n){if(null===t)return n.removeItem(e);if(void 0!==t){a=typeof t,"string"!==a&&"number"!==a&&(t=JSON.stringify(t));try{n.setItem(e,t)}catch(r){try{n.clear(),n.setItem(e,t)}catch(r){o.debug("error",r.toString())}}}if(i=n.getItem(e),i&&("{"===i.substr(0,1)||"["===i.substr(0,1)))try{return JSON.parse(i)}catch(r){}return i}},cookie:function(t,n){var i,a,o,r,s,l;if(t="elfinder-"+t+this.id,void 0===n){if(this.cookieEnabled&&document.cookie&&""!=document.cookie)for(o=document.cookie.split(";"),t+="=",r=0;r<o.length;r++)if(o[r]=e.trim(o[r]),o[r].substring(0,t.length)==t){if(s=decodeURIComponent(o[r].substring(t.length)),"{"===s.substr(0,1)||"["===s.substr(0,1))try{return JSON.parse(s)}catch(c){}return s}return null}if(!this.cookieEnabled)return"";if(a=Object.assign({},this.options.cookie),null===n?(n="",a.expires=-1):(l=typeof n,"string"!==l&&"number"!==l&&(n=JSON.stringify(n))),"number"==typeof a.expires&&(i=new Date,i.setTime(i.getTime()+864e5*a.expires),a.expires=i),document.cookie=t+"="+encodeURIComponent(n)+"; expires="+a.expires.toUTCString()+(a.path?"; path="+a.path:"")+(a.domain?"; domain="+a.domain:"")+(a.secure?"; secure":""),n&&("{"===n.substr(0,1)||"["===n.substr(0,1)))try{return JSON.parse(n)}catch(c){}return n},startDir:function(){var e=window.location.hash;return e&&e.match(/^#elf_/)?e.replace(/^#elf_/,""):this.options.startPathHash?this.options.startPathHash:this.lastDir()},lastDir:function(e){return this.options.rememberLastDir?this.storage("lastdir",e):""},_node:e("<span></c.length;>"),escape:function(e){return this._node.text(e).html().replace(/"/g,"&quot;").replace(/'/g,"&#039;")},normalize:function(t){var n,i,a,o,r,s=this,l=function(){var e,t;return(t=s.options.fileFilter)&&("function"==typeof t?e=function(e){return t.call(s,e)}:t instanceof RegExp&&(e=function(e){return t.test(e.name)})),e?e:null}(),c=function(t){var n;t.uiCmdMap&&(e.isPlainObject(t.uiCmdMap)&&Object.keys(t.uiCmdMap).length?(t.disabledFlip||(t.disabledFlip={}),n=t.disabledFlip,e.each(t.uiCmdMap,function(e,i){"hidden"!==i||n[e]||(t.disabled.push(e),t.disabledFlip[e]=!0)})):delete t.uiCmdMap)},d=function(t){var n=function(e){var t=typeof e;return"object"===t&&Array.isArray(e)&&(t="array"),t};return e.each(s.optionProperties,function(e,i){void 0!==i&&t[e]&&n(t[e])!==n(i)&&(t[e]=i)}),t.disabled?(t.disabledFlip=s.arrayFlip(t.disabled,!0),e.each(s.options.disabledCmdsRels,function(n,i){var a,o;t.disabledFlip[n]?o=!0:(a=n.match(/^([^&]+)&([^=]+)=(.*)$/))&&t.disabledFlip[a[1]]&&t[a[2]]==a[3]&&(o=!0),o&&e.each(i,function(e,n){t.disabledFlip[n]||(t.disabledFlip[n]=!0,t.disabled.push(n))})})):t.disabledFlip={},t},p=function(t,r,p){var u,h,m,g,v=!r||t,b=!!r&&null;if(t&&t.hash&&t.name&&t.mime){if("application/x-empty"===t.mime&&(t.mime="text/plain"),m=s.isRoot(t),m&&!t.volumeid&&s.debug("warning","The volume root statuses requires `volumeid` property."),m||"directory"===t.mime){if(t.phash){if(t.phash===t.hash)return f=f.concat(['Parent folder of "$1" is itself.',t.name]),b;if(m&&t.volumeid&&0===t.phash.indexOf(t.volumeid))return f=f.concat(['Parent folder of "$1" is inner itself.',t.name]),b}t.volumeid&&(u=t.volumeid,m&&(t.phash&&(s.leafRoots[t.phash]?e.inArray(t.hash,s.leafRoots[t.phash])===-1&&s.leafRoots[t.phash].push(t.hash):s.leafRoots[t.phash]=[t.hash]),s.hasVolOptions=!0,s.volOptions[u]||(s.volOptions[u]={dispInlineRegex:s.options.dispInlineRegex}),h=s.volOptions[u],t.options&&Object.assign(h,t.options),t.disabled&&(h.disabled=t.disabled,h.disabledFlip=s.arrayFlip(t.disabled,!0)),t.tmbUrl&&(h.tmbUrl=t.tmbUrl),h.url&&"/"!==h.url.substr(-1)&&(h.url+="/"),c(h),h.trashHash&&(s.trashes[h.trashHash]===!1?delete h.trashHash:s.trashes[h.trashHash]=t.hash),e.each(s.optionProperties,function(e){h[e]&&(t[e]=h[e])}),"cwd"!==p&&(s.roots[u]=t.hash),t.expires&&(s.volumeExpires[u]=t.expires)),o!==u&&(o=u,a=s.option("i18nFolderName",u))),m&&!t.i18&&(n="volume_"+t.name,i=s.i18n(!1,n),n!==i&&(t.i18=i)),a&&!t.i18&&(n="folder_"+t.name,i=s.i18n(!1,n),n!==i&&(t.i18=i)),m&&(g=s.storage("rootNames"))&&(g[t.hash]&&(t._name=t.name,t._i18=t.i18,t.name=g[t.hash]=g[t.hash],delete t.i18),s.storage("rootNames",g)),s.trashes[t.hash]&&(t.locked=!0)}else{if(l)try{if(!l(t))return b}catch(y){s.debug(y)}0==t.size&&(t.mime=s.getMimetype(t.name,t.mime))}return t.options&&(s.optionsByHashes[t.hash]=d(t.options)),delete t.options,v}return b},u=function(t){var n=[];return e.each(s.files(),function(i,a){e.each(s.parents(i),function(a,o){if(e.inArray(o,t)!==-1&&e.inArray(i,t)===-1)return n.push(i),!1})}),n},h=function(n,i){e.each(n,function(n,a){var o,r;s.leafRoots[a.hash]&&s.applyLeafRootStats(a),"change"!==i&&a.phash&&s.isRoot(a)&&(o=s.file(a.phash))&&(s.applyLeafRootStats(o),t.changed?(e.each(t.changed,function(e,n){if(n.hash===o.hash)return t.changed[e]=o,r=!0,!1}),r||t.changed.push(o)):t.changed=[o])})},f=[];if(t.customData&&(!s.prevCustomData||JSON.stringify(t.customData)!==JSON.stringify(s.prevCustomData))){s.prevCustomData=t.customData;try{r=JSON.parse(t.customData),e.isPlainObject(r)&&(s.prevCustomData=r,e.each(Object.keys(r),function(e,t){null===r[t]&&(delete r[t],delete s.optsCustomData[t])}),s.customData=Object.assign({},s.optsCustomData,r))}catch(m){}}return t.options&&d(t.options),t.cwd&&(t.cwd.volumeid&&t.options&&Object.keys(t.options).length&&s.isRoot(t.cwd)&&(s.hasVolOptions=!0,s.volOptions[t.cwd.volumeid]=t.options),t.cwd=p(t.cwd,!0,"cwd")),t.files&&(t.files=e.grep(t.files,p)),t.tree&&(t.tree=e.grep(t.tree,p)),t.added&&(t.added=e.grep(t.added,p)),t.changed&&(t.changed=e.grep(t.changed,p)),t.removed&&t.removed.length&&2===s.searchStatus.state&&(t.removed=t.removed.concat(u(t.removed))),t.api&&(t.init=!0),Object.keys(s.leafRoots).length&&(t.files&&h(t.files),t.tree&&h(t.tree),t.added&&h(t.added),t.changed&&h(t.changed,"change")),t.cwd&&t.cwd.options&&t.options&&Object.assign(t.options,d(t.cwd.options)),t.options&&t.options.url&&"/"!==t.options.url.substr(-1)&&(t.options.url+="/"),f.length&&(t.norError=["errResponse"].concat(f)),t},setSort:function(e,t,n,i){this.storage("sortType",this.sortType=this.sortRules[e]?e:"name"),this.storage("sortOrder",this.sortOrder=/asc|desc/.test(t)?t:"asc"),this.storage("sortStickFolders",(this.sortStickFolders=!!n)?1:""),this.storage("sortAlsoTreeview",(this.sortAlsoTreeview=!!i)?1:""),this.trigger("sortchange")},_sortRules:{name:function(e,t){return i.prototype.naturalCompare(e.i18||e.name,t.i18||t.name)},size:function(e,t){var n=parseInt(e.size)||0,i=parseInt(t.size)||0;return n===i?0:n>i?1:-1},kind:function(e,t){return i.prototype.naturalCompare(e.mime,t.mime)},date:function(e,t){var n=e.ts||e.date||0,i=t.ts||t.date||0;return n===i?0:n>i?1:-1},perm:function(e,t){var n=function(e){return(e.write?2:0)+(e.read?1:0)},i=n(e),a=n(t);return i===a?0:i>a?1:-1},mode:function(e,t){var n=e.mode||e.perm||"",a=t.mode||t.perm||"";return i.prototype.naturalCompare(n,a)},owner:function(e,t){var n=e.owner||"",a=t.owner||"";return i.prototype.naturalCompare(n,a)},group:function(e,t){var n=e.group||"",a=t.group||"";return i.prototype.naturalCompare(n,a)}},sorters:{},naturalCompare:function(e,t){var n=i.prototype.naturalCompare;return"undefined"==typeof n.loc&&(n.loc=navigator.userLanguage||navigator.browserLanguage||navigator.language||"en-US"),"undefined"==typeof n.sort&&("11".localeCompare("2",n.loc,{numeric:!0})>0?window.Intl&&window.Intl.Collator?n.sort=new Intl.Collator(n.loc,{numeric:!0}).compare:n.sort=function(e,t){return e.localeCompare(t,n.loc,{numeric:!0})}:(n.sort=function(e,t){var i,a,o=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,r=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,c=/^0/,d=/^[\x01\x21-\x2f\x3a-\x40\x5b-\x60\x7b-\x7e]/,p=function(e){return n.sort.insensitive&&(""+e).toLowerCase()||""+e},u=p(e).replace(r,"").replace(/^_/,"")||"",h=p(t).replace(r,"").replace(/^_/,"")||"",f=u.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=h.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(u.match(l))||1!=f.length&&u.match(s)&&Date.parse(u),v=parseInt(h.match(l))||g&&h.match(s)&&Date.parse(h)||null,b=0;if(v){if(g<v)return-1;if(g>v)return 1}for(var y=0,w=Math.max(f.length,m.length);y<w;y++){if(i=!(f[y]||"").match(c)&&parseFloat(f[y])||f[y]||0,a=!(m[y]||"").match(c)&&parseFloat(m[y])||m[y]||0,isNaN(i)!==isNaN(a)){if(isNaN(i)&&("string"!=typeof i||!i.match(d)))return 1;if("string"!=typeof a||!a.match(d))return-1}if(0===parseInt(i,10)&&(i=0),0===parseInt(a,10)&&(a=0),typeof i!=typeof a&&(i+="",a+=""),n.sort.insensitive&&"string"==typeof i&&"string"==typeof a&&(b=i.localeCompare(a,n.loc),0!==b))return b;if(i<a)return-1;if(i>a)return 1}return 0},n.sort.insensitive=!0)),n.sort(e,t)},compare:function(e,t){var n,i=this,a=i.sortType,o="asc"==i.sortOrder,r=i.sortStickFolders,s=i.sortRules,l=s[a],c="directory"==e.mime,d="directory"==t.mime;if(r){if(c&&!d)return-1;if(!c&&d)return 1}return n=o?l(e,t):l(t,e),"name"!==a&&0===n?n=o?s.name(e,t):s.name(t,e):n},sortFiles:function(e){return e.sort(this.compare)},notify:function(t){var n,i,a,o=this,r=t.type,s=t.id?"elfinder-notify-"+t.id:"",l=this.i18n("undefined"!=typeof t.msg?t.msg:this.messages["ntf"+r]?"ntf"+r:"ntfsmth"),c=this.arrayFlip(this.options.notifyDialog.hiddens||[]),d=this.ui.notify,p=d.closest(".ui-dialog"),u=d.children(".elfinder-notify-"+r+(s?"."+s:"")),h=u.children("div.elfinder-notify-cancel").children("button"),f='<div class="elfinder-notify elfinder-notify-{type}'+(s?" "+s:"")+'"><span class="elfinder-dialog-icon elfinder-dialog-icon-{type}"></span><span class="elfinder-notify-msg">{msg}</span> <span class="elfinder-notify-cnt"></span><div class="elfinder-notify-progressbar"><div class="elfinder-notify-progress"></div></div><div class="elfinder-notify-cancel"></div></div>',m=t.cnt+0,g="undefined"!=typeof t.size?parseInt(t.size):null,v="undefined"!=typeof t.progress&&t.progress>=0?t.progress:null,b=t.fakeinterval||200,y=t.cancel,w="ui-state-hover",x=function(){var t=u.find(".elfinder-notify-progress"),n=function(){u.remove(),d.children(p.data("minimized")?void 0:":visible").length||(p.data("minimized")?p.data("minimized").hide():d.elfinderdialog("close")),C()};u._esc&&e(document).off("keydown",u._esc),u.data("cur")<100?t.animate({width:"100%"},50,function(){requestAnimationFrame(function(){n()})}):n()},k=function(e){var t;u.length&&(t=u.data("cur")+1,t<=98&&(u.find(".elfinder-notify-progress").width(t+"%"),u.data("cur",t),C(),setTimeout(function(){e*=1.05,k(e)},e)))},C=function(){var t,n=0,i=0,a=d.children(".elfinder-notify");a.length?(a.each(function(){n++,i+=Math.min(e(this).data("cur"),100)}),t=n?Math.floor(i/(100*n)*100)+"%":0,o.ui.progressbar.width(t),p.data("minimized")&&(p.data("minimized").title(t),p.data("minimized").dialog().children(".ui-dialog-titlebar").children(".elfinder-ui-progressbar").width(t))):(o.ui.progressbar.width(0),p.data("minimized")&&p.data("minimized").hide())};return r?(u.length?"undefined"!=typeof t.msg&&u.children("span.elfinder-notify-msg").html(l):(u=e(f.replace(/\{type\}/g,r).replace(/\{msg\}/g,l)),c[r]?u.hide():d.on("minimize",function(e){p.data("minimized")&&C()}),u.appendTo(d).data("cnt",0),null!=v?u.data({progress:0,total:0,cur:0}):(u.data({cur:0}),k(b)),y&&(h=e('<span class="elfinder-notify-button ui-icon ui-icon-close" title="'+this.i18n("btnCancel")+'"></span>').on("mouseenter mouseleave",function(t){e(this).toggleClass(w,"mouseenter"===t.type)}),u.children("div.elfinder-notify-cancel").append(h)),d.trigger("resize")),n=m+parseInt(u.data("cnt")),n>0?(y&&h.length&&(e.isFunction(y)||"object"==typeof y&&y.promise)&&(u._esc=function(t){"keydown"==t.type&&t.keyCode!=e.ui.keyCode.ESCAPE||(t.preventDefault(),t.stopPropagation(),x(),y.promise?y.reject(0):y(t))},h.on("click",function(e){u._esc(e)}),e(document).on("keydown."+this.namespace,u._esc)),!t.hideCnt&&u.children(".elfinder-notify-cnt").text("("+n+")"),m>0&&d.is(":hidden")&&!c[r]&&(p.data("minimized")?p.data("minimized").show():d.elfinderdialog("open",this).height("auto")),u.data("cnt",n),null!=v&&(i=u.data("total"))>=0&&(a=u.data("progress"))>=0&&(i+=null!=g?g:m,a+=v,null==g&&m<0&&(a+=100*m),u.data({progress:a,total:i}),null!=g&&(a*=100,i=Math.max(1,i)),v=Math.min(parseInt(a/i),100),u.find(".elfinder-notify-progress").animate({width:(v<100?v:100)+"%"},20,function(){u.data("cur",v),C()}))):x(),this):this},confirm:function(t){var n,i,a=this,o=!1,r={cssClass:"elfinder-dialog-confirm",modal:!0,resizable:!1,title:this.i18n(t.title||"confirmReq"),buttons:{},close:function(){!o&&t.cancel.callback(),e(this).elfinderdialog("destroy")}},s=this.i18n("apllyAll");return t.cssClass&&(r.cssClass+=" "+t.cssClass),r.buttons[this.i18n(t.accept.label)]=function(){t.accept.callback(!(!n||!n.prop("checked"))),o=!0,e(this).elfinderdialog("close")},r.buttons[this.i18n(t.accept.label)]._cssClass="elfinder-confirm-accept",t.reject&&(r.buttons[this.i18n(t.reject.label)]=function(){t.reject.callback(!(!n||!n.prop("checked"))),o=!0,e(this).elfinderdialog("close")},r.buttons[this.i18n(t.reject.label)]._cssClass="elfinder-confirm-reject"),t.buttons&&t.buttons.length>0&&(i=1,e.each(t.buttons,function(t,s){r.buttons[a.i18n(s.label)]=function(){s.callback(!(!n||!n.prop("checked"))),o=!0,e(this).elfinderdialog("close")},r.buttons[a.i18n(s.label)]._cssClass="elfinder-confirm-extbtn"+i++,s.cssClass&&(r.buttons[a.i18n(s.label)]._cssClass+=" "+s.cssClass)})),r.buttons[this.i18n(t.cancel.label)]=function(){e(this).elfinderdialog("close")},r.buttons[this.i18n(t.cancel.label)]._cssClass="elfinder-confirm-cancel",t.all&&(r.create=function(){var t=e('<div class="elfinder-dialog-confirm-applyall"></div>');n=e('<input type="checkbox" />'),e(this).next().find(".ui-dialog-buttonset").prepend(t.append(e("<label>"+s+"</label>").prepend(n)))}),t.optionsCallback&&e.isFunction(t.optionsCallback)&&t.optionsCallback(r),this.dialog('<span class="elfinder-dialog-icon elfinder-dialog-icon-confirm"></span>'+this.i18n(t.text),r)},uniqueName:function(e,t,n){var i,a,o=0,r="";if(e=this.i18n(!1,e),t=t||this.cwd().hash,n="undefined"==typeof n?" ":n,(i=e.match(/^(.+)(\.[^.]+)$/))&&(r=i[2],e=i[1]),a=e+r,!this.fileByName(a,t))return a;for(;o<1e4;)if(a=e+n+ ++o+r,!this.fileByName(a,t))return a;return e+Math.random()+r},i18n:function(){var t,n,i,a,o,r=this,s=this.messages,l=[],c=[],d=function(e){var t;return 0===e.indexOf("#")&&(t=r.file(e.substr(1)))?t.name:e},p=0;for(arguments.length&&arguments[0]===!1&&(a=function(e){return e},p=1),t=p;t<arguments.length;t++)if(i=arguments[t],Array.isArray(i))for(n=0;n<i.length;n++)i[n]instanceof jQuery?l.push(i[n]):"undefined"!=typeof i[n]&&l.push(d(""+i[n]));else i instanceof jQuery?l.push(i[n]):"undefined"!=typeof i&&l.push(d(""+i));for(t=0;t<l.length;t++)e.inArray(t,c)===-1&&(i=l[t],"string"==typeof i?(o=!(!s[i]||!i.match(/^err/)),i=s[i]||(a?a(i):r.escape(i)),i=i.replace(/\$(\d+)/g,function(e,n){var i;return n=t+parseInt(n),n>0&&l[n]&&c.push(n),i=a?a(l[n]):r.escape(l[n]),o&&(i='<span class="elfinder-err-var elfinder-err-var'+n+'">'+i+"</span>"),i})):i=i.get(0).outerHTML,l[t]=i);return e.grep(l,function(t,n){return e.inArray(n,c)===-1}).join("<br>")},getIconStyle:function(t,n){var i=this,a={background:"url('{url}') 0 0 no-repeat","background-size":"contain"},o="",r={},s=0;return t.icon&&(o='style="',e.each(a,function(e,a){0===s++&&(a=a.replace("{url}",i.escape(t.icon))),n?r[e]=a:o+=e+":"+a+";"}),o+='"'),n?r:o},mime2class:function(e){var t="elfinder-cwd-icon-",n=e.toLowerCase(),i=this.textMimes[n];return n=n.split("/"),i?n[0]+=" "+t+"text":n[1]&&n[1].match(/\+xml$/)&&(n[0]+=" "+t+"xml"),t+n[0]+(n[1]?" "+t+n[1].replace(/(\.|\+)/g,"-"):"")},mime2kind:function(e){var t,n="object"==typeof e,i=n?e.mime:e;return n&&e.alias&&"symlink-broken"!=i?t="Alias":this.kinds[i]&&(t=!n||"directory"!==i||e.phash&&!e.isroot?this.kinds[i]:"Root"),t||(t=0===i.indexOf("text")?"Text":0===i.indexOf("image")?"Image":0===i.indexOf("audio")?"Audio":0===i.indexOf("video")?"Video":0===i.indexOf("application")?"App":i),this.messages["kind"+t]?this.i18n("kind"+t):i},mimeIsText:function(e){return!!(this.textMimes[e.toLowerCase()]||0===e.indexOf("text/")&&"rtf"!==e.substr(5,3)||e.match(/^application\/.+\+xml$/))},date:function(e,t){var n,i,a,o,r,s,l,c,d,p=this;return t||(t=new Date),s=t[p.getHours](),l=s>12?s-12:s,c=t[p.getMinutes](),d=t[p.getSeconds](),i=t[p.getDate](),a=t[p.getDay](),o=t[p.getMonth]()+1,r=t[p.getFullYear](),n=e.replace(/[a-z]/gi,function(e){switch(e){case"d":return i>9?i:"0"+i;case"j":return i;case"D":return p.i18n(p.i18.daysShort[a]);case"l":return p.i18n(p.i18.days[a]);case"m":return o>9?o:"0"+o;case"n":return o;case"M":return p.i18n(p.i18.monthsShort[o-1]);case"F":return p.i18n(p.i18.months[o-1]);case"Y":return r;case"y":return(""+r).substr(2);case"H":return s>9?s:"0"+s;case"G":return s;case"g":return l;case"h":return l>9?l:"0"+l;case"a":return s>=12?"pm":"am";case"A":return s>=12?"PM":"AM";case"i":return c>9?c:"0"+c;case"s":return d>9?d:"0"+d}return e})},formatDate:function(e,t){var n,i,a,o=this,r=t||e.ts;o.i18;return o.options.clientFormatDate&&r>0?(n=new Date(1e3*r),i=r>=this.yesterday?this.fancyFormat:this.dateFormat,a=o.date(i,n),r>=this.yesterday?a.replace("$1",this.i18n(r>=this.today?"Today":"Yesterday")):a):e.date?e.date.replace(/([a-z]+)\s/i,function(e,t){return o.i18n(t)+" "}):o.i18n("dateUnknown")},toLocaleString:function(e){var t=new Number(e);return t?t.toLocaleString?t.toLocaleString():String(e).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):e},perms2class:function(e){var t="";return e.read||e.write?e.read?e.write||(t="elfinder-ro"):t="elfinder-wo":t="elfinder-na",e.type&&(t+=" elfinder-"+this.escape(e.type)),t},formatPermissions:function(e){var t=[];return e.read&&t.push(this.i18n("read")),e.write&&t.push(this.i18n("write")),t.length?t.join(" "+this.i18n("and")+" "):this.i18n("noaccess")},formatSize:function(e){var t=1,n="b";return"unknown"==e?this.i18n("unknown"):(e>1073741824?(t=1073741824,n="GB"):e>1048576?(t=1048576,n="MB"):e>1024&&(t=1024,n="KB"),e/=t,(e>0?t>=1048576?e.toFixed(2):Math.round(e):0)+" "+n)},formatFileMode:function(t,n){var i,a,o,r,s,l,c,d,p;if(n||(n=this.options.fileModeStyle.toLowerCase()),t=e.trim(t),t.match(/[rwxs-]{9}$/i)){if(d=t=t.substr(-9),"string"==n)return d;for(p="",o=0,i=0;i<7;i+=3)a=t.substr(i,3),r=0,a.match(/[r]/i)&&(r+=4),a.match(/[w]/i)&&(r+=2),a.match(/[xs]/i)&&(a.match(/[xs]/)&&(r+=1),a.match(/[s]/i)&&(0==i?o+=4:3==i&&(o+=2))),p+=r.toString(8);o&&(p=o.toString(8)+p)}else{if(t=parseInt(t,8),p=t?t.toString(8):"",!t||"octal"==n)return p;for(a=t.toString(8),o=0,a.length>3&&(a=a.substr(-4),o=parseInt(a.substr(0,1),8),a=a.substr(1)),s=1==(1&o),c=2==(2&o),l=4==(4&o),d="",i=0;i<3;i++)d+=4==(4&parseInt(a.substr(i,1),8))?"r":"-",d+=2==(2&parseInt(a.substr(i,1),8))?"w":"-",d+=1==(1&parseInt(a.substr(i,1),8))?0==i&&l||1==i&&c?"s":"x":"-"}return"both"==n?d+" ("+p+")":"string"==n?d:p},registRawStringDecoder:function(t){e.isFunction(t)&&(this.decodeRawString=this.options.rawStringDecoder=t)},uploadMimeCheck:function(t,n){n=n||this.cwd().hash;var i,a,o=!0,r=this.option("uploadMime",n),s=function(n){var i=!1;return"string"==typeof n&&"all"===n.toLowerCase()?i=!0:Array.isArray(n)&&n.length&&e.each(n,function(e,n){if(n=n.toLowerCase(),"all"===n||0===t.indexOf(n))return i=!0,!1}),i};return t&&e.isPlainObject(r)&&(t=t.toLowerCase(),i=s(r.allow),a=s(r.deny),"allow"===r.firstOrder?(o=!1,a||i!==!0||(o=!0)):(o=!0,a!==!0||i||(o=!1))),o},sequence:function(e){var t=e.length,n=function(t,i){return++i,e[i]?n(t.then(e[i]),i):t};return t>1?n(e[0](),0):e[0]()},reloadContents:function(t){var n,i=e.Deferred();try{n=e('<iframe width="1" height="1" scrolling="no" frameborder="no" style="position:absolute; top:-1px; left:-1px" crossorigin="use-credentials">').attr("src",t).one("load",function(){var n=e(this);try{this.contentDocument.location.reload(!0),n.one("load",function(){n.remove(),i.resolve()})}catch(a){n.attr("src","").attr("src",t).one("load",function(){n.remove(),i.resolve()})}}).appendTo("body")}catch(a){n&&n.remove(),i.reject()}return i},makeNetmountOptionOauth:function(t,n,i,a){var o,r="boolean"==typeof a?a:null,s=Object.assign({noOffline:!1,root:"root",pathI18n:"folderId",folders:!0},null===r?a||{}:{noOffline:r}),l=function(n,a,r){var d,p=this,u=Object.keys(e.isPlainObject(r)?r:{}).length;a.next().remove(),u&&(d=e('<select class="ui-corner-all elfinder-tabstop" style="max-width:200px;">').append(e(e.map(r,function(e,t){return'<option value="'+n.escape((t+"").trim())+'">'+n.escape(e)+"</option>"}).join(""))).on("change click",function(a){var r,d=e(this),u=d.val();p.inputs.path.val(u),!s.folders||"change"!==a.type&&d.data("current")===u||(d.next().remove(),d.data("current",u),u!=s.root&&(r=c(),o&&"pending"===o.state()&&n.abortXHR(o,{quiet:!0,abort:!0}),d.after(r),o=n.request({data:{cmd:"netmount",protocol:t,host:i,user:"init",path:u,pass:"folders"},preventDefault:!0}).done(function(e){l.call(p,n,d,e.folders)}).always(function(){n.abortXHR(o,{quiet:!0}),r.remove()}).xhr))}),a.after(e("<div></div>").append(d)).closest(".ui-dialog").trigger("tabstopsInit"),d.trigger("focus"))},c=function(){return e('<div class="elfinder-netmount-spinner"></div>').append('<span class="elfinder-spinner"></span>')};return{vars:{},name:n,inputs:{offline:e('<input type="checkbox"/>').on("change",function(){e(this).parents("table.elfinder-netmount-tb").find("select:first").trigger("change","reset")}),host:e('<span><span class="elfinder-spinner"></span></span><input type="hidden"/>'),path:e('<input type="text" value="'+s.root+'"/>'),user:e('<input type="hidden"/>'),pass:e('<input type="hidden"/>'),mnt2res:e('<input type="hidden"/>')},select:function(n,a,o){var r=this.inputs,l=r.offline,c=e(r.host[0]),d=o||null;this.vars.mbtn=r.host.closest(".ui-dialog").children(".ui-dialog-buttonpane:first").find("button.elfinder-btncnt-0"),c.data("inrequest")||!c.find("span.elfinder-spinner").length&&"reset"!==d&&("winfocus"!==d||c.siblings("span.elfinder-button-icon-reload").length)?(l.closest("tr")[s.noOffline||r.user.val()?"hide":"show"](),c.data("funcexpup")&&c.data("funcexpup")()):(1===l.parent().children().length&&(r.path.parent().prev().html(n.i18n(s.pathI18n)),l.attr("title",n.i18n("offlineAccess")),l.uniqueId().after(e("<label></label>").attr("for",l.attr("id")).html(" "+n.i18n("offlineAccess")))),c.data("inrequest",!0).empty().addClass("elfinder-spinner").parent().find("span.elfinder-button-icon").remove(),n.request({data:{cmd:"netmount",protocol:t,host:i,user:"init",options:{id:n.id,offline:l.prop("checked")?1:0,pass:r.host[1].value}},preventDefault:!0}).done(function(e){c.removeClass("elfinder-spinner").html(e.body.replace(/\{msg:([^}]+)\}/g,function(e,t){return n.i18n(t,i)}))}),s.noOffline&&l.closest("tr").hide()),this.vars.mbtn[e(r.host[1]).val()?"show":"hide"]()},done:function(n,a){var o,r=this.inputs,c=this.protocol,d=e(r.host[0]),p=e(r.host[1]),u="&nbsp;",h=this.vars,f=function(){h.oauthW&&!document.hasFocus()&&--h.chkCnt&&(c.trigger("change","winfocus"),h.tm=setTimeout(f,3e3))};if(s.noOffline&&r.offline.closest("tr").hide(),"makebtn"==a.mode)d.removeClass("elfinder-spinner").removeData("expires").removeData("funcexpup"),o=r.host.find("input").on("mouseenter mouseleave",function(){e(this).toggleClass("ui-state-hover")}),a.url&&o.on("click",function(){h.tm&&clearTimeout(h.tm),h.oauthW=window.open(a.url),(n.UA.iOS||n.UA.Mac)&&n.isCORS&&!h.chkdone&&(h.chkCnt=60,h.tm=setTimeout(f,5e3))}),p.val(""),r.path.val(s.root).next().remove(),r.user.val(""),r.pass.val(""),!s.noOffline&&r.offline.closest("tr").show(),h.mbtn.hide();else if("folders"==a.mode)a.folders&&l.call(this,n,r.path.nextAll(":last"),a.folders);else{if(h.oauthW&&(h.tm&&clearTimeout(h.tm),h.oauthW.close(),delete h.oauthW,h.chkdone=!0),a.expires&&(u="()",d.data("expires",a.expires)),d.html(i+u).removeClass("elfinder-spinner"),a.expires&&(d.data("funcexpup",function(){var e=Math.floor((d.data("expires")-+new Date/1e3)/60);e<3?d.parent().children(".elfinder-button-icon-reload").click():(d.text(d.text().replace(/\(.*\)/,"("+n.i18n(["minsLeft",e])+")")),setTimeout(function(){d.is(":visible")&&d.data("funcexpup")()},6e4))}),d.data("funcexpup")()),a.reset)return void c.trigger("change","reset");d.parent().append(e('<span class="elfinder-button-icon elfinder-button-icon-reload" title="'+n.i18n("reAuth")+'">').on("click",function(){p.val("reauth"),c.trigger("change","reset")})),p.val(t),h.mbtn.show(),a.folders&&l.call(this,n,r.path,a.folders),a.mnt2res&&r.mnt2res.val("1"),r.user.val("done"),r.pass.val("done"),r.offline.closest("tr").hide()}d.removeData("inrequest")},fail:function(t,n){e(this.inputs.host[0]).removeData("inrequest"),this.protocol.trigger("change","reset")},integrateInfo:s.integrate}},findCwdNodes:function(t,n){var i=this,a=(this.getUI("cwd"),this.cwd().hash),o=e();return n=n||{},e.each(t,function(e,t){if((t.phash===a||i.searchStatus.state>1)&&(o=o.add(i.cwdHash2Elm(t.hash)),n.firstOnly))return!1}),o},convAbsUrl:function(e){if(e.match(/^http/i))return e;if("//"===e.substr(0,2))return window.location.protocol+e;var t,n=window.location.protocol+"//"+window.location.host,i=/[^\/]+\/\.\.\//;for(t="/"===e.substr(0,1)?n+e:n+window.location.pathname.replace(/\/[^\/]+$/,"/")+e,t=t.replace("/./","/");i.test(t);)t=t.replace(i,"");return t},isSameOrigin:function(e){var t;if(e=this.convAbsUrl(e),location.origin&&window.URL)try{return t=new URL(e),location.origin===t.origin}catch(n){}return t=document.createElement("a"),t.href=e,location.protocol===t.protocol&&location.host===t.host&&location.port&&t.port},navHash2Id:function(e){return this.navPrefix+e},navId2Hash:function(e){return"string"==typeof e&&e.substr(this.navPrefix.length)},cwdHash2Id:function(e){return this.cwdPrefix+e},cwdId2Hash:function(e){return"string"==typeof e&&e.substr(this.cwdPrefix.length)},navHash2Elm:function(t){return e(document.getElementById(this.navHash2Id(t)))},cwdHash2Elm:function(t){return e(document.getElementById(this.cwdHash2Id(t)))},isInWindow:function(e,t){var n,i;return!!(n=e.get(0))&&(!(!t&&null===n.offsetParent)&&(i=n.getBoundingClientRect(),!!document.elementFromPoint(i.left,i.top)))},zIndexCalc:function(){var t=this,n=this.getUI(),i=n.css("z-index");i&&"auto"!==i&&"inherit"!==i?t.zIndex=i:n.parents().each(function(n,i){var a=e(i).css("z-index");if("auto"!==a&&"inherit"!==a&&(a=parseInt(a)))return t.zIndex=a,!1})},loadScript:function(t,n,i,a){var o,r,s={dataType:"script",cache:!0},l={},c={};return i=i||{},i.tryRequire&&this.hasRequire?require(t,n,i.error):(o=function(){var t,o,r;e.each(c,function(e,t){if("success"!==t&&"notmodified"!==t)return r=!0,!1}),r?i.error&&e.isFunction(i.error)&&i.error({loadResults:c}):e.isFunction(n)&&(a&&"undefined"==typeof a.obj[a.name]?(t=a.timeout?a.timeout/10:1,o=setInterval(function(){(--t<0||"undefined"!=typeof a.obj[a.name])&&(clearInterval(o),n())},10)):n())},"tag"===i.loadType?(e("head > script").each(function(){l[this.src]=this}),r=t.length,e.each(t,function(t,n){var a,s=!1;l[n]?(c[t]=l[n]._error||"success",--r<1&&o()):(a=document.createElement("script"),a.charset=i.charset||"UTF-8",e("head").append(a),a.onload=a.onreadystatechange=function(){s||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(s=!0,c[t]="success",--r<1&&o())},a.onerror=function(e){c[t]=a._error=e&&e.type?e.type:"error",--r<1&&o()},a.src=n)})):(i=e.isPlainObject(i)?Object.assign(s,i):s,r=0,function d(n,a){void 0!==n&&(c[r++]=a),t.length?e.ajax(Object.assign({},i,{url:t.shift(),success:d,error:d})):o()}())),this},loadCss:function(t,n){var i,a,o=this;return"string"==typeof t&&(t=[t]),n&&(n.className&&(i=n.className),n.dfd&&n.dfd.promise&&(a=[])),e.each(t,function(t,n){var r;n=o.convAbsUrl(n).replace(/^https?:/i,""),a&&(a[t]=e.Deferred()),e('head > link[href="'+o.escape(n)+'"]').length?a&&a[t].resolve():(r=document.createElement("link"),r.type="text/css",r.rel="stylesheet",r.href=n,i&&(r.className=i),a&&(r.onload=function(){a[t].resolve()},r.onerror=function(){a[t].reject()}),e("head").append(r))}),a&&e.when.apply(null,a).done(function(){n.dfd.resolve()}).fail(function(){n.dfd.reject()}),this},asyncJob:function(t,n,i){var a,o,r=e.Deferred(),s=!1,l=Object.assign({interval:0,numPerOnce:1},i||{}),c=[],d=[],p=[];return r._abort=function(e){o&&clearTimeout(o),d=[],s=!0,"pending"===r.state()&&r[e?"resolve":"reject"](c)},r.fail(function(){r._abort()}).always(function(){r._abort=function(){}}),"function"==typeof t&&Array.isArray(n)?(d=n.concat(),a=function(){var e,n,i;if(!s){for(p=d.splice(0,l.numPerOnce),n=p.length,e=0;e<n&&!s;e++)i=t(p[e]),null!==i&&c.push(i);s||(d.length?o=setTimeout(a,l.interval):r.resolve(c))}},d.length?o=setTimeout(a,0):r.resolve(c)):r.reject(),r},getSize:function(t){var n=this,i=[],a=t.length,o=e.Deferred().fail(function(){e.each(i,function(e,t){t&&(t.syncOnFail&&t.syncOnFail(!1),t.reject())})}),r=function(t){var i=[];return"directory"===t.mime&&e.each(n.leafRoots,function(e,a){var o;if(e===t.hash)i.push.apply(i,a);else for(o=(n.file(e)||{}).phash;o;)o===t.hash&&i.push.apply(i,a),o=(n.file(o)||{}).phash}),i},s=function(t){var i=e.Deferred(),a=n.file(t),o=a?a.phash:t;return o&&!n.file(o)?n.request({data:{cmd:"parents",target:o},preventFail:!0}).done(function(){n.one("parentsdone",function(){i.resolve()})}).fail(function(){i.resolve()}):i.resolve(),i},l=function(){var t=e.Deferred(),i=Object.keys(n.leafRoots).length;return i>0?e.each(n.leafRoots,function(e){s(e).done(function(){--i,i<1&&t.resolve()})}):t.resolve(),t};return n.autoSync("stop"),l().done(function(){var s=[],l={},c=[],d=[],p={};e.each(t,function(){s.push.apply(s,r(n.file(this)))}),t.push.apply(t,s),e.each(t,function(){var t=n.root(this),i=n.file(this);i&&(i.sizeInfo||"directory"!==i.mime)?d.push(e.Deferred().resolve(i.sizeInfo?i.sizeInfo:{size:i.size,dirCnt:0,fileCnt:1})):l[t]?l[t].push(this.toString()):l[t]=[this.toString()]}),e.each(l,function(){var e=c.length;1===this.length&&(p[e]=this[0]),c.push(n.request({data:{cmd:"size",targets:this},preventDefault:!0}))}),i.push.apply(i,c),
c.push.apply(c,d),e.when.apply(e,c).fail(function(){o.reject()}).done(function(){var t,i,r,s=function(t,i){var a;(a=n.file(t))&&(a.sizeInfo={isCache:!0},e.each(["size","dirCnt","fileCnt"],function(){a.sizeInfo[this]=i[this]||0}),a.size=parseInt(a.sizeInfo.size),m.push(a))},l=0,c=0,d=0,u=arguments.length,h=[],f="",m=[];for(t=0;t<u;t++)r=arguments[t],i=null,r.isCache||(p[t]&&(i=n.file(p[t]))?s(p[t],r):r.sizes&&e.isPlainObject(r.sizes)&&e.each(r.sizes,function(e,t){s(e,t)})),l+=parseInt(r.size),c!==!1&&("undefined"==typeof r.fileCnt?c=!1:c+=parseInt(r.fileCnt||0)),d!==!1&&("undefined"==typeof r.dirCnt?d=!1:d+=parseInt(r.dirCnt||0));m.length&&n.change({changed:m}),d!==!1&&h.push(n.i18n("folders")+": "+(d-(a>1?0:1))),c!==!1&&h.push(n.i18n("files")+": "+c),h.length&&(f="<br>"+h.join(", ")),o.resolve({size:l,fileCnt:c,dirCnt:d,formated:(l>=0?n.formatSize(l):n.i18n("unknown"))+f})}),n.autoSync()}),o},wkObjUrl:null,getWorker:function(e){function t(){self.onmessage=function(e){var t=e.data;try{if(self.data=t.data,t.scripts)for(var n=0;n<t.scripts.length;n++)importScripts(t.scripts[n]);self.postMessage(self.res)}catch(e){self.postMessage({error:e.toString()})}}}var n;try{this.wkObjUrl||(this.wkObjUrl=(window.URL||window.webkitURL).createObjectURL(new Blob([t.toString().replace(/\s+/g," ").replace(/ *([^\w]) */g,"$1").replace(/^function\b.+?\{|\}$/g,"")],{type:"text/javascript"}))),n=new Worker(this.wkObjUrl,e)}catch(i){this.debug("error",i.toString())}return n},getWorkerUrl:function(e){return this.convAbsUrl(this.baseUrl+"js/worker/"+e)},getTheme:function(t){var n,i,a=this,o=e.Deferred(),r=function(t,n){return n||(n=a.convAbsUrl(a.baseUrl)),Array.isArray(t)?e.map(t,function(e){return r(e,n)}):t.match(/^(?:http|\/\/)/i)?t:n+t.replace(/^(?:\.\/|\/)/,"")};return t&&(n=a.options.themes[t])?"string"==typeof n?(url=r(n),(i=url.match(/^(.+\/)[^\/]+\.json$/i))?e.getJSON(url).done(function(e){n=e,n.id=t,n.cssurls&&(n.cssurls=r(n.cssurls,i[1])),o.resolve(n)}).fail(function(){o.reject()}):o.resolve({id:t,name:t,cssurls:[url]})):e.isPlainObject(n)&&n.cssurls?(n.id=t,n.cssurls=r(n.cssurls),Array.isArray(n.cssurls)||(n.cssurls=[n.cssurls]),n.name||(n.name=t),o.resolve(n)):o.reject():o.reject(),o},changeTheme:function(t){var n=this;return t&&(!n.options.themes[t]||n.theme&&n.theme.id===t?"default"===t&&n.theme&&"default"!==n.theme.id&&(e("head>link.elfinder-theme-ext").remove(),n.theme=null,n.trigger&&n.trigger("themechange")):n.getTheme(t).done(function(t){t.cssurls&&(e("head>link.elfinder-theme-ext").remove(),n.loadCss(t.cssurls,{className:"elfinder-theme-ext",dfd:e.Deferred().done(function(){n.theme=t,n.trigger&&n.trigger("themechange")})}))})),this},applyLeafRootStats:function(t,n){var i=this,a=n?t:i.file(t.hash)||t,o=a.ts,r=!1;return!n&&t._realStats||(t._realStats={locked:t.locked||0,dirs:t.dirs||0,ts:t.ts}),t.locked=1,a.locked||(r=!0),t.dirs=1,a.dirs||(r=!0),e.each(i.leafRoots[t.hash],function(){var e=i.file(this);e&&e.ts&&(t.ts||0)<e.ts&&(t.ts=e.ts)}),o!==t.ts&&(r=!0),r},abortXHR:function(e,t){var n=t||{};e&&(n.quiet&&(e.quiet=!0),n.abort&&e._requestId&&this.request({data:{cmd:"abort",id:e._requestId},preventDefault:!0}),e.abort(),e=void 0)},setCustomHeaderByXhr:function(t){var n=this;t.getResponseHeader&&n.parrotHeaders&&n.parrotHeaders.length&&e.each(n.parrotHeaders,function(e,i){var a=t.getResponseHeader(i);a?(n.customHeaders[i]=a,n.sessionStorage("core-ph:"+i,a)):"string"==typeof a&&(delete n.customHeaders[i],n.sessionStorage("core-ph:"+i,null))})},hasParrotHeaders:function(){var e=!1,t=this.parrotHeaders;if(Object.keys(this.customHeaders).length)for(var n=0;n<t.length;n++)if(this.customHeaders[t[n]]){e=!0;break}return e},getRequestId:function(){return(+new Date).toString(16)+Math.floor(1e3*Math.random()).toString(16)},arrayFlip:function(t,n){var i,a={},o=e.isArray(t);for(i in t)(o||t.hasOwnProperty(i))&&(a[t[i]]=n||i);return a},splitFileExtention:function(e){var t;return(t=e.match(/^(.+?)?\.((?:tar\.(?:gz|bz|bz2|z|lzo))|cpio\.gz|ps\.gz|xcf\.(?:gz|bz2)|[a-z0-9]{1,10})$/i))?("undefined"==typeof t[1]&&(t[1]=""),[t[1],t[2]]):[e,""]},sliceArrayBuffer:function(e,t){for(var n=[],i=0;i*t<e.byteLength;)n.push(e.slice(i*t,(i+1)*t)),i++;return n},arrayBufferToBase64:function(e){if(!window.btoa)return"";var t=new Uint8Array(e),n=Array.prototype.slice.call(t),i=n.map(function(e){return String.fromCharCode(e)});return window.btoa(i.join(""))},log:function(e){return window.console&&window.console.log&&window.console.log(e),this},debug:function(t,n){var i,a,o=this,r=this.options.debug,s=this.options.toastBackendWarn;return"backend-error"===t?(!this.cwd().hash||r&&("all"===r||r["backend-error"]))&&(n=Array.isArray(n)?n:[n],this.error(n)):"backend-warning"===t?(a=!0,s&&(i=e.isPlainObject(s)?s:{},e.each(Array.isArray(n)?n:[n],function(e,t){o.toast(Object.assign({mode:"warning",msg:t},i))}))):"backend-debug"===t&&this.trigger("backenddebug",n),(a||r&&("all"===r||r[t]))&&window.console&&window.console.log&&window.console.log("elfinder debug: ["+t+"] ["+this.id+"]",n),this},responseDebug:function(e){var t,n=e.debug;n&&(t=this.options.debug,t&&"all"===t||(t||(t=this.options.debug={}),t["backend-error"]=!0,t.warning=!0),n.mountErrors&&("string"==typeof n.mountErrors||Array.isArray(n.mountErrors)&&n.mountErrors.length)&&this.debug("backend-error",n.mountErrors),n.backendErrors&&("string"==typeof n.backendErrors||Array.isArray(n.backendErrors)&&n.backendErrors.length)&&this.debug("backend-warning",n.backendErrors))},time:function(e){window.console&&window.console.time&&window.console.time(e)},timeEnd:function(e){window.console&&window.console.timeEnd&&window.console.timeEnd(e)}},Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.keys called on non-object");var o=[];for(var r in a)e.call(a,r)&&o.push(r);if(t)for(var s=0;s<i;s++)e.call(a,n[s])&&o.push(n[s]);return o}}()),Array.isArray||(Array.isArray=function(e){return jQuery.isArray(e)}),Object.assign||(Object.assign=function(){return jQuery.extend.apply(null,arguments)}),String.prototype.repeat||(String.prototype.repeat=function(e){"use strict";if(null==this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if(e=+e,e!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="",i=0;i<e;i++)n+=t;return n}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(){try{return void Array.apply(null,{})}catch(e){}var t=Object.prototype.toString,n="[object Array]",i=Function.prototype.apply,a=Array.prototype.slice;Function.prototype.apply=function(e,o){return i.call(this,e,t.call(o)===n?o:a.call(o))}}(),Array.from||(Array.from=function(e){return 1===e.length?[e[0]]:Array.apply(null,e)}),window.cancelAnimationFrame||!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),a=Math.max(0,16-(i-e)),o=window.setTimeout(function(){t(i+a)},a);return e=i+a,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),i.prototype.version="2.1.57",function(){if(e.ui&&e.ui.ddmanager){var t=e.ui.ddmanager.prepareOffsets;e.ui.ddmanager.prepareOffsets=function(n,i){var a=function(e){if(e.is(":hidden"))return!0;var t=e[0].getBoundingClientRect();return!document.elementFromPoint(t.left,t.top)&&!document.elementFromPoint(t.left+t.width,t.top+t.height)};if("mousedown"===i.type||n.options.elfRefresh){var o,r,s=e.ui.ddmanager.droppables[n.options.scope]||[],l=s.length;for(o=0;o<l;o++)r=s[o],r.options.autoDisable&&(!r.options.disabled||r.options.autoDisable>1)&&(r.options.disabled=a(r.element),r.options.autoDisable=r.options.disabled?2:1)}return t(n,i)}}}(),function(e,t){e.ajaxTransport("+binary",function(e,t,n){if(window.FormData&&(e.dataType&&"binary"==e.dataType||e.data&&(window.ArrayBuffer&&e.data instanceof ArrayBuffer||window.Blob&&e.data instanceof Blob))){var i;return{send:function(t,n){var a,o=e.responseType||"blob",r=e.xhr();if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)r[a]=e.xhrFields[a];e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest");for(a in t)r.setRequestHeader(a,t[a]);i=function(t){return function(){if(i)if(i=r.onload=r.onerror=r.onabort=r.ontimeout=null,"abort"===t)r.abort();else if("error"===t)n(r.status,r.statusText);else{var a={};a[e.dataType]=r.response,n(r.status,r.statusText,a,r.getAllResponseHeaders())}}},r.onload=i(),r.onabort=r.onerror=r.ontimeout=i("error"),i=i("abort");try{r.responseType=o,r.send(e.data||null)}catch(s){if(i)throw s}},abort:function(){i&&i()}}}})}(window.jQuery),function(e){function t(t,n){if(!(t.originalEvent.touches.length>1)){e(t.currentTarget).hasClass("touch-punch-keep-default")||t.preventDefault();var i=t.originalEvent.changedTouches[0],a=document.createEvent("MouseEvents");a.initMouseEvent(n,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(a)}}if(e.support.touch="ontouchend"in document,e.support.touch){var n,i,a,o=e.ui.mouse.prototype,r=o._mouseInit,s=o._mouseDestroy;o._touchStart=function(e){var o=this;!n&&o._mouseCapture(e.originalEvent.changedTouches[0])&&(i=e.originalEvent.changedTouches[0].screenX.toFixed(0),a=e.originalEvent.changedTouches[0].screenY.toFixed(0),n=!0,o._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},o._touchMove=function(e){if(n){var o=e.originalEvent.changedTouches[0].screenX.toFixed(0),r=e.originalEvent.changedTouches[0].screenY.toFixed(0);Math.abs(i-o)<=4&&Math.abs(a-r)<=4||(this._touchMoved=!0,t(e,"mousemove"))}},o._touchEnd=function(e){n&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),n=!1,this._touchMoved=!1)},o._mouseInit=function(){var t=this;t.element.hasClass("touch-punch")&&t.element.on({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)},o._mouseDestroy=function(){var t=this;t.element.hasClass("touch-punch")&&t.element.off({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),s.call(t)}}}(jQuery),e.fn.elfinder=function(t,n){return"instance"===t?this.getElFinder():this.each(function(){var a,o="string"==typeof t?t:"",r="function"==typeof n?n:void 0,s=this.elfinder;if(s)switch(o){case"close":case"hide":s.hide();break;case"open":case"show":s.show();break;case"destroy":s.destroy();break;case"reload":case"restart":s&&(a=e.extend(!0,s.options,e.isPlainObject(n)?n:{}),r=s.bootCallback,s.reloadCallback&&e.isFunction(s.reloadCallback)?s.reloadCallback(a,r):(s.destroy(),new i(this,a,r)))}else e.isPlainObject(t)&&new i(this,t,r)})},e.fn.getElFinder=function(){var e;return this.each(function(){if(this.elfinder)return e=this.elfinder,!1}),e},e.fn.elfUiWidgetInstance=function(e){try{return this[e]("instance")}catch(t){var n=this.data("ui-"+e);return n&&"object"==typeof n&&n.widgetFullName==="ui-"+e?n:null}},e.fn.scrollRight||e.fn.extend({scrollRight:function(e){var t=this.get(0);return void 0===e?Math.max(0,t.scrollWidth-(t.scrollLeft+t.clientWidth)):this.scrollLeft(t.scrollWidth-t.clientWidth-e)}}),e.fn.scrollBottom||e.fn.extend({scrollBottom:function(e){var t=this.get(0);return void 0===e?Math.max(0,t.scrollHeight-(t.scrollTop+t.clientHeight)):this.scrollTop(t.scrollHeight-t.clientHeight-e)}}),i.prototype.mimeTypes={"application/x-executable":"exe","application/x-jar":"jar","application/x-gzip":"gz","application/x-bzip2":"tbz","application/x-rar":"rar","text/x-php":"php","text/javascript":"js","application/rtfd":"rtfd","text/x-python":"py","text/x-ruby":"rb","text/x-shellscript":"sh","text/x-perl":"pl","text/xml":"xml","text/x-csrc":"c","text/x-chdr":"h","text/x-c++src":"cpp","text/x-c++hdr":"hh","text/x-markdown":"md","text/x-yaml":"yml","image/x-ms-bmp":"bmp","image/x-targa":"tga","image/xbm":"xbm","image/pxm":"pxm","audio/wav":"wav","video/x-dv":"dv","video/x-ms-wmv":"wm","video/ogg":"ogm","video/MP2T":"m2ts","application/x-mpegURL":"m3u8","application/dash+xml":"mpd","application/andrew-inset":"ez","application/applixware":"aw","application/atom+xml":"atom","application/atomcat+xml":"atomcat","application/atomsvc+xml":"atomsvc","application/ccxml+xml":"ccxml","application/cdmi-capability":"cdmia","application/cdmi-container":"cdmic","application/cdmi-domain":"cdmid","application/cdmi-object":"cdmio","application/cdmi-queue":"cdmiq","application/cu-seeme":"cu","application/davmount+xml":"davmount","application/docbook+xml":"dbk","application/dssc+der":"dssc","application/dssc+xml":"xdssc","application/ecmascript":"ecma","application/emma+xml":"emma","application/epub+zip":"epub","application/exi":"exi","application/font-tdpfr":"pfr","application/gml+xml":"gml","application/gpx+xml":"gpx","application/gxf":"gxf","application/hyperstudio":"stk","application/inkml+xml":"ink","application/ipfix":"ipfix","application/java-serialized-object":"ser","application/java-vm":"class","application/json":"json","application/jsonml+json":"jsonml","application/lost+xml":"lostxml","application/mac-binhex40":"hqx","application/mac-compactpro":"cpt","application/mads+xml":"mads","application/marc":"mrc","application/marcxml+xml":"mrcx","application/mathematica":"ma","application/mathml+xml":"mathml","application/mbox":"mbox","application/mediaservercontrol+xml":"mscml","application/metalink+xml":"metalink","application/metalink4+xml":"meta4","application/mets+xml":"mets","application/mods+xml":"mods","application/mp21":"m21","application/mp4":"mp4s","application/msword":"doc","application/mxf":"mxf","application/octet-stream":"bin","application/oda":"oda","application/oebps-package+xml":"opf","application/ogg":"ogx","application/omdoc+xml":"omdoc","application/onenote":"onetoc","application/oxps":"oxps","application/patch-ops-error+xml":"xer","application/pdf":"pdf","application/pgp-encrypted":"pgp","application/pgp-signature":"asc","application/pics-rules":"prf","application/pkcs10":"p10","application/pkcs7-mime":"p7m","application/pkcs7-signature":"p7s","application/pkcs8":"p8","application/pkix-attr-cert":"ac","application/pkix-cert":"cer","application/pkix-crl":"crl","application/pkix-pkipath":"pkipath","application/pkixcmp":"pki","application/pls+xml":"pls","application/postscript":"ai","application/prs.cww":"cww","application/pskc+xml":"pskcxml","application/rdf+xml":"rdf","application/reginfo+xml":"rif","application/relax-ng-compact-syntax":"rnc","application/resource-lists+xml":"rl","application/resource-lists-diff+xml":"rld","application/rls-services+xml":"rs","application/rpki-ghostbusters":"gbr","application/rpki-manifest":"mft","application/rpki-roa":"roa","application/rsd+xml":"rsd","application/rss+xml":"rss","application/rtf":"rtf","application/sbml+xml":"sbml","application/scvp-cv-request":"scq","application/scvp-cv-response":"scs","application/scvp-vp-request":"spq","application/scvp-vp-response":"spp","application/sdp":"sdp","application/set-payment-initiation":"setpay","application/set-registration-initiation":"setreg","application/shf+xml":"shf","application/smil+xml":"smi","application/sparql-query":"rq","application/sparql-results+xml":"srx","application/srgs":"gram","application/srgs+xml":"grxml","application/sru+xml":"sru","application/ssdl+xml":"ssdl","application/ssml+xml":"ssml","application/tei+xml":"tei","application/thraud+xml":"tfi","application/timestamped-data":"tsd","application/vnd.3gpp.pic-bw-large":"plb","application/vnd.3gpp.pic-bw-small":"psb","application/vnd.3gpp.pic-bw-var":"pvb","application/vnd.3gpp2.tcap":"tcap","application/vnd.3m.post-it-notes":"pwn","application/vnd.accpac.simply.aso":"aso","application/vnd.accpac.simply.imp":"imp","application/vnd.acucobol":"acu","application/vnd.acucorp":"atc","application/vnd.adobe.air-application-installer-package+zip":"air","application/vnd.adobe.formscentral.fcdt":"fcdt","application/vnd.adobe.fxp":"fxp","application/vnd.adobe.xdp+xml":"xdp","application/vnd.adobe.xfdf":"xfdf","application/vnd.ahead.space":"ahead","application/vnd.airzip.filesecure.azf":"azf","application/vnd.airzip.filesecure.azs":"azs","application/vnd.amazon.ebook":"azw","application/vnd.americandynamics.acc":"acc","application/vnd.amiga.ami":"ami","application/vnd.android.package-archive":"apk","application/vnd.anser-web-certificate-issue-initiation":"cii","application/vnd.anser-web-funds-transfer-initiation":"fti","application/vnd.antix.game-component":"atx","application/vnd.apple.installer+xml":"mpkg","application/vnd.aristanetworks.swi":"swi","application/vnd.astraea-software.iota":"iota","application/vnd.audiograph":"aep","application/vnd.blueice.multipass":"mpm","application/vnd.bmi":"bmi","application/vnd.businessobjects":"rep","application/vnd.chemdraw+xml":"cdxml","application/vnd.chipnuts.karaoke-mmd":"mmd","application/vnd.cinderella":"cdy","application/vnd.claymore":"cla","application/vnd.cloanto.rp9":"rp9","application/vnd.clonk.c4group":"c4g","application/vnd.cluetrust.cartomobile-config":"c11amc","application/vnd.cluetrust.cartomobile-config-pkg":"c11amz","application/vnd.commonspace":"csp","application/vnd.contact.cmsg":"cdbcmsg","application/vnd.cosmocaller":"cmc","application/vnd.crick.clicker":"clkx","application/vnd.crick.clicker.keyboard":"clkk","application/vnd.crick.clicker.palette":"clkp","application/vnd.crick.clicker.template":"clkt","application/vnd.crick.clicker.wordbank":"clkw","application/vnd.criticaltools.wbs+xml":"wbs","application/vnd.ctc-posml":"pml","application/vnd.cups-ppd":"ppd","application/vnd.curl.car":"car","application/vnd.curl.pcurl":"pcurl","application/vnd.dart":"dart","application/vnd.data-vision.rdz":"rdz","application/vnd.dece.data":"uvf","application/vnd.dece.ttml+xml":"uvt","application/vnd.dece.unspecified":"uvx","application/vnd.dece.zip":"uvz","application/vnd.denovo.fcselayout-link":"fe_launch","application/vnd.dna":"dna","application/vnd.dolby.mlp":"mlp","application/vnd.dpgraph":"dpg","application/vnd.dreamfactory":"dfac","application/vnd.ds-keypoint":"kpxx","application/vnd.dvb.ait":"ait","application/vnd.dvb.service":"svc","application/vnd.dynageo":"geo","application/vnd.ecowin.chart":"mag","application/vnd.enliven":"nml","application/vnd.epson.esf":"esf","application/vnd.epson.msf":"msf","application/vnd.epson.quickanime":"qam","application/vnd.epson.salt":"slt","application/vnd.epson.ssf":"ssf","application/vnd.eszigno3+xml":"es3","application/vnd.ezpix-album":"ez2","application/vnd.ezpix-package":"ez3","application/vnd.fdf":"fdf","application/vnd.fdsn.mseed":"mseed","application/vnd.fdsn.seed":"seed","application/vnd.flographit":"gph","application/vnd.fluxtime.clip":"ftc","application/vnd.framemaker":"fm","application/vnd.frogans.fnc":"fnc","application/vnd.frogans.ltf":"ltf","application/vnd.fsc.weblaunch":"fsc","application/vnd.fujitsu.oasys":"oas","application/vnd.fujitsu.oasys2":"oa2","application/vnd.fujitsu.oasys3":"oa3","application/vnd.fujitsu.oasysgp":"fg5","application/vnd.fujitsu.oasysprs":"bh2","application/vnd.fujixerox.ddd":"ddd","application/vnd.fujixerox.docuworks":"xdw","application/vnd.fujixerox.docuworks.binder":"xbd","application/vnd.fuzzysheet":"fzs","application/vnd.genomatix.tuxedo":"txd","application/vnd.geogebra.file":"ggb","application/vnd.geogebra.tool":"ggt","application/vnd.geometry-explorer":"gex","application/vnd.geonext":"gxt","application/vnd.geoplan":"g2w","application/vnd.geospace":"g3w","application/vnd.gmx":"gmx","application/vnd.google-earth.kml+xml":"kml","application/vnd.google-earth.kmz":"kmz","application/vnd.grafeq":"gqf","application/vnd.groove-account":"gac","application/vnd.groove-help":"ghf","application/vnd.groove-identity-message":"gim","application/vnd.groove-injector":"grv","application/vnd.groove-tool-message":"gtm","application/vnd.groove-tool-template":"tpl","application/vnd.groove-vcard":"vcg","application/vnd.hal+xml":"hal","application/vnd.handheld-entertainment+xml":"zmm","application/vnd.hbci":"hbci","application/vnd.hhe.lesson-player":"les","application/vnd.hp-hpgl":"hpgl","application/vnd.hp-hpid":"hpid","application/vnd.hp-hps":"hps","application/vnd.hp-jlyt":"jlt","application/vnd.hp-pcl":"pcl","application/vnd.hp-pclxl":"pclxl","application/vnd.hydrostatix.sof-data":"sfd-hdstx","application/vnd.ibm.minipay":"mpy","application/vnd.ibm.modcap":"afp","application/vnd.ibm.rights-management":"irm","application/vnd.ibm.secure-container":"sc","application/vnd.iccprofile":"icc","application/vnd.igloader":"igl","application/vnd.immervision-ivp":"ivp","application/vnd.immervision-ivu":"ivu","application/vnd.insors.igm":"igm","application/vnd.intercon.formnet":"xpw","application/vnd.intergeo":"i2g","application/vnd.intu.qbo":"qbo","application/vnd.intu.qfx":"qfx","application/vnd.ipunplugged.rcprofile":"rcprofile","application/vnd.irepository.package+xml":"irp","application/vnd.is-xpr":"xpr","application/vnd.isac.fcs":"fcs","application/vnd.jam":"jam","application/vnd.jcp.javame.midlet-rms":"rms","application/vnd.jisp":"jisp","application/vnd.joost.joda-archive":"joda","application/vnd.kahootz":"ktz","application/vnd.kde.karbon":"karbon","application/vnd.kde.kchart":"chrt","application/vnd.kde.kformula":"kfo","application/vnd.kde.kivio":"flw","application/vnd.kde.kontour":"kon","application/vnd.kde.kpresenter":"kpr","application/vnd.kde.kspread":"ksp","application/vnd.kde.kword":"kwd","application/vnd.kenameaapp":"htke","application/vnd.kidspiration":"kia","application/vnd.kinar":"kne","application/vnd.koan":"skp","application/vnd.kodak-descriptor":"sse","application/vnd.las.las+xml":"lasxml","application/vnd.llamagraphics.life-balance.desktop":"lbd","application/vnd.llamagraphics.life-balance.exchange+xml":"lbe","application/vnd.lotus-1-2-3":123,"application/vnd.lotus-approach":"apr","application/vnd.lotus-freelance":"pre","application/vnd.lotus-notes":"nsf","application/vnd.lotus-organizer":"org","application/vnd.lotus-screencam":"scm","application/vnd.lotus-wordpro":"lwp","application/vnd.macports.portpkg":"portpkg","application/vnd.mcd":"mcd","application/vnd.medcalcdata":"mc1","application/vnd.mediastation.cdkey":"cdkey","application/vnd.mfer":"mwf","application/vnd.mfmp":"mfm","application/vnd.micrografx.flo":"flo","application/vnd.micrografx.igx":"igx","application/vnd.mif":"mif","application/vnd.mobius.daf":"daf","application/vnd.mobius.dis":"dis","application/vnd.mobius.mbk":"mbk","application/vnd.mobius.mqy":"mqy","application/vnd.mobius.msl":"msl","application/vnd.mobius.plc":"plc","application/vnd.mobius.txf":"txf","application/vnd.mophun.application":"mpn","application/vnd.mophun.certificate":"mpc","application/vnd.mozilla.xul+xml":"xul","application/vnd.ms-artgalry":"cil","application/vnd.ms-cab-compressed":"cab","application/vnd.ms-excel":"xls","application/vnd.ms-excel.addin.macroenabled.12":"xlam","application/vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","application/vnd.ms-excel.sheet.macroenabled.12":"xlsm","application/vnd.ms-excel.template.macroenabled.12":"xltm","application/vnd.ms-fontobject":"eot","application/vnd.ms-htmlhelp":"chm","application/vnd.ms-ims":"ims","application/vnd.ms-lrm":"lrm","application/vnd.ms-officetheme":"thmx","application/vnd.ms-pki.seccat":"cat","application/vnd.ms-pki.stl":"stl","application/vnd.ms-powerpoint":"ppt","application/vnd.ms-powerpoint.addin.macroenabled.12":"ppam","application/vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","application/vnd.ms-powerpoint.slide.macroenabled.12":"sldm","application/vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","application/vnd.ms-powerpoint.template.macroenabled.12":"potm","application/vnd.ms-project":"mpp","application/vnd.ms-word.document.macroenabled.12":"docm","application/vnd.ms-word.template.macroenabled.12":"dotm","application/vnd.ms-works":"wps","application/vnd.ms-wpl":"wpl","application/vnd.ms-xpsdocument":"xps","application/vnd.mseq":"mseq","application/vnd.musician":"mus","application/vnd.muvee.style":"msty","application/vnd.mynfc":"taglet","application/vnd.neurolanguage.nlu":"nlu","application/vnd.nitf":"ntf","application/vnd.noblenet-directory":"nnd","application/vnd.noblenet-sealer":"nns","application/vnd.noblenet-web":"nnw","application/vnd.nokia.n-gage.data":"ngdat","application/vnd.nokia.n-gage.symbian.install":"n-gage","application/vnd.nokia.radio-preset":"rpst","application/vnd.nokia.radio-presets":"rpss","application/vnd.novadigm.edm":"edm","application/vnd.novadigm.edx":"edx","application/vnd.novadigm.ext":"ext","application/vnd.oasis.opendocument.chart":"odc","application/vnd.oasis.opendocument.chart-template":"otc","application/vnd.oasis.opendocument.database":"odb","application/vnd.oasis.opendocument.formula":"odf","application/vnd.oasis.opendocument.formula-template":"odft","application/vnd.oasis.opendocument.graphics":"odg","application/vnd.oasis.opendocument.graphics-template":"otg","application/vnd.oasis.opendocument.image":"odi","application/vnd.oasis.opendocument.image-template":"oti","application/vnd.oasis.opendocument.presentation":"odp","application/vnd.oasis.opendocument.presentation-template":"otp","application/vnd.oasis.opendocument.spreadsheet":"ods","application/vnd.oasis.opendocument.spreadsheet-template":"ots","application/vnd.oasis.opendocument.text":"odt","application/vnd.oasis.opendocument.text-master":"odm","application/vnd.oasis.opendocument.text-template":"ott","application/vnd.oasis.opendocument.text-web":"oth","application/vnd.olpc-sugar":"xo","application/vnd.oma.dd2+xml":"dd2","application/vnd.openofficeorg.extension":"oxt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.openxmlformats-officedocument.presentationml.slide":"sldx","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","application/vnd.openxmlformats-officedocument.presentationml.template":"potx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","application/vnd.osgeo.mapguide.package":"mgp","application/vnd.osgi.dp":"dp","application/vnd.osgi.subsystem":"esa","application/vnd.palm":"pdb","application/vnd.pawaafile":"paw","application/vnd.pg.format":"str","application/vnd.pg.osasli":"ei6","application/vnd.picsel":"efif","application/vnd.pmi.widget":"wg","application/vnd.pocketlearn":"plf","application/vnd.powerbuilder6":"pbd","application/vnd.previewsystems.box":"box","application/vnd.proteus.magazine":"mgz","application/vnd.publishare-delta-tree":"qps","application/vnd.pvi.ptid1":"ptid","application/vnd.quark.quarkxpress":"qxd","application/vnd.realvnc.bed":"bed","application/vnd.recordare.musicxml":"mxl","application/vnd.recordare.musicxml+xml":"musicxml","application/vnd.rig.cryptonote":"cryptonote","application/vnd.rim.cod":"cod","application/vnd.rn-realmedia":"rm","application/vnd.rn-realmedia-vbr":"rmvb","application/vnd.route66.link66+xml":"link66","application/vnd.sailingtracker.track":"st","application/vnd.seemail":"see","application/vnd.sema":"sema","application/vnd.semd":"semd","application/vnd.semf":"semf","application/vnd.shana.informed.formdata":"ifm","application/vnd.shana.informed.formtemplate":"itp","application/vnd.shana.informed.interchange":"iif","application/vnd.shana.informed.package":"ipk","application/vnd.simtech-mindmapper":"twd","application/vnd.smaf":"mmf","application/vnd.smart.teacher":"teacher","application/vnd.solent.sdkm+xml":"sdkm","application/vnd.spotfire.dxp":"dxp","application/vnd.spotfire.sfs":"sfs","application/vnd.stardivision.calc":"sdc","application/vnd.stardivision.draw":"sda","application/vnd.stardivision.impress":"sdd","application/vnd.stardivision.math":"smf","application/vnd.stardivision.writer":"sdw","application/vnd.stardivision.writer-global":"sgl","application/vnd.stepmania.package":"smzip","application/vnd.stepmania.stepchart":"sm","application/vnd.sun.xml.calc":"sxc","application/vnd.sun.xml.calc.template":"stc","application/vnd.sun.xml.draw":"sxd","application/vnd.sun.xml.draw.template":"std","application/vnd.sun.xml.impress":"sxi","application/vnd.sun.xml.impress.template":"sti","application/vnd.sun.xml.math":"sxm","application/vnd.sun.xml.writer":"sxw","application/vnd.sun.xml.writer.global":"sxg","application/vnd.sun.xml.writer.template":"stw","application/vnd.sus-calendar":"sus","application/vnd.svd":"svd","application/vnd.symbian.install":"sis","application/vnd.syncml+xml":"xsm","application/vnd.syncml.dm+wbxml":"bdm","application/vnd.syncml.dm+xml":"xdm","application/vnd.tao.intent-module-archive":"tao","application/vnd.tcpdump.pcap":"pcap","application/vnd.tmobile-livetv":"tmo","application/vnd.trid.tpt":"tpt","application/vnd.triscape.mxs":"mxs","application/vnd.trueapp":"tra","application/vnd.ufdl":"ufd","application/vnd.uiq.theme":"utz","application/vnd.umajin":"umj","application/vnd.unity":"unityweb","application/vnd.uoml+xml":"uoml","application/vnd.vcx":"vcx","application/vnd.visio":"vsd","application/vnd.visionary":"vis","application/vnd.vsf":"vsf","application/vnd.wap.wbxml":"wbxml","application/vnd.wap.wmlc":"wmlc","application/vnd.wap.wmlscriptc":"wmlsc","application/vnd.webturbo":"wtb","application/vnd.wolfram.player":"nbp","application/vnd.wordperfect":"wpd","application/vnd.wqd":"wqd","application/vnd.wt.stf":"stf","application/vnd.xara":"xar","application/vnd.xfdl":"xfdl","application/vnd.yamaha.hv-dic":"hvd","application/vnd.yamaha.hv-script":"hvs","application/vnd.yamaha.hv-voice":"hvp","application/vnd.yamaha.openscoreformat":"osf","application/vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","application/vnd.yamaha.smaf-audio":"saf","application/vnd.yamaha.smaf-phrase":"spf","application/vnd.yellowriver-custom-menu":"cmp","application/vnd.zul":"zir","application/vnd.zzazz.deck+xml":"zaz","application/voicexml+xml":"vxml","application/widget":"wgt","application/winhlp":"hlp","application/wsdl+xml":"wsdl","application/wspolicy+xml":"wspolicy","application/x-7z-compressed":"7z","application/x-abiword":"abw","application/x-ace-compressed":"ace","application/x-apple-diskimage":"dmg","application/x-authorware-bin":"aab","application/x-authorware-map":"aam","application/x-authorware-seg":"aas","application/x-bcpio":"bcpio","application/x-bittorrent":"torrent","application/x-blorb":"blb","application/x-bzip":"bz","application/x-cbr":"cbr","application/x-cdlink":"vcd","application/x-cfs-compressed":"cfs","application/x-chat":"chat","application/x-chess-pgn":"pgn","application/x-conference":"nsc","application/x-cpio":"cpio","application/x-csh":"csh","application/x-debian-package":"deb","application/x-dgc-compressed":"dgc","application/x-director":"dir","application/x-doom":"wad","application/x-dtbncx+xml":"ncx","application/x-dtbook+xml":"dtb","application/x-dtbresource+xml":"res","application/x-dvi":"dvi","application/x-envoy":"evy","application/x-eva":"eva","application/x-font-bdf":"bdf","application/x-font-ghostscript":"gsf","application/x-font-linux-psf":"psf","application/x-font-pcf":"pcf",
"application/x-font-snf":"snf","application/x-font-type1":"pfa","application/x-freearc":"arc","application/x-futuresplash":"spl","application/x-gca-compressed":"gca","application/x-glulx":"ulx","application/x-gnumeric":"gnumeric","application/x-gramps-xml":"gramps","application/x-gtar":"gtar","application/x-hdf":"hdf","application/x-install-instructions":"install","application/x-iso9660-image":"iso","application/x-java-jnlp-file":"jnlp","application/x-latex":"latex","application/x-lzh-compressed":"lzh","application/x-mie":"mie","application/x-mobipocket-ebook":"prc","application/x-ms-application":"application","application/x-ms-shortcut":"lnk","application/x-ms-wmd":"wmd","application/x-ms-wmz":"wmz","application/x-ms-xbap":"xbap","application/x-msaccess":"mdb","application/x-msbinder":"obd","application/x-mscardfile":"crd","application/x-msclip":"clp","application/x-msdownload":"dll","application/x-msmediaview":"mvb","application/x-msmetafile":"wmf","application/x-msmoney":"mny","application/x-mspublisher":"pub","application/x-msschedule":"scd","application/x-msterminal":"trm","application/x-mswrite":"wri","application/x-netcdf":"nc","application/x-nzb":"nzb","application/x-pkcs12":"p12","application/x-pkcs7-certificates":"p7b","application/x-pkcs7-certreqresp":"p7r","application/x-research-info-systems":"ris","application/x-shar":"shar","application/x-shockwave-flash":"swf","application/x-silverlight-app":"xap","application/x-sql":"sql","application/x-stuffit":"sit","application/x-stuffitx":"sitx","application/x-subrip":"srt","application/x-sv4cpio":"sv4cpio","application/x-sv4crc":"sv4crc","application/x-t3vm-image":"t3","application/x-tads":"gam","application/x-tar":"tar","application/x-tcl":"tcl","application/x-tex":"tex","application/x-tex-tfm":"tfm","application/x-texinfo":"texinfo","application/x-tgif":"obj","application/x-ustar":"ustar","application/x-wais-source":"src","application/x-x509-ca-cert":"der","application/x-xfig":"fig","application/x-xliff+xml":"xlf","application/x-xpinstall":"xpi","application/x-xz":"xz","application/x-zmachine":"z1","application/xaml+xml":"xaml","application/xcap-diff+xml":"xdf","application/xenc+xml":"xenc","application/xhtml+xml":"xhtml","application/xml":"xsl","application/xml-dtd":"dtd","application/xop+xml":"xop","application/xproc+xml":"xpl","application/xslt+xml":"xslt","application/xspf+xml":"xspf","application/xv+xml":"mxml","application/yang":"yang","application/yin+xml":"yin","application/zip":"zip","audio/adpcm":"adp","audio/basic":"au","audio/midi":"mid","audio/mp4":"m4a","audio/mpeg":"mpga","audio/ogg":"oga","audio/s3m":"s3m","audio/silk":"sil","audio/vnd.dece.audio":"uva","audio/vnd.digital-winds":"eol","audio/vnd.dra":"dra","audio/vnd.dts":"dts","audio/vnd.dts.hd":"dtshd","audio/vnd.lucent.voice":"lvp","audio/vnd.ms-playready.media.pya":"pya","audio/vnd.nuera.ecelp4800":"ecelp4800","audio/vnd.nuera.ecelp7470":"ecelp7470","audio/vnd.nuera.ecelp9600":"ecelp9600","audio/vnd.rip":"rip","audio/webm":"weba","audio/x-aac":"aac","audio/x-aiff":"aif","audio/x-caf":"caf","audio/x-flac":"flac","audio/x-matroska":"mka","audio/x-mpegurl":"m3u","audio/x-ms-wax":"wax","audio/x-ms-wma":"wma","audio/x-pn-realaudio":"ram","audio/x-pn-realaudio-plugin":"rmp","audio/xm":"xm","chemical/x-cdx":"cdx","chemical/x-cif":"cif","chemical/x-cmdf":"cmdf","chemical/x-cml":"cml","chemical/x-csml":"csml","chemical/x-xyz":"xyz","font/collection":"ttc","font/otf":"otf","font/ttf":"ttf","font/woff":"woff","font/woff2":"woff2","image/cgm":"cgm","image/g3fax":"g3","image/gif":"gif","image/ief":"ief","image/jpeg":"jpeg","image/ktx":"ktx","image/png":"png","image/prs.btif":"btif","image/sgi":"sgi","image/svg+xml":"svg","image/tiff":"tiff","image/vnd.adobe.photoshop":"psd","image/vnd.dece.graphic":"uvi","image/vnd.djvu":"djvu","image/vnd.dvb.subtitle":"sub","image/vnd.dwg":"dwg","image/vnd.dxf":"dxf","image/vnd.fastbidsheet":"fbs","image/vnd.fpx":"fpx","image/vnd.fst":"fst","image/vnd.fujixerox.edmics-mmr":"mmr","image/vnd.fujixerox.edmics-rlc":"rlc","image/vnd.ms-modi":"mdi","image/vnd.ms-photo":"wdp","image/vnd.net-fpx":"npx","image/vnd.wap.wbmp":"wbmp","image/vnd.xiff":"xif","image/webp":"webp","image/x-3ds":"3ds","image/x-cmu-raster":"ras","image/x-cmx":"cmx","image/x-freehand":"fh","image/x-icon":"ico","image/x-mrsid-image":"sid","image/x-pcx":"pcx","image/x-pict":"pic","image/x-portable-anymap":"pnm","image/x-portable-bitmap":"pbm","image/x-portable-graymap":"pgm","image/x-portable-pixmap":"ppm","image/x-rgb":"rgb","image/x-xpixmap":"xpm","image/x-xwindowdump":"xwd","message/rfc822":"eml","model/iges":"igs","model/mesh":"msh","model/vnd.collada+xml":"dae","model/vnd.dwf":"dwf","model/vnd.gdl":"gdl","model/vnd.gtw":"gtw","model/vnd.vtu":"vtu","model/vrml":"wrl","model/x3d+binary":"x3db","model/x3d+vrml":"x3dv","model/x3d+xml":"x3d","text/cache-manifest":"appcache","text/calendar":"ics","text/css":"css","text/csv":"csv","text/html":"html","text/n3":"n3","text/plain":"txt","text/prs.lines.tag":"dsc","text/richtext":"rtx","text/sgml":"sgml","text/tab-separated-values":"tsv","text/troff":"t","text/turtle":"ttl","text/uri-list":"uri","text/vcard":"vcard","text/vnd.curl":"curl","text/vnd.curl.dcurl":"dcurl","text/vnd.curl.mcurl":"mcurl","text/vnd.curl.scurl":"scurl","text/vnd.fly":"fly","text/vnd.fmi.flexstor":"flx","text/vnd.graphviz":"gv","text/vnd.in3d.3dml":"3dml","text/vnd.in3d.spot":"spot","text/vnd.sun.j2me.app-descriptor":"jad","text/vnd.wap.wml":"wml","text/vnd.wap.wmlscript":"wmls","text/x-asm":"s","text/x-c":"cc","text/x-fortran":"f","text/x-java-source":"java","text/x-nfo":"nfo","text/x-opml":"opml","text/x-pascal":"p","text/x-setext":"etx","text/x-sfv":"sfv","text/x-uuencode":"uu","text/x-vcalendar":"vcs","text/x-vcard":"vcf","video/3gpp":"3gp","video/3gpp2":"3g2","video/h261":"h261","video/h263":"h263","video/h264":"h264","video/jpeg":"jpgv","video/jpm":"jpm","video/mj2":"mj2","video/mp4":"mp4","video/mpeg":"mpeg","video/quicktime":"qt","video/vnd.dece.hd":"uvh","video/vnd.dece.mobile":"uvm","video/vnd.dece.pd":"uvp","video/vnd.dece.sd":"uvs","video/vnd.dece.video":"uvv","video/vnd.dvb.file":"dvb","video/vnd.fvt":"fvt","video/vnd.mpegurl":"mxu","video/vnd.ms-playready.media.pyv":"pyv","video/vnd.uvvu.mp4":"uvu","video/vnd.vivo":"viv","video/webm":"webm","video/x-f4v":"f4v","video/x-fli":"fli","video/x-flv":"flv","video/x-m4v":"m4v","video/x-matroska":"mkv","video/x-mng":"mng","video/x-ms-asf":"asf","video/x-ms-vob":"vob","video/x-ms-wmx":"wmx","video/x-ms-wvx":"wvx","video/x-msvideo":"avi","video/x-sgi-movie":"movie","video/x-smv":"smv","x-conference/x-cooltalk":"ice","text/x-sql":"sql","image/x-pixlr-data":"pxd","image/x-adobe-dng":"dng","image/x-sketch":"sketch","image/x-xcf":"xcf","audio/amr":"amr","image/vnd-ms.dds":"dds","application/plt":"plt","application/sat":"sat","application/step":"step","text/x-httpd-cgi":"cgi","text/x-asap":"asp","text/x-jsp":"jsp"},i.prototype._options={cdns:{ace:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.8",codemirror:"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2",ckeditor:"https://cdnjs.cloudflare.com/ajax/libs/ckeditor/4.12.1",ckeditor5:"https://cdn.ckeditor.com/ckeditor5/17.0.0",tinymce:"https://cdnjs.cloudflare.com/ajax/libs/tinymce/5.2.0",simplemde:"https://cdnjs.cloudflare.com/ajax/libs/simplemde/1.11.2",fabric:"https://cdnjs.cloudflare.com/ajax/libs/fabric.js/3.6.2",fabric16:"https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.6.7",tui:"https://uicdn.toast.com",hls:"https://cdnjs.cloudflare.com/ajax/libs/hls.js/0.13.2/hls.min.js",dash:"https://cdnjs.cloudflare.com/ajax/libs/dashjs/3.0.3/dash.all.min.js",flv:"https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.5.0/flv.min.js",videojs:"https://cdnjs.cloudflare.com/ajax/libs/video.js/7.7.5",prettify:"https://cdn.jsdelivr.net/gh/google/code-prettify@f1c3473acd1e8ea8c8c1a60c56e89f5cdd06f915/loader/run_prettify.js",psd:"https://cdnjs.cloudflare.com/ajax/libs/psd.js/3.2.0/psd.min.js",rar:"https://cdn.jsdelivr.net/gh/nao-pon/rar.js@6cef13ec66dd67992fc7f3ea22f132d770ebaf8b/rar.min.js",zlibUnzip:"https://cdn.jsdelivr.net/gh/imaya/zlib.js@0.3.1/bin/unzip.min.js",zlibGunzip:"https://cdn.jsdelivr.net/gh/imaya/zlib.js@0.3.1/bin/gunzip.min.js",bzip2:"https://cdn.jsdelivr.net/gh/nao-pon/bzip2.js@0.8.0/bzip2.js",marked:"https://cdnjs.cloudflare.com/ajax/libs/marked/0.7.0/marked.min.js",sparkmd5:"https://cdnjs.cloudflare.com/ajax/libs/spark-md5/3.0.0/spark-md5.min.js",jssha:"https://cdnjs.cloudflare.com/ajax/libs/jsSHA/2.3.1/sha.js",amr:"https://cdn.jsdelivr.net/gh/yxl/opencore-amr-js@dcf3d2b5f384a1d9ded2a54e4c137a81747b222b/js/amrnb.js",tiff:"https://cdn.jsdelivr.net/gh/seikichi/tiff.js@545ede3ee46b5a5bc5f06d65954e775aa2a64017/tiff.min.js"},url:"",requestType:"get",cors:null,parrotHeaders:[],requestMaxConn:3,transport:{},urlUpload:"",dragUploadAllow:"auto",overwriteUploadConfirm:!0,uploadMaxChunkSize:10485760,folderUploadExclude:{win:/^(?:desktop\.ini|thumbs\.db)$/i,mac:/^\.ds_store$/i},iframeTimeout:0,customData:{},handlers:{},customHeaders:{},xhrFields:{},lang:"en",baseUrl:"",i18nBaseUrl:"",cssAutoLoad:!0,themes:{},theme:null,maxErrorDialogs:5,cssClass:"",commands:["*"],commandsOptions:{getfile:{onlyURL:!1,multiple:!1,folders:!1,oncomplete:"",onerror:"",getPath:!0,getImgSize:!1},open:{method:"post",into:"window",selectAction:"open"},opennew:{url:"",useOriginQuery:!0},upload:{ui:"button"},download:{maxRequests:10,minFilesZipdl:2},quicklook:{autoplay:!0,width:450,height:300,mediaControlsList:"",pdfToolbar:!0,textInitialLines:100,prettifyMaxLines:300,contain:!1,docked:0,dockHeight:"auto",dockAutoplay:!1,googleMapsApiKey:"",googleMapsOpts:{maps:{},kml:{suppressInfoWindows:!1,preserveViewport:!1}},viewerjs:{url:"",mimes:["application/pdf","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation"],pdfNative:!0},sharecadMimes:[],googleDocsMimes:[],officeOnlineMimes:[],getDimThreshold:"200K",unzipMaxSize:"50M",mimeRegexNotEmptyCheck:/^application\/vnd\.google-apps\./},edit:{dialogWidth:void 0,dialogHeight:void 0,mimes:[],mkfileHideMimes:[],makeTextMimes:["text/plain","text/css","text/html"],useStoredEditor:!1,editorMaximized:!1,editors:[],encodings:["Big5","Big5-HKSCS","Cp437","Cp737","Cp775","Cp850","Cp852","Cp855","Cp857","Cp858","Cp862","Cp866","Cp874","EUC-CN","EUC-JP","EUC-KR","GB18030","ISO-2022-CN","ISO-2022-JP","ISO-2022-KR","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-13","ISO-8859-15","KOI8-R","KOI8-U","Shift-JIS","Windows-1250","Windows-1251","Windows-1252","Windows-1253","Windows-1254","Windows-1257"],extraOptions:{uploadOpts:{},tuiImgEditOpts:{iconsPath:void 0,theme:{}},pixo:{apikey:""},managerUrl:null,ckeditor:{},ckeditor5:{mode:"decoupled-document"},tinymce:{},onlineConvert:{maxSize:100,showLink:!0}}},fullscreen:{mode:"screen"},search:{incsearch:{enable:!0,minlen:1,wait:500},searchTypes:{SearchMime:{name:"btnMime",title:"searchMime",incsearch:"mime"}}},info:{nullUrlDirLinkSelf:!0,hideItems:[],showHashMaxsize:104857600,showHashAlgorisms:["md5","sha256"],showHashOpts:{shake128len:256,shake256len:512},custom:{}},mkdir:{intoNewFolderToolbtn:!1},resize:{grid8px:"disable",presetSize:[[320,240],[400,400],[640,480],[800,600]],getDimThreshold:204800,dimSubImgSize:307200},rm:{quickTrash:!0,infoCheckWait:10,toTrashMaxItems:1e3},paste:{moveConfirm:!1},help:{view:["about","shortcuts","help","integrations","debug"],helpSource:""},preference:{width:600,height:400,categories:null,prefs:null,langs:null,selectActions:["open","edit/download","resize/edit/download","download","quicklook"]}},disabledCmdsRels:{get:["edit"],rm:["cut","empty"],"file&url=":["download","zipdl"]},bootCallback:null,getFileCallback:null,defaultView:"icons",startPathHash:"",sound:!0,ui:["toolbar","places","tree","path","stat"],uiOptions:{toolbar:[["home","back","forward","up","reload"],["netmount"],["mkdir","mkfile","upload"],["open","download","getfile"],["undo","redo"],["copy","cut","paste","rm","empty","hide"],["duplicate","rename","edit","resize","chmod"],["selectall","selectnone","selectinvert"],["quicklook","info"],["extract","archive"],["search"],["view","sort"],["preference","help"],["fullscreen"]],toolbarExtra:{displayTextLabel:!1,labelExcludeUA:["Mobile"],autoHideUA:["Mobile"],defaultHides:["home","reload"],showPreferenceButton:"none",preferenceInContextmenu:!0},tree:{attrTitle:!0,openRootOnLoad:!0,openCwdOnOpen:!0,syncTree:!0,subTreeMax:100,subdirsMaxConn:2,subdirsAtOnce:5,durations:{slideUpDown:"fast",autoScroll:"fast"}},navbar:{minWidth:150,maxWidth:500,autoHideUA:[]},navdock:{disabled:!1,initMaxHeight:"50%",maxHeight:"90%"},cwd:{oldSchool:!1,showSelectCheckboxUA:["Touch"],metakeyDragout:!0,listView:{columns:["perm","date","size","kind"],columnsCustomName:{},fixedHeader:!0},iconsView:{size:0,sizeMax:3,sizeNames:{0:"viewSmall",1:"viewMedium",2:"viewLarge",3:"viewExtraLarge"}}},path:{toWorkzoneWithoutNavbar:!0},dialog:{focusOnMouseOver:!0},toast:{animate:{showMethod:"fadeIn",showDuration:300,showEasing:"swing",timeOut:3e3,hideMethod:"fadeOut",hideDuration:1500,hideEasing:"swing"}}},dispInlineRegex:"^(?:(?:image|video|audio)|application/(?:x-mpegURL|dash+xml)|(?:text/plain|application/pdf)$)",onlyMimes:[],sortRules:{},sortType:"name",sortOrder:"asc",sortStickFolders:!0,sortAlsoTreeview:!1,clientFormatDate:!0,UTCDate:!1,dateFormat:"",fancyDateFormat:"",fileModeStyle:"both",width:"auto",height:400,heightBase:null,resizable:!0,notifyDelay:500,notifyDialog:{position:{},width:null,canClose:!1,hiddens:["open"]},dialogContained:!1,allowShortcuts:!0,rememberLastDir:!0,reloadClearHistory:!1,useBrowserHistory:!0,showFiles:50,showThreshold:50,validName:!1,fileFilter:!1,backupSuffix:"~",sync:0,syncStart:!0,loadTmbs:5,cookie:{expires:30,domain:"",path:"/",secure:!1},contextmenu:{navbar:["open","opennew","download","|","upload","mkdir","|","copy","cut","paste","duplicate","|","rm","empty","hide","|","rename","|","archive","|","places","info","chmod","netunmount"],cwd:["undo","redo","|","back","up","reload","|","upload","mkdir","mkfile","paste","|","empty","hide","|","view","sort","selectall","colwidth","|","places","info","chmod","netunmount","|","fullscreen","|","preference"],files:["getfile","|","open","opennew","download","opendir","quicklook","|","upload","mkdir","|","copy","cut","paste","duplicate","|","rm","empty","hide","|","rename","edit","resize","|","archive","extract","|","selectall","selectinvert","|","places","info","chmod","netunmount"]},enableAlways:!1,enableByMouseOver:!0,windowCloseConfirm:["hasNotifyDialog","editingFile"],rawStringDecoder:"object"==typeof Encoding&&e.isFunction(Encoding.convert)?function(e){return Encoding.convert(e,{to:"UNICODE",type:"string"})}:null,debug:["error","warning","event-destroy"],toastBackendWarn:!0},i.prototype._options.commandsOptions.netmount={ftp:{name:"FTP",inputs:{host:e('<input type="text"/>'),port:e('<input type="number" placeholder="21" class="elfinder-input-optional"/>'),path:e('<input type="text" value="/"/>'),user:e('<input type="text"/>'),pass:e('<input type="password" autocomplete="new-password"/>'),FTPS:e('<input type="checkbox" value="1" title="File Transfer Protocol over SSL/TLS"/>'),encoding:e('<input type="text" placeholder="Optional" class="elfinder-input-optional"/>'),locale:e('<input type="text" placeholder="Optional" class="elfinder-input-optional"/>')}},dropbox2:i.prototype.makeNetmountOptionOauth("dropbox2","Dropbox","Dropbox",{noOffline:!0,root:"/",pathI18n:"path",integrate:{title:"Dropbox.com",link:"https://www.dropbox.com"}}),googledrive:i.prototype.makeNetmountOptionOauth("googledrive","Google Drive","Google",{integrate:{title:"Google Drive",link:"https://www.google.com/drive/"}}),onedrive:i.prototype.makeNetmountOptionOauth("onedrive","One Drive","OneDrive",{integrate:{title:"Microsoft OneDrive",link:"https://onedrive.live.com"}}),box:i.prototype.makeNetmountOptionOauth("box","Box","Box",{noOffline:!0,integrate:{title:"Box.com",link:"https://www.box.com"}})},i.prototype.history=function(t){var n,i=this,a=!0,o=[],r=function(){o=[t.cwd().hash],n=0,a=!0},s=t.options.useBrowserHistory&&window.history&&window.history.pushState?window.history:null,l=function(s){return s&&i.canForward()||!s&&i.canBack()?(a=!1,t.exec("open",o[s?++n:--n]).fail(r)):e.Deferred().reject()},c=function(e){!s||s.state&&s.state.thash===e||s.pushState({thash:e},null,location.pathname+location.search+(e?"#elf_"+e:""))};this.canBack=function(){return n>0},this.canForward=function(){return n<o.length-1},this.back=l,this.forward=function(){return l(!0)},t.bind("init",function(){s&&!s.state&&c(t.startDir())}).open(function(){var e=o.length,i=t.cwd().hash;a&&(n>=0&&e>n+1&&o.splice(n+1),o[o.length-1]!=i&&o.push(i),n=o.length-1),a=!0,c(i)}).reload(t.options.reloadClearHistory&&r)},i.prototype.command=function(t){this.fm=t,this.name="",this.dialogClass="",this.className="",this.title="",this.linkedCmds=[],this.state=-1,this.alwaysEnabled=!1,this.noChangeDirOnRemovedCwd=!1,this._disabled=!1,this.disableOnSearch=!1,this.updateOnSelect=!0,this.syncTitleOnChange=!1,this.keepContextmenu=!1,this._handlers={enable:function(){this.update(void 0,this.value)},disable:function(){this.update(-1,this.value)},"open reload load sync":function(){this._disabled=!(this.alwaysEnabled||this.fm.isCommandEnabled(this.name)),this.update(void 0,this.value),this.change()}},this.handlers={},this.shortcuts=[],this.options={ui:"button"},this.listeners=[],this.setup=function(t,n){var i,a,o,r=this,s=this.fm,l=function(t){var n=t.callback||function(e){s.exec(r.name,void 0,{_userAction:!0,_currentType:"shortcut"})};t.callback=function(t){var i,a={};r.enabled()&&(s.searchStatus.state<2?i=s.isCommandEnabled(r.name):(e.each(s.selected(),function(t,n){s.optionsByHashes[n]?a[n]=!0:e.each(s.volOptions,function(e){if(!a[e]&&0===n.indexOf(e))return a[e]=!0,!1})}),e.each(a,function(e){if(i=s.isCommandEnabled(r.name,e),!i)return!1})),i&&(r.event=t,n.call(r),delete r.event))}};for(this.name=t,this.title=s.messages["cmd"+t]?s.i18n("cmd"+t):this.extendsCmd&&s.messages["cmd"+this.extendsCmd]?s.i18n("cmd"+this.extendsCmd):t,this.options=Object.assign({},this.options,n),this.listeners=[],this.dialogClass="elfinder-dialog-"+t,n.shortcuts&&("function"==typeof n.shortcuts?o=n.shortcuts(this.fm,this.shortcuts):Array.isArray(n.shortcuts)&&(o=n.shortcuts),this.shortcuts=o||[]),this.updateOnSelect&&(this._handlers.select=function(){this.update(void 0,this.value)}),e.each(Object.assign({},r._handlers,r.handlers),function(t,n){s.bind(t,e.proxy(n,r))}),i=0;i<this.shortcuts.length;i++)a=this.shortcuts[i],l(a),!a.description&&(a.description=this.title),s.shortcut(a);this.disableOnSearch&&s.bind("search searchend",function(){r._disabled="search"===this.type||!(this.alwaysEnabled||s.isCommandEnabled(t)),r.update(void 0,r.value)}),this.init()},this.init=function(){},this.exec=function(t,n){return e.Deferred().reject()},this.getUndo=function(e,t){return!1},this.disabled=function(){return this.state<0},this.enabled=function(){return this.state>-1},this.active=function(){return this.state>0},this.getstate=function(){return-1},this.update=function(e,t){var n=this.state,i=this.value;this._disabled&&0===this.fm.searchStatus?this.state=-1:this.state=void 0!==e?e:this.getstate(),this.value=t,n==this.state&&i==this.value||this.change()},this.change=function(e){var t,n;if("function"==typeof e)this.listeners.push(e);else for(n=0;n<this.listeners.length;n++){t=this.listeners[n];try{t(this.state,this.value)}catch(i){this.fm.debug("error",i)}}return this},this.hashes=function(n){return n?e.grep(Array.isArray(n)?n:[n],function(e){return!!t.file(e)}):t.selected()},this.files=function(t){var n=this.fm;return t?e.map(Array.isArray(t)?t:[t],function(e){return n.file(e)||null}):n.selectedFiles()},this.fmDialog=function(e,t){return t.cssClass?t.cssClass+=" "+this.dialogClass:t.cssClass=this.dialogClass,this.fm.dialog(e,t)}},i.prototype.resources={"class":{hover:"ui-state-hover",active:"ui-state-active",disabled:"ui-state-disabled",draggable:"ui-draggable",droppable:"ui-droppable",adroppable:"elfinder-droppable-active",cwdfile:"elfinder-cwd-file",cwd:"elfinder-cwd",tree:"elfinder-tree",treeroot:"elfinder-navbar-root",navdir:"elfinder-navbar-dir",navdirwrap:"elfinder-navbar-dir-wrapper",navarrow:"elfinder-navbar-arrow",navsubtree:"elfinder-navbar-subtree",navcollapse:"elfinder-navbar-collapsed",navexpand:"elfinder-navbar-expanded",treedir:"elfinder-tree-dir",placedir:"elfinder-place-dir",searchbtn:"elfinder-button-search",editing:"elfinder-to-editing",preventback:"elfinder-prevent-back",tabstab:"ui-state-default ui-tabs-tab ui-corner-top ui-tab",tabsactive:"ui-tabs-active ui-state-active"},tpl:{perms:'<span class="elfinder-perms"></span>',lock:'<span class="elfinder-lock"></span>',symlink:'<span class="elfinder-symlink"></span>',navicon:'<span class="elfinder-nav-icon"></span>',navspinner:'<span class="elfinder-spinner elfinder-navbar-spinner"></span>',navdir:'<div class="elfinder-navbar-wrapper{root}"><span id="{id}" class="ui-corner-all elfinder-navbar-dir {cssclass}"{title}><span class="elfinder-navbar-arrow"></span><span class="elfinder-navbar-icon" {style}></span>{symlink}{permissions}{name}</span><div class="elfinder-navbar-subtree" style="display:none"></div></div>',placedir:'<div class="elfinder-navbar-wrapper"><span id="{id}" class="ui-corner-all elfinder-navbar-dir {cssclass}"{title}><span class="elfinder-navbar-arrow"></span><span class="elfinder-navbar-icon" {style}></span>{symlink}{permissions}{name}</span><div class="elfinder-navbar-subtree" style="display:none"></div></div>'},mimes:{text:["application/dash+xml","application/docbook+xml","application/javascript","application/json","application/plt","application/sat","application/sql","application/step","application/vnd.hp-hpgl","application/x-awk","application/x-config","application/x-csh","application/x-empty","application/x-mpegurl","application/x-perl","application/x-php","application/x-web-config","application/xhtml+xml","application/xml","audio/x-mp3-playlist","image/cgm","image/svg+xml","image/vnd.dxf","model/iges"]},mixin:{make:function(){var t,n,i,a,o,r,s,l,c,d,p=this,u=this.fm,h=this.name,f=this.requestCmd||h,m=u.getUI("workzone"),g=this.origin&&"navbar"===this.origin?"tree":"cwd",v="tree"===g,b=v?"navHash2Elm":"cwdHash2Elm",y=!v&&"list"!=u.storage("view"),w=u.selected(),x=this.move||!1,k=m.hasClass("elfinder-cwd-wrapper-empty"),C=function(){requestAnimationFrame(function(){U&&U.trigger("blur")})},z=function(){E.is(":hidden")||E.elfinderoverlay("hide").off("click close",D),n&&(i.removeClass("ui-front").css("position","").off("unselect."+u.namespace,C),y?n&&n.css("max-height",""):v||i.css("width","").parent("td").css("overflow",""))},T=e.Deferred().fail(function(e){r&&o.attr("class",r),k&&m.addClass("elfinder-cwd-wrapper-empty"),w&&(x&&u.trigger("unlockfiles",{files:w}),u.clipboard([]),u.trigger("selectfiles",{files:w})),e&&u.error(e)}).always(function(){z(),F(),u.enable().unbind("open",R).trigger("resMixinMake")}),A="tmp_"+parseInt(1e5*Math.random()),j=this.data&&this.data.target?this.data.target:v?u.file(w[0]).hash:u.cwd().hash,O=new Date,S={hash:A,phash:j,name:u.uniqueName(this.prefix,j),mime:this.mime,read:!0,write:!0,date:"Today "+O.getHours()+":"+O.getMinutes(),move:x},I=(u.getUI(g).trigger("create."+u.namespace,S),this.data||{}),M=u[b](A),E=u.getUI("overlay"),F=function(){M&&M.length&&(U.off(),M.hide(),u.unselectfiles({files:[A]}).unbind("resize",q),requestAnimationFrame(function(){v?M.closest(".elfinder-navbar-wrapper").remove():M.remove()}))},D=function(e){E.is(":hidden")||i.css("z-index",""),H||(F(),T.reject(),e&&(e.stopPropagation(),e.preventDefault()))},U=e(y?"<textarea></textarea>":'<input type="text"/>').on("keyup text",function(){y?(this.style.height="1px",this.style.height=this.scrollHeight+"px"):t&&(this.style.width=t+"px",this.scrollWidth>t&&(this.style.width=this.scrollWidth+10+"px"))}).on("keydown",function(t){t.stopImmediatePropagation(),t.keyCode==e.ui.keyCode.ESCAPE?T.reject():t.keyCode==e.ui.keyCode.ENTER&&(t.preventDefault(),U.trigger("blur"))}).on("mousedown click dblclick",function(e){e.stopPropagation(),"dblclick"===e.type&&e.preventDefault()}).on("blur",function(){var t,n=e.trim(U.val()),o=U.parent(),r=!0;if(E.is(":hidden")||i.css("z-index",""),""===n)return D();if(!H&&o.length){if(u.options.validName&&u.options.validName.test)try{r=u.options.validName.test(n)}catch(s){r=!1}if(!n||"."===n||".."===n||!r)return H=!0,u.error("directory"===S.mime?"errInvDirname":"errInvName",{modal:!0,close:function(){setTimeout(P,120)}}),!1;if(u.fileByName(n,j))return H=!0,u.error(["errExists",n],{modal:!0,close:function(){setTimeout(P,120)}}),!1;t=w&&x?u.exec("cut",w):null,e.when(t).done(function(){var t={},i={};z(),U.hide().before(e("<span>").text(n)),u.lockfiles({files:[A]}),u.request({data:Object.assign({cmd:f,name:n,target:j},I||{}),notify:{type:f,cnt:1},preventFail:!0,syncOnFail:!0,navigate:{toast:t}}).fail(function(t){u.unlockfiles({files:[A]}),H=!0,U.show().prev().remove(),u.error(t,{modal:!0,close:function(){Array.isArray(t)&&e.inArray("errUploadMime",t)!==-1?T.notify("errUploadMime").reject():setTimeout(P,120)}})}).done(function(n){if(n&&n.added&&n.added[0]){var o,r=n.added[0],s=r.hash,l=(u[b](s),{directory:{cmd:"open",msg:"cmdopendir"},text:{cmd:"edit",msg:"cmdedit"},"default":{cmd:"open",msg:"cmdopen"}});w&&x&&u.one(f+"done",function(){u.exec("paste",s)}),x||(u.mimeIsText(r.mime)&&!u.mimesCanMakeEmpty[r.mime]&&u.mimeTypes[r.mime]&&(u.trigger("canMakeEmptyFile",{mimes:[r.mime],unshift:!0}),o={},o[r.mime]=u.mimeTypes[r.mime],u.storage("mkfileTextMimes",Object.assign(o,u.storage("mkfileTextMimes")||{}))),Object.assign(i,a||l[r.mime]||l[r.mime.split("/")[0]]||l[u.mimesCanMakeEmpty[r.mime]||e.inArray(r.mime,u.resources.mimes.text)!==-1?"text":"none"]||l["default"]),Object.assign(t,i.cmd?{incwd:{msg:u.i18n(["complete",u.i18n("cmd"+h)]),action:i},inbuffer:{msg:u.i18n(["complete",u.i18n("cmd"+h)]),action:i}}:{inbuffer:{msg:u.i18n(["complete",u.i18n("cmd"+h)])}}))}T.resolve(n)})}).fail(function(){T.reject()})}}).on("dragenter dragleave dragover drop",function(e){e.stopPropagation()}),P=function(){var e=u.splitFileExtention(U.val())[0];H||!u.UA.Mobile||u.UA.iOS||(E.on("click close",D).elfinderoverlay("show"),i.css("z-index",E.css("z-index")+1)),H=!1,!u.enabled()&&u.enable(),U.trigger("focus").trigger("select"),U[0].setSelectionRange&&U[0].setSelectionRange(0,e.length)},q=function(){M.trigger("scrolltoview",{blink:!1})},R=function(){T&&"pending"===T.state()&&T.reject()},H=!1;return u.isCommandEnabled(f,j)&&M.length?(e.isPlainObject(p.nextAction)&&(a=Object.assign({},p.nextAction)),v?(o=u[b](j),s=u.res("class","navcollapse"),l=u.res("class","navexpand"),c=u.res("class","navarrow"),d=u.res("class","navsubtree"),M.closest("."+d).show(),o.hasClass(s)||(r=o.attr("class"),o.addClass(s+" "+l+" elfinder-subtree-loaded")),o.is("."+s+":not(."+l+")")&&o.children("."+c).trigger("click").data("dfrd").done(function(){U.val()===S.name&&U.val(u.uniqueName(p.prefix,j)).trigger("select").trigger("focus")}),n=M.contents().filter(function(){return 3==this.nodeType&&e(this).parent().attr("id")===u.navHash2Id(S.hash)}),i=n.parent(),n.replaceWith(U.val(S.name))):(k&&m.removeClass("elfinder-cwd-wrapper-empty"),n=M.find(".elfinder-cwd-filename"),i=n.parent(),y?n.css("max-height","none"):(t=i.width(),i.width(t-15).parent("td").css("overflow","visible")),n.empty().append(U.val(S.name))),i.addClass("ui-front").css("position","relative").on("unselect."+u.namespace,C),u.bind("resize",q).one("open",R),U.trigger("keyup"),P(),T):T.reject()}},blink:function(e,t){var n,i={slowonce:function(){e.hide().delay(250).fadeIn(750).delay(500).fadeOut(3500)},lookme:function(){e.show().fadeOut(500).fadeIn(750)}};t=t||"slowonce",n=i[t]||i.lookme,e.stop(!0,!0),n()}},e.fn.dialogelfinder=function(t,n){var i,a,o="elfinderPosition",r="elfinderDestroyOnClose";if(e.isPlainObject(t))this.not(".elfinder").each(function(){t.handlers=t.handlers||{};var i,a=e(this),s=(e(document),e('<div class="ui-widget-header dialogelfinder-drag ui-corner-top">'+(t.title||"Files")+"</div>")),l=(e('<a href="#" class="dialogelfinder-drag-close ui-corner-all"><span class="ui-icon ui-icon-closethick"> </span></a>').appendTo(s).on("click",function(e){e.preventDefault(),a.dialogelfinder("close")}),t.handlers.init);t.handlers.init=function(e,t){a.prepend(s),l&&l(e,t)},i=a.addClass("elfinder dialogelfinder touch-punch").css("position","absolute").hide().appendTo("body").draggable({handle:".dialogelfinder-drag",containment:"window",stop:function(){a.trigger("resize"),i.trigger("resize")}}).elfinder(t,n).elfinder("instance"),i.reloadCallback=function(e,t){i.destroy(),e.handlers.init=l,a.dialogelfinder(e,t).dialogelfinder("open")},a.width(parseInt(a.width())||840).data(r,!!t.destroyOnClose).find(".elfinder-toolbar").removeClass("ui-corner-top"),t.position&&a.data(o,t.position),t.autoOpen!==!1&&e(this).dialogelfinder("open")});else if("open"===t)i=e(this),a=i.data(o)||{top:parseInt(e(document).scrollTop()+(e(window).height()<i.height()?2:(e(window).height()-i.height())/2)),left:parseInt(e(document).scrollLeft()+(e(window).width()<i.width()?2:(e(window).width()-i.width())/2))},i.is(":hidden")&&(i.addClass("ui-front").css(a).show().trigger("resize"),setTimeout(function(){i.trigger("resize").trigger("mousedown")},200));else if("close"===t)i=e(this).removeClass("ui-front"),i.is(":visible")&&(i.data(r)?i.elfinder("destroy").remove():i.elfinder("close"));else if("instance"===t)return e(this).getElFinder();return this},"function"==typeof i&&i.prototype.i18&&(i.prototype.i18.en={translator:"Troex Nevelin &lt;troex@fury.scancode.ru&gt;, Naoki Sawada &lt;hypweb+elfinder@gmail.com&gt;",language:"English",direction:"ltr",dateFormat:"M d, Y h:i A",fancyDateFormat:"$1 h:i A",nonameDateFormat:"ymd-His",messages:{error:"Error",errUnknown:"Unknown error.",errUnknownCmd:"Unknown command.",errJqui:"Invalid jQuery UI configuration. Selectable, draggable and droppable components must be included.",errNode:"elFinder requires DOM Element to be created.",errURL:"Invalid elFinder configuration! URL option is not set.",errAccess:"Access denied.",errConnect:"Unable to connect to backend.",errAbort:"Connection aborted.",errTimeout:"Connection timeout.",errNotFound:"Backend not found.",errResponse:"Invalid backend response.",errConf:"Invalid backend configuration.",errJSON:"PHP JSON module not installed.",errNoVolumes:"Readable volumes not available.",errCmdParams:'Invalid parameters for command "$1".',errDataNotJSON:"Data is not JSON.",errDataEmpty:"Data is empty.",errCmdReq:"Backend request requires command name.",errOpen:'Unable to open "$1".',errNotFolder:"Object is not a folder.",errNotFile:"Object is not a file.",errRead:'Unable to read "$1".',errWrite:'Unable to write into "$1".',errPerm:"Permission denied.",errLocked:'"$1" is locked and can not be renamed, moved or removed.',errExists:'Item named "$1" already exists.',errInvName:"Invalid file name.",errInvDirname:"Invalid folder name.",errFolderNotFound:"Folder not found.",errFileNotFound:"File not found.",errTrgFolderNotFound:'Target folder "$1" not found.',errPopup:"Browser prevented opening popup window. To open file enable it in browser options.",errMkdir:'Unable to create folder "$1".',errMkfile:'Unable to create file "$1".',errRename:'Unable to rename "$1".',errCopyFrom:'Copying files from volume "$1" not allowed.',errCopyTo:'Copying files to volume "$1" not allowed.',errMkOutLink:"Unable to create a link to outside the volume root.",errUpload:"Upload error.",errUploadFile:'Unable to upload "$1".',errUploadNoFiles:"No files found for upload.",errUploadTotalSize:"Data exceeds the maximum allowed size.",errUploadFileSize:"File exceeds maximum allowed size.",errUploadMime:"File type not allowed.",errUploadTransfer:'"$1" transfer error.',errUploadTemp:"Unable to make temporary file for upload.",
errNotReplace:'Object "$1" already exists at this location and can not be replaced by object with another type.',errReplace:'Unable to replace "$1".',errSave:'Unable to save "$1".',errCopy:'Unable to copy "$1".',errMove:'Unable to move "$1".',errCopyInItself:'Unable to copy "$1" into itself.',errRm:'Unable to remove "$1".',errTrash:"Unable into trash.",errRmSrc:"Unable remove source file(s).",errExtract:'Unable to extract files from "$1".',errArchive:"Unable to create archive.",errArcType:"Unsupported archive type.",errNoArchive:"File is not archive or has unsupported archive type.",errCmdNoSupport:"Backend does not support this command.",errReplByChild:'The folder "$1" can\'t be replaced by an item it contains.',errArcSymlinks:"For security reason denied to unpack archives contains symlinks or files with not allowed names.",errArcMaxSize:"Archive files exceeds maximum allowed size.",errResize:'Unable to resize "$1".',errResizeDegree:"Invalid rotate degree.",errResizeRotate:"Unable to rotate image.",errResizeSize:"Invalid image size.",errResizeNoChange:"Image size not changed.",errUsupportType:"Unsupported file type.",errNotUTF8Content:'File "$1" is not in UTF-8 and cannot be edited.',errNetMount:'Unable to mount "$1".',errNetMountNoDriver:"Unsupported protocol.",errNetMountFailed:"Mount failed.",errNetMountHostReq:"Host required.",errSessionExpires:"Your session has expired due to inactivity.",errCreatingTempDir:'Unable to create temporary directory: "$1"',errFtpDownloadFile:'Unable to download file from FTP: "$1"',errFtpUploadFile:'Unable to upload file to FTP: "$1"',errFtpMkdir:'Unable to create remote directory on FTP: "$1"',errArchiveExec:'Error while archiving files: "$1"',errExtractExec:'Error while extracting files: "$1"',errNetUnMount:"Unable to unmount.",errConvUTF8:"Not convertible to UTF-8",errFolderUpload:"Try the modern browser, If you'd like to upload the folder.",errSearchTimeout:'Timed out while searching "$1". Search result is partial.',errReauthRequire:"Re-authorization is required.",errMaxTargets:"Max number of selectable items is $1.",errRestore:"Unable to restore from the trash. Can't identify the restore destination.",errEditorNotFound:"Editor not found to this file type.",errServerError:"Error occurred on the server side.",errEmpty:'Unable to empty folder "$1".',moreErrors:"There are $1 more errors.",cmdarchive:"Create archive",cmdback:"Back",cmdcopy:"Copy",cmdcut:"Cut",cmddownload:"Download",cmdduplicate:"Duplicate",cmdedit:"Edit file",cmdextract:"Extract files from archive",cmdforward:"Forward",cmdgetfile:"Select files",cmdhelp:"About this software",cmdhome:"Root",cmdinfo:"Get info",cmdmkdir:"New folder",cmdmkdirin:"Into New Folder",cmdmkfile:"New file",cmdopen:"Open",cmdpaste:"Paste",cmdquicklook:"Preview",cmdreload:"Reload",cmdrename:"Rename",cmdrm:"Delete",cmdtrash:"Into trash",cmdrestore:"Restore",cmdsearch:"Find files",cmdup:"Go to parent folder",cmdupload:"Upload files",cmdview:"View",cmdresize:"Resize & Rotate",cmdsort:"Sort",cmdnetmount:"Mount network volume",cmdnetunmount:"Unmount",cmdplaces:"To Places",cmdchmod:"Change mode",cmdopendir:"Open a folder",cmdcolwidth:"Reset column width",cmdfullscreen:"Full Screen",cmdmove:"Move",cmdempty:"Empty the folder",cmdundo:"Undo",cmdredo:"Redo",cmdpreference:"Preferences",cmdselectall:"Select all",cmdselectnone:"Select none",cmdselectinvert:"Invert selection",cmdopennew:"Open in new window",cmdhide:"Hide (Preference)",btnClose:"Close",btnSave:"Save",btnRm:"Remove",btnApply:"Apply",btnCancel:"Cancel",btnNo:"No",btnYes:"Yes",btnMount:"Mount",btnApprove:"Goto $1 & approve",btnUnmount:"Unmount",btnConv:"Convert",btnCwd:"Here",btnVolume:"Volume",btnAll:"All",btnMime:"MIME Type",btnFileName:"Filename",btnSaveClose:"Save & Close",btnBackup:"Backup",btnRename:"Rename",btnRenameAll:"Rename(All)",btnPrevious:"Prev ($1/$2)",btnNext:"Next ($1/$2)",btnSaveAs:"Save As",ntfopen:"Open folder",ntffile:"Open file",ntfreload:"Reload folder content",ntfmkdir:"Creating folder",ntfmkfile:"Creating files",ntfrm:"Delete items",ntfcopy:"Copy items",ntfmove:"Move items",ntfprepare:"Checking existing items",ntfrename:"Rename files",ntfupload:"Uploading files",ntfdownload:"Downloading files",ntfsave:"Save files",ntfarchive:"Creating archive",ntfextract:"Extracting files from archive",ntfsearch:"Searching files",ntfresize:"Resizing images",ntfsmth:"Doing something",ntfloadimg:"Loading image",ntfnetmount:"Mounting network volume",ntfnetunmount:"Unmounting network volume",ntfdim:"Acquiring image dimension",ntfreaddir:"Reading folder infomation",ntfurl:"Getting URL of link",ntfchmod:"Changing file mode",ntfpreupload:"Verifying upload file name",ntfzipdl:"Creating a file for download",ntfparents:"Getting path infomation",ntfchunkmerge:"Processing the uploaded file",ntftrash:"Doing throw in the trash",ntfrestore:"Doing restore from the trash",ntfchkdir:"Checking destination folder",ntfundo:"Undoing previous operation",ntfredo:"Redoing previous undone",ntfchkcontent:"Checking contents",volume_Trash:"Trash",dateUnknown:"unknown",Today:"Today",Yesterday:"Yesterday",msJan:"Jan",msFeb:"Feb",msMar:"Mar",msApr:"Apr",msMay:"May",msJun:"Jun",msJul:"Jul",msAug:"Aug",msSep:"Sep",msOct:"Oct",msNov:"Nov",msDec:"Dec",January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",Sun:"Sun",Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",sortname:"by name",sortkind:"by kind",sortsize:"by size",sortdate:"by date",sortFoldersFirst:"Folders first",sortperm:"by permission",sortmode:"by mode",sortowner:"by owner",sortgroup:"by group",sortAlsoTreeview:"Also Treeview","untitled file.txt":"NewFile.txt","untitled folder":"NewFolder",Archive:"NewArchive","untitled file":"NewFile.$1",extentionfile:"$1: File",extentiontype:"$1: $2",confirmReq:"Confirmation required",confirmRm:"Are you sure you want to permanently remove items?<br/>This cannot be undone!",confirmRepl:"Replace old file with new one? (If it contains folders, it will be merged. To backup and replace, select Backup.)",confirmRest:"Replace existing item with the item in trash?",confirmConvUTF8:"Not in UTF-8<br/>Convert to UTF-8?<br/>Contents become UTF-8 by saving after conversion.",confirmNonUTF8:"Character encoding of this file couldn't be detected. It need to temporarily convert to UTF-8 for editting.<br/>Please select character encoding of this file.",confirmNotSave:"It has been modified.<br/>Losing work if you do not save changes.",confirmTrash:"Are you sure you want to move items to trash bin?",confirmMove:'Are you sure you want to move items to "$1"?',apllyAll:"Apply to all",name:"Name",size:"Size",perms:"Permissions",modify:"Modified",kind:"Kind",read:"read",write:"write",noaccess:"no access",and:"and",unknown:"unknown",selectall:"Select all items",selectfiles:"Select item(s)",selectffile:"Select first item",selectlfile:"Select last item",viewlist:"List view",viewicons:"Icons view",viewSmall:"Small icons",viewMedium:"Medium icons",viewLarge:"Large icons",viewExtraLarge:"Extra large icons",places:"Places",calc:"Calculate",path:"Path",aliasfor:"Alias for",locked:"Locked",dim:"Dimensions",files:"Files",folders:"Folders",items:"Items",yes:"yes",no:"no",link:"Link",searcresult:"Search results",selected:"selected items",about:"About",shortcuts:"Shortcuts",help:"Help",webfm:"Web file manager",ver:"Version",protocolver:"protocol version",homepage:"Project home",docs:"Documentation",github:"Fork us on GitHub",twitter:"Follow us on Twitter",facebook:"Join us on Facebook",team:"Team",chiefdev:"chief developer",developer:"developer",contributor:"contributor",maintainer:"maintainer",translator:"translator",icons:"Icons",dontforget:"and don't forget to take your towel",shortcutsof:"Shortcuts disabled",dropFiles:"Drop files here",or:"or",selectForUpload:"Select files",moveFiles:"Move items",copyFiles:"Copy items",restoreFiles:"Restore items",rmFromPlaces:"Remove from places",aspectRatio:"Aspect ratio",scale:"Scale",width:"Width",height:"Height",resize:"Resize",crop:"Crop",rotate:"Rotate","rotate-cw":"Rotate 90 degrees CW","rotate-ccw":"Rotate 90 degrees CCW",degree:"°",netMountDialogTitle:"Mount network volume",protocol:"Protocol",host:"Host",port:"Port",user:"User",pass:"Password",confirmUnmount:"Are you sure to unmount $1?",dropFilesBrowser:"Drop or Paste files from browser",dropPasteFiles:"Drop files, Paste URLs or images(clipboard) here",encoding:"Encoding",locale:"Locale",searchTarget:"Target: $1",searchMime:"Search by input MIME Type",owner:"Owner",group:"Group",other:"Other",execute:"Execute",perm:"Permission",mode:"Mode",emptyFolder:"Folder is empty",emptyFolderDrop:"Folder is empty\\A Drop to add items",emptyFolderLTap:"Folder is empty\\A Long tap to add items",quality:"Quality",autoSync:"Auto sync",moveUp:"Move up",getLink:"Get URL link",selectedItems:"Selected items ($1)",folderId:"Folder ID",offlineAccess:"Allow offline access",reAuth:"To re-authenticate",nowLoading:"Now loading...",openMulti:"Open multiple files",openMultiConfirm:"You are trying to open the $1 files. Are you sure you want to open in browser?",emptySearch:"Search results is empty in search target.",editingFile:"It is editing a file.",hasSelected:"You have selected $1 items.",hasClipboard:"You have $1 items in the clipboard.",incSearchOnly:"Incremental search is only from the current view.",reinstate:"Reinstate",complete:"$1 complete",contextmenu:"Context menu",pageTurning:"Page turning",volumeRoots:"Volume roots",reset:"Reset",bgcolor:"Background color",colorPicker:"Color picker","8pxgrid":"8px Grid",enabled:"Enabled",disabled:"Disabled",emptyIncSearch:"Search results is empty in current view.\\A Press [Enter] to expand search target.",emptyLetSearch:"First letter search results is empty in current view.",textLabel:"Text label",minsLeft:"$1 mins left",openAsEncoding:"Reopen with selected encoding",saveAsEncoding:"Save with the selected encoding",selectFolder:"Select folder",firstLetterSearch:"First letter search",presets:"Presets",tooManyToTrash:"It's too many items so it can't into trash.",TextArea:"TextArea",folderToEmpty:'Empty the folder "$1".',filderIsEmpty:'There are no items in a folder "$1".',preference:"Preference",language:"Language",clearBrowserData:"Initialize the settings saved in this browser",toolbarPref:"Toolbar settings",charsLeft:"... $1 chars left.",linesLeft:"... $1 lines left.",sum:"Sum",roughFileSize:"Rough file size",autoFocusDialog:"Focus on the element of dialog with mouseover",select:"Select",selectAction:"Action when select file",useStoredEditor:"Open with the editor used last time",selectinvert:"Invert selection",renameMultiple:"Are you sure you want to rename $1 selected items like $2?<br/>This cannot be undone!",batchRename:"Batch rename",plusNumber:"+ Number",asPrefix:"Add prefix",asSuffix:"Add suffix",changeExtention:"Change extention",columnPref:"Columns settings (List view)",reflectOnImmediate:"All changes will reflect immediately to the archive.",reflectOnUnmount:"Any changes will not reflect until un-mount this volume.",unmountChildren:"The following volume(s) mounted on this volume also unmounted. Are you sure to unmount it?",selectionInfo:"Selection Info",hashChecker:"Algorithms to show the file hash",infoItems:"Info Items (Selection Info Panel)",pressAgainToExit:"Press again to exit.",toolbar:"Toolbar",workspace:"Work Space",dialog:"Dialog",all:"All",iconSize:"Icon Size (Icons view)",editorMaximized:"Open the maximized editor window",editorConvNoApi:"Because conversion by API is not currently available, please convert on the website.",editorConvNeedUpload:"After conversion, you must be upload with the item URL or a downloaded file to save the converted file.",convertOn:"Convert on the site of $1",integrations:"Integrations",integrationWith:"This elFinder has the following external services integrated. Please check the terms of use, privacy policy, etc. before using it.",showHidden:"Show hidden items",hideHidden:"Hide hidden items",toggleHidden:"Show/Hide hidden items",makefileTypes:'File types to enable with "New file"',typeOfTextfile:"Type of the Text file",add:"Add",theme:"Theme","default":"Default",description:"Description",website:"Website",author:"Author",email:"Email",license:"License",exportToSave:"This item can't be saved. To avoid losing the edits you need to export to your PC.",dblclickToSelect:"Double click on the file to select it.",useFullscreen:"Use fullscreen mode",kindUnknown:"Unknown",kindRoot:"Volume Root",kindFolder:"Folder",kindSelects:"Selections",kindAlias:"Alias",kindAliasBroken:"Broken alias",kindApp:"Application",kindPostscript:"Postscript document",kindMsOffice:"Microsoft Office document",kindMsWord:"Microsoft Word document",kindMsExcel:"Microsoft Excel document",kindMsPP:"Microsoft Powerpoint presentation",kindOO:"Open Office document",kindAppFlash:"Flash application",kindPDF:"Portable Document Format (PDF)",kindTorrent:"Bittorrent file",kind7z:"7z archive",kindTAR:"TAR archive",kindGZIP:"GZIP archive",kindBZIP:"BZIP archive",kindXZ:"XZ archive",kindZIP:"ZIP archive",kindRAR:"RAR archive",kindJAR:"Java JAR file",kindTTF:"True Type font",kindOTF:"Open Type font",kindRPM:"RPM package",kindText:"Text document",kindTextPlain:"Plain text",kindPHP:"PHP source",kindCSS:"Cascading style sheet",kindHTML:"HTML document",kindJS:"Javascript source",kindRTF:"Rich Text Format",kindC:"C source",kindCHeader:"C header source",kindCPP:"C++ source",kindCPPHeader:"C++ header source",kindShell:"Unix shell script",kindPython:"Python source",kindJava:"Java source",kindRuby:"Ruby source",kindPerl:"Perl script",kindSQL:"SQL source",kindXML:"XML document",kindAWK:"AWK source",kindCSV:"Comma separated values",kindDOCBOOK:"Docbook XML document",kindMarkdown:"Markdown text",kindImage:"Image",kindBMP:"BMP image",kindJPEG:"JPEG image",kindGIF:"GIF Image",kindPNG:"PNG Image",kindTIFF:"TIFF image",kindTGA:"TGA image",kindPSD:"Adobe Photoshop image",kindXBITMAP:"X bitmap image",kindPXM:"Pixelmator image",kindAudio:"Audio media",kindAudioMPEG:"MPEG audio",kindAudioMPEG4:"MPEG-4 audio",kindAudioMIDI:"MIDI audio",kindAudioOGG:"Ogg Vorbis audio",kindAudioWAV:"WAV audio",AudioPlaylist:"MP3 playlist",kindVideo:"Video media",kindVideoDV:"DV movie",kindVideoMPEG:"MPEG movie",kindVideoMPEG4:"MPEG-4 movie",kindVideoAVI:"AVI movie",kindVideoMOV:"Quick Time movie",kindVideoWM:"Windows Media movie",kindVideoFlash:"Flash movie",kindVideoMKV:"Matroska movie",kindVideoOGG:"Ogg movie"}}),e.fn.elfinderbutton=function(t){return this.each(function(){var n,i,a="class",o=t.fm,r=o.res(a,"disabled"),s=o.res(a,"active"),l=o.res(a,"hover"),c="elfinder-button-menu-item",d="elfinder-button-menu-item-selected",p=e('<span class="elfinder-button-text">'+t.title+"</span>"),u=t.className?t.className:t.name,h=e(this).addClass("ui-state-default elfinder-button").attr("title",t.title).append('<span class="elfinder-button-icon elfinder-button-icon-'+u+'"></span>',p).on("mouseenter mouseleave",function(e){!h.hasClass(r)&&h["mouseleave"==e.type?"removeClass":"addClass"](l)}).on("click",function(e){h.hasClass(r)||(n&&t.variants.length>=1?(n.is(":hidden")&&o.getUI().click(),e.stopPropagation(),n.css(m()).slideToggle({duration:100,done:function(e){o[n.is(":visible")?"toFront":"toHide"](n)}})):o.exec(t.name,g(),{_userAction:!0,_currentType:"toolbar",_currentNode:h}))}),f=function(){o.toHide(n)},m=function(){var e=o.getUI(),t=e.offset(),n=h.offset();return{top:n.top-t.top,left:n.left-t.left,maxHeight:e.height()-40}},g=function(){var e,t=o.selected();return t.length||(t=(e=o.cwd())?[o.cwd().hash]:void 0),t};p.hide(),t.button=h,Array.isArray(t.variants)&&(h.addClass("elfinder-menubutton"),n=e('<div class="ui-front ui-widget ui-widget-content elfinder-button-menu elfinder-button-'+u+'-menu ui-corner-all"></div>').hide().appendTo(o.getUI()).on("mouseenter mouseleave","."+c,function(){e(this).toggleClass(l)}).on("click","."+c,function(i){var a=e(this).data("value");i.preventDefault(),i.stopPropagation(),h.removeClass(l),o.toHide(n),"undefined"==typeof a&&(a={}),"object"==typeof a&&(a._userAction=!0),o.exec(t.name,g(),a)}).on("close",f),o.bind("disable select",f).getUI().on("click",f),t.change(function(){n.html(""),e.each(t.variants,function(i,a){n.append(e('<div class="'+c+'">'+a[1]+"</div>").data("value",a[0]).addClass(a[0]==t.value?d:""))})})),t.change(function(){var e;i&&cancelAnimationFrame(i),i=requestAnimationFrame(function(){t.disabled()?h.removeClass(s+" "+l).addClass(r):(h.removeClass(r),h[t.active()?"addClass":"removeClass"](s)),t.syncTitleOnChange&&(e=t.className?t.className:t.name,u!==e&&(h.children(".elfinder-button-icon").removeClass("elfinder-button-icon-"+u).addClass("elfinder-button-icon-"+e),n&&n.removeClass("elfinder-button-"+u+"-menu").addClass("elfinder-button-"+e+"-menu"),u=e),p.html(t.title),h.attr("title",t.title))})}).change()})},e.fn.elfindercontextmenu=function(t){return this.each(function(){var n,i,a,o,r,s,l,c=(e(this),"elfinder-contextmenu-item"),d="elfinder-contextsubmenu-item",p="elfinder-contextmenu-extra-icon",u=t.res("class","hover"),h={distance:8,start:function(){f.data("drag",!0).data("touching")&&f.find("."+u).removeClass(u)},stop:function(){f.data("draged",!0).removeData("drag")}},f=e(this).addClass("touch-punch ui-helper-reset ui-front ui-widget ui-state-default ui-corner-all elfinder-contextmenu elfinder-contextmenu-"+t.direction).hide().on("touchstart",function(e){f.data("touching",!0).children().removeClass(u)}).on("touchend",function(e){f.removeData("touching")}).on("mouseenter mouseleave","."+c,function(t){e(this).toggleClass(u,!("mouseenter"!==t.type&&(f.data("draged")||!f.data("submenuKeep")))),f.data("draged")&&f.data("submenuKeep")&&f.find(".elfinder-contextmenu-sub:visible").parent().addClass(u)}).on("mouseenter mouseleave","."+p,function(t){e(this).parent().toggleClass(u,"mouseleave"===t.type)}).on("mouseenter mouseleave","."+c+",."+d,function(t){var n=function(t,n){e.each(n?r:a,function(e,i){if(t[0]===i)return(n?r:a)._cur=e,n?s=t:o=t,!1})};if(t.originalEvent){var i=e(this),l=function(){o&&!o.children("div.elfinder-contextmenu-sub:visible").length&&o.removeClass(u)};"mouseenter"===t.type?i.hasClass(d)?(s&&s.removeClass(u),o&&(r=o.find("div."+d)),n(i,!0)):(l(),n(i)):i.hasClass(d)?(s=null,r=null):(l(),function(e){setTimeout(function(){e===o&&(o=null)},250)}(o))}}).on("contextmenu",function(){return!1}).on("mouseup",function(){setTimeout(function(){f.removeData("draged")},100)}).draggable(h),m="ltr"===t.direction,g=m?"left":"right",v=Object.assign({},t.options.contextmenu),b='<div class="'+c+'{className}"><span class="elfinder-button-icon {icon} elfinder-contextmenu-icon"{style}></span><span>{label}</span></div>',y=function(n,i,a,o){var r,s,l="",c="",d="";return o&&(o.className&&(l=" "+o.className),o.iconClass&&(d=o.iconClass,i=""),o.iconImg&&(r=o.iconImg.split(/ +/),s=r[1]&&r[2]?t.escape(r[1]+"px "+r[2]+"px"):"",c=" style=\"background:url('"+t.escape(r[0])+"') "+(s?s:"0 0")+" no-repeat;"+(s?"":"posbackground-size:contain;")+'"')),e(b.replace("{icon}",i?"elfinder-button-icon-"+i:d?d:"").replace("{label}",n).replace("{style}",c).replace("{className}",l)).on("click",function(e){e.stopPropagation(),e.preventDefault(),a()})},w=function(e){var t=e.split(/ +/),n=t[1]&&t[2]?t[1]+"px "+t[2]+"px":"";return{backgroundImage:'url("'+t[0]+'")',backgroundRepeat:"no-repeat",backgroundPosition:n?n:"",backgroundSize:n?"":"contain"}},x=function(){var n="touchstart.contextmenuAutoToggle";f.data("hideTm")&&clearTimeout(f.data("hideTm")),f.is(":visible")&&f.on("touchstart",function(e){e.originalEvent.touches.length>1||(f.stop(),t.toFront(f),f.data("hideTm")&&clearTimeout(f.data("hideTm")))}).data("hideTm",setTimeout(function(){f.is(":visible")&&(i.find(".elfinder-cwd-file").off(n),i.find(".elfinder-cwd-file.ui-selected").one(n,function(t){if(!(t.originalEvent.touches.length>1)){var a=e(t.target);return!f.first().length||a.is("input:checkbox")||a.hasClass("elfinder-cwd-select")?void i.find(".elfinder-cwd-file").off(n):(t.stopPropagation(),C(t.originalEvent.touches[0].pageX,t.originalEvent.touches[0].pageY),i.data("longtap",!0),void a.one("touchend",function(){setTimeout(function(){i.removeData("longtap")},80)}))}}).one("unselect."+t.namespace,function(){i.find(".elfinder-cwd-file").off(n)}),f.fadeOut({duration:300,fail:function(){f.css("opacity","1").show()},done:function(){t.toHide(f)}}))},4500))},k=function(n){var i=n.keyCode,l=e.ui.keyCode.ESCAPE,c=e.ui.keyCode.ENTER,p=e.ui.keyCode.LEFT,h=e.ui.keyCode.RIGHT,f=e.ui.keyCode.UP,m=e.ui.keyCode.DOWN,g="ltr"===t.direction?h:p,v=g===h?p:h;e.inArray(i,[l,c,p,h,f,m])!==-1&&(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),i==l||i===v?o&&r&&s?(s.trigger("mouseleave").trigger("submenuclose"),o.addClass(u),r=null,s=null):i==l&&z():i==f||i==m?r?(s&&s.trigger("mouseleave"),i==m&&(!s||r.length<=++r._cur)?r._cur=0:i==f&&(!s||--r._cur<0)&&(r._cur=r.length-1),s=r.eq(r._cur).trigger("mouseenter")):(r=null,o&&o.trigger("mouseleave"),i==m&&(!o||a.length<=++a._cur)?a._cur=0:i==f&&(!o||--a._cur<0)&&(a._cur=a.length-1),o=a.eq(a._cur).addClass(u)):!o||i!=c&&i!==g||(o.hasClass("elfinder-contextmenu-group")?s?i==c&&s.click():(o.trigger("mouseenter"),r=o.find("div."+d),r._cur=0,s=r.first().addClass(u)):i==c&&o.click()))},C=function(i,a,c){var d,p=f.outerWidth(),u=f.outerHeight(),h=n.attr("style"),m=n.offset(),v=n.width(),b=n.height(),y=t.UA.Mobile?40:2,w=t.UA.Mobile?20:2,i=i-(m?m.left:0),a=a-(m?m.top:0),c=Object.assign(c||{},{top:Math.max(0,a+w+u<b?a+w:a-(a+u-b)),left:Math.max(0,i<p+y||i+y+p<v?i+y:i-y-p),opacity:"1"});l=!0,t.autoSync("stop"),n.width(v),f.stop().removeAttr("style").css(c),t.toFront(f),f.show(),n.attr("style",h),c[g]=parseInt(f.width()),f.find(".elfinder-contextmenu-sub").css(c),t.UA.iOS&&e("div.elfinder div.overflow-scrolling-touch").css("-webkit-overflow-scrolling","auto"),o=null,r=null,s=null,e(document).on("keydown."+t.namespace,k),d=e._data(document).events,d&&d.keydown&&d.keydown.unshift(d.keydown.pop()),t.UA.Mobile&&x(),requestAnimationFrame(function(){t.getUI().one("click."+t.namespace,z)})},z=function(){if(t.getUI().off("click."+t.namespace,z),e(document).off("keydown."+t.namespace,k),j=O=null,f.is(":visible")||f.children().length){t.toHide(f.removeAttr("style").empty().removeData("submenuKeep"));try{f.draggable("instance")||f.draggable(h)}catch(n){f.hasClass("ui-draggable")||f.draggable(h)}f.data("prevNode")&&(f.data("prevNode").after(f),f.removeData("prevNode")),t.trigger("closecontextmenu"),t.UA.iOS&&e("div.elfinder div.overflow-scrolling-touch").css("-webkit-overflow-scrolling","touch")}l&&t.searchStatus.state<1&&!t.searchStatus.ininc&&t.autoSync(),l=!1},T=function(i,o){var r,s=!1,l=!1,h=[],g="cwd"===i,b=0;j=i,O=o,(r=t.option("uiCmdMap",g?void 0:o[0]))||(r={}),g||(h=t.getDisabledCmds(o)),b=t.selected().length,b>1&&f.append('<div class="ui-corner-top ui-widget-header elfinder-contextmenu-header"><span>'+t.i18n("selectedItems",""+b)+"</span></div>"),a=e(),e.each(v[i]||[],function(v,b){var x,k,C,T,A,j;if("|"===b)return void(s&&(l=!0));if(r[b]?(k=r[b],C=!0):k=b,x=t.getCommand(k),!x||g||t.searchStatus.state&&x.disableOnSearch||(x.__disabled=x._disabled,x._disabled=!(x.alwaysEnabled||!!t._commands[k]&&!(e.inArray(b,h)!==-1||C&&h[k])),e.each(x.linkedCmds,function(e,n){var i;(i=t.getCommand(n))&&(i.__disabled=i._disabled,i._disabled=!(i.alwaysEnabled||!!t._commands[n]&&!h[n]))})),x&&!x._disabled&&x.getstate(o)!=-1){if(x.variants){if(!x.variants.length)return;T=y(x.title,x.className?x.className:x.name,function(){},x.contextmenuOpts),A=e('<div class="ui-front ui-corner-all elfinder-contextmenu-sub"></div>').hide().css("max-height",t.getUI().height()-30).appendTo(T.append('<span class="elfinder-contextmenu-arrow"></span>')),j=function(e){if(e){var i=n.attr("style");n.width(n.width()),A.css({top:"-1000px",left:"auto",right:"auto"});var a,o,r=T.offset(),s=r.left,l=r.top,c=T.outerWidth(),d=A.outerWidth(!0),p=A.outerHeight(!0),u=n.offset(),h=u.left+n.width(),g=u.top+n.height(),v=m,b=c;m?(o=s+c+d-h,o>10&&(s>d-5?(b-=5,v=!1):t.UA.Mobile||(b=c-o))):(o=d-s,o>0&&(s+c+d-15<h?(b-=5,v=!0):t.UA.Mobile||(b=c-o))),o=l+5+p-g,a=o>0&&l<g?5-o:o>0?30-p:5,f.find(".elfinder-contextmenu-sub:visible").hide(),A.css({top:a,left:v?b:"auto",right:v?"auto":b,overflowY:"auto"}).show(),n.attr("style",i)}else A.hide()},T.addClass("elfinder-contextmenu-group").on("mouseleave",".elfinder-contextmenu-sub",function(e){f.data("draged")||f.removeData("submenuKeep")}).on("submenuclose",".elfinder-contextmenu-sub",function(e){j(!1)}).on("click","."+d,function(n){var a,r;n.stopPropagation(),f.data("draged")||(r=e(this),x.keepContextmenu?(r.removeClass(u),T.addClass(u)):f.hide(),a=r.data("exec"),"undefined"==typeof a&&(a={}),"object"==typeof a&&(a._userAction=!0,a._currentType=i,a._currentNode=r),!x.keepContextmenu&&z(),t.exec(x.name,o,a))}).on("touchend",function(e){f.data("drag")||(j(!0),f.data("submenuKeep",!0))}).on("mouseenter mouseleave",function(t){f.data("touching")||(T.data("timer")&&(clearTimeout(T.data("timer")),T.removeData("timer")),e(t.target).closest(".elfinder-contextmenu-sub",f).length||("mouseleave"===t.type?f.data("submenuKeep")||T.data("timer",setTimeout(function(){T.removeData("timer"),j(!1)},250)):T.data("timer",setTimeout(function(){T.removeData("timer"),j(!0)},a.find("div.elfinder-contextmenu-sub:visible").length?250:0))))}),e.each(x.variants,function(t,n){var i,a="|"===n?'<div class="elfinder-contextmenu-separator"></div>':e('<div class="'+c+" "+d+'"><span>'+n[1]+"</span></div>").data("exec",n[0]);"undefined"!=typeof n[2]&&(i=e("<span></span>").addClass("elfinder-button-icon elfinder-contextmenu-icon"),/\//.test(n[2])?i.css(w(n[2])):i.addClass("elfinder-button-icon-"+n[2]),a.prepend(i).addClass(d+"-icon")),A.append(a)})}else T=y(x.title,x.className?x.className:x.name,function(){f.data("draged")||(!x.keepContextmenu&&z(),t.exec(x.name,o,{_userAction:!0,_currentType:i,_currentNode:T}))},x.contextmenuOpts),x.extra&&x.extra.node?(e('<span class="elfinder-button-icon elfinder-button-icon-'+(x.extra.icon||"")+" "+p+'"></span>').append(x.extra.node).appendTo(T),e(x.extra.node).trigger("ready",{targets:o})):T.remove("."+p);x.extendsCmd&&T.children("span.elfinder-button-icon").addClass("elfinder-button-icon-"+x.extendsCmd),l&&f.append('<div class="elfinder-contextmenu-separator"></div>'),f.append(T),s=!0,l=!1}x&&"undefined"!=typeof x.__disabled&&(x._disabled=x.__disabled,delete x.__disabled,e.each(x.linkedCmds,function(e,n){var i;(i=t.getCommand(n))&&(i._disabled=i.__disabled,delete i.__disabled)}))}),a=f.children("div."+c)},A=function(t){j="raw",e.each(t,function(e,t){var n;"|"===t?f.append('<div class="elfinder-contextmenu-separator"></div>'):t.label&&"function"==typeof t.callback&&(n=y(t.label,t.icon,function(){f.data("draged")||(!t.remain&&z(),t.callback())},t.options||null),f.append(n))}),a=f.children("div."+c)},j=null,O=null;t.one("load",function(){n=t.getUI(),i=t.getUI("cwd"),t.bind("contextmenu",function(n){var a,o=n.data,r={};o.type&&"files"!==o.type&&i.trigger("unselectall"),z(),o.type&&o.targets?(t.trigger("contextmenucreate",o),T(o.type,o.targets),t.trigger("contextmenucreatedone",o)):o.raw&&A(o.raw),f.children().length&&(a=o.prevNode||null,a&&(f.data("prevNode",f.prev()),a.after(f)),o.fitHeight&&(r={maxHeight:Math.min(t.getUI().height(),e(window).height()),overflowY:"auto"},f.draggable("destroy").removeClass("ui-draggable")),C(o.x,o.y,r),o.opened&&"function"==typeof o.opened&&o.opened.call(f))}).one("destroy",function(){f.remove()}).bind("disable",z).bind("select",function(e){"files"===j&&(!e.data||e.data.selected.toString()!==O.toString())&&z()})}).shortcut({pattern:"mac"===t.OS?"ctrl+m":"contextmenu shift+f10",description:"contextmenu",callback:function(n){n.stopPropagation(),n.preventDefault(),e(document).one("contextmenu."+t.namespace,function(e){e.preventDefault(),e.stopPropagation()});var i,a,o,r,s=t.selected();s.length?(i="files",a=s,r=t.cwdHash2Elm(s[0])):(i="cwd",a=[t.cwd().hash],o=t.getUI("workzone").offset()),r&&r.length||(r=t.getUI("workzone")),o=r.offset(),o.top+=r.height()/2,o.left+=r.width()/2,t.trigger("contextmenu",{type:i,targets:a,x:o.left,y:o.top})}})})},e.fn.elfindercwd=function(t,n){return this.not(".elfinder-cwd").each(function(){var i,a,o,r,s,l,c,d=t.UA.Mobile,p="list"==t.viewType,u="select."+t.namespace,h="unselect."+t.namespace,f="disable."+t.namespace,m="enable."+t.namespace,g="class",v=t.res(g,"cwdfile"),b="."+v,y="ui-selected",w=t.res(g,"disabled"),x=t.res(g,"draggable"),k=t.res(g,"droppable"),C=t.res(g,"hover"),z=t.res(g,"active"),T=t.res(g,"adroppable"),A=v+"-tmp",j="elfinder-cwd-selectchk",O=t.options.loadTmbs>0?t.options.loadTmbs:5,S="",I={},M=[],E=[],F=void 0,D=[],U="",P=function(){for(var e="",t=0;t<D.length;t++)e+='<td class="elfinder-col-'+D[t]+'">{'+D[t]+"}</td>";return e},q=function(){return'<tr id="{id}" class="'+v+' {permsclass} {dirclass}" title="{tooltip}"{css}><td class="elfinder-col-name"><div class="elfinder-cwd-file-wrapper"><span class="elfinder-cwd-icon {mime}"{style}></span>{marker}<span class="elfinder-cwd-filename">{name}</span></div>'+R+"</td>"+P()+"</tr>"},R=e.map(n.showSelectCheckboxUA,function(e){return!(!t.UA[e]&&!e.match(/^all$/i))||null}).length?'<div class="elfinder-cwd-select"><input type="checkbox" class="'+j+'"></div>':"",H=!1,_=null,N={icon:'<div id="{id}" class="'+v+' {permsclass} {dirclass} ui-corner-all" title="{tooltip}"><div class="elfinder-cwd-file-wrapper ui-corner-all"><div class="elfinder-cwd-icon {mime} ui-corner-all" unselectable="on"{style}></div>{marker}</div><div class="elfinder-cwd-filename" title="{nametitle}">{name}</div>'+R+"</div>",row:""},L=t.res("tpl","perms"),W=t.res("tpl","lock"),B=t.res("tpl","symlink"),$={id:function(e){return t.cwdHash2Id(e.hash)},name:function(e){var n=t.escape(e.i18||e.name);return!p&&(n=n.replace(/([_.])/g,"&#8203;$1")),n},nametitle:function(e){return t.escape(e.i18||e.name)},permsclass:function(e){return t.perms2class(e)},perm:function(e){return t.formatPermissions(e)},dirclass:function(e){var i="directory"==e.mime?"directory":"";return e.isroot&&(i+=" isroot"),e.csscls&&(i+=" "+t.escape(e.csscls)),n.getClass&&(i+=" "+n.getClass(e)),i},style:function(e){return e.icon?t.getIconStyle(e):""},mime:function(e){var n=t.mime2class(e.mime);return e.icon&&(n+=" elfinder-cwd-bgurl"),n},size:function(e){return"directory"!==e.mime||e.size?t.formatSize(e.size):"-"},date:function(e){return t.formatDate(e)},kind:function(e){return t.mime2kind(e)},mode:function(e){return e.perm?t.formatFileMode(e.perm):""},modestr:function(e){return e.perm?t.formatFileMode(e.perm,"string"):""},modeoct:function(e){return e.perm?t.formatFileMode(e.perm,"octal"):""},modeboth:function(e){return e.perm?t.formatFileMode(e.perm,"both"):""},marker:function(e){return(e.alias||"symlink-broken"==e.mime?B:"")+(e.read&&e.write?"":L)+(e.locked?W:"")},tooltip:function(e){var n=t.formatDate(e)+(e.size>0?" ("+t.formatSize(e.size)+")":""),i="";return i=S&&e.path?t.escape(e.path.replace(/\/[^\/]*$/,"")):e.tooltip?t.escape(e.tooltip).replace(/\r/g,"&#13;"):"",p&&(i+=(i?"&#13;":"")+t.escape(e.i18||e.name)),i?i+"&#13;"+n:n}},V={},K=function(n,i){var o,r,s;if(n&&!V[n]&&("undefined"==typeof a&&(e("#elfinderAddBadgeStyle"+t.namespace).length&&e("#elfinderAddBadgeStyle"+t.namespace).remove(),a=e('<style id="addBadgeStyle'+t.namespace+'"></style>').insertBefore(e("head").children(":first")).get(0).sheet||null),a)){if(n=n.toLowerCase(),s=n.split("/"),r=t.escape(t.mimeTypes[n]||(i.replace(/.bac?k$/i,"").match(/\.([^.]+)$/)||["",""])[1])){o=".elfinder-cwd-icon-"+s[0].replace(/(\.|\+)/g,"-"),"undefined"!=typeof s[1]&&(o+=".elfinder-cwd-icon-"+s[1].replace(/(\.|\+)/g,"-"));try{a.insertRule(o+':before{content:"'+r.toLowerCase()+'"}',0)}catch(l){}}V[n]=!0}},X=function(e){
return e.mime&&"directory"!==e.mime&&!V[e.mime]&&K(e.mime,e.name),N[p?"row":"icon"].replace(/\{([a-z0-9_]+)\}/g,function(n,i){return $[i]?$[i](e,t):e[i]?e[i]:""})},J=e(),G=!1,Y=function(t,n){function i(e,t){return e[t+"All"]("[id]:not(."+w+"):not(.elfinder-cwd-parent):first")}var a,o,r,s,l,c=e.ui.keyCode,d=t==c.LEFT||t==c.UP,f=Ue.find("[id]."+y);if(f.length)if(a=f.filter(d?":first":":last"),r=i(a,d?"prev":"next"),r.length)if(p||t==c.LEFT||t==c.RIGHT)o=r;else if(s=a.position().top,l=a.position().left,o=a,d){do o=o.prev("[id]");while(o.length&&!(o.position().top<s&&o.position().left<=l));o.hasClass(w)&&(o=i(o,"next"))}else{do o=o.next("[id]");while(o.length&&!(o.position().top>s&&o.position().left>=l));o.hasClass(w)&&(o=i(o,"prev")),o.length||(r=Ue.find("[id]:not(."+w+"):last"),r.position().top>s&&(o=r))}else o=a;else o=J.length?d?J.prev():J:Ue.find("[id]:not(."+w+"):not(.elfinder-cwd-parent):"+(d?"last":"first"));o&&o.length&&!o.hasClass("elfinder-cwd-parent")&&(a&&n?o=a.add(a[d?"prevUntil":"nextUntil"]("#"+o.attr("id"))).add(o):f.trigger(h),o.trigger(u),re(o.filter(d?":first":":last")),oe())},Q={},Z=function(e){t.cwdHash2Elm(e).trigger(u)},ee=!1,te=function(){t.cwd().hash;R&&Re.find("input").prop("checked",!0),t.lazy(function(){var n;t.maxTargets&&(F||E).length>t.maxTargets?(ne({notrigger:!0}),n=e.map(F||E,function(e){return t.file(e)||null}),n=n.slice(0,t.maxTargets),Q={},e.each(n,function(e,n){Q[n.hash]=!0,t.cwdHash2Elm(n.hash).trigger(u)}),t.toast({mode:"warning",msg:t.i18n(["errMaxTargets",t.maxTargets])})):(Ue.find("[id]:not(."+y+"):not(.elfinder-cwd-parent)").trigger(u),Q=t.arrayFlip(F||E,!0)),oe(),R&&Re.data("pending",!1)},0,{repaint:!0})},ne=function(e){var t=e||{};R&&Re.find("input").prop("checked",!1),Object.keys(Q).length&&(G=!1,Q={},Ue.find("[id]."+y).trigger(h),R&&Ue.find("input:checkbox."+j).prop("checked",!1)),!t.notrigger&&oe(),R&&Re.data("pending",!1),Ue.removeClass("elfinder-cwd-allselected")},ie=function(){var n={};ee?ne():Object.keys(Q).length?(e.each(F||E,function(e,i){var a=t.cwdHash2Elm(i);Q[i]?a.length&&a.trigger(h):(n[i]=!0,a.length&&a.trigger(u))}),Q=n,oe()):te()},ae=void 0,oe=function(){var e=Object.keys(Q),n={selected:e,origin:"cwd"};ge&&(e.length>1||e[0]!==t.cwdId2Hash(ge.attr("id")))&&ge.hasClass(y)&&ge.trigger(h),ee=e.length&&e.length===(F||E).length&&(!t.maxTargets||e.length<=t.maxTargets),R&&(Re.find("input").prop("checked",ee),Ue[ee?"addClass":"removeClass"]("elfinder-cwd-allselected")),ee?n.selectall=!0:e.length||(n.unselectall=!0),t.trigger("select",n)},re=function(e,n){if(e.length){var i=e.position().top,a=e.outerHeight(!0),o=Pe.scrollTop(),r=Pe.get(0).clientHeight,s=we?we.outerHeight(!0):0;i+s+a>o+r?Pe.scrollTop(parseInt(i+s+a-r)):i<o&&Pe.scrollTop(i),p&&Pe.scrollLeft(0),!!n&&t.resources.blink(e,"lookme")}},se=[],le={},ce=function(e){for(var t=se.length;t--;)if(se[t].hash==e)return t;return-1},de="elfscrstart",pe="elfscrstop",ue=!1,he={disabled:!0,filter:"[id]:first",stop:oe,delay:250,appendTo:"body",autoRefresh:!1,selected:function(t,n){e(n.selected).trigger(u)},unselected:function(t,n){e(n.unselected).trigger(h)}},fe={},me=function(a,o){if(le.renderd){var r=(p?Ue.find("tbody:first"):Ue).children("[id]"+(n.oldSchool?":not(.elfinder-cwd-parent)":"")+":first");if(r.length){var s,l,c=Ue.data("selectable"),d=function(){var n=Pe.offset(),a=Pe.width(),o=e(window),s=r.width()/2,l=Math.min(n.left-o.scrollLeft()+("ltr"===t.direction?s:a-s),n.left+a-10),c=n.top-o.scrollTop()+10+(p?i:0);return{left:Math.max(0,Math.round(l)),top:Math.max(0,Math.round(c))}}(),u=a?r:e(document.elementFromPoint(d.left,d.top)),h={},f={},m=5,g=Math.ceil((le.hpi?Math.ceil(Le.data("rectangle").height/le.hpi*1.5):be)/m),y=function(){var e,n,i;for(i=0;i<m&&(e=u.attr("id"),e&&(le.getTmbs=[],n=t.cwdId2Hash(e),fe[n]=e,le.attachTmbs[n]&&(f[n]=le.attachTmbs[n]),c&&(h[e]=!0)),u=u.next(),u.length);i++);},w=function(){var e;Ue.data("selectable")&&(Object.assign(h,Q),e=Object.keys(h),e.length&&(he.filter="#"+e.join(", #"),Ue.selectable("enable").selectable("option",{filter:he.filter}).selectable("refresh"))),Object.keys(f).length&&(le.getTmbs=[],Ae(f))},x=function(){u.hasClass(v)||(u=u.closest(b))};if(fe={},c&&Ue.selectable("option","disabled"),u.length&&(u.hasClass(v)||u.closest(b).length||(l=t.getUI().find(".ui-dialog:visible,.ui-widget:visible"),l.length?(l.hide(),u=e(document.elementFromPoint(d.left,d.top)),l.show()):l=null),x(),u.length||(l&&l.hide(),u=e(document.elementFromPoint(d.left,d.top+5)),l&&l.show(),x())),u.length){if(u.attr("id"))if(a){for(var k=0;k<g&&(y(),u.length);k++);w()}else le.repaintJob&&"pending"===le.repaintJob.state()&&le.repaintJob.reject(),s=new Array(g),le.repaintJob=t.asyncJob(function(){y(),u.length||(w(),le.repaintJob&&"pending"===le.repaintJob.state()&&le.repaintJob.reject())},s).done(w)}else a&&le.renderd&&(o=o||0,o<10&&requestAnimationFrame(function(){me(a,++o)}))}}},ge=null,ve=function(n){var i=t.cwd().phash,a=t.file(i)||null,o=function(n){n&&(ge=e(X(e.extend(!0,{},n,{name:"..",i18:"..",mime:"directory"}))).addClass("elfinder-cwd-parent").on("dblclick",function(){t.trigger("select",{selected:[i]}).exec("open",i)}),(p?ge.children("td:first"):ge).children(".elfinder-cwd-select").remove(),t.cwdHash2Elm(i).length?t.cwdHash2Elm(i).replaceWith(ge):(p?Ue.find("tbody"):Ue).prepend(ge),t.draggingUiHelper&&t.draggingUiHelper.data("refreshPositions",1))};a?o(a):(o({hash:i,read:!0,write:!0}),t.getUI("tree").length?t.one("parents",function(){o(t.file(i)||null),Pe.trigger(pe)}):t.request({data:{cmd:"parents",target:t.cwd().hash},preventFail:!0}).done(function(e){o(t.file(i)||null),Pe.trigger(pe)}))},be=t.options.showFiles,ye=function(){if(!(le.rendering||le.renderd&&!se.length)){var i,a,o=p?Ue.children("table").children("tbody"):Ue,r=!!e.htmlPrefilter,s=e(r?document.createDocumentFragment():"<div></div>"),l=function(n){var i,a,l,c=n||null,h=[],f=!1,m={},g="self"===t.option("tmbUrl"),v=!le.renderd;i=se.splice(0,be+(c||0)/(le.hpi||1)),le.renderd+=i.length,se.length||(qe.hide(),Pe.off(pe,ye)),a=[],h=e.map(i,function(e){return e.hash&&e.name?("directory"==e.mime&&(f=!0),(e.tmb&&(1!=e.tmb||e.size>0)||g&&0===e.mime.indexOf("image/"))&&(m[e.hash]=e.tmb||"self"),I[e.hash]&&a.push(e.hash),X(e)):null}),s.empty().append(h.join("")),f&&!d&&Te(s),l=[],Object.keys(Q).length&&s.find("[id]:not(."+y+"):not(.elfinder-cwd-parent)").each(function(){Q[t.cwdId2Hash(this.id)]&&l.push(e(this))}),o.append(r?s:s.children()),l.length&&(e.each(l,function(e,t){t.trigger(u)}),oe()),a.length&&t.trigger("lockfiles",{files:a}),!le.hpi&&Ee(o,i.length),p&&(Ue.find("thead").show(),ke({fitWidth:!_})),Object.keys(m).length&&Object.assign(le.attachTmbs,m),v&&(d||Ue.data("selectable")||Ue.selectable(he).data("selectable",!0)),!ue&&Pe.trigger(pe)};le.renderd||(le.rendering=!0,Pe.scrollTop(0),i=t.cwd().phash,l(),n.oldSchool&&(i&&!S?ve(i):ge=e()),p&&(_&&Ce(),ke({fitWidth:!0})),le.itemH=(p?o.find("tr:first"):o.find("[id]:first")).outerHeight(!0),t.trigger("cwdrender"),le.rendering=!1,me(!0)),!le.rendering&&se.length?(a=Pe.height()+Pe.scrollTop()+t.options.showThreshold+le.row-le.renderd*le.hpi)>0?(le.rendering=!0,t.lazy(function(){l(a),le.rendering=!1})):!t.enabled()&&_e():_e()}},we=null,xe=t.UA.CSS.positionSticky&&t.UA.CSS.widthMaxContent,ke=function(a){if(i=0,n.listView.fixedHeader){var o,r,s,l,c,d,p,u,h,f,m,g,v,b=function(){var e,n;n="ltr"===t.direction?"left":"right",e=("ltr"===t.direction?Pe.scrollLeft():s.outerWidth(!0)-Pe.width()-Pe.scrollLeft())*-1,r.css(n)!==e&&r.css(n,e)},y=a||{};if(c=Ue.find("tbody"),u=c.children("tr:first"),u.length&&u.is(":visible")){if(s=c.parent(),we?(l=e("#"+t.namespace+"-cwd-thead"),p=l.children("tr:first")):(v=!0,c.addClass("elfinder-cwd-fixheader"),l=Ue.find("thead").attr("id",t.namespace+"-cwd-thead"),p=l.children("tr:first"),d=p.outerHeight(!0),Ue.css("margin-top",d-parseInt(s.css("padding-top"))),xe?(we=e('<div class="elfinder-table-header-sticky"></div>').addClass(Ue.attr("class")).append(e("<table></table>").append(l)),Ue.after(we),Pe.on("resize.fixheader",function(e){e.stopPropagation(),ke({fitWidth:!0})})):(r=e("<div></div>").addClass(Ue.attr("class")).append(e("<table></table>").append(l)),we=e("<div></div>").addClass(Pe.attr("class")+" elfinder-cwd-fixheader").removeClass("ui-droppable native-droppable").css(Pe.position()).css({height:d,width:Ue.outerWidth()}).append(r),"rtl"===t.direction&&we.css("left",Pe.data("width")-Pe.width()+"px"),b(),Pe.after(we).on("scroll.fixheader resize.fixheader",function(e){b(),"resize"===e.type&&(e.stopPropagation(),we.css(Pe.position()),Pe.data("width",Pe.css("overflow","hidden").width()),Pe.css("overflow","auto"),ke())}))),v||y.fitWidth||Math.abs(u.outerWidth()-p.outerWidth())>2){o=D.length+1;for(var w=0;w<o&&(h=p.children("td:eq("+w+")"),f=u.children("td:eq("+w+")"),m=h.width(),g=f.width(),"undefined"==typeof h.data("delta")&&h.data("delta",h.outerWidth()-m-(f.outerWidth()-g)),g-=h.data("delta"),v||y.fitWidth||m!==g);w++)h.css("width",g+"px")}xe||(we.data("widthTimer")&&cancelAnimationFrame(we.data("widthTimer")),we.data("widthTimer",requestAnimationFrame(function(){we&&(we.css("width",We.width()+"px"),"rtl"===t.direction&&we.css("left",Pe.data("width")-Pe.width()+"px"))}))),i=l.height()}}},Ce=function(){if(p&&_){var t,n="elfinder-cwd-colwidth",i=Ue.find("tr[id]:first");i.hasClass(n)||(t=Ue.find("tr."+n),t.removeClass(n).find("td").css("width",""),i.addClass(n),Ue.find("table:first").css("table-layout","fixed"),e.each(e.merge(["name"],D),function(e,t){var n=_[t]||i.find("td.elfinder-col-"+t).width();i.find("td.elfinder-col-"+t).width(n)}))}},ze=Object.assign({},t.droppable,{over:function(n,i){var a,o,r,s=e(this),l=i.helper,c=n.shiftKey||n.ctrlKey||n.metaKey;return n.stopPropagation(),l.data("dropover",l.data("dropover")+1),s.data("dropover",!0),l.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus"),l.data("namespace")===t.namespace&&t.insideWorkzone(n.pageX,n.pageY)?(s.hasClass(t.res(g,"cwdfile"))?(a=t.cwdId2Hash(s.attr("id")),s.data("dropover",a)):(a=t.cwd().hash,t.cwd().write&&s.data("dropover",a)),r=t.file(l.data("files")[0]).phash===a,s.data("dropover")===a?e.each(l.data("files"),function(e,t){if(t===a||r&&!c&&!l.hasClass("elfinder-drag-helper-plus"))return s.removeClass(T),!1}):s.removeClass(T),l.data("locked")||r?o="elfinder-drag-helper-plus":(o="elfinder-drag-helper-move",c&&(o+=" elfinder-drag-helper-plus")),s.hasClass(T)&&l.addClass(o),void requestAnimationFrame(function(){s.hasClass(T)&&l.addClass(o)})):void s.removeClass(T)},out:function(t,n){var i=n.helper;t.stopPropagation(),i.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus").data("dropover",Math.max(i.data("dropover")-1,0)),e(this).removeData("dropover").removeClass(T)},deactivate:function(){e(this).removeData("dropover").removeClass(T)},drop:function(e,n){ne({notrigger:!0}),t.droppable.drop.call(this,e,n)}}),Te=function(n){n=n?n:p?Ue.find("tbody"):Ue;var i=n.children(".directory:not(."+k+",.elfinder-na,.elfinder-ro)");t.isCommandEnabled("paste")&&i.droppable(ze),t.isCommandEnabled("upload")&&i.addClass("native-droppable"),n.children(".isroot").each(function(n,i){var a=e(i),o=t.cwdId2Hash(i.id);t.isCommandEnabled("paste",o)?a.hasClass(k+",elfinder-na,elfinder-ro")||a.droppable(ze):a.hasClass(k)&&a.droppable("destroy"),t.isCommandEnabled("upload",o)?a.hasClass("native-droppable,elfinder-na,elfinder-ro")||a.addClass("native-droppable"):a.hasClass("native-droppable")&&a.removeClass("native-droppable")})},Ae=function(n,i){var a=function(t,n){e("<img/>").on("load",function(){t.find(".elfinder-cwd-icon").addClass(n.className).css("background-image","url('"+n.url+"')")}).attr("src",n.url)},o=function(e,n){var o,r,s=t.cwdHash2Elm(e);s.length&&("1"!=n?(o=t.file(e),o.tmb!==n&&(o.tmb=n),r=t.tmb(o),i?s.find(".elfinder-cwd-icon").addClass(r.className).css("background-image","url('"+r.url+"')"):a(s,r),delete le.attachTmbs[e]):i?je([e]):le.tmbLoading[e]||le.getTmbs.push(e))};e.isPlainObject(n)&&Object.keys(n).length&&(Object.assign(le.attachTmbs,n),e.each(n,o),i||!le.getTmbs.length||Object.keys(le.tmbLoading).length||je())},je=function(n){var i=[],a=!1;return t.oldAPI?void t.request({data:{cmd:"tmb",current:t.cwd().hash},preventFail:!0}).done(function(e){e.images&&Object.keys(e.images).length&&Ae(e.images),e.tmb&&je()}):(n?(a=!0,i=n.splice(0,O)):i=le.getTmbs.splice(0,O),void(i.length&&(a||fe[i[0]]||fe[i[i.length-1]])&&(e.each(i,function(e,t){le.tmbLoading[t]=!0}),t.request({data:{cmd:"tmb",targets:i},preventFail:!0}).done(function(t){var o,r=[];t.images&&((o=Object.keys(t.images).length)?(o<i.length&&e.each(i,function(e,n){t.images[n]||r.push(n)}),Ae(t.images,a)):r=i,r.length&&e.each(r,function(e,t){delete le.attachTmbs[t]})),a&&n.length&&je(n)}).always(function(){le.tmbLoading={},!a&&le.getTmbs.length&&je()}))))},Oe=function(n,i){var a,o,r,s,l,c,u=p?Ue.find("tbody"):Ue,h=n.length,f={},m=function(e){for(var n,i=Ue.find("[id]:first");i.length;){if(n=t.file(t.cwdId2Hash(i.attr("id"))),!i.hasClass("elfinder-cwd-parent")&&n&&t.compare(e,n)<0)return i;i=i.next("[id]")}},g=function(e){var n,i=se.length;for(n=0;n<i;n++)if(t.compare(e,se[n])<0)return n;return i||-1},v=!!e.htmlPrefilter,b=e(v?document.createDocumentFragment():"<div></div>");if(h>be)De(),Q=t.arrayFlip(e.map(n,function(e){return e.hash}),!0),oe();else{for(h&&Le.removeClass("elfinder-cwd-wrapper-empty"),c="self"===t.option("tmbUrl");h--;)a=n[h],o=a.hash,t.cwdHash2Elm(o).length||((r=m(a))&&!r.length&&(r=null),!r&&(l=g(a))>=0?se.splice(l,0,a):(b.empty().append(X(a)),"directory"===a.mime&&!d&&Te(b),s=v?b:b.children(),r?r.before(s):u.append(s),++le.renderd),t.cwdHash2Elm(o).length&&(a.tmb&&(1!=a.tmb||a.size>0)||c&&0===a.mime.indexOf("image/"))&&(f[o]=a.tmb||"self"));p&&(Ce(),ke({fitWidth:!_})),Ee(u),Object.keys(f).length&&(Object.assign(le.attachTmbs,f),se.length<1&&je())}},Se=function(n){var i,a,o,r,s=n.length,l=t.searchStatus.state>1,c=t.getCommand(t.currentReqCmd)||{};if(!t.cwd().hash&&!c.noChangeDirOnRemovedCwd)return e.each(M.reverse(),function(e,n){if(t.file(n))return r=!0,t.one(t.currentReqCmd+"done",function(){!t.cwd().hash&&t.exec("open",n)}),!1}),void(!r&&!t.cwd().hash&&t.exec("open",t.roots[Object.keys(t.roots)[0]]));for(;s--;){if(i=n[s],(a=t.cwdHash2Elm(i)).length)try{a.remove(),--le.renderd}catch(d){t.debug("error",d)}else(o=ce(i))!==-1&&se.splice(o,1);Q[i]&&delete Q[i],l&&(o=e.inArray(i,E))!==-1&&E.splice(o,1)}l&&t.trigger("cwdhasheschange",E),p&&(Ce(),ke({fitWidth:!_}))},Ie=function(){for(var e="",n="",i=0;i<D.length;i++)e=t.getColumnName(D[i]),n+='<td class="elfinder-cwd-view-th-'+D[i]+' sortable-item">'+e+"</td>";return n},Me=function(e){var t,n;e.height||(t=p?Ue.find("tbody"):Ue,n=t.find(p?"tr:first":"[id]:first"),e.height=n.outerHeight(!0),p||(e.width=n.outerWidth(!0)))},Ee=function(e,n){var i,a=e||(p?Ue.find("tbody"):Ue),o=Ve[t.viewType],r=1;se.length>0&&(le.hpi?p||(r=Math.floor(a.width()/o.width)):(Me(o),p?le.row=le.hpi=o.height:(r=Math.floor(a.width()/o.width),le.row=o.height,le.hpi=le.row/r)),i=Math.ceil((se.length+(n||0))/r),p&&we&&++i,qe.css({top:le.row*i+"px"}).show())},Fe={contextmenu:function(e){return e.preventDefault(),void 0!==Ue.data("longtap")?void e.stopPropagation():void t.trigger("contextmenu",{type:"cwd",targets:[t.cwd().hash],x:e.pageX,y:e.pageY})},touchstart:function(e){e.originalEvent.touches.length>1||(Ue.data("longtap")!==!1&&(Pe.data("touching",{x:e.originalEvent.touches[0].pageX,y:e.originalEvent.touches[0].pageY}),Ue.data("tmlongtap",setTimeout(function(){Ue.data("longtap",!0),t.trigger("contextmenu",{type:"cwd",targets:[t.cwd().hash],x:Pe.data("touching").x,y:Pe.data("touching").y})},500))),Ue.data("longtap",null))},touchend:function(e){"touchmove"===e.type?(!Pe.data("touching")||Math.abs(Pe.data("touching").x-e.originalEvent.touches[0].pageX)+Math.abs(Pe.data("touching").y-e.originalEvent.touches[0].pageY)>4)&&Pe.data("touching",null):setTimeout(function(){Ue.removeData("longtap")},80),clearTimeout(Ue.data("tmlongtap"))},click:function(e){Ue.data("longtap")&&(e.preventDefault(),e.stopPropagation())}},De=function(){t.lazy(function(){var n;Le.append(Re).removeClass("elfinder-cwd-wrapper-empty elfinder-search-result elfinder-incsearch-result elfinder-letsearch-result"),(t.searchStatus.state>1||t.searchStatus.ininc)&&Le.addClass("elfinder-search-result"+(t.searchStatus.ininc?" elfinder-"+("/"===S.substr(0,1)?"let":"inc")+"search-result":"")),le.attachThumbJob&&le.attachThumbJob._abort(),Ue.data("selectable")&&Ue.selectable("disable").selectable("destroy").removeData("selectable"),t.trigger("cwdinit"),J=e();try{Ue.empty()}catch(i){Ue.html("")}we&&(Pe.off("scroll.fixheader resize.fixheader"),we.remove(),we=null),Ue.removeClass("elfinder-cwd-view-icons elfinder-cwd-view-list").addClass("elfinder-cwd-view-"+(p?"list":"icons")).attr("style","").css("height","auto"),qe.hide(),Pe[p?"addClass":"removeClass"]("elfinder-cwd-wrapper-list")._padding=parseInt(Pe.css("padding-top"))+parseInt(Pe.css("padding-bottom")),t.UA.iOS&&Pe.removeClass("overflow-scrolling-touch").addClass("overflow-scrolling-touch"),p&&(Ue.html("<table><thead></thead><tbody></tbody></table>"),n=e('<tr class="ui-state-default"><td class="elfinder-cwd-view-th-name">'+t.getColumnName("name")+"</td>"+Ie()+"</tr>"),Ue.find("thead").hide().append(n).find("td:first").append(Re),e.fn.sortable&&n.addClass("touch-punch touch-punch-keep-default").sortable({axis:"x",distance:8,items:"> .sortable-item",start:function(t,n){e(n.item[0]).data("dragging",!0),n.placeholder.width(n.helper.removeClass("ui-state-hover").width()).removeClass("ui-state-active").addClass("ui-state-hover").css("visibility","visible")},update:function(n,i){var a,o,r=e(i.item[0]).attr("class").split(" ")[0].replace("elfinder-cwd-view-th-","");D=e.map(e(this).children(),function(t){var n=e(t).attr("class").split(" ")[0].replace("elfinder-cwd-view-th-","");return o||(r===n?o=!0:a=n),"name"===n?null:n}),N.row=q(),t.storage("cwdCols",D),a=".elfinder-col-"+a+":first",r=".elfinder-col-"+r+":first",t.lazy(function(){Ue.find("tbody tr").each(function(){var t=e(this);t.children(a).after(t.children(r))})})},stop:function(t,n){setTimeout(function(){e(n.item[0]).removeData("dragging")},100)}}),n.find("td").addClass("touch-punch").resizable({handles:"ltr"===t.direction?"e":"w",start:function(t,n){var i=Ue.find("td.elfinder-col-"+n.element.attr("class").split(" ")[0].replace("elfinder-cwd-view-th-","")+":first");n.element.data("dragging",!0).data("resizeTarget",i).data("targetWidth",i.width()),H=!0,"fixed"!==Ue.find("table").css("table-layout")&&(Ue.find("tbody tr:first td").each(function(){e(this).width(e(this).width())}),Ue.find("table").css("table-layout","fixed"))},resize:function(e,t){t.element.data("resizeTarget").width(t.element.data("targetWidth")-(t.originalSize.width-t.size.width))},stop:function(n,i){H=!1,ke({fitWidth:!0}),_={},Ue.find("tbody tr:first td").each(function(){var t=e(this).attr("class").split(" ")[0].replace("elfinder-col-","");_[t]=e(this).width()}),t.storage("cwdColWidth",_),setTimeout(function(){i.element.removeData("dragging")},100)}}).find(".ui-resizable-handle").addClass("ui-icon ui-icon-grip-dotted-vertical")),se=e.map(F||E,function(e){return t.file(e)||null}),se=t.sortFiles(se),F?F=e.map(se,function(e){return e.hash}):E=e.map(se,function(e){return e.hash}),le={renderd:0,attachTmbs:{},getTmbs:[],tmbLoading:{},lazyOpts:{tm:0}},Le[se.length<1?"addClass":"removeClass"]("elfinder-cwd-wrapper-empty"),Pe.off(pe,ye).on(pe,ye).trigger(pe),t.cwd().write?(Pe[t.isCommandEnabled("upload")?"addClass":"removeClass"]("native-droppable"),Pe.droppable(t.isCommandEnabled("paste")?"enable":"disable")):Pe.removeClass("native-droppable").droppable("disable").removeClass("ui-state-disabled")})},Ue=e(this).addClass("ui-helper-clearfix elfinder-cwd").attr("unselectable","on").on("click."+t.namespace,b,function(n){var i,a,o,r,s,l=this.id?e(this):e(this).parents("[id]:first"),c=e(n.target);if(R&&(c.is("input:checkbox."+j)||c.hasClass("elfinder-cwd-select")))return n.stopPropagation(),n.preventDefault(),l.trigger(l.hasClass(y)?h:u),oe(),void requestAnimationFrame(function(){c.prop("checked",l.hasClass(y))});if(Ue.data("longtap")||c.hasClass("elfinder-cwd-nonselect"))return void n.stopPropagation();if(U||(U=l.attr("id"),setTimeout(function(){U=""},500)),n.shiftKey&&(i=l.prevAll(ae||"."+y+":first"),a=l.nextAll(ae||"."+y+":first"),o=i.length,r=a.length),n.shiftKey&&(o||r))s=o?l.prevUntil("#"+i.attr("id")):l.nextUntil("#"+a.attr("id")),s=s.add(l),o||(s=e(s.get().reverse())),s.trigger(u);else if(n.ctrlKey||n.metaKey)l.trigger(l.hasClass(y)?h:u);else{if(Pe.data("touching")&&l.hasClass(y))return Pe.data("touching",null),void t.dblclick({file:t.cwdId2Hash(this.id)});ne({notrigger:!0}),l.trigger(u)}oe()}).on("dblclick."+t.namespace,b,function(n){if(U){var i=t.cwdId2Hash(U);n.stopPropagation(),this.id!==U&&(e(this).trigger(h),e("#"+U).trigger(u),oe()),t.dblclick({file:i})}}).on("touchstart."+t.namespace,b,function(n){if(!(n.originalEvent.touches.length>1)){var i,a=this.id?e(this):e(this).parents("[id]:first"),o=e(n.target),r=n.target.nodeName;if("INPUT"===r&&"text"===n.target.type||"TEXTAREA"===r||o.hasClass("elfinder-cwd-nonselect"))return void n.stopPropagation();if(a.find("input:text,textarea").length)return n.stopPropagation(),void n.preventDefault();Pe.data("touching",{x:n.originalEvent.touches[0].pageX,y:n.originalEvent.touches[0].pageY}),R&&(o.is("input:checkbox."+j)||o.hasClass("elfinder-cwd-select"))||(i=a.prevAll("."+y+":first").length+a.nextAll("."+y+":first").length,Ue.data("longtap",null),(Object.keys(Q).length||p&&"TD"!==n.target.nodeName||!p&&this!==n.target)&&(Ue.data("longtap",!1),a.addClass(C),a.data("tmlongtap",setTimeout(function(){Ue.data("longtap",!0),a.trigger(u),oe(),t.trigger("contextmenu",{type:"files",targets:t.selected(),x:n.originalEvent.touches[0].pageX,y:n.originalEvent.touches[0].pageY})},500))))}}).on("touchmove."+t.namespace+" touchend."+t.namespace,b,function(n){var i,a=e(n.target);if(!R||!a.is("input:checkbox."+j)&&!a.hasClass("elfinder-cwd-select")){if("INPUT"==n.target.nodeName||"TEXTAREA"==n.target.nodeName)return void n.stopPropagation();i=this.id?e(this):e(this).parents("[id]:first"),clearTimeout(i.data("tmlongtap")),"touchmove"===n.type?(Pe.data("touching",null),i.removeClass(C)):(Pe.data("touching")&&!Ue.data("longtap")&&i.hasClass(y)&&(n.preventDefault(),Pe.data("touching",null),t.dblclick({file:t.cwdId2Hash(this.id)})),setTimeout(function(){Ue.removeData("longtap")},80))}}).on("mouseenter."+t.namespace,b,function(i){if(!ue){var a=e(this),o=null;if(!(d||a.data("dragRegisted")||a.hasClass(A)||a.hasClass(x)||a.hasClass(w))){if(a.data("dragRegisted",!0),!t.isCommandEnabled("copy",t.searchStatus.state>1||a.hasClass("isroot")?t.cwdId2Hash(a.attr("id")):void 0))return;a.on("mousedown",function(i){var o=n.metakeyDragout&&!t.UA.IE&&(i.shiftKey||i.altKey),r=!1;o&&Ue.data("selectable")&&(Ue.selectable("disable").selectable("destroy").removeData("selectable"),requestAnimationFrame(function(){Ue.selectable(he).selectable("option",{disabled:!1}).selectable("refresh").data("selectable",!0)})),a.removeClass("ui-state-disabled"),o?a.draggable("option","disabled",!0).attr("draggable","true"):(a.hasClass(y)||(r=p?e(i.target).closest("span,tr").is("tr"):e(i.target).hasClass("elfinder-cwd-file")),r?a.draggable("option","disabled",!0).removeClass("ui-state-disabled"):a.draggable("option","disabled",!1).removeAttr("draggable").draggable("option","cursorAt",{left:50-parseInt(e(i.currentTarget).css("margin-left")),top:47}))}).on("dragstart",function(n){var i=n.dataTransfer||n.originalEvent.dataTransfer||null;if(o=null,i&&!t.UA.IE){var a,r=this.id?e(this):e(this).parents("[id]:first"),s=e("<span>"),l="",c=null,d=null,p=[],h=function(n){var i,a=n.mime,o=t.tmb(n);return i='<div class="elfinder-cwd-icon elfinder-cwd-icon-drag '+t.mime2class(a)+' ui-corner-all"></div>',o&&(i=e(i).addClass(o.className).css("background-image","url('"+o.url+"')").get(0).outerHTML),i},f=[];if(r.trigger(u),oe(),e.each(Q,function(n){var i=t.file(n),a=i.url;if(i&&"directory"!==i.mime){if(a){if("1"==a)return f.push(n),!0}else a=t.url(i.hash);a&&(a=t.convAbsUrl(a),p.push(n),e("<a>").attr("href",a).text(a).appendTo(s),l+=a+"\n",c||(c=i.mime+":"+i.name+":"+a),d||(d=a+"\n"+i.name))}}),f.length)return e.each(f,function(e,n){var i=t.file(n);i.url="",t.request({data:{cmd:"url",target:n},notify:{type:"url",cnt:1},preventDefault:!0}).always(function(e){i.url=e.url?e.url:"1"})}),!1;if(!l)return!1;i.setDragImage&&(o=e('<div class="elfinder-drag-helper html5-native"></div>').append(h(t.file(p[0]))).appendTo(e(document.body)),(a=p.length)>1&&o.append(h(t.file(p[a-1]))+'<span class="elfinder-drag-num">'+a+"</span>"),i.setDragImage(o.get(0),50,47)),i.effectAllowed="copyLink",i.setData("DownloadURL",c),i.setData("text/x-moz-url",d),i.setData("text/uri-list",l),i.setData("text/plain",l),i.setData("text/html",s.html()),i.setData("elfinderfrom",window.location.href+t.cwd().hash),i.setData("elfinderfrom:"+i.getData("elfinderfrom"),"")}}).on("dragend",function(e){ne({notrigger:!0}),o&&o.remove()}).draggable(t.draggable)}}}).on(u,b,function(n){var i=e(this),a=t.cwdId2Hash(i.attr("id"));G||i.hasClass(w)||(ae="#"+this.id,i.addClass(y).children().addClass(C).find("input:checkbox."+j).prop("checked",!0),Q[a]||(Q[a]=!0),J=Ue.find("[id]."+y+":last").next())}).on(h,b,function(n){var i=e(this),a=t.cwdId2Hash(i.attr("id"));G||(i.removeClass(y).children().removeClass(C).find("input:checkbox."+j).prop("checked",!1),Ue.hasClass("elfinder-cwd-allselected")&&(R&&Re.children("input").prop("checked",!1),Ue.removeClass("elfinder-cwd-allselected")),Q[a]&&delete Q[a])}).on(f,b,function(){var t=e(this).removeClass(C+" "+y).addClass(w),n=t.children(),i=p?t:n.find("div.elfinder-cwd-file-wrapper,div.elfinder-cwd-filename");n.removeClass(C+" "+y),t.hasClass(k)&&t.droppable("disable"),i.hasClass(x)&&i.draggable("disable")}).on(m,b,function(){var t=e(this).removeClass(w),n=p?t:t.children("div.elfinder-cwd-file-wrapper,div.elfinder-cwd-filename");t.hasClass(k)&&t.droppable("enable"),n.hasClass(x)&&n.draggable("enable")}).on("scrolltoview",b,function(t,n){re(e(this),!n||"undefined"==typeof n.blink||n.blink)}).on("mouseenter."+t.namespace+" mouseleave."+t.namespace,b,function(n){var i="mouseenter"===n.type;i&&(ue||t.UA.Mobile)||(t.trigger("hover",{hash:t.cwdId2Hash(e(this).attr("id")),type:n.type}),e(this).toggleClass(C,"mouseenter"==n.type))}).on("mouseenter."+t.namespace+" mouseleave."+t.namespace,".elfinder-cwd-file-wrapper,.elfinder-cwd-filename",function(t){var n="mouseenter"===t.type;n&&ue||e(this).closest(b).children(".elfinder-cwd-file-wrapper,.elfinder-cwd-filename").toggleClass(z,"mouseenter"==t.type)}).on("contextmenu."+t.namespace,function(n){var i=e(n.target).closest(b);if(i.get(0)!==n.target||Q[t.cwdId2Hash(i.get(0).id)])return i.find("input:text,textarea").length?void n.stopPropagation():void(i.length&&("TD"!=n.target.nodeName||Q[t.cwdId2Hash(i.get(0).id)])&&(n.stopPropagation(),n.preventDefault(),i.hasClass(w)||Pe.data("touching")||(i.hasClass(y)||(ne({notrigger:!0}),i.trigger(u),oe()),t.trigger("contextmenu",{type:"files",targets:t.selected(),x:n.pageX,y:n.pageY}))))}).on("click."+t.namespace,function(e){e.target!==this||Ue.data("longtap")||!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&ne()}).on("create."+t.namespace,function(n,i){var a=p?Ue.find("tbody"):Ue,o=a.find(".elfinder-cwd-parent"),r=i.move||!1,s=e(X(i)).addClass(A),l=t.selected();l.length?r&&t.trigger("lockfiles",{files:l}):ne(),o.length?o.after(s):a.prepend(s),Ce(),Pe.scrollTop(0).scrollLeft(0)}).on("unselectall",ne).on("selectfile",function(e,n){t.cwdHash2Elm(n).trigger(u),oe()}).on("colwidth",function(){p&&(Ue.find("table").css("table-layout","").find("td").css("width",""),ke({fitWidth:!0}),t.storage("cwdColWidth",_=null))}).on("iconpref",function(e,t){Ue.removeClass(function(e,t){return(t.match(/\belfinder-cwd-size\S+/g)||[]).join(" ")}),s=t?parseInt(t.size)||0:0,p||(s>0&&Ue.addClass("elfinder-cwd-size"+s),le.renderd&&requestAnimationFrame(function(){Ve.icons={},le.hpi=null,Ee(Ue,le.renderd),me()}))}).on("onwheel"in document?"wheel":"mousewheel",function(e){var i,a,o;!p&&(e.ctrlKey&&!e.metaKey||!e.ctrlKey&&e.metaKey)&&(e.stopPropagation(),e.preventDefault(),i=Ue.data("wheelTm"),"undefined"!=typeof i?(clearTimeout(i),Ue.data("wheelTm",setTimeout(function(){Ue.removeData("wheelTm")},200))):(Ue.data("wheelTm",!1),a=s||0,o=e.originalEvent.deltaY?e.originalEvent.deltaY:-e.originalEvent.wheelDelta,o>0?s>0&&(a=s-1):s<n.iconsView.sizeMax&&(a=s+1),a!==s&&(t.storage("iconsize",a),Ue.trigger("iconpref",{size:a}))))}),Pe=e('<div class="elfinder-cwd-wrapper"></div>').droppable(Object.assign({},ze,{autoDisable:!1})).on("contextmenu."+t.namespace,Fe.contextmenu).on("touchstart."+t.namespace,Fe.touchstart).on("touchmove."+t.namespace+" touchend."+t.namespace,Fe.touchend).on("click."+t.namespace,Fe.click).on("scroll."+t.namespace,function(){ue||(Ue.data("selectable")&&Ue.selectable("disable"),Pe.trigger(de)),ue=!0,le.scrtm&&cancelAnimationFrame(le.scrtm),le.scrtm&&Math.abs((le.scrolltop||0)-(le.scrolltop=this.scrollTop||e(this).scrollTop()))<5&&(le.scrtm=0,Pe.trigger(pe)),le.scrtm=requestAnimationFrame(function(){le.scrtm=0,Pe.trigger(pe)})}).on(pe,function(){ue=!1,me()}),qe=e("<div>&nbsp;</div>").css({position:"absolute",width:"1px",height:"1px"}).hide(),Re=R?e('<div class="elfinder-cwd-selectall"><input type="checkbox"/></div>').attr("title",t.i18n("selectall")).on("click",function(t){return t.stopPropagation(),t.preventDefault(),!e(this).data("pending")&&(Re.data("pending",!0),void(Ue.hasClass("elfinder-cwd-allselected")?(Re.find("input").prop("checked",!1),requestAnimationFrame(function(){ne()})):te()))}):e(),He=null,_e=function(t){var n=function(){if("undefined"!=typeof le.renderd){var t=0;Pe.siblings("div.elfinder-panel:visible").each(function(){t+=e(this).outerHeight(!0)}),Pe.height(Le.height()-t-Pe._padding)}};t&&n(),He&&cancelAnimationFrame(He),He=requestAnimationFrame(function(){!t&&n();var e,i;Ue.css("height","auto"),e=Pe[0].clientHeight-parseInt(Pe.css("padding-top"))-parseInt(Pe.css("padding-bottom"))-parseInt(Ue.css("margin-top")),i=Ue.outerHeight(!0),i<e&&Ue.height(e)}),p&&!H&&(t?Pe.trigger("resize.fixheader"):ke()),me()},Ne=e(this).parent().on("resize",_e),Le=Ne.children(".elfinder-workzone").append(Pe.append(this).append(qe)),We=e('<div class="elfinder-cwd-message-board"></div>').insertAfter(Ue),Be=e('<div class="elfinder-cwd-expires" ></div>'),$e=function(){var e,n,i;o&&clearTimeout(o),l&&t.volumeExpires[l]&&(n=t.volumeExpires[l]-+new Date/1e3,i=n%60+.1,e=Math.floor(n/60),Be.html(t.i18n(["minsLeft",e])).show(),e&&(o=setTimeout($e,1e3*i)))},Ve={icons:{},list:{}};t.UA.ltIE10||We.append(e('<div class="elfinder-cwd-trash" ></div>').html(t.i18n("volume_Trash"))).append(Be),$=Object.assign($,n.replacement||{});try{_=t.storage("cwdColWidth")?t.storage("cwdColWidth"):null}catch(Ke){_=null}t.bind("columnpref",function(i){var a=i.data||{};(D=t.storage("cwdCols"))?(D=e.grep(D,function(e){return n.listView.columns.indexOf(e)!==-1}),n.listView.columns.length>D.length&&e.each(n.listView.columns,function(e,t){D.indexOf(t)===-1&&D.push(t)})):D=n.listView.columns;var o=t.storage("columnhides")||null;o&&Object.keys(o).length&&(D=e.grep(D,function(e){return!o[e]})),N.row=q(),p&&a.repaint&&De()}).trigger("columnpref"),d&&e("body").on("touchstart touchmove touchend",function(e){}),R&&Ue.addClass("elfinder-has-checkbox"),e(window).on("scroll."+t.namespace,function(){c&&cancelAnimationFrame(c),c=requestAnimationFrame(function(){Pe.trigger(pe)})}),e(document).on("keydown."+t.namespace,function(n){n.keyCode==e.ui.keyCode.ESCAPE&&(t.getUI().find(".ui-widget:visible").length||ne())}),t.one("init",function(){var i,a,o,s,l=document.createElement("style"),c=0;document.head&&(document.head.appendChild(l),i=l.sheet,i.insertRule('.elfinder-cwd-wrapper-empty .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptyFolder")+'" }',c++),i.insertRule('.elfinder-cwd-wrapper-empty .native-droppable .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptyFolder"+(d?"LTap":"Drop"))+'" }',c++),
i.insertRule('.elfinder-cwd-wrapper-empty .ui-droppable-disabled .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptyFolder")+'" }',c++),i.insertRule('.elfinder-cwd-wrapper-empty.elfinder-search-result .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptySearch")+'" }',c++),i.insertRule('.elfinder-cwd-wrapper-empty.elfinder-search-result.elfinder-incsearch-result .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptyIncSearch")+'" }',c++),i.insertRule('.elfinder-cwd-wrapper-empty.elfinder-search-result.elfinder-letsearch-result .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptyLetSearch")+'" }',c++)),(s=t.storage("iconsize")||n.iconsView.size||0)&&(s=Math.min(s,n.iconsView.sizeMax),Ue.trigger("iconpref",{size:s})),d||(t.one("open",function(){i&&t.zIndex&&i.insertRule(".ui-selectable-helper{z-index:"+t.zIndex+";}",c++)}),o=e('<div style="position:absolute"></div>'),a=t.getUI(),a.on("resize",function(e,t){var n;e.preventDefault(),e.stopPropagation(),t&&t.fullscreen&&(n=a.offset(),"on"===t.fullscreen?(o.css({top:n.top*-1,left:n.left*-1}).appendTo(a),he.appendTo=o):(o.detach(),he.appendTo="body"),Ue.data("selectable")&&Ue.selectable("option",{appendTo:he.appendTo}))})),r=t.getUI("tree").length}).bind("enable",function(){_e()}).bind("request.open",function(){le.getTmbs=[]}).one("open",function(){t.maxTargets&&(O=Math.min(t.maxTargets,O))}).bind("open add remove searchend",function(){var n=t.cwd().hash,i=this.type;if(("open"===i||"searchend"===i||t.searchStatus.state<2)&&(E=e.map(t.files(n),function(e){return e.hash}),t.trigger("cwdhasheschange",E)),"open"===i){var a=function(){var n=!1;return e.each(M,function(e,i){if(t.trashes[i])return n=!0,!1}),n},o=n&&(!t.file(n)||r)?r?function(){var n=e.Deferred();return t.one("treesync",function(e){e.data.always(function(){n.resolve()})}),n}():t.request({data:{cmd:"parents",target:t.cwd().hash},preventFail:!0}):null,s=t.cwd();s.volumeid!==l&&(Be.empty().hide(),l&&Pe.removeClass("elfinder-cwd-wrapper-"+l),l=s.volumeid,$e(),Pe.addClass("elfinder-cwd-wrapper-"+l)),e.when(o).done(function(){M=t.parents(s.hash),Pe[a()?"addClass":"removeClass"]("elfinder-cwd-wrapper-trash")}),F=void 0,ne({notrigger:!0}),De()}}).bind("search",function(n){E=e.map(n.data.files,function(e){return e.hash}),t.trigger("cwdhasheschange",E),F=void 0,t.searchStatus.ininc=!1,De(),t.autoSync("stop")}).bind("searchend",function(e){(S||F)&&(S="",F?t.trigger("incsearchend",e.data):e.data&&e.data.noupdate||De()),t.autoSync()}).bind("searchstart",function(e){ne(),S=e.data.query}).bind("incsearchstart",function(n){var i=n.data.query||"",a=n.data.type||"SearchName",o=t.options.commandsOptions.search.searchTypes||{};(o[a]&&o[a].incsearch||"SearchName"===a)&&(Q={},t.lazy(function(){var n,r,s="";if(S=i,i){if("/"===i.substr(0,1)&&(i=i.substr(1),s="^"),n=new RegExp(s+i.replace(/([\\*\;\.\?\[\]\{\}\(\)\^\$\-\|])/g,"\\$1"),"i"),"SearchName"===a)F=e.grep(E,function(e){var i=t.file(e);return!(!i||!(i.name.match(n)||i.i18&&i.i18.match(n)))});else if(r=o[a].incsearch,"string"==typeof r)F=e.grep(E,function(e){var i=t.file(e);return!!(i&&i[r]&&(i[r]+"").match(n))});else if("function"==typeof r)try{F=e.grep(r({val:i,regex:n},E,t),function(e){return!!t.file(e)})}catch(l){F=[]}t.trigger("incsearch",{hashes:F,query:i}).searchStatus.ininc=!0,De(),t.autoSync("stop")}else t.trigger("incsearchend")}))}).bind("incsearchend",function(e){S="",t.searchStatus.ininc=!1,F=void 0,e.data&&e.data.noupdate||De(),t.autoSync()}).bind("sortchange",function(){var e=Pe.scrollLeft(),n=Ue.hasClass("elfinder-cwd-allselected");De(),t.one("cwdrender",function(){Pe.scrollLeft(e),n&&(Q=t.arrayFlip(F||E,!0)),(n||Object.keys(Q).length)&&oe()})}).bind("viewchange",function(){var e="list"!=t.viewType,n=Ue.hasClass("elfinder-cwd-allselected");e!=p&&(p=e,t.viewType=p?"list":"icons",s&&t.one("cwdinit",function(){Ue.trigger("iconpref",{size:s})}),De(),_e(),n&&(Ue.addClass("elfinder-cwd-allselected"),Re.find("input").prop("checked",!0)),Object.keys(Q).length&&oe())}).bind("wzresize",function(){var e,n=p?Ue.find("tbody"):Ue;_e(!0),le.hpi&&Ee(n,n.find("[id]").length),e=Ue.offset(),Le.data("rectangle",Object.assign({width:Le.width(),height:Le.height(),cwdEdge:"ltr"===t.direction?e.left:e.left+Ue.width()},Le.offset())),le.itemH=(p?n.find("tr:first"):n.find("[id]:first")).outerHeight(!0)}).bind("changeclipboard",function(t){I={},t.data&&t.data.clipboard&&t.data.clipboard.length&&e.each(t.data.clipboard,function(e,t){t.cut&&(I[t.hash]=!0)})}).bind("resMixinMake",function(){Ce()}).bind("tmbreload",function(t){var n={},i=t.data&&t.data.files?t.data.files:null;e.each(i,function(e,t){t.tmb&&"1"!=t.tmb&&(n[t.hash]=t.tmb)}),Object.keys(n).length&&Ae(n,!0)}).add(function(n){var i=S?new RegExp(S.replace(/([\\*\;\.\?\[\]\{\}\(\)\^\$\-\|])/g,"\\$1"),"i"):null,a=t.searchStatus.mime,o=t.searchStatus.state>1,r=o&&t.searchStatus.target?t.searchStatus.target:t.cwd().hash,s=t.path(r),l=function(n){var l,c;return l=n.phash===r,!l&&o&&(c=n.path||t.path(n.hash),l=s&&0===c.indexOf(s),!l&&t.searchStatus.mixed&&(l=!!e.grep(t.searchStatus.mixed,function(e){return 0===n.hash.indexOf(e)}).length)),l&&o&&(l=a?0===n.mime.indexOf(a):!!(n.name.match(i)||n.i18&&n.i18.match(i))),l},c=e.grep(n.data.added||[],function(e){return!!l(e)});Oe(c),2===t.searchStatus.state&&(e.each(c,function(t,n){e.inArray(n.hash,E)===-1&&E.push(n.hash)}),t.trigger("cwdhasheschange",E)),p&&_e(),Pe.trigger(pe)}).change(function(n){var i,a=t.cwd().hash,o=t.selected();S?e.each(n.data.changed||[],function(n,a){t.cwdHash2Elm(a.hash).length&&(Se([a.hash]),Oe([a],"change"),e.inArray(a.hash,o)!==-1&&Z(a.hash),i=!0)}):e.each(e.grep(n.data.changed||[],function(e){return e.phash==a}),function(n,a){t.cwdHash2Elm(a.hash).length&&(Se([a.hash]),Oe([a],"change"),e.inArray(a.hash,o)!==-1&&Z(a.hash),i=!0)}),i&&(t.trigger("cwdhasheschange",E),p&&_e(),Pe.trigger(pe)),oe()}).remove(function(e){var t=p?Ue.find("tbody"):Ue;Se(e.data.removed||[]),oe(),se.length<1&&t.children(b+(n.oldSchool?":not(.elfinder-cwd-parent)":"")).length<1?(Le.addClass("elfinder-cwd-wrapper-empty"),R&&Re.find("input").prop("checked",!1),qe.hide(),Pe.off(pe,ye),_e()):(Ee(t),Pe.trigger(pe))}).dragstart(function(t){var n=e(t.data.target),i=t.data.originalEvent;n.hasClass(v)&&(n.hasClass(y)||(!(i.ctrlKey||i.metaKey||i.shiftKey)&&ne({notrigger:!0}),n.trigger(u),oe())),Ue.removeClass(w).data("selectable")&&Ue.selectable("disable"),G=!0}).dragstop(function(){Ue.data("selectable")&&Ue.selectable("enable"),G=!1}).bind("lockfiles unlockfiles selectfiles unselectfiles",function(n){var i,a,o,r={lockfiles:f,unlockfiles:m,selectfiles:u,unselectfiles:h},s=r[n.type],l=n.data.files||[],c=l.length,d=n.data.helper||e();if(c>0&&(i=t.parents(l[0])),s!==u&&s!==h||(o=s===u,e.each(l,function(e,t){var n=Ue.hasClass("elfinder-cwd-allselected");Q[t]?(n&&(R&&Re.children("input").prop("checked",!1),Ue.removeClass("elfinder-cwd-allselected"),n=!1),!o&&delete Q[t]):o&&(Q[t]=!0)})),!d.data("locked")){for(;c--;)try{t.cwdHash2Elm(l[c]).trigger(s)}catch(n){}!n.data.inselect&&oe()}Pe.data("dropover")&&i.indexOf(Pe.data("dropover"))!==-1&&(a="lockfiles"!==n.type,d.toggleClass("elfinder-drag-helper-plus",a),Pe.toggleClass(T,a))}).bind("mkdir mkfile duplicate upload rename archive extract paste multiupload",function(n){if("upload"!=n.type||!n.data._multiupload){var i=t.cwd().hash;ne({notrigger:!0}),e.each((n.data.added||[]).concat(n.data.changed||[]),function(e,t){t&&t.phash==i&&Z(t.hash)}),oe()}}).shortcut({pattern:"ctrl+a",description:"selectall",callback:te}).shortcut({pattern:"ctrl+shift+i",description:"selectinvert",callback:ie}).shortcut({pattern:"left right up down shift+left shift+right shift+up shift+down",description:"selectfiles",type:"keydown",callback:function(e){Y(e.keyCode,e.shiftKey)}}).shortcut({pattern:"home",description:"selectffile",callback:function(e){ne({notrigger:!0}),re(Ue.find("[id]:first").trigger(u)),oe()}}).shortcut({pattern:"end",description:"selectlfile",callback:function(e){ne({notrigger:!0}),re(Ue.find("[id]:last").trigger(u)),oe()}}).shortcut({pattern:"page_up",description:"pageTurning",callback:function(e){le.itemH&&Pe.scrollTop(Math.round(Pe.scrollTop()-Math.floor((Pe.height()+(p?le.itemH*-1:16))/le.itemH)*le.itemH))}}).shortcut({pattern:"page_down",description:"pageTurning",callback:function(e){le.itemH&&Pe.scrollTop(Math.round(Pe.scrollTop()+Math.floor((Pe.height()+(p?le.itemH*-1:16))/le.itemH)*le.itemH))}})}),this},e.fn.elfinderdialog=function(t,n){var i,a,o,r,s=window.navigator.platform.indexOf("Win")!=-1,l={},c={enabled:!1,width:!1,height:!1,defaultSize:null},d=function(t){var i,a;c.enabled&&(a=n.options.dialogContained?o:e(window),i={maxWidth:c.width?a.width()-l.width:null,maxHeight:c.height?a.height()-l.height:null},Object.assign(r,i),t.css(i).trigger("resize"),t.data("hasResizable")&&(t.resizable("option","maxWidth")<i.maxWidth||t.resizable("option","maxHeight")<i.maxHeight)&&t.resizable("option",i))},p=function(e){var t=e.data;i&&cancelAnimationFrame(i),i=requestAnimationFrame(function(){c.enabled&&d(t)})},u=function(){var e="elfinder-dialog",t=o.children("."+e+"."+n.res("class","editing")+":visible");n[t.length?"disable":"enable"]()},h={};return n&&n.ui?o=n.getUI():(o=this.closest(".elfinder"),n||(n=o.elfinder("instance"))),"string"==typeof t?((a=this.closest(".ui-dialog")).length&&("open"===t?"none"===a.css("display")&&(a.trigger("posinit").show().trigger("open").hide(),a.fadeIn(120,function(){n.trigger("dialogopened",{dialog:a})})):"close"===t||"destroy"===t?(a.stop(!0),(a.is(":visible")||o.is(":hidden"))&&(a.trigger("close"),n.trigger("dialogclosed",{dialog:a})),"destroy"===t?(a.remove(),n.trigger("dialogremoved",{dialog:a})):a.data("minimized")&&a.data("minimized").close()):"toTop"===t?(a.trigger("totop"),n.trigger("dialogtotoped",{dialog:a})):"posInit"===t?(a.trigger("posinit"),n.trigger("dialogposinited",{dialog:a})):"tabstopsInit"===t?(a.trigger("tabstopsInit"),n.trigger("dialogtabstopsinited",{dialog:a})):"checkEditing"===t&&u()),this):(t=Object.assign({},e.fn.elfinderdialog.defaults,t),t.allowMinimize&&"auto"===t.allowMinimize&&(t.allowMinimize=!!this.find("textarea,input").length),t.openMaximized=t.allowMinimize&&t.openMaximized,t.headerBtnPos&&"auto"===t.headerBtnPos&&(t.headerBtnPos=s?"right":"left"),t.headerBtnOrder&&"auto"===t.headerBtnOrder&&(t.headerBtnOrder=s?"close:maximize:minimize":"close:minimize:maximize"),t.modal&&t.allowMinimize&&(t.allowMinimize=!1),n.options.dialogContained?c.width=c.height=c.enabled=!0:(c.width="window"===t.maxWidth,c.height="window"===t.maxHeight,(c.width||c.height)&&(c.enabled=!0)),h=n.arrayFlip(t.propagationEvents,!0),this.filter(":not(.ui-dialog-content)").each(function(){var i,a,f=e(this).addClass("ui-dialog-content ui-widget-content"),m="elfinder-dialog-active",g="elfinder-dialog",v="elfinder-dialog-notify",b="ui-state-hover",y="elfinder-tabstop",w="elfinder-focus",x="elfinder-dialog-modal",k=parseInt(1e6*Math.random()),C=e('<div class="ui-dialog-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"><span class="elfinder-dialog-title">'+t.title+"</span></div>"),z=e('<div class="ui-dialog-buttonset"></div>'),T=e('<div class=" ui-helper-clearfix ui-dialog-buttonpane ui-widget-content"></div>').append(z),A=0,j=0,O=e(),S=e('<div style="width:100%;height:100%;position:absolute;top:0px;left:0px;"></div>').hide(),I=function(){t.optimizeNumber&&P.find("input[type=number]").each(function(){e(this).attr("inputmode","numeric"),e(this).attr("pattern","[0-9]*")})},M=function(){O=P.find("."+y),O.length&&(O.attr("tabindex","-1"),O.filter("."+w).length||z.children("."+y+":"+(s?"first":"last")).addClass(w))},E=function(t){var n=O.filter(":visible:enabled"),i=t?null:n.filter("."+w+":first");return i&&i.length||(i=n.first()),t&&e.each(n,function(e,a){if(a===t&&n[e+1])return i=n.eq(e+1),!1}),i},F=function(t){var n=O.filter(":visible:enabled"),i=n.last();return e.each(n,function(e,a){if(a===t&&n[e-1])return i=n.eq(e-1),!1}),i},D=function(){e.each(t.headerBtnOrder.split(":").reverse(),function(e,t){U[t]&&U[t]()}),s&&C.children(".elfinder-titlebar-button").addClass("elfinder-titlebar-button-right")},U={close:function(){C.prepend(e('<span class="ui-widget-header ui-dialog-titlebar-close ui-corner-all elfinder-titlebar-button"><span class="ui-icon ui-icon-closethick"></span></span>').on("mousedown touchstart",function(e){e.preventDefault(),e.stopPropagation(),f.elfinderdialog("close")}))},maximize:function(){t.allowMaximize&&(P.on("resize",function(e,t){var n,i;if(e.preventDefault(),e.stopPropagation(),t&&t.maximize){if(i=C.find(".elfinder-titlebar-full"),n="on"===t.maximize,i.children("span.ui-icon").toggleClass("ui-icon-plusthick",!n).toggleClass("ui-icon-arrowreturnthick-1-s",n),n){try{P.hasClass("ui-draggable")&&P.draggable("disable"),P.hasClass("ui-resizable")&&P.resizable("disable")}catch(e){}f.css("width","100%").css("height",P.height()-P.children(".ui-dialog-titlebar").outerHeight(!0)-T.outerHeight(!0))}else{f.attr("style",i.data("style")),i.removeData("style"),q();try{P.hasClass("ui-draggable")&&P.draggable("enable"),P.hasClass("ui-resizable")&&P.resizable("enable")}catch(e){}}P.trigger("resize",{init:!0})}}),C.prepend(e('<span class="ui-widget-header ui-corner-all elfinder-titlebar-button elfinder-titlebar-full"><span class="ui-icon ui-icon-plusthick"></span></span>').on("mousedown touchstart",function(i){var a=e(this);i.preventDefault(),i.stopPropagation(),P.hasClass("elfinder-maximized")||"undefined"!=typeof a.data("style")||(f.height(f.height()),a.data("style",f.attr("style")||"")),n.toggleMaximize(P),"function"==typeof t.maximize&&t.maximize.call(f[0])})))},minimize:function(){var i,a,o;t.allowMinimize&&(i=e('<span class="ui-widget-header ui-corner-all elfinder-titlebar-button elfinder-titlebar-minimize"><span class="ui-icon ui-icon-minusthick"></span></span>').on("mousedown touchstart",function(i){var r=e(this),s=n.getUI("bottomtray"),l={width:70,height:24},c=e("<div></div>").css(l).addClass(P.get(0).className+" elfinder-dialog-minimized"),d=function(){a.remove(),P.removeData("minimized").show(),f.elfinderdialog("close")},p={};i.preventDefault(),i.stopPropagation(),P.data("minimized")?(P.removeData("minimized").before(a.css(Object.assign({position:"absolute"},a.offset()))),n.toFront(a),a.animate(Object.assign({width:P.width(),height:P.height()},o),function(){P.show(),n.toFront(P),a.remove(),q(),u(),P.trigger("resize",{init:!0}),"function"==typeof t.minimize&&t.minimize.call(f[0])})):(o=P.data("minimized",{dialog:function(){return a},show:function(){a.show()},hide:function(){a.hide()},close:d,title:function(e){a.children(".ui-dialog-titlebar").children(".elfinder-dialog-title").text(e)}}).position(),a=P.clone().on("mousedown",function(){r.trigger("mousedown")}).removeClass("ui-draggable ui-resizable elfinder-frontmost"),s.append(c),Object.assign(p,c.offset(),l),c.remove(),a.height(P.height()).children(".ui-dialog-content:first").empty(),n.toHide(P.before(a)),a.children(".ui-dialog-content:first,.ui-dialog-buttonpane,.ui-resizable-handle").remove(),a.find(".elfinder-titlebar-minimize,.elfinder-titlebar-full").remove(),a.find(".ui-dialog-titlebar-close").on("mousedown",function(e){e.stopPropagation(),e.preventDefault(),d()}),a.animate(p,function(){a.attr("style","").css({maxWidth:P.width()}).addClass("elfinder-dialog-minimized").appendTo(s),u(),"function"==typeof t.minimize&&t.minimize.call(f[0])}))}),C.on("dblclick",function(t){e(this).children(".elfinder-titlebar-minimize").trigger("mousedown")}).prepend(i),P.on("togleminimize",function(){i.trigger("mousedown")}))}},P=e('<div class="ui-front ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable std42-dialog touch-punch '+g+" "+t.cssClass+'"></div>').hide().append(f).appendTo(o).draggable({containment:n.options.dialogContained?o:null,handle:".ui-dialog-titlebar",start:function(){S.show()},drag:function(e,t){var i=t.offset.top,a=t.offset.left;i<0&&(t.position.top=t.position.top-i),a<0&&(t.position.left=t.position.left-a),n.options.dialogContained&&(t.position.top<0&&(t.position.top=0),t.position.left<0&&(t.position.left=0))},stop:function(e,n){S.hide(),P.css({height:t.height}),f.data("draged",!0)}}).css({width:t.width,height:t.height,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight}).on("touchstart touchmove touchend click dblclick mouseup mouseenter mouseleave mouseout mouseover mousemove",function(e){!h[e.type]&&e.stopPropagation()}).on("mousedown",function(t){!h[t.type]&&t.stopPropagation(),requestAnimationFrame(function(){P.is(":visible")&&!P.hasClass("elfinder-frontmost")&&(a=e(":focus"),a.length||(a=void 0),P.trigger("totop"))})}).on("open",function(){P.data("margin-y",f.outerHeight(!0)-f.height()),c.enabled&&(t.height&&"auto"!==t.height&&P.trigger("resize",{init:!0}),c.defaultSize||(c.defaultSize={width:f.width(),height:f.height()}),d(P),P.trigger("resize").trigger("posinit"),o.on("resize."+n.namespace,P,p)),P.hasClass(v)||o.children("."+g+":visible:not(."+v+")").each(function(){var t=e(this),n=parseInt(t.css("top")),i=parseInt(t.css("left")),a=parseInt(P.css("top")),o=parseInt(P.css("left")),r=Math.abs(n-a)<10,s=Math.abs(i-o)<10;t[0]!=P[0]&&(r||s)&&P.css({top:r?n+10:a,left:s?i+10:o})}),P.data("modal")&&(P.addClass(x),n.getUI("overlay").elfinderoverlay("show")),P.trigger("totop"),t.openMaximized&&n.toggleMaximize(P),n.trigger("dialogopen",{dialog:P}),"function"==typeof t.open&&e.proxy(t.open,f[0])(),t.closeOnEscape&&e(document).on("keydown."+k,function(t){t.keyCode==e.ui.keyCode.ESCAPE&&P.hasClass("elfinder-frontmost")&&f.elfinderdialog("close")}),P.hasClass(n.res("class","editing"))&&u()}).on("close",function(i){var a,r;t.beforeclose&&"function"==typeof t.beforeclose?(r=t.beforeclose(),r&&r.promise||(r=r?e.Deferred().resolve():e.Deferred().reject())):r=e.Deferred().resolve(),r.done(function(){c.enabled&&o.off("resize."+n.namespace,p),t.closeOnEscape&&e(document).off("keyup."+k),t.allowMaximize&&n.toggleMaximize(P,!1),n.toHide(P),P.data("modal")&&n.getUI("overlay").elfinderoverlay("hide"),"function"==typeof t.close&&e.proxy(t.close,f[0])(),t.destroyOnClose&&P.parent().length&&P.hide().remove(),a=o.children("."+g+":visible"),P.hasClass(n.res("class","editing"))&&u()})}).on("totop frontmost",function(){var e=n.storage("autoFocusDialog");P.data("focusOnMouseOver",e?e>0:n.options.uiOptions.dialog.focusOnMouseOver),P.data("minimized")&&C.children(".elfinder-titlebar-minimize").trigger("mousedown"),!P.data("modal")&&n.getUI("overlay").is(":visible")?n.getUI("overlay").before(P):n.toFront(P),o.children("."+g+":not(."+x+")").removeClass(m),P.addClass(m),!n.UA.Mobile&&(a||E()).trigger("focus"),a=void 0}).on("posinit",function(){var i,a,s,l,c,d,p,u=t.position;if(!P.hasClass("elfinder-maximized")){if(!u&&!P.data("resizing")){if(p=o.hasClass("elfinder-fullscreen")||n.options.enableAlways,P.css(p?{maxWidth:"100%",maxHeight:"100%",overflow:"auto"}:r),n.UA.Mobile&&!p&&P.data("rotated")===n.UA.Rotated)return;P.data("rotated",n.UA.Rotated),c=e(window),i=o.offset(),l={width:P.outerWidth(!0),height:P.outerHeight(!0)},l.right=i.left+l.width,l.bottom=i.top+l.height,d={scrLeft:c.scrollLeft(),scrTop:c.scrollTop(),width:c.width(),height:c.height()},d.right=d.scrLeft+d.width,d.bottom=d.scrTop+d.height,n.options.dialogContained||p?(a=0,s=0):(a=i.top*-1+d.scrTop,s=i.left*-1+d.scrLeft),u={top:l.height>=d.height?a:Math.max(a,parseInt((o.height()-l.height)/2-42)),left:l.width>=d.width?s:Math.max(s,parseInt((o.width()-l.width)/2))},l.right+u.left>d.right&&(u.left=Math.max(s,d.right-l.right)),l.bottom+u.top>d.bottom&&(u.top=Math.max(a,d.bottom-l.bottom))}t.absolute&&(u.position="absolute"),u&&P.css(u)}}).on("resize",function(n,i){var a,o,r,s,l=0,d=i&&i.init;i&&(i.minimize||i.maxmize)||P.data("minimized")||(n.stopPropagation(),n.preventDefault(),P.children(".ui-widget-header,.ui-dialog-buttonpane").each(function(){l+=e(this).outerHeight(!0)}),s="auto"===t.height,s&&f.css({"max-height":"",height:"auto"}),d||!c.enabled||n.originalEvent||P.hasClass("elfinder-maximized")?a=P.height()-l-P.data("margin-y"):(a=P.height(),o=P.css("min-height")||a,r=P.css("max-height")||a,o=o.match(/%/)?Math.floor(parseInt(o)/100*P.parent().height()):parseInt(o),r=r.match(/%/)?Math.floor(parseInt(r)/100*P.parent().height()):parseInt(r),a=Math.min(s?P.height():c.defaultSize.height,Math.max(r,o)-l-P.data("margin-y"))),f.css(s?"max-height":"height",a),d||(q(),o=f.height(),o=a<o?o+l+P.data("margin-y"):t.minHeight,P.css("min-height",o),P.data("hasResizable")&&P.resizable("option",{minHeight:o}),"function"==typeof t.resize&&e.proxy(t.resize,f[0])(n,i)))}).on("tabstopsInit",M).on("focus","."+y,function(){e(this).addClass(b).parent("label").addClass(b),this.id&&e(this).parent().find("label[for="+this.id+"]").addClass(b)}).on("click","select."+y,function(){var t=e(this);t.data("keepFocus")?t.removeData("keepFocus"):t.data("keepFocus",!0)}).on("blur","."+y,function(){e(this).removeClass(b).removeData("keepFocus").parent("label").removeClass(b),this.id&&e(this).parent().find("label[for="+this.id+"]").removeClass(b)}).on("mouseenter mouseleave","."+y+",label",function(n){var i,a=e(this);("LABEL"!==this.nodeName||a.children("."+y).length||(i=a.attr("for"))&&e("#"+i).hasClass(y))&&(t.btnHoverFocus&&P.data("focusOnMouseOver")?"mouseenter"!==n.type||e(":focus").data("keepFocus")||a.trigger("focus"):a.toggleClass(b,"mouseenter"==n.type))}).on("keydown","."+y,function(t){var n,i,a=e(this);if(a.is(":focus")){if(n=t.keyCode===e.ui.keyCode.ESCAPE,t.keyCode===e.ui.keyCode.ENTER?(t.preventDefault(),a.trigger("click")):t.keyCode===e.ui.keyCode.TAB&&t.shiftKey||t.keyCode===e.ui.keyCode.LEFT||t.keyCode==e.ui.keyCode.UP?i="prev":t.keyCode!==e.ui.keyCode.TAB&&t.keyCode!=e.ui.keyCode.RIGHT&&t.keyCode!=e.ui.keyCode.DOWN||(i="next"),i&&(a.is("textarea")&&!t.ctrlKey&&!t.metaKey||a.is("select,span.ui-slider-handle")&&t.keyCode!==e.ui.keyCode.TAB||a.is("input:not(:checkbox,:radio)")&&!t.ctrlKey&&!t.metaKey&&t.keyCode===e.ui.keyCode["prev"===i?"LEFT":"RIGHT"]))return void t.stopPropagation();n?a.is("input:not(:checkbox,:radio),textarea")&&""!==a.val()&&(a.val(""),t.stopPropagation()):t.stopPropagation(),i&&(t.preventDefault(),("prev"===i?F:E)(this).trigger("focus"))}}).data({modal:t.modal}),q=function(){var e,t=n.getUI();t.hasClass("elfinder-fullscreen")&&(e=P.position(),P.css("top",Math.max(Math.min(Math.max(e.top,0),t.height()-100),0)),P.css("left",Math.max(Math.min(Math.max(e.left,0),t.width()-200),0)))};P.prepend(C),D(),e.each(t.buttons,function(t,n){var i=e('<button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only elfinder-btncnt-'+j++ +" "+y+'"><span class="ui-button-text">'+t+"</span></button>").on("click",e.proxy(n,f[0]));n._cssClass&&i.addClass(n._cssClass),s?z.append(i):z.prepend(i)}),z.children().length&&(P.append(T),P.show(),T.find("button").each(function(t,n){A+=e(n).outerWidth(!0)}),P.hide(),A+=20,P.width()<A&&P.width(A)),P.append(S),c.enabled&&(l.width=P.outerWidth(!0)-P.width()+(P.outerWidth()-P.width())/2,l.height=P.outerHeight(!0)-P.height()+(P.outerHeight()-P.height())/2),n.options.dialogContained&&(i={maxWidth:o.width()-l.width,maxHeight:o.height()-l.height},t.maxWidth=t.maxWidth?Math.min(i.maxWidth,t.maxWidth):i.maxWidth,t.maxHeight=t.maxHeight?Math.min(i.maxHeight,t.maxHeight):i.maxHeight,P.css(i)),r={maxWidth:P.css("max-width"),maxHeight:P.css("max-height"),overflow:P.css("overflow")},t.resizable&&P.resizable({minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,start:function(){S.show(),P.data("resizing")!==!0&&P.data("resizing")&&clearTimeout(P.data("resizing")),P.data("resizing",!0)},stop:function(e,t){S.hide(),P.data("resizing",setTimeout(function(){P.data("resizing",!1)},200)),c.enabled&&(c.defaultSize={width:f.width(),height:f.height()})}}).data("hasResizable",!0),I(),M(),"function"==typeof t.create&&e.proxy(t.create,this)(),t.autoOpen&&(t.open?requestAnimationFrame(function(){f.elfinderdialog("open")}):f.elfinderdialog("open")),t.resize&&n.bind("themechange",function(){setTimeout(function(){P.data("margin-y",f.outerHeight(!0)-f.height()),P.trigger("resize",{init:!0})},300)})}),this)},e.fn.elfinderdialog.defaults={cssClass:"",title:"",modal:!1,resizable:!0,autoOpen:!0,closeOnEscape:!0,destroyOnClose:!1,buttons:{},btnHoverFocus:!0,position:null,absolute:!1,width:320,height:"auto",minWidth:200,minHeight:70,maxWidth:null,maxHeight:null,allowMinimize:"auto",allowMaximize:!1,openMaximized:!1,headerBtnPos:"auto",headerBtnOrder:"auto",optimizeNumber:!0,propagationEvents:["mousemove","mouseup"]},e.fn.elfinderfullscreenbutton=function(t){return this.each(function(){var n,i=e(this).elfinderbutton(t),a=i.children(".elfinder-button-icon");t.change(function(){n&&cancelAnimationFrame(n),n=requestAnimationFrame(function(){var e=t.value;a.addClass("elfinder-button-icon-fullscreen").toggleClass("elfinder-button-icon-unfullscreen",e),t.className=e?"unfullscreen":""})})})},e.fn.elfindernavbar=function(t,n){return this.not(".elfinder-navbar").each(function(){var i,a,o,r,s,l,c,d=e(this).hide().addClass("ui-state-default elfinder-navbar"),p=d.css("overflow","hidden").parent(),u=p.children(".elfinder-workzone").append(d),h="ltr"==t.direction,f=function(){var e=t.getUI("cwd"),n=t.getUI("workzone"),i=n.data("rectangle"),a=e.offset();n.data("rectangle",Object.assign(i,{cwdEdge:"ltr"===t.direction?a.left:a.left+e.width()}))},m=function(){d.css("overflow","hidden"),i=Math.round(d.outerHeight()-d.height()),a=Math.round(c.outerWidth()-c.innerWidth()),d.css("overflow","auto")};t.one("init",function(){c=t.getUI("navdock");var e=function(){m(),t.bind("wzresize",function(){var e=0;c.width(d.outerWidth()-a),c.children().length>1&&(e=c.outerHeight(!0)),d.height(u.height()-e-i)}).trigger("wzresize")};t.cssloaded?e():t.one("cssloaded",e)}).one("opendone",function(){o&&o.trigger("resize"),d.css("overflow","auto")}).bind("themechange",m),t.UA.Touch&&(s=t.storage("autoHide")||{},"undefined"==typeof s.navbar&&(s.navbar=n.autoHideUA&&n.autoHideUA.length>0&&e.grep(n.autoHideUA,function(e){return!!t.UA[e]}).length,t.storage("autoHide",s)),s.navbar&&t.one("init",function(){d.children().length&&t.uiAutoHide.push(function(){d.stop(!0,!0).trigger("navhide",{duration:"slow",init:!0})})}),t.bind("load",function(){d.children().length&&(r=e('<div class="elfinder-navbar-swipe-handle"></div>').hide().appendTo(u),"none"!==r.css("pointer-events")&&(r.remove(),r=null))}),d.on("navshow navhide",function(e,n){var i="navshow"===e.type?"show":"hide",a=n&&n.duration?n.duration:"fast",o=n&&n.handleW?n.handleW:Math.max(50,t.getUI().width()/10);d.stop(!0,!0)[i]({duration:a,step:function(){t.trigger("wzresize")},complete:function(){r&&("show"===i?r.stop(!0,!0).hide():(r.width(o?o:""),t.resources.blink(r,"slowonce"))),t.trigger("navbar"+i),n.init&&t.trigger("uiautohide"),f()}}),s.navbar="show"!==i,t.storage("autoHide",Object.assign(t.storage("autoHide"),{navbar:s.navbar}))}).on("touchstart",function(n){e(this)["scroll"+("ltr"===t.direction?"Right":"Left")]()>5&&(n.originalEvent._preventSwipeX=!0)})),t.UA.Mobile||(o=d.resizable({handles:h?"e":"w",minWidth:n.minWidth||150,maxWidth:n.maxWidth||500,resize:function(){t.trigger("wzresize")},stop:function(e,n){t.storage("navbarWidth",n.size.width),f()}}).on("resize scroll",function(n){var i=e(this),a=i.data("posinit");n.preventDefault(),n.stopPropagation(),h||"resize"!==n.type||d.css("left",0),a&&cancelAnimationFrame(a),i.data("posinit",requestAnimationFrame(function(){var e=t.UA.Opera&&d.scrollLeft()?20:2;o.css("top",0).css({top:parseInt(d.scrollTop())+"px",left:h?"auto":parseInt(d.scrollRight()-e)*-1,right:h?parseInt(d.scrollLeft()-e)*-1:"auto"}),"resize"===n.type&&t.getUI("cwd").trigger("resize")}))}).children(".ui-resizable-handle").addClass("ui-front")),(l=t.storage("navbarWidth"))?d.width(l):t.UA.Mobile&&t.one(t.cssloaded?"init":"cssloaded",function(){var n=function(){l=d.parent().width()/2,d.data("defWidth")>l?d.width(l):d.width(d.data("defWidth")),d.data("width",d.width()),t.trigger("wzresize")};d.data("defWidth",d.width()),e(window).on("resize."+t.namespace,n),n()})}),this},e.fn.elfindernavdock=function(t,n){return this.not(".elfinder-navdock").each(function(){var i,a,o=e(this).hide().addClass("ui-state-default elfinder-navdock touch-punch"),r=o.parent(),s=(r.children(".elfinder-workzone").append(o),function(n,i){var a,r=i||o.height(),s=n-r,l=Object.keys(c).length,d=l?s/l:0;s&&(a=o.css("overflow"),o.css("overflow","hidden"),o.height(n),e.each(c,function(e,n){n.height(n.height()+d).trigger("resize."+t.namespace)}),t.trigger("wzresize"),o.css("overflow",a))}),l=e('<div class="ui-front ui-resizable-handle ui-resizable-n"></div>').appendTo(o),c={},d=(parseInt(n.initMaxHeight)||50)/100,p=(parseInt(n.maxHeight)||90)/100;o.data("addNode",function(e,n){var r,u,h,f=t.getUI("workzone").height(),m=f*d;return n=Object.assign({first:!1,sizeSync:!0,init:!1},n),e.attr("id")||e.attr("id",t.namespace+"-navdock-"+ +new Date),n.sizeSync&&(c[e.attr("id")]=e),r=o.height(),u=r+e.outerHeight(!0),n.first?l.after(e):o.append(e),a=!0,o.resizable("enable").height(u).show(),t.trigger("wzresize"),n.init&&(h=t.storage("navdockHeight"),u=h?h:u>m?m:u,i=u),s(Math.min(u,f*p)),o}).data("removeNode",function(n,i){var r=e("#"+n);return delete c[n],o.height(o.height()-e("#"+n).outerHeight(!0)),i?"detach"===i?r=r.detach():i.append(r):r.remove(),o.children().length<=1&&(a=!1,o.resizable("disable").height(0).hide()),t.trigger("wzresize"),r}),n.disabled||t.one("init",function(){var e;t.getUI("navbar").children().not(".ui-resizable-handle").length&&(o.data("dockEnabled",!0),o.resizable({maxHeight:t.getUI("workzone").height()*p,handles:{n:l},start:function(n,i){e=o.css("overflow"),o.css("overflow","hidden"),t.trigger("navdockresizestart",{event:n,ui:i},!0)},resize:function(e,n){o.css("top",""),t.trigger("wzresize",{inNavdockResize:!0})},stop:function(n,a){t.trigger("navdockresizestop",{event:n,ui:a},!0),o.css("top",""),i=a.size.height,t.storage("navdockHeight",i),s(i,a.originalSize.height),o.css("overflow",e)}}),t.bind("wzresize",function(e){var n,a;o.is(":visible")&&(n=t.getUI("workzone").height()*p,e.data&&e.data.inNavdockResize||(a=o.height(),n<i?Math.abs(a-n)>1&&s(n):Math.abs(a-i)>1&&s(i)),o.resizable("option","maxHeight",n))}).bind("themechange",function(){var e=Math.round(o.height());requestAnimationFrame(function(){var t=Math.round(o.height()),n=e-t;0!==n&&s(o.height(),t-n)})})),t.bind("navbarshow navbarhide",function(e){o[a&&"navbarshow"===e.type?"show":"hide"]()})})}),this},e.fn.elfinderoverlay=function(t){var n,i,a,o,r=this.parent().elfinder("instance");return this.filter(":not(.elfinder-overlay)").each(function(){t=Object.assign({},t),e(this).addClass("ui-front ui-widget-overlay elfinder-overlay").hide().on("mousedown",function(e){e.preventDefault(),e.stopPropagation()}).data({cnt:0,show:"function"==typeof t.show?t.show:function(){},hide:"function"==typeof t.hide?t.hide:function(){}})}),"show"==t&&(n=this.eq(0),i=n.data("cnt")+1,a=n.data("show"),r.toFront(n),n.data("cnt",i),n.is(":hidden")&&(n.show(),a())),"hide"==t&&(n=this.eq(0),i=n.data("cnt")-1,o=n.data("hide"),n.data("cnt",i),i<=0&&(n.hide(),o())),this},e.fn.elfinderpanel=function(t){return this.each(function(){var n=e(this).addClass("elfinder-panel ui-state-default ui-corner-all"),i="margin-"+("ltr"==t.direction?"left":"right");t.one("load",function(e){var a=t.getUI("navbar");n.css(i,parseInt(a.outerWidth(!0))),a.on("resize",function(e){e.preventDefault(),e.stopPropagation(),n.is(":visible")&&n.css(i,parseInt(a.outerWidth(!0)))})})})},e.fn.elfinderpath=function(t,n){return this.each(function(){var a,o,r="",s="",l=[],c="statusbar",d=t.res("class","hover"),p="path"+(i.prototype.uniqueid?i.prototype.uniqueid:"")+"-",u=e('<div class="ui-widget-header ui-helper-clearfix elfinder-workzone-path"></div>'),h=e(this).addClass("elfinder-path").html("&nbsp;").on("mousedown","span.elfinder-path-dir",function(n){
var i=e(this).attr("id").substr(p.length);n.preventDefault(),i!=t.cwd().hash&&(e(this).addClass(d),r?t.exec("search",r,{target:i,mime:l.join(" ")}):t.trigger("select",{selected:[i]}).exec("open",i))}).prependTo(t.getUI("statusbar").show()),f=e('<div class="elfinder-path-roots"></div>').on("click",function(n){n.stopPropagation(),n.preventDefault();var i=e.map(t.roots,function(e){return t.file(e)}),a=[];e.each(i,function(e,n){n.phash||t.root(t.cwd().hash,!0)===n.hash||a.push({label:t.escape(n.i18||n.name),icon:"home",callback:function(){t.exec("open",n.hash)},options:{iconClass:n.csscls||"",iconImg:n.icon||""}})}),t.trigger("contextmenu",{raw:a,x:n.pageX,y:n.pageY})}).append('<span class="elfinder-button-icon elfinder-button-icon-menu" ></span>').appendTo(u),m=function(n){var i=[],a=[];return e.each(t.parents(n),function(e,o){var r=n===o?"elfinder-path-dir elfinder-path-cwd":"elfinder-path-dir",s=t.file(o),l=t.escape(s.i18||s.name);a.push(l),i.push('<span id="'+p+o+'" class="'+r+'" title="'+a.join(t.option("separator"))+'">'+l+"</span>")}),i.join('<span class="elfinder-path-other">'+t.option("separator")+"</span>")},g=function(){var n;h.children("span.elfinder-path-dir").attr("style",""),n="ltr"===t.direction?e("#"+p+t.cwd().hash).prevAll("span.elfinder-path-dir:first"):e(),h.scrollLeft(n.length?n.position().left:0)},v=function(){if(!t.UA.CSS.flex){var n,i,a=h.children("span.elfinder-path-dir"),o=a.length;if("workzone"===c||o<2)return void a.attr("style","");h.width(h.css("max-width")),a.css({maxWidth:100/o+"%",display:"inline-block"}),n=h.width()-9,h.children("span.elfinder-path-other").each(function(){n-=e(this).width()}),i=[],a.each(function(t){var a=e(this),o=a.width();n-=o,o<this.scrollWidth&&i.push(t)}),h.width(""),i.length?(n>0&&(n/=i.length,e.each(i,function(t,i){var o=e(a[i]);o.css("max-width",o.width()+n)})),a.last().attr("style","")):a.attr("style","")}};t.one("init",function(){a=t.getUI("tree").length,o=t.getUI("stat").length,!a&&n.toWorkzoneWithoutNavbar&&(u.append(h).insertBefore(t.getUI("workzone")),c="workzone",t.bind("open",g).one("opendone",function(){t.getUI().trigger("resize")}))}).bind("open searchend parents",function(){r="",s="",l=[],h.html(m(t.cwd().hash)),Object.keys(t.roots).length>1?(h.css("margin",""),f.show()):(h.css("margin",0),f.hide()),!o&&v()}).bind("searchstart",function(e){e.data&&(r=e.data.query||"",s=e.data.target||"",l=e.data.mimes||[])}).bind("search",function(e){var n="";n=s?m(s):t.i18n("btnAll"),h.html('<span class="elfinder-path-other">'+t.i18n("searcresult")+": </span>"+n),v()}).bind("navbarshow navbarhide",function(){var e=t.getUI("workzone");"navbarshow"===this.type?(t.unbind("open",g),h.prependTo(t.getUI("statusbar")),u.detach(),c="statusbar"):(u.append(h).insertBefore(e),c="workzone",g(),t.bind("open",g)),t.trigger("uiresize")}).bind("resize uistatchange",v)})},e.fn.elfinderplaces=function(t,n){return this.each(function(){var i={},a="class",o=t.res(a,"navdir"),r=t.res(a,"navcollapse"),s=t.res(a,"navexpand"),l=t.res(a,"hover"),c=t.res(a,"treeroot"),d=t.res(a,"adroppable"),p=t.res("tpl","placedir"),u=t.res("tpl","perms"),h=e(t.res("tpl","navspinner")),f=n.suffix?n.suffix:"",m="places"+f,g=null,v=function(e){return e.substr(6)},b=function(e){return"place-"+e},y=function(t){return e(document.getElementById(b(t)))},w=function(){var n=[],a={};n=e.map(E.children().find("[id]"),function(e){return v(e.id)}),n.length?e.each(n.reverse(),function(e,t){a[t]=i[t]}):a=null,t.storage(m,a)},x=function(){var a,o;m="places"+(n.suffix?n.suffix:""),i={},a=t.storage(m),"string"==typeof a?(a=e.grep(a.split(","),function(e){return!!e}),e.each(a,function(e,t){var n=t.split("#");i[n[0]]=n[1]?n[1]:n[0]})):e.isPlainObject(a)&&(i=a),t.trigger("placesload",{dirs:i,storageKey:m},!0),o=Object.keys(i),o.length&&(M.prepend(h),t.request({data:{cmd:"info",targets:o},preventDefault:!0}).done(function(n){var a={};n.files&&n.files.length&&t.cache(n.files),e.each(n.files,function(e,t){var n=t.hash;a[n]=t}),e.each(i,function(e,t){C(a[e]||Object.assign({notfound:!0},t))}),t.storage("placesState")>0&&M.trigger("click")}).always(function(){h.remove()}))},k=function(n,i){return e(p.replace(/\{id\}/,b(n?n.hash:i)).replace(/\{name\}/,t.escape(n?n.i18||n.name:i)).replace(/\{cssclass\}/,n?t.perms2class(n)+(n.notfound?" elfinder-na":"")+(n.csscls?" "+n.csscls:""):"").replace(/\{permissions\}/,!n||n.read&&n.write&&!n.notfound?"":u).replace(/\{title\}/,n?' title="'+t.escape(t.path(n.hash,!0)||n.i18||n.name)+'"':"").replace(/\{symlink\}/,"").replace(/\{style\}/,n&&n.icon?t.getIconStyle(n):""))},C=function(e){var n,a;return"directory"===e.mime&&(a=e.hash,t.files().hasOwnProperty(a)||t.trigger("tree",{tree:[e]}),n=k(e,a),i[a]=e,E.prepend(n),M.addClass(r),S.toggle(E.children().length>1),!0)},z=function(e){var t,n,a=null;return i[e]&&(delete i[e],t=y(e),t.length&&(a=t.text(),t.parent().remove(),n=E.children().length,S.toggle(n>1),n||(M.removeClass(r),F.removeClass(s),E.slideToggle(!1)))),a},T=function(e){var n=y(e),i=n.parent(),a=i.prev("div"),o="ui-state-hover",r=t.getUI("contextmenu");g&&clearTimeout(g),a.length&&(r.find(":first").data("placesHash",e),n.addClass(o),i.insertBefore(a),a=i.prev("div"),g=setTimeout(function(){n.removeClass(o),r.find(":first").data("placesHash")===e&&r.hide().empty()},1500)),a.length||(n.removeClass(o),r.hide().empty())},A=function(e,t){var n=e.hash,a=y(t||n),o=k(e,n);return a.length>0&&(a.parent().replaceWith(o),i[n]=e,!0)},j=function(){E.empty(),M.removeClass(r),F.removeClass(s),E.slideToggle(!1)},O=function(){e.each(i,function(n,i){var a=t.file(n)||i,r=k(a,n),s=null;return a||r.hide(),!(!E.children().length||(e.each(E.children(),function(){var t=e(this);if((a.i18||a.name).localeCompare(t.children("."+o).text())<0)return s=!r.insertBefore(t)}),null===s))||void(!y(n).length&&E.append(r))}),w()},S=e('<span class="elfinder-button-icon elfinder-button-icon-sort elfinder-places-root-icon" title="'+t.i18n("cmdsort")+'"></span>').hide().on("click",function(e){e.stopPropagation(),E.empty(),O()}),I=k({hash:"root-"+t.namespace,name:t.i18n(n.name,"places"),read:!0,write:!0}),M=I.children("."+o).addClass(c).on("click",function(e){e.stopPropagation(),M.hasClass(r)&&(F.toggleClass(s),E.slideToggle(),t.storage("placesState",F.hasClass(s)?1:0))}).append(S),E=I.children("."+t.res(a,"navsubtree")),F=e(this).addClass(t.res(a,"tree")+" elfinder-places ui-corner-all").hide().append(I).appendTo(t.getUI("navbar")).on("mouseenter mouseleave","."+o,function(t){e(this).toggleClass("ui-state-hover","mouseenter"==t.type)}).on("click","."+o,function(n){var i=e(this);return i.data("longtap")?void n.stopPropagation():void(!i.hasClass("elfinder-na")&&t.exec("open",i.attr("id").substr(6)))}).on("contextmenu","."+o+":not(."+c+")",function(n){var i=e(this),a=i.attr("id").substr(6);n.preventDefault(),t.trigger("contextmenu",{raw:[{label:t.i18n("moveUp"),icon:"up",remain:!0,callback:function(){T(a),w()}},"|",{label:t.i18n("rmFromPlaces"),icon:"rm",callback:function(){z(a),w()}}],x:n.pageX,y:n.pageY}),i.addClass("ui-state-hover"),t.getUI("contextmenu").children().on("mouseenter",function(){i.addClass("ui-state-hover")}),t.bind("closecontextmenu",function(){i.removeClass("ui-state-hover")})}).droppable({tolerance:"pointer",accept:".elfinder-cwd-file-wrapper,.elfinder-tree-dir,.elfinder-cwd-file",hoverClass:t.res("class","adroppable"),classes:{"ui-droppable-hover":t.res("class","adroppable")},over:function(n,a){var o=a.helper,r=e.grep(o.data("files"),function(e){return"directory"===t.file(e).mime&&!i[e]});n.stopPropagation(),o.data("dropover",o.data("dropover")+1),t.insideWorkzone(n.pageX,n.pageY)&&(r.length>0?(o.addClass("elfinder-drag-helper-plus"),t.trigger("unlockfiles",{files:o.data("files"),helper:o})):e(this).removeClass(d))},out:function(t,n){var i=n.helper;t.stopPropagation(),i.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus").data("dropover",Math.max(i.data("dropover")-1,0)),e(this).removeData("dropover").removeClass(d)},drop:function(n,a){var o=a.helper,r=!0;e.each(o.data("files"),function(e,n){var a=t.file(n);a&&"directory"==a.mime&&!i[a.hash]?C(a):r=!1}),w(),r&&o.hide()}}).on("touchstart","."+o+":not(."+c+")",function(n){if(!(n.originalEvent.touches.length>1))var i=e(this).attr("id").substr(6),a=e(this).addClass(l).data("longtap",null).data("tmlongtap",setTimeout(function(){a.data("longtap",!0),t.trigger("contextmenu",{raw:[{label:t.i18n("rmFromPlaces"),icon:"rm",callback:function(){z(i),w()}}],x:n.originalEvent.touches[0].pageX,y:n.originalEvent.touches[0].pageY})},500))}).on("touchmove touchend","."+o+":not(."+c+")",function(t){clearTimeout(e(this).data("tmlongtap")),"touchmove"==t.type&&e(this).removeClass(l)});e.fn.sortable&&E.addClass("touch-punch").sortable({appendTo:t.getUI(),revert:!1,helper:function(n){var i=e(n.target).parent();return i.children().removeClass("ui-state-hover"),e('<div class="ui-widget elfinder-place-drag elfinder-'+t.direction+'"></div>').append(e('<div class="elfinder-navbar"></div>').show().append(i.clone()))},stop:function(t,n){var i=e(n.item[0]),a=F.offset().top,o=F.offset().left,r=F.width(),s=F.height(),l=t.pageX,c=t.pageY;l>o&&l<o+r&&c>a&&c<c+s||(z(v(i.children(":first").attr("id"))),w())},update:function(e,t){w()}}),e(this).on("regist",function(t,n){var a=!1;e.each(n,function(e,t){t&&"directory"==t.mime&&!i[t.hash]&&C(t)&&(a=!0)}),a&&w()}),t.one("load",function(){t.oldAPI||(F.show().parent().show(),x(),t.change(function(t){var n=!1;e.each(t.data.changed,function(e,t){i[t.hash]&&("directory"!==t.mime?z(t.hash)&&(n=!0):A(t)&&(n=!0))}),n&&w()}).bind("rename",function(t){var n=!1;t.data.removed&&e.each(t.data.removed,function(e,i){t.data.added[e]&&A(t.data.added[e],i)&&(n=!0)}),n&&w()}).bind("rm paste",function(t){var n=[],i=!1;t.data.removed&&e.each(t.data.removed,function(e,t){var i=z(t);i&&n.push(i)}),n.length&&(i=!0),t.data.added&&n.length&&e.each(t.data.added,function(t,i){1!==e.inArray(i.name,n)&&"directory"==i.mime&&C(i)}),i&&w()}).bind("sync netmount",function(){var a,o=this,r=n.suffix?n.suffix:"";return"sync"===o.type&&f!==r?(f=r,j(),void x()):(a=Object.keys(i),void(a.length&&(M.prepend(h),t.request({data:{cmd:"info",targets:a},preventDefault:!0}).done(function(n){var a={},r=!1,s=t.cwd().hash;e.each(n.files||[],function(e,n){var i=n.hash;a[i]=n,t.files().hasOwnProperty(n.hash)||t.updateCache({tree:[n]})}),e.each(i,function(e,t){Boolean(t.notfound)===Boolean(a[e])?t.phash===s&&"netmount"!==o.type||a[e]&&"directory"!==a[e].mime?z(e)&&(r=!0):A(a[e]||Object.assign({notfound:!0},t))&&(r=!0):a[e]&&a[e].phash!=s&&A(a[e])}),r&&w()}).always(function(){h.remove()}))))}))})})},e.fn.elfindersearchbutton=function(t){return this.each(function(){var n,i,a,o,r=!1,s=t.fm,l=(s.res("class","disabled"),t.options.incsearch||{enable:!1}),c=t.options.searchTypes,d=function(e){return s.namespace+s.escape(e)},p=s.getUI("toolbar"),u=s.res("class","searchbtn"),h=e(this).hide().addClass("ui-widget-content elfinder-button "+u).on("click",function(e){e.stopPropagation()}),f=function(){var e=s.getUI(),t=e.offset(),n=h.offset();return{top:n.top-t.top,maxHeight:e.height()-40}},m=function(){b.data("inctm")&&clearTimeout(b.data("inctm"));var n=e.trim(b.val()),a=!e("#"+d("SearchFromAll")).prop("checked"),o=e("#"+d("SearchMime")).prop("checked"),l="";a&&(a=e("#"+d("SearchFromVol")).prop("checked")?s.root(s.cwd().hash):s.cwd().hash),o&&(o=n,n="."),i&&(l=i.children("input:checked").val()),n?(b.trigger("focus"),t.exec(n,a,o,l).done(function(){r=!0}).fail(function(){g()})):s.trigger("searchend")},g=function(){b.data("inctm")&&clearTimeout(b.data("inctm")),b.val("").trigger("blur"),(r||v)&&(r=!1,v="",s.lazy(function(){s.trigger("searchend")}))},v="",b=e('<input type="text" size="42"/>').on("focus",function(){!h.hasClass("ui-state-active")&&s.getUI().click(),o=!0,v="",h.addClass("ui-state-active"),s.trigger("uiresize"),n&&n.css(f()).slideDown(function(){h.addClass("ui-state-active"),s.toFront(n)})}).on("blur",function(){o=!1,n?n.data("infocus")?n.data("infocus",!1):n.slideUp(function(){h.removeClass("ui-state-active"),s.trigger("uiresize"),s.toHide(n)}):h.removeClass("ui-state-active")}).appendTo(h).on("keypress",function(e){e.stopPropagation()}).on("keydown",function(t){t.stopPropagation(),t.keyCode===e.ui.keyCode.ENTER?m():t.keyCode===e.ui.keyCode.ESCAPE&&(t.preventDefault(),g())});l.enable&&(l.minlen=l.minlen||2,l.wait=l.wait||500,b.attr("title",s.i18n("incSearchOnly")).on("compositionstart",function(){b.data("composing",!0)}).on("compositionend",function(){b.removeData("composing"),b.trigger("input")}).on("input",function(){b.data("composing")||(b.data("inctm")&&clearTimeout(b.data("inctm")),b.data("inctm",setTimeout(function(){var e=b.val();(0===e.length||e.length>=l.minlen)&&(v!==e&&s.trigger("incsearchstart",{query:e,type:i?i.children("input:checked").val():"searchName"}),v=e,""===e&&s.searchStatus.state>1&&s.searchStatus.query&&b.val(s.searchStatus.query).trigger("select"))},l.wait)))}),s.UA.ltIE8&&b.on("keydown",function(e){229===e.keyCode&&(b.data("imetm")&&clearTimeout(b.data("imetm")),b.data("composing",!0),b.data("imetm",setTimeout(function(){b.removeData("composing")},100)))}).on("keyup",function(t){b.data("imetm")&&clearTimeout(b.data("imetm")),b.data("composing")?t.keyCode===e.ui.keyCode.ENTER&&b.trigger("compositionend"):b.trigger("input")})),e('<span class="ui-icon ui-icon-search" title="'+t.title+'"></span>').appendTo(h).on("mousedown",function(e){e.stopPropagation(),e.preventDefault(),h.hasClass("ui-state-active")?m():b.trigger("focus")}),e('<span class="ui-icon ui-icon-close"></span>').appendTo(h).on("mousedown",function(e){e.stopPropagation(),e.preventDefault(),""!==b.val()||h.hasClass("ui-state-active")?g():b.trigger("focus")}),s.bind("toolbarload",function(){var e=h.parent();if(e.length&&(p.prepend(h.show()),e.remove(),s.UA.ltIE7)){var t=h.children("ltr"==s.direction?".ui-icon-close":".ui-icon-search");t.css({right:"",left:parseInt(h.width())-t.outerWidth(!0)})}}),s.one("init",function(){s.getUI("cwd").on("touchstart click",function(){o&&b.trigger("blur")})}).one("open",function(){n=s.api<2.1?null:e('<div class="ui-front ui-widget ui-widget-content elfinder-button-menu elfinder-button-search-menu ui-corner-all"></div>').append(e('<div class="buttonset"></div>').append(e('<input id="'+d("SearchFromCwd")+'" name="serchfrom" type="radio" checked="checked"/><label for="'+d("SearchFromCwd")+'">'+s.i18n("btnCwd")+"</label>"),e('<input id="'+d("SearchFromVol")+'" name="serchfrom" type="radio"/><label for="'+d("SearchFromVol")+'">'+s.i18n("btnVolume")+"</label>"),e('<input id="'+d("SearchFromAll")+'" name="serchfrom" type="radio"/><label for="'+d("SearchFromAll")+'">'+s.i18n("btnAll")+"</label>")),e('<div class="buttonset elfinder-search-type"></div>').append(e('<input id="'+d("SearchName")+'" name="serchcol" type="radio" checked="checked" value="SearchName"/><label for="'+d("SearchName")+'">'+s.i18n("btnFileName")+"</label>"))).hide().appendTo(s.getUI()),n&&(c&&(i=n.find(".elfinder-search-type"),e.each(t.options.searchTypes,function(t,n){i.append(e('<input id="'+d(t)+'" name="serchcol" type="radio" value="'+s.escape(t)+'"/><label for="'+d(t)+'">'+s.i18n(n.name)+"</label>"))})),n.find("div.buttonset").buttonset(),e("#"+d("SearchFromAll")).next("label").attr("title",s.i18n("searchTarget",s.i18n("btnAll"))),c&&e.each(c,function(t,n){n.title&&e("#"+d(t)).next("label").attr("title",s.i18n(n.title))}),n.on("mousedown","div.buttonset",function(e){e.stopPropagation(),n.data("infocus",!0)}).on("click","input",function(t){t.stopPropagation(),e.trim(b.val())?m():b.trigger("focus")}).on("close",function(){b.trigger("blur")}))}).bind("searchend",function(){b.val("")}).bind("open parents",function(){var t=[],n=s.file(s.root(s.cwd().hash));n&&(e.each(s.parents(s.cwd().hash),function(e,n){t.push(s.file(n).name)}),e("#"+d("SearchFromCwd")).next("label").attr("title",s.i18n("searchTarget",t.join(s.option("separator")))),e("#"+d("SearchFromVol")).next("label").attr("title",s.i18n("searchTarget",n.name)))}).bind("open",function(){v&&g()}).bind("cwdinit",function(){a=!1}).bind("cwdrender",function(){a=!0}).bind("keydownEsc",function(){v&&"/"===v.substr(0,1)&&(v="",b.val(""),s.trigger("searchend"))}).shortcut({pattern:"ctrl+f f3",description:t.title,callback:function(){b.trigger("select").trigger("focus")}}).shortcut({pattern:"a b c d e f g h i j k l m n o p q r s t u v w x y z dig0 dig1 dig2 dig3 dig4 dig5 dig6 dig7 dig8 dig9 num0 num1 num2 num3 num4 num5 num6 num7 num8 num9",description:s.i18n("firstLetterSearch"),callback:function(t){if(a){var n,i=t.originalEvent.keyCode,o=function(){var t=s.selected(),n=e.ui.keyCode[!t.length||s.cwdHash2Elm(t[0]).next("[id]").length?"RIGHT":"HOME"];e(document).trigger(e.Event("keydown",{keyCode:n,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1}))};i>=96&&i<=105&&(i-=48),n="/"+String.fromCharCode(i),v!==n?(b.val(n),v=n,s.trigger("incsearchstart",{query:n}).one("cwdrender",o)):o()}}})})},e.fn.elfindersortbutton=function(t){return this.each(function(){var n,i=t.fm,a=t.name,o="class",r=i.res(o,"disabled"),s=i.res(o,"hover"),l="elfinder-button-menu-item",c=l+"-selected",d=c+"-asc",p=c+"-desc",u=e('<span class="elfinder-button-text">'+t.title+"</span>"),h=e(this).addClass("ui-state-default elfinder-button elfinder-menubutton elfiner-button-"+a).attr("title",t.title).append('<span class="elfinder-button-icon elfinder-button-icon-'+a+'"></span>',u).on("mouseenter mouseleave",function(e){!h.hasClass(r)&&h.toggleClass(s,"mouseenter"===e.type)}).on("click",function(e){h.hasClass(r)||(e.stopPropagation(),m.is(":hidden")&&i.getUI().click(),m.css(v()).slideToggle({duration:100,done:function(e){i[m.is(":visible")?"toFront":"toHide"](m)}}))}),f=function(){i.toHide(m)},m=e('<div class="ui-front ui-widget ui-widget-content elfinder-button-menu elfinder-button-sort-menu ui-corner-all"></div>').hide().appendTo(i.getUI()).on("mouseenter mouseleave","."+l,function(t){e(this).toggleClass(s,"mouseenter"===t.type)}).on("click",function(e){e.preventDefault(),e.stopPropagation()}).on("close",f),g=function(){m.children("[rel]").removeClass(c+" "+d+" "+p).filter('[rel="'+i.sortType+'"]').addClass(c+" "+("asc"==i.sortOrder?d:p)),m.children(".elfinder-sort-stick").toggleClass(c,i.sortStickFolders),m.children(".elfinder-sort-tree").toggleClass(c,i.sortAlsoTreeview)},v=function(){var e=i.getUI().offset(),t=h.offset();return{top:t.top-e.top,left:t.left-e.left}};u.hide(),e.each(i.sortRules,function(t,n){m.append(e('<div class="'+l+'" rel="'+t+'"><span class="ui-icon ui-icon-arrowthick-1-n"></span><span class="ui-icon ui-icon-arrowthick-1-s"></span>'+i.i18n("sort"+t)+"</div>").data("type",t))}),m.children().on("click",function(n){t.exec([],e(this).removeClass(s).attr("rel"))}),e('<div class="'+l+" "+l+'-separated elfinder-sort-ext elfinder-sort-stick"><span class="ui-icon ui-icon-check"></span>'+i.i18n("sortFoldersFirst")+"</div>").appendTo(m).on("click",function(){t.exec([],"stick")}),i.one("init",function(){i.ui.tree&&null!==i.options.sortAlsoTreeview&&e('<div class="'+l+" "+l+'-separated elfinder-sort-ext elfinder-sort-tree"><span class="ui-icon ui-icon-check"></span>'+i.i18n("sortAlsoTreeview")+"</div>").appendTo(m).on("click",function(){t.exec([],"tree")})}).bind("disable select",f).bind("sortchange",g).getUI().on("click",f),m.children().length>1?t.change(function(){n&&cancelAnimationFrame(n),n=requestAnimationFrame(function(){h.toggleClass(r,t.disabled()),g()})}).change():h.addClass(r)})},e.fn.elfinderstat=function(t){return this.each(function(){var n=e(this).addClass("elfinder-stat-size"),i=e('<div class="elfinder-stat-selected"></div>').on("click","a",function(n){var i=e(this).data("hash");n.preventDefault(),t.exec("opendir",[i])}),a=t.i18n("items"),o=t.i18n("selected"),r=t.i18n("size"),s=function(i){var o=0,r=0,s=t.cwd(),l=!0,c=!0;(s.sizeInfo||s.size)&&(r=s.size,l=!1),e.each(i,function(e,t){o++,l&&(r+=parseInt(t.size)||0,c!==!0||"directory"!==t.mime||t.sizeInfo||(c=!1))}),n.html(a+': <span class="elfinder-stat-incsearch"></span>'+o+',&nbsp;<span class="elfinder-stat-size'+(c?" elfinder-stat-size-recursive":"")+'">'+t.i18n(c?"sum":"size")+": "+t.formatSize(r)+"</span>").attr("title",n.text()),t.trigger("uistatchange")},l=function(e){n.find("span.elfinder-stat-incsearch").html(e?e.hashes.length+" / ":""),n.attr("title",n.text()),t.trigger("uistatchange")},c=function(n){var a,s,l=0,c=0,d=[];1===n.length?(s=n[0],l=s.size,2===t.searchStatus.state&&(a=t.escape(s.path?s.path.replace(/\/[^\/]*$/,""):".."),d.push('<a href="#elf_'+s.phash+'" data-hash="'+s.hash+'" title="'+a+'">'+a+"</a>")),d.push(t.escape(s.i18||s.name)),i.html(d.join("/")+(l>0?", "+t.formatSize(l):""))):n.length?(e.each(n,function(e,t){c++,l+=parseInt(t.size)||0}),i.html(c?o+": "+c+", "+r+": "+t.formatSize(l):"&nbsp;")):i.html(""),i.attr("title",i.text()),t.trigger("uistatchange")};t.getUI("statusbar").prepend(n).append(i).show(),t.UA.Mobile&&e.fn.tooltip&&t.getUI("statusbar").tooltip({classes:{"ui-tooltip":"elfinder-ui-tooltip ui-widget-shadow"},tooltipClass:"elfinder-ui-tooltip ui-widget-shadow",track:!0}),t.bind("cwdhasheschange",function(n){s(e.map(n.data,function(e){return t.file(e)}))}).change(function(i){var a=i.data.changed||[],o=t.cwd().hash;e.each(a,function(){if(this.hash===o)return this.size&&(n.children(".elfinder-stat-size").addClass("elfinder-stat-size-recursive").html(t.i18n("sum")+": "+t.formatSize(this.size)),n.attr("title",n.text())),!1})}).select(function(){c(t.selectedFiles())}).bind("open",function(){c([])}).bind("incsearch",function(e){l(e.data)}).bind("incsearchend",function(){l()})})},e.fn.elfindertoast=function(t,n){var i=Object.assign({mode:"success",msg:"",showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1500,hideEasing:"swing",onHidden:void 0,timeOut:3e3,extNode:void 0,button:void 0,width:void 0},e.isPlainObject(n.options.uiOptions.toast.defaults)?n.options.uiOptions.toast.defaults:{});return this.each(function(){t=Object.assign({},i,t||{});var a,o=e(this),r=function(e){o.stop(),n.toFront(o),o[t.showMethod]({duration:t.showDuration,easing:t.showEasing,complete:function(){t.onShown&&t.onShown(),!e&&t.timeOut&&(a=setTimeout(s,t.timeOut))}})},s=function(){o[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){t.onHidden&&t.onHidden(),o.remove()}})};o.on("click",function(e){e.stopPropagation(),e.preventDefault(),a&&clearTimeout(a),t.onHidden&&t.onHidden(),o.stop().remove()}).on("mouseenter mouseleave",function(e){t.timeOut&&(a&&clearTimeout(a),a=null,"mouseenter"===e.type?r(!0):a=setTimeout(s,t.timeOut))}).hide().addClass("toast-"+t.mode).append(e('<div class="elfinder-toast-msg"></div>').html(t.msg.replace(/%([a-zA-Z0-9]+)%/g,function(e,t){return n.i18n(t)}))),t.extNode&&o.append(t.extNode),t.button&&o.append(e('<button class="ui-button ui-widget ui-state-default ui-corner-all elfinder-tabstop"></button>').append(e('<span class="ui-button-text"></span>').text(n.i18n(t.button.text))).on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"==t.type)}).on("click",t.button.click||function(){})),t.width&&o.css("max-width",t.width),r()})},e.fn.elfindertoolbar=function(t,n){return this.not(".elfinder-toolbar").each(function(){var i,a,o,r,s,l,c,d,p,u=t._commands,h=e(this).addClass("ui-helper-clearfix ui-widget-header elfinder-toolbar"),f={displayTextLabel:!1,labelExcludeUA:["Mobile"],autoHideUA:["Mobile"],showPreferenceButton:"none"},m=function(t){return e.grep(t,function(t){return!e.isPlainObject(t)||(f=Object.assign(f,t),!1)})},g=function(n){var l,c;for(e.each(v,function(e,t){t.detach()}),h.empty(),i=b.length;i--;)if(b[i]){for(r=e('<div class="ui-widget-content ui-corner-all elfinder-buttonset"></div>'),a=b[i].length;a--;)l=b[i][a],n&&n[l]||!(o=u[l])||(s="elfinder"+o.options.ui,!v[l]&&e.fn[s]&&(v[l]=e("<div></div>")[s](o)),v[l]&&(v[l].children(".elfinder-button-text")[d?"show":"hide"](),r.prepend(v[l])));r.children().length&&h.prepend(r),r.children(":gt(0)").before('<span class="ui-widget-content elfinder-toolbar-button-separator"></span>')}(c=u.preference)&&("always"===f.showPreferenceButton||!h.children().length&&"auto"===f.showPreferenceButton)&&(r=e('<div class="ui-widget-content ui-corner-all elfinder-buttonset"></div>'),l="preference",s="elfinder"+o.options.ui,v[l]=e("<div></div>")[s](c),v[l].children(".elfinder-button-text")[d?"show":"hide"](),r.prepend(v[l]),h.append(r)),!h.data("swipeClose")&&h.children().length?h.show():h.hide(),x=h[0].clientHeight,t.trigger("toolbarload").trigger("uiresize")},v={},b=m(n||[]),y=null,w="",x=0,k=[];f.showPreferenceButton=f.showPreferenceButton.toLowerCase(),"none"!==f.displayTextLabel&&(d=t.storage("toolbarTextLabel"),d=null===d?f.displayTextLabel&&(!f.labelExcludeUA||!f.labelExcludeUA.length||!e.grep(f.labelExcludeUA,function(e){return!!t.UA[e]}).length):1==d,k.push({label:t.i18n("textLabel"),icon:"text",callback:function(){d=!d,h.css("height","").find(".elfinder-button-text")[d?"show":"hide"](),t.trigger("uiresize").storage("toolbarTextLabel",d?"1":"0")}})),f.preferenceInContextmenu&&u.preference&&k.push({label:t.i18n("toolbarPref"),icon:"preference",callback:function(){t.exec("preference",void 0,{tab:"toolbar"})}}),k.length&&h.on("contextmenu",function(e){e.stopPropagation(),e.preventDefault(),t.trigger("contextmenu",{raw:k,x:e.pageX,y:e.pageY})}).on("touchstart",function(e){e.originalEvent.touches.length>1||(h.data("tmlongtap")&&clearTimeout(h.data("tmlongtap")),h.removeData("longtap").data("longtap",{x:e.originalEvent.touches[0].pageX,y:e.originalEvent.touches[0].pageY}).data("tmlongtap",setTimeout(function(){h.removeData("longtapTm").trigger({type:"contextmenu",pageX:h.data("longtap").x,pageY:h.data("longtap").y}).data("longtap",{longtap:!0})},500)))}).on("touchmove touchend",function(e){h.data("tmlongtap")&&(("touchend"===e.type||Math.abs(h.data("longtap").x-e.originalEvent.touches[0].pageX)+Math.abs(h.data("longtap").y-e.originalEvent.touches[0].pageY)>4)&&clearTimeout(h.data("tmlongtap")),h.removeData("longtapTm"))}).on("click",function(e){h.data("longtap")&&h.data("longtap").longtap&&(e.stopImmediatePropagation(),e.preventDefault())}).on("touchend click",".elfinder-button",function(e){h.data("longtap")&&h.data("longtap").longtap&&(e.stopImmediatePropagation(),e.preventDefault())}),h.prev().length&&h.parent().prepend(this),g(),t.bind("open sync select toolbarpref",function(){var n,i,a,o=Object.assign({},t.option("disabledFlip")),r=t.storage("toolbarhides");if(!r&&Array.isArray(f.defaultHides)&&(r={},e.each(f.defaultHides,function(){r[this]=!0}),t.storage("toolbarhides",r)),"select"===this.type){if(t.searchStatus.state<2)return;i=t.selected(),i.length&&(o=t.getDisabledCmds(i,!0))}e.each(r,function(e){o[e]||(o[e]=!0)}),Object.keys(t.commandMap).length&&e.each(t.commandMap,function(e,t){"hidden"===t&&(o[e]=!0)}),a=Object.keys(o),y&&y.toString()===a.sort().toString()||(g(a.length?o:null),n=!0),y=a.sort(),(n||w!==JSON.stringify(t.commandMap))&&(w=JSON.stringify(t.commandMap),n||e.each(e("div.elfinder-button"),function(){var t=e(this).data("origin");t&&e(this).after(t).detach()}),Object.keys(t.commandMap).length&&e.each(t.commandMap,function(n,i){var a,o=t._commands[i],r=o?"elfinder"+o.options.ui:null;r&&e.fn[r]&&(a=v[n],a&&(!v[i]&&e.fn[r]&&(v[i]=e("<div></div>")[r](o),v[i]&&(v[i].children(".elfinder-button-text")[d?"show":"hide"](),o.extendsCmd&&v[i].children("span.elfinder-button-icon").addClass("elfinder-button-icon-"+o.extendsCmd))),v[i]&&(a.after(v[i]),v[i].data("origin",a.detach()))))}))}).bind("resize",function(e){p&&cancelAnimationFrame(p),p=requestAnimationFrame(function(){var e=h[0].clientHeight;x!==e&&(x=e,t.trigger("uiresize"))})}),t.UA.Touch&&(c=t.storage("autoHide")||{},"undefined"==typeof c.toolbar&&(c.toolbar=f.autoHideUA&&f.autoHideUA.length>0&&e.grep(f.autoHideUA,function(e){return!!t.UA[e]}).length,t.storage("autoHide",c)),c.toolbar&&t.one("init",function(){t.uiAutoHide.push(function(){h.stop(!0,!0).trigger("toggle",{duration:500,init:!0})})}),t.bind("load",function(){l=e('<div class="elfinder-toolbar-swipe-handle"></div>').hide().appendTo(t.getUI()),"none"!==l.css("pointer-events")&&(l.remove(),l=null)}),h.on("toggle",function(e,n){var i=t.getUI("workzone"),a=h.is(":hidden"),o=i.height(),r=h.height(),s=h.outerHeight(!0),d=s-r,p=Object.assign({step:function(e){i.height(o+(a?(e+d)*-1:r-e)),t.trigger("resize")},always:function(){requestAnimationFrame(function(){h.css("height",""),t.trigger("uiresize"),l&&(a?l.stop(!0,!0).hide():(l.height(n.handleH?n.handleH:""),t.resources.blink(l,"slowonce"))),a&&h.scrollTop("0px"),n.init&&t.trigger("uiautohide")})}},n);h.data("swipeClose",!a).stop(!0,!0).animate({height:"toggle"},p),c.toolbar=!a,t.storage("autoHide",Object.assign(t.storage("autoHide"),{toolbar:c.toolbar}))}).on("touchstart",function(e){h.scrollBottom()>5&&(e.originalEvent._preventSwipeY=!0)}))}),this},e.fn.elfindertree=function(t,n){var i=t.res("class","tree");return this.not("."+i).each(function(){var a,o,r,s,l="class",c=t.UA.Mobile,d=t.res(l,"treeroot"),p=n.openRootOnLoad,u=n.openCwdOnOpen,h=u||n.syncTree,f=t.res(l,"navsubtree"),m=t.res(l,"treedir"),g="span."+m,v=t.res(l,"navcollapse"),b=t.res(l,"navexpand"),y="elfinder-subtree-loaded",w="elfinder-subtree-chksubdir",x=t.res(l,"navarrow"),k=t.res(l,"active"),C=t.res(l,"adroppable"),z=t.res(l,"hover"),T=t.res(l,"disabled"),A=t.res(l,"draggable"),j=t.res(l,"droppable"),O="elfinder-navbar-wrapper-root",S="elfinder-navbar-wrapper-pastable",I="elfinder-navbar-wrapper-uploadable",M=function(e){var t=se.offset().left;return t<=e&&e<=t+se.width()},E={},F=[],D=function(n){var i=[];if(e.each(n,function(e,n){E[n]&&i.push(t.navId2Hash(n)),delete E[n]}),i.length)return t.request({data:{cmd:"subdirs",targets:i,preventDefault:!0}}).done(function(n){n&&n.subdirs&&e.each(n.subdirs,function(e,n){var i=t.navHash2Elm(e);i.removeClass(w),i[n?"addClass":"removeClass"](v)})})},U=null,P=function(){var n=Object.keys(E);n.length&&(U&&U._abort(),a&&clearTimeout(a),F=[],U=t.asyncJob(function(n){return t.isInWindow(e("#"+n))?n:null},n,{numPerOnce:200}).done(function(e){e.length&&(F=e,R())}))},q=0,R=function(){var e,i=n.subdirsMaxConn-q,o=t.maxTargets?Math.min(t.maxTargets,n.subdirsAtOnce):n.subdirsAtOnce;if(a&&cancelAnimationFrame(a),F.length)if(i>0)for(e=0;e<i;e++)F.length&&(q++,D(F.splice(0,o)).always(function(){q--,R()}));else a=requestAnimationFrame(function(){F.length&&R()})},H=t.droppable.drop,_=e.extend(!0,{},t.droppable,{over:function(n,i){var a,o,r=e(this),s=i.helper,l=z+" "+C;return n.stopPropagation(),s.data("dropover",s.data("dropover")+1),r.data("dropover",!0),i.helper.data("namespace")===t.namespace&&t.insideWorkzone(n.pageX,n.pageY)?M(n.clientX)?(s.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus"),r.addClass(z),r.is("."+v+":not(."+b+")")&&r.data("expandTimer",setTimeout(function(){r.is("."+v+"."+z)&&r.children("."+x).trigger("click")},500)),r.is(".elfinder-ro,.elfinder-na")?void r.removeClass(C):(a=t.navId2Hash(r.attr("id")),r.data("dropover",a),e.each(i.helper.data("files"),function(e,n){if(n===a||t.file(n).phash===a&&!i.helper.hasClass("elfinder-drag-helper-plus"))return r.removeClass(l),!1}),s.data("locked")?o="elfinder-drag-helper-plus":(o="elfinder-drag-helper-move",(n.shiftKey||n.ctrlKey||n.metaKey)&&(o+=" elfinder-drag-helper-plus")),r.hasClass(C)&&s.addClass(o),void requestAnimationFrame(function(){r.hasClass(C)&&s.addClass(o)}))):void r.removeClass(l):(r.removeClass(l),void s.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus"))},out:function(t,n){var i=e(this),a=n.helper;t.stopPropagation(),M(t.clientX)&&a.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus"),a.data("dropover",Math.max(a.data("dropover")-1,0)),i.data("expandTimer")&&clearTimeout(i.data("expandTimer")),i.removeData("dropover").removeClass(z+" "+C)},deactivate:function(){e(this).removeData("dropover").removeClass(z+" "+C)},drop:function(e,t){M(e.clientX)&&H.call(this,e,t);
}}),N=e(t.res("tpl","navspinner")),L=t.res("tpl","navdir"),W=t.res("tpl","perms"),B=(t.res("tpl","lock"),t.res("tpl","symlink")),$={},V={id:function(e){return t.navHash2Id(e.hash)},name:function(e){return t.escape(e.i18||e.name)},cssclass:function(e){var i=(e.phash&&!e.isroot?"":d)+" "+m+" "+t.perms2class(e);return e.dirs&&!e.link&&(i+=" "+v)&&e.dirs==-1&&(i+=" "+w),n.getClass&&(i+=" "+n.getClass(e)),e.csscls&&(i+=" "+t.escape(e.csscls)),i},title:function(e){return n.attrTitle?' title="'+t.escape(t.path(e.hash,!0)||e.i18||e.name)+'"':""},root:function(t){var n="";return!t.phash||t.isroot?(n+=" "+O,!t.disabled||t.disabled.length<1?n+=" "+S+" "+I:(e.inArray("paste",t.disabled)===-1&&(n+=" "+S),e.inArray("upload",t.disabled)===-1&&(n+=" "+I)),n):""},permissions:function(e){return e.read&&e.write?"":W},symlink:function(e){return e.alias?B:""},style:function(e){return e.icon?t.getIconStyle(e):""}},K=function(e){return L.replace(/(?:\{([a-z]+)\})/gi,function(t,n){var i=V[n]?V[n](e):e[n]||"";return"id"===n&&e.dirs==-1&&(E[i]=i),i})},X=function(n,i){return e.map(n||[],function(e){return"directory"!==e.mime||i&&!t.navHash2Elm(e.hash).length?null:e})},J=function(e){return e?t.navHash2Elm(e).next("."+f):oe},G=function(e,n){for(var i,a=e.children(":first");a.length;){if(i=t.file(t.navId2Hash(a.children("[id]").attr("id"))),(i=t.file(t.navId2Hash(a.children("[id]").attr("id"))))&&Q(n,i)<0)return a;a=a.next()}return e.children("button.elfinder-navbar-pager-next")},Y=function(i){for(var a,o,r,s,l,d,p,u=i.length,h=[],f=u,m=e(),g={},v=t.cwd(),b=function(i,a,o,r){var s={},l=0,d=t.newAPI?Math.min(1e4,Math.max(10,n.subTreeMax)):1e4,p=function(){s={},e.each(a,function(e,t){s[t.hash]=e})},u=function(t){"prepare"===t?e.each(a,function(e,t){t.node&&i.append(t.node.hide())}):"done"===t&&e.each(a,function(e,t){t.node&&t.node.detach().show()})},h=function(t,n){var i;return t.stopPropagation(),n.select?void g(f(n.select)):n.change?void u(n.change):(n.removed&&n.removed.length&&(a=e.grep(a,function(e){return n.removed.indexOf(e.hash)===-1||(!i&&(i=!0),!1)})),n.added&&n.added.length&&(a=a.concat(e.grep(n.added,function(e){return void 0===s[e.hash]&&(!i&&(i=!0),!0)}))),void(i&&(a.sort(Q),p(),g(l))))},f=function(e){if(void 0!==s[e])return Math.floor(s[e]/d)*d},m=t.navId2Hash(i.prev("[id]").attr("id")),g=function(n,o){var r,s,u,y,w,x,k,C,z=[],T={};delete $[m],l=n,i.off("update."+t.namespace,h),a.length>d&&(i.on("update."+t.namespace,h),void 0===n&&(u=0,p(),n=f(v.hash),void 0===n&&(n=0)),y=a.slice(n,n+d),$[m]=i,w=n?Math.max(-1,n-d):-1,x=n+d>=a.length?0:n+d,r=Math.ceil(a.length/d),s=Math.ceil(n/d)),e.each(y||a,function(e,t){z.push(K(t)),t.node&&(T[t.hash]=t.node)}),k=w>-1?e('<button class="elfinder-navbar-pager elfinder-navbar-pager-prev"></button>').text(t.i18n("btnPrevious",s,r)).button({icons:{primary:"ui-icon-caret-1-n"}}).on("click",function(e){e.preventDefault(),e.stopPropagation(),g(w,"up")}):e(),C=x?e('<button class="elfinder-navbar-pager elfinder-navbar-pager-next"></button>').text(t.i18n("btnNext",s+2,r)).button({icons:{primary:"ui-icon-caret-1-s"}}).on("click",function(e){e.preventDefault(),e.stopPropagation(),g(x,"down")}):e(),b(),i.empty()[y?"addClass":"removeClass"]("elfinder-navbar-hasmore").append(k,z.join(""),C),e.each(T,function(e,n){t.navHash2Elm(e).parent().replaceWith(n)}),o&&Z(t.navHash2Id(y["up"===o?y.length-1:0].hash)),!c&&t.lazy(function(){ie(null,i)})},b=function(){e.each(i.children(".elfinder-navbar-wrapper"),function(n,i){var o,r,l=e(i),c=l.children("[id]:first");c.hasClass(y)&&(o=t.navId2Hash(c.attr("id")),o&&void 0!==(r=s[o])&&(a[r].node=l.detach()))})};g()},w={},x=[],k={};f--;)a=i[f],g[a.hash]||t.navHash2Elm(a.hash).length||(g[a.hash]=!0,(o=J(a.phash)).length?(p=a.phash||"treeroot","undefined"==typeof k[p]&&(k[p]=o.children(":last")),s=!k[p].length,a.phash&&(s||o.hasClass("elfinder-navbar-hasmore")||(r=G(o,a)).length)?s?(w[a.phash]||(w[a.phash]=[]),w[a.phash].push(a)):r?(d=K(a),r.before(d),!c&&(m=m.add(d))):x.push(a):(d=K(a),s?o.prepend(d):k[p].after(d),a.phash&&!a.isroot||(l=t.navHash2Elm(a.hash).parent()),!c&&ie(null,l))):h.push(a));return Object.keys(w).length&&e.each(w,function(e,t){var n=J(e);t.sort(Q),b(n,t)}),x.length&&o.trigger("update."+t.namespace,{added:x}),h.length&&h.length<u?void Y(h):void(!c&&m.length&&t.lazy(function(){ie(m)}))},Q=function(e,n){if(t.sortAlsoTreeview){var i,a="asc"==t.sortOrder,o=t.sortType,r=t.sortRules;return i=a?r[t.sortType](e,n):r[t.sortType](n,e),"name"!==o&&0===i?i=a?r.name(e,n):r.name(n,e):i}return t.sortRules.name(e,n)},Z=function(i){var a,r,s,l,c,d,p=e.Deferred();return o&&clearTimeout(o),o=setTimeout(function(){a=e(document.getElementById(i||t.navHash2Id(t.cwd().hash))),a.length?((u?a:a.parent()).parents(".elfinder-navbar-wrapper").children("."+y).addClass(b).next("."+f).show(),r=oe.parent().stop(!1,!0),s=r.offset().top,l=r.height(),c=s+l-a.outerHeight(),d=a.offset().top,d<s||d>c?r.animate({scrollTop:r.scrollTop()+d-s-l/3},{duration:n.durations.autoScroll,complete:function(){p.resolve()}}):p.resolve()):p.reject()},100),p},ee=function(e){var n,i,a,o=e||t.cwd(),r=o.hash?[o.hash]:[];for(i=t.root(o.hash),a=t.file(i);a&&(n=a.phash)&&(r.unshift(n),i=t.root(n),a=t.file(i),!t.navHash2Elm(a.hash).hasClass(y)););return r},te=function(e){var n=e||t.cwd(),i=n.hash,a=t.navHash2Elm(i);if(!a.length){for(;n&&n.phash;)$[n.phash]&&!t.navHash2Elm(n.hash).length&&$[n.phash].trigger("update."+t.namespace,{select:n.hash}),n=t.file(n.phash);a=t.navHash2Elm(i)}return a},ne=function(n,i){var a,o,s=t.cwd(),l=s.hash,c=void 0===i?h:i,d=function(n){var i,r,s=e.Deferred(),l=[],d=ee(n),p=function(e,n,i){var a={cmd:e,target:n};return i&&(a.until=i),t.request({data:a,preventFail:!0})};return l=e.map(d,function(e){var n,a,o=t.file(e),r=!!o&&t.isRoot(o),s=t.navHash2Elm(e),l=function(e,n){var i,a,o=n||1;return a=!!(i=t.file(e))&&i.phash,a&&o>1?l(a,--o):a},c=function(){var i=l(e);for(n=i;i&&!t.navHash2Elm(i).hasClass(y);)n=i,i=l(i);return i||(n=void 0,i=t.root(e)),i}();return s.hasClass(y)||!r&&o&&t.navHash2Elm(o.phash).hasClass(y)?null:(r||c===l(e)||c===l(e,2)?(n=void 0,a="tree",r||(e=l(e))):a="parents",i||(i="tree"===a?e:c),p(a,e,n))}),l.length?(te(t.file(i)),r=t.navHash2Id(i),c&&Z(r),a=e("#"+r),o=e(t.res("tpl","navspinner")).insertBefore(a.children("."+x)),a.removeClass(v),e.when.apply(e,l).done(function(){var e,t,n,i={};if(t=arguments.length,t>0)for(n=0;n<t;n++)e=arguments[n].tree||[],i[d[n]]=Object.assign([],X(e));s.resolve(i)}).fail(function(){s.reject()}),s):s.resolve()},u=function(i,o){var r,l=function(){p&&a&&(J(a.hash).show().prev(g).addClass(b),p=!1),c?Z().done(P):P()};i&&e.each(i,function(e,n){n&&Y(n),te(t.file(e)),n&&ae(n,y)}),n&&(t.api<2.1&&n.push(s),Y(n)),r=te(),r.hasClass(k)||(oe.find(g+"."+k).removeClass(k),r.addClass(k)),r.parents(".elfinder-navbar-wrapper").children("."+m).addClass(y),i?t.lazy(l).done(function(){o.resolve()}):(l(),o.resolve())},f=function(e){a&&(o.remove(),a.addClass(v+(e?"":" "+y)))},w=e.Deferred();return t.navHash2Elm(l).length?u(void 0,w):(r=!0,d().done(function(e){u(e,w),f()}).fail(function(){f(!0),w.reject()}).always(function(){r=!1})),t.trigger("treesync",w),w},ie=function(n,i){n||(i&&!i.closest("div."+O).hasClass(I)||(i||oe.find("div."+I)).find(g+":not(.elfinder-ro,.elfinder-na)").addClass("native-droppable"),n=!i||i.closest("div."+O).hasClass(S)?(i||oe.find("div."+S)).find(g+":not(."+j+")"):e(),i&&i.children("div."+O).each(function(){ie(null,e(this))})),n.length&&t.asyncJob(function(t){e(t).droppable(_)},e.makeArray(n),{interval:20,numPerOnce:100})},ae=function(n,i){var a=i==y?"."+v+":not(."+y+")":":not(."+v+")";e.each(n,function(n,o){t.navHash2Elm(o.phash).filter(a).filter(function(){return e.grep(e(this).next("."+f).children(),function(t){return!e(t).children().hasClass(d)}).length>0}).addClass(i)})},oe=e(this).addClass(i).on("mouseenter mouseleave",g,function(i){var a="mouseenter"===i.type;if(!a||!re){var o,r,s=e(this);s.hasClass(C+" "+T)||(c||!a||s.data("dragRegisted")||s.hasClass(d+" "+A+" elfinder-na elfinder-wo")||(s.data("dragRegisted",!0),t.isCommandEnabled("copy",o=t.navId2Hash(s.attr("id")))&&s.draggable(t.draggable)),s.toggleClass(z,a)),a&&n.attrTitle&&(r=t.file(o||t.navId2Hash(s.attr("id"))),r.isroot||s.attr("title")!==(r.i18||r.name)||s.attr("title",t.path(o,!0)))}}).on("dragenter",g,function(t){if(t.originalEvent.dataTransfer){var n=e(this);n.addClass(z),n.is("."+v+":not(."+b+")")&&n.data("expandTimer",setTimeout(function(){n.is("."+v+"."+z)&&n.children("."+x).trigger("click")},500))}}).on("dragleave",g,function(t){if(t.originalEvent.dataTransfer){var n=e(this);n.data("expandTimer")&&clearTimeout(n.data("expandTimer")),n.removeClass(z)}}).on("click",g,function(n){var i=e(this),a=t.navId2Hash(i.attr("id"));t.file(a);return i.data("longtap")?(i.removeData("longtap"),void n.stopPropagation()):(i.hasClass(k)||(oe.find(g+"."+k).removeClass(k),i.addClass(k)),void(a==t.cwd().hash||i.hasClass(T)?(i.hasClass(v)&&i.children("."+x).trigger("click"),t.select({selected:[a],origin:"navbar"})):t.exec("open",a).done(function(){t.one("opendone",function(){t.select({selected:[a],origin:"navbar"})})})))}).on("touchstart",g,function(n){if(!(n.originalEvent.touches.length>1)){var i,a=n.originalEvent;return"INPUT"===n.target.nodeName?void n.stopPropagation():void(i=e(this).addClass(z).removeData("longtap").data("tmlongtap",setTimeout(function(e){i.data("longtap",!0),t.trigger("contextmenu",{type:"navbar",targets:[t.navId2Hash(i.attr("id"))],x:a.touches[0].pageX,y:a.touches[0].pageY})},500)))}}).on("touchmove touchend",g,function(t){return"INPUT"===t.target.nodeName?void t.stopPropagation():(clearTimeout(e(this).data("tmlongtap")),e(this).removeData("tmlongtap"),void("touchmove"==t.type&&e(this).removeClass(z)))}).on("click",g+"."+v+" ."+x,function(i){var a,o=e(this),r=o.parent(g),s=r.next("."+f),l=e.Deferred(),c=30;i.stopPropagation(),r.hasClass(y)?(r.toggleClass(b),t.lazy(function(){a=r.hasClass(b)?s.children().length+s.find("div.elfinder-navbar-subtree[style*=block]").children().length:s.find("div:visible").length,a>c?(s.toggle(),t.draggingUiHelper&&t.draggingUiHelper.data("refreshPositions",1),P()):s.stop(!0,!0)[r.hasClass(b)?"slideDown":"slideUp"](n.durations.slideUpDown,function(){t.draggingUiHelper&&t.draggingUiHelper.data("refreshPositions",1),P()})}).always(function(){l.resolve()})):(N.insertBefore(o),r.removeClass(v),t.request({cmd:"tree",target:t.navId2Hash(r.attr("id"))}).done(function(e){Y(Object.assign([],X(e.tree))),s.children().length&&(r.addClass(v+" "+b),s.children().length>c?(s.show(),t.draggingUiHelper&&t.draggingUiHelper.data("refreshPositions",1),P()):s.stop(!0,!0).slideDown(n.durations.slideUpDown,function(){t.draggingUiHelper&&t.draggingUiHelper.data("refreshPositions",1),P()}))}).always(function(e){N.remove(),r.addClass(y),t.one("treedone",function(){l.resolve()})})),o.data("dfrd",l)}).on("contextmenu",g,function(n){var i=e(this);return i.find("input:text").length?void n.stopPropagation():(n.preventDefault(),i.data("tmlongtap")||t.trigger("contextmenu",{type:"navbar",targets:[t.navId2Hash(e(this).attr("id"))],x:n.pageX,y:n.pageY}),i.addClass("ui-state-hover"),t.getUI("contextmenu").children().on("mouseenter",function(){i.addClass("ui-state-hover")}),void t.bind("closecontextmenu",function(){i.removeClass("ui-state-hover")}))}).on("scrolltoview",g,function(n,i){var a=e(this);Z(a.attr("id")).done(function(){i&&"undefined"!==i.blink&&!i.blink||t.resources.blink(a,"lookme")})}).on("create."+t.namespace,function(n,i){var a=J(i.phash),o=i.move||!1,r=e(K(i)).addClass("elfinder-navbar-wrapper-tmp"),s=t.selected();o&&s.length&&t.trigger("lockfiles",{files:s}),a.prepend(r)}),re=!1,se=t.getUI("navbar").append(oe).show().on("scroll",function(){re=!0,s&&cancelAnimationFrame(s),s=requestAnimationFrame(function(){re=!1,P()})}),le=t.sortAlsoTreeview;t.open(function(e){var n=e.data,i=X(n.files),a=t.getUI("contextmenu");n.init&&oe.empty(),t.UA.iOS&&se.removeClass("overflow-scrolling-touch").addClass("overflow-scrolling-touch"),i.length?t.lazy(function(){a.data("cmdMaps")||a.data("cmdMaps",{}),Y(i),ae(i,y),ne(i)}):ne()}).add(function(e){var t=X(e.data.added);t.length&&(Y(t),ae(t,v))}).change(function(n){if(!r){var i,a,o,s,l,d,p,u,h,m,v,w,x=X(n.data.changed,!0),k=x.length,C=k;e();for(e.each($,function(e,n){n.trigger("update."+t.namespace,{change:"prepare"})});C--;)if(i=x[C],a=i.phash,(o=t.navHash2Elm(i.hash)).length){if(v=o.parent(),a){if(l=o.closest("."+f),d=J(a),p=o.parent().next(),u=G(d,i),!d.length)continue;d[0]===l[0]&&p.get(0)===u.get(0)||(u.length?u.before(v):d.append(v))}h=o.hasClass(b),m=o.hasClass(y),s=e(K(i)),o.replaceWith(s.children(g)),!c&&ie(null,v),i.dirs&&(h||m)&&(o=t.navHash2Elm(i.hash))&&o.next("."+f).children().length&&(h&&o.addClass(b),m&&o.addClass(y)),w|=i.dirs==-1}w&&P(),e.each($,function(e,n){n.trigger("update."+t.namespace,{change:"done"})}),k&&ne(void 0,!1)}}).remove(function(n){var i,a,o,r=n.data.removed,s=r.length;for(e.each($,function(e,n){n.trigger("update."+t.namespace,{removed:r}),n.trigger("update."+t.namespace,{change:"prepare"})});s--;)(i=t.navHash2Elm(r[s])).length&&(o=!0,a=i.closest("."+f),i.parent().detach(),a.children().length||a.hide().prev(g).removeClass(v+" "+b+" "+y));o&&t.getUI("navbar").children(".ui-resizable-handle").trigger("resize"),e.each($,function(e,n){n.trigger("update."+t.namespace,{change:"done"})})}).bind("lockfiles unlockfiles",function(n){var i="lockfiles"==n.type,a=!!n.data.helper&&n.data.helper.data("locked"),o=i&&!a?"disable":"enable",r=e.grep(n.data.files||[],function(e){var n=t.file(e);return!(!n||"directory"!=n.mime)});e.each(r,function(e,n){var r=t.navHash2Elm(n);r.length&&!a&&(r.hasClass(A)&&r.draggable(o),r.hasClass(j)&&r.droppable(o),r[i?"addClass":"removeClass"](T))})}).bind("sortchange",function(){if(t.sortAlsoTreeview||le!==t.sortAlsoTreeview){var n,i,a=[],o={},r={},s="",l=!1;t.lazy(function(){n=X(t.files()),le=t.sortAlsoTreeview,oe.empty(),Y(e.map(t.roots,function(e){var n=t.file(e);return n&&!n.phash?n:null})),Object.keys($).length?(a=ee(),a.length>1?(e.each(a,function(e,n){var i=t.file(t.root(n)).volumeid;0===e&&(s=i),r[i]=n,o[n]=[]}),e.each(n,function(e,t){return t.volumeid?void o[r[t.volumeid]||r[s]].push(t):(l=!0,!1)})):l=!0,l?e.each(a,function(e,a){Y(n),i=te(t.file(a)),ae(n,y)}):e.each(o,function(e,n){Y(n),i=te(t.file(e)),ae(n,y)})):(Y(n),i=te(),ae(n,y)),ne()},100)}})}),this},e.fn.elfinderuploadbutton=function(t){return this.each(function(){var n,i=t.fm,a=e(this).elfinderbutton(t).off("click"),o=e("<form></form>").appendTo(a),r=e('<input type="file" multiple="true" title="'+t.fm.i18n("selectForUpload")+'"/>').on("change",function(){var t=e(this);t.val()&&(i.exec("upload",{input:t.remove()[0]},void 0,i.cwd().hash),r.clone(!0).appendTo(o))}).on("dragover",function(e){e.originalEvent.dataTransfer.dropEffect="copy"});o.append(r.clone(!0)),t.change(function(){n&&cancelAnimationFrame(n),n=requestAnimationFrame(function(){var e=t.disabled();o.is("visible")?!e&&o.hide():e&&o.show()})}).change()})},e.fn.elfinderviewbutton=function(t){return this.each(function(){var n,i=e(this).elfinderbutton(t),a=i.children(".elfinder-button-icon"),o=i.children(".elfinder-button-text");t.change(function(){n&&cancelAnimationFrame(n),n=requestAnimationFrame(function(){var e="icons"==t.value;a.toggleClass("elfinder-button-icon-view-list",e),t.className=e?"view-list":"",t.title=t.fm.i18n(e?"viewlist":"viewicons"),i.attr("title",t.title),o.html(t.title)})})})},e.fn.elfinderworkzone=function(t){var n="elfinder-workzone";return this.not("."+n).each(function(){var i,a=e(this).addClass(n),o=Math.round(a.height()),r=a.parent(),s=function(){i=a.outerHeight(!0)-a.height()},l=function(s){var l=r.height()-i,c=r.attr("style"),d=Math.round(a.height());s&&(s.preventDefault(),s.stopPropagation()),r.css("overflow","hidden").children(":visible:not(."+n+")").each(function(){var t=e(this);"absolute"!=t.css("position")&&"fixed"!=t.css("position")&&(l-=t.outerHeight(!0))}),r.attr("style",c||""),l=Math.max(0,Math.round(l)),o===l&&d===l||(o=Math.round(a.height()),a.height(l),t.trigger("wzresize"))},c=function(){i=a.outerHeight(!0)-a.height(),l()};s(),r.on("resize."+t.namespace,l),t.one("cssloaded",c).bind("uiresize",l).bind("themechange",s)}),this},i.prototype.commands.archive=function(){var t,n=this,i=n.fm,a=[];this.variants=[],this.disableOnSearch=!1,this.nextAction={},i.bind("open reload",function(){n.variants=[],e.each(a=i.option("archivers").create||[],function(e,t){n.variants.push([t,i.mime2kind(t)])}),n.change()}),this.getstate=function(n){var o,r=this.files(n),s=r.length,l=s&&!i.isRoot(r[0])&&(i.file(r[0].phash)||{}).write&&!e.grep(r,function(e){return!e.read}).length;return l&&i.searchStatus.state>1&&(o=i.cwd().volumeid,l=s===e.grep(r,function(e){return!(!e.read||0!==e.hash.indexOf(o))}).length),l&&!this._disabled&&a.length&&(s||t&&"pending"==t.state())?0:-1},this.exec=function(o,r){var s,l,c=this.files(o),d=c.length,p=r||a[0],u=i.file(c[0].phash)||null,h=["errArchive","errPerm","errCreatingTempDir","errFtpDownloadFile","errFtpUploadFile","errFtpMkdir","errArchiveExec","errExtractExec","errRm"];if(t=e.Deferred().fail(function(e){e&&i.error(e)}),!d||!a.length||e.inArray(p,a)===-1)return t.reject();if(!u.write)return t.reject(h);for(s=0;s<d;s++)if(!c[s].read)return t.reject(h);return n.mime=p,n.prefix=(d>1?"Archive":c[0].name)+(i.option("archivers").createext?"."+i.option("archivers").createext[p]:""),n.data={targets:n.hashes(o),type:p},i.cwd().hash!==u.hash?l=i.exec("open",u.hash).done(function(){i.one("cwdrender",function(){i.selectfiles({files:o}),t=e.proxy(i.res("mixin","make"),n)()})}):(i.selectfiles({files:o}),t=e.proxy(i.res("mixin","make"),n)()),t}},(i.prototype.commands.back=function(){this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+left backspace"}],this.getstate=function(){return this.fm.history.canBack()?0:-1},this.exec=function(){return this.fm.history.back()}}).prototype={forceLoad:!0},i.prototype.commands.chmod=function(){this.updateOnSelect=!1;var t=this.fm,n={0:"owner",1:"group",2:"other"},i={read:t.i18n("read"),write:t.i18n("write"),execute:t.i18n("execute"),perm:t.i18n("perm"),kind:t.i18n("kind"),files:t.i18n("files")},a=function(e){return!isNaN(parseInt(e,8)&&parseInt(e,8)<=511)||e.match(/^([r-][w-][x-]){3}$/i)};this.tpl={main:'<div class="ui-helper-clearfix elfinder-info-title"><span class="elfinder-cwd-icon {class} ui-corner-all"></span>{title}</div>{dataTable}',itemTitle:'<strong>{name}</strong><span id="elfinder-info-kind">{kind}</span>',groupTitle:"<strong>{items}: {num}</strong>",dataTable:'<table id="{id}-table-perm"><tr><td>{0}</td><td>{1}</td><td>{2}</td></tr></table><div class="">'+i.perm+': <input class="elfinder-tabstop elfinder-focus" id="{id}-perm" type="text" size="4" maxlength="3" value="{value}"></div>',fieldset:'<fieldset id="{id}-fieldset-{level}"><legend>{f_title}{name}</legend><input type="checkbox" value="4" class="elfinder-tabstop" id="{id}-read-{level}-perm"{checked-r}> <label for="{id}-read-{level}-perm">'+i.read+'</label><br><input type="checkbox" value="6" class="elfinder-tabstop" id="{id}-write-{level}-perm"{checked-w}> <label for="{id}-write-{level}-perm">'+i.write+'</label><br><input type="checkbox" value="5" class="elfinder-tabstop" id="{id}-execute-{level}-perm"{checked-x}> <label for="{id}-execute-{level}-perm">'+i.execute+"</label><br>"},this.shortcuts=[{}],this.getstate=function(e){var t=this.fm;return e=e||t.selected(),0==e.length&&(e=[t.cwd().hash]),this.checkstate(this.files(e))?0:-1},this.checkstate=function(t){var n=t.length;if(!n)return!1;var i=e.grep(t,function(e){return!(!(e.isowner&&e.perm&&a(e.perm))||1!=n&&"directory"==e.mime)}).length;return n==i},this.exec=function(t){var o=this.hashes(t),r=this.files(o);r.length||(o=[this.fm.cwd().hash],r=this.files(o));var s,l,c=this.fm,d=e.Deferred().always(function(){c.enable()}),p=this.tpl,u=r.length,h=r[0],f=c.namespace+"-perm-"+h.hash,m=p.main,g=' checked="checked"',v=function(){var e={};return e[c.i18n("btnApply")]=b,e[c.i18n("btnCancel")]=function(){A.elfinderdialog("close")},e},b=function(){var t,n=e.trim(e("#"+f+"-perm").val());return!!a(n)&&(A.elfinderdialog("close"),t={cmd:"chmod",targets:o,mode:n},void c.request({data:t,notify:{type:"chmod",cnt:u}}).fail(function(e){d.reject(e)}).done(function(n){n.changed&&n.changed.length&&(n.undo={cmd:"chmod",callback:function(){var t=[];return e.each(j,function(e,n){t.push(c.request({data:{cmd:"chmod",targets:n,mode:e},notify:{type:"undo",cnt:n.length}}))}),e.when.apply(null,t)}},n.redo={cmd:"chmod",callback:function(){return c.request({data:t,notify:{type:"redo",cnt:o.length}})}}),d.resolve(n)}))},y=function(){for(var t,i="",a=0;a<3;a++)t=0,e("#"+f+"-read-"+n[a]+"-perm").is(":checked")&&(t=4|t),e("#"+f+"-write-"+n[a]+"-perm").is(":checked")&&(t=2|t),e("#"+f+"-execute-"+n[a]+"-perm").is(":checked")&&(t=1|t),i+=t.toString(8);e("#"+f+"-perm").val(i)},w=function(t){for(var i,a=0;a<3;a++)i=parseInt(t.slice(a,a+1),8),e("#"+f+"-read-"+n[a]+"-perm").prop("checked",!1),e("#"+f+"-write-"+n[a]+"-perm").prop("checked",!1),e("#"+f+"-execute-"+n[a]+"-perm").prop("checked",!1),4==(4&i)&&e("#"+f+"-read-"+n[a]+"-perm").prop("checked",!0),2==(2&i)&&e("#"+f+"-write-"+n[a]+"-perm").prop("checked",!0),1==(1&i)&&e("#"+f+"-execute-"+n[a]+"-perm").prop("checked",!0);y()},x=function(e){for(var t,n,i,a="777",o="",r=e.length,s=0;s<r;s++){t=z(e[s].perm),j[t]||(j[t]=[]),j[t].push(e[s].hash),o="";for(var l=0;l<3;l++)n=parseInt(t.slice(l,l+1),8),i=parseInt(a.slice(l,l+1),8),4!=(4&n)&&4==(4&i)&&(i-=4),2!=(2&n)&&2==(2&i)&&(i-=2),1!=(1&n)&&1==(1&i)&&(i-=1),o+=i.toString(8);a=o}return a},k=function(e){return e?":"+e:""},C=function(e,t){for(var a,o,r="",s=p.dataTable,l=0;l<3;l++)a=parseInt(e.slice(l,l+1),8),r+=a.toString(8),o=p.fieldset.replace("{f_title}",c.i18n(n[l])).replace("{name}",k(t[n[l]])).replace(/\{level\}/g,n[l]),s=s.replace("{"+l+"}",o).replace("{checked-r}",4==(4&a)?g:"").replace("{checked-w}",2==(2&a)?g:"").replace("{checked-x}",1==(1&a)?g:"");return s=s.replace("{value}",r).replace("{valueCaption}",i.perm)},z=function(e){if(isNaN(parseInt(e,8))){for(var t=e.split(""),n=[],i=0,a=t.length;i<a;i++)0===i||3===i||6===i?t[i].match(/[r]/i)?n.push(1):t[i].match(/[-]/)&&n.push(0):1===i||4===i||7===i?t[i].match(/[w]/i)?n.push(1):t[i].match(/[-]/)&&n.push(0):t[i].match(/[x]/i)?n.push(1):t[i].match(/[-]/)&&n.push(0);n.splice(3,0,","),n.splice(7,0,",");for(var o=n.join(""),r=o.split(","),s=[],l=0,c=r.length;l<c;l++){var d=parseInt(r[l],2).toString(8);s.push(d)}e=s.join("")}else e=parseInt(e,8).toString(8);return e},T={title:this.title,width:"auto",buttons:v(),close:function(){e(this).elfinderdialog("destroy")}},A=c.getUI().find("#"+f),j={},O="";return A.length?(A.elfinderdialog("toTop"),e.Deferred().resolve()):(m=m.replace("{class}",u>1?"elfinder-cwd-icon-group":c.mime2class(h.mime)),u>1?s=p.groupTitle.replace("{items}",c.i18n("items")).replace("{num}",u):(s=p.itemTitle.replace("{name}",h.name).replace("{kind}",c.mime2kind(h)),O=c.tmb(h)),l=C(x(r),1==r.length?r[0]:{}),m=m.replace("{title}",s).replace("{dataTable}",l).replace(/{id}/g,f),A=this.fmDialog(m,T),A.attr("id",f),O&&e("<img/>").on("load",function(){A.find(".elfinder-cwd-icon").addClass(O.className).css("background-image","url('"+O.url+"')")}).attr("src",O.url),e("#"+f+"-table-perm :checkbox").on("click",function(){y("perm")}),e("#"+f+"-perm").on("keydown",function(t){var n=t.keyCode;if(n==e.ui.keyCode.ENTER)return t.stopPropagation(),void b()}).on("focus",function(t){e(this).trigger("select")}).on("keyup",function(t){3==e(this).val().length&&(e(this).trigger("select"),w(e(this).val()))}),d)}},i.prototype.commands.colwidth=function(){this.alwaysEnabled=!0,this.updateOnSelect=!1,this.getstate=function(){return"fixed"===this.fm.getUI("cwd").find("table").css("table-layout")?0:-1},this.exec=function(){return this.fm.getUI("cwd").trigger("colwidth"),e.Deferred().resolve()}},i.prototype.commands.copy=function(){this.shortcuts=[{pattern:"ctrl+c ctrl+insert"}],this.getstate=function(t){var n=this.files(t),i=n.length;return i&&e.grep(n,function(e){return!!e.read}).length==i?0:-1},this.exec=function(t){var n=this.fm,i=e.Deferred().fail(function(e){n.error(e)});return e.each(this.files(t),function(e,t){if(!t.read)return!i.reject(["errCopy",t.name,"errPerm"])}),"rejected"==i.state()?i:i.resolve(n.clipboard(this.hashes(t)))}},i.prototype.commands.cut=function(){var t=this.fm;this.shortcuts=[{pattern:"ctrl+x shift+insert"}],this.getstate=function(n){var i=this.files(n),a=i.length;return a&&e.grep(i,function(e){return!(!e.read||e.locked||t.isRoot(e))}).length==a?0:-1},this.exec=function(n){var i=e.Deferred().fail(function(e){t.error(e)});return e.each(this.files(n),function(e,n){return!n.read||n.locked||t.isRoot(n)?!i.reject(["errCopy",n.name,"errPerm"]):n.locked?!i.reject(["errLocked",n.name]):void 0}),"rejected"==i.state()?i:i.resolve(t.clipboard(this.hashes(n),!0))}},i.prototype.commands.zipdl=function(){},i.prototype.commands.download=function(){var t=this,n=this.fm,i=null,a=!1,o=!1,r=!1,s=window.location.pathname||"/",l=function(r,s){var l,c;if(null!==i&&(n.searchStatus.state>1?o=n.searchStatus.mixed:n.leafRoots[n.cwd().hash]&&(l=n.cwd().volumeid,e.each(r,function(e,t){if(0!==t.indexOf(l))return o=!0,!1})),a=n.isCommandEnabled("zipdl",r[0])),o){if(c=i?"zipdl":"download",r=e.grep(r,function(e){var t=n.file(e),a=!(!t||!i&&"directory"===t.mime||!n.isCommandEnabled(c,e));return t&&s&&!a&&n.cwdHash2Elm(t.hash).trigger("unselect"),a}),!r.length)return[]}else if(!n.isCommandEnabled("download",r[0]))return[];return e.grep(t.files(r),function(e){var t=!(!e.read||!a&&"directory"==e.mime);return s&&!t&&n.cwdHash2Elm(e.hash).trigger("unselect"),t})};this.linkedCmds=["zipdl"],this.shortcuts=[{pattern:"shift+enter"}],this.getstate=function(e){var t=this.hashes(e),i=t.length,o=this.options.maxRequests||10;return i<1?-1:(i=l(t).length,i&&(a||i<=o&&(!n.UA.IE&&!n.UA.Mobile||1==i))?0:-1)},n.bind("contextmenu",function(n){var i,a,o=t.fm,r=null,s=function(t){var n=t.url||o.url(t.hash);return{icon:"link",node:e("<a></a>").attr({href:n,target:"_blank",title:o.i18n("link")}).text(t.name).on("mousedown click touchstart touchmove touchend contextmenu",function(e){e.stopPropagation()}).on("dragstart",function(n){var i=n.dataTransfer||n.originalEvent.dataTransfer||null;if(r=null,i){var a=function(t){var n,i=t.mime,a=o.tmb(t);return n='<div class="elfinder-cwd-icon '+o.mime2class(i)+' ui-corner-all"></div>',a&&(n=e(n).addClass(a.className).css("background-image","url('"+a.url+"')").get(0).outerHTML),n};i.effectAllowed="copyLink",i.setDragImage&&(r=e('<div class="elfinder-drag-helper html5-native">').append(a(t)).appendTo(e(document.body)),i.setDragImage(r.get(0),50,47)),o.UA.IE||(i.setData("elfinderfrom",window.location.href+t.phash),i.setData("elfinderfrom:"+i.getData("elfinderfrom"),""))}}).on("dragend",function(e){r&&r.remove()})}};if(t.extra=null,n.data&&(i=n.data.targets||[],1===i.length&&(a=o.file(i[0]))&&"directory"!==a.mime))if("1"!=a.url)t.extra=s(a);else{var l;t.extra={icon:"link",node:e("<a></a>").attr({href:"#",title:o.i18n("getLink"),draggable:"false"}).text(a.name).on("click touchstart",function(e){if(!("touchstart"===e.type&&e.originalEvent.touches.length>1)){var t=l.parent();e.stopPropagation(),e.preventDefault(),t.removeClass("ui-state-disabled").addClass("elfinder-button-icon-spinner"),o.request({data:{cmd:"url",target:a.hash},preventDefault:!0}).always(function(e){if(t.removeClass("elfinder-button-icon-spinner"),e.url){var n=o.file(a.hash);n.url=e.url,l.replaceWith(s(a).node)}else t.addClass("ui-state-disabled")})}})},l=t.extra.node,l.ready(function(){requestAnimationFrame(function(){l.parent().addClass("ui-state-disabled").css("pointer-events","auto")})})}}).one("open",function(){n.api>=2.1012&&(i=n.getCommand("zipdl")),r=n.cookieEnabled&&n.api>2.1038&&!n.isCORS}),this.exec=function(n){var i,c,d,p,u,h,f,m,g,v=this.hashes(n),b=this.fm,y=(b.options.url,l(v,!0)),w=e.Deferred(),x="",k={},C=!1,z=function(n){return function(){var i,a,o,r=e.Deferred(),s=b.file(b.root(n[0])),l=1===n.length,d=s?s.i18||s.name:null;return l?(i=b.file(n[0]))&&(a=i.i18||i.name):(e.each(n,function(){var e=b.file(this);return!e||o&&o!==e.phash?(o=null,!1):void(o=e.phash)}),o&&(i=b.file(o))&&(a=(i.i18||i.name)+"-"+n.length)),a&&(d=a),d&&(d=" ("+d+")"),b.request({data:{cmd:"zipdl",targets:n},notify:{type:"zipdl",cnt:1,hideCnt:!0,msg:b.i18n("ntfzipdl")+d},cancel:!0,eachCancel:!0,preventDefault:!0}).done(function(i){var o,s,l,d,u,h,f={},m="dlw"+ +new Date,g=function(n){l=e("<a></a>").attr("href",n).attr("download",b.escape(a)).on("click",function(){r.resolve(),s&&s.elfinderdialog("destroy")}),C?(l.attr("target","_blank").append('<span class="elfinder-button-icon elfinder-button-icon-download"></span>'+b.escape(a)),f[b.i18n("btnCancel")]=function(){s.elfinderdialog("destroy")},s=t.fmDialog(l,{title:b.i18n("link"),buttons:f,width:"200px",destroyOnClose:!0,close:function(){"resolved"!==r.state()&&r.resolve()}})):(T(l.hide().appendTo("body").get(0)),l.remove())};i.error?(b.error(i.error),r.resolve()):i.zipdl&&(o=i.zipdl,a?(h=b.splitFileExtention(o.name||""),a+=h[1]?"."+h[1]:".zip"):a=o.name,p||C?(c=b.options.url+(b.options.url.indexOf("?")===-1?"?":"&")+"cmd=zipdl&download=1",e.each([n[0],o.file,a,o.mime],function(e,t){c+="&targets%5B%5D="+encodeURIComponent(t)}),e.each(b.customData,function(e,t){c+="&"+encodeURIComponent(e)+"="+encodeURIComponent(t)}),c+="&"+encodeURIComponent(a),b.hasParrotHeaders()?b.getBinaryByUrl({url:c},function(e){e instanceof Blob?(c=(window.URL||window.webkitURL).createObjectURL(e),g(c)):b.error(["errUploadTransfer",b.i18n("kindZIP")])}):g(c)):(d=e('<form action="'+b.options.url+'" method="post" target="'+m+'" style="display:none"></form>').append('<input type="hidden" name="cmd" value="zipdl"/>').append('<input type="hidden" name="download" value="1"/>'),e.each([n[0],o.file,a,o.mime],function(e,t){d.append('<input type="hidden" name="targets[]" value="'+b.escape(t)+'"/>')}),e.each(b.customData,function(e,t){d.append('<input type="hidden" name="'+e+'" value="'+b.escape(t)+'"/>')}),d.attr("target",m).appendTo("body"),u=e('<iframe style="display:none" name="'+m+'">').appendTo("body").ready(function(){d.submit().remove(),r.resolve(),setTimeout(function(){u.remove()},2e4)})))}).fail(function(e){e&&b.error(e),r.resolve()}),r.promise()}},T=function(e){var t;"function"==typeof MouseEvent?t=new MouseEvent("click"):(t=document.createEvent("MouseEvents"),t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null)),b.pauseUnloadCheck(!0),e.dispatchEvent(t)},A=function(e){var t,n="elfdl"+e;t=document.cookie.split(n+"="),2===t.length?(h&&clearTimeout(h),document.cookie=n+"=; path="+s+"; max-age=0",j()):setTimeout(function(){A(e)},200)},j=function(){b.ui.notify.children(".elfinder-notify-download").length&&b.notify({type:"download",cnt:-1})},O=[];if(!y.length)return w.reject();if(u=e.grep(y,function(e){return"directory"!==e.mime}).length,d=e("<a>").hide().appendTo("body"),p="string"==typeof d.get(0).download,a&&(u!==y.length||u>=(this.options.minFilesZipdl||1)))return d.remove(),C=!p&&b.UA.Mobile,o?(k={},e.each(y,function(e,t){var n=t.hash.split("_",2);k[n[0]]?k[n[0]].push(t.hash):k[n[0]]=[t.hash]}),!C&&b.UA.Mobile&&Object.keys(k).length>1&&(C=!0)):k=[e.map(y,function(e){return e.hash})],w=b.sequence(e.map(k,function(e){return z(e)})).always(function(){b.trigger("download",{files:y})});for(O=[],m=e.Deferred().done(function(t){for(i=0;i<t.length;i++)c=t[i],r&&c.substr(0,b.options.url.length)===b.options.url&&(f=b.getRequestId(),O.push(f),c+="&cpath="+s+"&reqid="+f,h=setTimeout(function(){b.notify({type:"download",cnt:1,cancel:b.UA.IE||b.UA.Edge?void 0:function(){O.length&&e.each(O,function(){b.request({data:{cmd:"abort",id:this},preventDefault:!0})}),O=[]}})},b.notifyDelay),A(f)),p?T(d.attr("href",c).attr("download",b.escape(y[i].name)).get(0)):b.UA.Mobile?setTimeout(function(){window.open(c)||(b.error("errPopup"),h&&cleaerTimeout(h),j());
},100):x+='<iframe class="downloader" id="downloader-'+y[i].hash+'" style="display:none" src="'+c+'"></iframe>';d.remove(),e(x).appendTo("body").ready(function(){setTimeout(function(){e(x).each(function(){e("#"+e(this).attr("id")).remove()})},2e4+1e4*i)}),b.trigger("download",{files:y}),w.resolve()}),u=y.length,g=[],i=0;i<y.length;i++)b.openUrl(y[i].hash,!0,function(e){e&&g.push(e),--u<1&&m.resolve(g)});return w}},i.prototype.commands.duplicate=function(){var t=this.fm;this.getstate=function(n){var i=this.files(n),a=i.length;return a&&t.cwd().write&&e.grep(i,function(e){return!(!e.read||e.phash!==t.cwd().hash||t.isRoot(e))}).length==a?0:-1},this.exec=function(t){var n=this.fm,i=this.files(t),a=i.length,o=e.Deferred().fail(function(e){e&&n.error(e)});return a?(e.each(i,function(e,t){if(!t.read||!n.file(t.phash).write)return!o.reject(["errCopy",t.name,"errPerm"])}),"rejected"==o.state()?o:n.request({data:{cmd:"duplicate",targets:this.hashes(t)},notify:{type:"copy",cnt:a},navigate:{toast:{inbuffer:{msg:n.i18n(["complete",n.i18n("cmdduplicate")])}}}})):o.reject()}},i.prototype.commands.edit=function(){var t,n=this,i=this.fm,a=i.res("class","editing"),o=[],r=[],s=!1,l=function(e){return e.replace(/\s+$/,"")},c=function(t){var a,o=e('<select class="ui-corner-all"></select>');return t&&e.each(t,function(e,t){a=i.escape(t.value),o.append('<option value="'+a+'">'+(t.caption?i.escape(t.caption):a)+"</option>")}),e.each(n.options.encodings,function(e,t){o.append('<option value="'+t+'">'+t+"</option>")}),o},d=function(){var t,a,o=i.options.dialogContained?i.getUI():e(window);return a="string"==typeof n.options.dialogWidth&&(t=n.options.dialogWidth.match(/(\d+)%/))?parseInt(o.width()*(t[1]/100)):parseInt(n.options.dialogWidth||650),Math.min(a,o.width())},p=function(){if(n.options.dialogHeight){var t,a,o=i.options.dialogContained?i.getUI():e(window);return a="string"==typeof n.options.dialogHeight&&(t=n.options.dialogHeight.match(/(\d+)%/))?parseInt(o.height()*(t[1]/100)):parseInt(n.options.dialogHeight||o.height()),Math.min(a,o.height())}},u=function(t){var a,l,c,d=t.length;return d>1&&(a=t[0].mime,l=t[0].name.replace(/^.*(\.[^.]+)$/,"$1")),e.grep(t,function(t){var p;return!c&&"directory"!==t.mime&&(p=t.read&&(s||i.mimeIsText(t.mime)||e.inArray(t.mime,1===d?o:r)!==-1)&&(!n.onlyMimes.length||e.inArray(t.mime,n.onlyMimes)!==-1)&&(1===d||t.mime===a&&t.name.substr(l.length*-1)===l)&&!!i.uploadMimeCheck(t.mime,t.phash)&&b(t,d)&&Object.keys(g).length,p||(c=!0),p)})},h=function(e){var t,n=i.file(e);i.request({cmd:"info",targets:[e],preventDefault:!0}).done(function(e){var a;e&&e.files&&e.files.length&&(t=e.files[0],n.ts==t.ts&&n.size==t.size||(a={changed:[t]},i.updateCache(a),i.change(a)))})},f=function(t,o,r,s,u,f){var g,v,b,y,w,k,C=e.Deferred(),z=!1,T=function(){return!!z||(i.toast({mode:"warning",msg:i.i18n("nowLoading")}),!1)},A=function(){f&&Array.isArray(f)&&e.each(f,function(){this.msg&&i.toast(this)})},j=function(){var t,n,a,o=y?y.val():void 0,r=e.Deferred().fail(function(e){b.show().find("button.elfinder-btncnt-0,button.elfinder-btncnt-1").hide()});return T()?(g.editor&&(g.editor.save(g[0],g.editor.instance),t=g.editor.confObj,t.info&&(t.info.schemeContent||t.info.arrayBufferContent)&&(o="scheme")),n=D(),U(n),n.promise?(a=setTimeout(function(){i.notify({type:"chkcontent",cnt:1,hideCnt:!0,cancel:function(){n.reject()}})},100),n.always(function(){a&&clearTimeout(a),i.notify({type:"chkcontent",cnt:-1})}).done(function(e){C.notifyWith(g,[o,g.data("hash"),v,r])}).fail(function(e){r.reject(e)})):C.notifyWith(g,[o,g.data("hash"),v,r]),r):r.resolve()},O=function(){T()&&j().fail(function(e){e&&i.error(e)})},S=function(){g.elfinderdialog("close")},I=function(){T()&&(b.hide(),j().done(function(){z=!1,b.show(),S()}).fail(function(e){b.show(),e&&i.error(e)}))},M=function(){if(T()){var t=v,r=o.phash,s=function(e){p.addClass(a).fadeIn(function(){e&&i.error(e)}),v=t,i.disable()},l=function(){n.mime=R.mime||o.mime,n.prefix=(R.name||o.name).replace(/ \d+(\.[^.]+)?$/,"$1"),n.requestCmd="mkfile",n.nextAction={},n.data={target:r},e.proxy(i.res("mixin","make"),n)().done(function(e){var t;e.added&&e.added.length?(t=g.data("hash"),g.data("hash",e.added[0].hash),j().done(function(){z=!1,b.show(),S(),p.fadeIn()}).fail(function(){i.exec("rm",[e.added[0].hash],{forceRm:!0,quiet:!0}),g.data("hash",t),b.find("button.elfinder-btncnt-2").hide(),s()})):s()}).progress(function(e){e&&"errUploadMime"===e&&g.trigger("saveAsFail")}).fail(s).always(function(){delete n.mime,delete n.prefix,delete n.nextAction,delete n.data}),i.trigger("unselectfiles",{files:[o.hash]})},c=null,d=null,p=i.getUI().children("."+n.dialogClass+":visible");b.is(":hidden")&&(p=p.add(b)),p.removeClass(a).fadeOut(),i.enable(),i.searchStatus.state<2&&r!==i.cwd().hash?c=i.exec("open",[r],{thash:r}):i.file(r)||(d=i.request({cmd:"info",targets:[r]})),e.when([c,d]).done(function(){d?i.one("infodone",function(){i.file(r)?l():s("errFolderNotFound")}):c?i.one("cwdrender",l):l()}).fail(s)}},E=function(){var t,n,a=e.Deferred();return z?(g.editor&&g.editor.save(g[0],g.editor.instance),t=D(),t&&t.promise?(n=setTimeout(function(){i.notify({type:"chkcontent",cnt:1,hideCnt:!0,cancel:function(){t.reject()}})},100),t.always(function(){n&&clearTimeout(n),i.notify({type:"chkcontent",cnt:-1})}).done(function(e){a.resolve(v!==e)}).fail(function(e){a.resolve(e||void 0!==v)})):a.resolve(v!==t),a):a.resolve(!1)},F={title:i.escape(o.name),width:d(),height:p(),buttons:{},cssClass:a,maxWidth:"window",maxHeight:"window",allowMinimize:!0,allowMaximize:!0,openMaximized:x()||u&&u.info&&u.info.openMaximized,btnHoverFocus:!1,closeOnEscape:!1,propagationEvents:["mousemove","mouseup","click"],minimize:function(){var e;g.editor&&b.closest(".ui-dialog").is(":hidden")&&(e=g.editor.confObj,e.info&&e.info.syncInterval&&h(o.hash))},close:function(){var e=function(){var e;C.resolve(),g.editor&&(g.editor.close(g[0],g.editor.instance),e=g.editor.confObj,e.info&&e.info.syncInterval&&h(o.hash)),g.elfinderdialog("destroy")},t="undefined"!=typeof R.name,a=t?{label:"btnSaveAs",callback:function(){requestAnimationFrame(M)}}:{label:"btnSaveClose",callback:function(){j().done(function(){e()})}};E().done(function(o){var r=["confirmNotSave"];o?("string"==typeof o&&r.unshift(o),i.confirm({title:n.title,text:r,accept:a,cancel:{label:"btnClose",callback:e},buttons:t?null:[{label:"btnSaveAs",callback:function(){requestAnimationFrame(M)}}]})):e()})},open:function(){var e,n,a;if(g.initEditArea.call(g,t,o,r,i),g.editor){if(e=g.editor.load(g[0])||null,e&&e.done)e.always(function(){z=!0}).done(function(e){g.editor.instance=e,g.editor.focus(g[0],g.editor.instance),U(D()),requestAnimationFrame(function(){b.trigger("resize")})}).fail(function(e){e&&i.error(e),g.elfinderdialog("destroy")}).always(A);else{if(z=!0,e&&("string"==typeof e||Array.isArray(e)))return i.error(e),void g.elfinderdialog("destroy");g.editor.instance=e,g.editor.focus(g[0],g.editor.instance),U(D()),requestAnimationFrame(function(){b.trigger("resize")}),A()}n=g.editor.confObj,n.info&&n.info.syncInterval&&(a=parseInt(n.info.syncInterval))&&setTimeout(function(){P(a)},a)}else z=!0,U(D())},resize:function(e,t){g.editor&&g.editor.resize(g[0],g.editor.instance,e,t||{})}},D=function(){var t=g.getContent.call(g,g[0]);return void 0!==t&&t!==!1&&null!==t||(t=e.Deferred().reject()),t},U=function(e){e&&e.promise?e.done(function(e){v=e}):v=e},P=function(e){b.is(":visible")&&(h(o.hash),setTimeout(function(){P(e)},e))},q=function(){y&&E().done(function(e){e?y.attr("title",i.i18n("saveAsEncoding")).addClass("elfinder-edit-changed"):y.attr("title",i.i18n("openAsEncoding")).removeClass("elfinder-edit-changed")})},R={};if(u&&(u.html&&(g=e(u.html)),w={init:u.init||null,load:u.load,getContent:u.getContent||null,save:u.save,beforeclose:"function"==typeof u.beforeclose?u.beforeclose:void 0,close:"function"==typeof u.close?u.close:function(){},focus:"function"==typeof u.focus?u.focus:function(){},resize:"function"==typeof u.resize?u.resize:function(){},instance:null,doSave:O,doCancel:S,doClose:I,file:o,fm:i,confObj:u,trigger:function(e,t){i.trigger("editEditor"+e,Object.assign({},u.info||{},t))}}),!g){if(!i.mimeIsText(o.mime))return C.reject("errEditorNotFound");!function(){g=e('<textarea class="elfinder-file-edit" rows="20" id="'+t+'-ta"></textarea>').on("input propertychange",q),u&&u.info&&!u.info.useTextAreaEvent||g.on("keydown",function(t){var n,i,a=t.keyCode;t.stopPropagation(),a==e.ui.keyCode.TAB&&(t.preventDefault(),this.setSelectionRange&&(n=this.value,i=this.selectionStart,this.value=n.substr(0,i)+"\t"+n.substr(this.selectionEnd),i+=1,this.setSelectionRange(i,i))),(t.ctrlKey||t.metaKey)&&(a!="Q".charCodeAt(0)&&a!="W".charCodeAt(0)||(t.preventDefault(),S()),a=="S".charCodeAt(0)&&(t.preventDefault(),O()))}).on("mouseenter",function(){this.focus()}),g.initEditArea=function(e,t,n){g.hide().val(n),this._setupSelEncoding(n)}}()}return g._setupSelEncoding=function(t){var n=s&&"unknown"!==s?[{value:s}]:[],a=e("<select></select>").hide(),r=function(t){t&&a.appendTo(y.parent()),a.empty().append(e("<option></option>").text(y.val())),y.width(a.width())};""!==t&&s&&"UTF-8"===s||n.push({value:"UTF-8"}),y=c(n).on("touchstart",function(e){e.stopPropagation()}).on("change",function(){E().done(function(e){e||""===D()||(S(),m(o,y.val(),u).fail(function(e){e&&i.error(e)}))}),r()}).on("mouseover",q),g.parent().next().prepend(e('<div class="ui-dialog-buttonset elfinder-edit-extras"></div>').append(y)),r(!0)},g.data("hash",o.hash),w&&(g.editor=w,"function"==typeof w.beforeclose&&(F.beforeclose=function(){return w.beforeclose(g[0],w.instance)}),"function"==typeof w.init&&(g.initEditArea=w.init),"function"==typeof w.getContent&&(g.getContent=w.getContent)),g.initEditArea||(g.initEditArea=function(){}),g.getContent||(g.getContent=function(){return l(g.val())}),u&&u.info&&u.info.preventGet||(F.buttons[i.i18n("btnSave")]=O,F.buttons[i.i18n("btnSaveClose")]=I,F.buttons[i.i18n("btnSaveAs")]=M,F.buttons[i.i18n("btnCancel")]=S),u&&"function"==typeof u.prepare&&u.prepare(g,F,o),b=n.fmDialog(g,F).attr("id",t).on("keydown keyup keypress",function(e){e.stopPropagation()}).css({overflow:"hidden",minHeight:"7em"}).addClass("elfinder-edit-editor").closest(".ui-dialog").on("changeType",function(t,n){if(n.extention&&n.mime){var a=(n.extention,n.mime,e(this).children(".ui-dialog-buttonpane").children(".ui-dialog-buttonset"));a.children(".elfinder-btncnt-0,.elfinder-btncnt-1").hide(),R.name=i.splitFileExtention(o.name)[0]+"."+n.extention,R.mime=n.mime,n.keepEditor||a.children(".elfinder-btncnt-2").trigger("click")}}),k=(i.options.dialogContained?i.getUI():e(window)).width(),b.width()>k&&b.width(k),C.promise()},m=function(t,a,o){var r,s,l,d=t.hash,p=(i.options,e.Deferred()),u="edit-"+i.namespace+"-"+t.hash,h=i.getUI().find("#"+u),g=a?a:0,v=!1;if(h.length)return h.elfinderdialog("toTop"),p.resolve();if(!(t.read&&(t.write||o.info&&o.info.converter)))return s=["errOpen",t.name,"errPerm"],p.reject(s);if(o&&o.info){if("function"==typeof o.info.edit)return l=o.info.edit.call(i,t,o),l.promise?l.done(function(){p.resolve()}).fail(function(e){p.reject(e)}):l?p.resolve():p.reject(),p;v=o.info.preventGet||o.info.noContent,o.info.urlAsContent||v?(r=e.Deferred(),o.info.urlAsContent?i.url(d,{async:!0,onetime:!0,temporary:!0}).done(function(e){r.resolve({content:e})}):r.resolve({})):(g&&(t.encoding=g,i.cache(t,"change")),r=i.request({data:{cmd:"get",target:d,conv:g,_t:t.ts},options:{type:"get",cache:!0},notify:{type:"file",cnt:1},preventDefault:!0})),r.done(function(a){var r,s,l;a.doconv?i.confirm({title:n.title,text:"unknown"===a.doconv?"confirmNonUTF8":"confirmConvUTF8",accept:{label:"btnConv",callback:function(){p=m(t,r.val(),o)}},cancel:{label:"btnCancel",callback:function(){p.reject()}},optionsCallback:function(t){t.create=function(){var t=e('<div class="elfinder-dialog-confirm-encoding"></div>'),n={value:a.doconv};"unknown"===a.doconv&&(n.caption="-"),r=c([n]),e(this).next().find(".ui-dialog-buttonset").prepend(t.append(e("<label>"+i.i18n("encoding")+" </label>").append(r)))}}}):(!v&&i.mimeIsText(t.mime)&&(s=new RegExp("^(data:"+t.mime.replace(/([.+])/g,"\\$1")+";base64,)","i"),o.info.dataScheme?window.btoa&&!a.content.match(s)&&(a.content="data:"+t.mime+";base64,"+btoa(a.content)):window.atob&&(l=a.content.match(s))&&(a.content=atob(a.content.substr(l[1].length)))),f(u,t,a.content,a.encoding,o,a.toasts).done(function(e){p.resolve(e)}).progress(function(e,t,n,a){var o=this;t&&(d=t),i.request({options:{type:"post"},data:{cmd:"put",target:d,encoding:e||n.encoding,content:n},notify:{type:"save",cnt:1},syncOnFail:!0,preventFail:!0,navigate:{target:"changed",toast:{inbuffer:{msg:i.i18n(["complete",i.i18n("btnSave")])}}}}).fail(function(e){p.reject(e),a.reject()}).done(function(e){requestAnimationFrame(function(){o.trigger("focus"),o.editor&&o.editor.focus(o[0],o.editor.instance)}),a.resolve()})}).fail(function(e){p.reject(e)}))}).fail(function(e){var n=i.parseError(e);n=Array.isArray(n)?n[0]:n,t.encoding&&(t.encoding="",i.cache(t,"change")),"errConvUTF8"!==n&&i.sync(),p.reject(e)})}return p.promise()},g={},v={info:{id:"textarea",name:"TextArea",useTextAreaEvent:!0},load:function(t){this.trigger("Prepare",{node:t,editorObj:void 0,instance:void 0,opts:{}}),t.setSelectionRange&&t.setSelectionRange(0,0),e(t).trigger("focus").show()},save:function(){}},b=function(a,o){var r=function(t,n){if(n){if("*"===n[0]||e.inArray(t,n)!==-1)return!0;var a,o;for(o=n.length,a=0;a<o;a++)if(0===t.indexOf(n[a]))return!0;return!1}return i.mimeIsText(t)},s=function(e,t){if(!t||!t.length)return!0;var n,i,a=e.replace(/^.+\.([^.]+)|(.+)$/,"$1$2").toLowerCase();for(i=t.length,n=0;n<i;n++)if(a===t[n].toLowerCase())return!0;return!1},l=n.options.editors||[],c=i.cwd().write;return t=i.storage("storedEditors")||{},g={},l.length||(l=[v]),e.each(l,function(e,t){var n;(1===o||!t.info.single)&&(t.info&&t.info.converter?c:a.write)&&(a.size>0||!t.info.converter&&t.info.canMakeEmpty!==!1&&i.mimesCanMakeEmpty[a.mime])&&(!t.info.maxSize||a.size<=t.info.maxSize)&&r(a.mime,t.mimes||null)&&s(a.name,t.exts||null)&&"function"==typeof t.load&&"function"==typeof t.save&&(n=t.info.name?t.info.name:"Editor "+e,t.id=t.info.id?t.info.id:"editor"+e,t.name=n,t.i18n=i.i18n(n),g[t.id]=t)}),!!Object.keys(g).length},y=function(n,a){n&&a&&(e.isPlainObject(t)||(t={}),t[n]=a.id,i.storage("storedEditors",t),i.trigger("selectfiles",{files:i.selected()}))},w=function(){var e=i.storage("useStoredEditor");return e?e>0:n.options.useStoredEditor},x=function(){var e=i.storage("editorMaximized");return e?e>0:n.options.editorMaximized},k=function(t,n){var a=[];return e.each(g,function(e,o){a.push({label:i.escape(o.i18n),icon:o.info&&o.info.icon?o.info.icon:"edit",options:{iconImg:o.info&&o.info.iconImg?i.baseUrl+o.info.iconImg:void 0},callback:function(){y(t[0].mime,o),n&&n.call(o)}})}),a},C=function(e){return e.toLowerCase().replace(/ +/g,"")},z=function(e){var n=t[e];return n&&Object.keys(g).length?g[C(n)]:void 0};this.getEncSelect=c,this.shortcuts=[{pattern:"ctrl+e"}],this.init=function(){var t,n,i=this,a=this.fm,l=this.options,c=[];this.onlyMimes=this.options.mimes||[],a.one("open",function(){l.editors&&Array.isArray(l.editors)&&(a.trigger("canMakeEmptyFile",{mimes:Object.keys(a.storage("mkfileTextMimes")||{}).concat(l.makeTextMimes||["text/plain"])}),e.each(l.editors,function(e,t){t.info&&t.info.cmdCheck&&c.push(t.info.cmdCheck)}),c.length?a.api>=2.103?n=a.request({data:{cmd:"editor",name:c,method:"enabled"},preventDefault:!0}).done(function(e){t=e}).fail(function(){t={}}):(t={},n=e.Deferred().resolve()):n=e.Deferred().resolve(),n.always(function(){t&&(l.editors=e.grep(l.editors,function(e){return!e.info||!e.info.cmdCheck||!!t[e.info.cmdCheck]})),e.each(l.editors,function(e,t){t.setup&&"function"==typeof t.setup&&t.setup.call(t,l,a),t.disabled||(t.mimes&&Array.isArray(t.mimes)&&(o=o.concat(t.mimes),t.info&&t.info.single||(r=r.concat(t.mimes))),!s&&t.mimes&&"*"===t.mimes[0]&&(s=!0),t.info||(t.info={}),t.info.integrate&&a.trigger("helpIntegration",Object.assign({cmd:"edit"},t.info.integrate)),t.info.canMakeEmpty&&a.trigger("canMakeEmptyFile",{mimes:Array.isArray(t.info.canMakeEmpty)?t.info.canMakeEmpty:t.mimes}))}),o=(e.uniqueSort||e.unique)(o),r=(e.uniqueSort||e.unique)(r),l.editors=e.grep(l.editors,function(e){return!e.disabled})}))}).bind("select",function(){g=null}).bind("contextmenucreate",function(t){var n,o,r=function(e){var t=i.title;a.one("contextmenucreatedone",function(){i.title=t}),i.title=a.escape(e.i18n),e.info&&e.info.iconImg&&(i.contextmenuOpts={iconImg:a.baseUrl+e.info.iconImg}),delete i.variants};i.contextmenuOpts=void 0,"files"===t.data.type&&i.enabled()&&(n=a.file(t.data.targets[0]),b(n,t.data.targets.length)&&(Object.keys(g).length>1?w()&&(o=z(n.mime))?(r(o),i.extra={icon:"menu",node:e("<span></span>").attr({title:a.i18n("select")}).on("click touchstart",function(t){if(!("touchstart"===t.type&&t.originalEvent.touches.length>1)){var n=e(this);t.stopPropagation(),t.preventDefault(),a.trigger("contextmenu",{raw:k(a.selectedFiles(),function(){var e=a.selected();a.exec("edit",e,{editor:this}),a.trigger("selectfiles",{files:e})}),x:n.offset().left,y:n.offset().top})}})}):(delete i.extra,i.variants=[],e.each(g,function(e,t){i.variants.push([{editor:t},t.i18n,t.info&&t.info.iconImg?a.baseUrl+t.info.iconImg:"edit"])})):(r(g[Object.keys(g)[0]]),delete i.extra)))}).bind("canMakeEmptyFile",function(t){if(t.data&&t.data.resetTexts){var n=a.arrayFlip(i.options.makeTextMimes||["text/plain"]),o=i.getMkfileHides();e.each(a.storage("mkfileTextMimes")||{},function(e,t){n[e]||(delete a.mimesCanMakeEmpty[e],delete o[e])}),a.storage("mkfileTextMimes",null),Object.keys(o).length?a.storage("mkfileHides",o):a.storage("mkfileHides",null)}})},this.getstate=function(e){var t=this.files(e),n=t.length;return n&&u(t).length==n?0:-1},this.exec=function(t,n){var i,a=this.fm,o=u(this.files(t)),r=e.map(o,function(e){return e.hash}),s=[],l=n&&n.editor?n.editor:null,c=e(n&&n._currentNode?n._currentNode:a.cwdHash2Elm(r[0])),d=function(){var t=e.Deferred();return!l&&Object.keys(g).length>1?w()&&(l=z(o[0].mime))?t.resolve(l):(a.trigger("contextmenu",{raw:k(o,function(){t.resolve(this)}),x:c.offset().left,y:c.offset().top+22,opened:function(){a.one("closecontextmenu",function(){requestAnimationFrame(function(){"pending"===t.state()&&t.reject()})})}}),a.trigger("selectfiles",{files:r}),t):(Object.keys(g).length>1&&l&&y(o[0].mime,l),t.resolve(l?l:Object.keys(g).length?g[Object.keys(g)[0]]:null))},p=e.Deferred();return null===g&&b(o[0],r.length),c.length||(c=a.getUI("cwd")),d().done(function(t){for(;i=o.shift();)s.push(m(i,i.encoding||void 0,t).fail(function(e){e&&a.error(e)}));s.length?e.when.apply(null,s).done(function(){p.resolve()}).fail(function(){p.reject()}):p.reject()}).fail(function(){p.reject()}),p},this.getMkfileHides=function(){return i.storage("mkfileHides")||i.arrayFlip(n.options.mkfileHideMimes||[])}},i.prototype.commands.empty=function(){var t,n,i=function(e){var i=t.files(e);return i.length||(i=[n.cwd()]),i};this.linkedCmds=["rm"],this.init=function(){t=this,n=this.fm},this.getstate=function(t){var n,a=i(t);return n=a.length,e.grep(a,function(e){return!(!e.read||!e.write||"directory"!==e.mime)}).length==n?0:-1},this.exec=function(t){var a=i(t),o=a.length,r=e.Deferred().done(function(){var t={changed:{}};n.toast({msg:n.i18n(['"'+s.join('", ')+'"',"complete",n.i18n("cmdempty")])}),e.each(a,function(e,n){t.changed[n.hash]=n}),n.change(t)}).always(function(){var t=n.cwd().hash;n.trigger("selectfiles",{files:e.map(a,function(e){return t===e.phash?e.hash:null})})}),s=[],l=function(e){"number"==typeof e?(s.push(a[e].name),delete a[e].dirs):e&&n.error(e),--o<1&&r[s.length?"resolve":"reject"]()};return e.each(a,function(t,i){var a;return i.write&&"directory"===i.mime?n.isCommandEnabled("rm",i.hash)?(a=setTimeout(function(){n.notify({type:"search",cnt:1,hideCnt:!(o>1)})},n.notifyDelay),void n.request({data:{cmd:"open",target:i.hash},preventDefault:!0,asNotOpen:!0}).done(function(r){var s=[];a&&clearTimeout(a),n.ui.notify.children(".elfinder-notify-search").length&&n.notify({type:"search",cnt:-1,hideCnt:!(o>1)}),r&&r.files&&r.files.length?r.files.length>n.maxTargets?l(["errEmpty",i.name,"errMaxTargets",n.maxTargets]):(n.updateCache(r),e.each(r.files,function(e,t){return!t.write||t.locked?(l(["errEmpty",i.name,"errRm",t.name,"errPerm"]),s=[],!1):void s.push(t.hash)}),s.length&&n.exec("rm",s,{_userAction:!0,addTexts:[n.i18n("folderToEmpty",i.name)]}).fail(function(e){n.trigger("unselectfiles",{files:n.selected()}),l(n.parseError(e)||"")}).done(function(){l(t)})):(n.toast({mode:"warning",msg:n.i18n("filderIsEmpty",i.name)}),l(""))}).fail(function(e){l(n.parseError(e)||"")})):(l(["errCmdNoSupport",'"rm"']),null):(l(["errEmpty",i.name,"errPerm"]),null)}),r}},i.prototype.commands.extract=function(){var t=this,n=t.fm,i=[],a=function(t){return e.grep(t,function(t){return!(!t.read||e.inArray(t.mime,i)===-1)})};this.variants=[],this.disableOnSearch=!0,n.bind("open reload",function(){i=n.option("archivers").extract||[],n.api>2?t.variants=[[{makedir:!0},n.i18n("cmdmkdir")],[{},n.i18n("btnCwd")]]:t.variants=[[{},n.i18n("btnCwd")]],t.change()}),this.getstate=function(e){var t=this.files(e),n=t.length;return n&&this.fm.cwd().write&&a(t).length==n?0:-1},this.exec=function(t,a){var o,r,s,l=this.files(t),c=e.Deferred(),d=l.length,p=a&&a.makedir?1:0,u=!1,h=!1,f=0,m=e.map(n.files(t),function(e){return e.name}),g={};e.grep(n.files(t),function(e){return g[e.name]=e,!1});var v=function(e){switch(e){case"overwrite_all":u=!0;break;case"omit_all":h=!0}},b=function(t){t.read&&n.file(t.phash).write?e.inArray(t.mime,i)===-1?(r=["errExtract",t.name,"errNoArchive"],n.error(r),c.reject(r)):n.request({data:{cmd:"extract",target:t.hash,makedir:p},notify:{type:"extract",cnt:1},syncOnFail:!0,navigate:{toast:p?{incwd:{msg:n.i18n(["complete",n.i18n("cmdextract")]),action:{cmd:"open",msg:"cmdopen"}},inbuffer:{msg:n.i18n(["complete",n.i18n("cmdextract")]),action:{cmd:"open",msg:"cmdopen"}}}:{inbuffer:{msg:n.i18n(["complete",n.i18n("cmdextract")])}}}}).fail(function(e){"rejected"!=c.state()&&c.reject(e)}).done(function(){}):(r=["errExtract",t.name,"errPerm"],n.error(r),c.reject(r))},y=function(t,i){var a=t[i],r=n.splitFileExtention(a.name)[0],l=e.inArray(r,m)>=0,w=function(){i+1<d?y(t,i+1):c.resolve()};!p&&l&&"directory"!=g[r].mime?n.confirm({title:n.i18n("ntfextract"),text:["errExists",r,"confirmRepl"],accept:{label:"btnYes",callback:function(e){if(s=e?"overwrite_all":"overwrite",v(s),u||h){if(u){for(o=i;o<d;o++)b(t[o]);c.resolve()}}else"overwrite"==s&&b(a),i+1<d?y(t,i+1):c.resolve()}},reject:{label:"btnNo",callback:function(e){s=e?"omit_all":"omit",v(s),!u&&!h&&i+1<d?y(t,i+1):h&&c.resolve()}},cancel:{label:"btnCancel",callback:function(){c.resolve()}},all:i+1<d}):p?(b(a),w()):0==f?n.confirm({title:n.i18n("cmdextract"),text:[n.i18n("cmdextract")+' "'+a.name+'"',"confirmRepl"],accept:{label:"btnYes",callback:function(e){e&&(f=1),b(a),w()}},reject:{label:"btnNo",callback:function(e){e&&(f=-1),w()}},cancel:{label:"btnCancel",callback:function(){c.resolve()}},all:i+1<d}):(f>0&&b(a),w())};return this.enabled()&&d&&i.length?(d>0&&y(l,0),c):c.reject()}},(i.prototype.commands.forward=function(){this.alwaysEnabled=!0,this.updateOnSelect=!0,this.shortcuts=[{pattern:"ctrl+right"}],this.getstate=function(){return this.fm.history.canForward()?0:-1},this.exec=function(){return this.fm.history.forward()}}).prototype={forceLoad:!0},i.prototype.commands.fullscreen=function(){var t=this,n=this.fm,i=function(e,n){e.preventDefault(),e.stopPropagation(),n&&n.fullscreen&&t.update(void 0,"on"===n.fullscreen)};this.alwaysEnabled=!0,this.updateOnSelect=!1,this.syncTitleOnChange=!0,this.value=!1,this.options={ui:"fullscreenbutton"},this.getstate=function(){return 0},this.exec=function(){var i=n.getUI().get(0),a=i===n.toggleFullscreen(i);return t.title=n.i18n(a?"reinstate":"cmdfullscreen"),t.update(void 0,a),e.Deferred().resolve()},n.bind("init",function(){n.getUI().off("resize."+n.namespace,i).on("resize."+n.namespace,i)})},(i.prototype.commands.getfile=function(){var t=this,n=this.fm,i=function(n){var i=t.options;return n=e.grep(n,function(e){return!("directory"==e.mime&&!i.folders||!e.read)}),i.multiple||1==n.length?n:[]};this.alwaysEnabled=!0,this.callback=n.options.getFileCallback,this._disabled="function"==typeof this.callback,this.getstate=function(e){var t=this.files(e),n=t.length;return this.callback&&n&&i(t).length==n?0:-1},this.exec=function(n){var i,a,o,r=this.fm,s=this.options,l=this.files(n),c=l.length,d=r.option("url"),p=r.option("tmbUrl"),u=e.Deferred().done(function(e){var n,i=function(){"close"==s.oncomplete?r.hide():"destroy"==s.oncomplete&&r.destroy()},a=function(e){"close"==s.onerror?r.hide():"destroy"==s.onerror?r.destroy():e&&r.error(e)};r.trigger("getfile",{files:e});try{n=t.callback(e,r)}catch(o){return void a(["Error in `getFileCallback`.",o.message])}"object"==typeof n&&"function"==typeof n.done?n.done(i).fail(a):i()}),h=function(t){return s.onlyURL?s.multiple?e.map(l,function(e){return e.url}):l[0].url:s.multiple?l:l[0]},f=[];for(i=0;i<c;i++){if(a=l[i],"directory"==a.mime&&!s.folders)return u.reject();a.baseUrl=d,"1"==a.url?f.push(r.request({data:{cmd:"url",target:a.hash},notify:{type:"url",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(e){if(e.url){var t=r.file(this.hash);t.url=this.url=e.url}}.bind(a))):a.url=r.url(a.hash),s.onlyURL||(s.getPath&&(a.path=r.path(a.hash),""===a.path&&a.phash&&!function(){var t=e.Deferred();f.push(t),r.path(a.hash,!1,{}).done(function(e){a.path=e}).fail(function(){a.path=""}).always(function(){t.resolve()})}()),a.tmb&&1!=a.tmb&&(a.tmb=p+a.tmb),a.width||a.height||(a.dim?(o=a.dim.split("x"),a.width=o[0],a.height=o[1]):s.getImgSize&&a.mime.indexOf("image")!==-1&&f.push(r.request({data:{cmd:"dim",target:a.hash},notify:{type:"dim",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(e){if(e.dim){var t=e.dim.split("x"),n=r.file(this.hash);n.width=this.width=t[0],n.height=this.height=t[1]}}.bind(a)))))}return f.length?(e.when.apply(null,f).always(function(){u.resolve(h(l))}),u):u.resolve(h(l))}}).prototype={forceLoad:!0},(i.prototype.commands.help=function(){var t,n,i,a,o,r,s=this.fm,l=this,c='<div class="elfinder-help-link"> <a href="{url}" target="_blank">{link}</a></div>',d='<div class="elfinder-help-team"><div>{author}</div>{work}</div>',p=/\{url\}/,u=/\{link\}/,h=/\{author\}/,f=/\{work\}/,m="replace",g="ui-priority-primary",v="ui-priority-secondary",b="elfinder-help-license",y='<li class="'+s.res("class","tabstab")+' elfinder-help-tab-{id}"><a href="#'+s.namespace+'-help-{id}" class="ui-tabs-anchor">{title}</a></li>',w=['<div class="ui-tabs ui-widget ui-widget-content ui-corner-all elfinder-help">','<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-top">'],x='<div class="elfinder-help-shortcut"><div class="elfinder-help-shortcut-pattern">{pattern}</div> {descrip}</div>',k='<div class="elfinder-help-separator"></div>',C=e("base").length?document.location.href.replace(/#.*$/,""):"",z=s.res("class","tabsactive"),T=function(){var e;return e=s.theme&&s.theme.author?d[m]("elfinder-help-team","elfinder-help-team elfinder-help-term-theme")[m](h,s.i18n(s.theme.author)+(s.theme.email?" &lt;"+s.theme.email+"&gt;":""))[m](f,s.i18n("theme")+" ("+s.i18n(s.theme.name)+")"):'<div class="elfinder-help-team elfinder-help-term-theme" style="display:none"></div>'},A=function(){w.push('<div id="'+s.namespace+'-help-about" class="ui-tabs-panel ui-widget-content ui-corner-bottom"><div class="elfinder-help-logo"></div>'),w.push("<h3>elFinder</h3>"),w.push('<div class="'+g+'">'+s.i18n("webfm")+"</div>"),w.push('<div class="'+v+'">'+s.i18n("ver")+": "+s.version+"</div>"),w.push('<div class="'+v+'">'+s.i18n("protocolver")+': <span class="apiver"></span></div>'),w.push('<div class="'+v+'">jQuery/jQuery UI: '+e().jquery+"/"+e.ui.version+"</div>"),w.push(k),w.push(c[m](p,"https://studio-42.github.io/elFinder/")[m](u,s.i18n("homepage"))),w.push(c[m](p,"https://github.com/Studio-42/elFinder/wiki")[m](u,s.i18n("docs"))),w.push(c[m](p,"https://github.com/Studio-42/elFinder")[m](u,s.i18n("github"))),w.push(k),w.push('<div class="'+g+'">'+s.i18n("team")+"</div>"),w.push(d[m](h,'Dmitry "dio" Levashov &lt;dio@std42.ru&gt;')[m](f,s.i18n("chiefdev"))),w.push(d[m](h,"Naoki Sawada &lt;hypweb+elfinder@gmail.com&gt;")[m](f,s.i18n("developer"))),w.push(d[m](h,"Troex Nevelin &lt;troex@fury.scancode.ru&gt;")[m](f,s.i18n("maintainer"))),w.push(d[m](h,"Alexey Sukhotin &lt;strogg@yandex.ru&gt;")[m](f,s.i18n("contributor"))),s.i18[s.lang].translator&&e.each(s.i18[s.lang].translator.split(", "),function(){w.push(d[m](h,e.trim(this))[m](f,s.i18n("translator")+" ("+s.i18[s.lang].language+")"))}),w.push(T()),w.push(k),w.push('<div class="'+b+'">'+s.i18n("icons")+': Pixelmixer, <a href="http://p.yusukekamiyamane.com" target="_blank">Fugue</a>, <a href="https://icons8.com" target="_blank">Icons8</a></div>'),w.push(k),w.push('<div class="'+b+'">Licence: 3-clauses BSD Licence</div>'),w.push('<div class="'+b+'">Copyright © 2009-2020, Studio 42</div>'),w.push('<div class="'+b+'">„ …'+s.i18n("dontforget")+" ”</div>"),w.push("</div>")},j=function(){var t=s.shortcuts();w.push('<div id="'+s.namespace+'-help-shortcuts" class="ui-tabs-panel ui-widget-content ui-corner-bottom">'),t.length?(w.push('<div class="ui-widget-content elfinder-help-shortcuts">'),e.each(t,function(e,t){w.push(x.replace(/\{pattern\}/,t[0]).replace(/\{descrip\}/,t[1]))}),w.push("</div>")):w.push('<div class="elfinder-help-disabled">'+s.i18n("shortcutsof")+"</div>"),w.push("</div>")},O=function(){w.push('<div id="'+s.namespace+'-help-help" class="ui-tabs-panel ui-widget-content ui-corner-bottom">'),w.push('<a href="https://github.com/Studio-42/elFinder/wiki" target="_blank" class="elfinder-dont-panic"><span>DON\'T PANIC</span></a>'),w.push("</div>")},S=!1,I=function(){S=!0,w.push('<div id="'+s.namespace+'-help-integrations" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div>')},M=!1,E=function(){M=!0,w.push('<div id="'+s.namespace+'-help-debug" class="ui-tabs-panel ui-widget-content ui-corner-bottom">'),w.push('<div class="ui-widget-content elfinder-help-debug"><ul></ul></div>'),w.push("</div>")},F=function(){var n,i,a,c,d,p,u=function(t,n){return e.each(n,function(n,i){t.append(e("<dt></dt>").text(n)),"undefined"==typeof i?t.append(e("<dd></dd>").append(e("<span></span>").text("undfined"))):"object"!=typeof i||i?"object"==typeof i&&(e.isPlainObject(i)||i.length)?t.append(e("<dd></dd>").append(u(e("<dl></dl>"),i))):t.append(e("<dd></dd>").append(e("<span></span>").text(i&&"object"==typeof i?"[]":i?i:'""'))):t.append(e("<dd></dd>").append(e("<span></span>").text("null")))}),t},h=r.children("li").length;(l.debug.options||l.debug.debug)&&(h>=5&&(d=r.children("li:last"),p=o.children("div:last"),p.is(":hidden")?(d.remove(),p.remove()):(d.prev().remove(),p.prev().remove())),a=s.namespace+"-help-debug-"+ +new Date,n=e("<li></li>").html('<a href="'+C+"#"+a+'">'+l.debug.debug.cmd+"</a>").prependTo(r),i=e('<div id="'+a+'"></div>').data("debug",l.debug),n.on("click.debugrender",function(){var t=i.data("debug");i.removeData("debug"),t&&(i.hide(),t.debug&&(c=e("<fieldset>").append(e("<legend></legend>").text("debug"),u(e("<dl></dl>"),t.debug)),i.append(c)),t.options&&(c=e("<fieldset>").append(e("<legend></legend>").text("options"),u(e("<dl></dl>"),t.options)),i.append(c)),i.show()),n.off("click.debugrender")}),r.after(i),t&&o.tabs("refresh"))},D="";this.alwaysEnabled=!0,this.updateOnSelect=!1,this.state=-1,this.shortcuts=[{pattern:"f1",description:this.title}],s.bind("load",function(){var c,d,p,u,h,f,g=l.options.view||["about","shortcuts","help","integrations","debug"];(c=e.inArray("preference",g))!==-1&&g.splice(c,1),e.fn.tabs||(c=e.inArray(g,"debug"))!==-1&&g.splice(c,1),e.each(g,function(e,t){w.push(y[m](/\{id\}/g,t)[m](/\{title\}/,s.i18n(t)))}),w.push("</ul>"),e.inArray("about",g)!==-1&&A(),
e.inArray("shortcuts",g)!==-1&&j(),e.inArray("help",g)!==-1&&(d=s.i18nBaseUrl+"help/%s.html.js",O()),e.inArray("integrations",g)!==-1&&I(),e.inArray("debug",g)!==-1&&E(),w.push("</div>"),D=e(w.join("")),D.find(".ui-tabs-nav li").on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"===t.type)}).on("focus blur","a",function(t){e(t.delegateTarget).toggleClass("ui-state-focus","focusin"===t.type)}).children().on("click",function(t){var n=e(this);t.preventDefault(),t.stopPropagation(),n.parent().addClass(z).siblings().removeClass(z),D.children(".ui-tabs-panel").hide().filter(n.attr("href")).show()}).filter(":first").trigger("click"),S&&(n=D.find(".elfinder-help-tab-integrations").hide(),i=D.find("#"+s.namespace+"-help-integrations").hide().append(e('<div class="elfinder-help-integrations-desc"></div>').html(s.i18n("integrationWith"))),s.bind("helpIntegration",function(t){var a,o,r,l,c=i.children("ul:first");t.data&&(e.isPlainObject(t.data)?(a=Object.assign({link:"",title:"",banner:""},t.data),(a.title||a.link)&&(a.title||(a.title=a.link),o=a.link?e("<a></a>").attr("href",a.link).attr("target","_blank").text(a.title):e("<span></span>").text(a.title),a.banner&&(o=e("<span></span>").append(e("<img/>").attr(a.banner),o)))):(o=e(t.data),o.filter("a").each(function(){var t=e(this);t.attr("target")||t.attr("target","_blank")})),o&&(n.show(),c.length||(c=e('<ul class="elfinder-help-integrations"></ul>').appendTo(i)),a&&a.cmd?(l="elfinder-help-integration-"+a.cmd,r=c.find("ul."+l),r.length||(r=e('<ul class="'+l+'"></ul>'),c.append(e("<li></li>").append(e("<span></span>").html(s.i18n("cmd"+a.cmd))).append(r))),o=r.append(e("<li></li>").append(o))):c.append(e("<li></li>").append(o))))}).bind("themechange",function(){D.find("div.elfinder-help-term-theme").replaceWith(T())})),M&&(a=D.find(".elfinder-help-tab-debug").hide(),o=D.find("#"+s.namespace+"-help-debug").children("div:first"),r=o.children("ul:first").on("click",function(e){e.preventDefault(),e.stopPropagation()}),l.debug={},s.bind("backenddebug",function(e){M&&e.data&&e.data.debug&&(l.debug={options:e.data.options,debug:Object.assign({cmd:s.currentReqCmd},e.data.debug)},l.dialog&&F())})),D.find("#"+s.namespace+"-help-about").find(".apiver").text(s.api),l.dialog=l.fmDialog(D,{title:l.title,width:530,maxWidth:"window",maxHeight:"window",autoOpen:!1,destroyOnClose:!1,close:function(){M&&(a.hide(),o.tabs("destroy")),t=!1}}).on("click",function(e){e.stopPropagation()}).css({overflow:"hidden"}),p=l.dialog.children(".ui-tabs"),u=p.children(".ui-tabs-nav:first"),h=p.children(".ui-tabs-panel"),f=l.dialog.outerHeight(!0)-l.dialog.height(),l.dialog.closest(".ui-dialog").on("resize",function(){h.height(l.dialog.height()-f-u.outerHeight(!0)-20)}),d&&l.dialog.one("initContents",function(){e.ajax({url:l.options.helpSource?l.options.helpSource:d.replace("%s",s.lang),dataType:"html"}).done(function(t){e("#"+s.namespace+"-help-help").html(t)}).fail(function(){e.ajax({url:d.replace("%s","en"),dataType:"html"}).done(function(t){e("#"+s.namespace+"-help-help").html(t)})})}),l.state=0,s.trigger("helpBuilded",l.dialog)}).one("open",function(){var e=!1;s.one("backenddebug",function(){e=!0}).one("opendone",function(){requestAnimationFrame(function(){!e&&M&&(M=!1,a.hide(),o.hide(),r.hide())})})}),this.getstate=function(){return 0},this.exec=function(n,i){var s=i?i.tab:void 0,l=function(){M&&(o.tabs(),r.find("a:first").trigger("click"),a.show(),t=!0)};return l(),this.dialog.trigger("initContents").elfinderdialog("open").find((s?".elfinder-help-tab-"+s:".ui-tabs-nav li")+" a:first").trigger("click"),e.Deferred().resolve()}}).prototype={forceLoad:!0},i.prototype.commands.hidden=function(){this.hidden=!0,this.updateOnSelect=!1,this.getstate=function(){return-1}},i.prototype.commands.hide=function(){var t,n,i,a,o=this,r={};this.syncTitleOnChange=!0,this.shortcuts=[{pattern:"ctrl+shift+dot",description:this.fm.i18n("toggleHidden")}],this.init=function(){var e=this.fm;t=e.storage("hide")||{items:{}},n=Object.keys(t.items).length,this.title=e.i18n(t.show?"hideHidden":"showHidden"),o.update(void 0,o.title)},this.fm.bind("select contextmenucreate closecontextmenu",function(e,r){var s=(e.data?e.data.selected||e.data.targets:null)||r.selected();"select"===e.type&&e.data?a=e.data.origin:"contextmenucreate"===e.type&&(i=e.data.type),!s.length||("contextmenucreate"!==e.type&&"navbar"!==a||"cwd"===i)&&s[0]===r.cwd().hash?o.title=r.i18n(t.show?"hideHidden":"showHidden"):o.title=r.i18n("cmdhide"),"closecontextmenu"!==e.type?o.update("cwd"===i?n?0:-1:void 0,o.title):(i="",requestAnimationFrame(function(){o.update(void 0,o.title)}))}),this.getstate=function(e){return this.fm.cookieEnabled&&"cwd"!==i&&(e||this.fm.selected()).length||n?0:-1},this.exec=function(i,s){var l,c,d=this.fm,p=e.Deferred().done(function(){d.trigger("hide",{items:h,opts:s})}).fail(function(e){d.error(e)}),u=s||{},h=u.targets?u.targets:i||d.selected(),f=[];if(t=d.storage("hide")||{},e.isPlainObject(t)||(t={}),e.isPlainObject(t.items)||(t.items={}),("shortcut"===s._currentType||!h.length||"navbar"!==s._currentType&&"navbar"!==a&&h[0]===d.cwd().hash)&&(t.show?u.hide=!0:Object.keys(t.items).length&&(u.show=!0)),u.reset&&(u.show=!0,n=0),u.show||u.hide){if(u.show?t.show=!0:delete t.show,u.show)return d.storage("hide",u.reset?null:t),o.title=d.i18n("hideHidden"),o.update(u.reset?-1:void 0,o.title),e.each(t.items,function(e){var t=d.file(e,!0);t&&(d.searchStatus.state||!t.phash||d.file(t.phash))&&f.push(t)}),f.length&&(d.updateCache({added:f}),d.add({added:f})),u.reset&&(t={items:{}}),p.resolve();h=Object.keys(t.items)}return h.length&&(e.each(h,function(e,n){var i;t.items[n]||(i=d.file(n),i&&(r[n]=i.i18||i.name),t.items[n]=r[n]?r[n]:n)}),n=Object.keys(t.items).length,l=this.files(h),d.storage("hide",t),d.remove({removed:h}),t.show&&this.exec(void 0,{hide:!0}),u.hide||(c={},c.undo={cmd:"hide",callback:function(){var t=d.storage("hide");t&&(e.each(h,function(e,n){delete t.items[n]}),n=Object.keys(t.items).length,d.storage("hide",t),d.trigger("hide",{items:h,opts:{}}),o.update(n?0:-1)),d.updateCache({added:l}),d.add({added:l})}},c.redo={cmd:"hide",callback:function(){return d.exec("hide",void 0,{targets:h})}})),"rejected"==p.state()?p:p.resolve(c)}},(i.prototype.commands.home=function(){this.title="Home",this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+home ctrl+shift+up",description:"Home"}],this.getstate=function(){var e=this.fm.root(),t=this.fm.cwd().hash;return e&&t&&e!=t?0:-1},this.exec=function(){return this.fm.exec("open",this.fm.root())}}).prototype={forceLoad:!0},(i.prototype.commands.info=function(){var t=this.fm,n="elfinder-spinner",i="elfinder-info-button",a={calc:t.i18n("calc"),size:t.i18n("size"),unknown:t.i18n("unknown"),path:t.i18n("path"),aliasfor:t.i18n("aliasfor"),modify:t.i18n("modify"),perms:t.i18n("perms"),locked:t.i18n("locked"),dim:t.i18n("dim"),kind:t.i18n("kind"),files:t.i18n("files"),folders:t.i18n("folders"),roots:t.i18n("volumeRoots"),items:t.i18n("items"),yes:t.i18n("yes"),no:t.i18n("no"),link:t.i18n("link"),owner:t.i18n("owner"),group:t.i18n("group"),perm:t.i18n("perm"),getlink:t.i18n("getLink")},o=function(e,t){return t?e.replace(/\u200B/g,""):e.replace(/(\/|\\)/g,"$1​")};this.items=["size","aliasfor","path","link","dim","modify","perms","locked","owner","group","perm"],this.options.custom&&Object.keys(this.options.custom).length&&e.each(this.options.custom,function(e,t){t.label&&this.items.push(t.label)}),this.tpl={main:'<div class="ui-helper-clearfix elfinder-info-title {dirclass}"><span class="elfinder-cwd-icon {class} ui-corner-all"{style}></span>{title}</div><table class="elfinder-info-tb">{content}</table>',itemTitle:'<strong>{name}</strong><span class="elfinder-info-kind">{kind}</span>',groupTitle:"<strong>{items}: {num}</strong>",row:'<tr><td class="elfinder-info-label">{label} : </td><td class="{class}">{value}</td></tr>',spinner:'<span>{text}</span> <span class="'+n+" "+n+'-{name}"></span>'},this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+i"}],this.init=function(){e.each(a,function(e,n){a[e]=t.i18n(n)})},this.getstate=function(){return 0},this.exec=function(t){var r=this.files(t);r.length||(r=this.files([this.fm.cwd().hash]));var s,l,c,d,p,u,h,f,m,g=this,v=this.fm,b=this.options,y=this.tpl,w=y.row,x=r.length,k=[],C=y.main,z="{label}",T="{value}",A=[],j=null,O={title:v.i18n("selectionInfo"),width:"auto",close:function(){e(this).elfinderdialog("destroy"),j&&"pending"===j.state()&&j.reject(),e.grep(A,function(e){e&&"pending"===e.state()&&e.reject()})}},S=[],I=function(e,t,i){E.find("."+n+"-"+t).parent().html(e).addClass(i||"")},M=v.namespace+"-info-"+e.map(r,function(e){return e.hash}).join("-"),E=v.getUI().find("#"+M),F=[],D="",U="elfinder-font-mono elfinder-info-hash",P=[],q=v.ui.notify;if(q.is(":hidden")&&q.children(".elfinder-notify").length&&q.elfinderdialog("open").height("auto"),!x)return e.Deferred().reject();if(E.length)return E.elfinderdialog("toTop"),e.Deferred().resolve();if(f=v.storage("infohides")||v.arrayFlip(b.hideItems,!0),1===x){if(c=r[0],c.icon&&(D=" "+v.getIconStyle(c)),C=C.replace("{dirclass}",c.csscls?v.escape(c.csscls):"").replace("{class}",v.mime2class(c.mime)).replace("{style}",D),d=y.itemTitle.replace("{name}",v.escape(c.i18||c.name)).replace("{kind}",'<span title="'+v.escape(c.mime)+'">'+v.mime2kind(c)+"</span>"),l=v.tmb(c),c.read?"directory"!=c.mime||c.alias?s=v.formatSize(c.size):(s=y.spinner.replace("{text}",a.calc).replace("{name}","size"),S.push(c.hash)):s=a.unknown,!f.size&&k.push(w.replace(z,a.size).replace(T,s)),!f.aleasfor&&c.alias&&k.push(w.replace(z,a.aliasfor).replace(T,c.alias)),f.path||((h=v.path(c.hash,!0))?k.push(w.replace(z,a.path).replace(T,o(v.escape(h))).replace("{class}","elfinder-info-path")):(k.push(w.replace(z,a.path).replace(T,y.spinner.replace("{text}",a.calc).replace("{name}","path")).replace("{class}","elfinder-info-path")),A.push(v.path(c.hash,!0,{notify:null}).fail(function(){I(a.unknown,"path")}).done(function(e){I(o(e),"path")})))),!f.link&&c.read){var R,H=v.escape(c.name);if("1"==c.url)k.push(w.replace(z,a.link).replace(T,'<button class="'+i+" "+n+'-url">'+a.getlink+"</button>"));else{if(c.url)R=c.url;else if("directory"===c.mime)if(b.nullUrlDirLinkSelf&&null===c.url){var _=window.location;R=_.pathname+_.search+"#elf_"+c.hash}else""!==c.url&&v.option("url",!v.isRoot(c)&&c.phash||c.hash)&&(R=v.url(c.hash));else R=v.url(c.hash);R&&k.push(w.replace(z,a.link).replace(T,'<a href="'+R+'" target="_blank">'+H+"</a>"))}}f.dim||(c.dim?k.push(w.replace(z,a.dim).replace(T,c.dim)):c.mime.indexOf("image")!==-1&&(c.width&&c.height?k.push(w.replace(z,a.dim).replace(T,c.width+"x"+c.height)):c.size&&"0"!==c.size&&(k.push(w.replace(z,a.dim).replace(T,y.spinner.replace("{text}",a.calc).replace("{name}","dim"))),A.push(v.request({data:{cmd:"dim",target:c.hash},preventDefault:!0}).fail(function(){I(a.unknown,"dim")}).done(function(e){if(I(e.dim||a.unknown,"dim"),e.dim){var t=e.dim.split("x"),n=v.file(c.hash);n.width=t[0],n.height=t[1]}}))))),!f.modify&&k.push(w.replace(z,a.modify).replace(T,v.formatDate(c))),!f.perms&&k.push(w.replace(z,a.perms).replace(T,v.formatPermissions(c))),!f.locked&&k.push(w.replace(z,a.locked).replace(T,c.locked?a.yes:a.no)),!f.owner&&c.owner&&k.push(w.replace(z,a.owner).replace(T,c.owner)),!f.group&&c.group&&k.push(w.replace(z,a.group).replace(T,c.group)),!f.perm&&c.perm&&k.push(w.replace(z,a.perm).replace(T,v.formatFileMode(c.perm))),window.ArrayBuffer&&(v.options.cdns.sparkmd5||v.options.cdns.jssha)&&"directory"!==c.mime&&c.size>0&&(!b.showHashMaxsize||c.size<=b.showHashMaxsize)&&(P=[],e.each(v.storage("hashchekcer")||b.showHashAlgorisms,function(e,t){c[t]?k.push(w.replace(z,v.i18n(t)).replace(T,c[t]).replace("{class}",U)):(k.push(w.replace(z,v.i18n(t)).replace(T,y.spinner.replace("{text}",a.calc).replace("{name}",t))),P.push(t))}),P.length&&(m=e('<div class="elfinder-quicklook-info-progress"></div>'),A.push(v.getContentsHashes(c.hash,P,b.showHashOpts,{progressBar:m}).progress(function(t){e.each(P,function(e,n){t[n]&&I(t[n],n,U)})}).always(function(){e.each(P,function(e,t){I(a.unknown,t)})})))),b.custom&&e.each(b.custom,function(t,n){f[n.label]||n.mimes&&!e.grep(n.mimes,function(e){return c.mime===e||0===c.mime.indexOf(e+"/")}).length||n.hashRegex&&!c.hash.match(n.hashRegex)||(k.push(w.replace(z,v.i18n(n.label)).replace(T,n.tpl.replace("{id}",M))),n.action&&"function"==typeof n.action&&F.push(n.action))})}else C=C.replace("{class}","elfinder-cwd-icon-group"),d=y.groupTitle.replace("{items}",a.items).replace("{num}",x),p=e.grep(r,function(e){return"directory"==e.mime}).length,p?(u=e.grep(r,function(e){return!("directory"!==e.mime||e.phash&&!e.isroot)}).length,p-=u,k.push(w.replace(z,a.kind).replace(T,u===x||p===x?a[u?"roots":"folders"]:e.map({roots:u,folders:p,files:x-u-p},function(e,t){return e?a[t]+" "+e:null}).join(", "))),!f.size&&k.push(w.replace(z,a.size).replace(T,y.spinner.replace("{text}",a.calc).replace("{name}","size"))),S=e.map(r,function(e){return e.hash})):(s=0,e.each(r,function(e,t){var n=parseInt(t.size);n>=0&&s>=0?s+=n:s="unknown"}),k.push(w.replace(z,a.kind).replace(T,a.files)),!f.size&&k.push(w.replace(z,a.size).replace(T,v.formatSize(s))));return C=C.replace("{title}",d).replace("{content}",k.join("").replace(/{class}/g,"")),E=g.fmDialog(C,O),E.attr("id",M).one("mousedown",".elfinder-info-path",function(){e(this).html(o(e(this).html(),!0))}),P.length&&m.appendTo(E.find("."+n+"-"+P[0]).parent()),v.UA.Mobile&&e.fn.tooltip&&E.children(".ui-dialog-content .elfinder-info-title").tooltip({classes:{"ui-tooltip":"elfinder-ui-tooltip ui-widget-shadow"},tooltipClass:"elfinder-ui-tooltip ui-widget-shadow",track:!0}),c&&"1"==c.url&&E.on("click","."+n+"-url",function(){e(this).parent().html(y.spinner.replace("{text}",v.i18n("ntfurl")).replace("{name}","url")),v.request({data:{cmd:"url",target:c.hash},preventDefault:!0}).fail(function(){I(H,"url")}).done(function(e){if(e.url){I('<a href="'+e.url+'" target="_blank">'+H+"</a>"||H,"url");var t=v.file(c.hash);t.url=e.url}else I(H,"url")})}),l&&e("<img/>").on("load",function(){E.find(".elfinder-cwd-icon").addClass(l.className).css("background-image","url('"+l.url+"')")}).attr("src",l.url),S.length&&(j=v.getSize(S).done(function(e){I(e.formated,"size")}).fail(function(){I(a.unknown,"size")})),F.length&&e.each(F,function(e,t){try{t(c,v,E)}catch(n){v.debug("error",n)}}),e.Deferred().resolve()}}).prototype={forceLoad:!0},i.prototype.commands.mkdir=function(){var t,n=this.fm,i=this;this.value="",this.disableOnSearch=!0,this.updateOnSelect=!1,this.syncTitleOnChange=!0,this.mime="directory",this.prefix="untitled folder",this.exec=function(a,o){var r;return a&&a.length&&o&&o._currentType&&"navbar"===o._currentType?(this.origin=o._currentType,this.data={target:a[0]}):(r=n.cwd().hash===a[0],this.origin=t&&!r?t:"cwd",delete this.data),a||this.options.intoNewFolderToolbtn||n.getUI("cwd").trigger("unselectall"),this.move=this.value===n.i18n("cmdmkdirin"),e.proxy(n.res("mixin","make"),i)()},this.shortcuts=[{pattern:"ctrl+shift+n"}],this.init=function(){this.options.intoNewFolderToolbtn&&(this.syncTitleOnChange=!0)},n.bind("select contextmenucreate closecontextmenu",function(e){var a=(e.data?e.data.selected||e.data.targets:null)||n.selected();i.className="mkdir",t=e.data&&a.length?e.data.origin||e.data.type||"":"",i.options.intoNewFolderToolbtn||""!==t||(t="cwd"),a.length&&"navbar"!==t&&"cwd"!==t&&n.cwd().hash!==a[0]?(i.title=n.i18n("cmdmkdirin"),i.className+=" elfinder-button-icon-mkdirin"):i.title=n.i18n("cmdmkdir"),"closecontextmenu"!==e.type?i.update(void 0,i.title):requestAnimationFrame(function(){i.update(void 0,i.title)})}),this.getstate=function(i){var a=n.cwd(),o="navbar"===t||i&&i[0]!==a.hash?this.files(i||n.selected()):[],r=o.length;return"navbar"===t?r&&o[0].write&&o[0].read?0:-1:!a.write||r&&e.grep(o,function(e){return!(!e.read||e.locked)}).length!=r?-1:0}},i.prototype.commands.mkfile=function(){var t=this;this.disableOnSearch=!0,this.updateOnSelect=!1,this.mime="text/plain",this.prefix="untitled file.txt",this.variants=[],this.getTypeName=function(e,n){var i,a=t.fm;return i=(i=a.messages["kind"+a.kinds[e]])?a.i18n(["extentiontype",n.toUpperCase(),i]):a.i18n(["extentionfile",n.toUpperCase()])},this.fm.bind("open reload canMakeEmptyFile",function(){var n=t.fm,i=n.getCommand("edit").getMkfileHides();t.variants=[],n.mimesCanMakeEmpty&&e.each(n.mimesCanMakeEmpty,function(e,a){a&&!i[e]&&n.uploadMimeCheck(e)&&t.variants.push([e,t.getTypeName(e,a)])}),t.change()}),this.getstate=function(){return this.fm.cwd().write?0:-1},this.exec=function(n,i){var a,o,r=t.fm;if(a=r.mimesCanMakeEmpty[i]){if(r.uploadMimeCheck(i))return this.mime=i,this.prefix=r.i18n(["untitled file",a]),e.proxy(r.res("mixin","make"),t)();o=["errMkfile",t.getTypeName(i,a)]}return e.Deferred().reject(o)}},i.prototype.commands.netmount=function(){var t,n=this,i=!1;this.alwaysEnabled=!0,this.updateOnSelect=!1,this.drivers=[],this.handlers={load:function(){var t=n.fm;t.cookieEnabled&&t.one("open",function(){n.drivers=t.netDrivers,n.drivers.length&&e.each(n.drivers,function(){var e=n.options[this];e&&(i=!0,e.integrateInfo&&t.trigger("helpIntegration",Object.assign({cmd:"netmount"},e.integrateInfo)))})})}},this.getstate=function(){return i?0:-1},this.exec=function(){var i,a=n.fm,o=e.Deferred(),r=n.options,s=function(){var s,l=function(){c.protocol.trigger("change","winfocus")},c={protocol:e("<select></select>").on("change",function(e,n){var o=this.value;t.find(".elfinder-netmount-tr").hide(),t.find(".elfinder-netmount-tr-"+o).show(),i&&i.children(".ui-dialog-buttonpane:first").find("button").show(),"function"==typeof r[o].select&&r[o].select(a,e,n)}).addClass("ui-corner-all")},d={title:a.i18n("netMountDialogTitle"),resizable:!0,modal:!0,destroyOnClose:!1,open:function(){e(window).on("focus."+a.namespace,l),c.protocol.trigger("change")},close:function(){"pending"==o.state()&&o.reject(),e(window).off("focus."+a.namespace,l)},buttons:{}},p=function(){var i,s=c.protocol.val(),l={cmd:"netmount",protocol:s},d=r[s];return e.each(t.find("input.elfinder-netmount-inputs-"+s),function(t,n){var i,a;a=e(n),a.is(":radio,:checkbox")?a.is(":checked")&&(i=e.trim(a.val())):i=e.trim(a.val()),i&&(l[n.name]=i)}),l.host?(l.mnt2res&&(i=!0),a.request({data:l,notify:{type:"netmount",cnt:1,hideCnt:!0}}).done(function(e){var t;e.added&&e.added.length&&(i&&c.protocol.trigger("change","reset"),e.added[0].phash&&(t=a.file(e.added[0].phash))&&(t.dirs||(t.dirs=1,a.change({changed:[t]}))),a.one("netmountdone",function(){a.exec("open",e.added[0].hash)})),o.resolve()}).fail(function(e){d.fail&&"function"==typeof d.fail&&d.fail(a,a.parseError(e)),o.reject(e)}),void n.dialog.elfinderdialog("close")):a.trigger("error",{error:"errNetMountHostReq",opts:{modal:!0}})},u=e('<form autocomplete="off"></form>').on("keydown","input",function(t){var n,i=!0;t.keyCode===e.ui.keyCode.ENTER&&(e.each(u.find("input:visible:not(.elfinder-input-optional)"),function(){if(""===e(this).val())return i=!1,n=e(this),!1}),i?p():n.trigger("focus"))}),h=e("<div></div>");return t=e('<table class="elfinder-info-tb elfinder-netmount-tb"></table>').append(e("<tr></tr>").append(e("<td>"+a.i18n("protocol")+"</td>")).append(e("<td></td>").append(c.protocol))),e.each(n.drivers,function(n,i){r[i]&&(c.protocol.append('<option value="'+i+'">'+a.i18n(r[i].name||i)+"</option>"),e.each(r[i].inputs,function(n,o){o.attr("name",n),"hidden"!=o.attr("type")?(o.addClass("ui-corner-all elfinder-netmount-inputs-"+i),t.append(e("<tr></tr>").addClass("elfinder-netmount-tr elfinder-netmount-tr-"+i).append(e("<td>"+a.i18n(n)+"</td>")).append(e("<td></td>").append(o)))):(o.addClass("elfinder-netmount-inputs-"+i),h.append(o))}),r[i].protocol=c.protocol)}),t.append(h),t.find(".elfinder-netmount-tr").hide(),t.find(".elfinder-netmount-tr-"+n.drivers[0]).show(),d.buttons[a.i18n("btnMount")]=p,d.buttons[a.i18n("btnCancel")]=function(){n.dialog.elfinderdialog("close")},t.find("select,input").addClass("elfinder-tabstop"),s=n.fmDialog(u.append(t),d).ready(function(){c.protocol.trigger("change"),s.elfinderdialog("posInit")}),i=s.closest(".ui-dialog"),s};return n.dialog?n.dialog.elfinderdialog("open"):n.dialog=s(),o.promise()},n.fm.bind("netmount",function(e){var i=e.data||null,a=n.options,o=function(){a[i.protocol]&&"function"==typeof a[i.protocol].done&&(a[i.protocol].done(n.fm,i),t.find("select,input").addClass("elfinder-tabstop"),n.dialog.elfinderdialog("tabstopsInit"))};i&&i.protocol&&(i.mode&&"redirect"===i.mode?n.fm.request({data:{cmd:"netmount",protocol:i.protocol,host:i.host,user:"init",pass:"return",options:i.options},preventDefault:!0}).done(function(e){i=JSON.parse(e.body),o()}):o())})},i.prototype.commands.netunmount=function(){this.alwaysEnabled=!0,this.updateOnSelect=!1,this.drivers=[],this.handlers={load:function(){this.drivers=this.fm.netDrivers}},this.getstate=function(e){var t,n=this.fm;return e&&this.drivers.length&&!this._disabled&&(t=n.file(e[0]))&&t.netkey?0:-1},this.exec=function(t){var n=this,i=this.fm,a=e.Deferred().fail(function(e){e&&i.error(e)}),o=i.file(t[0]),r=function(t){var n,a=[];return i.leafRoots&&(n=[],e.each(i.leafRoots,function(a,o){var r,s=i.parents(a);(r=e.inArray(t,s))!==-1&&(r=s.length-r,e.each(o,function(e,t){n.push({i:r,hash:t})}))}),n.length&&(n.sort(function(e,t){return e.i<t.i}),e.each(n,function(e,t){a.push(t.hash)}))),a};return this._disabled?a.reject():("pending"==a.state()&&i.confirm({title:n.title,text:i.i18n("confirmUnmount",o.name),accept:{label:"btnUnmount",callback:function(){var t=o.hash,s=r(t),l=[],c=[],d=function(){e.when(l).done(function(){i.request({data:{cmd:"netmount",protocol:"netunmount",host:o.netkey,user:t,pass:"dum"},notify:{type:"netunmount",cnt:1,hideCnt:!0},preventFail:!0}).fail(function(e){a.reject(e)}).done(function(e){o.volumeid&&delete i.volumeExpires[o.volumeid],a.resolve()})}).fail(function(e){c.length&&i.remove({removed:c}),a.reject(e)})};s.length?i.confirm({title:n.title,text:function(){var t=["unmountChildren"];return e.each(s,function(e,n){t.push([i.file(n).name])}),t}(),accept:{label:"btnUnmount",callback:function(){e.each(s,function(e,t){var n=i.file(t);n.netkey&&l.push(i.request({data:{cmd:"netmount",protocol:"netunmount",host:n.netkey,user:n.hash,pass:"dum"},notify:{type:"netunmount",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(e){e.removed&&(n.volumeid&&delete i.volumeExpires[n.volumeid],c=c.concat(e.removed))}))}),d()}},cancel:{label:"btnCancel",callback:function(){a.reject()}}}):(l=null,d())}},cancel:{label:"btnCancel",callback:function(){a.reject()}}}),a)}},(i.prototype.commands.open=function(){var t=this.fm,n=this;this.alwaysEnabled=!0,this.noChangeDirOnRemovedCwd=!0,this._handlers={dblclick:function(e){var i=e.data&&e.data.file?[e.data.file]:void 0;0===n.getstate(i)&&(e.preventDefault(),t.exec("open",i))},"select enable disable reload":function(e){this.update("disable"==e.type?-1:void 0)}},this.shortcuts=[{pattern:"ctrl+down numpad_enter"+("mac"!=t.OS&&" enter")}],this.getstate=function(n){var i=this.files(n),a=i.length;return 1==a?i[0].read?0:-1:a&&!t.UA.Mobile&&e.grep(i,function(e){return!("directory"==e.mime||!e.read)}).length==a?0:-1},this.exec=function(n,i){var a,o,r,s,l,c,d,p,u,h,f,m,g=e.Deferred().fail(function(e){e&&t.error(e)}),v=this.files(n),b=v.length,y="object"==typeof i&&i.thash,w=this.options,x=w.into||"window";if(!b&&!y)return g.reject();if(y||1==b&&(a=v[0])&&"directory"==a.mime)return y||!a||a.read?t.keyState.ctrlKey&&(t.keyState.shiftKey||"function"!=typeof t.options.getFileCallback)&&t.getCommand("opennew")?t.exec("opennew",[y?y:a.hash]):t.request({data:{cmd:"open",target:y||a.hash},notify:{type:"open",cnt:1,hideCnt:!0},syncOnFail:!0,lazy:!1}):g.reject(["errOpen",a.name,"errPerm"]);if(v=e.grep(v,function(e){return"directory"!=e.mime}),b!=v.length)return g.reject();var k=function(){var i,f,m,y=function(n){var p=e("<a>").hide().appendTo(e("body"));if(t.UA.Mobile||!h){if(u)h?p.attr("target","_blank"):p.attr("download",a.name),p.attr("href",n).get(0).click();else if(i=window.open(n),!i)return g.reject("errPopup")}else{if(m="string"==typeof w.method&&"get"===w.method.toLowerCase(),!m&&0===n.indexOf(t.options.url)&&t.customData&&Object.keys(t.customData).length&&!a.mime.match(/^(?:video|audio)/)&&(n=""),"window"===x?(s=c=Math.round(2*screen.availWidth/3),l=d=Math.round(2*screen.availHeight/3),parseInt(a.width)&&parseInt(a.height)?(s=parseInt(a.width),l=parseInt(a.height)):a.dim&&(o=a.dim.split("x"),s=parseInt(o[0]),l=parseInt(o[1])),c>=s&&d>=l?(c=s,d=l):s-c>l-d?d=Math.round(l*(c/s)):c=Math.round(s*(d/l)),r="width="+c+",height="+d,i=window.open(n,f,r+",top=50,left=50,scrollbars=yes,resizable=yes,titlebar=no")):("tabs"===x&&(f=a.hash),i=window.open("about:blank",f)),!i)return g.reject("errPopup");if(""===n){var v=document.createElement("form");v.action=t.options.url,v.method="POST",v.target=f,v.style.display="none";var b=Object.assign({},t.customData,{cmd:"file",target:a.hash,_t:a.ts||parseInt(+new Date/1e3)});e.each(b,function(e,t){var n=document.createElement("input");n.name=e,n.value=t,v.appendChild(n)}),document.body.appendChild(v),v.submit()}else"window"!==x&&(i.location=n);e(i).trigger("focus")}p.remove()};try{p=new RegExp(t.option("dispInlineRegex"),"i")}catch(k){p=!1}for(u="string"==typeof e("<a>").get(0).download,b=v.length;b--;){if(f="elf_open_window",a=v[b],!a.read)return g.reject(["errOpen",a.name,"errPerm"]);h=p&&a.mime.match(p),t.openUrl(a.hash,!h,y)}return g.resolve(n)};if(b>1)t.confirm({title:"openMulti",text:["openMultiConfirm",b+""],accept:{label:"cmdopen",callback:function(){k()}},cancel:{label:"btnCancel",callback:function(){g.reject()}},buttons:t.getCommand("zipdl")&&t.isCommandEnabled("zipdl",t.cwd().hash)?[{label:"cmddownload",callback:function(){t.exec("download",n),g.reject()}}]:[]});else{if(f=t.storage("selectAction")||w.selectAction,f&&(e.each(f.split("/"),function(){var e=this.valueOf();return("open"===e||!(m=t.getCommand(e))||!m.enabled())&&void(m=null)}),m))return t.exec(m.name);k()}return g}}).prototype={forceLoad:!0},i.prototype.commands.opendir=function(){this.alwaysEnabled=!0,this.getstate=function(){var e,t=this.fm.selected(),n=t.length;return 1!==n?-1:(e=this.fm.getUI("workzone"),e.hasClass("elfinder-search-result")?0:-1)},this.exec=function(t){var n,i=this.fm,a=e.Deferred(),o=this.files(t),r=o.length;return r&&o[0].phash?(n=o[0].phash,i.trigger("searchend",{noupdate:!0}),i.request({data:{cmd:"open",target:n},notify:{type:"open",cnt:1,hideCnt:!0},syncOnFail:!1}),a):a.reject()}},i.prototype.commands.opennew=function(){var t=this.fm;this.shortcuts=[{pattern:("function"==typeof t.options.getFileCallback?"shift+":"")+"ctrl+enter"}],this.getstate=function(e){var t=this.files(e),n=t.length;return 1===n&&"directory"===t[0].mime&&t[0].read?0:-1},this.exec=function(t){var n,i,a,o,r=e.Deferred(),s=this.files(t),l=s.length,c=this.options;return 1===l&&(n=s[0])&&"directory"===n.mime?(i=window.location,a=c.url?c.url:i.pathname,c.useOriginQuery&&(a.match(/\?/)?i.search&&(a+="&"+i.search.substr(1)):a+=i.search),a+="#elf_"+n.hash,o=window.open(a,"_blank"),setTimeout(function(){o.focus()},1e3),r.resolve()):r.reject()}},i.prototype.commands.paste=function(){this.updateOnSelect=!1,this.handlers={changeclipboard:function(){this.update()}},this.shortcuts=[{pattern:"ctrl+v shift+insert"}],this.getstate=function(e){if(this._disabled)return-1;if(e){if(Array.isArray(e)){if(1!=e.length)return-1;e=this.fm.file(e[0])}}else e=this.fm.cwd();return this.fm.clipboard().length&&"directory"==e.mime&&e.write?0:-1},this.exec=function(t,n){var i,a,o,r=this,s=r.fm,l=n||{},c=t?this.files(t)[0]:s.cwd(),d=s.clipboard(),p=d.length,u=!!p&&d[0].cut,h=l._cmd?l._cmd:u?"move":"copy",f="err"+h.charAt(0).toUpperCase()+h.substr(1),m=[],g=[],v=e.Deferred().fail(function(e){e&&s.error(e)}).always(function(){s.unlockfiles({files:e.map(d,function(e){return e.hash})})}),b=function(t){return t.length&&s._commands.duplicate?s.exec("duplicate",t):e.Deferred().resolve()},y=function(t){var n,i=e.Deferred(),a=[],o={},d=function(t,n){for(var i=[],a=t.length;a--;)e.inArray(t[a].name,n)!==-1&&i.unshift(a);return i},p=function(e){var n=a[e],o=t[n],r=e==a.length-1;o&&s.confirm({title:s.i18n(h+"Files"),text:["errExists",o.name,"restore"===h?"confirmRest":"confirmRepl"],all:!r,accept:{label:"btnYes",callback:function(n){r||n?m(t):p(++e)}},reject:{label:"btnNo",callback:function(n){var i;if(n)for(i=a.length;e<i--;)t[a[i]].remove=!0;else t[a[e]].remove=!0;r||n?m(t):p(++e)}},cancel:{label:"btnCancel",callback:function(){i.resolve()}},buttons:[{label:"btnBackup",callback:function(n){var i;if(n)for(i=a.length;e<i--;)t[a[i]].rename=!0;else t[a[e]].rename=!0;r||n?m(t):p(++e)}}]})},f=function(n){var i,r={};n&&(Array.isArray(n)?n.length&&("string"==typeof n[0]?a=d(t,n):(e.each(n,function(e,t){r[t.name]=t.hash}),a=d(t,e.map(r,function(e,t){return t})),e.each(t,function(e,t){r[t.name]&&(o[r[t.name]]=t.name)}))):(i=[],a=e.map(n,function(e){return"string"==typeof e?e:(i=i.concat(e),!1)}),i.length&&(a=a.concat(i)),a=d(t,a),o=n)),a.length?p(0):m(t)},m=function(t){var n,a,r=[],d=e.grep(t,function(e){return e.rename&&r.push(e.name),!e.remove}),p=d.length;return p?(n=e.map(d,function(e){return e.hash}),a={cmd:"paste",dst:c.hash,targets:n,cut:u?1:0,renames:r,hashes:o,suffix:s.options.backupSuffix},s.api<2.1&&(a.src=d[0].phash),void s.request({data:a,notify:{type:h,cnt:p},cancel:!0,navigate:{toast:l.noToast?{}:{inbuffer:{msg:s.i18n(["complete",s.i18n("cmd"+h)]),action:{cmd:"open",msg:"cmdopendir",data:[c.hash],done:"select",cwdNot:c.hash}}}}}).done(function(t){var n={},o=t.added&&t.added.length?t.added:null;u&&o&&(e.each(d,function(t,i){var a=i.phash,r=function(t){var n;return e.each(o,function(e,i){if(i.name===t)return n=i.hash,!1}),n},s=r(i.name);s&&(n[a]?n[a].push(s):n[a]=[s])}),Object.keys(n).length&&(t.undo={cmd:"move",callback:function(){var t=[];return e.each(n,function(e,n){t.push(s.request({data:{cmd:"paste",dst:e,targets:n,cut:1},notify:{type:"undo",cnt:n.length}}))}),e.when.apply(null,t)}},t.redo={cmd:"move",callback:function(){return s.request({data:a,notify:{type:"redo",cnt:p}})}})),i.resolve(t)}).fail(function(e){i.reject(),0===e&&s.sync()}).always(function(){s.unlockfiles({files:d})})):i.resolve()};return s.isCommandEnabled(r.name,c.hash)&&t.length?(s.oldAPI?m(t):s.option("copyOverwrite",c.hash)?(n=e.map(t,function(e){return e.name}),c.hash==s.cwd().hash?f(e.map(s.files(),function(e){return e.phash==c.hash?{hash:e.hash,name:e.name}:null})):s.request({data:{cmd:"ls",target:c.hash,intersect:n},notify:{type:"prepare",cnt:1,hideCnt:!0},preventFail:!0}).always(function(e){f(e.list)})):m(t),i):i.resolve()};return p&&c&&"directory"==c.mime?c.write?(i=s.parents(c.hash),e.each(d,function(t,n){return n.read?u&&n.locked?!v.reject(["errLocked",n.name]):e.inArray(n.hash,i)!==-1?!v.reject(["errCopyInItself",n.name]):n.mime&&"directory"!==n.mime&&!s.uploadMimeCheck(n.mime,c.hash)?!v.reject([f,n.name,"errUploadMime"]):(a=s.parents(n.hash),a.pop(),e.inArray(c.hash,a)!==-1&&e.grep(a,function(e){var t=s.file(e);return t.phash==c.hash&&t.name==n.name}).length?!v.reject(["errReplByChild",n.name]):void(n.phash==c.hash?g.push(n.hash):m.push({hash:n.hash,phash:n.phash,name:n.name}))):!v.reject([f,n.name,"errPerm"])}),"rejected"===v.state()?v:(o=e.Deferred(),u&&r.options.moveConfirm?s.confirm({title:"moveFiles",text:s.i18n("confirmMove",c.i18||c.name),accept:{label:"btnYes",callback:function(){o.resolve()}},cancel:{label:"btnCancel",callback:function(){o.reject()}}}):o.resolve(),o.done(function(){e.when(b(g),y(m)).done(function(e,t){v.resolve(t&&t.undo?t:void 0)}).fail(function(){v.reject()}).always(function(){u&&s.clipboard([])})}).fail(function(){v.reject()}),v)):v.reject([f,d[0].name,"errPerm"]):v.reject()}},i.prototype.commands.places=function(){var t=this,n=this.fm,i=function(n){return e.grep(t.files(n),function(e){return"directory"==e.mime})},a=null;this.getstate=function(e){var t=this.hashes(e),n=t.length;
return a&&n&&n==i(t).length?0:-1},this.exec=function(t){var n=this.files(t);return a.trigger("regist",[n]),e.Deferred().resolve()},n.one("load",function(){a=n.ui.places})},i.prototype.commands.preference=function(){var t,n,i=this,a=this.fm,o="replace",r='<li class="'+a.res("class","tabstab")+' elfinder-preference-tab-{id}"><a href="#'+a.namespace+'-preference-{id}" id="'+a.namespace+'-preference-tab-{id}" class="ui-tabs-anchor {class}">{title}</a></li>',s=e('<div class="ui-tabs ui-widget ui-widget-content ui-corner-all elfinder-preference">'),l=e('<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-top">'),c=e('<div class="elfinder-preference-tabs ui-tabs-panel ui-widget-content ui-corner-bottom"></div>'),d=(e("base").length?document.location.href.replace(/#.*$/,""):"",function(t){e("#"+a.namespace+"-preference-tab-"+t).trigger("mouseover").trigger("click"),n=t}),p=a.res("class","tabsactive"),u=function(){var u=i.options.categories||{language:["language"],theme:["theme"],toolbar:["toolbarPref"],workspace:["iconSize","columnPref","selectAction","makefileTypes","useStoredEditor","editorMaximized","useFullscreen","showHidden"],dialog:["autoFocusDialog"],selectionInfo:["infoItems","hashChecker"],reset:["clearBrowserData"],all:!0},h=i.options.prefs||["language","theme","toolbarPref","iconSize","columnPref","selectAction","makefileTypes","useStoredEditor","editorMaximized","useFullscreen","showHidden","infoItems","hashChecker","autoFocusDialog","clearBrowserData"];a.cookieEnabled||delete u.language,h=a.arrayFlip(h,!0),a.options.getFileCallback&&delete h.selectAction,a.UA.Fullscreen||delete h.useFullscreen,h.language&&(h.language=function(){var t=e("<select></select>").on("change",function(){var t=e(this).val();a.storage("lang",t),e("#"+a.id).elfinder("reload")}),n=[],o=i.options.langs||{ar:"العربية",bg:"Български",ca:"Català",cs:"Čeština",da:"Dansk",de:"Deutsch",el:"Ελληνικά",en:"English",es:"Español",fa:"فارسی",fo:"Føroyskt",fr:"Français",fr_CA:"Français (Canada)",he:"עברית",hr:"Hrvatski",hu:"Magyar",id:"Bahasa Indonesia",it:"Italiano",ja:"日本語",ko:"한국어",nl:"Nederlands",no:"Norsk",pl:"Polski",pt_BR:"Português",ro:"Română",ru:"Pусский",si:"සිංහල",sk:"Slovenčina",sl:"Slovenščina",sr:"Srpski",sv:"Svenska",tr:"Türkçe",ug_CN:"ئۇيغۇرچە",uk:"Український",vi:"Tiếng Việt",zh_CN:"简体中文",zh_TW:"正體中文"};return a.cookieEnabled?(e.each(o,function(e,t){n.push('<option value="'+e+'">'+t+"</option>")}),t.append(n.join("")).val(a.lang)):e()}()),h.theme&&(h.theme=function(){var t=a.options.themes?Object.keys(a.options.themes).length:0;if(0===t||1===t&&a.options.themes["default"])return null;var n=e("<select></select>").on("change",function(){var t=e(this).val();a.changeTheme(t).storage("theme",t)}),i={image:'<img class="elfinder-preference-theme elfinder-preference-theme-image" src="$2" />',link:'<a href="$1" target="_blank" title="$3">$2</a>',data:'<dt>$1</dt><dd><span class="elfinder-preference-theme elfinder-preference-theme-$0">$2</span></dd>'},o=["image","description","author","email","license"],r=e('<button class="ui-button ui-corner-all ui-widget elfinder-preference-theme-default"></button>').text(a.i18n("default")).on("click",function(e){n.val("default").trigger("change")}),s=e('<div class="elfinder-reference-hide-taball"></div>').on("click","button",function(){var t=e(this).data("themeid");n.val(t).trigger("change")});return a.options.themes["default"]||n.append('<option value="default">'+a.i18n("default")+"</option>"),e.each(a.options.themes,function(t,r){var l,c=e('<option class="elfinder-theme-option-'+t+'" value="'+t+'">'+a.i18n(t)+"</option>"),d=e('<fieldset class="ui-widget ui-widget-content ui-corner-all elfinder-theme-list-'+t+'"><legend>'+a.i18n(t)+'</legend><div><span class="elfinder-spinner"></span></div></fieldset>');n.append(c),s.append(d),l=setTimeout(function(){d.find("span.elfinder-spinner").replaceWith(a.i18n(["errRead",t]))},1e4),a.getTheme(t).always(function(){l&&clearTimeout(l)}).done(function(r){var s,l=e(),p=e("<dl></dl>");s=r.link?i.link.replace(/\$1/g,r.link).replace(/\$3/g,a.i18n("website")):"$2",r.name&&c.html(a.i18n(r.name)),d.children("legend").html(s.replace(/\$2/g,a.i18n(r.name)||t)),e.each(o,function(o,s){var l,c=i[s]||i.data;r[s]&&(l=c.replace(/\$0/g,a.escape(s)).replace(/\$1/g,a.i18n(s)).replace(/\$2/g,a.i18n(r[s])),"image"===s&&r.link&&(l=e(l).on("click",function(){n.val(t).trigger("change")}).attr("title",a.i18n("select"))),p.append(l))}),l=l.add(p),l=l.add(e('<div class="elfinder-preference-theme-btn"></div>').append(e('<button class="ui-button ui-corner-all ui-widget"></button>').data("themeid",t).html(a.i18n("select")))),d.find("span.elfinder-spinner").replaceWith(l)}).fail(function(){d.find("span.elfinder-spinner").replaceWith(a.i18n(["errRead",t]))})}),e("<div></div>").append(n.val(a.theme&&a.theme.id?a.theme.id:"default"),r,s)}()),h.toolbarPref&&(h.toolbarPref=function(){var t=e.map(a.options.uiOptions.toolbar,function(t){return e.isArray(t)?t:null}),n=[],i=a.storage("toolbarhides")||{};return e.each(t,function(){var e=this,t=a.i18n("cmd"+e);t==="cmd"+e&&(t=a.i18n(e)),n.push('<span class="elfinder-preference-toolbar-item"><label><input type="checkbox" value="'+e+'" '+(i[e]?"":"checked")+"/>"+t+"</label></span>")}),e(n.join(" ")).on("change","input",function(){var t=e(this).val(),n=e(this).is(":checked");n||i[t]?n&&i[t]&&delete i[t]:i[t]=!0,a.storage("toolbarhides",i),a.trigger("toolbarpref")})}()),h.iconSize&&(h.iconSize=function(){var t=a.options.uiOptions.cwd.iconsView.sizeMax||3,n=a.storage("iconsize")||a.options.uiOptions.cwd.iconsView.size||0,i=e('<div class="touch-punch"></div>').slider({classes:{"ui-slider-handle":"elfinder-tabstop"},value:n,max:t,slide:function(e,t){a.getUI("cwd").trigger("iconpref",{size:t.value})},change:function(e,t){a.storage("iconsize",t.value)}});return a.getUI("cwd").on("iconpref",function(e,t){i.slider("option","value",t.size)}),i}()),h.columnPref&&(h.columnPref=function(){var t=a.options.uiOptions.cwd.listView.columns,n=[],i=a.storage("columnhides")||{};return e.each(t,function(){var e=this,t=a.getColumnName(e);n.push('<span class="elfinder-preference-column-item"><label><input type="checkbox" value="'+e+'" '+(i[e]?"":"checked")+"/>"+t+"</label></span>")}),e(n.join(" ")).on("change","input",function(){var t=e(this).val(),n=e(this).is(":checked");n||i[t]?n&&i[t]&&delete i[t]:i[t]=!0,a.storage("columnhides",i),a.trigger("columnpref",{repaint:!0})})}()),h.selectAction&&(h.selectAction=function(){var t=e("<select></select>").on("change",function(){var t=e(this).val();a.storage("selectAction","default"===t?null:t)}),n=[],o=i.options.selectActions,r=a.getCommand("open").options.selectAction||"open";return e.inArray(r,o)===-1&&o.unshift(r),e.each(o,function(t,i){var o=e.map(i.split("/"),function(e){var t=a.i18n("cmd"+e);return t==="cmd"+e&&(t=a.i18n(e)),t});n.push('<option value="'+i+'">'+o.join("/")+"</option>")}),t.append(n.join("")).val(a.storage("selectAction")||r)}()),h.makefileTypes&&(h.makefileTypes=function(){var t=a.getCommand("edit").getMkfileHides(),n=function(){var n=[];return t=a.getCommand("edit").getMkfileHides(),e.each(a.mimesCanMakeEmpty,function(e,i){var o=a.getCommand("mkfile").getTypeName(e,i);n.push('<span class="elfinder-preference-column-item" title="'+a.escape(o)+'"><label><input type="checkbox" value="'+e+'" '+(t[e]?"":"checked")+"/>"+i+"</label></span>")}),n.join(" ")},i=e("<div></div>").on("change","input",function(){var n=e(this).val(),i=e(this).is(":checked");i||t[n]?i&&t[n]&&delete t[n]:t[n]=!0,a.storage("mkfileHides",t),a.trigger("canMakeEmptyFile")}).append(n()),o=e("<div></div>").append(e('<input type="text" placeholder="'+a.i18n("typeOfTextfile")+'"/>').on("keydown",function(t){t.keyCode===e.ui.keyCode.ENTER&&e(this).next().trigger("click")}),e('<button class="ui-button"></button>').html(a.i18n("add")).on("click",function(){var t,n=e(this).prev(),i=n.val(),o=a.getUI("toast"),r=function(){return o.appendTo(n.closest(".ui-dialog")),a.toast({msg:a.i18n("errUsupportType"),mode:"warning",onHidden:function(){1===o.children().length&&o.appendTo(a.getUI())}}),n.trigger("focus"),!1};if(!i.match(/\//)){if(i=a.arrayFlip(a.mimeTypes)[i],!i)return r();n.val(i)}return a.mimeIsText(i)&&a.mimeTypes[i]?(a.trigger("canMakeEmptyFile",{mimes:[i],unshift:!0}),t={},t[i]=a.mimeTypes[i],a.storage("mkfileTextMimes",Object.assign(t,a.storage("mkfileTextMimes")||{})),n.val(""),o.appendTo(n.closest(".ui-dialog")),void a.toast({msg:a.i18n(["complete",i+" ("+t[i]+")"]),onHidden:function(){1===o.children().length&&o.appendTo(a.getUI())}})):r()}),e('<button class="ui-button"></button>').html(a.i18n("reset")).on("click",function(){a.one("canMakeEmptyFile",{done:function(){i.empty().append(n())}}),a.trigger("canMakeEmptyFile",{resetTexts:!0})}));return a.bind("canMakeEmptyFile",{done:function(e){e.data&&e.data.mimes&&e.data.mimes.length&&i.empty().append(n())}}),e("<div></div>").append(i,o)}()),h.useStoredEditor&&(h.useStoredEditor=e('<input type="checkbox"/>').prop("checked",function(){var e=a.storage("useStoredEditor");return e?e>0:a.options.commandsOptions.edit.useStoredEditor}()).on("change",function(t){a.storage("useStoredEditor",e(this).is(":checked")?1:-1)})),h.editorMaximized&&(h.editorMaximized=e('<input type="checkbox"/>').prop("checked",function(){var e=a.storage("editorMaximized");return e?e>0:a.options.commandsOptions.edit.editorMaximized}()).on("change",function(t){a.storage("editorMaximized",e(this).is(":checked")?1:-1)})),h.useFullscreen&&(h.useFullscreen=e('<input type="checkbox"/>').prop("checked",function(){var e=a.storage("useFullscreen");return e?e>0:"screen"===a.options.commandsOptions.fullscreen.mode}()).on("change",function(t){a.storage("useFullscreen",e(this).is(":checked")?1:-1)})),h.showHidden&&!function(){var t,n=function(){var n,i=a.storage("hide"),o=[];i&&i.items&&e.each(i.items,function(e,t){o.push(a.escape(t))}),r.prop("disabled",!o.length)[o.length?"removeClass":"addClass"]("ui-state-disabled"),n=o.length?o.join("\n"):"",h.showHidden.attr("title",n),t&&h.showHidden.tooltip("option","content",n.replace(/\n/g,"<br>")).tooltip("close")},i=e('<input type="checkbox"/>').prop("checked",function(){var e=a.storage("hide");return e&&e.show}()).on("change",function(t){var n={};n[e(this).is(":checked")?"show":"hide"]=!0,a.exec("hide",void 0,n)}),o=e('<button class="ui-button ui-corner-all ui-widget"></button>').append(a.i18n("reset")).on("click",function(){a.exec("hide",void 0,{reset:!0}),e(this).parent().find("input:first").prop("checked",!1),n()}),r=e().add(i).add(o);h.showHidden=e("<div></div>").append(i,o),a.bind("hide",function(e){var t=e.data;t.opts&&(t.opts.show||t.opts.hide)||n()}),a.UA.Mobile&&e.fn.tooltip&&(t=!0,h.showHidden.tooltip({classes:{"ui-tooltip":"elfinder-ui-tooltip ui-widget-shadow"},tooltipClass:"elfinder-ui-tooltip ui-widget-shadow",track:!0}).css("user-select","none"),o.css("user-select","none")),n()}(),h.infoItems&&(h.infoItems=function(){var t=a.getCommand("info").items,n=[],i=a.storage("infohides")||a.arrayFlip(a.options.commandsOptions.info.hideItems,!0);return e.each(t,function(){var e=this,t=a.i18n(e);n.push('<span class="elfinder-preference-info-item"><label><input type="checkbox" value="'+e+'" '+(i[e]?"":"checked")+"/>"+t+"</label></span>")}),e(n.join(" ")).on("change","input",function(){var t=e(this).val(),n=e(this).is(":checked");n||i[t]?n&&i[t]&&delete i[t]:i[t]=!0,a.storage("infohides",i),a.trigger("infopref",{repaint:!0})})}()),h.hashChecker&&a.hashCheckers.length&&(h.hashChecker=function(){var t=[],n=a.arrayFlip(a.storage("hashchekcer")||a.options.commandsOptions.info.showHashAlgorisms,!0);return e.each(a.hashCheckers,function(){var e=this,i=a.i18n(e);t.push('<span class="elfinder-preference-hashchecker-item"><label><input type="checkbox" value="'+e+'" '+(n[e]?"checked":"")+"/>"+i+"</label></span>")}),e(t.join(" ")).on("change","input",function(){var t=e(this).val(),i=e(this).is(":checked");i?n[t]=!0:n[t]&&delete n[t],a.storage("hashchekcer",e.grep(a.hashCheckers,function(e){return n[e]}))})}()),h.autoFocusDialog&&(h.autoFocusDialog=e('<input type="checkbox"/>').prop("checked",function(){var e=a.storage("autoFocusDialog");return e?e>0:a.options.uiOptions.dialog.focusOnMouseOver}()).on("change",function(t){a.storage("autoFocusDialog",e(this).is(":checked")?1:-1)})),h.clearBrowserData&&(h.clearBrowserData=e("<button></button>").text(a.i18n("reset")).button().on("click",function(t){t.preventDefault(),a.storage(),e("#"+a.id).elfinder("reload")})),e.each(u,function(t,i){var s,d;i===!0?d=1:i&&(s=e(),e.each(i,function(t,n){var i,o,r,l="";(i=h[n])&&(d=2,o=a.i18n(n),r=e(i).filter('input[type="checkbox"]'),r.length||(r=e(i).find('input[type="checkbox"]')),1===r.length?(r.attr("id")||r.attr("id","elfinder-preference-"+n+"-checkbox"),o='<label for="'+r.attr("id")+'">'+o+"</label>"):r.length>1&&(l=" elfinder-preference-checkboxes"),s=s.add(e('<dt class="elfinder-preference-'+n+l+'">'+o+"</dt>")).add(e('<dd class="elfinder-preference-'+n+l+'"></dd>').append(i)))})),d&&(l.append(r[o](/\{id\}/g,t)[o](/\{title\}/,a.i18n(t))[o](/\{class\}/,n===t?"elfinder-focus":"")),2===d&&c.append(e('<div id="'+a.namespace+"-preference-"+t+'" class="elfinder-preference-content"></div>').hide().append(e("<dl></dl>").append(s))))}),l.on("click","a",function(t){var n=e(t.target),i=n.attr("href");t.preventDefault(),t.stopPropagation(),l.children().removeClass(p),n.removeClass("ui-state-hover").parent().addClass(p),i.match(/all$/)?c.addClass("elfinder-preference-taball").children().show():(c.removeClass("elfinder-preference-taball").children().hide(),e(i).show())}).on("focus blur","a",function(t){e(this).parent().toggleClass("ui-state-focus","focusin"===t.type)}).on("mouseenter mouseleave","li",function(t){e(this).toggleClass("ui-state-hover","mouseenter"===t.type)}),c.find("a,input,select,button").addClass("elfinder-tabstop"),s.append(l,c),t=i.fmDialog(s,{title:i.title,width:i.options.width||600,height:i.options.height||400,maxWidth:"window",maxHeight:"window",autoOpen:!1,destroyOnClose:!1,allowMinimize:!1,open:function(){n&&d(n),n=null},resize:function(){c.height(t.height()-l.outerHeight(!0)-(c.outerHeight(!0)-c.height())-5)}}).on("click",function(e){e.stopPropagation()}).css({overflow:"hidden"}),t.closest(".ui-dialog").css({overflow:"hidden"}).addClass("elfinder-bg-translucent"),n="all"};this.shortcuts=[{pattern:"ctrl+comma",description:this.title}],this.alwaysEnabled=!0,this.getstate=function(){return 0},this.exec=function(n,i){return!t&&u(),i&&(i.tab?d(i.tab):"cwd"===i._currentType&&d("workspace")),t.elfinderdialog("open"),e.Deferred().resolve()}},(i.prototype.commands.quicklook=function(){var t,n,i,a,o,r,s,l,c,d,p=this,u=p.fm,h=0,f=1,m=2,g=3,v=4,b=h,y=Element.update?"quicklookupdate":"update",w="elfinder-quicklook-navbar-icon",x="elfinder-quicklook-fullscreen",k="elfinder-quicklook-info-wrapper",C=function(t){e(document).trigger(e.Event("keydown",{keyCode:t,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1}))},z=function(e){var t=u.getUI().offset(),n=function(){var t=e.find(".elfinder-cwd-file-wrapper");return t.length?t:e}(),i=n.offset()||{top:0,left:0};return{opacity:0,width:n.width(),height:n.height()-30,top:i.top-t.top,left:i.left-t.left}},T=function(){var i=p.options.contain||u.options.dialogContained,a=i?u.getUI():e(window),o=u.getUI().offset(),r=Math.min(t,a.width()-10),s=Math.min(n,a.height()-80);return{opacity:1,width:r,height:s,top:parseInt((a.height()-s-60)/2+(i?0:a.scrollTop()-o.top)),left:parseInt((a.width()-r)/2+(i?0:a.scrollLeft()-o.left))}},A={},j=function(e,t){var n=t||e.substr(0,e.indexOf("/")),i=A[n]?A[n]:A[n]=document.createElement(n),a=!1;try{a=i.canPlayType&&i.canPlayType(e)}catch(o){}return!(!a||""===a||"no"==a)},O=window.navigator.platform.indexOf("Win")!=-1,S=!1,I=!1,M=!1,E=null,F=e.ui.keyCode.LEFT,D=e.ui.keyCode.RIGHT,U="mousemove touchstart "+("onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll"),P=e('<span class="elfinder-dialog-title elfinder-quicklook-title"></span>'),q=e("<div></div>"),R=e('<div class="elfinder-quicklook-info"></div>'),H=e('<div class="ui-front elfinder-quicklook-cover"></div>'),_=e('<div class="'+w+" "+w+'-fullscreen"></div>').on("click touchstart",function(t){if(!M){var n=p.window,i=n.hasClass(x),o=e(window),r=function(){p.preview.trigger("changesize")};t.stopPropagation(),t.preventDefault(),i?(G="",L(),n.toggleClass(x).css(n.data("position")),o.trigger(p.resize).off(p.resize,r),V.off("mouseenter mouseleave"),H.off(U)):(n.toggleClass(x).data("position",{left:n.css("left"),top:n.css("top"),width:n.width(),height:n.height(),display:"block"}).removeAttr("style"),e(window).on(p.resize,r).trigger(p.resize),H.on(U,function(e){I||("mousemove"!==e.type&&"touchstart"!==e.type||(L(),E=setTimeout(function(){(u.UA.Mobile||V.parent().find(".elfinder-quicklook-navbar:hover").length<1)&&V.fadeOut("slow",function(){H.show()})},3e3)),H.is(":visible")&&(W(),H.data("tm",setTimeout(function(){H.show()},3e3))))}).show().trigger("mousemove"),V.on("mouseenter mouseleave",function(e){I||("mouseenter"===e.type?L():H.trigger("mousemove"))})),u.zIndex&&n.css("z-index",u.zIndex+1),u.UA.Mobile?V.attr("style",G):V.attr("style",G).draggable(i?"destroy":{start:function(){I=!0,M=!0,H.show(),L()},stop:function(){I=!1,G=p.navbar.attr("style"),requestAnimationFrame(function(){M=!1})}}),e(this).toggleClass(w+"-fullscreen-off");var s=n;a.is(".ui-resizable")&&(s=s.add(a)),s.resizable(i?"enable":"disable").removeClass("ui-state-disabled"),n.trigger("viewchange")}}),N=function(){p.update(void 0,function(){var t=p.fm,n=t.selectedFiles(),i=n.length,a=(p.docked(),function(){var a=0;return e.each(n,function(e,t){var n=parseInt(t.ts);a>=0?n>a&&(a=n):a="unknown"}),{hash:n[0].hash+"/"+ +new Date,name:t.i18n("items")+": "+i,mime:"group",size:J,ts:a,files:e.map(n,function(e){return e.hash}),getSize:!0}});return i||(i=1,n=[t.cwd()]),1===i?n[0]:a()}())},L=function(){p.window.hasClass(x)&&(E&&clearTimeout(E),E=null,V.stop(!0,!0).css("display","block"),W())},W=function(){H.data("tm")&&clearTimeout(H.data("tm")),H.removeData("tm"),H.hide()},B=e('<div class="'+w+" "+w+'-prev"></div>').on("click touchstart",function(e){return!M&&C(F),!1}),$=e('<div class="'+w+" "+w+'-next"></div>').on("click touchstart",function(e){return!M&&C(D),!1}),V=e('<div class="elfinder-quicklook-navbar"></div>').append(B).append(_).append($).append('<div class="elfinder-quicklook-navbar-separator"></div>').append(e('<div class="'+w+" "+w+'-close"></div>').on("click touchstart",function(e){return!M&&p.window.trigger("close"),!1})),K=e('<span class="ui-front ui-icon elfinder-icon-close ui-icon-closethick"></span>').on("mousedown",function(e){e.stopPropagation(),p.window.trigger("close")}),X=e('<span class="ui-front ui-icon elfinder-icon-minimize ui-icon-minusthick"></span>').on("mousedown",function(e){e.stopPropagation(),p.docked()?p.window.trigger("navdockout"):p.window.trigger("navdockin")}),J='<span class="elfinder-spinner-text">'+u.i18n("calc")+'</span><span class="elfinder-spinner"></span>',G="",Y=!0;this.flags={},this.cover=H,this.evUpdate=y,(this.navbar=V)._show=L,this.resize="resize."+u.namespace,this.info=e("<div></div>").addClass(k).append(q).append(R),this.autoPlay=function(){return!!p.opened()&&!!p.options[p.docked()?"dockAutoplay":"autoplay"]},this.preview=e('<div class="elfinder-quicklook-preview ui-helper-clearfix"></div>').on("change",function(){L(),V.attr("style",G),p.docked()&&V.hide(),p.preview.attr("style","").removeClass("elfinder-overflow-auto"),p.info.attr("style","").hide(),p.cover.removeClass("elfinder-quicklook-coverbg"),q.removeAttr("class").attr("style",""),R.html("")}).on(y,function(t){var n,i,a=(p.preview,t.file),r='<div class="elfinder-quicklook-info-data">{value}</div>',s=function(){var s=p.window.css("overflow","hidden");i=u.escape(a.i18||a.name),!a.read&&t.stopImmediatePropagation(),p.window.data("hash",a.hash),p.preview.off("changesize").trigger("change").children().remove(),P.html(i),B.css("visibility",""),$.css("visibility",""),a.hash===u.cwdId2Hash(o.find("[id]:not(.elfinder-cwd-parent):first").attr("id"))&&B.css("visibility","hidden"),a.hash===u.cwdId2Hash(o.find("[id]:last").attr("id"))&&$.css("visibility","hidden"),"directory"===a.mime?c=[a.hash]:"group"===a.mime&&a.getSize&&(c=a.files),R.html(r.replace(/\{value\}/,i)+r.replace(/\{value\}/,u.mime2kind(a))+r.replace(/\{value\}/,c.length?J:u.formatSize(a.size))+r.replace(/\{value\}/,u.i18n("modify")+": "+u.formatDate(a))),c.length&&(l=u.getSize(c).done(function(e){R.find("span.elfinder-spinner").parent().html(e.formated)}).fail(function(){R.find("span.elfinder-spinner").parent().html(u.i18n("unknown"))}).always(function(){l=null}),l._hash=a.hash),q.addClass("elfinder-cwd-icon ui-corner-all "+u.mime2class(a.mime)),a.icon&&q.css(u.getIconStyle(a,!0)),p.info.attr("class",k),a.csscls&&p.info.addClass(a.csscls),a.read&&(n=u.tmb(a))&&e("<img/>").hide().appendTo(p.preview).on("load",function(){q.addClass(n.className).css("background-image","url('"+n.url+"')"),e(this).remove()}).attr("src",n.url),p.info.delay(100).fadeIn(10),p.window.hasClass(x)&&H.trigger("mousemove"),s.css("overflow","")},c=[];a&&!Object.keys(a).length&&(a=u.cwd()),a&&l&&"pending"===l.state()&&l._hash!==a.hash&&l.reject(),a&&(t.forceUpdate||p.window.data("hash")!==a.hash)?s():t.stopImmediatePropagation()}),this.window=e('<div class="ui-front ui-helper-reset ui-widget elfinder-quicklook touch-punch" style="position:absolute"></div>').hide().addClass(u.UA.Touch?"elfinder-touch":"").on("click",function(e){var t=this;e.stopPropagation(),b===m&&requestAnimationFrame(function(){b===m&&u.toFront(t)})}).append(e('<div class="ui-dialog-titlebar ui-widget-header ui-corner-top ui-helper-clearfix elfinder-quicklook-titlebar"></div>').append(e('<span class="ui-widget-header ui-dialog-titlebar-close ui-corner-all elfinder-titlebar-button elfinder-quicklook-titlebar-icon'+(O?" elfinder-titlebar-button-right":"")+'"></span>').append(K,X),P),this.preview,p.info.hide(),H.hide(),V).draggable({handle:"div.elfinder-quicklook-titlebar"}).on("open",function(e,t){var n=p.window,i=p.value,a=u.getUI("cwd"),o=function(e){b=e,p.update(1,p.value),p.change(),n.trigger("resize."+u.namespace)};Y||b!==h?b===v&&(u.getUI("navdock").data("addNode")(c),o(g),p.preview.trigger("changesize"),u.storage("previewDocked","1"),0===u.getUI("navdock").width()&&n.trigger("navdockout")):(i&&i.hash!==r&&(a=u.cwdHash2Elm(i.hash.split("/",2)[0])),G="",V.attr("style",""),b=f,a.trigger("scrolltoview"),W(),n.css(t||z(a)).show().animate(T(),550,function(){o(m),L()}),u.toFront(n))}).on("close",function(e,t){var n,i=p.window,a=p.preview.trigger("change"),r=(p.value,(i.data("hash")||"").split("/",2)[0]),s=function(e,n){b=e,n&&u.toHide(i),a.children().remove(),p.update(0,p.value),i.data("hash",""),t&&t.resolve()};p.opened()&&(l&&"pending"===l.state()&&l.reject(),p.docked()?(c=u.getUI("navdock").data("removeNode")(p.window.attr("id"),"detach"),s(v),u.storage("previewDocked","2")):(b=f,i.hasClass(x)&&_.click(),r&&(n=o.find("#"+r)).length?i.animate(z(n),500,function(){a.off("changesize"),s(h,!0)}):s(h,!0)))}).on("navdockin",function(e,t){var n=p.window,a=u.getUI("navdock"),o=s||a.width(),r=t||{};Y&&(r.init=!0),b=g,i=n.attr("style"),n.toggleClass("ui-front").removeClass("ui-widget").draggable("disable").resizable("disable").removeAttr("style").css({width:"100%",height:o,boxSizing:"border-box",paddingBottom:0,zIndex:"unset"}),V.hide(),X.toggleClass("ui-icon-plusthick ui-icon-minusthick elfinder-icon-full elfinder-icon-minimize"),u.toHide(n,!0),a.data("addNode")(n,r),p.preview.trigger("changesize"),u.storage("previewDocked","1")}).on("navdockout",function(t){var n=p.window,a=u.getUI("navdock"),o=(e.Deferred(),z(p.preview));s=n.outerHeight(),a.data("removeNode")(n.attr("id"),u.getUI()),n.toggleClass("ui-front").addClass("ui-widget").draggable("enable").resizable("enable").attr("style",i),X.toggleClass("ui-icon-plusthick ui-icon-minusthick elfinder-icon-full elfinder-icon-minimize"),b=h,n.trigger("open",o),u.storage("previewDocked","0")}).on("resize."+u.namespace,function(){p.preview.trigger("changesize")}),this.alwaysEnabled=!0,this.value=null,this.handlers={select:function(e,t){d&&cancelAnimationFrame(d),e.data&&e.data.selected&&e.data.selected.length?p.opened()&&N():d=requestAnimationFrame(function(){p.opened()&&N()})},error:function(){p.window.is(":visible")&&p.window.trigger("close")},"searchshow searchhide":function(){this.opened()&&this.window.trigger("close")},navbarshow:function(){requestAnimationFrame(function(){p.docked()&&p.preview.trigger("changesize")})},destroy:function(){p.window.remove()}},this.shortcuts=[{pattern:"space"}],this.support={audio:{ogg:j("audio/ogg;"),webm:j("audio/webm;"),mp3:j("audio/mpeg;"),wav:j("audio/wav;"),m4a:j("audio/mp4;")||j("audio/x-m4a;")||j("audio/aac;"),flac:j("audio/flac;"),amr:j("audio/amr;")},video:{ogg:j("video/ogg;"),webm:j("video/webm;"),mp4:j("video/mp4;"),mkv:j("video/x-matroska;")||j("video/webm;"),"3gp":j("video/3gpp;")||j("video/mp4;"),m3u8:j("application/x-mpegURL","video")||j("application/vnd.apple.mpegURL","video"),mpd:j("application/dash+xml","video")}},A={},this.closed=function(){return b==h||b==v},this.opened=function(){return b==m||b==g},this.docked=function(){return b==g},this.addIntegration=function(e){requestAnimationFrame(function(){u.trigger("helpIntegration",Object.assign({cmd:"quicklook"},e))})},this.init=function(){var i,l=this.options,c=this.window,d=this.preview;t=l.width>0?parseInt(l.width):450,n=l.height>0?parseInt(l.height):300,"auto"!==l.dockHeight&&(s=parseInt(l.dockHeight),s||(s=void 0)),u.one("load",function(){S=u.getUI("navdock").data("dockEnabled"),!S&&X.hide(),a=u.getUI(),o=u.getUI("cwd"),u.zIndex&&c.css("z-index",u.zIndex+1),c.appendTo(a),e(document).on("keydown."+u.namespace,function(t){t.keyCode==e.ui.keyCode.ESCAPE&&p.opened()&&!p.docked()&&c.hasClass("elfinder-frontmost")&&c.trigger("close")}),c.resizable({handles:"se",minWidth:350,minHeight:120,resize:function(){d.trigger("changesize")}}),p.change(function(){p.opened()&&p.value&&(p.value.tmb&&1==p.value.tmb&&(p.value=Object.assign({},u.file(p.value.hash))),d.trigger(e.Event(y,{file:p.value})))}),d.on(y,function(e){var t,n,a;if(t=e.file){if(n=t.hash,a=u.searchStatus.mixed&&u.searchStatus.state>1,"directory"!==t.mime)if(parseInt(t.size)||t.mime.match(l.mimeRegexNotEmptyCheck)){if(p.dispInlineRegex=i,a||u.optionsByHashes[n])try{p.dispInlineRegex=new RegExp(u.option("dispInlineRegex",n),"i")}catch(e){try{p.dispInlineRegex=new RegExp(u.isRoot(t)?u.options.dispInlineRegex:u.option("dispInlineRegex",t.phash),"i")}catch(e){p.dispInlineRegex=/^$/}}}else e.stopImmediatePropagation();else p.dispInlineRegex=/^$/;p.info.show()}else e.stopImmediatePropagation()}),e.each(u.commands.quicklook.plugins||[],function(e,t){"function"==typeof t&&new t(p)})}).one("open",function(){var e,t=Number(u.storage("previewDocked")||l.docked);S&&t>=1&&(e=p.window,p.exec(),e.trigger("navdockin",{init:!0}),2===t?e.trigger("close"):(p.update(void 0,u.cwd()),p.change())),Y=!1}).bind("open",function(){r=u.cwd().hash,p.value=u.cwd();try{i=new RegExp(u.option("dispInlineRegex"),"i")}catch(e){i=/^$/}}).bind("change",function(t){t.data&&t.data.changed&&p.opened()&&e.each(t.data.changed,function(){if(p.window.data("hash")===this.hash)return p.window.data("hash",null),p.preview.trigger(y),!1})}).bind("navdockresizestart navdockresizestop",function(e){H["navdockresizestart"===e.type?"show":"hide"]()})},this.getstate=function(){return p.opened()?1:0},this.exec=function(){return p.closed()&&N(),p.enabled()&&p.window.trigger(p.opened()?"close":"open"),e.Deferred().resolve()},this.hideinfo=function(){this.info.stop(!0,!0).hide()}}).prototype={forceLoad:!0},i.prototype.commands.quicklook.plugins=[function(t){var n,i,a=["image/jpeg","image/png","image/gif","image/svg+xml","image/x-ms-bmp"],o=t.fm.returnBytes(t.options.getDimThreshold||0),r=t.preview;n=new Image,n.onload=n.onerror=function(){2==n.height&&a.push("image/webp")},n.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",e.each(navigator.mimeTypes,function(t,n){var i=n.type;0===i.indexOf("image/")&&e.inArray(i,a)&&a.push(i)}),r.on(t.evUpdate,function(n){var s,l,c,d,p=t.fm,u=n.file,h=!1,f=null,m=function(e){var t=p.file(u.hash);t.width=e[0],t.height=e[1]},g=function(){var e,t,n,i,a;f&&f.state&&"pending"===f.state()&&f.reject(),h||(h=!0,e=s.get(0),t=u.width&&u.height?{w:u.width,h:u.height}:e.naturalWidth?null:{w:s.width(),h:s.height()},t&&s.removeAttr("width").removeAttr("height"),n=u.width||e.naturalWidth||e.width||s.width(),i=u.height||e.naturalHeight||e.height||s.height(),u.width&&u.height||m([n,i]),t&&s.width(t.w).height(t.h),a=(n/i).toFixed(2),r.on("changesize",function(){var e,t,n=parseInt(r.width()),i=parseInt(r.height());a<(n/i).toFixed(2)?(t=i,e=Math.floor(t*a)):(e=n,t=Math.floor(e/a)),s.width(e).height(t).css("margin-top",t<i?Math.floor((i-t)/2):0)}).trigger("changesize"),s.fadeIn(100))},v=function(){l.remove(),t.hideinfo()};i||(i=p.arrayFlip(a)),i[u.mime]&&t.dispInlineRegex.test(u.mime)&&(n.stopImmediatePropagation(),l=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+p.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),c=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(l),s=e("<img/>").hide().appendTo(r).on("load",function(){v(),g()}).on("error",function(){l.remove()}),d=p.openUrl(u.hash,!1,function(e){s.attr("src",e)},{progressBar:c}),r.one("change",function(){d&&d.state&&"pending"===d.state()&&d.reject()}),u.width&&u.height?g():u.size>o&&(f=p.request({data:{cmd:"dim",target:u.hash},preventDefault:!0}).done(function(e){if(e.dim){var t=e.dim.split("x");u.width=t[0],u.height=t[1],m(t),g()}})))})},function(t){var n=t.fm,i="image/tiff",a=t.preview;window.Worker&&window.Uint8Array&&a.on(t.evUpdate,function(o){var r,s,l,c,d,p=o.file,u=function(e){c&&c.terminate(),r.remove(),n.debug("error",e)},h=function(e){var t=n.file(p.hash);t.width=e[0],t.height=e[1]};p.mime===i&&(o.stopImmediatePropagation(),r=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+n.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),s=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(r),a.one("change",function(){c&&c.terminate(),r.remove()}),d=n.getContents(p.hash,"arraybuffer",{progressBar:s}).done(function(i){if(i){l=e("<div></div>").css({width:"100%",height:"100%"}).hide().appendTo(a);try{c=n.getWorker(),c.onmessage=function(n){var i,o,s,d,u=n.data;c&&c.terminate(),i=document.createElement("canvas"),o=i.getContext("2d"),i.width=u.width,i.height=u.height,s=o.createImageData(u.width,u.height),s.data.set(new Uint8Array(u.image)),o.putImageData(s,0,0),l.append(i).show(),r.remove(),d=(u.width/u.height).toFixed(2),a.on("changesize",function(){var t,n,o=parseInt(a.width()),r=parseInt(a.height());d<(o/r).toFixed(2)?(n=r,t=Math.floor(n*d)):(t=o,n=Math.floor(t/d)),e(i).width(t).height(n).css("margin-top",n<r?Math.floor((r-n)/2):0)}).trigger("changesize"),p.width&&p.height||h([u.width,u.height]),t.hideinfo()},c.onerror=u,c.postMessage({scripts:[n.options.cdns.tiff,n.getWorkerUrl("quicklook.tiff.js")],data:{data:i}})}catch(o){u(o)}}else u()}),a.one("change",function(){d&&d.state&&"pending"===d.state()&&d.reject()}))})},function(t){var n,i=t.fm,a=i.arrayFlip(["image/vnd.adobe.photoshop","image/x-photoshop"]),o=t.preview,r=function(e,a,r){try{i.replaceXhrSend(),n.fromURL(e).then(function(e){var n;a.attr("src",e.image.toBase64()),requestAnimationFrame(function(){n=(a.width()/a.height()).toFixed(2),o.on("changesize",function(){var e,t,i=parseInt(o.width()),r=parseInt(o.height());n<(i/r).toFixed(2)?(t=r,e=Math.floor(t*n)):(e=i,t=Math.floor(e/n)),a.width(e).height(t).css("margin-top",t<r?Math.floor((r-t)/2):0);
}).trigger("changesize"),r.remove(),t.hideinfo(),a.fadeIn(100)})},function(){r.remove(),a.remove()}),i.restoreXhrSend()}catch(s){i.restoreXhrSend(),r.remove(),a.remove()}};o.on(t.evUpdate,function(s){var l,c,d,p,u,h,f=s.file;a[f.mime]&&i.options.cdns.psd&&!i.UA.ltIE10&&t.dispInlineRegex.test(f.mime)&&(s.stopImmediatePropagation(),c=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+i.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),d=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(c),h=i.openUrl(f.hash,"sameorigin",function(t){t&&(l=e("<img/>").hide().appendTo(o),n?r(t,l,c):(p=window.define,u=window.require,window.require=null,window.define=null,i.loadScript([i.options.cdns.psd],function(){n=require("psd"),p?window.define=p:delete window.define,u?window.require=u:delete window.require,r(t,l,c)})))},{progressBar:d}),o.one("change",function(){h&&h.state&&"pending"===h.state()&&h.reject()}))})},function(t){var n=t.fm,i=n.arrayFlip(["text/html","application/xhtml+xml"]),a=t.preview;a.on(t.evUpdate,function(o){var r,s,l,c=o.file;i[c.mime]&&t.dispInlineRegex.test(c.mime)&&(!t.options.getSizeMax||c.size<=t.options.getSizeMax)&&(o.stopImmediatePropagation(),s=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+n.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),l=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(s),a.one("change",function(){"pending"==r.state()&&r.reject()}).addClass("elfinder-overflow-auto"),r=n.request({data:{cmd:"get",target:c.hash,conv:1,_t:c.ts},options:{type:"get",cache:!0},preventDefault:!0,progressBar:l}).done(function(n){t.hideinfo();var i=e('<iframe class="elfinder-quicklook-preview-html"></iframe>').appendTo(a)[0].contentWindow.document;i.open(),i.write(n.content),i.close()}).always(function(){s.remove()}))})},function(t){var n=t.fm,i=n.arrayFlip(["text/x-markdown"]),a=t.preview,o=null,r=function(n,i){t.hideinfo();var r=e('<iframe class="elfinder-quicklook-preview-html"></iframe>').appendTo(a)[0].contentWindow.document;r.open(),r.write(o(n.content)),r.close(),i.remove()},s=function(e){o=!1,e.remove()};a.on(t.evUpdate,function(l){var c,d,p,u=l.file;i[u.mime]&&n.options.cdns.marked&&o!==!1&&t.dispInlineRegex.test(u.mime)&&(!t.options.getSizeMax||u.size<=t.options.getSizeMax)&&(l.stopImmediatePropagation(),d=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+n.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),p=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(d),a.one("change",function(){"pending"==c.state()&&c.reject()}).addClass("elfinder-overflow-auto"),c=n.request({data:{cmd:"get",target:u.hash,conv:1,_t:u.ts},options:{type:"get",cache:!0},preventDefault:!0,progressBar:p}).done(function(e){o||window.marked?(o||(o=window.marked),r(e,d)):n.loadScript([n.options.cdns.marked],function(t){o=t||window.marked||!1,delete window.marked,o?r(e,d):s(d)},{tryRequire:!0,error:function(){s(d)}})}).fail(function(){s(d)}))})},function(t){if(t.options.viewerjs){var n=t.fm,i=t.preview,a=t.options.viewerjs,o=a.url?n.arrayFlip(a.mimes||[]):[],r=t.window,s=t.navbar,l=function(){s.css("bottom",r.hasClass("elfinder-quicklook-fullscreen")?"30px":"")};a.url&&i.on("update",function(s){var c,d,p,u,h=s.file;!o[h.mime]||"application/pdf"===h.mime&&a.pdfNative&&t.flags.pdfNative||(s.stopImmediatePropagation(),d=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+n.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),p=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(d),u=n.openUrl(h.hash,"sameorigin",function(n){n&&(c=e('<iframe class="elfinder-quicklook-preview-iframe"></iframe>').css("background-color","transparent").on("load",function(){t.hideinfo(),d.remove(),c.css("background-color","#fff")}).on("error",function(){d.remove(),c.remove()}).appendTo(i).attr("src",a.url+"#"+n),r.on("viewchange.viewerjs",l),l(),i.one("change",function(){r.off("viewchange.viewerjs"),d.remove(),c.off("load").remove()}))},{progressBar:p}),i.one("change",function(){u&&u.state&&"pending"===u.state()&&u.reject()}))})}},function(t){var n=t.fm,i="application/pdf",a=t.preview,o=!1,r="";n.UA.Safari&&"mac"===n.OS&&!n.UA.iOS||n.UA.IE||n.UA.Firefox?o=!0:e.each(navigator.plugins,function(t,n){e.each(n,function(e,t){if(t.type===i)return!(o=!0)})}),t.flags.pdfNative=o,o&&("undefined"==typeof t.options.pdfToolbar||t.options.pdfToolbar||(r="#toolbar=0"),a.on(t.evUpdate,function(s){var l,c=s.file;o&&c.mime===i&&t.dispInlineRegex.test(c.mime)&&(s.stopImmediatePropagation(),l=n.openUrl(c.hash,!1,function(i){i&&(t.hideinfo(),t.cover.addClass("elfinder-quicklook-coverbg"),e('<object class="elfinder-quicklook-preview-pdf" data="'+i+r+'" type="application/pdf" ></object>').on("error",function(e){o=!1,t.update(void 0,n.cwd()),t.update(void 0,c)}).appendTo(a))}),a.one("change",function(){l&&l.state&&"pending"===l.state()&&l.reject()}))}))},function(t){var n=t.fm,i="application/x-shockwave-flash",a=t.preview,o=!1;e.each(navigator.plugins,function(t,n){e.each(n,function(e,t){if(t.type===i)return!(o=!0)})}),o&&a.on(t.evUpdate,function(o){var r,s,l=o.file;l.mime===i&&t.dispInlineRegex.test(l.mime)&&(o.stopImmediatePropagation(),s=n.openUrl(l.hash,!1,function(n){n&&(t.hideinfo(),r=e('<embed class="elfinder-quicklook-preview-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+n+'" quality="high" type="application/x-shockwave-flash" wmode="transparent" />').appendTo(a))}),a.one("change",function(){s&&s.state&&"pending"===s.state()&&s.reject()}))})},function(t){var n,i,a,o,r,s,l=t.fm,c=t.preview,d={"audio/mpeg":"mp3","audio/mpeg3":"mp3","audio/mp3":"mp3","audio/x-mpeg3":"mp3","audio/x-mp3":"mp3","audio/x-wav":"wav","audio/wav":"wav","audio/x-m4a":"m4a","audio/aac":"m4a","audio/mp4":"m4a","audio/x-mp4":"m4a","audio/ogg":"ogg","audio/webm":"webm","audio/flac":"flac","audio/x-flac":"flac","audio/amr":"amr"},p=t.window,u=t.navbar,h="string"==typeof t.options.mediaControlsList&&t.options.mediaControlsList?' controlsList="'+l.escape(t.options.mediaControlsList)+'"':"",f=function(){u.css("bottom",p.hasClass("elfinder-quicklook-fullscreen")?"50px":"")},m=function(t,i){return e('<audio class="elfinder-quicklook-preview-audio ui-front" controls'+h+' preload="auto" autobuffer><source src="'+t+'" ></source></audio>').on("change",function(e){e.stopPropagation()}).on("error",function(e){n&&n.data("hash")===i&&b()}).data("hash",i).appendTo(c)},g=function(t){var n,i=e.Deferred(),o=e.Deferred().done(function(){var e;e=l.getContents(t,"arraybuffer",{progressBar:s}).done(function(e){try{var t=a.toWAV(new Uint8Array(e));t?i.resolve(URL.createObjectURL(new Blob([t],{type:"audio/x-wav"}))):i.reject()}catch(n){i.reject()}}).fail(function(){i.reject()}),c.one("change",function(){e&&e.state&&"pending"===e.state()&&e.reject()})}).fail(function(){a=!1,i.reject()});return window.TextEncoder&&window.URL&&URL.createObjectURL&&"undefined"==typeof a?(n=window.AMR,delete window.AMR,l.loadScript([l.options.cdns.amr],function(){a=!!window.AMR&&window.AMR,window.AMR=n,o[a?"resolve":"reject"]()},{error:function(){o.reject()}})):o[a?"resolve":"reject"](),i},v=function(e){var t,i=n.data("hash");o&&(t=e.play()),t&&t["catch"]&&t["catch"](function(t){e.paused||n&&n.data("hash")===i&&b()})},b=function(){if(n&&n.parent().length){var e=n[0],t=n.children("source").attr("src");p.off("viewchange.audio");try{e.pause(),n.empty(),t.match(/^blob:/)&&URL.revokeObjectURL(t),e.src="",e.load()}catch(i){}n.remove(),n=null}};c.on(t.evUpdate,function(u){var h,b,y=u.file,w=d[y.mime];d[y.mime]&&t.dispInlineRegex.test(y.mime)&&((h=t.support.audio[w])||"amr"===w)&&(o=t.autoPlay(),i=y.hash,h?(u.stopImmediatePropagation(),r=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+l.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),s=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(r),b=l.openUrl(i,!1,function(e){r.remove(),e?(n=m(e,i),v(n[0]),p.on("viewchange.audio",f),f()):n.remove()},{progressBar:s}),c.one("change",function(){b&&b.state&&"pending"===b.state()&&b.reject()})):l.options.cdns.amr&&"amr"===w&&a!==!1&&(u.stopImmediatePropagation(),r=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+l.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),s=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(r),n=m("",i),g(y.hash).done(function(e){if(r.remove(),i===y.hash){var t=n[0];try{n.children("source").attr("src",e),t.pause(),t.load(),v(t),p.on("viewchange.audio",f),f()}catch(a){URL.revokeObjectURL(e),n.remove()}}else URL.revokeObjectURL(e)}).fail(function(){n.remove()})))}).one("change",b)},function(t){var n,i,a,o,r,s,l,c,d,p,u=t.fm,h=t.preview,f={"video/mp4":"mp4","video/x-m4v":"mp4","video/quicktime":"mp4","video/mpeg":"mpeg","video/ogg":"ogg","application/ogg":"ogg","video/webm":"webm","video/x-matroska":"mkv","video/3gpp":"3gp","application/vnd.apple.mpegurl":"m3u8","application/x-mpegurl":"m3u8","application/dash+xml":"mpd","video/x-flv":"flv","video/x-msvideo":"avi"},m=t.window,g=t.navbar,v="string"==typeof t.options.mediaControlsList&&t.options.mediaControlsList?' controlsList="'+u.escape(t.options.mediaControlsList)+'"':"",b=function(){u.UA.iOS?m.hasClass("elfinder-quicklook-fullscreen")?(h.css("height","-webkit-calc(100% - 50px)"),g._show()):h.css("height",""):g.css("bottom",m.hasClass("elfinder-quicklook-fullscreen")?"50px":"")},y=function(i,a){var r,s=function(e){l>1&&(c&&clearTimeout(c),c=setTimeout(function(){!r&&T(!0)},800))},l=0;o=null,a=a||{},t.hideinfo(),n=e('<video class="elfinder-quicklook-preview-video" controls'+v+' preload="auto" autobuffer playsinline></video>').on("change",function(e){e.stopPropagation()}).on("timeupdate progress",s).on("canplay",function(){r=!0}).data("hash",i.hash),n[0].addEventListener("error",function(e){a.src&&u.convAbsUrl(a.src)===u.convAbsUrl(e.target.src)&&(++l,s())},!0),a.src&&n.append('<source src="'+a.src+'" type="'+i.mime+'"></source><source src="'+a.src+'"></source>'),n.appendTo(h),m.on("viewchange.video",b),b()},w=function(e){var t,a;a=u.openUrl(e.hash,!1,function(a){d.remove(),a&&(y(e),t=new i,t.loadSource(a),t.attachMedia(n[0]),l&&t.on(i.Events.MANIFEST_PARSED,function(){z(n[0])}))},{progressBar:p}),h.one("change",function(){a&&a.state&&"pending"===a.state()&&a.reject()})},x=function(e){var t;t=u.openUrl(e.hash,!1,function(t){var i;d.remove(),t&&(y(e),o=window.dashjs.MediaPlayer().create(),i=o.getDebug(),i.setLogLevel?i.setLogLevel(dashjs.Debug.LOG_LEVEL_FATAL):i.setLogToBrowserConsole&&i.setLogToBrowserConsole(!1),o.initialize(n[0],t,l),o.on("error",function(e){T(!0)}))},{progressBar:p}),h.one("change",function(){t&&t.state&&"pending"===t.state()&&t.reject()})},k=function(e){var t;return r.isSupported()?(t=u.openUrl(e.hash,!1,function(t){if(d.remove(),t){var i=r.createPlayer({type:"flv",url:t});y(e),i.on(r.Events.ERROR,function(){i.destroy(),T(!0)}),i.attachMediaElement(n[0]),i.load(),z(i)}},{progressBar:p}),void h.one("change",function(){t&&t.state&&"pending"===t.state()&&t.reject()})):void(r=!1)},C=function(e){var t;t=u.openUrl(e.hash,!1,function(t){d.remove(),t&&(y(e),n[0].src=t,s(n[0],{src:t}))},{progressBar:p}),h.one("change",function(){t&&t.state&&"pending"===t.state()&&t.reject()})},z=function(e){var t,i=n.data("hash");l&&(t=e.play()),t&&t["catch"]&&t["catch"](function(t){e.paused||n&&n.data("hash")===i&&T(!0)})},T=function(e){if(c&&clearTimeout(c),n&&n.parent().length){var i=n[0];m.off("viewchange.video"),o&&o.reset();try{i.pause(),n.empty(),i.src="",i.load()}catch(a){}n.remove(),n=null}e&&t.info.show()};h.on(t.evUpdate,function(o){var c,m,g=o.file,v=g.mime.toLowerCase(),b=f[v];f[v]&&t.dispInlineRegex.test(g.mime)&&(l=t.autoPlay(),d=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+u.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>'),p=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(d),t.support.video[b]&&("m3u8"!==b||u.UA.Safari)?(o.stopImmediatePropagation(),d.appendTo(t.info.find(".elfinder-quicklook-info")),m=u.openUrl(g.hash,!1,function(e){d.remove(),e&&(y(g,{src:e}),z(n[0]))},{progressBar:p}),h.one("change",function(){m&&m.state&&"pending"===m.state()&&m.reject()})):i!==!1&&u.options.cdns.hls&&"m3u8"===b?(o.stopImmediatePropagation(),d.appendTo(t.info.find(".elfinder-quicklook-info")),i?w(g):(c=window.Hls,delete window.Hls,u.loadScript([u.options.cdns.hls],function(e){i=e||window.Hls||!1,window.Hls=c,i&&w(g)},{tryRequire:!0,error:function(){i=!1}}))):a!==!1&&u.options.cdns.dash&&"mpd"===b?(o.stopImmediatePropagation(),d.appendTo(t.info.find(".elfinder-quicklook-info")),a?x(g):u.loadScript([u.options.cdns.dash],function(){a=!!window.dashjs,a&&x(g)},{tryRequire:!0,error:function(){a=!1}})):r!==!1&&u.options.cdns.flv&&"flv"===b?(o.stopImmediatePropagation(),d.appendTo(t.info.find(".elfinder-quicklook-info")),r?k(g):(c=window.flvjs,delete window.flvjs,u.loadScript([u.options.cdns.flv],function(e){r=e||window.flvjs||!1,window.flvjs=c,r&&k(g)},{tryRequire:!0,error:function(){r=!1}}))):u.options.cdns.videojs&&(o.stopImmediatePropagation(),d.appendTo(t.info.find(".elfinder-quicklook-info")),s?C(g):u.loadScript([u.options.cdns.videojs+"/video.min.js"],function(e){s=e||window.videojs||!1,s&&C(g)},{tryRequire:!0,error:function(){s=!1}}).loadCss([u.options.cdns.videojs+"/video-js.min.css"])))}).one("change",T)},function(t){var n,i=t.preview,a=[],o=t.window,r=t.navbar;e.each(navigator.plugins,function(t,n){e.each(n,function(e,t){(0===t.type.indexOf("audio/")||0===t.type.indexOf("video/"))&&a.push(t.type)})}),a=t.fm.arrayFlip(a),i.on(t.evUpdate,function(s){var l,c,d,p,u=s.file,h=u.mime,f=function(){r.css("bottom",o.hasClass("elfinder-quicklook-fullscreen")?"50px":"")};a[u.mime]&&t.dispInlineRegex.test(u.mime)&&(s.stopImmediatePropagation(),d=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+fm.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),p=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(d),c=t.fm.openUrl(u.hash,!1,function(a){d.remove(),a&&((l=0===h.indexOf("video/"))&&t.hideinfo(),n=e('<embed src="'+a+'" type="'+h+'" class="elfinder-quicklook-preview-'+(l?"video":"audio")+'"/>').appendTo(i),o.on("viewchange.embed",f),f())},{progressBar:p}),i.one("change",function(){c&&c.state&&"pending"===c.state()&&c.reject()}))}).one("change",function(){n&&n.parent().length&&(o.off("viewchange.embed"),n.remove(),n=null)})},function(t){var n=t.fm,i=n.arrayFlip(["application/zip","application/x-gzip","application/x-tar","application/x-bzip2"]),a=t.preview,o=n.returnBytes(t.options.unzipMaxSize||0),r=!(!n.options.cdns.zlibUnzip||!n.options.cdns.zlibGunzip),s=!!n.options.cdns.bzip2;window.Worker&&window.Uint8Array&&window.DataView&&a.on(t.evUpdate,function(l){var c=l.file,d="application/x-tar"===c.mime,p="application/x-bzip2"===c.mime,u="application/zip"===c.mime||"application/x-gzip"===c.mime;if(i[c.mime]&&(!o||c.size<=o)&&(d||p&&s||u&&r)){var h,f,m,g,v=function(){h=n.getContents(c.hash,"arraybuffer",{progressBar:g}).fail(function(){m.remove()}).done(function(e){var t=function(e){f&&f.terminate(),m.remove(),u?r=!1:p&&(s=!1),n.debug("error",e)};try{f=n.getWorker(),f.onmessage=function(e){f&&f.terminate(),m.remove(),!e.data||e.data.error?new Error(e.data&&e.data.error?e.data.error:""):b(e.data.files)},f.onerror=t,"application/x-tar"===c.mime?f.postMessage({scripts:[n.getWorkerUrl("quicklook.unzip.js")],data:{type:"tar",bin:e}}):"application/zip"===c.mime?f.postMessage({scripts:[n.options.cdns.zlibUnzip,n.getWorkerUrl("quicklook.unzip.js")],data:{type:"zip",bin:e}}):"application/x-gzip"===c.mime?f.postMessage({scripts:[n.options.cdns.zlibGunzip,n.getWorkerUrl("quicklook.unzip.js")],data:{type:"gzip",bin:e}}):"application/x-bzip2"===c.mime&&f.postMessage({scripts:[n.options.cdns.bzip2,n.getWorkerUrl("quicklook.unzip.js")],data:{type:"bzip2",bin:e}})}catch(i){t(i)}})},b=function(i){var o,r,s,l=0;i&&i.length&&(i=e.map(i,function(e){return n.decodeRawString(e)}),i.sort(),r=n.escape(i.join("\n").replace(/\{formatSize\((\d+)\)\}/g,function(e,t){return l+=parseInt(t),n.formatSize(t)})),o="<strong>"+n.escape(c.mime)+"</strong> ("+n.formatSize(c.size)+" / "+n.formatSize(l)+")<hr/>",s=e('<div class="elfinder-quicklook-preview-archive-wrapper">'+o+'<pre class="elfinder-quicklook-preview-text">'+r+"</pre></div>").on("touchstart",function(t){e(this)["scroll"+("ltr"===n.direction?"Right":"Left")]()>5&&(t.originalEvent._preventSwipeX=!0)}).appendTo(a),t.hideinfo()),m.remove()};l.stopImmediatePropagation(),m=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+n.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),g=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(m),a.one("change",function(){"pending"===h.state()&&h.reject(),f&&f.terminate(),m.remove()}),v()}})},function(t){var n,i=t.fm,a=i.arrayFlip(["application/x-rar"]),o=t.preview;window.DataView&&o.on(t.evUpdate,function(r){var s=r.file;if(a[s.mime]&&i.options.cdns.rar&&n!==!1){var l,c,d,p,u,h,f=function(a){if(p)return void l.remove();try{d=n({file:a,type:2,xhrHeaders:i.customHeaders,xhrFields:i.xhrFields},function(n){l.remove();var a,r,c=[];return p||n?void(n&&i.debug("error",n)):(e.each(d.entries,function(){c.push(this.path+(this.size?" ("+i.formatSize(this.size)+")":""))}),void(c.length&&(c=e.map(c,function(e){return i.decodeRawString(e)}),c.sort(),a="<strong>"+i.escape(s.mime)+"</strong> ("+i.formatSize(s.size)+")<hr/>",r=e('<div class="elfinder-quicklook-preview-archive-wrapper">'+a+'<pre class="elfinder-quicklook-preview-text">'+i.escape(c.join("\n"))+"</pre></div>").on("touchstart",function(t){e(this)["scroll"+("ltr"===i.direction?"Right":"Left")]()>5&&(t.originalEvent._preventSwipeX=!0)}).appendTo(o),t.hideinfo())))})}catch(r){l.remove()}},m=function(){n=!1,l.remove()};r.stopImmediatePropagation(),l=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+i.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),c=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(l),o.one("change",function(){d&&(d.abort=!0),l.remove(),p=!0}),h=i.openUrl(s.hash,"sameorigin",function(e){e&&(n?f(e):(window.RarArchive&&(u=window.RarArchive,delete window.RarArchive),i.loadScript([i.options.cdns.rar],function(){i.hasRequire?require(["rar"],function(t){n=t,f(e)},m):(n=window.RarArchive)?(u?window.RarArchive=u:delete window.RarArchive,f(e)):m()},{tryRequire:!0,error:m})))},{progressBar:c,temporary:!0}),o.one("change",function(){h&&h.state&&"pending"===h.state()&&h.reject()})}})},function(t){var n,i=t.fm,a=i.arrayFlip(t.options.sharecadMimes||[]),o=t.preview;t.window;t.options.sharecadMimes.length&&t.addIntegration({title:"ShareCAD.org CAD and 3D-Models viewer",link:"https://sharecad.org/DWGOnlinePlugin"}),o.on(t.evUpdate,function(r){var s=r.file;if(a[s.mime.toLowerCase()]&&i.option("onetimeUrl",s.hash)){var l,c,d;t.window;r.stopImmediatePropagation(),"1"==s.url&&(o.hide(),e('<div class="elfinder-quicklook-info-data"><button class="elfinder-info-button">'+i.i18n("getLink")+"</button></div>").appendTo(t.info.find(".elfinder-quicklook-info")).on("click",function(){var n=e(this);n.html('<span class="elfinder-spinner">'),i.request({data:{cmd:"url",target:s.hash},preventDefault:!0,progressBar:c}).always(function(){n.html("")}).done(function(e){var n=i.file(s.hash);s.url=n.url=e.url||"",s.url&&o.trigger({type:t.evUpdate,file:s,forceUpdate:!0})})})),""!==s.url&&"1"!=s.url&&(o.one("change",function(){l.remove(),n.off("load").remove(),n=null}).addClass("elfinder-overflow-auto"),l=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+i.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),c=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(l),d=i.convAbsUrl(i.url(s.hash)),n=e('<iframe class="elfinder-quicklook-preview-iframe" scrolling="no"></iframe>').css("background-color","transparent").appendTo(o).on("load",function(){t.hideinfo(),l.remove(),t.preview.after(t.info),e(this).css("background-color","#fff").show()}).on("error",function(){l.remove(),t.preview.after(t.info)}).attr("src","//sharecad.org/cadframe/load?url="+encodeURIComponent(d)),t.info.after(t.preview))}})},function(t){var n,i,a,o,r,s=t.fm,l={"application/vnd.google-earth.kml+xml":!0,"application/vnd.google-earth.kmz":!0},c=t.preview;t.options.googleMapsApiKey&&(t.addIntegration({title:"Google Maps",link:"https://www.google.com/intl/"+s.lang.replace("_","-")+"/help/terms_maps.html"}),n=window.google&&google.maps,i=function(e,i,a){var r=t.options.googleMapsOpts.maps;s.forExternalUrl(e.hash,{progressBar:a}).done(function(e){if(e)try{new n.KmlLayer(e,Object.assign({map:new n.Map(i.get(0),r)},t.options.googleMapsOpts.kml)),t.hideinfo()}catch(a){o()}else o()})},a=window.gm_authFailure,o=function(){r=null},r="https://maps.googleapis.com/maps/api/js?key="+t.options.googleMapsApiKey,window.gm_authFailure=function(){o(),a&&a()},c.on(t.evUpdate,function(a){var o=a.file;if(r&&l[o.mime.toLowerCase()]){var d,p,u,h=(t.window,"1"==o.url&&!s.option("onetimeUrl",o.hash));a.stopImmediatePropagation(),d=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+s.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),p=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(d),h&&(c.hide(),e('<div class="elfinder-quicklook-info-data"><button class="elfinder-info-button">'+s.i18n("getLink")+"</button></div>").appendTo(t.info.find(".elfinder-quicklook-info")).on("click",function(){var n=e(this);n.html('<span class="elfinder-spinner">'),s.request({data:{cmd:"url",target:o.hash},preventDefault:!0,progressBar:p}).always(function(){d.remove(),n.html("")}).done(function(e){var n=s.file(o.hash);o.url=n.url=e.url||"",o.url&&c.trigger({type:t.evUpdate,file:o,forceUpdate:!0})})})),""===o.url||h||(u=e('<div style="width:100%;height:100%;"></div>').appendTo(c),c.one("change",function(){u.remove(),u=null}),n?i(o,u,p):s.loadScript([r],function(){n=window.google&&google.maps,n&&i(o,u,p)}))}}))},function(t){var n,i,a=t.fm,o=Object.assign(a.arrayFlip(t.options.googleDocsMimes||[],"g"),a.arrayFlip(t.options.officeOnlineMimes||[],"m")),r=t.preview,s=(t.window,t.navbar),l={g:"docs.google.com/gview?embedded=true&url=",m:"view.officeapps.live.com/op/embed.aspx?wdStartOn=0&src="},c={g:"56px",m:"24px"},d={xls:5242880,xlsb:5242880,xlsx:5242880,xlsm:5242880,other:10485760};t.options.googleDocsMimes.length&&(i=!0,t.addIntegration({title:"Google Docs Viewer",link:"https://docs.google.com/"})),t.options.officeOnlineMimes.length&&(i=!0,t.addIntegration({title:"MS Online Doc Viewer",link:"https://products.office.com/office-online/view-office-documents-online"})),i&&r.on(t.evUpdate,function(i){var p,u,h=i.file;if(h.size<=26214400&&(p=o[h.mime])){var f,m,g,v=t.window,b=function(){s.css("bottom",v.hasClass("elfinder-quicklook-fullscreen")?c[p]:"")},y=a.mimeTypes[h.mime],w="1"==h.url&&!a.option("onetimeUrl",h.hash);"m"===p&&(d[y]&&h.size>d[y]||h.size>d.other)&&(p="g"),w&&(r.hide(),e('<div class="elfinder-quicklook-info-data"><button class="elfinder-info-button">'+a.i18n("getLink")+"</button></div>").appendTo(t.info.find(".elfinder-quicklook-info")).on("click",function(){var n=e(this);n.html('<span class="elfinder-spinner">'),a.request({data:{cmd:"url",target:h.hash},preventDefault:!0}).always(function(){n.html("")}).done(function(e){var n=a.file(h.hash);h.url=n.url=e.url||"",h.url&&r.trigger({type:t.evUpdate,file:h,forceUpdate:!0})})})),""===h.url||w||(i.stopImmediatePropagation(),r.one("change",function(){u&&u.status&&"pending"===u.status()&&u.reject(),v.off("viewchange.googledocs"),f.remove(),n.off("load").remove(),n=null}).addClass("elfinder-overflow-auto"),f=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+a.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),m=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(f),n=e('<iframe class="elfinder-quicklook-preview-iframe"></iframe>').css("background-color","transparent").appendTo(r),u=a.forExternalUrl(h.hash,{progressBar:m}).done(function(i){var a=function(){try{!n||n.attr("src")&&!n.get(0).contentWindow.document||(n.attr("src","https://"+l[p]+encodeURIComponent(i)),g=setTimeout(a,2e3))}catch(e){}};i?(h.ts&&(i+=(i.match(/\?/)?"&":"?")+"_t="+h.ts),n.on("load",function(){g&&clearTimeout(g),t.hideinfo(),f.remove(),t.preview.after(t.info),e(this).css("background-color","#fff").show()}).on("error",function(){g&&clearTimeout(g),f.remove(),t.preview.after(t.info)}),a()):(f.remove(),n.remove())}),v.on("viewchange.googledocs",b),b(),t.info.after(t.preview))}})},function(t){"use strict";var n,i,a=t.fm,o=t.preview,r=parseInt(t.options.textInitialLines)||150,s=parseInt(t.options.prettifyMaxLines)||500,l=function(){c=function(){return!1},i&&(window.PR=i),n=!1},c=function(e){a.options.cdns.prettify?(c=function(e){return setTimeout(function(){p(e)},100),"pending"},window.PR&&(i=window.PR),a.loadScript([a.options.cdns.prettify+(a.options.cdns.prettify.match(/\?/)?"&":"?")+"autorun=false"],function(t){n=t||window.PR,"object"==typeof n?(c=function(){return!0},i?window.PR=i:delete window.PR,d(e)):l()},{tryRequire:!0,error:l})):l()},d=function(e){e&&!e.hasClass("prettyprinted")&&(e.css("cursor","wait"),requestAnimationFrame(function(){n.prettyPrint&&n.prettyPrint(null,e.get(0)),e.css("cursor","")}))},p=function(e){var t=c(e);t===!0&&d(e)};o.on(t.evUpdate,function(i){var l,c,d,u,h=i.file;h.mime;a.mimeIsText(h.mime)&&(!t.options.getSizeMax||h.size<=t.options.getSizeMax)&&n!==!1&&(i.stopImmediatePropagation(),c=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+a.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),d=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(c),o.one("change",function(){"pending"==l.state()&&l.reject(),u&&u.remove()}),l=a.request({data:{cmd:"get",target:h.hash,conv:h.encoding||1,_t:h.ts},options:{type:"get",cache:!0},preventDefault:!0,progressBar:d}).done(function(n){var i,l,c,d,u,f=new RegExp("^(data:"+h.mime.replace(/([.+])/g,"\\$1")+";base64,)","i"),m=n.content;"string"==typeof m&&(t.hideinfo(),window.atob&&(u=m.match(f))&&(m=atob(m.substr(u[1].length))),d=m.match(/([^\r\n]{1,100}[\r\n]*)/g),l=d.length-r,l>10?i=d.splice(0,r).join(""):l=0,c=e('<div class="elfinder-quicklook-preview-text-wrapper"><pre class="elfinder-quicklook-preview-text prettyprint"></pre></div>'),l&&c.append(e('<div class="elfinder-quicklook-preview-charsleft"><hr/><span>'+a.i18n("linesLeft",a.toLocaleString(l))+"</span></div>").on("click",function(){var t=c.scrollTop();e(this).remove(),c.children("pre").removeClass("prettyprinted").text(m).scrollTop(t),d.length<=s&&p(c)})),c.children("pre").text(i||m),c.on("touchstart",function(t){e(this)["scroll"+("ltr"===a.direction?"Right":"Left")]()>5&&(t.originalEvent._preventSwipeX=!0)}).appendTo(o),n.toasts&&Array.isArray(n.toasts)&&e.each(n.toasts,function(){this.msg&&a.toast(this)}),p(c))}).always(function(n){var i,r,s;(i=a.getCommand("edit"))&&(s=[],n&&n.encoding&&s.push({value:n.encoding}),s.push({value:"UTF-8"}),r=i.getEncSelect(s),r.on("change",function(){h.encoding=r.val(),a.cache(h,"change"),o.trigger({type:t.evUpdate,file:h,forceUpdate:!0})}),u=e('<div class="elfinder-quicklook-encoding"></div>').append(r),t.window.append(u)),c.remove()}))})}],(i.prototype.commands.reload=function(){"use strict";var t=this,n=!1;this.alwaysEnabled=!0,this.updateOnSelect=!0,this.shortcuts=[{pattern:"ctrl+shift+r f5"}],this.getstate=function(){return 0},this.init=function(){this.fm.bind("search searchend",function(){n="search"==this.type})},this.fm.bind("contextmenu",function(){var n=t.fm;n.options.sync>=1e3&&(t.extra={icon:"accept",node:e("<span></span>").attr({title:n.i18n("autoSync")}).on("click touchstart",function(t){"touchstart"===t.type&&t.originalEvent.touches.length>1||(t.stopPropagation(),t.preventDefault(),e(this).parent().toggleClass("ui-state-disabled",n.options.syncStart).parent().removeClass("ui-state-hover"),n.options.syncStart=!n.options.syncStart,n.autoSync(n.options.syncStart?null:"stop"))}).on("ready",function(){e(this).parent().toggleClass("ui-state-disabled",!n.options.syncStart).css("pointer-events","auto")})})}),this.exec=function(){var t=this.fm;if(!n){var i=t.sync(),a=setTimeout(function(){t.notify({type:"reload",cnt:1,hideCnt:!0}),i.always(function(){t.notify({type:"reload",cnt:-1})})},t.notifyDelay);return i.always(function(){clearTimeout(a),t.trigger("reload")})}e("div.elfinder-toolbar > div."+t.res("class","searchbtn")+" > span.ui-icon-search").click()}}).prototype={forceLoad:!0},i.prototype.commands.rename=function(){"use strict";this.alwaysEnabled=!0,this.syncTitleOnChange=!0;var t=this,n=t.fm,i=function(t,i,a,o){var r,s=i?[a.hash].concat(i):[a.hash],l=s.length,c={};if(n.lockfiles({files:s}),n.isRoot(a)&&!a.netkey){if((r=n.storage("rootNames"))||(r={}),""===o){if(!r[a.hash])return t&&t.reject(),void n.unlockfiles({files:s}).trigger("selectfiles",{files:s});a.name=a._name,a.i18=a._i18,delete r[a.hash],delete a._name,delete a._i18}else"undefined"==typeof a._name&&(a._name=a.name,a._i18=a.i18),a.name=r[a.hash]=o,delete a.i18;return n.storage("rootNames",r),c={changed:[a]},n.updateCache(c),n.change(c),t&&t.resolve(c),void n.unlockfiles({files:s}).trigger("selectfiles",{files:s})}c={cmd:"rename",name:o,target:a.hash},l>1&&(c.targets=i,o.match(/\*/)&&(c.q=o)),n.request({data:c,notify:{type:"rename",cnt:l},navigate:{}}).fail(function(e){var i=n.parseError(e);t&&t.reject(),i&&Array.isArray(i)&&"errRename"===i[0]||n.sync()}).done(function(i){var r;i.added&&i.added.length&&1===l&&(i.undo={cmd:"rename",callback:function(){return n.request({data:{cmd:"rename",target:i.added[0].hash,name:a.name},notify:{type:"undo",cnt:1}})}},i.redo={cmd:"rename",callback:function(){return n.request({data:{cmd:"rename",target:a.hash,name:o},notify:{type:"rename",cnt:1}})}}),t&&t.resolve(i),(r=n.cwd().hash)&&r!==a.hash||n.exec("open",e.map(i.added,function(e){return"directory"===e.mime?e.hash:null})[0])}).always(function(){n.unlockfiles({files:s}).trigger("selectfiles",{files:s})})},a=function(e,t){var i,a,o,r=t||n.selected(),s=n.splitFileExtention(e),l=n.file(r[0]),c=n.file(r[1]);return i=s[1]?"."+s[1]:"",s[1]&&"*"===s[0]?(a='"'+n.splitFileExtention(l.name)[0]+i+'", ',a+='"'+n.splitFileExtention(c.name)[0]+i+'"'):s[0].length>1&&("*"===s[0].substr(-1)?(o=s[0].substr(0,s[0].length-1),a='"'+o+l.name+'", ',a+='"'+o+c.name+'"'):"*"===s[0].substr(0,1)&&(o=s[0].substr(1),a='"'+n.splitFileExtention(l.name)[0]+o+i+'", ',a+='"'+n.splitFileExtention(c.name)[0]+o+i+'"')),a||(a='"'+s[0]+"1"+i+'", "'+s[0]+"2"+i+'"'),r.length>2&&(a+=" ..."),a},o=function(){var o,r=n.selected(),s='<input name="type" type="radio" class="elfinder-tabstop">',l=function(t,i){return e('<label class="elfinder-rename-batch-checks">'+n.i18n(i)+"</label>").prepend(t)},c=e('<input type="text" class="ui-corner-all elfinder-tabstop">'),d=e(s),p=e(s),u=e(s),h=e(s),f=e("<div></div>").append(l(d,"plusNumber"),l(p,"asPrefix"),l(u,"asSuffix"),l(h,"changeExtention")),m=e('<div class="elfinder-rename-batch-preview"></div>'),g=e('<div class="elfinder-rename-batch"></div>').append(e('<div class="elfinder-rename-batch-name"></div>').append(c),e('<div class="elfinder-rename-batch-type"></div>').append(f),m),v={
title:n.i18n("batchRename"),modal:!0,destroyOnClose:!0,width:Math.min(380,n.getUI().width()-20),buttons:{},open:function(){c.on("input",y).trigger("focus")}},b=function(){var e=c.val(),t=n.splitFileExtention(n.file(r[0]).name)[1];return(""!==e||d.is(":checked"))&&(p.is(":checked")?e+="*":u.is(":checked")?e="*"+e+"."+t:h.is(":checked")?e="*."+e:t&&(e+="."+t)),e},y=function(){var e=b();""!==e?m.html(n.i18n(["renameMultiple",r.length,a(e)])):m.empty()},w=f.find("input:radio").on("change",y);v.buttons[n.i18n("btnApply")]=function(){var e,t,a=b();""!==a&&(o.elfinderdialog("close"),t=r,e=n.file(t.shift()),i(void 0,t,e,a))},v.buttons[n.i18n("btnCancel")]=function(){o.elfinderdialog("close")},e.fn.checkboxradio?w.checkboxradio({create:function(e,t){this===d.get(0)&&d.prop("checked",!0).change()}}):f.buttonset({create:function(e,t){d.prop("checked",!0).change()}}),o=t.fmDialog(g,v)};this.noChangeDirOnRemovedCwd=!0,this.shortcuts=[{pattern:"f2"+("mac"==n.OS?" enter":"")},{pattern:"shift+f2",description:"batchRename",callback:function(){n.selected().length>1&&o()}}],this.getstate=function(i){var a,r,s,l,c,d,p=this.files(i),u=p.length;return u?(u>1&&p[0].phash&&(a=p[0].phash,r=n.splitFileExtention(p[0].name)[1].toLowerCase(),s=p[0].mime),1===u&&(d=n.isRoot(p[0])),c=1===u&&(n.cookieEnabled&&d||!p[0].locked)||n.api>2.103&&u===e.grep(p,function(e){return!(l||e.locked||e.phash!==a||n.isRoot(e)||s!==e.mime&&r!==n.splitFileExtention(e.name)[1].toLowerCase())||(l&&(l=!0),!1)}).length?0:-1,!d&&0===c&&n.option("disabledFlip",p[0].hash).rename&&(c=-1),c!==-1&&u>1?t.extra={icon:"preference",node:e("<span></span>").attr({title:n.i18n("batchRename")}).on("click touchstart",function(e){"touchstart"===e.type&&e.originalEvent.touches.length>1||(e.stopPropagation(),e.preventDefault(),n.getUI().trigger("click"),o())})}:delete t.extra,c):-1},this.exec=function(t,o){var r,s=(n.getUI("cwd"),t||!!n.selected().length&&n.selected()||[n.cwd().hash]),l=s.length,c=n.file(s.shift()),d=".elfinder-cwd-filename",p=o||{},u=n.cwd().hash==c.hash,h="navbar"===p._currentType||"files"===p._currentType?p._currentType:u?"navbar":"files",f="files"!==h,m=n[f?"navHash2Elm":"cwdHash2Elm"](c.hash),g=!f&&"list"!=n.storage("view"),v=function(){requestAnimationFrame(function(){x&&x.trigger("blur")})},b=function(){T.is(":hidden")||T.elfinderoverlay("hide").off("click close",A),z.removeClass("ui-front").css("position","").off("unselect."+n.namespace,v),g?C&&C.css("max-height",""):f||z.css("width","").parent("td").css("overflow","")},y=e.Deferred().fail(function(e){var t=x.parent(),i=n.escape(c.i18||c.name);x.off(),g&&(i=i.replace(/([_.])/g,"&#8203;$1")),requestAnimationFrame(function(){f?x.replaceWith(i):t.length?(x.remove(),t.html(i)):m.find(d).html(i)}),e&&n.error(e)}).always(function(){b(),n.unbind("resize",j),n.enable()}),w=function(t){var o=e.trim(x.val()),r=(n.splitFileExtention(o),!0),d=function(){x.off(),b(),f?x.replaceWith(n.escape(o)):C.html(n.escape(o)),i(y,s,c,o)};if(T.is(":hidden")||z.css("z-index",""),""===o){if(!n.isRoot(c))return A();f?x.replaceWith(n.escape(c.name)):C.html(n.escape(c.name))}if(!O&&z.length){if(x.off("blur"),1===l&&o===c.name)return y.reject();if(n.options.validName&&n.options.validName.test)try{r=n.options.validName.test(o)}catch(t){r=!1}if("."===o||".."===o||!r)return O=!0,n.error("directory"===c.mime?"errInvDirname":"errInvName",{modal:!0,close:function(){setTimeout(k,120)}}),!1;if(1===l&&n.fileByName(o,c.phash))return O=!0,n.error(["errExists",o],{modal:!0,close:function(){setTimeout(k,120)}}),!1;1===l?d():(n.confirm({title:"cmdrename",text:["renameMultiple",l,a(o,[c.hash].concat(s))],accept:{label:"btnYes",callback:d},cancel:{label:"btnCancel",callback:function(){setTimeout(function(){O=!0,k()},120)}}}),setTimeout(function(){n.trigger("unselectfiles",{files:n.selected()}).trigger("selectfiles",{files:[c.hash].concat(s)})},120))}},x=e(g?"<textarea></textarea>":'<input type="text"/>').on("keyup text",function(){g?(this.style.height="1px",this.style.height=this.scrollHeight+"px"):r&&(this.style.width=r+"px",this.scrollWidth>r&&(this.style.width=this.scrollWidth+10+"px"))}).on("keydown",function(t){t.stopImmediatePropagation(),t.keyCode==e.ui.keyCode.ESCAPE?y.reject():t.keyCode==e.ui.keyCode.ENTER&&(t.preventDefault(),x.trigger("blur"))}).on("mousedown click dblclick",function(e){e.stopPropagation(),"dblclick"===e.type&&e.preventDefault()}).on("blur",w).on("dragenter dragleave dragover drop",function(e){e.stopPropagation()}),k=function(){var e=n.splitFileExtention(x.val())[0];O||!n.UA.Mobile||n.UA.iOS||(T.on("click close",A).elfinderoverlay("show"),z.css("z-index",T.css("z-index")+1)),!n.enabled()&&n.enable(),O&&(O=!1,x.on("blur",w)),x.trigger("focus").trigger("select"),x[0].setSelectionRange&&x[0].setSelectionRange(0,e.length)},C=f?m.contents().filter(function(){return 3==this.nodeType&&e(this).parent().attr("id")===n.navHash2Id(c.hash)}):m.find(d),z=C.parent(),T=n.getUI("overlay"),A=function(e){T.is(":hidden")||z.css("z-index",""),O||(y.reject(),e&&(e.stopPropagation(),e.preventDefault()))},j=function(){m.trigger("scrolltoview",{blink:!1})},O=!1;return z.addClass("ui-front").css("position","relative").on("unselect."+n.namespace,v),n.bind("resize",j),f?C.replaceWith(x.val(c.name)):(g?C.css("max-height","none"):f||(r=z.width(),z.width(r-15).parent("td").css("overflow","visible")),C.empty().append(x.val(c.name))),l>1&&n.api<=2.103?y.reject():c&&C.length?c.locked&&!n.isRoot(c)?y.reject(["errLocked",c.name]):(n.one("select",function(){x.parent().length&&c&&e.inArray(c.hash,n.selected())===-1&&x.trigger("blur")}),x.trigger("keyup"),k(),y):y.reject("errCmdParams",this.title)},n.bind("select contextmenucreate closecontextmenu",function(e){var i,a=(e.data?e.data.selected||e.data.targets:null)||n.selected();a&&1===a.length&&(i=n.file(a[0]))&&n.isRoot(i)?t.title=n.i18n("kindAlias")+" ("+n.i18n("preference")+")":t.title=n.i18n("cmdrename"),"closecontextmenu"!==e.type?t.update(void 0,t.title):requestAnimationFrame(function(){t.update(void 0,t.title)})}).remove(function(t){var i;t.data&&t.data.removed&&(i=n.storage("rootNames"))&&(e.each(t.data.removed,function(e,t){i[t]&&delete i[t]}),n.storage("rootNames",i))})},i.prototype.commands.resize=function(){"use strict";var t=this.fm,n=0,i=function(t,n,i){var a=[{x:t/2,y:n/2},{x:-t/2,y:n/2},{x:-t/2,y:-n/2},{x:t/2,y:-n/2}],o=[],r={x:Number.MAX_VALUE,y:Number.MAX_VALUE},s={x:Number.MIN_VALUE,y:Number.MIN_VALUE};return e.each(a,function(e,t){o.push({x:t.x*Math.cos(i)-t.y*Math.sin(i),y:t.x*Math.sin(i)+t.y*Math.cos(i)})}),e.each(o,function(e,t){r.x=Math.min(r.x,t.x),r.y=Math.min(r.y,t.y),s.x=Math.max(s.x,t.x),s.y=Math.max(s.y,t.y)}),{width:s.x-r.x,height:s.y-r.y}};this.updateOnSelect=!1,this.getstate=function(){var e=t.selectedFiles();return 1==e.length&&e[0].read&&e[0].write&&e[0].mime.indexOf("image/")!==-1?0:-1},this.resizeRequest=function(n,i,a){var o=i||t.file(n.target),r=(o?o.tmb:null,t.isCommandEnabled("resize",n.target));if(r&&(!o||o&&o.read&&o.write&&o.mime.indexOf("image/")!==-1))return t.request({data:Object.assign(n,{cmd:"resize"}),notify:{type:"resize",cnt:1}}).fail(function(e){a&&a.reject(e)}).done(function(){n.quality&&t.storage("jpgQuality",n.quality===t.option("jpgQuality")?null:n.quality),a&&a.resolve()});var s;return s=o?o.mime.indexOf("image/")===-1?["errResize",o.name,"errUsupportType"]:["errResize",o.name,"errPerm"]:["errResize",n.target,"errPerm"],a?a.reject(s):t.error(s),e.Deferred().reject(s)},this.exec=function(a){var o,r,s,l,c=this,d=this.files(a),p=e.Deferred(),u=t.api>1,h=this.options,f=650,m=t.getUI(),g=e().controlgroup?"controlgroup":"buttonset",v="undefined"==typeof h.grid8px||"disable"!==h.grid8px,b=Array.isArray(h.presetSize)?h.presetSize:[],y="elfinder-dialog-active",w=t.res("class","editing"),x=function(a,o,r){var d,x,k,C,z,T="image/jpeg"===a.mime,A=e('<div class="elfinder-resize-container"></div>'),j='<input type="number" class="ui-corner-all"/>',O='<div class="elfinder-resize-row"></div>',S='<div class="elfinder-resize-label"></div>',I=null,M=!1,E=function(){M=!0},F=function(){M&&(M=!1,D.trigger("change"))},D=e('<div class="elfinder-resize-control"></div>').on("focus","input[type=text],input[type=number]",function(){e(this).trigger("select")}).on("change",function(){I&&cancelAnimationFrame(I),I=requestAnimationFrame(function(){var e,n,a,o,r,s,c,d,p,u,h,f;at&&!M&&(a=at.data("canvas"))&&(e=D.children("div.elfinder-resize-control-panel:visible"),n=e.find("input.elfinder-resize-quality"),n.is(":visible")&&(o=at.data("ctx"),r=at.get(0),e.hasClass("elfinder-resize-uiresize")?(d=a.width=X.val(),p=a.height=J.val(),o.drawImage(r,0,0,d,p)):e.hasClass("elfinder-resize-uicrop")?(s=G.val(),c=Y.val(),d=Q.val(),p=Z.val(),a.width=d,a.height=p,o.drawImage(r,s,c,d,p,0,0,d,p)):(u=te.val(),h=te.val()*Math.PI/180,f=i(fe,me,h),d=a.width=f.width,p=a.height=f.height,o.save(),u%90!==0&&(o.fillStyle=de.val()||"#FFF",o.fillRect(0,0,d,p)),o.translate(d/2,p/2),o.rotate(h),o.drawImage(r,-r.width/2,-r.height/2,fe,me),o.restore()),a.toBlob(function(e){e&&(l=e.size,n.next("span").text(" ("+t.formatSize(e.size)+")"))},"image/jpeg",Math.max(Math.min(n.val(),100),1)/100)))})}).on("mouseup","input",function(t){e(t.target).trigger("change")}),U=e('<div class="elfinder-resize-preview"></div>').on("touchmove",function(t){e(t.target).hasClass("touch-punch")&&(t.stopPropagation(),t.preventDefault())}),P=e('<div class="elfinder-resize-loading">'+t.i18n("ntfloadimg")+"</div>"),q=e('<div class="elfinder-resize-handle touch-punch"></div>'),R=e('<div class="elfinder-resize-handle touch-punch"></div>'),H=e('<div class="elfinder-resize-uiresize elfinder-resize-control-panel"></div>'),_=e('<div class="elfinder-resize-uicrop elfinder-resize-control-panel"></div>'),N=e('<div class="elfinder-resize-rotate elfinder-resize-control-panel"></div>'),L=e("<button></button>").attr("title",t.i18n("rotate-cw")).append(e('<span class="elfinder-button-icon elfinder-button-icon-rotate-l"></span>')),W=e("<button></button>").attr("title",t.i18n("rotate-ccw")).append(e('<span class="elfinder-button-icon elfinder-button-icon-rotate-r"></span>')),B=e("<span ></span>"),$=e('<button class="elfinder-resize-reset">').text(t.i18n("reset")).on("click",function(){We()}).button({icons:{primary:"ui-icon-arrowrefresh-1-n"},text:!1}),V=e('<div class="elfinder-resize-type"></div>').append('<input type="radio" name="type" id="'+o+'-resize" value="resize" checked="checked" /><label for="'+o+'-resize">'+t.i18n("resize")+"</label>",'<input class="api2" type="radio" name="type" id="'+o+'-crop" value="crop" /><label class="api2" for="'+o+'-crop">'+t.i18n("crop")+"</label>",'<input class="api2" type="radio" name="type" id="'+o+'-rotate" value="rotate" /><label class="api2" for="'+o+'-rotate">'+t.i18n("rotate")+"</label>"),K="resize",X=(V[g]()[g]("disable").find("input").on("change",function(){K=e(this).val(),We(),Ke(!0),Xe(!0),Je(!0),"resize"==K?(H.show(),N.hide(),_.hide(),Ke(),T&&Ae.insertAfter(H.find(".elfinder-resize-grid8"))):"crop"==K?(N.hide(),H.hide(),_.show(),Xe(),T&&Ae.insertAfter(_.find(".elfinder-resize-grid8"))):"rotate"==K&&(H.hide(),_.hide(),N.show(),Je())}),e(j).on("change",function(){var e=Le(parseInt(X.val())),t=Le(ge?e/ue:parseInt(J.val()));e>0&&t>0&&(Be.updateView(e,t),X.val(e),J.val(t))}).addClass("elfinder-focus")),J=e(j).on("change",function(){var e=Le(parseInt(J.val())),t=Le(ge?e*ue:parseInt(X.val()));t>0&&e>0&&(Be.updateView(t,e),X.val(t),J.val(e))}),G=e(j).on("change",function(){$e.updateView()}),Y=e(j).on("change",function(){$e.updateView()}),Q=e(j).on("change",function(){$e.updateView("w")}),Z=e(j).on("change",function(){$e.updateView("h")}),ee=T&&u?e(j).val(t.storage("jpgQuality")>0?t.storage("jpgQuality"):t.option("jpgQuality")).addClass("elfinder-resize-quality").attr("min","1").attr("max","100").attr("title","1 - 100").on("blur",function(){var e=Math.min(100,Math.max(1,parseInt(this.value)));D.find("input.elfinder-resize-quality").val(e)}):null,te=e('<input type="number" class="ui-corner-all" maxlength="3" value="0" />').on("change",function(){Ve.update()}),ne=e('<div class="elfinder-resize-rotate-slider touch-punch"></div>').slider({min:0,max:360,value:te.val(),animate:!0,start:E,stop:F,change:function(e,t){t.value!=ne.slider("value")&&Ve.update(t.value)},slide:function(e,t){Ve.update(t.value,!1)}}).find(".ui-slider-handle").addClass("elfinder-tabstop").off("keydown").on("keydown",function(t){t.keyCode!=e.ui.keyCode.LEFT&&t.keyCode!=e.ui.keyCode.RIGHT||(t.stopPropagation(),t.preventDefault(),Ve.update(Number(te.val())+(t.keyCode==e.ui.keyCode.RIGHT?1:-1),!1))}).end(),ie={},ae=function(e){var t,n,i,a,o,r,s;try{t=ie[Math.round(e.offsetX)][Math.round(e.offsetY)]}catch(e){}t&&(n=t[0],i=t[1],a=t[2],o=t[3],r=t[4],s=t[5],re(n,i,a,"click"===e.type))},oe=function(t){re(e(this).css("backgroundColor"),"","","click"===t.type)},re=function(t,n,i,a){var o,r,s;"string"==typeof t&&(n="",t&&(o=e("<span>").css("backgroundColor",t).css("backgroundColor"))&&(r=o.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))&&(t=Number(r[1]),n=Number(r[2]),i=Number(r[3]))),s=""===n?t:"#"+se(t,n,i),de.val(s).css({backgroundColor:s,backgroundImage:"none",color:t+n+i<384?"#fff":"#000"}),U.css("backgroundColor",s),a&&(Ne.off(".picker").removeClass("elfinder-resize-picking"),pe.off(".picker").removeClass("elfinder-resize-picking"))},se=function(t,n,i){return e.map([t,n,i],function(e){return("0"+parseInt(e).toString(16)).slice(-2)}).join("")},le=e("<button>").text(t.i18n("colorPicker")).on("click",function(){Ne.on("mousemove.picker click.picker",ae).addClass("elfinder-resize-picking"),pe.on("mousemove.picker click.picker","span",oe).addClass("elfinder-resize-picking")}).button({icons:{primary:"ui-icon-pin-s"},text:!1}),ce=e("<button>").text(t.i18n("reset")).on("click",function(){re("","","",!0)}).button({icons:{primary:"ui-icon-arrowrefresh-1-n"},text:!1}),de=e('<input class="ui-corner-all elfinder-resize-bg" type="text">').on("focus",function(){e(this).attr("style","")}).on("blur",function(){re(e(this).val())}),pe=e('<div class="elfinder-resize-pallet">').on("click","span",function(){re(e(this).css("backgroundColor"))}),ue=1,he=1,fe=0,me=0,ge=!0,ve=!1,be=0,ye=0,we=0,xe=0,ke=0,Ce=!!T&&v,ze=e("<button>").html(t.i18n("aspectRatio")).on("click",function(){ge=!ge,ze.button("option",{icons:{primary:ge?"ui-icon-locked":"ui-icon-unlocked"}}),Be.fixHeight(),q.resizable("option","aspectRatio",ge).data("uiResizable")._aspectRatio=ge}).button({icons:{primary:ge?"ui-icon-locked":"ui-icon-unlocked"},text:!1}),Te=e("<button>").html(t.i18n("aspectRatio")).on("click",function(){ve=!ve,Te.button("option",{icons:{primary:ve?"ui-icon-locked":"ui-icon-unlocked"}}),R.resizable("option","aspectRatio",ve).data("uiResizable")._aspectRatio=ve}).button({icons:{primary:ve?"ui-icon-locked":"ui-icon-unlocked"},text:!1}),Ae=e("<button>").html(t.i18n(Ce?"enabled":"disabled")).toggleClass("ui-state-active",Ce).on("click",function(){Ce=!Ce,Ae.html(t.i18n(Ce?"enabled":"disabled")).toggleClass("ui-state-active",Ce),je()}).button(),je=function(){var t=Ce?8:1;e.each([X,J,Q,Z,G,Y],function(){this.attr("step",t)}),Ce&&(X.val(Le(X.val())),J.val(Le(J.val())),Q.val(Le(Q.val())),Z.val(Le(Z.val())),G.val(Le(G.val())),Y.val(Le(Y.val())),H.is(":visible")?Be.updateView(X.val(),J.val()):_.is(":visible")&&$e.updateView())},Oe=function(){var n,i=function(){de.parent().hide(),pe.hide()};n=Math.min(be,ye)/Math.sqrt(Math.pow(fe,2)+Math.pow(me,2)),we=Math.ceil(fe*n),xe=Math.ceil(me*n),Ne.width(we).height(xe).css("margin-top",(ye-xe)/2+"px").css("margin-left",(be-we)/2+"px"),Ne.is(":visible")&&de.is(":visible")&&("image/png"!==a.mime?(U.css("backgroundColor",de.val()),d=e("<img>"),t.isCORS&&d.attr("crossorigin","use-credentials"),d.on("load",function(){x&&x.width!==we&&Ie()}).on("error",i).attr("src",it)):i())},Se=function(){Be.updateView(fe,me),Oe(),Re.width(qe.width()).height(qe.height()),He.width(qe.width()).height(qe.height()),$e.updateView(),ot()},Ie=function(){if(k){var t,n,i,a,o,r,s,l,c,p,u,h,f,m,g,v,b,y,w,C={},z=[],T=function(e,t,n){var i,a,o,r=Math.max(Math.max(e,t),n),s=Math.min(Math.min(e,t),n);return r===s?i=0:e===r?i=((t-n)/(r-s)*60+360)%360:t===r?i=(n-e)/(r-s)*60+120:n===r&&(i=(e-t)/(r-s)*60+240),a=(r-s)/r,o=(.3*e+.59*t+.11*n)/255,[i,a,o,"hsl"]},A=function(e){return 8*Math.round(e/8)};e:try{n=x.width=Ne.width(),i=x.height=Ne.height(),f=n/fe,k.scale(f,f),k.drawImage(d.get(0),0,0),h=k.getImageData(0,0,n,i).data,m=.1*n,g=.9*n,v=.1*i,b=.9*i;for(var j=0;j<i-1;j++)for(var O=0;O<n-1;O++){if(t=4*O+j*n*4,a=h[t],o=h[t+1],r=h[t+2],s=h[t+3],255!==s){de.parent().hide(),pe.hide();break e}p=T(a,o,r),u=Math.round(p[0]),l=Math.round(100*p[1]),c=Math.round(100*p[2]),ie[O]||(ie[O]={}),ie[O][j]=[a,o,r,u,l,c],(O<m||O>g)&&(j<v||j>b)&&(y=A(a)+","+A(o)+","+A(r),C[y]?++C[y]:C[y]=1)}pe.children(":first").length||(w=1,e.each(C,function(e,t){z.push({c:e,v:t})}),e.each(z.sort(function(e,t){return e.v>t.v?-1:1}),function(){return!(this.v<2||w>10)&&(pe.append(e('<span style="width:20px;height:20px;display:inline-block;background-color:rgb('+this.c+');">')),void++w)}))}catch(S){le.hide(),pe.hide()}}},Me=function(){try{x=document.createElement("canvas"),k=x.getContext("2d")}catch(e){le.hide(),pe.hide()}},Ee=function(){st.on("click","span.elfinder-resize-preset",function(){var t=e(this),n=t.data("s")[0],i=t.data("s")[1],a=fe/me;t.data("s",[i,n]).text(i+"x"+n),fe>n||me>i?fe<=n?n=Le(i*a):me<=i?i=Le(n/a):fe-n>me-i?i=Le(n/a):n=Le(i*a):(n=fe,i=me),X.val(n),J.val(i),Be.updateView(n,i),ot()}),lt.on("click","span.elfinder-resize-preset",function(){var t=e(this),n=t.data("s")[0],i=t.data("s")[1],a=G.val(),o=Y.val();t.data("s",[i,n]).text(i+"x"+n),fe>=n&&me>=i&&(fe-n-a<0&&(a=fe-n),me-i-o<0&&(o=me-i),G.val(a),Y.val(o),Q.val(n),Z.val(i),$e.updateView(),ot())}),lt.children("span.elfinder-resize-preset").each(function(){var t=e(this),n=t.data("s")[0],i=t.data("s")[1];t[fe>=n&&me>=i?"show":"hide"]()})},Fe=null,De=!1,Ue=function(e){var n=t.file(a.hash);n.width=e[0],n.height=e[1]},Pe=function(){var i,o,r;De||(De=!0,Fe&&Fe.state&&"pending"===Fe.state()&&Fe.reject(),t.api>=2.103?0===n&&t.request({data:{cmd:"resize",target:a.hash,degree:0,mode:"rotate"},preventDefault:!0}).done(function(e){n=e.losslessRotate?1:-1,1===n&&te.val()%90===0&&N.children("div.elfinder-resize-quality").hide()}).fail(function(){n=-1}):n=-1,i=qe.get(0),o=a.width&&a.height?{w:a.width,h:a.height}:i.naturalWidth?null:{w:qe.width(),h:qe.height()},o&&qe.removeAttr("width").removeAttr("height"),fe=a.width||i.naturalWidth||i.width||qe.width(),me=a.height||i.naturalHeight||i.height||qe.height(),a.width&&a.height||Ue([fe,me]),o&&qe.width(o.w).height(o.h),C.show(),r=me/fe,r<1&&U.height()>U.width()*r&&U.height(U.width()*r),U.height()>qe.height()+20&&U.height(qe.height()+20),ye=U.height()-(q.outerHeight()-q.height()),P.remove(),ue=fe/me,q.append(qe.show()).show(),X.val(fe),J.val(me),Me(),Ee(),Se(),V[g]("enable"),D.find("input,select").prop("disabled",!1).filter(":text").on("keydown",function(n){var i;if(n.keyCode==e.ui.keyCode.ENTER)return n.stopPropagation(),n.preventDefault(),i={title:e("input:checked",V).val(),text:"confirmReq",accept:{label:"btnApply",callback:function(){Ye()}},cancel:{label:"btnCancel",callback:function(){e(this).trigger("focus")}}},ct&&(i.buttons=[{label:"btnSaveAs",callback:function(){requestAnimationFrame(Qe)}}]),void t.confirm(i)}).on("keyup",function(){var t=e(this);t.hasClass("elfinder-resize-bg")||requestAnimationFrame(function(){t.val(t.val().replace(/[^0-9]/g,""))})}).filter(":first"),je(),!t.UA.Mobile&&X.trigger("focus"),Ke())},qe=e("<img/>").on("load",Pe).on("error",function(){P.html(t.i18n("ntfsmth")).css("background","transparent")}),Re=e("<div></div>"),He=e("<img/>"),_e=e("<div></div>"),Ne=e('<img class="elfinder-resize-imgrotate" />'),Le=function(e,t){return e=Ce?8*Math.round(e/8):Math.round(e),e=Math.max(0,e),t&&e>t&&(e=Ce?8*Math.floor(t/8):t),e},We=function(){X.val(fe),J.val(me),Be.updateView(fe,me),G.val(0),Y.val(0),Q.val(fe),Z.val(me),$e.updateView(),ot()},Be={update:function(){X.val(Le(qe.width()/he)),J.val(Le(qe.height()/he)),ot()},updateView:function(e,t){e>be||t>ye?e/be>t/ye?(he=be/e,qe.width(be).height(Le(t*he))):(he=ye/t,qe.height(ye).width(Le(e*he))):qe.width(Le(e)).height(Le(t)),he=qe.width()/e,B.text("1 : "+(1/he).toFixed(2)),Be.updateHandle()},updateHandle:function(){q.width(qe.width()).height(qe.height())},fixHeight:function(){var e,t;ge&&(e=X.val(),t=Le(e/ue),Be.updateView(e,t),J.val(t))}},$e={update:function(e){G.val(Le((R.data("x")||R.position().left)/he,fe)),Y.val(Le((R.data("y")||R.position().top)/he,me)),"xy"!==e&&(Q.val(Le((R.data("w")||R.width())/he,fe-G.val())),Z.val(Le((R.data("h")||R.height())/he,me-Y.val()))),ot()},updateView:function(e){var t,n,i,a,o;G.val(Le(G.val(),fe-(Ce?8:1))),Y.val(Le(Y.val(),me-(Ce?8:1))),Q.val(Le(Q.val(),fe-G.val())),Z.val(Le(Z.val(),me-Y.val())),ve&&(t=_e.width()/_e.height(),"w"===e?Z.val(Le(parseInt(Q.val())/t)):"h"===e&&Q.val(Le(parseInt(Z.val())*t))),n=Math.round(parseInt(G.val())*he),i=Math.round(parseInt(Y.val())*he),"xy"!==e?(a=Math.round(parseInt(Q.val())*he),o=Math.round(parseInt(Z.val())*he)):(a=R.data("w"),o=R.data("h")),R.data({x:n,y:i,w:a,h:o}).width(a).height(o).css({left:n,top:i}),_e.width(a).height(o)},resize_update:function(e,t){R.data({x:t.position.left,y:t.position.top,w:t.size.width,h:t.size.height}),$e.update(),$e.updateView()},drag_update:function(e,t){R.data({x:t.position.left,y:t.position.top}),$e.update("xy")}},Ve={mouseStartAngle:0,imageStartAngle:0,imageBeingRotated:!1,setQuality:function(){N.children("div.elfinder-resize-quality")[n>0&&te.val()%90===0?"hide":"show"]()},update:function(e,n){"undefined"==typeof e&&(ke=e=parseInt(te.val())),"undefined"==typeof n&&(n=!0),!n||t.UA.Opera||t.UA.ltIE8?Ne.rotate(e):Ne.animate({rotate:e+"deg"}),e%=360,e<0&&(e+=360),te.val(parseInt(e)),ne.slider("value",te.val()),Ve.setQuality()},execute:function(e){if(Ve.imageBeingRotated){var t=Ve.getCenter(Ne),n=e.originalEvent.touches?e.originalEvent.touches[0]:e,i=n.pageX-t[0],a=n.pageY-t[1],o=Math.atan2(a,i),r=o-Ve.mouseStartAngle+Ve.imageStartAngle;return r=Math.round(180*parseFloat(r)/Math.PI),e.shiftKey&&(r=15*Math.round((r+6)/15)),Ne.rotate(r),r%=360,r<0&&(r+=360),te.val(r),ne.slider("value",te.val()),Ve.setQuality(),!1}},start:function(t){if(!Ne.hasClass("elfinder-resize-picking")){E(),Ve.imageBeingRotated=!0;var n=Ve.getCenter(Ne),i=t.originalEvent.touches?t.originalEvent.touches[0]:t,a=i.pageX-n[0],o=i.pageY-n[1];return Ve.mouseStartAngle=Math.atan2(o,a),Ve.imageStartAngle=parseFloat(Ne.rotate())*Math.PI/180,e(document).on("mousemove",Ve.execute),Ne.on("touchmove",Ve.execute),!1}},stop:function(t){if(Ve.imageBeingRotated)return e(document).off("mousemove",Ve.execute),Ne.off("touchmove",Ve.execute),requestAnimationFrame(function(){Ve.imageBeingRotated=!1}),F(),!1},getCenter:function(e){var t=Ne.rotate();Ne.rotate(0);var n=Ne.offset(),i=n.left+Ne.width()/2,a=n.top+Ne.height()/2;return Ne.rotate(t),Array(i,a)}},Ke=function(e){e?(q.filter(":ui-resizable").resizable("destroy"),q.hide()):(q.show(),q.resizable({alsoResize:qe,aspectRatio:ge,resize:Be.update,start:E,stop:function(e){Be.fixHeight,Be.updateView(X.val(),J.val()),F()}}),rt())},Xe=function(e){e?(R.filter(":ui-resizable").resizable("destroy").filter(":ui-draggable").draggable("destroy"),Re.hide()):(Re.show(),R.resizable({containment:Re,aspectRatio:ve,resize:$e.resize_update,start:E,stop:F,handles:"all"}).draggable({handle:_e,containment:He,drag:$e.drag_update,start:E,stop:function(){$e.updateView("xy"),F()}}),rt(),$e.update())},Je=function(e){e?Ne.hide():(Ne.show(),rt())},Ge=function(){var e,n,i,a,o,r,c="";if("resize"==K)e=parseInt(X.val())||0,n=parseInt(J.val())||0;else if("crop"==K)e=parseInt(Q.val())||0,n=parseInt(Z.val())||0,i=parseInt(G.val())||0,a=parseInt(Y.val())||0;else if("rotate"==K){if(e=fe,n=me,o=parseInt(te.val())||0,o<0||o>360)return t.error("Invalid rotate degree"),!1;if(0==o||360==o)return t.error("errResizeNoChange"),!1;c=de.val()}if(r=ee?parseInt(ee.val()):0,"rotate"!=K){if(e<=0||n<=0)return t.error("Invalid image size"),!1;if(e==fe&&n==me&&parseInt(s/1e3)===parseInt(l/1e3))return t.error("errResizeNoChange"),!1}return{w:e,h:n,x:i,y:a,d:o,q:r,b:c}},Ye=function(){var e;(e=Ge())&&(A.elfinderdialog("close"),c.resizeRequest({target:a.hash,width:e.w,height:e.h,x:e.x,y:e.y,degree:e.d,quality:e.q,bg:e.b,mode:K},a,p))},Qe=function(){var n,i=function(){n.addClass(w).fadeIn(function(){z.addClass(y)}),t.disable()},o=function(){c.mime=a.mime,c.prefix=a.name.replace(/ \d+(\.[^.]+)?$/,"$1"),c.requestCmd="mkfile",c.nextAction={},c.data={target:a.phash},e.proxy(t.res("mixin","make"),c)().done(function(o){var r,s;o.added&&o.added.length?(r=o.added[0].hash,s=t.api<2.1032?t.url(a.hash,{async:!0,temporary:!0}):null,e.when(s).done(function(e){t.request({options:{type:"post"},data:{cmd:"put",target:r,encoding:s?"scheme":"hash",content:s?t.convAbsUrl(e):a.hash},notify:{type:"copy",cnt:1},syncOnFail:!0}).fail(i).done(function(e){e=t.normalize(e),t.updateCache(e),a=t.file(r),e.changed&&e.changed.length&&t.change(e),z.show().find(".elfinder-dialog-title").html(t.escape(a.name)),Ye(),n.fadeIn()})}).fail(i)):i()}).fail(i).always(function(){delete c.mime,delete c.prefix,delete c.nextAction,delete c.data}),t.trigger("unselectfiles",{files:[a.hash]})},r=null;Ge()&&(n=m.children("."+c.dialogClass+":visible").removeClass(w).fadeOut(),z.removeClass(y),t.enable(),t.searchStatus.state<2&&a.phash!==t.cwd().hash&&(r=t.exec("open",[a.phash],{thash:a.phash})),e.when([r]).done(function(){r?t.one("cwdrender",o):o()}).fail(i))},Ze={},et="elfinder-resize-handle-hline",tt="elfinder-resize-handle-vline",nt="elfinder-resize-handle-point",it=r,at=ee?e("<img>").attr("crossorigin",t.isCORS?"use-credentials":"").attr("src",it).on("load",function(){try{var e=document.createElement("canvas");at.data("canvas",e).data("ctx",e.getContext("2d")),ot()}catch(t){at.removeData("canvas").removeData("ctx")}}):null,ot=function(){D.find("input.elfinder-resize-quality:visible").trigger("change")},rt=function(n){if(!z.hasClass("elfinder-dialog-minimized")&&!z.is(":hidden")){st.hide(),lt.hide();var i,a,o,r=t.options.dialogContained?m:e(window),s=r.height(),l=r.width(),c="auto",d=!0;z.width(Math.min(f,l-30)),U.attr("style",""),fe&&me&&(be=U.width()-(q.outerWidth()-q.width()),ye=U.height()-(q.outerHeight()-q.height()),Be.updateView(fe,me)),a=A.find("div.elfinder-resize-control").width(),o=U.width(),i=A.width()-20,o>i?(U.width(i),d=!1):i-o<a&&(l>s?U.width(i-a-20):(U.css({"float":"none",marginLeft:"auto",marginRight:"auto"}),d=!1)),d&&(c=a),be=U.width()-(q.outerWidth()-q.width()),m.hasClass("elfinder-fullscreen")?z.height()>s&&(s-=2,U.height(s-z.height()+U.height()),z.css("top",0-m.offset().top)):(s-=30,U.height()>s&&U.height(s)),ye=U.height()-(q.outerHeight()-q.height()),fe&&me&&Se(),qe.height()&&U.height()>qe.height()+20&&(U.height(qe.height()+20),ye=U.height()-(q.outerHeight()-q.height()),Oe()),st.css("width",c).show(),lt.css("width",c).show(),lt.children("span.elfinder-resize-preset:visible").length||lt.hide(),A.elfinderdialog("posInit")}},st=function(){var n,i=e('<fieldset class="elfinder-resize-preset-container">').append(e("<legend>").html(t.i18n("presets"))).css("box-sizing","border-box").hide();return e.each(b,function(t,a){2===a.length&&(n=!0,i.append(e('<span class="elfinder-resize-preset"></span>').data("s",a).text(a[0]+"x"+a[1]).button()))}),n?i:e()}(),lt=st.clone(!0),ct=t.uploadMimeCheck(a.mime,a.phash);s=l=a.size,H.append(e(O).append(e(S).text(t.i18n("width")),X),e(O).append(e(S).text(t.i18n("height")),J,e('<div class="elfinder-resize-whctrls">').append(ze,$)),ee?e(O).append(e(S).text(t.i18n("quality")),ee,e("<span></span>")):e(),T?e(O).append(e(S).text(t.i18n("8pxgrid")).addClass("elfinder-resize-grid8"),Ae):e(),e(O).append(e(S).text(t.i18n("scale")),B),e(O).append(st)),u&&(_.append(e(O).append(e(S).text("X"),G),e(O).append(e(S).text("Y")).append(Y),e(O).append(e(S).text(t.i18n("width")),Q),e(O).append(e(S).text(t.i18n("height")),Z,e('<div class="elfinder-resize-whctrls">').append(Te,$.clone(!0))),ee?e(O).append(e(S).text(t.i18n("quality")),ee.clone(!0),e("<span></span>")):e(),T?e(O).append(e(S).text(t.i18n("8pxgrid")).addClass("elfinder-resize-grid8")):e(),e(O).append(lt)),N.append(e(O).addClass("elfinder-resize-degree").append(e(S).text(t.i18n("rotate")),te,e("<span></span>").text(t.i18n("degree")),e("<div></div>").append(L,W)[g]()),e(O).css("height","20px").append(ne),ee?e(O)[n<1?"show":"hide"]().addClass("elfinder-resize-quality").append(e(S).text(t.i18n("quality")),ee.clone(!0),e("<span></span>")):e(),e(O).append(e(S).text(t.i18n("bgcolor")),de,le,ce),e(O).css("height","20px").append(pe)),L.on("click",function(){ke-=90,Ve.update(ke)}),W.on("click",function(){ke+=90,Ve.update(ke)})),A.append(V).on("resize",function(e){e.stopPropagation()}),u?D.append(H,_.hide(),N.hide()):D.append(H),q.append('<div class="'+et+" "+et+'-top"></div>','<div class="'+et+" "+et+'-bottom"></div>','<div class="'+tt+" "+tt+'-left"></div>','<div class="'+tt+" "+tt+'-right"></div>','<div class="'+nt+" "+nt+'-e"></div>','<div class="'+nt+" "+nt+'-se"></div>','<div class="'+nt+" "+nt+'-s"></div>'),U.append(P).append(q.hide()).append(qe.hide()),u&&(R.css("position","absolute").append('<div class="'+et+" "+et+'-top"></div>','<div class="'+et+" "+et+'-bottom"></div>','<div class="'+tt+" "+tt+'-left"></div>','<div class="'+tt+" "+tt+'-right"></div>','<div class="'+nt+" "+nt+'-n"></div>','<div class="'+nt+" "+nt+'-e"></div>','<div class="'+nt+" "+nt+'-s"></div>','<div class="'+nt+" "+nt+'-w"></div>','<div class="'+nt+" "+nt+'-ne"></div>','<div class="'+nt+" "+nt+'-se"></div>','<div class="'+nt+" "+nt+'-sw"></div>','<div class="'+nt+" "+nt+'-nw"></div>'),U.append(Re.css("position","absolute").hide().append(He,R.append(_e))),U.append(Ne.hide())),U.css("overflow","hidden"),A.append(U,D),Ze[t.i18n("btnApply")]=Ye,ct&&(Ze[t.i18n("btnSaveAs")]=function(){requestAnimationFrame(Qe)}),Ze[t.i18n("btnCancel")]=function(){A.elfinderdialog("close")},A.find("input,button").addClass("elfinder-tabstop"),z=c.fmDialog(A,{title:t.escape(a.name),width:f,resizable:!1,buttons:Ze,open:function(){var e=function(e){Fe=t.request({data:{cmd:"dim",target:a.hash,substitute:i?400:""},preventDefault:!0}).done(function(e){if(!e.url&&n)A.elfinderdialog("close"),t.error(["errOpen",a.name]);else if(e.dim){var i=e.dim.split("x");return a.width=i[0],a.height=i[1],Ue(i),e.url&&(qe.attr("src",e.url),He.attr("src",e.url),Ne.attr("src",e.url)),Pe()}})},n=!{"image/jpeg":!0,"image/png":!0,"image/gif":!0}[a.mime],i=!(!t.option("substituteImg",a.hash)||!(n||a.size>h.dimSubImgSize)),o=!(!a.width||!a.height);if(C=z.find(".ui-dialog-titlebar .elfinder-titlebar-minimize").hide(),t.bind("resize",rt),qe.attr("src",r).one("error.dimreq",function(){e(!0)}),He.attr("src",r),Ne.attr("src",r),u&&(Ne.on("mousedown touchstart",Ve.start).on("touchend",Ve.stop),z.on("mouseup",Ve.stop)),o&&!i)return Pe();if(a.size>(h.getDimThreshold||0))qe.off("error.dimreq"),e();else if(o)return Pe()},close:function(){u&&(Ne.off("mousedown touchstart",Ve.start).off("touchend",Ve.stop),e(document).off("mouseup",Ve.stop)),t.unbind("resize",rt),e(this).elfinderdialog("destroy")},resize:function(e,t){t&&"off"===t.minimize&&rt()}}).attr("id",o).closest(".ui-dialog").addClass(w),t.UA.ltIE8&&e(".elfinder-dialog").css("filter",""),_e.css({opacity:.2,"background-color":"#fff",position:"absolute"}),R.css("cursor","move"),R.find(".elfinder-resize-handle-point").css({"background-color":"#fff",opacity:.5,"border-color":"#000"}),u||V.find(".api2").remove(),D.find("input,select").prop("disabled",!0),D.find("input.elfinder-resize-quality").next("span").addClass("elfinder-resize-jpgsize").attr("title",t.i18n("roughFileSize"))};return d.length&&d[0].mime.indexOf("image/")!==-1?(o="resize-"+t.namespace+"-"+d[0].hash,r=m.find("#"+o),r.length?(r.elfinderdialog("toTop"),p.resolve()):(t.openUrl(d[0].hash,"sameorigin",function(e){x(d[0],o,e)}),p)):p.reject()}},function(e){
var t=function(e,t){var n=0;for(n in t)if("undefined"!=typeof e[t[n]])return t[n];return e[t[n]]="",t[n]};if(e.cssHooks.rotate={get:function(t,n,i){return e(t).rotate()},set:function(t,n){return e(t).rotate(n),n}},e.cssHooks.transform={get:function(e,n,i){var a=t(e.style,["WebkitTransform","MozTransform","OTransform","msTransform","transform"]);return e.style[a]},set:function(e,n){var i=t(e.style,["WebkitTransform","MozTransform","OTransform","msTransform","transform"]);return e.style[i]=n,n}},e.fn.rotate=function(e){var t;return"undefined"==typeof e?window.opera?(t=this.css("transform").match(/rotate\((.*?)\)/),t&&t[1]?Math.round(180*parseFloat(t[1])/Math.PI):0):(t=this.css("transform").match(/rotate\((.*?)\)/),t&&t[1]?parseInt(t[1]):0):(this.css("transform",this.css("transform").replace(/none|rotate\(.*?\)/,"")+"rotate("+parseInt(e)+"deg)"),this)},e.fx.step.rotate=function(t){0==t.state&&(t.start=e(t.elem).rotate(),t.now=t.start),e(t.elem).rotate(t.now)},"undefined"==typeof window.addEventListener&&"undefined"==typeof document.getElementsByClassName){var n=function(e){for(var t=e,n=t.offsetLeft,i=t.offsetTop;t.offsetParent&&(t=t.offsetParent,t==document.body||"static"==t.currentStyle.position);)t!=document.body&&t!=document.documentElement&&(n-=t.scrollLeft,i-=t.scrollTop),n+=t.offsetLeft,i+=t.offsetTop;return{x:n,y:i}},i=function(e){if("static"==e.currentStyle.position){var t=n(e);e.style.position="absolute",e.style.left=t.x+"px",e.style.top=t.y+"px"}},a=function(e,t){var n,a=1,o=1,r=1,s=1;if("undefined"!=typeof e.style.msTransform)return!0;i(e),n=t.match(/rotate\((.*?)\)/);var l=n&&n[1]?parseInt(n[1]):0;l%=360,l<0&&(l=360+l);var c=l*Math.PI/180,d=Math.cos(c),p=Math.sin(c);a*=d,o*=-p,r*=p,s*=d,e.style.filter=(e.style.filter||"").replace(/progid:DXImageTransform\.Microsoft\.Matrix\([^)]*\)/,"")+("progid:DXImageTransform.Microsoft.Matrix(M11="+a+",M12="+o+",M21="+r+",M22="+s+",FilterType='bilinear',sizingMethod='auto expand')");var u=parseInt(e.style.width||e.width||0),h=parseInt(e.style.height||e.height||0);c=l*Math.PI/180;var f=Math.abs(Math.cos(c)),m=Math.abs(Math.sin(c)),g=(u-(u*f+h*m))/2,v=(h-(u*m+h*f))/2;return e.style.marginLeft=Math.floor(g)+"px",e.style.marginTop=Math.floor(v)+"px",!0},o=e.cssHooks.transform.set;e.cssHooks.transform.set=function(e,t){return o.apply(this,[e,t]),a(e,t),t}}}(jQuery),(i.prototype.commands.restore=function(){"use strict";var t=this,n=this.fm,i=0,a=function(t){var o,r=e.Deferred(),s=[],l=[],c=[],d=[];return r._xhrReject=function(){e.each(c,function(){this&&this.reject&&this.reject()}),o&&o._xhrReject()},e.each(t,function(e,t){"directory"===t.mime?s.push(t):l.push(t)}),s.length?(e.each(s,function(e,t){c.push(n.request({data:{cmd:"open",target:t.hash},preventDefault:!0,asNotOpen:!0})),d[e]=t.hash}),e.when.apply(e,c).fail(function(){r.reject()}).done(function(){var t=[];e.each(arguments,function(e,n){n.files&&(n.files.length?t=t.concat(n.files):t.push({hash:"fakefile_"+i++,phash:d[e],mime:"fakefile",name:"fakefile",ts:0}))}),n.cache(t),o=a(t).done(function(e){l=l.concat(e),r.resolve(l)})})):r.resolve(l),r},o=function(t,o,r,s){var l,c,d={},p=[],u=!1,h=[],f=s||{},m=+new Date;n.lockfiles({files:r}),h=e.map(o,function(e){return"directory"===e.mime?e.hash:null}),t.done(function(){h&&n.exec("rm",h,{forceRm:!0,quiet:!0})}).always(function(){n.unlockfiles({files:r})}),l=setTimeout(function(){n.notify({type:"search",id:m,cnt:1,hideCnt:!0,cancel:function(){c&&c._xhrReject(),t.reject()}})},n.notifyDelay),i=0,c=a(o).always(function(){l&&clearTimeout(l),n.notify({type:"search",id:m,cnt:-1,hideCnt:!0})}).fail(function(){t.reject("errRestore","errFileNotFound")}).done(function(i){var a=["errRestore","errFolderNotFound"],o="";i.length?(e.each(i,function(t,i){for(var a,r,s,l=i.phash;l;){if(r=n.trashes[l]){if(!d[r]){if(u)return p.push(i.hash),null;d[r]={},u=!0}s=n.path(i.hash).substr(n.path(l).length).replace(/\\/g,"/"),s=s.replace(/\/[^\/]+?$/,""),""===s&&(s="/"),d[r][s]||(d[r][s]=[]),"fakefile"===i.mime?n.updateCache({removed:[i.hash]}):d[r][s].push(i.hash),(!o||o.length>s.length)&&(o=s);break}a=n.file(l),a?l=a.phash:(l=!1,e.each(n.trashes,function(e){var t=n.file(e),a=n.path(e);if((!t.volumeid||0===i.hash.indexOf(t.volumeid))&&0===n.path(i.hash).indexOf(a))return l=e,!1}))}}),u?e.each(d,function(i,s){var l=Object.keys(s),c=l.length;n.request({data:{cmd:"mkdir",target:i,dirs:l},notify:{type:"chkdir",cnt:c},preventFail:!0}).fail(function(e){t.reject(e),n.unlockfiles({files:r})}).done(function(i){var r,l;(l=i.hashes)?(r=n.getCommand("paste"),r?n.one("mkdirdone",function(){var i=!1;e.each(s,function(e,r){l[e]&&(r.length?n.file(l[e])?(n.clipboard(r,!0),n.exec("paste",[l[e]],{_cmd:"restore",noToast:f.noToast||e!==o}).done(function(e){e&&(e.error||e.warning)&&(i=!0)}).fail(function(){i=!0}).always(function(){--c<1&&(t[i?"reject":"resolve"](),p.length&&n.exec("restore",p))})):t.reject(a):--c<1&&(t.resolve(),p.length&&n.exec("restore",p)))})}):t.reject(["errRestore","errCmdNoSupport","(paste)"])):t.reject(a)})}):t.reject(a)):(t.reject("errFileNotFound"),h&&n.exec("rm",h,{forceRm:!0,quiet:!0}))})};this.restore=o,this.linkedCmds=["copy","paste","mkdir","rm"],this.updateOnSelect=!1,this.init=function(){t=this,n=this.fm},this.getstate=function(t,i){return t=t||n.selected(),t.length&&e.grep(t,function(e){var t=n.file(e);return!(!t||t.locked||n.isRoot(t))}).length==t.length?0:-1},this.exec=function(i,a){var o=e.Deferred().fail(function(e){e&&n.error(e)}),r=t.files(i);return r.length?(e.each(r,function(e,t){return n.isRoot(t)?!o.reject(["errRestore",t.name]):t.locked?!o.reject(["errLocked",t.name]):void 0}),"pending"===o.state()&&this.restore(o,r,i,a),o):o.reject()}}).prototype={forceLoad:!0},i.prototype.commands.rm=function(){"use strict";var t=this,n=this.fm,i='<div class="ui-helper-clearfix elfinder-rm-title"><span class="elfinder-cwd-icon {class} ui-corner-all"></span>{title}<div class="elfinder-rm-desc">{desc}</div></div>',a=function(a,o,s,c,d){var p,u,h,f,m,g,v=o.length,b=n.cwd().hash,y=[],w=n.i18n("calc")+'<span class="elfinder-spinner"></span>';v>1?(f=0,e.each(s,function(e,t){if(!t.size||"unknown"==t.size||"directory"===t.mime)return f="unknown",!1;var n=parseInt(t.size);n>=0&&f>=0&&(f+=n)}),l="unknown"===f,y.push(n.i18n("size")+": "+(l?w:n.formatSize(f))),u=[e(i.replace("{class}","elfinder-cwd-icon-group").replace("{title}","<strong>"+n.i18n("items")+": "+v+"</strong>").replace("{desc}",y.join("<br>")))]):(m=s[0],h=n.tmb(m),l="directory"===m.mime,y.push(n.i18n("size")+": "+(l?w:n.formatSize(m.size))),y.push(n.i18n("modify")+": "+n.formatDate(m)),g=n.escape(m.i18||m.name).replace(/([_.])/g,"&#8203;$1"),u=[e(i.replace("{class}",n.mime2class(m.mime)).replace("{title}","<strong>"+g+"</strong>").replace("{desc}",y.join("<br>")))]),d&&(u=u.concat(d)),u.push(c?"confirmTrash":"confirmRm"),p=n.confirm({title:t.title,text:u,accept:{label:"btnRm",callback:function(){c?t.toTrash(a,o,c):r(a,o)}},cancel:{label:"btnCancel",callback:function(){n.unlockfiles({files:o}),1===o.length&&n.file(o[0]).phash!==b?n.select({selected:o}):n.selectfiles({files:o}),a.reject()}}}),h&&e("<img/>").on("load",function(){p.find(".elfinder-cwd-icon").addClass(h.className).css("background-image","url('"+h.url+"')")}).attr("src",h.url),l&&(l=n.getSize(e.map(s,function(e){return"directory"===e.mime?e.hash:null})).done(function(e){p.find("span.elfinder-spinner").parent().html(n.i18n("size")+": "+e.formated)}).fail(function(){p.find("span.elfinder-spinner").parent().html(n.i18n("size")+": "+n.i18n("unknown"))}).always(function(){l=!1}))},o=function(i,a,o){var r,s,l,c={},d=a.length,p=t.options.toTrashMaxItems,u=[],h=e.Deferred();return d>p?void t.confirm(i,a,t.files(a),null,[n.i18n("tooManyToTrash")]):(e.each(a,function(e,t){var i=n.file(t),a=n.path(t).replace(/\\/g,"/"),o=a.match(/^[^\/]+?(\/(?:[^\/]+?\/)*)[^\/]+?$/);i&&(o&&(o[1]=o[1].replace(/(^\/.*?)\/?$/,"$1"),c[o[1]]||(c[o[1]]=[]),c[o[1]].push(t)),"directory"===i.mime&&u.push(t))}),u.length?(r=n.request({data:{cmd:"size",targets:u},notify:{type:"readdir",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(e){var t=0;e.fileCnt&&(t+=parseInt(e.fileCnt)),e.dirCnt&&(t+=parseInt(e.dirCnt)),h[t>p?"reject":"resolve"]()}).fail(function(){h.reject()}),setTimeout(function(){var e=r&&r.xhr?r.xhr:null;e&&"pending"==e.state()&&(r.syncOnFail(!1),r.reject(),h.reject())},1e3*t.options.infoCheckWait)):h.resolve(),void h.done(function(){s=Object.keys(c),l=s.length,l?n.request({data:{cmd:"mkdir",target:o,dirs:s},notify:{type:"chkdir",cnt:l},preventFail:!0}).fail(function(e){i.reject(e),n.unlockfiles({files:a})}).done(function(t){var o,r,s,d,p=function(t,i,o){var r,s,l,c;e.each(t,function(e,t){Array.isArray(t)&&(h[e]?h[e]=h[e].concat(t):h[e]=t)}),t.sync&&(h.sync=1),t.added&&t.added.length&&(r=function(){var i=[],a=e.map(t.added,function(e){return"directory"===e.mime?e.hash:null});return e.each(t.added,function(t,n){e.inArray(n.phash,a)===-1&&i.push(n.hash)}),n.exec("restore",i,{noToast:!0})},l=function(){return n.request({data:o,notify:{type:"redo",cnt:a.length}})},h.undo?(s=h.undo,h.undo=function(){r(),s()}):h.undo=r,h.redo?(c=h.redo,h.redo=function(){l(),c()}):h.redo=l)},u=["errTrash"],h={},f=function(){return n.ui.notify.children(".elfinder-notify-trash").length};(o=t.hashes)?(s=1/l*100,d=1===l?100:5,r=setTimeout(function(){n.notify({type:"trash",cnt:1,hideCnt:!0,progress:d})},n.notifyDelay),e.each(c,function(t,c){var m,g=n.file(c[0]).phash;o[t]&&(m={cmd:"paste",dst:o[t],targets:c,cut:1},n.request({data:m,preventDefault:!0}).fail(function(e){e&&(u=u.concat(e))}).done(function(e){e=n.normalize(e),n.updateCache(e),p(e,g,m),e.warning&&(u=u.concat(e.warning),delete e.warning),e.removed&&e.removed.length&&n.remove(e),e.added&&e.added.length&&n.add(e),e.changed&&e.changed.length&&n.change(e),n.trigger("paste",e),n.trigger("pastedone"),e.sync&&n.sync()}).always(function(){var t=[],o=2;f()?n.notify({type:"trash",cnt:0,hideCnt:!0,progress:s}):d+=s,--l<1&&(r&&clearTimeout(r),f()&&n.notify({type:"trash",cnt:-1}),n.unlockfiles({files:a}),Object.keys(h).length?(u.length>1&&((h.removed||h.removed.length)&&(t=e.grep(a,function(t){return e.inArray(t,h.removed)===-1})),t.length?(u.length>o&&(o=(n.messages[u[o-1]]||"").indexOf("$")===-1?o:o+1),i.reject(),n.exec("rm",t,{addTexts:u.slice(0,o),forceRm:!0})):n.error(u)),h._noSound=!0,h.undo&&h.redo&&(h.undo={cmd:"trash",callback:h.undo},h.redo={cmd:"trash",callback:h.redo}),i.resolve(h)):i.reject(u))}))})):(i.reject("errFolderNotFound"),n.unlockfiles({files:a}))}):(i.reject(["error","The folder hierarchy to be deleting can not be determined."]),n.unlockfiles({files:a}))}).fail(function(){t.confirm(i,a,t.files(a),null,[n.i18n("tooManyToTrash")])}))},r=function(e,t,i){var a=i?{}:{type:"rm",cnt:t.length};n.request({data:{cmd:"rm",targets:t},notify:a,preventFail:!0}).fail(function(t){e.reject(t)}).done(function(t){(t.error||t.warning)&&(t.sync=!0),e.resolve(t)}).always(function(){n.unlockfiles({files:t})})},s=function(t){var i,a=null;return t&&t.length&&(t.length>1&&2===n.searchStatus.state?(i=n.file(n.root(t[0])).volumeid,e.grep(t,function(e){return 0!==e.indexOf(i)}).length||(a=n.option("trashHash",t[0]))):a=n.option("trashHash",t[0])),a},l=!1;this.confirm=a,this.toTrash=o,this.remove=r,this.syncTitleOnChange=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"delete ctrl+backspace shift+delete"}],this.value="rm",this.init=function(){t=this,n=this.fm,t.change(function(){var i;delete t.extra,t.title=n.i18n("cmd"+t.value),t.className=t.value,t.button&&t.button.children("span.elfinder-button-icon")["trash"===t.value?"addClass":"removeClass"]("elfinder-button-icon-trash"),"trash"===t.value&&(t.extra={icon:"rm",node:e("<span></span>").attr({title:n.i18n("cmdrm")}).on("ready",function(e,t){i=t.targets}).on("click touchstart",function(e){"touchstart"===e.type&&e.originalEvent.touches.length>1||(e.stopPropagation(),e.preventDefault(),n.getUI().trigger("click"),n.exec("rm",i,{_userAction:!0,forceRm:!0}))})})})},this.getstate=function(t){var i=this.hashes(t);return i.length&&e.grep(i,function(e){var t=n.file(e);return!(!t||t.locked||n.isRoot(t))}).length==i.length?0:-1},this.exec=function(i,a){var o,c=a||{},d=e.Deferred().always(function(){l&&l.state&&"pending"===l.state()&&l.reject()}).fail(function(e){e&&n.error(e)}).done(function(e){!c.quiet&&!e._noSound&&e.removed&&e.removed.length&&n.trigger("playsound",{soundFile:"rm.wav"})}),p=t.files(i),u=p.length,h=null,f=c.addTexts?c.addTexts:null,m=c.forceRm,g=c.quiet;return u?(e.each(p,function(e,t){return n.isRoot(t)?!d.reject(["errRm",t.name,"errPerm"]):t.locked?!d.reject(["errLocked",t.name]):void 0}),"pending"===d.state()&&(o=t.hashes(i),u=p.length,(m||t.event&&t.event.originalEvent&&t.event.originalEvent.shiftKey)&&(h="",t.title=n.i18n("cmdrm")),null===h&&(h=s(o)),n.lockfiles({files:o}),h&&t.options.quickTrash?t.toTrash(d,o,h):g?r(d,o,g):t.confirm(d,o,p,h,f)),d):d.reject()},n.bind("select contextmenucreate closecontextmenu",function(e){var i=(e.data?e.data.selected||e.data.targets:null)||n.selected();i&&i.length&&t.update(void 0,(i?s(i):n.option("trashHash"))?"trash":"rm")})},i.prototype.commands.search=function(){"use strict";this.title="Find files",this.options={ui:"searchbutton"},this.alwaysEnabled=!0,this.updateOnSelect=!1,this.getstate=function(){return 0},this.exec=function(t,n,i,a){var o,r,s=this.fm,l=[],c=a||"",d=s.options.onlyMimes,p=[],u=function(e){return c&&"SearchName"!==c&&"SearchMime"!==c&&(e.type=c),e};return"string"==typeof t&&t?("object"==typeof n&&(i=n.mime||"",n=n.target||""),n=n?n:"",i?(i=e.trim(i).replace(","," ").split(" "),d.length&&(i=e.map(i,function(t){return t=e.trim(t),t&&(e.inArray(t,d)!==-1||e.grep(d,function(e){return 0===t.indexOf(e)}).length)?t:null}))):i=[].concat(d),s.trigger("searchstart",u({query:t,target:n,mimes:i})),!d.length||i.length?""===n&&s.api>=2.1?(r=Object.keys(s.roots).length,e.each(s.roots,function(e,n){l.push(s.request({data:u({cmd:"search",q:t,target:n,mimes:i}),notify:{type:"search",cnt:1,hideCnt:!(r>1)},cancel:!0,preventDone:!0}))})):(l.push(s.request({data:u({cmd:"search",q:t,target:n,mimes:i}),notify:{type:"search",cnt:1,hideCnt:!0},cancel:!0,preventDone:!0})),""!==n&&s.api>=2.1&&Object.keys(s.leafRoots).length&&e.each(s.leafRoots,function(a,r){for(o=a;o;)n===o&&e.each(r,function(){var e=s.file(this);e&&e.volumeid&&p.push(e.volumeid),l.push(s.request({data:u({cmd:"search",q:t,target:this,mimes:i}),notify:{type:"search",cnt:1,hideCnt:!1},cancel:!0,preventDone:!0}))}),o=(s.file(o)||{}).phash})):l=[e.Deferred().resolve({files:[]})],s.searchStatus.mixed=l.length>1&&p,e.when.apply(e,l).done(function(e){var t,n=arguments.length;if(e.warning&&s.error(e.warning),n>1)for(e.files=e.files||[],t=1;t<n;t++)arguments[t].warning&&s.error(arguments[t].warning),arguments[t].files&&e.files.push.apply(e.files,arguments[t].files);e.files&&e.files.length&&s.cache(e.files),s.lazy(function(){s.trigger("search",e)}).then(function(){return s.lazy(function(){s.trigger("searchdone")})}).then(function(){e.sync&&s.sync()})})):(s.getUI("toolbar").find("."+s.res("class","searchbtn")+" :text").trigger("focus"),e.Deferred().reject())}},i.prototype.commands.selectall=function(){"use strict";var t=0;this.fm.bind("select",function(e){t=e.data&&e.data.selectall?-1:0}),this.state=0,this.updateOnSelect=!1,this.getstate=function(){return t},this.exec=function(){return e(document).trigger(e.Event("keydown",{keyCode:65,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1})),e.Deferred().resolve()}},i.prototype.commands.selectinvert=function(){"use strict";this.updateOnSelect=!1,this.getstate=function(){return 0},this.exec=function(){return e(document).trigger(e.Event("keydown",{keyCode:73,ctrlKey:!0,shiftKey:!0,altKey:!1,metaKey:!1})),e.Deferred().resolve()}},i.prototype.commands.selectnone=function(){"use strict";var t=this.fm,n=-1;t.bind("select",function(e){n=e.data&&e.data.unselectall?-1:0}),this.state=-1,this.updateOnSelect=!1,this.getstate=function(){return n},this.exec=function(){return t.getUI("cwd").trigger("unselectall"),e.Deferred().resolve()}},i.prototype.commands.sort=function(){"use strict";var t=this,n=t.fm,i=function(){t.variants=[],e.each(n.sortRules,function(e,i){if(n.sorters[e]){var a=e===n.sortType?"asc"===n.sortOrder?"n":"s":"";t.variants.push([e,(a?'<span class="ui-icon ui-icon-arrowthick-1-'+a+'"></span>':"")+"&nbsp;"+n.i18n("sort"+e)])}}),t.variants.push("|"),t.variants.push(["stick",(n.sortStickFolders?'<span class="ui-icon ui-icon-check"></span>':"")+"&nbsp;"+n.i18n("sortFoldersFirst")]),n.ui.tree&&null!==n.options.sortAlsoTreeview&&(t.variants.push("|"),t.variants.push(["tree",(n.sortAlsoTreeview?'<span class="ui-icon ui-icon-check"></span>':"")+"&nbsp;"+n.i18n("sortAlsoTreeview")])),a()},a=function(){var t,i,a=n.getUI("contextmenu");a.is(":visible")&&(t=a.find("span.elfinder-button-icon-sort"),i=t.siblings("div.elfinder-contextmenu-sub"),i.find("span.ui-icon").remove(),i.children("div.elfinder-contextsubmenu-item").each(function(){var t,i=e(this).children("span"),a=i.text().trim();a===(o.stick||(o.stick=n.i18n("sortFoldersFirst")))?n.sortStickFolders&&i.prepend('<span class="ui-icon ui-icon-check"></span>'):a===(o.tree||(o.tree=n.i18n("sortAlsoTreeview")))?n.sortAlsoTreeview&&i.prepend('<span class="ui-icon ui-icon-check"></span>'):a===(o[n.sortType]||(o[n.sortType]=n.i18n("sort"+n.sortType)))&&(t="asc"===n.sortOrder?"n":"s",i.prepend('<span class="ui-icon ui-icon-arrowthick-1-'+t+'"></span>'))}))},o={};this.options={ui:"sortbutton"},this.keepContextmenu=!0,n.bind("sortchange",i).bind("sorterupdate",function(){i(),n.getUI().children(".elfinder-button-sort-menu").children(".elfinder-button-menu-item").each(function(){var t=e(this),i=t.attr("rel");t.toggle(!(i&&!n.sorters[i]))})}).bind("cwdrender",function(){var t=e(n.cwd).find("div.elfinder-cwd-wrapper-list table");t.length&&e.each(n.sortRules,function(i,a){var o=t.find("thead tr td.elfinder-cwd-view-th-"+i);if(o.length){var r,s=i==n.sortType,l={type:i,order:s?"asc"==n.sortOrder?"desc":"asc":n.sortOrder};s&&(o.addClass("ui-state-active"),r="asc"==n.sortOrder?"n":"s",e('<span class="ui-icon ui-icon-triangle-1-'+r+'"></span>').appendTo(o)),e(o).on("click",function(t){e(this).data("dragging")||(t.stopPropagation(),n.getUI("cwd").data("longtap")||n.exec("sort",[],l))}).on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"===t.type)})}})}),this.getstate=function(){return 0},this.exec=function(t,n){var i=this.fm,a=e.isPlainObject(n)?n:function(){n+="";var e={};return"stick"===n?e.stick=!i.sortStickFolders:"tree"===n?e.tree=!i.sortAlsoTreeview:i.sorters[n]&&(i.sortType===n?e.order="asc"===i.sortOrder?"desc":"asc":e.type=n),e}(),o=Object.assign({type:i.sortType,order:i.sortOrder,stick:i.sortStickFolders,tree:i.sortAlsoTreeview},a);return i.lazy(function(){i.setSort(o.type,o.order,o.stick,o.tree),this.resolve()})}},i.prototype.commands.undo=function(){"use strict";var t=this,n=this.fm,i=function(e){e?(t.title=n.i18n("cmdundo")+" "+n.i18n("cmd"+e.cmd),t.state=0):(t.title=n.i18n("cmdundo"),t.state=-1),t.change()},a=[];this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+z"}],this.syncTitleOnChange=!0,this.getstate=function(){return a.length?0:-1},this.setUndo=function(t,o){var r={};t&&e.isPlainObject(t)&&t.cmd&&t.callback&&(Object.assign(r,t),o?(delete o.undo,r.redo=o):n.getCommand("redo").setRedo(null),a.push(r),i(r))},this.exec=function(){var t,o,r=n.getCommand("redo"),s=e.Deferred(),l={};return a.length?(t=a.pop(),t.redo?(Object.assign(l,t.redo),delete t.redo):l=null,s.done(function(){l&&r.setRedo(l,t)}),i(a.length?a[a.length-1]:void 0),o=t.callback(),o&&o.done?o.done(function(){s.resolve()}).fail(function(){s.reject()}):s.resolve(),a.length?this.update(0,a[a.length-1].name):this.update(-1,"")):s.reject(),s},n.bind("exec",function(e){var n=e.data||{};n.opts&&n.opts._userAction&&n.dfrd&&n.dfrd.done&&n.dfrd.done(function(e){e&&e.undo&&e.redo&&(e.undo.redo=e.redo,t.setUndo(e.undo))})})},i.prototype.commands.redo=function(){"use strict";var t=this,n=this.fm,i=function(e){e&&e.callback?(t.title=n.i18n("cmdredo")+" "+n.i18n("cmd"+e.cmd),t.state=0):(t.title=n.i18n("cmdredo"),t.state=-1),t.change()},a=[];this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"shift+ctrl+z ctrl+y"}],this.syncTitleOnChange=!0,this.getstate=function(){return a.length?0:-1},this.setRedo=function(e,t){null===e?(a=[],i()):e&&e.cmd&&e.callback&&(t&&(e.undo=t),a.push(e),i(e))},this.exec=function(){var t,o,r=n.getCommand("undo"),s=e.Deferred(),l={},c={};return a.length?(t=a.pop(),t.undo&&(Object.assign(l,t.undo),Object.assign(c,t),delete c.undo,s.done(function(){r.setUndo(l,c)})),i(a.length?a[a.length-1]:void 0),o=t.callback(),o&&o.done?o.done(function(){s.resolve()}).fail(function(){s.reject()}):s.resolve(),s):s.reject()}},(i.prototype.commands.up=function(){"use strict";this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+up"}],this.getstate=function(){return this.fm.cwd().phash?0:-1},this.exec=function(){var t=this.fm,n=t.cwd().hash;return this.fm.cwd().phash?this.fm.exec("open",this.fm.cwd().phash).done(function(){t.one("opendone",function(){t.selectfiles({files:[n]})})}):e.Deferred().reject()}}).prototype={forceLoad:!0},i.prototype.commands.upload=function(){"use strict";var t=this.fm.res("class","hover");this.disableOnSearch=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+u"}],this.getstate=function(e){var t,n=this.fm,i=e||[n.cwd().hash];return this._disabled||1!=i.length||(t=n.file(i[0])),t&&"directory"==t.mime&&t.write?0:-1},this.exec=function(n){var i,a,o,r,s,l,c,d=this.fm,p=d.cwd().hash,u=function(){var e,t=n&&n instanceof Array?n:null;return(!n||n instanceof Array)&&(t||1!==(e=d.selected()).length||"directory"!==d.file(e[0]).mime?t&&1===t.length&&"directory"===d.file(t[0]).mime||(t=[p]):t=e),t},h=u(),f=h?h[0]:n&&n.target?n.target:null,m=f?d.file(f):d.cwd(),g=function(t){d.upload(t).fail(function(e){w.reject(e)}).done(function(t){var n;d.getUI("cwd");if(w.resolve(t),t&&t.added&&t.added[0]&&!d.ui.notify.children(".elfinder-notify-upload").length){var i=d.findCwdNodes(t.added);i.length?i.trigger("scrolltoview"):(m.hash!==p?n=e("<div></div>").append(e('<button type="button" class="ui-button ui-widget ui-state-default ui-corner-all elfinder-tabstop"><span class="ui-button-text">'+d.i18n("cmdopendir")+"</span></button>").on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"==t.type)}).on("click",function(){d.exec("open",f).done(function(){d.one("opendone",function(){d.trigger("selectfiles",{files:e.map(t.added,function(e){return e.hash})})})})})):d.trigger("selectfiles",{files:e.map(t.added,function(e){return e.hash})}),d.toast({msg:d.i18n(["complete",d.i18n("cmdupload")]),extNode:n}))}}).progress(function(){w.notifyWith(this,Array.from(arguments))})},v=function(e){i.elfinderdialog("close"),h&&(e.target=h[0]),g(e)},b=function(){var t=m.hash,n=e.map(d.files(t),function(e){return"directory"===e.mime&&e.write?e:null});return n.length?e('<div class="elfinder-upload-dirselect elfinder-tabstop" title="'+d.i18n("folders")+'"></div>').on("click",function(t){t.stopPropagation(),t.preventDefault(),n=d.sortFiles(n);var a=e(this),o=(d.cwd(),i.closest("div.ui-dialog")),r=function(e,t){return{label:d.escape(e.i18||e.name),icon:t,remain:!1,callback:function(){var t=o.children(".ui-dialog-titlebar:first").find("span.elfinder-upload-target");h=[e.hash],t.html(" - "+d.escape(e.i18||e.name)),a.trigger("focus")},options:{className:h&&h.length&&e.hash===h[0]?"ui-state-active":"",iconClass:e.csscls||"",iconImg:e.icon||""}}},s=[r(m,"opendir"),"|"];e.each(n,function(e,t){s.push(r(t,"dir"))}),a.trigger("blur"),d.trigger("contextmenu",{raw:s,x:t.pageX||e(this).offset().left,y:t.pageY||e(this).offset().top,prevNode:o,fitHeight:!0})}).append('<span class="elfinder-button-icon elfinder-button-icon-dir" ></span>'):e()},y=function(n,i){var a=e('<input type="file" '+n+"/>").on("click",function(){d.UA.IE&&setTimeout(function(){o.css("display","none").css("position","relative"),requestAnimationFrame(function(){o.css("display","").css("position","")})},100)}).on("change",function(){v({input:a.get(0),type:"files"})}).on("dragover",function(e){e.originalEvent.dataTransfer.dropEffect="copy"}),o=e("<form></form>").append(a).on("click",function(e){e.stopPropagation()});return e('<div class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only elfinder-tabstop elfinder-focus"><span class="ui-button-text">'+d.i18n(i)+"</span></div>").append(o).on("click",function(e){e.stopPropagation(),e.preventDefault(),a.trigger("click")}).on("mouseenter mouseleave",function(n){e(this).toggleClass(t,"mouseenter"===n.type)})},w=e.Deferred();return r=function(t){t.stopPropagation(),t.preventDefault();var n,i=!1,a="",o=null,r="",s=null,l=t._target||null,c=t.dataTransfer||null,p=c.items&&c.items.length&&c.items[0].kind?c.items[0].kind:"";if(c){try{if(o=c.getData("elfinderfrom"),o&&(r=window.location.href+d.cwd().hash,!l&&o===r||l===r))return void w.reject()}catch(t){}if("file"===p&&(c.items[0].getAsEntry||c.items[0].webkitGetAsEntry))i=c,a="data";else if("string"!==p&&c.files&&c.files.length&&e.inArray("Text",c.types)===-1)i=c.files,a="files";else{try{(s=c.getData("text/html"))&&s.match(/<(?:img|a)/i)&&(i=[s],a="html")}catch(t){}i||((s=c.getData("text"))?(i=[s],a="text"):c&&c.files&&(p="file"))}}i?g({files:i,type:a,target:l,dropEvt:t}):(n=["errUploadNoFiles"],"file"===p&&n.push("errFolderUpload"),d.error(n),w.reject())},!h&&n?(n.input||n.files?(n.type="files",g(n)):n.dropEvt&&r(n.dropEvt),w):(s=function(t){var n,i=t.originalEvent||t,a=[],o=[];if(i.clipboardData){if(i.clipboardData.items&&i.clipboardData.items.length){o=i.clipboardData.items;for(var r=0;r<o.length;r++)"file"==i.clipboardData.items[r].kind&&(n=i.clipboardData.items[r].getAsFile(),a.push(n))}else i.clipboardData.files&&i.clipboardData.files.length&&(a=i.clipboardData.files);if(a.length)return void v({files:a,type:"files",clipdata:!0})}var s=i.target||i.srcElement;requestAnimationFrame(function(){var t,n="text";s.innerHTML&&(e(s).find("img").each(function(t,n){n.src.match(/^webkit-fake-url:\/\//)&&e(n).remove()}),e(s).find("a,img").length&&(n="html"),t=s.innerHTML,s.innerHTML="",v({files:[t],type:n}))})},i=e('<div class="elfinder-upload-dialog-wrapper"></div>').append(y("multiple","selectForUpload")),!d.UA.Mobile&&function(e){return"undefined"!=typeof e.webkitdirectory||"undefined"!=typeof e.directory}(document.createElement("input"))&&i.append(y("multiple webkitdirectory directory","selectFolder")),m.dirs&&(m.hash===p||d.navHash2Elm(m.hash).hasClass("elfinder-subtree-loaded")?b().appendTo(i):(l=e('<div class="elfinder-upload-dirselect" title="'+d.i18n("nowLoading")+'"></div>').append('<span class="elfinder-button-icon elfinder-button-icon-spinner" ></span>').appendTo(i),d.request({cmd:"tree",target:m.hash}).done(function(){d.one("treedone",function(){l.replaceWith(b()),c.elfinderdialog("tabstopsInit")})}).fail(function(){l.remove()}))),d.dragUpload?a=e('<div class="ui-corner-all elfinder-upload-dropbox elfinder-tabstop" contenteditable="true" data-ph="'+d.i18n("dropPasteFiles")+'"></div>').on("paste",function(e){s(e)}).on("mousedown click",function(){e(this).trigger("focus")}).on("focus",function(){this.innerHTML=""}).on("mouseover",function(){e(this).addClass(t)}).on("mouseout",function(){e(this).removeClass(t)}).on("dragenter",function(n){n.stopPropagation(),n.preventDefault(),e(this).addClass(t)}).on("dragleave",function(n){n.stopPropagation(),n.preventDefault(),e(this).removeClass(t)}).on("dragover",function(n){n.stopPropagation(),n.preventDefault(),n.originalEvent.dataTransfer.dropEffect="copy",e(this).addClass(t)}).on("drop",function(e){i.elfinderdialog("close"),h&&(e.originalEvent._target=h[0]),r(e.originalEvent)}).prependTo(i).after('<div class="elfinder-upload-dialog-or">'+d.i18n("or")+"</div>")[0]:o=e('<div class="ui-corner-all elfinder-upload-dropbox" contenteditable="true">'+d.i18n("dropFilesBrowser")+"</div>").on("paste drop",function(e){s(e)}).on("mousedown click",function(){e(this).trigger("focus")}).on("focus",function(){this.innerHTML=""}).on("dragenter mouseover",function(){e(this).addClass(t)}).on("dragleave mouseout",function(){e(this).removeClass(t)}).prependTo(i).after('<div class="elfinder-upload-dialog-or">'+d.i18n("or")+"</div>")[0],c=this.fmDialog(i,{title:this.title+'<span class="elfinder-upload-target">'+(m?" - "+d.escape(m.i18||m.name):"")+"</span>",modal:!0,resizable:!1,destroyOnClose:!0,propagationEvents:["mousemove","mouseup","click"],close:function(){var e=d.getUI("contextmenu");e.is(":visible")&&e.click()}}),w)}},i.prototype.commands.view=function(){"use strict";var t,n=this,i=this.fm;this.value=i.viewType,this.alwaysEnabled=!0,this.updateOnSelect=!1,this.options={ui:"viewbutton"},this.getstate=function(){return 0},this.extra={icon:"menu",node:e("<span></span>").attr({title:i.i18n("viewtype")}).on("click touchstart",function(t){if(!("touchstart"===t.type&&t.originalEvent.touches.length>1)){var n=e(this);t.stopPropagation(),t.preventDefault(),i.trigger("contextmenu",{raw:getSubMenuRaw(),x:n.offset().left,y:n.offset().top})}})},this.exec=function(){var e=this,t="list"==this.value?"icons":"list";return i.storage("view",t),i.lazy(function(){i.viewchange(),e.update(void 0,t),this.resolve()})},i.bind("init",function(){t=function(){var e,t=i.getUI("cwd"),a=[],o=i.options.uiOptions.cwd.iconsView.sizeNames,r=i.options.uiOptions.cwd.iconsView.sizeMax;for(e=0;e<=r;e++)a.push({label:i.i18n(o[e]||"Size-"+e+" icons"),icon:"view",callback:function(e){return function(){t.trigger("iconpref",{size:e}),i.storage("iconsize",e),"list"===n.value&&n.exec()}}(e)});return a.push("|"),a.push({label:i.i18n("viewlist"),icon:"view-list",callback:function(){"list"!==n.value&&n.exec()}}),a}()}).bind("contextmenucreate",function(){n.extra={icon:"menu",node:e("<span></span>").attr({title:i.i18n("cmdview")}).on("click touchstart",function(a){if(!("touchstart"===a.type&&a.originalEvent.touches.length>1)){var o,r,s=e(this);t.concat();for(o="list"===n.value?t.length-1:parseInt(i.storage("iconsize")||0),r=0;r<t.length;r++)"|"!==t[r]&&(t[r].options=r===o?{className:"ui-state-active"}:void 0);a.stopPropagation(),a.preventDefault(),i.trigger("contextmenu",{raw:t,x:s.offset().left,y:s.offset().top})}})}})},i});;
/* rank:50standard - minify:ok. lib/jquery_tiki/elfinder/tiki-elfinder.js */
openElFinderDialog=function(element,options){var $dialog=$('<div/>'),buttons={};options=options?options:{};$(document.body).append($dialog);$(window).data('elFinderDialog',$dialog);options=$.extend({title:tr("Browse Files"),minWidth:500,height:500,width:800,zIndex:9999,modal:!0,eventOrigin:this,uploadCallback:null},options);buttons[tr('Close')]=function(){$dialog.dialog('close')};if(options.eventOrigin){$("body").data("eventOrigin",options.eventOrigin);delete options.eventOrigin}
var elfoptions=initElFinder(options);$dialog.dialog({title:options.title,minWidth:options.minWidth,height:options.height+=150,width:options.width+=40,buttons:buttons,modal:options.modal,zIndex:options.zIndex,open:function(){var $elf=$('<div class="elFinderDialog" />');$(this).append($elf);$elf.elfinder(elfoptions).elfinder('instance');$(this).height(elfoptions.height);if(options.uploadCallback){$elf.elfinder('instance').bind("upload",options.uploadCallback)}},close:function(){$("body").data("eventOrigin","");$(this).dialog('close').dialog('destroy').remove()}});return!1};function initElFinder(options){options=$.extend({getFileCallback:null,defaultGalleryId:0,deepGallerySearch:!0,url:$.service('file_finder','finder'),customData:{defaultGalleryId:options.defaultGalleryId,deepGallerySearch:options.deepGallerySearch,ticket:options.ticket},commandsOptions:{info:{custom:{hits:{label:tr("Hits"),tpl:'<div class="elfinder-info-hits"><span class="elfinder-info-spinner"></span></div>',action:function(file,fm,dialog){fm.request({data:{cmd:'info',target:file.hash,content:""},preventDefault:!0}).fail(function(){dialog.find('div.elfinder-info-hits').html(fm.i18n('unknown'));dialog.find('div.elfinder-info-fileid').html(fm.i18n('unknown'));dialog.find('div.elfinder-info-user').html(fm.i18n('unknown'));dialog.find('div.elfinder-info-description').html(fm.i18n('unknown'));dialog.find('div.elfinder-info-syntax').html(fm.i18n('unknown'));dialog.find('div.elfinder-info-edit').html(fm.i18n('unknown'))}).done(function(data){var edit,id;if(file.mime==="directory"){id=data.info.galleryId;edit="tiki-list_file_gallery.php?view=list&edit_mode=1&galleryId="+id}else{id=data.info.fileId;edit="tiki-upload_file.php?fileId="+id}
edit='<a href="'+edit+'">'+tr("Edit Properties")+"</a>";dialog.find('a:first').parent().html(data.info.link);dialog.find('div.elfinder-info-hits').html(data.info.hits);dialog.find('div.elfinder-info-fileid').html(id);dialog.find('div.elfinder-info-user').html(data.info.user||"");dialog.find('div.elfinder-info-description').html(data.info.description||"");dialog.find('div.elfinder-info-syntax').html(data.info.wiki_syntax||"");dialog.find('div.elfinder-info-edit').html(edit)})}},fileId:{label:tr("ID"),tpl:'<div class="elfinder-info-fileid"><span class="elfinder-info-spinner"></span></div>',},user:{label:tr("User"),tpl:'<div class="elfinder-info-user"><span class="elfinder-info-spinner"></span></div>',},syntax:{label:tr("syntax"),tpl:'<div class="elfinder-info-syntax"><span class="elfinder-info-spinner"></span></div>',},description:{label:tr("Description"),tpl:'<div class="elfinder-info-description"><span class="elfinder-info-spinner"></span></div>',},edit:{label:tr("Properties"),tpl:'<div class="elfinder-info-edit"><span class="elfinder-info-spinner"></span></div>',}}}}},options);var lang=jqueryTiki.language;if(lang&&typeof elFinder.prototype.i18[lang]!=="undefined"&&!options.lang){if(lang==='cn'){lang='zh_CN'}else if(lang==='pt-br'){lang='pt_BR'}
options.lang=lang}
if(options.defaultGalleryId>0){options.rememberLastDir=!1;location.hash="";if(!options.deepGallerySearch){}}
delete options.defaultGalleryId;delete options.deepGallerySearch;delete options.ticket;var remainingCommands=elFinder.prototype._options.commands,idx;var disabled=['mkfile','edit','archive','resize'];$.each(disabled,function(i,cmd){(idx=$.inArray(cmd,remainingCommands))!==-1&&remainingCommands.splice(idx,1)});return options};
/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-jquery.js */
var $jq=$,$window=$(window),$document=$(document);function switchCheckboxes(tform,elements_name,state,hiddenToo){if(hiddenToo==undefined){hiddenToo=!1}
var closeTag;if(hiddenToo){closeTag='"]'}else{closeTag='"]:visible'}
$(tform).contents().find('input[name="'+jQuery.escapeSelector(elements_name)+closeTag).prop('checked',state).change()}
var jqNoAnimElements=['help_sections','ajaxLoading'];function show(foo,f,section){if($.inArray(foo,jqNoAnimElements)>-1||typeof jqueryTiki==='undefined'){$("#"+foo).show()}else if($("#"+foo).hasClass("tabcontent")){showJQ("#"+foo,jqueryTiki.effect_tabs,jqueryTiki.effect_tabs_speed,jqueryTiki.effect_tabs_direction)}else{showJQ("#"+foo,jqueryTiki.effect,jqueryTiki.effect_speed,jqueryTiki.effect_direction)}
if(f){setCookie(foo,"o",section)}}
function hide(foo,f,section){if($.inArray(foo,jqNoAnimElements)>-1||typeof jqueryTiki==='undefined'){$("#"+foo).hide()}else if($("#"+foo).hasClass("tabcontent")){hideJQ("#"+foo,jqueryTiki.effect_tabs,jqueryTiki.effect_tabs_speed,jqueryTiki.effect_tabs_direction)}else{hideJQ("#"+foo,jqueryTiki.effect,jqueryTiki.effect_speed,jqueryTiki.effect_direction)}
if(f){setCookie(foo,"c",section)}}
function flip(foo,style){var $foo=$("#"+foo);if(style&&style!=='block'||foo==='help_sections'||foo==='fgalexplorer'||typeof jqueryTiki==='undefined'){$foo.toggle();if($foo.css('display')==='none'){setSessionVar('show_'+tiki_encodeURIComponent(foo),'n')}else{setSessionVar('show_'+tiki_encodeURIComponent(foo),'y')}}else{if($foo.css("display")==="none"){setSessionVar('show_'+tiki_encodeURIComponent(foo),'y');show(foo)}else{setSessionVar('show_'+tiki_encodeURIComponent(foo),'n');hide(foo)}}}
function showJQ(selector,effect,speed,dir){if(effect==='none'){$(selector).show()}else if(effect===''||effect==='normal'){$(selector).show(400)}else if(effect=='slide'){$(selector).slideDown(speed)}else if(effect==='fade'){$(selector).fadeIn(speed)}else if(effect.match(/(.*)_ui$/).length>1){$(selector).show(effect.match(/(.*)_ui$/)[1],{direction:dir},speed)}else{$(selector).show()}}
function hideJQ(selector,effect,speed,dir){if(effect==='none'){$(selector).hide()}else if(effect===''||effect==='normal'){$(selector).hide(400)}else if(effect==='slide'){$(selector).slideUp(speed)}else if(effect==='fade'){$(selector).fadeOut(speed)}else if(effect.match(/(.*)_ui$/).length>1){$(selector).hide(effect.match(/(.*)_ui$/)[1],{direction:dir},speed)}else{$(selector).hide()}}
function ajaxLoadingShow(destName){var $dest,$loading,pos,x,y,w,h;if(typeof destName==='string'){$dest=$('#'+destName)}else{$dest=$(destName)}
if($dest.length===0||$dest.parents(":hidden").length>0){return}
$loading=$('#ajaxLoading');pos=$dest.offset();if(pos.left+$dest.width()>$window.width()){w=$window.width()-pos.left}else{w=$dest.width()}
if(pos.top+$dest.height()>$window.height()){h=$window.height()-pos.top}else{h=$dest.height()}
x=pos.left+(w/2)-($loading.width()/2);y=pos.top+(h/2)-($loading.height()/2);$loading.css('left',x).css('top',y);x=pos.left+ccsValueToInteger($dest.css("margin-left"));y=pos.top+ccsValueToInteger($dest.css("margin-top"));w=ccsValueToInteger($dest.css("padding-left"))+$dest.width()+ccsValueToInteger($dest.css("padding-right"));h=ccsValueToInteger($dest.css("padding-top"))+$dest.height()+ccsValueToInteger($dest.css("padding-bottom"));$('#ajaxLoadingBG').css('left',pos.left).css('top',pos.top).width(w).height(h).fadeIn("fast");show('ajaxLoading')}
function ajaxLoadingHide(){hide('ajaxLoading');$('#ajaxLoadingBG').fadeOut("fast")}
function ajaxSubmitEventHandler(successCallback,dataType){return function(e){e.preventDefault();let form=this,act=$(form).attr('action'),modal=$(form).closest('.modal-dialog'),formData=null;if(!act){if(typeof url!=="undefined"){act=url}else{return!1}}
dataType=dataType||'json';if(typeof $(form).valid==="function"){if(!$(form).valid()){return!1}else if($(form).validate().pendingRequest>0){$(form).validate();setTimeout(function(){$(form).submit()},500);return!1}}
modal.tikiModal(tr('Loading...'));if($(form).find("input[type=file]").length){formData=new FormData(form)}else{formData=$(form).serialize()}
let formSubmission={type:'POST',data:formData,dataType:dataType,success:function(data){successCallback.apply(form,[data])},error:function(jqxhr){if(!jqxhr.getResponseHeader('X-Tiki-Feedback')){modal.tikiModal();$(form).showError(jqxhr)}},complete:function(){modal.tikiModal()}};if(form.enctype==="multipart/form-data"||formData.constructor===FormData){formSubmission.contentType=!1;formSubmission.processData=!1}
$.ajax(act,formSubmission);return!1}}
function checkDuplicateRows(button,columnSelector,rowSelector,parentSelector){if(typeof columnSelector==='undefined'){columnSelector="td"}
if(typeof rowSelector==='undefined'){rowSelector="tr:not(:first)"}
if(typeof parentSelector==='undefined'){parentSelector="table:first"}
var $rows=$(button).parents(parentSelector).find(rowSelector);$rows.each(function(ix,el){if($("input:checked",el).length===0){var $el=$(el);var line=$el.find(columnSelector).text();$rows.each(function(ix,el){if($el[0]!==el&&$("input:checked",el).length===0){if(line===$(el).find(columnSelector).text()){$(":checkbox:first",el).prop("checked",!0)}}})}})}
$.fn.tiki_popover=function(){var list,$container=this;if($.fn.tooltip.Constructor&&typeof $.fn.tooltip.Constructor.Default.whiteList==="object"){var myDefaultWhiteList=$.fn.tooltip.Constructor.Default.whiteList;myDefaultWhiteList.table=[];myDefaultWhiteList.thead=[];myDefaultWhiteList.tbody=[];myDefaultWhiteList.tr=[];myDefaultWhiteList.th=[];myDefaultWhiteList.td=[];myDefaultWhiteList.form=["action","method"];myDefaultWhiteList.input=["name","value","type"];myDefaultWhiteList.button=["type","disabled","name","value","onclick"];myDefaultWhiteList.time=["datetime"];myDefaultWhiteList.a=["target","href","title","rel","data-toggle","data-backdrop","data-target","data-size","onclick"]}
list=$container.find('.tips[title!=""], .tikihelp[title!=""]').each(function(){var $element=$(this);if($element.attr('title')){$.each(['|',':','<br/>','<br>'],function(key,sep){var parts=$element.attr('title').split(sep);if(parts.length>1){$element.attr('title',parts.shift());$element.data('content',parts.join(sep))}})}else{$element.attr('title','')}
if(!$element.data('trigger')){$element.data('trigger','hover')}
$element.data('delay',{"show":0,"hide":10})});$.merge(list,$container.find("a[data-toggle=popover]:not(.tips[title!='']):not(.tikihelp[title!=''])"));list.filter('.bottom').data('placement','bottom');list.filter('.left').data('placement','left');list.filter('.slow').data('delay',{"show":500,"hide":0});list.find('img').attr('title','');list.filter('[data-trigger="click"]').click(function(e){e.preventDefault()});list.popover({container:'body',html:!0,boundary:"window",placement:$.tikiPopoverWhereToPlace});$container.find('.ajaxtips').each(function(){var me=$(this),trigger=me.data('trigger')||'hover';$(this).popover({trigger:trigger,html:!0,delay:{"show":0,"hide":10},placement:$.tikiPopoverWhereToPlace,boundary:"window",content:function(){var link=this,content=$(this).data('content');if(!content){$.get($(this).data('ajaxtips'),function(data){content=data;$(link).data('content',content);$(link).popover('show')});content="<div class='text-center p-3'><img src='img/spinner.gif' alt='Loading...'></div>"}
return content}})});$document.on("show.bs.popover",function(e){var event=e;$('.popover:visible:not(.tour-tour)').each(function(){if(this.previousElementSibling!==event.target){$(this).popover('hide')}})});$document.on("hide.bs.popover",function(e){var $popover=$('.popover:visible:not(.tour-tour)');if($popover.find(":hover").length){$popover.mouseleave(function(){$(this).popover("hide")});e.preventDefault();return!1}});return $container};$.tikiPopoverWhereToPlace=function(pop,el){var pxNum=function(str){return(str||'').replace('px','')*1},$win=$(window),$el=$(el),width=$el.offsetParent().width(),height=$el.offsetParent().height(),$pop=$(pop),allowedImgWidth=width*0.60,allowedImgHeight=height*0.60,manualImageWidth=$el.data('width'),leftPos=$el.offset().left,rightPos=leftPos+$el.outerWidth(),bottomPos=$el.offset().top+$el.outerHeight()-$win.scrollTop(),$img=$pop.find('div[style*="background-image"],img').first(),$imgContainer=$img.parent(),$imgPopover=$imgContainer.parent(),imgWidth=pxNum($img.css('width')),imgHeight=pxNum($img.css('height')),newImgWidth,newImgHeight,widthBuffer,heightBuffer;if($el.data("placement")){return $el.data("placement")}
if(manualImageWidth){$img.css({width:manualImageWidth+'px'});$pop.css({"max-width":'100%'});imgWidth=manualImageWidth}
if(imgWidth>allowedImgWidth||imgHeight>allowedImgHeight){widthBuffer=(pxNum($imgContainer.css('padding-left'))+pxNum($imgContainer.css('margin-left'))+pxNum($imgContainer.css('border-left-width')))*2;heightBuffer=(pxNum($imgContainer.css('padding-top'))+pxNum($imgContainer.css('margin-top'))+pxNum($imgContainer.css('border-top-width')))*2;if(allowedImgWidth/imgWidth>allowedImgHeight/imgHeight){newImgWidth=allowedImgWidth;newImgHeight=imgHeight*(allowedImgWidth/imgWidth)}else{newImgWidth=imgWidth*(allowedImgHeight/imgHeight);newImgHeight=allowedImgHeight}
$img.css({backgroundSize:newImgWidth+'px '+newImgHeight+'px',width:newImgWidth+'px',height:newImgHeight+'px'});$imgPopover.css({maxWidth:(newImgWidth+widthBuffer)+'px',maxHeight:(newImgHeight+heightBuffer)+'px'})}
var $popTemp=$("<div class='popover temp'><div class='popover-body'>"+$el.data("content")+"</div></div>");$("body").append($popTemp);var popWidth=$popTemp.outerWidth(),popHeight=$popTemp.outerHeight();$popTemp.remove();if(width-leftPos<popWidth&&width-rightPos<popWidth){if(bottomPos>popHeight||bottomPos+popHeight>$win.height()){return'top'}else{return'bottom'}}else if(width-leftPos>popWidth){return'left'}else if(width-rightPos>popWidth){return'right'}
if(imgWidth&&width-leftPos+imgWidth>width)return'bottom';return'auto'};if($.fn.popover){var originalLeave=$.fn.popover.Constructor.prototype.leave;$.fn.popover.Constructor.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.'+this.type);var container,timeout;originalLeave.call(this,obj);if(self.$tip){container=self.$tip;timeout=self.timeout;container.one('mouseenter',function(){clearTimeout(timeout);container.one('mouseleave',function(){$.fn.popover.Constructor.prototype.leave.call(self,self)})})}}}
$(function(){if(!window.jqueryTiki)window.jqueryTiki={};if(jqueryTiki.reflection){$("img.reflect").reflect({})}
if(jqueryTiki.tooltips){$(document).tiki_popover()}
if(jqueryTiki.superfish){$('ul.cssmenu_horiz').supersubs({minWidth:11,maxWidth:20,extraWidth:1});$('ul.cssmenu_vert').supersubs({minWidth:11,maxWidth:20,extraWidth:1});$('ul.cssmenu_horiz').superfish({animation:{opacity:'show',height:'show'},speed:'fast',onShow:function(){if($(this).data('active'))return;$(this).data('active',!0).moveToWithinWindow()},onHide:function(){$(this).removeData('active')}});$('ul.cssmenu_vert').superfish({animation:{opacity:'show',height:'show'},speed:'fast',onShow:function(){if($(this).data('active'))return;$(this).data('active',!0).moveToWithinWindow()},onHide:function(){$(this).removeData('active')}})}
$.fn.applyColorbox=function(){$(this).find("a[data-box*='box']").colorbox({rel:function(){return $(this).attr('data-box')},transition:"elastic",maxHeight:"95%",maxWidth:"95%",overlayClose:!0,current:jqueryTiki.cboxCurrent});$(this).find("a[data-box*='box'][data-box*='type=img'], a[data-box*='box'][data-box!='type=']:not([data-is-text])").colorbox({photo:!0});$(this).find("a[data-box*='box'][data-box*='slideshow']").colorbox({photo:!0,slideshow:!0,slideshowSpeed:3500,preloading:!1,width:"100%",height:"100%"});$(this).find("#col1 a[data-box*='box']:not([data-box*='type=img']):not([href*='display']):not([href*='preview']):not([href*='thumb']):not([data-box*='slideshow']):not([href*='image']):not([href$='\.jpg']):not([href$='\.jpeg']):not([href$='\.png']):not([href$='\.gif'])").colorbox({iframe:!0,width:"95%",height:"95%"});$(this).find("#col1 a[data-box*='box'][href^='ftp://'], #col1 a[data-box*='box'][href^='ftps://']").colorbox({iframe:!0,width:"95%",height:"95%"});$(this).find("#col1 a[data-box*='box'][data-box*='type=flash']").colorbox({inline:!0,width:"60%",height:"60%",href:function(){var $el=$("#cb_swf_player");if($el.length===0){$el=$("<div id='cb_swf_player' />");$(document.body).append($("<div />").hide().append($el))}
swfobject.embedSWF($(this).attr("href"),"cb_swf_player","100%","90%","9.0.0","vendor_bundled/vendor/bower-asset/swfobject/swfobject/expressInstall.swf");return $("#cb_swf_player")}});$(this).find("#col1 a[data-box*='box'][data-box*='type=video']").colorbox({iframe:!0,fastIframe:!1,height:"90%",width:"90%",html:function(){return'<video controls autoplay>'+'<source src="'+$(this).attr('href')+'">'+
+'Your browser does not support the video tag.'+'</video>'},onComplete:function(){let video=$('#colorbox iframe').contents().find('video');setTimeout(function(){$(this).colorbox.resize({innerHeight:video.height()+'px',innerWidth:video.width()+'px'})},100)}});$(this).find("#col1 a[data-box*='box'][data-box*='type=iframe']").colorbox({iframe:!0});$(this).find("#col1 a[data-box*='box'][href^='#']").colorbox({inline:!0,width:"50%",height:"50%",href:function(){return $(this).attr('href')}});$(this).find("a[data-box*='box'][title]").colorbox({title:function(){return $(this).attr('title')}});$(this).find("a[data-box*='box'] img[title]").colorbox({title:function(){return $(this).attr('title')},photo:!0,href:function(){return $(this).parent().attr("href")}});var re,ret;$(this).find("#col1 a[data-box*='box'][data-box*='title=']").colorbox({title:function(){re=/(title=([^;\"]+))/i;ret=$(this).attr("data-box").match(re);return ret[2]}});$(this).find("#col1 a[data-box*='box'][data-box*='height=']").colorbox({height:function(){re=/(height=([^;\"]+))/i;ret=$(this).attr("data-box").match(re);return ret[2]}});$(this).find("#col1 a[data-box*='box'][data-box*='width=']").colorbox({width:function(){re=/(width=([^;\"]+))/i;ret=$(this).attr("data-box").match(re);return ret[2]}});if(jqueryTiki.colorbox){$(this).find("a[data-box^='shadowbox[colorbox']").each(function(){$(this).attr('savedTitle',$(this).attr('title'))});$(this).find("a[data-box^='shadowbox[colorbox']").colorbox({title:function(){return $(this).attr('savedTitle')}})}};$.applyColorbox=function(){if(jqueryTiki.colorbox){$('body').applyColorbox()}};if(jqueryTiki.colorbox&&!jqueryTiki.mobile){$().on('cbox_complete',function(){$("#cboxTitle").wrapInner("<div></div>")});$.applyColorbox()}
if(jqueryTiki.zoom){$("a[data-box*=zoom]").each(function(){$(this).wrap('<span class="img_zoom"></span>').parent().zoom({url:$(this).attr("href")})})}
$.fn.applyChosen=function(){if(jqueryTiki.chosen){$("select:not(.allow_single_deselect):not(.nochosen)").tiki("chosen")}};$.applyChosen=function(){return $('body').applyChosen()};if(jqueryTiki.chosen){$.applyChosen()}
$(function(){$("#keepOpenCbx").click(function(){if(this.checked){setCookie("fgalKeepOpen","1")}else{setCookie("fgalKeepOpen","")}});var keepopen=getCookie("fgalKeepOpen");$("#keepOpenCbx").prop("checked",!!keepopen)});$.paginationHelper();$(document).on('click','a.click-modal, .click-modal a',$.clickModal({size:'modal-lg',backdrop:'static',success:function(data){let redirect=$(this).data('modal-submit-redirect-url')||$(this).parent().data('modal-submit-redirect-url');window.location.href=redirect||window.location.href.replace(/#.*$/,'')}}));if(jqueryTiki.numericFieldScroll==="none"||jqueryTiki.numericFieldScroll===null){$(document).on('focus','input[type=number]',function(e){$(this).on('wheel.disableScroll',function(e){e.preventDefault()})});$(document).on('blur','input[type=number]',function(e){$(this).off('wheel.disableScroll')})}});$document.on('pageSearchReady',function(){$.paginationHelper()});function checkClose(){if(!$("#keepOpenCbx").prop("checked")){window.close()}else{window.blur();if(window.opener){window.opener.focus()}}}
$(function(){if($("#diff_outer").length&&!$.trim($(".wikipreview .wikitext").html()).length){toggleFullScreen("editwiki")}});function sideBySideDiff(){if($('.side-by-side-fullscreen').size()){$('.side-by-side-fullscreen').remove();return}
var $diff=$('#diff_outer').remove(),$zone=$('.edit-zone');$zone.after($diff.addClass('side-by-side-fullscreen'));$diff.find('#diff_history').height('')}
function toggleFullScreen(area_id){if($("input[name=wysiwyg]").val()==="y"){$("#diff_outer").css({position:"inherit",height:"400px",overflowX:"auto"});return}
var textarea=$("#"+area_id);var textareaEditor=syntaxHighlighter.get(textarea);if(textareaEditor){syntaxHighlighter.fullscreen(textarea);sideBySideDiff();return}
var toolbar=$('#editwiki_toolbar'),preview=$("#autosave_preview"),comment=$("#comment").parents("fieldset:first"),screen=$('.TextArea-fullscreen'),zone=$('.edit-zone',screen);screen.add(textarea).css('height','');$('.TextArea-fullscreen .actions').remove();if(textarea.parent().hasClass("ui-wrapper")){textarea.resizable("destroy")}
var textareaParent=textarea.parents(".tab-content:first").toggleClass('TextArea-fullscreen');if(textareaParent.hasClass('TextArea-fullscreen')){$('body').css('overflow','hidden');$('.tabs,.rbox-title').toggle();$('#fullscreenbutton').hide();var win=$window.data('cm-resize',!0),diff=$("#diff_outer"),msg=$(".translation_message"),actions=$('.actions',textarea.parents("form"));actions.clone().appendTo('.TextArea-fullscreen');actions=$('.actions',$('.TextArea-fullscreen'));comment.css({position:"absolute",bottom:actions.outerHeight()+"px",width:"100%"}).nextAll("fieldset").hide();preview.css({position:"absolute",top:0,left:0});win.resize(function(){screen=$('.TextArea-fullscreen');actions=$('.actions',screen);comment=$("#comment").parents("fieldset:first");if(win.data('cm-resize')&&screen){screen.css('height',win.height()+'px');var swidth=win.width()+"px";var commentMargin=parseInt(comment.css("paddingTop").replace("px",""))*4;commentMargin+=parseInt(comment.css("borderBottomWidth").replace("px",""))*2;var innerHeight=win.height()-comment.outerHeight()-commentMargin-actions.outerHeight();if(diff.length){swidth=(screen.width()/2)+"px";innerHeight-=msg.outerHeight();msg.css("width",(screen.width()/2-msg.css("paddingLeft").replace("px","")-msg.css("paddingRight").replace("px",""))+"px");diff.css({width:swidth,height:innerHeight+'px'});$('#diff_history').height(innerHeight+"px")}
textarea.css("width",swidth);toolbar.css('width',swidth);zone.css("width",swidth);preview.css("width",swidth);textarea.css('height',(innerHeight-toolbar.outerHeight())+"px")}});setTimeout(function(){$window.resize()},500)}else{textarea.css("width","");toolbar.css('width',"");zone.css({width:"",height:""});screen.css("width","");comment.css({position:"",bottom:"",width:""}).nextAll("fieldset").show();preview.css({position:"",top:"",left:""});$('body').css('overflow','');$('.tabs,.rbox-title').toggle();$('#fullscreenbutton').show();$window.removeData('cm-resize')}
sideBySideDiff()}
var xhrCache={},lastXhr;$.fn.tiki=function(func,type,options,excludepage){var opts={},opt;switch(func){case "autocomplete":if(jqueryTiki.autocomplete&&jqueryTiki.ui){if(typeof type==='undefined'){return null}
options=options||{};var requestData={},_renderItem=null;var url="";switch(type){case "pagename":url="tiki-listpages.php?listonly&initial="+(options.initial?options.initial+"&nonamespace":"")+"&exclude_page="+excludepage;break;case "groupname":url="tiki-ajax_services.php?listonly=groups";break;case "username":url="tiki-ajax_services.php?listonly=users";break;case "usersandcontacts":url="tiki-ajax_services.php?listonly=usersandcontacts";break;case "userrealname":url="tiki-ajax_services.php?listonly=userrealnames";break;case "tag":url="tiki-ajax_services.php?listonly=tags&separator=+";break;case "icon":url=null;opts.source=Object.keys(jqueryTiki.iconset.icons);_renderItem=function(ul,item){return $("<li>").attr("data-value",item.value).append($().getIcon(item.value)).append(" ").append(item.label).appendTo(ul)};break;case 'trackername':url="tiki-ajax_services.php?listonly=trackername";break;case 'trackervalue':if(typeof options.fieldId==="undefined"){return null}
$.extend(requestData,options);options={};url="list-tracker_field_values_ajax.php";break;case "reference":url="tiki-ajax_services.php?listonly=references";break}
var multiple=options.multiple&&(type=='usersandcontacts'||type=='userrealname'||type=='username'||type=='reference');opts=$.extend({minLength:2,source:function(request,response){if(multiple){request.term=(''+request.term).split(/,\s*/).pop()}
if(options.tiki_replace_term){request.term=options.tiki_replace_term.apply(null,[request.term])}
var cacheKey="ac."+type+"."+request.term;if(cacheKey in xhrCache){response(xhrCache[cacheKey]);return}
request.q=request.term;$.extend(request,requestData);lastXhr=$.getJSON(url,request,function(data,status,xhr){xhrCache[cacheKey]=data;if(xhr===lastXhr){response(data,function(item){return item})}})},focus:function(ev){ev.preventDefault()},search:function(){if(multiple){var term=(''+this.value).split(/,\s*/).pop();if(term.length<2){return!1}}},select:function(e,ui){if(multiple){var terms=''+this.value;terms=terms.replace(';',',');terms=terms.split(/,\s*/);terms.pop();terms.push(ui.item.value);terms.push("");this.value=terms.join(", ");return!1}else{$(this).data('selected',!0)}}},opts);$.extend(opts,options);if(options.mustMatch&&multiple){this.on("keydown",function(e){if(e.which===8||e.which===46){e.preventDefault();var terms=''+this.value;terms=terms.replace(';',',');terms=terms.split(/,\s*/);var lastterm=terms.pop();if(lastterm===''){terms.pop()}
terms.push("");this.value=terms.join(", ")}else if(e.which===37||e.which===39){e.preventDefault()}});this.on("focus click",function(){var currentVal=$(this).val();$(this).val('').val(currentVal)})}else if(options.mustMatch){if($(this).val()){$(this).data('selected',!0)}
$(this).on("blur",function(){if(!$(this).data('selected')){$(this).val('')}});$(this).on("keydown",function(e){if($(this).data('selected')&&(e.which===8||e.which===46)){e.preventDefault();$(this).val('');$(this).data('selected',!1)}else if($(this).data('selected')&&(e.which>47||e.which===32)){e.preventDefault()}else if(e.which===13&&!$(this).data('selected')){e.preventDefault()}})}
return this.each(function(){var $element=$(this).autocomplete(opts).blur(function(){$(this).removeClass("ui-autocomplete-loading").change()});if(_renderItem&&$element.length){$element.autocomplete("instance")._renderItem=_renderItem}})}
break;case "carousel":if(jqueryTiki.carousel){opts={imagePath:"vendor_bundled/vendor/jquery-plugins/infinitecarousel/images/",autoPilot:!0};$.extend(opts,options);return this.each(function(){$(this).infiniteCarousel(opts)})}
break;case "datepicker":case "datetimepicker":if(jqueryTiki.ui){switch(type){case "jscalendar":if(typeof options.altField==="undefined"){alert("jQuery.ui datepicker jscalendar replacement setup error: options.altField not set for "+$(this).attr("id"));debugger}
opts={showOn:"both",buttonText:'',dateFormat:jqueryTiki.shortDateFormat,timeFormat:jqueryTiki.shortTimeFormat,showButtonPanel:!0,altFormat:"@",altFieldTimeOnly:!1,onClose:function(dateText,inst){$.datepickerAdjustAltField(func,inst)}};break;default:opts={showOn:"both",buttonText:'',dateFormat:jqueryTiki.shortDateFormat,showButtonPanel:!0,firstDay:jqueryTiki.firstDayofWeek};break}
$.extend(opts,options);if(func==="datetimepicker"){return this.each(function(){$(this).datetimepicker(opts)})}else{return this.each(function(){$(this).datepicker(opts)})}}
break;case "accordion":if(jqueryTiki.ui){opts={autoHeight:!1,collapsible:!0,navigation:!0};$.extend(opts,options);return this.each(function(){$(this).accordion(opts)})}
break;case "chosen":if(jqueryTiki.chosen){opts={allow_single_deselect:!0,search_contains:!0};if($("html").attr("dir")==="rtl"){$(this).addClass("chosen-rtl");opts.rtl=!0}
$.map({placeholder_text_multiple:tr("Select Some Options"),placeholder_text_single:tr("Select an Option"),no_results_text:tr("No results match")},function(v,k){opts[k]=tr(v)});$.extend(opts,options);return this.each(function(){var opts2=$.extend({},opts),$select=$(this);if($select.is(":hidden")&&!opts.width){var $hiddenElement=$select.clone().appendTo("body");if($select.is('.form-control')){opts2.width='100%'}else{opts2.width=$hiddenElement.outerWidth()}
$hiddenElement.remove()}
var hidden=$();$select.chosen(opts2).on('chosen:showing_dropdown',function(){hidden=$(this).parents(":not(body,.modal)").filter(function(){return $(this).css('overflow')==='hidden'}).css('overflow','visible')}).on('chosen:hiding_dropdown',function(){hidden.css('overflow','hidden')});if(jqueryTiki.chosen_sortable&&$select.prop("multiple")){var $choices=$select.next(".chosen-container-multi").find("> .chosen-choices");$choices.mousedown(function(event){if($(event.target).is('span')){event.stopPropagation()}}).sortable({items:"li:not(.search-field)"}).parents("form:first:not(.customsearch_form)").submit(function(){if(!$(this).data("chosen-multi-submitted")&&!$select.hasClass("nochosen")){var $options=$choices.find("li:not(.search-field) a").map(function(){return $select.find("option")[$(this).data("option-array-index")]});if($options.length){$select.children().remove();$select.append($options).change()}
$(this).data("chosen-multi-submitted",!0)}})}})}
break}};(function($){$.datepickerAdjustAltField=function(func,inst){$.datepicker._updateAlternate(inst);var val=$(inst.settings.altField).val(),timestamp;if(func==="datetimepicker"){val=val.substring(0,val.indexOf(" "));timestamp=parseInt(val/1000,10);if(!timestamp||isNaN(timestamp)){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);val=$(inst.settings.altField).val();val=val.substring(0,val.indexOf(" "));timestamp=parseInt(val/1000,10)}
if(timestamp&&inst.settings&&inst.settings.timepicker){var time=inst.settings.timepicker.hour*3600+inst.settings.timepicker.minute*60+inst.settings.timepicker.second;timestamp+=time}}else{timestamp=parseInt(val/1000,10)}
$(inst.settings.altField).val(timestamp?timestamp:"").change()};$.datepicker._jquibase_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]);this._jquibase_gotoToday(id);this._setDate(inst,new Date())};$.fn.addnotes=function(container){return this.each(function(){var comment=this;var text=$('dt:contains("note")',comment).next('dd').text();var title=$('h4:first',comment).clone();var body=$('.comment-body:first',comment).clone();body.find('dt:contains("note")').closest('dl').remove().addClass('card');if(text.length>0){var parents=container.find(':contains("'+text+'")').parent();var node=container.find(':contains("'+text+'")').not(parents).addClass('note-editor-text alert-info').each(function(){var child=$('dl.note-list',this);if(!child.length){child=$('<dl class="note-list list-group-item-info"/>').appendTo(this).hide();$(this).click(function(){child.toggle()})}
child.append(title).append($('<dd/>').append(body))})}})};$.fn.noteeditor=function(editlink,link){var hiddenParents=null;var annote=$(link).click(function(e){e.preventDefault();var $block=$('<div/>');var annotation=$(this).attr('annotation');$(this).fadeOut(100);$block.load(editlink.attr('href'),function(){var msg="";if(annotation.length<20){msg=tr("The text you have selected is quite short. Select a longer piece to ensure the note is associated with the correct text.")+"<br />"}
msg="<p class='description comment-info'>"+msg+tr("Tip: Leave the first line as it is, starting with \";note:\". This is required")+"</p>";$block.prepend($(msg));$('textarea',this).val(';note:'+annotation+"\n\n").focus();$('form',this).submit(function(){$.post($(this).attr('action'),$(this).serialize(),function(){$block.dialog('destroy');editlink.closest('.comment-container').reload()});return!1});$block.dialog({modal:!0,width:500,height:400})})}).appendTo(document.body);$(this).mouseup(function(e){var range;if(window.getSelection&&window.getSelection().rangeCount){range=window.getSelection().getRangeAt(0)}else if(window.selection){range=window.selection.getRangeAt(0)}
if(range){var str=$.trim(range.toString());if(str.length&&-1===str.indexOf("\n")){annote.attr('annotation',str);annote.fadeIn(100).position({of:e,at:'bottom left',my:'top left',offset:'20 20'})}else{if(annote.css("display")!="none"){annote.fadeOut(100)}
if($("form.comments").css("display")=="none"){$("form.comments").show()}
if(hiddenParents){hiddenParents.hide();hiddenParents=null}}}})};$.fn.browse_tree=function(){this.each(function(){$('.treenode:not(.done)',this).addClass('done').each(function(){if(getCookie($('ul:first',this).attr('data-id'),$('ul:first',this).attr('data-prefix'))!=='o'){$('ul:first',this).css('display','none')}
var $placeholder=$('span.ui-icon:first:not(.control)',this);if($('ul:first',this).length){var dir=$('ul:first',this).css('display')==='block'?'s':'e';if($placeholder.length){$placeholder.replaceWith('<span class="flipper ui-icon ui-icon-triangle-1-'+dir+'" style="float: left;margin-top:.2em;"/>')}else{$(this).prepend('<span class="flipper ui-icon ui-icon-triangle-1-'+dir+'" style="float: left;margin-top:.2em;"/>')}}else{if($placeholder.length){$placeholder.replaceWith('<span style="float:left;width:16px;height:16px;margin-top:.2em;"/>')}else{$(this).prepend('<span style="float:left;width:16px;height:16px;margin-top:.2em;"/>')}}
if($('div.checkbox',this).length){$('div.checkbox',this).css("margin-left","16px")}});$('.flipper:not(.done)').addClass('done').css('cursor','pointer').click(function(){var body=$(this).parent().find('ul:first');if('block'===body.css('display')){$(this).removeClass('ui-icon-triangle-1-s').addClass('ui-icon-triangle-1-e');body.hide('fast');setCookie(body.data("id"),"",body.data("prefix"))}else{$(this).removeClass('ui-icon-triangle-1-e').addClass('ui-icon-triangle-1-s');body.show('fast');setCookie(body.data("id"),"o",body.data("prefix"))}})});return this};var fancy_filter_create_token=function(value,label){var close,token;console.log();close=$('<span class="ui-icon ui-icon-close"/>').click(function(){var ed=$(this).parent().parent();$(this).parent().remove();ed.change();return!1});token=$('<span class="token"/>').attr('data-value',value).text(label).attr('contenteditable',!1).disableSelection().append(close);return token[0]};var fancy_filter_build_init=function(editable,str,options){if(str===''){str='&nbsp;'}
editable.html(str.replace(/(\d+)/g,'<span>$1</span>'));if(options&&options.map){editable.find('span').each(function(){var val=$(this).text();$(this).replaceWith(fancy_filter_create_token(val,JSON.parse(options.map)[val]?JSON.parse(options.map)[val]:val))})}};$.fn.fancy_filter=function(operation,options){this.each(function(){switch(operation){case 'init':var editable=$('<div class="fancyfilter form-control"/>'),input=this;if(editable[0].contentEditable!==null){fancy_filter_build_init(editable,$(this).val(),options);editable.attr('contenteditable',!0);$(this).after(editable).hide()}
editable.keyup(function(){$(this).change();$(this).mouseup()}).change(function(){$(input).val($('<span/>').html(editable.html()).find('span').each(function(){$(this).replaceWith(' '+$(this).attr('data-value')+' ')}).end().text().replace(/\s+/g,' '))}).mouseup(function(){input.lastRange=window.getSelection().getRangeAt(0)});break;case 'add':var editable=$(this).next();editable.find("span[data-value='"+options.token+"']").remove();var node=fancy_filter_create_token(options.token,options.label);editable.append(node);editable.change();break}});return this};$.fn.drawGraph=function(){this.each(function(){var $this=$(this);var width=$this.width();var height=$this.height()?$this.height():Math.ceil(width*9/16);var nodes=$this.data('graph-nodes');var edges=$this.data('graph-edges');var g=new Graph;$.each(nodes,function(k,i){g.addNode(i)});$.each(edges,function(k,i){var style={directed:!0};if(i.preserve){style.color='red'}
g.addEdge(i.from,i.to,style)});var layouter=new Graph.Layout.Spring(g);layouter.layout();var renderer=new Graph.Renderer.Raphael($this.attr('id'),g,width,height);renderer.draw()});return this};$.fn.selection=function(start,end){if(start!==undefined){if(end===undefined){end=start}
return this.each(function(){if(this.selectionStart){this.selectionStart=start;this.selectionEnd=end}else if(this.setSelectionRange){this.setSelectionRange(start,end)}else if(this.createTextRange){var selRange=this.createTextRange();if(start==end){selRange.move("character",start);selRange.select()}else{selRange.collapse(!0);selRange.moveStart("character",start);selRange.moveEnd("character",end-start);selRange.select()}}})}
var field=this[0];if(field.selectionStart!==undefined){return{start:field.selectionStart,end:field.selectionEnd}}else if(field.createTextRange){var range=document.selection.createRange();var stored_range=range.duplicate();stored_range.moveToElementText(field);stored_range.setEndPoint('EndToEnd',range);var textProperty=range.htmlText?"htmlText":"text";var selectionStart=stored_range[textProperty].length-range[textProperty].length;var selectionEnd=selectionStart+range[textProperty].length;return{start:selectionStart,end:selectionEnd}}};$.fn.comment_toggle=function(){this.each(function(){var $target=$(this.hash);$target.hide();$(this).click(function(){if($target.is(':visible')){$target.hide(function(){$(this).empty()})}else{$target.comment_load($(this).attr('href'))}
return!1});if(location.search.indexOf("comzone=show")>-1||location.hash.match(/threadId=?(\d+)/)){var comButton=this;setTimeout(function(){$(comButton).click()},500)}});return this};$.fn.comment_load=function(url){var $top=$('#top');$('.note-list',$top).remove();this.each(function(){var comment_container=this;if(!comment_container.reload){comment_container.reload=function(){$(comment_container).empty().comment_load(url)}}
$(this).addClass('comment-container');$(this).load(url,function(response,status){$(this).show();if(jqueryTiki.useInlineComment&&!jqueryTiki.useInlineAnnotations){$('.comment.inline dt:contains("note")',this).closest('.comment').addnotes($top);$top.noteeditor($('.comment-form:last a',comment_container),'#note-editor-comment')}
$('.button.comment-form.autoshow a').addClass('autoshown').click().removeClass('autoshown');var match=location.hash.match(/threadId=?(\d+)/);if(match){var $tab=$(this).parents(".tab-pane"),$tabContent=$(this).parents(".tab-content");if($tab.length&&!$tab.is(".active")){$tabContent.find(".tab-pane").each(function(index){if(this===$tab[0]){$(".nav-tabs li:nth("+index+") a",$tabContent.parent()).tab("show")}})}
var $comment=$(".comment[data-comment-thread-id="+match[1]+"]");var top=$comment.offset().top;$('html, body').animate({scrollTop:top},2000,function(){$comment.animate({backgroundColor:"#ff8"},250,function(){$comment.animate({backgroundColor:""},1000)})})}})});return this};$(document).on('click','.comment-form.buttons > a.btn',function(){var comment_container=$(this).closest('.comment-container, .ui-dialog-content')[0];$('.comment-form form:not(.commentRatingForm)',comment_container).each(function(){var $p=$(this).parent();$p.empty().addClass('button').addClass('buttons').append($p.data('previous'))});if(!$(this).hasClass('autoshown')){$(".comment").each(function(){$("article > *:not(ol)",this).each(function(){$(this).css("opacity",0.6)})})}
$(this).parents('.comment:first').find("*").css("opacity",1);var $formContainer=null;if($(this).data('target')){$formContainer=$($(this).data('target'))}else{$formContainer=$(this).parents('.buttons')}
$(this).parents('.buttons').data('previous',$(this).siblings().addBack()).empty().removeClass('buttons').removeClass('button');$('.modal.fade.show').trigger('tiki.modal.redraw');$formContainer.load($(this).attr('href'),function(){var form=$('form',this).submit(function(){var errors,current=this;$(current).tikiModal(tr("Saving..."));if(typeof syntaxHighlighter.sync==='function'){syntaxHighlighter.sync($(current).find("textarea.wikiedit"))}
$.post($(current).attr('action'),$(current).serialize(),function(data,st){$(current).tikiModal();if(data.threadId){let threadId=data.threadId;$(current).closest('.comment-container').reload();$('span.count_comments').each(function(){var action=$(current).attr('action').match(/tiki-comment-(\w*)/),count=parseInt($(this).text());if(action){switch(action[1]){case "remove":count--;break;case "post":count++;case "edit":case "moderate":location.hash=location.hash.replace(/threadId=\d+/,"threadId="+threadId);break}
$(this).text(count)}});if(data.feedback&&data.feedback[0]){alert(data.feedback.join("\n"))}}else{errors=$('ol.errors',form).empty();if(!errors.length){$(':submit',current).after(errors=$('<ul class="alert-warning"/>'))}
$.each(data.errors,function(k,v){errors.append($('<li/>').text(v))})}},'json');return!1});if($.fn.flexibleSyntaxHighlighter){window.codeMirrorEditor=[];form.find('textarea.wikiedit').flexibleSyntaxHighlighter()}});return!1});if($("body.tiki_forums").length){let match=location.hash.match(/threadId=?(\d+)/);if(match){let $comment=$("#"+match[0]+".post");let top=$comment.offset().top;$('html, body').animate({scrollTop:top},2000,function(){$comment.animate({backgroundColor:"#ff8"},250,function(){$comment.animate({backgroundColor:""},1000)})})}}
$.fn.input_csv=function(operation,separator,value){this.each(function(){var values=$(this).val().split(separator);if(values[0]===''){values.shift()}
if(operation==='add'&&-1===values.indexOf(""+value)){values.push(value)}else if(operation==='delete'){value=String(value);while(-1!==$.inArray(value,values)){values.splice($.inArray(value,values),1)}}
$(this).val(values.join(separator))});return this};$.service=function(controller,action,query){var append='';if(query){append='?'+$.buildParams(query)}
if(action){return'tiki-'+controller+'-'+action+append}else{return'tiki-'+controller+'-x'+append}};$.serviceUrl=function(options){var o=$.extend({},options),controller=options.controller,action=options.action;delete(o.controller);delete(o.action);return $.service(controller,action,o)};$.buildParams=function(query,prefix,suffix){prefix=prefix||'';suffix=suffix||'';return $.map(query,function(v,k){if($.isPlainObject(v)){return $.buildParams(v,k+'[',']')}else{return prefix+k+suffix+'='+tiki_encodeURIComponent(v)}}).join('&')};$.fn.serviceDialog=function(options){this.each(function(){var $dialog=$('<div/>'),origin=this,buttons={};$(this).append($dialog).data('serviceDialog',$dialog);if(!options.hideButtons){buttons[tr('OK')]=function(){$dialog.find('form:visible').submit()};buttons[tr('Cancel')]=function(){$dialog.dialog('close');if($dialog.data('ui-dialog')){$dialog.dialog('destroy')}}}
$dialog.dialog({title:options.title,minWidth:options.width?options.width:500,height:(options.fullscreen?$window.height()-20:(options.height?options.height:600)),width:(options.fullscreen?$window.width()-20:null),close:function(){if(options.close){options.close.apply([],this)}
if($(this).data('ui-dialog')){$(this).dialog('destroy').remove()}},buttons:buttons,modal:options.modal,zIndex:options.zIndex});$dialog.loadService(options.data,$.extend(options,{origin:origin}))});return this};$.fn.loadService=function(data,options){var $dialog=this,controller=options.controller,action=options.action,url;this.each(function(){if(!this.reload){this.reload=function(){$(this).loadService(data,options)}}});if(typeof data==="string"){data=parseQuery(data)}
if(data&&data.controller){controller=data.controller}
if(data&&data.action){action=data.action}
if(options.origin&&$(options.origin).is('a')){url=$(options.origin).attr('href')}else if(options.url){url=options.url}else{url=$.service(controller,action)}
$dialog.tikiModal(tr("Loading..."));$.ajax(url,{data:data,error:function(jqxhr){$dialog.html(jqxhr.responseText)},success:function(data){$dialog.html(data);$dialog.find('.ajax').click(function(e){$dialog.loadService(null,{origin:this});return!1});$dialog.find('.service-dialog').click(function(e){if($dialog.data('ui-dialog')){$dialog.dialog('close')}
return!0});$dialog.find('form .submit').hide();$dialog.find('form:not(.no-ajax)').off("submit").submit(ajaxSubmitEventHandler(function(data){data=(data?data:{});if(data.FORWARD){$dialog.loadService(data.FORWARD,options)}else if($dialog.data('ui-dialog')){$dialog.dialog('destroy').remove()}
if(options.success){options.success.apply(options.origin,[data])}}));if(options.load){options.load.apply($dialog[0],[data])}
$('.confirm-prompt',this).requireConfirm({success:function(data){if(data.FORWARD){$dialog.loadService(data.FORWARD,options)}else{$dialog.loadService(options.data,options)}}})},complete:function(){$dialog.tikiModal();if($dialog.find('form').size()==0&&$dialog.data('ui-dialog')){var buttons=$dialog.dialog('option','buttons'),n={};if(buttons[tr('Cancel')]){n[tr('OK')]=buttons[tr('Cancel')];$dialog.dialog('option','buttons',n)}}}})};$.fn.confirmationDialog=function(options){var modal=$('#bootstrap-modal'),modalHeader=modal.find('.modal-header'),modalBody=$('<div class="modal-body"><p></p></div>'),modalFooter=$('<div class="modal-footer"></div>'),modalFooterConfirm=$('<button type="button" class="btn btn-success">'+tr('Confirm')+'</button>'),modalFooterClose=$('<button type="button" class="btn btn-secondary" data-dismiss="modal">'+tr('Close')+'</button>');if(!modalHeader||modalHeader.length===0){modal.find('.modal-content').append('<div class="modal-header"><h4></h4></div>');modalHeader=modal.find('.modal-header')}
if(options.title){modalHeader.find('h4').text(options.title)}else{modalHeader.find('h4').text(tr('Confirmation Modal'))}
if(options.message){modalBody.find('p').text(options.message)}else{modalBody.find('p').text(tr('Please confirm you want to perform this action.'))}
modalFooter.append(modalFooterClose,modalFooterConfirm);modalHeader.after(modalBody);modalBody.after(modalFooter);modal.on('hidden.bs.modal',function(e){if(options.close){options.close()}});modalFooterConfirm.on('click',function(e){modal.modal('hide');if(options.success){options.success()}});modal.modal('show');return this};$.fn.requireConfirm=function(options){this.click(function(e){e.preventDefault();$(this).doConfirm(options);return!1});return this};$.fn.doConfirm=function(options){var message=options.message,link=this;if(!message){message=$(this).data('confirm')}
if(confirm(message)){var $this=$(this);$this.tikiModal(" ");$.ajax($(this).attr('href'),{type:'POST',dataType:'json',data:{'confirm':1},success:function(data){$this.tikiModal();options.success.apply(link,[data])},error:function(jqxhr){$this.tikiModal();$(link).closest('form').showError(jqxhr)}})}};$.fn.showError=function(message){if(message.responseText){if(message.getResponseHeader("Content-Type").indexOf("text/html")===-1){var data=JSON.parse(message.responseText);message=data.message}else{message=$(message.responseText).text()}}else if(typeof message!=='string'){message=""}
this.each(function(){var parts,that=this;if(parts=message.match(/^<!--field\[([^\]]+)\]-->(.*)$/)){field=parts[1];message=parts[2];if(that[field]){that=that[field]}}
var validate=!1,errors={},field,$additional=$('<ul>');if(jqueryTiki.validate){validate=$(that).closest('form').validate()}
if(validate){if(!$(that).attr('name')){$(that).attr('name',$(that).attr('id'))}
if(that!==validate.currentForm){field=$(that).attr('name')}
if(field){errors[field]=message;validate.showErrors(errors)}else{$additional.append($('<li>').text(message))}
setTimeout(function(){$('#tikifeedback li').filter(function(){return $(this).text()===message}).remove();if($('#tikifeedback ul').is(':empty')){$('#tikifeedback').empty()}},100)}else{$additional.append($('<li>').text(message))}
if(!$additional.is(':empty')){$('.ajax-errors',this).remove();$('<div class="ajax-errors alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button></div>').prependTo(this).append($additional)}
$('.form-group').removeClass('has-error').find('label.error:visible').addClass('form-text').prepend('<span class="fas fa-flag"/> ').closest('.form-group').addClass('has-error')});return this};$.fn.clearError=function(){this.each(function(){$(this).closest('form').find('label.error[for="'+$(this).attr('name')+'"]').remove();$(this).closest('form').find('.form-group.has-error').removeClass('has-error')});return this};function sortResult(result){result.sort(function(a,b){var titleA=a.parent_title.toUpperCase();var titleB=b.parent_title.toUpperCase();if(titleA<titleB){return-1}
if(titleA>titleB){return 1}
return 0})}
function parentTitle(result,parent){var title='';$.each(result,function(key,value){if(value.object_id==parent){title=value.title+' > '}});return title}
function loadSelectorData(filter,args,success){if(!$.object_selector_cache){$.object_selector_cache={}}
if($.isFunction(args)){success=args;args={}}
var item,url;url=$.service('search','lookup',$.extend(args,{filter:filter}));if(item=$.object_selector_cache[url]){if(item.data){success(item.data)}else{item.queue.push(success)}}else{item=$.object_selector_cache[url]={data:null,queue:[success]};$.getJSON(url,function(data){item.data=data;$.each(item.queue,function(k,f){f(data)});item.queue=[]})}}
$._object_selector_add_item=function(type,$select,$results,parent_title,item,title,status_icon,selected){var checkname=$select.closest('.object-selector, .object-selector-multi').find('.primary').attr('id')+'_sel';var suffix=$results.find('.form-check').lenght||0;$('<option>').val(item).data('label',title).text(parent_title+''+title.replace(/\n/g," / ")).prop('selected',selected).appendTo($select);$('<div class="form-check"><input type="'+type+'" class="form-check-input" ><label class="form-check-label"></label></div>').find('label').append(status_icon?status_icon+' '+title:title).end().find(':radio, :checkbox').attr('name',checkname).prop('checked',selected).val(item).end().appendTo($results)};$.fn._object_selector_update_results=function(type,result,initial){var $container=this,$results=$container.find('.results'),$select=$container.find('select'),$noresults=$('.no-result',this),selection=[];this.find(':radio:checked, :checkbox:checked').not('.protected').each(function(){selection.push($(this).val())});this.find(':radio:not(:checked), :checkbox:not(:checked)').not('.protected').closest('.form-check').remove();$select.find('option:not(:checked)').not('.protected').remove();$noresults.toggleClass('d-none',selection.length!==0);$.each(result,function(key,value){value.parent_title=parentTitle(result,value.parent_id);result[key]=value});sortResult(result);$.each(result,function(key,value){var current=value.object_type+':'+value.object_id;var selected=!1;if(value.object_id==''){current=value.object_type}
var currentValue=$select.data('current-value');if(currentValue==current){selected=!0}
if(-1===selection.indexOf(current)){if(initial){$._object_selector_add_item(type,$select,$([]),value.parent_title,current,value.title,value.status_icon,selected)}else{$._object_selector_add_item(type,$select,$results,value.parent_title,current,value.title,value.status_icon,selected)}}else{$("option[value='"+current+"']",$select).text(value.title)}});$select.trigger('chosen:updated')};$.fn.object_selector=function(action,value,title){var args=arguments;this.each(function(){var input=this,$simple=$(this).prev(),filter=$(input).data('filters'),threshold=$(input).data('threshold'),format=$(input).data('format')||'',sort=$(input).data('sort')||'score_desc',parentobject=$(input).data('parent'),parentkey=$(input).data('parentkey'),searchField=$(input).data('searchfield')||'title';$(input).addClass('primary').hide();$simple.hide();var $spinner=$(this).parent(),$container=$(input).closest('.object-selector'),$select=$container.find('select').first(),$filter=$container.find(':text.filter').first(),$search=$container.find('input.search').first(),$panel=$container.find('.card').first();if(action==='set'){$select.val(value);if($select.val()!==value&&title){try
{var titleObj=JSON.parse(title);var titleArr=$.map(titleObj,function(el){return el});title=titleArr.join(" / ")}catch(e){}
$._object_selector_add_item('radio',$select,$container.find('.results'),null,value,title,null,!0);$select.trigger('chosen:updated')}
$(input).val(value).data('label',title).change();return}
if(action==='setfilter'){filter[args[1]]=args[2];$(input).data('filters',filter);$container.find('.too-many').hide();$search.click();return}
if(parentobject&&parentkey){filter[parentkey]=$(parentobject).val();$(parentobject).on('change',function(){$(input).data('use-threshold',1).object_selector('setfilter',parentkey,$(this).val())})}
if(threshold!==-1){$spinner.tikiModal(" ");loadSelectorData(filter,{maxRecords:threshold,format:format,sort_order:sort},function(data){$container._object_selector_update_results('radio',data.resultset.result,!0);$spinner.tikiModal();if(data.resultset.count<=threshold){$select.parent().removeClass('d-none')}else{$panel.removeClass('d-none')}})}else{$panel.removeClass('d-none')}
$panel.on('click',':radio',function(){if($(this).is(':checked')){$(input).object_selector('set',$(this).val(),$(this).parent().text())}});$(input).change(function(){var val=$(this).val(),id=null;if(val){var splitarray=val.split(':');id=splitarray[1];if(splitarray.length>2){for(var i=2;i<splitarray.length;i++){id=id+':'+splitarray[i]}}}
if($simple.val()!=id){$simple.val(id).change()}});$simple.change(function(){var target=filter.type+':'+$(this).val();if(filter.type&&$(input).val()!=target){$(input).val(target).change()}});$select.change(function(){if($(input).val()!=$select.val()){$(input).data('label',$select.find('option:selected').text());$(input).val($select.val()).change()}});$search.click(function(){$spinner=$filter.parent().tikiModal(" ");var selectorArgs={format:format,sort_order:sort};if($(input).data('use-threshold')&&threshold!==-1){selectorArgs.maxRecords=threshold;$(input).data('use-threshold',0)}
filter[searchField]=$filter.val();loadSelectorData(filter,selectorArgs,function(data){$container._object_selector_update_results('radio',data.resultset.result,!1);$spinner.tikiModal()})});$filter.keypress(function(e){if(e.which===13){e.preventDefault();$search.click()}})});return this};$.fn.object_selector_multi=function(action){var args=arguments;this.each(function(){var $textarea=$(this).hide().addClass('primary'),$container=$(this).closest('.object-selector-multi'),$select=$container.find('select'),$simpleinput=$textarea.prev(':text').hide(),$basic=$container.find('.basic-selector'),$panel=$container.find('.card'),$search=$container.find('input.search').first(),$filter=$container.find(':text.filter').first(),filter=$textarea.data('filters'),wildcard=$textarea.data('wildcard'),threshold=$textarea.data('threshold'),format=$textarea.data('format')||'',parentobject=$textarea.data('parent'),parentkey=$textarea.data('parentkey'),sort=$textarea.data('sort')||'score_desc',initialValues=$select.val(),separator=$simpleinput.data('separator'),searchField=$textarea.data('searchfield')||'title',extratype=$textarea.data('extratype');if(action==='setfilter'){filter[args[1]]=args[2];$textarea.data('filters',filter);$container.find('.too-many').hide();$search.click();return}
if(parentobject&&parentkey){filter[parentkey]=$(parentobject).val();$(parentobject).on('change',function(){$textarea.data('use-threshold',1).object_selector_multi('setfilter',parentkey,$(this).val())})}
if(threshold!==-1){$container.tikiModal(' ');loadSelectorData(filter,{maxRecords:threshold,format:format,sort_order:sort},function(data){$container.tikiModal('');var results=data.resultset.result;if(extratype){var objectIndex=data.resultset.count;$.each(extratype,function(key,value){results[objectIndex]={"object_type":key,"object_id":"","title":value};objectIndex++})}
$container._object_selector_update_results('checkbox',results,!0);if(data.resultset.count<=threshold){$basic.removeClass('d-none')}else{$panel.removeClass('d-none');$select.addClass("nochosen")}})}else{$panel.removeClass('d-none')}
$filter.keypress(function(e){if(e.which===13){e.preventDefault();$search.click()}});$search.click(function(){var $spinner=$filter.parent().tikiModal(" ");var selectorArgs={format:format,sort_order:sort};if($textarea.data('use-threshold')&&threshold!==-1){selectorArgs.maxRecords=threshold;$textarea.data('use-threshold',0)}
if(wildcard=='y'){filter[searchField]='*'+$filter.val()+'*'}else{filter[searchField]=$filter.val()}
loadSelectorData(filter,selectorArgs,function(data){$container._object_selector_update_results('checkbox',data.resultset.result,!1);$spinner.tikiModal()})});$panel.on('click',':checkbox',function(){var list=$.makeArray($container.find(':checkbox:checked').map(function(){return $(this).val()}));$textarea.val(list.join("\n")).change()});$select.on('change',function(){var list=$(this).val()||[];$textarea.val(list.join("\n")).change()});if(separator){$textarea.on('change',function(){var lines=$(this).val().split("\n"),ids=[];$.each(lines,function(k,line){var parts=line.split(':');if(parts.length===2){ids.push(parts[1])}});$simpleinput.val(ids.join(separator)).change()})}})};$.fn.sortList=function(){var list=$(this),items=list.children('li').get();items.sort(function(a,b){var compA=$(a).text().toUpperCase();var compB=$(b).text().toUpperCase();return(compA<compB)?-1:(compA>compB)?1:0});$.each(items,function(idx,itm){list.append(itm)})};$.localStorage={store:function(key,value){var fullKey=this._build(key);if(window.localStorage){if(value){window.localStorage[fullKey]=$.toJSON({date:Date.now(),data:value})}else{delete window.localStorage[fullKey]}}},load:function(key,callback,fetch,duration){var payload,fullKey=this._build(key);if(window.localStorage&&window.localStorage[fullKey]){payload=JSON.parse(window.localStorage[fullKey]);if(duration){if(payload.date+duration*1000<Date.now()){fetch(function(data){$.localStorage.store(key,data);callback(data)});return}}
callback(payload.data)}else{fetch(function(data){$.localStorage.store(key,data);callback(data)})}},_build:function(key){return key+"_2"}};var favoriteList=[];$.fn.favoriteToggle=function(){this.each(function(){var type,obj,isFavorite,link=this;type=$(this).queryParam('type');obj=$(this).queryParam('object');isFavorite=function(){var ret=!1;$.each(favoriteList,function(k,v){if(v===type+':'+obj){ret=!0;return!1}});return ret};$(this).find('span').remove();$(this).prepend($('<span />').attr({'class':isFavorite()?'fas fa-star fa-fw':'far fa-star fa-fw','title':isFavorite()?tr('Remove from favorites'):tr('Add to favorites')}));if(isFavorite()){$(this).addClass('favorite_selected');$(this).removeClass('favorite_unselected')}else{$(this).addClass('favorite_unselected');$(this).removeClass('favorite_selected')}
$(this).filter(':not(".register")').addClass('register').click(function(){$.post($(this).attr('href'),{target:isFavorite()?0:1},function(data){favoriteList=data.list;$.localStorage.store($(link).data('key'),favoriteList);$(link).favoriteToggle()},'json');return!1})});return this};$.fn.queryParam=function(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)");var results=regex.exec(this[0].href);if(results==null){return""}else{return decodeURIComponent(results[1].replace(/\+/g," "))}};$(function(){var list=$('.favorite-toggle');if(list.length>0){$.localStorage.load(list.data('key'),function(data){favoriteList=data;list.favoriteToggle().removeClass('favorite-toggle')},function(recv){$.getJSON($.service('favorite','list'),recv)},3600)}});$document.ajaxComplete(function(){$('.favorite-toggle').favoriteToggle().removeClass('favorite-toggle')});$document.ajaxError(function(event,jqxhr,settings,thrownError){if(settings.preventGlobalErrorHandle){return}
$(".modal.fade.show").modal("hide");var message;if(!thrownError&&jqxhr.status!==200){if(jqxhr.status){message=jqxhr.status+" "+jqxhr.statusText}else{message="AJAX: "+jqxhr.statusText+" "+jqxhr.status+" ("+jqxhr.state()+") for URL: "+settings.url}}
if(message){$("#tikifeedback").showError(message)}});$.fn.showBusy=function($spinner){if(!$spinner){var pos=$(this).position();$spinner=$("<img src='img/spinner.gif' alt='"+tr("Wait")+"' class='ajax-spinner' />").css({"position":"absolute","top":pos.top+($(this).height()/2),"left":pos.left+($(this).width()/2)-8}).data("target",this);$(this).parent().find(".ajax-spinner").remove();$(this).parent().append($spinner);$(this).attr("disabled",!0).css("opacity",0.5);return $spinner}else{$($spinner.data("target")).attr("disabled",!1).css("opacity",1);$spinner.remove();return null}}
$('.table-responsive:not(.article-types):not(.ts-wrapperdiv)').each(function(){var table=$(this);if(table.find('table:not(.tablesorter) tbody tr').width()-10>table.width()){if(!table.hasClass('large-table-no-wrap'))table.addClass('large-table-no-wrap');if(screen.width<=767){$('<div class="toggle-table-wrap d-md-none"><button type="button" class="btn btn-link fas fa-toggle-off"></button></div>').insertBefore(table);var checkall=!1;table.find('table.table:not(.caltable) th').each(function(e){var header=$(this).html();if($(this).find('div').hasClass('form-check')||($(this).find('input').hasClass('form-check-input')&&e==0)){$(this).addClass('visible-header');header=""}
if($(this).find('input[name=compare]').length){$(this).addClass('visible-header').addClass('compare-pages');header=""}
table.find('table.table tbody tr').each(function(){var cell=$(this).find('td').eq(e);if(checkall)cell.addClass('checkmargin');if($.trim(cell.html())==''){cell.addClass('hidecell')}else{cell.prepend("<div class='header' style='display:none'>"+header+"</div>")}
if(e==0){if((cell.hasClass('checkbox-cell')||cell.find('input:checkbox'))&&cell.find('.header').html()==''){cell.addClass('checkall').removeClass('checkmargin');checkall=!0}}})});table.find('table.caltable > tbody > tr:first > td.heading').each(function(e){var header=$(this).html();table.find('table.caltable > tbody > tr:not(:first)').each(function(){var cell=$(this).find('> td').eq(e);cell.prepend("<div class='header' style='display:none'>"+header+"</div>")})})}}
if(table.find('table').width()-5>table.width()){if(screen.width>767){if(table.find('table td.action').length){table.find('table td.action').each(function(){$(this).parent().prepend($(this).clone())});table.find('table tr').eq(0).prepend('<th style="width:20px;"></th>')}}}});$('.toggle-table-wrap button').each(function(){$(this).on('click',function(){if($(this).hasClass('fa-toggle-on')){$(this).removeClass('fa-toggle-on').addClass('fa-toggle-off');$(this).parent().next().removeClass('large-table').addClass('large-table-no-wrap')}else{$(this).removeClass('fa-toggle-off').addClass('fa-toggle-on');$(this).parent().next().removeClass('large-table-no-wrap').addClass('large-table')}})})})(jQuery);if(window.attachEvent&&!window.addEventListener){window.attachEvent("onunload",function(){for(var id in jQuery.cache){var item=jQuery.cache[id];if(item.handle){if(item.handle.elem===window){for(var type in item.events){if(type!=="unload"){try{jQuery.event.remove(item.handle.elem,type)}catch(e){}}}}else{try{jQuery.event.remove(item.handle.elem)}catch(e){}}}}})}
$.tikiModal=function(msg){return $('body').tikiModal(msg)};$.fn.tikiModal=function(msg){var obj=$(this);if(!obj.length){return null}
var lastModal=obj.data('lastModal');if(!lastModal){lastModal=Math.floor(Math.random()*1000);obj.data('lastModal',lastModal)}
var box={top:obj.offset().top,left:obj.offset().left,height:obj.outerHeight(),width:obj.outerWidth()};var modal=$('body').find('#modal_'+lastModal);var spinner=$('<img src="img/spinner.gif" style="vertical-align: top; margin-right: .5em;" />');if(!msg){modal.fadeOut(function(){$(this).remove()});obj.removeData('lastModal');return obj}
if(modal.length){modal.find('.dialog').empty().html(spinner).append(msg);return obj}
modal=$('<div id="modal_'+lastModal+'" class="tiki-modal">'+'<div class="mask" />'+'<div class="dialog"></div>'+'</div>').appendTo('body');var zIndex=0;if(obj.is("body")){zIndex=2147483646-1;box.top=obj.offset().top+$window.scrollTop();box.left=obj.offset().left+$window.scrollLeft()}else{obj.parents().addBack().each(function(){var z=$(this).css("z-index");if(z&&z!=='auto'&&z>zIndex){zIndex=Number(z)}})}
modal.width(box.width).height(box.height).css('top',box.top+'px').css('left',box.left+'px').find('.mask').height(box.height).fadeTo(1000,0.6).parent().find('.dialog').hide().append(spinner).append(msg);var dialog=modal.find('.dialog');if(obj.is("body")){dialog.css({top:(box.top+$window.innerHeight()/2-$window.scrollTop())+"px",left:(box.left+$window.innerWidth()/2-$window.scrollLeft())+"px"})}
dialog.css({marginTop:(dialog.height()/-2)+"px",marginLeft:(dialog.width()/-2)+"px"}).show();if(zIndex){modal.css("z-index",zIndex+1)}
return obj};$.fn.valWidth=function(){var me=$(this);return me.ready(function(){var h=me.height();if(!h){h=me.offsetParent().css("font-size");if(h){h=parseInt(h.replace("px",""))}}
me.keyup(function(){var width=me.val().length*h;me.stop().animate({width:(width>h?width:h)},200)}).keyup()})};$.paginationHelper=function(){$('.pagenums').each(function(){var me=$(this);var step=me.find('input.pagenumstep');var endOffset=(me.find('input.pagenumend').val()-1)*step.data('step');var url=step.data('url');var offset_jsvar=step.data('offset_jsvar');var offset_arg=step.data('offset_arg');me.find('span.pagenumstep').replaceWith($('<input type="text" style="font-size: inherit; " />').val(step.val()).change(function(){var newOffset=step.data('step')*($(this).val()-1);if(newOffset>=0){newOffset=(newOffset>endOffset?endOffset:newOffset);window[offset_jsvar]=newOffset;if(step[0]){if(step.attr('onclick')){step[0].onclick();return}}
document.location=url+offset_arg+"="+newOffset}}).keyup(function(e){switch(e.which){case 13:$(this).blur()}}).valWidth())})};$.fn.visible=function(fn,isOne){if(fn){$(this).each(function(){var me=$(this);if(isOne){me.one('visible',fn)}else{me.on('visible',fn)}
function visibilityHelper(){if(!me.is(':visible')){setTimeout(visibilityHelper,500)}else{me.trigger('visible')}}
visibilityHelper()})}else{$(this).trigger('visible')}
return this};$.download=function(url,data,method){if(url&&data){data=typeof data=='string'?data:jQuery.param(data);var inputs='';jQuery.each(data.split('&'),function(){var pair=this.split('=');inputs+='<input type="hidden" name="'+pair[0]+'" value="'+pair[1]+'" />'});jQuery('<form action="'+url+'" method="'+(method||'post')+'">'+inputs+'</form>').appendTo('body').submit().remove()}};$.uiIcon=function(type){return $('<div style="width: 1.4em; height: 1.4em; margin: .2em; display: inline-block; cursor: pointer;">'+'<span class="ui-icon ui-icon-'+type+'">&nbsp;</span>'+'</div>').hover(function(){$(this).addClass('ui-state-highlight')},function(){$(this).removeClass('ui-state-highlight')})};$.uiIconButton=function(type){return $.uiIcon(type).addClass('ui-state-default ui-corner-all')};$.rangySupported=function(fn){if(window.rangy){rangy.init();var cssClassApplierModule=rangy.modules.CssClassApplier;return fn()}};$.fn.rangy=function(fn){var me=$(this);$.rangySupported(function(){$document.mouseup(function(e){if(me.data('rangyBusy'))return;var selection=rangy.getSelection();var html=selection.toHtml();var text=selection.toString();if(text.length>3&&rangy.isUnique(me[0],text)){if(fn)
if($.isFunction(fn))
fn({text:text,x:e.pageX,y:e.pageY})}})});return this};$.fn.rangyRestore=function(phrase,fn){var me=$(this);$.rangySupported(function(){phrase=rangy.setPhrase(me[0],phrase);if(fn)
if($.isFunction(fn))
fn(phrase)});return this};$.fn.rangyRestoreSelection=function(phrase,fn){var me=$(this);$.rangySupported(function(){phrase=rangy.setPhraseSelection(me[0],phrase);if(fn)
if($.isFunction(fn))
fn(phrase)});return this};$.fn.realHighlight=function(){var o=$(this);$.rangySupported(function(){rangy.setPhraseBetweenNodes(o.first(),o.last(),document)});return this};$.fn.ajaxEditDraw=function(options){var me=$(this).attr('href','tiki-ajax_services.php');options=$.extend({saved:function(){},closed:function(){}},options);$.tikiModal(tr('Loading editor'));me.serviceDialog({title:me.attr('title'),data:{controller:'draw',action:'edit',fileId:me.data('fileid'),galleryId:me.data('galleryid'),imgParams:me.data('imgparams'),raw:!0},modal:!0,zIndex:9999,fullscreen:!0,load:function(data){if(me.data('drawLoaded'))return!1;me.data('drawLoaded',!0);me.drawing=$('#tiki_draw').loadDraw({fileId:me.data('fileid'),galleryId:me.data('galleryid'),name:me.data('name'),imgParams:me.data('imgparams'),data:$('#fileData').val()}).on('savedDraw',function(e,o){me.data('drawLoaded',!1);me.drawing.parent().dialog('destroy');me.drawing.remove();var img=$('.pluginImg'+me.data('fileid')).show();if(img.length<1)document.location=document.location+'';var w=img.width(),h=img.height();if(img.hasClass('regImage')){var replacement=$('<div />').attr('class',img.attr('class')).attr('style',img.attr('style')).attr('id',img.attr('id')).insertAfter(img);img.remove();img=replacement}
var src=me.data('src');$('<div class=\"svgImage\" />').load(src?src:'tiki-download_file.php?fileId='+o.fileId+'&display',function(){$(this).css('position','absolute').fadeTo(0,0.01).prependTo('body').find('img,svg').scaleImg({width:w,height:h});img.html($(this).children());$(this).remove()});if(!options.saved)return;options.saved(o.fileId);me.data('fileid',o.fileId);if(o.imgParams&&o.imgParams.fileId){o.imgParams.fileId=o.fileId;me.data('imgparams',o.imgParams)}}).submit(function(){me.drawing.saveDraw();return!1}).on('loadedDraw',function(){me.drawing.parent().css('padding','0px');var serviceDialog=me.data('serviceDialog');if(serviceDialog){var drawFrame=$('#svgedit');serviceDialog.on('dialogresize',function(){drawFrame.height(serviceDialog.height()-4)}).trigger('dialogresize')}
$.tikiModal()});me.drawing.find('#drawMenu').remove()},close:function(){if(me.data('drawLoaded')){me.data('drawLoaded',!1);me.drawing.remove();if(!options.closed)return;options.closed(me)}}});return!1};$.notify=function(msg,settings){settings=$.extend({speed:10000},settings);var notify=$('#notify');if(!notify.length){notify=$('<div id="notify" />').css('top','5px').css('right','5px').css('position','fixed').css('z-index',9999999).css('padding','5px').width($window.width()/5).prependTo('body')}
var note=$('<div class="notify ui-state-error ui-corner-all ui-widget ui-widget-content" />').append(msg).css('padding','5px').css('margin','5px').mousedown(function(){return!1}).hover(function(){$(this).stop().fadeTo(500,0.3)},function(){$(this).stop().fadeTo(500,1)}).prependTo(notify);setTimeout(function(){note.fadeOut().slideUp();setTimeout(function(){note.remove()},1000)},settings.speed)};function delayedExecutor(delay,callback){var timeout;return function(){var args=arguments;if(timeout){clearTimeout(timeout);timeout=null}
timeout=setTimeout(function(){callback.apply(this,args)},delay)}}
$(function(){$(".toggle_zone").click(function(){var $this=$(this),zone="",icon_left="toggle-left",icon_right="toggle-right";if($this.is(".right")){zone="right";icon_left="toggle-right";icon_right="toggle-left"}else if($this.is(".left")){zone="left"}
if($this.find(".icon-"+icon_left).length){$this.find(".icon").setIcon(icon_right);setCookie("hide_zone_"+zone,'y');$("body").addClass("hide_zone_"+zone)}else{$this.find(".icon").setIcon(icon_left);deleteCookie("hide_zone_"+zone);$("body").removeClass("hide_zone_"+zone)}
$(window).trigger("resize");return!1})});$.fn.moveToWithinWindow=function(){var $el=$(this);var h=$el.height(),w=$el.width(),o=$el.offset(),po=$el.parent().offset(),st=$window.scrollTop(),sl=$window.scrollLeft(),wh=$window.height(),ww=$window.width();if(w+o.left>sl+ww){$el.animate({'left':sl+ww-w-po.left},'fast')}
if(h+o.top>st+wh){$el.animate({'top':st+wh-(h>wh?wh:h)-po.top},'fast')}else if(o.top<st){$el.animate({'top':st-po.top},'fast')}};$.fn.scaleImg=function(max){$(this).each(function(){var h,w,img=$(this),actual={height:img.height(),width:img.width()},original=$(this).clone(),parent=img.parent();var winner='';if(actual.height>max.height){winner='height'}else if(actual.width>max.width){winner='width'}
if(winner){var g=img.find('g');if(g.length){img.attr('preserveAspectRatio','xMinYMin meet');parent.css('overflow','hidden').width(max.width).height(max.height);g.attr('transform','scale( '+(100/(actual[winner]/max[winner])*0.01)+' )')}else{if(actual.height>actual.width){h=max.height;w=Math.ceil(actual.width/actual.height*max.height)}else{w=max.width;h=Math.ceil(actual.height/actual.width*max.width)}
img.css({height:h,width:w})}
img.css('cursor',"url(img/icons/zoom.gif),auto").click(function(){$('<div/>').append(original).dialog({modal:!0,width:Math.min($(window).width(),actual.width+20),height:Math.min($(window).height(),actual.height+50)});return!1})}});return this};$.curCSS=function(element,property){return $(element).css(property)};$.fn.registerFacet=function(){this.each(function(){var element=this,entries=$($(this).data('for')).val().split(" "+$(this).data('join')+" ").map(function(value){return(value.charAt(0)==='"')?value.substr(1,value.length-2):value});function applyFilter(value){if(value){value=$.makeArray(value);value=value.map(function(value){return(-1===value.indexOf(' '))?value:('"'+value+'"')}).join(" "+$(element).data('join')+" ")}
$($(element).data('for')).val(value).change()}
if($(element).is('select')){$(this).val(entries).trigger("chosen:updated").change(function(){var value=$(this).val();applyFilter(value)})}else if($(element).has(':checkbox').length){$(':checkbox',element).each(function(){if(-1!==$.inArray($(this).val(),entries)){$(this).prop('checked',!0)}}).on('click',function(){applyFilter($(':checked',element).map(function(){return $(this).val()}))})}
var selected=$('option:selected, :checkbox:checked',this).length,all=$('option, :checkbox',this).length;if(all===1&&selected===0){$(this).closest('.facet-hide-group').hide()}});return this};$.fn.reload=function(){this.each(function(){if(this.reload){this.reload()}else if($(this).data('reload')){$(this).loadService({},{url:$(this).data('reload')})}});return this};$(document).on('mouseover','.media[data-href]',function(){$(this).css('cursor','pointer')});$(document).on('mouseout','.media[data-href]',function(){$(this).css('cursor','default')});$(document).on('click','.media[data-href]',function(){document.location.href=$(this).data('href')});$(document).on('hidden.bs.modal','.footer-modal.fade',function(){$(this).removeData('bs.modal').find('.modal-content').empty();$('body').toggleClass('modal-open',$('.modal.fade.show').length>0);$(".modal-backdrop.show:first").remove()});$(document).on('submit','.modal-body form:not(.no-ajax)',ajaxSubmitEventHandler(function(data){if(data&&data.FORWARD){var $this=$(this);if($this.is("form")){$this=$this.parent()}
$this.children().remove();$this.loadService(data.FORWARD,{origin:this,load:function(){$(this).closest('.modal').trigger('tiki.modal.redraw')}})}else{document.location.href=document.location.href.replace(/#.*$/,"")}}));$(document).on('click','[data-toggle=modal][data-size]',function(){var target=$(this).data('target'),size=$(this).data('size');$(target).one('hidden.bs.modal',function(){$('.modal-dialog',this).removeClass(size)}).find('.modal-dialog').addClass(size)});$(document).on('click','[data-toggle=modal][data-modal-title]',function(){var target=$(this).data('target'),title=$(this).data('modal-title');$(target).one('loaded.bs.modal',function(){$('.modal-title',this).text(title)})});$(document).on('loaded.bs.modal','.modal.fade',function(){$(this).trigger('tiki.modal.redraw')});$(document).on('shown.bs.modal','.modal',function(event){var $button=$(event.relatedTarget);var remote=$button.data('remote');var $modal=$(this);var href=remote?remote:$button.attr("href");if(href){$modal.find('.modal-content').load(href,function(){$(this).trigger("tiki.modal.redraw")})}else{$modal.trigger("tiki.modal.redraw")}});$(document).on('tiki.modal.redraw','.modal.fade',function(){var modal=this,$button;$('.modal-footer .auto-btn',modal).remove();$('div.submit .btn',modal).each(function(){var $submit=$(this);if($submit.is('a:not(.custom-handling)')){$button=$submit}else{$submit.hide();$button=$('<button>').text($submit.val()||$submit.text()).attr('class',$submit.attr('class')).addClass('auto-btn').click(function(){if($submit.data("alt_controller")&&$submit.data("alt_action")){$submit.parents("form").attr("action",$.service($submit.data("alt_controller"),$submit.data("alt_action")))}
$submit.click();if(typeof $submit.parents("form").validate!=="function"){$button.off("click").css("opacity",0.3)}})}
$('.modal-footer',modal).append($button)});if($.fn.flexibleSyntaxHighlighter){$('textarea',modal).flexibleSyntaxHighlighter()}
$(".nav-tabs",this).each(function(){if($(".active",this).length===0){$("li:first-child a",this).tab("show")}});if($.applyChosen){$(this).applyChosen()}
if(jqueryTiki.colorbox){$(this).applyColorbox()}
if(jqueryTiki.tooltips){$(this).tiki_popover()}
$('.modal-body :input',modal).first().focus();$('.modal-backdrop.show:not(.fade)').remove();if($("#timer-seconds",modal).length){var $seconds=$("#timer-seconds"),counter=$seconds.text(),timer=setInterval(function(){$seconds.text(--counter);if(counter===0||counter<0){$.closeModal();window.location=window.location.href}},1000)}});$(document).on("ready tiki.modal.redraw",function(){$(".depends").each(function(){var $depends=$(this),on=$depends.data("on");$("[name="+on+"]").change(function(){if($(this).is("input[type=checkbox]")&&$(this).is(":checked")){$depends.show()}else{$depends.hide()}}).change()})});$(function(){var $tabs=$('a[data-toggle=tab][href="'+document.location.hash+'"]'),tabShown=!1,notShown=[];if(document.location.search.match(/cookietab=/)){tabShown=!0}else if(document.location.hash&&$tabs.length){$tabs.tab('show');tabShown=!0}else{$(".tabs").each(function(){var name=$(this).data("name"),t=getCookie(name,"tabs","notfound");var $tab=$('a[data-toggle=tab].active',this);if(t&&$tab.length===0){$tab=$('a[data-toggle=tab][href="'+t+'"]')}
if($tab.length){$tab.tab('show');tabShown=!0}else if(name){notShown.push(name)}})}
if(typeof $().tab==="function"){if(!tabShown&&!notShown.length){$("a[data-toggle=tab]:first").tab("show")}else if(notShown.length){for(var i=0;i<notShown.length;i++){$(".tabs[data-name="+notShown[i]+"] a[data-toggle=tab]:first").tab("show")}}}
$('a[data-toggle="tab"]').on('show.bs.tab',function(e){if($(this).parents(".tab-content").length===0){document.location.hash=$(e.target).attr("href")}
setCookieBrowser($(this).parents(".tabs:first").data("name"),$(e.target).attr("href"),"tabs")}).click(function(){var scroll=$window.scrollTop();$(this).tab('show');$window.scrollTop(scroll)});$("input[name='session_protected']").on('click',function(){if($(this).prop('type')=='checkbox'&&$(this).data('tiki-admin-child-block')=='#session_protected_childcontainer'){var checkbox=$("input[name='session_protected']");if(checkbox.prop('checked')&&location.protocol!='https:'){$(this).confirmationDialog({title:tr('Warning - Protect all sessions with HTTPS'),message:tr('You seem to be accessing the website using HTTP only, if your HTTPS settings are not correct, you will be locked out of the website'),success:function(){checkbox.prop('checked',!0)}});return!1}}})});$.openModal=function(options){var href=options.remote;if(-1===href.indexOf('?')){href+='?modal=1'}else{href+='&modal=1'}
$('.modal.fade:not(.show):first').one('hidden.bs.modal',options.close||function(){}).find(".modal-content").load(href,function(){var $modal=$(this).parents(".modal");$modal.modal(options);if($modal.is(':visible')){$modal.trigger("tiki.modal.redraw")}else{$modal.modal("show")}
$('.modal-title',this).text(options.title);if(options.size){$modal.find('.modal-dialog').addClass(options.size);$modal.one('hidden.bs.modal',function(){$('.modal-dialog',this).removeClass(options.size)})}
if(options.open){options.open.apply(this)}})};$.closeModal=function(options){options=options||{};var done=options.done;if(done){done=function(){setTimeout(options.done,0)}}
$('.modal.fade.show').last().one('hidden.bs.modal',done||function(){}).modal('hide')};$.fn.clickModal=function(options,href){this.click($.clickModal(options,href));return this};$.clickModal=function(options,href){return function(e){var control=this,url;if(!href){url=$(this).attr('href')}else{url=href}
if($.isFunction(e.preventDefault)){e.preventDefault()}
$.openModal({title:options.title,size:options.size,remote:url,backdrop:(typeof options.backdrop==="undefined")?!0:options.backdrop,keyboard:(typeof options.keyboard==="undefined")?!0:options.keyboard,focus:(typeof options.focus==="undefined")?!0:options.focus,show:(typeof options.show==="undefined")?!0:options.show,open:function(){if(options.open){options.open.apply(this,[])}
$('form:not(.no-ajax)',this).addClass('no-ajax').submit(ajaxSubmitEventHandler(function(data){if(options.success){options.success.apply(control,[data])}}))}})}};function showTab(tabNumber){var thisTabId=$('#col1').find('.tab-pane.active').attr('id'),tabNames=thisTabId.substr(0,thisTabId.indexOf('-')+1);$('a[href="#'+tabNames+tabNumber+'"]').tab('show')}
function feedback(mes,type,modal,title,icon,killall,custom){mes=mes||[];if(!$.isArray(mes)){mes=[mes]}
if(mes.length==1){var meshtml=[mes][0]}else{var meshtml='<ul>';$.each(mes,function(i,val){if(val){meshtml+='<li>'+val+'</li>'}});meshtml+='</ul>'}
type=type||'info';modal=modal||!1;killall=killall||!1;custom=$(custom).length?$(custom).first():null;var target,map={'error':{title:tr('Error'),class:'danger',icon:'error'},'warning':{title:tr('Warning'),class:'warning',icon:'warning'},'success':{title:tr('Success'),class:'success',icon:'success'},'info':{title:tr('Note'),class:'info',icon:'information'}};var check=['error','warning','success','info'];type=$.inArray(type,check)>-1?type:'info';title=title||map[type].title;icon=icon||map[type].icon;icon=$.fn.getIcon(icon);if(modal){if(mes.length>0){meshtml='<div class="alert alert-dismissable alert-'+map[type]['class']+'">'+meshtml+'</div>'}else{meshtml=''}
target=$('.modal.fade:not(.show)').first();$('.modal-content',target).html('<div class="modal-header">'+'<h4 class="text-'+map[type]['class']+'">'+icon[0].outerHTML+' '+title+'</h4>'+'<button type="button" class="close pull-right" data-dismiss="modal">x</button>'+'</div>'+'<div class="modal-body">'+meshtml+'</div>');target.modal()}else{var tfb=$(custom?custom:'div#tikifeedback');if(killall){tfb.find('div.alert.alert-dismissable').remove()}
if(mes.length==0){meshtml=''}
tfb.append('<div class="alert alert-dismissable alert-'+map[type]['class']+'">'+'<button type="button" class="close" data-dismiss="modal">x</button>'+'<h4>'+icon[0].outerHTML+' '+title+'</h4>'+meshtml+'</div>').on('click','button.close',function(){$(this).parent().remove()});placeFeedback(tfb)}}
function placeFeedback(object){if($('.modal.fade.show').length){$('#col1, #col2, #col3').css('z-index','auto');object.css('z-index',3000);object.find('div').css('z-index',3000)}
if(object.offset().top<$(window).scrollTop()){object.find('div.alert').append('<div id="move-message" style="font-size:smaller;margin-top:10px"><em>'+tr('This message will move to the top of the page after a few seconds.')+'</em>');object.offset({'top':$(window).scrollTop()});object.css('z-index',3000);setTimeout(function(){object.fadeOut(1000,function(){$('div#col1').prepend(object);object.css({'z-index':'','position':'','top':''});object.find('div#move-message').css('visibility','hidden');object.fadeIn()})},5000)}}
$.fn.closestDescendent=function(filter){var $found=$(),$currentSet=this;while($currentSet.length){$found=$currentSet.filter(filter);if($found.length)break;$currentSet=$currentSet.children()}
return $found.first()};window.regCapsLock=function(){};$.ajaxPrefilter(function(options,originalOptions,jqXHR){if(options.dataType=='script'||originalOptions.dataType=='script'){options.cache=!0}});function readURL(input){if(input.files&&input.files[0]){$(".btn-upload-avatar").removeClass('disabled');var reader=new FileReader();reader.onload=function(e){$('.user-avatar-preview img').attr('src',e.target.result)}
reader.readAsDataURL(input.files[0])}}
$(document).on('change','#userfile',function(){readURL(this)});function objectLockToggle(icon){var $this=$(icon).tikiModal(" "),action=$this.data("is_locked")?"unlock":"lock";$.post($.service("object",action,{type:$this.data("type"),object:$this.data("object"),value:$this.data("is_locked")?"":jqueryTiki.username}),function(data){if(data&&data.locked){$this.find(".icon").setIcon("lock");$this.data("is_locked","1").attr("title",tr("Locked by "+jqueryTiki.userRealName)).parent().find("input[name=locked]").val(jqueryTiki.username)}else{$this.find(".icon").setIcon("unlock");$this.data("is_locked","").attr("title","").parent().find("input[name=locked]").val("")}},"json").done(function(){$this.tikiModal()});return!1}(function setup_removediacritics_function(){var characterEquivalents={'a':'\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5','A':'\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5','c':'\u00e7\u0107\u010d','C':'\u00c7\u0106\u010c','e':'\u00e9\u00e8\u00ea\u00eb\u011b\u0119','E':'\u00c9\u00c8\u00ca\u00cb\u011a\u0118','i':'\u00ed\u00ec\u0130\u00ee\u00ef\u0131','I':'\u00cd\u00cc\u0130\u00ce\u00cf','o':'\u00f3\u00f2\u00f4\u00f5\u00f6\u014d','O':'\u00d3\u00d2\u00d4\u00d5\u00d6\u014c','ss':'\u00df','SS':'\u1e9e','u':'\u00fa\u00f9\u00fb\u00fc\u016f','U':'\u00da\u00d9\u00db\u00dc\u016e'};var characterRegex,characterRegexArray;function removeDiacritics(str){var chr,acc='[',eq=characterEquivalents;if(!characterRegex){characterRegexArray={};for(chr in eq){if(typeof chr==='string'){acc+=eq[chr];characterRegexArray[chr]=new RegExp('['+eq[chr]+']','g')}}
characterRegex=new RegExp(acc+']')}
if(characterRegex.test(str)){for(chr in eq){if(typeof chr==='string'){str=str.replace(characterRegexArray[chr],chr)}}}
return str}
window.removeDiacritics=removeDiacritics})();$(document).ajaxComplete(function(e,jqxhr){var feedback=jqxhr.getResponseHeader('X-Tiki-Feedback'),tfb=$('#tikifeedback');if(feedback){feedback=decodeURIComponent(feedback);tfb.fadeIn(200,function(){tfb.html($($.parseHTML(feedback)).filter('#tikifeedback').html());tfb.find('div.alert').each(function(){var title=$(this).find('span.rboxtitle').text().trim(),content=$(this).find('div.rboxcontent').text().trim();$(this).find('span.rboxtitle').text(title);$(this).find('div.rboxcontent').text(content)});placeFeedback(tfb)})}
tfb.find('.clear').on('click',function(){$(tfb).empty();$('div#col1').prepend(tfb);tfb.css({'z-index':'','position':'','top':''});return!0})});$(document).on('keydown','textarea.autoheight',function(evt){var el=this;var height=Math.max(el.clientHeight,el.offsetHeight,el.scrollHeight);el.style.cssText='height:'+height+'px; overflow-y: hidden';setTimeout(function(){el.scrollTo(0,0)},0)});$(document).on('change','.preference :checkbox:not(.pref-reset)',function(){var childBlock=$(this).data('tiki-admin-child-block'),childMode=$(this).data('tiki-admin-child-mode'),checked=$(this).is(':checked'),disabled=$(this).prop('disabled'),$depedencies=$(this).parents(".adminoption").find(".pref_dependency"),childrenElements=null;var childrenElements=$(this).parents('.adminoptionbox').nextAll('.adminoptionboxchild').eq(0).find(':input[id^="pref-"]');if(childBlock){childrenElements=$(childBlock).find(':input[id^="pref-"]')}
if(childMode==='invert'){checked=!checked}
if(disabled&&checked){$(childBlock).show('fast');$depedencies.show('fast')}else if(disabled||!checked){var hideBlock=!0;childrenElements.each(function(index){var value=$(this).val();var valueDefault=$(this).siblings('span.pref-reset-wrapper').children('.pref-reset').attr('data-preference-default');if(typeof valueDefault!='undefined'&&value!=valueDefault){hideBlock=!1}});if(hideBlock){$(childBlock).hide('fast');$depedencies.hide('fast')}}else{$(childBlock).show('fast');$depedencies.show('fast')}});$(document).on('click','.pref-reset-wrapper a',function(){var box=$(this).closest('span').find(':checkbox');box.click();$(this).closest('span').children(".pref-reset-undo, .pref-reset-redo").toggle();return!1});$(document).on('click','.pref-reset',function(){var c=$(this).prop('checked');var $el=$(this).closest('.adminoptionbox').find('input:not(:hidden),select,textarea').not('.system').attr('disabled',c).css("opacity",c?.6:1);var defval=$(this).data('preference-default');if($el.is(':checkbox')){$(this).data('preference-default',$el.prop('checked')?'y':'n');$el.prop('checked',defval==="y")}else{$(this).data('preference-default',$el.val());$el.val(defval)}
$el.change();if(jqueryTiki.chosen){$el.trigger("chosen:updated")}});$(document).on('change','.preference select',function(){var childBlock=$(this).data('tiki-admin-child-block'),selected=$(this).val(),childMode=$(this).data('tiki-admin-child-mode');$(childBlock).hide();$(childBlock+' .modified').show();$(childBlock+' .modified').parent().show();if(selected&&/^[\w-]+$/.test(selected)){$(childBlock).filter('.'+selected).show()}
if(childMode==='notempty'&&selected.length){$(childBlock).show()}});$(document).on('change','.preference :radio',function(){var childBlock=$(this).data('tiki-admin-child-block');if($(this).prop('checked')){$(childBlock).show('fast');$(this).closest('.preference').find(':radio').not(this).change()}else{$(childBlock).hide()}});$(function(){$('.preference :checkbox, .preference select, .preference :radio').change()});
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/jquery-json/src/jquery.json.js */
/**
 * jQuery JSON plugin v2.5.1
 * https://github.com/Krinkle/jquery-json
 *
 * @author Brantley Harris, 2009-2011
 * @author Timo Tijhof, 2011-2014
 * @source This plugin is heavily influenced by MochiKit's serializeJSON, which is
 *         copyrighted 2005 by Bob Ippolito.
 * @source Brantley Harris wrote this plugin. It is based somewhat on the JSON.org
 *         website's http://www.json.org/json2.js, which proclaims:
 *         "NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.", a sentiment that
 *         I uphold.
 * @license MIT License <http://opensource.org/licenses/MIT>
 */
(function($){'use strict';var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},hasOwn=Object.prototype.hasOwnProperty;$.toJSON=typeof JSON==='object'&&JSON.stringify?JSON.stringify:function(o){if(o===null){return'null'}
var pairs,k,name,val,type=$.type(o);if(type==='undefined'){return undefined}
if(type==='number'||type==='boolean'){return String(o)}
if(type==='string'){return $.quoteString(o)}
if(typeof o.toJSON==='function'){return $.toJSON(o.toJSON())}
if(type==='date'){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month='0'+month}
if(day<10){day='0'+day}
if(hours<10){hours='0'+hours}
if(minutes<10){minutes='0'+minutes}
if(seconds<10){seconds='0'+seconds}
if(milli<100){milli='0'+milli}
if(milli<10){milli='0'+milli}
return'"'+year+'-'+month+'-'+day+'T'+hours+':'+minutes+':'+seconds+'.'+milli+'Z"'}
pairs=[];if($.isArray(o)){for(k=0;k<o.length;k++){pairs.push($.toJSON(o[k])||'null')}
return'['+pairs.join(',')+']'}
if(typeof o==='object'){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==='number'){name='"'+k+'"'}else if(type==='string'){name=$.quoteString(k)}else{continue}
type=typeof o[k];if(type!=='function'&&type!=='undefined'){val=$.toJSON(o[k]);pairs.push(name+':'+val)}}}
return'{'+pairs.join(',')+'}'}};$.evalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(str){return eval('('+str+')')};$.secureEvalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered)){return eval('('+str+')')}
throw new SyntaxError('Error parsing JSON, source is not valid.')};$.quoteString=function(str){if(str.match(escape)){return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==='string'){return c}
c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}
return'"'+str+'"'}}(jQuery));
/* rank:50standard - minify:ok. vendor_bundled/vendor/codemirror/codemirror/addon/search/searchcursor.js */
(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var Pos=CodeMirror.Pos;function SearchCursor(doc,query,pos,caseFold){this.atOccurrence=!1;this.doc=doc;if(caseFold==null&&typeof query=="string")caseFold=!1;pos=pos?doc.clipPos(pos):Pos(0,0);this.pos={from:pos,to:pos};if(typeof query!="string"){if(!query.global)query=new RegExp(query.source,query.ignoreCase?"ig":"g");this.matches=function(reverse,pos){if(reverse){query.lastIndex=0;var line=doc.getLine(pos.line).slice(0,pos.ch),cutOff=0,match,start;for(;;){query.lastIndex=cutOff;var newMatch=query.exec(line);if(!newMatch)break;match=newMatch;start=match.index;cutOff=match.index+(match[0].length||1);if(cutOff==line.length)break}
var matchLen=(match&&match[0].length)||0;if(!matchLen){if(start==0&&line.length==0){match=undefined}else if(start!=doc.getLine(pos.line).length){matchLen++}}}else{query.lastIndex=pos.ch;var line=doc.getLine(pos.line),match=query.exec(line);var matchLen=(match&&match[0].length)||0;var start=match&&match.index;if(start+matchLen!=line.length&&!matchLen)matchLen=1}
if(match&&matchLen)
return{from:Pos(pos.line,start),to:Pos(pos.line,start+matchLen),match:match}}}else{var origQuery=query;if(caseFold)query=query.toLowerCase();var fold=caseFold?function(str){return str.toLowerCase()}:function(str){return str};var target=query.split("\n");if(target.length==1){if(!query.length){this.matches=function(){}}else{this.matches=function(reverse,pos){if(reverse){var orig=doc.getLine(pos.line).slice(0,pos.ch),line=fold(orig);var match=line.lastIndexOf(query);if(match>-1){match=adjustPos(orig,line,match);return{from:Pos(pos.line,match),to:Pos(pos.line,match+origQuery.length)}}}else{var orig=doc.getLine(pos.line).slice(pos.ch),line=fold(orig);var match=line.indexOf(query);if(match>-1){match=adjustPos(orig,line,match)+pos.ch;return{from:Pos(pos.line,match),to:Pos(pos.line,match+origQuery.length)}}}}}}else{var origTarget=origQuery.split("\n");this.matches=function(reverse,pos){var last=target.length-1;if(reverse){if(pos.line-(target.length-1)<doc.firstLine())return;if(fold(doc.getLine(pos.line).slice(0,origTarget[last].length))!=target[target.length-1])return;var to=Pos(pos.line,origTarget[last].length);for(var ln=pos.line-1,i=last-1;i>=1;--i,--ln)
if(target[i]!=fold(doc.getLine(ln)))return;var line=doc.getLine(ln),cut=line.length-origTarget[0].length;if(fold(line.slice(cut))!=target[0])return;return{from:Pos(ln,cut),to:to}}else{if(pos.line+(target.length-1)>doc.lastLine())return;var line=doc.getLine(pos.line),cut=line.length-origTarget[0].length;if(fold(line.slice(cut))!=target[0])return;var from=Pos(pos.line,cut);for(var ln=pos.line+1,i=1;i<last;++i,++ln)
if(target[i]!=fold(doc.getLine(ln)))return;if(fold(doc.getLine(ln).slice(0,origTarget[last].length))!=target[last])return;return{from:from,to:Pos(ln,origTarget[last].length)}}}}}}
SearchCursor.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(reverse){var self=this,pos=this.doc.clipPos(reverse?this.pos.from:this.pos.to);function savePosAndFail(line){var pos=Pos(line,0);self.pos={from:pos,to:pos};self.atOccurrence=!1;return!1}
for(;;){if(this.pos=this.matches(reverse,pos)){this.atOccurrence=!0;return this.pos.match||!0}
if(reverse){if(!pos.line)return savePosAndFail(0);pos=Pos(pos.line-1,this.doc.getLine(pos.line-1).length)}else{var maxLine=this.doc.lineCount();if(pos.line==maxLine-1)return savePosAndFail(maxLine);pos=Pos(pos.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(newText,origin){if(!this.atOccurrence)return;var lines=CodeMirror.splitLines(newText);this.doc.replaceRange(lines,this.pos.from,this.pos.to,origin);this.pos.to=Pos(this.pos.from.line+lines.length-1,lines[lines.length-1].length+(lines.length==1?this.pos.from.ch:0))}};function adjustPos(orig,folded,pos){if(orig.length==folded.length)return pos;for(var pos1=Math.min(pos,orig.length);;){var len1=orig.slice(0,pos1).toLowerCase().length;if(len1<pos)++pos1;else if(len1>pos)--pos1;else return pos1}}
CodeMirror.defineExtension("getSearchCursor",function(query,pos,caseFold){return new SearchCursor(this.doc,query,pos,caseFold)});CodeMirror.defineDocExtension("getSearchCursor",function(query,pos,caseFold){return new SearchCursor(this,query,pos,caseFold)});CodeMirror.defineExtension("selectMatches",function(query,caseFold){var ranges=[];var cur=this.getSearchCursor(query,this.getCursor("from"),caseFold);while(cur.findNext()){if(CodeMirror.cmpPos(cur.to(),this.getCursor("to"))>0)break;ranges.push({anchor:cur.from(),head:cur.to()})}
if(ranges.length)
this.setSelections(ranges,0)})});
/* rank:50standard - minify:ok. vendor_bundled/vendor/codemirror/codemirror/addon/mode/overlay.js */
(function(mod){if(typeof exports=="object"&&typeof module=="object")
mod(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)
define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.overlayMode=function(base,overlay,combine){return{startState:function(){return{base:CodeMirror.startState(base),overlay:CodeMirror.startState(overlay),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(state){return{base:CodeMirror.copyState(base,state.base),overlay:CodeMirror.copyState(overlay,state.overlay),basePos:state.basePos,baseCur:null,overlayPos:state.overlayPos,overlayCur:null}},token:function(stream,state){if(stream!=state.streamSeen||Math.min(state.basePos,state.overlayPos)<stream.start){state.streamSeen=stream;state.basePos=state.overlayPos=stream.start}
if(stream.start==state.basePos){state.baseCur=base.token(stream,state.base);state.basePos=stream.pos}
if(stream.start==state.overlayPos){stream.pos=stream.start;state.overlayCur=overlay.token(stream,state.overlay);state.overlayPos=stream.pos}
stream.pos=Math.min(state.basePos,state.overlayPos);if(state.overlayCur==null)return state.baseCur;else if(state.baseCur!=null&&state.overlay.combineTokens||combine&&state.overlay.combineTokens==null)
return state.baseCur+" "+state.overlayCur;else return state.overlayCur},indent:base.indent&&function(state,textAfter){return base.indent(state.base,textAfter)},electricChars:base.electricChars,innerMode:function(state){return{state:state.base,mode:base}},blankLine:function(state){if(base.blankLine)base.blankLine(state.base);if(overlay.blankLine)overlay.blankLine(state.overlay)}}}});
/* rank:50standard - minify:ok. lib/codemirror_tiki/codemirror_tiki.js */
jQuery.fn.extend({flexibleSyntaxHighlighter:function(s){if($(this).length===0){return this}
s=jQuery.extend({mode:"tiki",lineNumbers:!1,lineWrapping:!0,readOnly:!1,force:!1,theme:window.codeMirrorTheme||'default'},s);if($.isEmptyObject(syntaxHighlighter.modes)){syntaxHighlighter.modes=$.extend(syntaxHighlighter.modes,CodeMirror.modes)}
var geshiColors={'4cs':'','6502acme':'','6502kickass':'','6502tasm':'','68000devpac':'','abap':'','actionscript3':'','actionscript':'','ada':'','algol68':'','apache':'','applescript':'','apt_sources':'','asm':'','asp':'vbscript','autoconf':'','autohotkey':'','autoit':'','avisynth':'','awk':'','bash':'shell','basic4gl':'','bf':'','bibtex':'','blitzbasic':'','bnf':'','boo':'','caddcl':'','cadlisp':'','cfdg':'','cfm':'','chaiscript':'','cil':'','clojure':'clojure','c_mac':'','cmake':'','cobol':'','c':'clike','cpp':'clike','cpp-qt':'clike','csharp':'clike','css':'css','cuesheet':'','dcs':'','delphi':'','diff':'diff','div':'','dos':'','dot':'','d':'','ecmascript':'','eiffel':'','email':'','e':'','erlang':'','f1':'','fo':'','fortran':'','freebasic':'','fsharp':'','gambas':'','gdb':'','genero':'','genie':'','gettext':'','glsl':'','gml':'','gnuplot':'','go':'go','groovy':'groovy','gwbasic':'','haskell':'haskell','hicest':'','hq9plus':'','html4strict':'htmlmixed','icon':'','idl':'','ini':'','inno':'','intercal':'','io':'','java5':'clike','java':'clike','javascript':'javascript','j':'','jquery':'javascript','kixtart':'','klonec':'','klonecpp':'','latex':'','lb':'','lisp':'','locobasic':'','logtalk':'','lolcode':'','lotusformulas':'','lotusscript':'','lscript':'','lsl2':'','lua':'lua','m68k':'','magiksf':'','make':'','mapbasic':'','matlab':'','mirc':'','mmix':'','modula2':'','modula3':'','mpasm':'','mxml':'xml','mysql':'sql','newlisp':'','nsis':'','oberon2':'','objc':'clike','objeck':'','ocaml-brief':'','ocaml':'','oobas':'','oracle11':'','oracle8':'','oxygene':'','oz':'','pascal':'pascal','pcre':'','perl6':'perl','perl':'perl','per':'','pf':'','php-brief':'php','php':'php','pic16':'','pike':'','pixelbender':'','plsql':'plsql','postgresql':'plsql','povray':'','powerbuilder':'','powershell':'','progress':'','prolog':'','properties':'properties','providex':'','purebasic':'','python':'python','qbasic':'vbscript','q':'','rails':'','rebol':'','reg':'','robots':'','rpmspec':'','rsplus':'r','ruby':'ruby','sas':'','scala':'','scheme':'','scilab':'','sdlbasic':'','smalltalk':'smalltalk','smarty':'smarty','systemverilog':'','tcl':'','teraterm':'','text':'','thinbasic':'','tsql':'sql','typoscript':'','unicon':'','vala':'','vbnet':'vbscript','vb':'vbscript','verilog':'','vhdl':'','vim':'','visualfoxpro':'','visualprolog':'','whitespace':'','whois':'','winbatch':'','xbasic':'','xml':'xmlpure','xorg_conf':'','xpp':'','z80':'','zxbasic':''};s.mode=(geshiColors[s.mode]?geshiColors[s.mode]:s.mode);jQuery(this).addClass('CodeMirrorPrepSize');jQuery(this).each(function(){var settings=jQuery.extend(!0,{},s);settings.parent=jQuery(this).parent();settings.parent.find('.cm-remove').remove();var o=jQuery(this);if(o.hasClass('codeMirror')&&!o.is(':visible'))return;if((!settings.force&&!o.is('pre'))||!s.mode){if(!o.data('codemirror')||o.data("nocodemirror")){jQuery(this).removeClass('CodeMirrorPrepSize').show();return}}
var textarea;settings.parent.visible(function(){var syntax,wrap,theme,lineNumbers;if(!o.is(':input')){syntax=o.data('syntax');lineNumbers=o.data('line-numbers');wrap=o.data('wrap');theme=o.data('theme');textarea=$('<textarea class="preCodeMirror"></textarea>').val(o.text()).insertAfter(o);if(syntax)textarea.data('syntax',(geshiColors[syntax]?geshiColors[syntax]:syntax));if(lineNumbers)textarea.data('line-numbers',lineNumbers);if(wrap)textarea.data('wrap',wrap);if(theme)textarea.data('theme',theme);settings.readOnly=!0}else{textarea=o;settings.readOnly=textarea.attr('readonly')}
settings.width=settings.parent.width();settings.height=o.height();o.removeClass('CodeMirrorPrepSize');settings.height=(settings.height<25?25:settings.height);settings.width=(settings.width<50?50:settings.width);if(textarea.data('codeMirrorRelationshipFullscreen'))return!1;if(!textarea.length)return!1;if(!window.CodeMirror)return!1;function applyOverride(override,setting){var attr=textarea.data(override);if(!settings[setting]){settings[setting]=attr}else if(!attr){attr=settings[setting]}
settings[setting]=attr;return settings[setting]}
var mode=applyOverride('syntax','mode');lineNumbers=applyOverride('line-numbers','lineNumbers');wrap=applyOverride('wrap','lineWrapping');theme=applyOverride('theme','theme');if(s.readOnly){if(!syntaxHighlighter.modes.hasOwnProperty(mode)){o.removeClass('CodeMirrorPrepSize').show();textarea.remove();return}
o.hide()}
if(!mode){syntaxHighlighter.remove(textarea);syntaxHighlighter.ready(textarea,settings,"")}else{o.addClass('CodeMirrorHide');var scrollTop=o.scrollTop(),textareaHeight=o.innerHeight();syntaxHighlighter.remove(textarea);var editor=syntaxHighlighter.ready(textarea,settings,mode),editorWindow=jQuery(editor.getWrapperElement()).find('.CodeMirror-scroll').addBack(),scroller=jQuery(editor.getScrollerElement());scroller.scrollTop(scrollTop*(scroller.innerHeight()/textareaHeight));o.removeClass('CodeMirrorHide');editorWindow.find('div:first').css('width','auto').css('height','auto');if(settings.readOnly){editorWindow.css('height','auto').css('overflow','hidden')}
o.trigger('syntaxHighlighterLoaded')}
if(settings.theme=="off"&&!settings.readOnly&&$("textarea",this).data("codeMirrorRelationship")===0){$(".cm-remove").click()}},!0)});return this}});var syntaxHighlighter;syntaxHighlighter={modes:{},ready:function(textarea,settings,mode){var changeCount=0,previewTimer=null,previewDelay=5000,updateAutoSaveAndPreview=function(){textarea.val(editor.getValue()).change();if(window.auto_save){auto_save(textarea.attr('id'))}},editor=CodeMirror.fromTextArea(textarea[0],{stylesheet:'default',lineNumbers:settings.lineNumbers,readOnly:settings.readOnly,mode:mode,lineWrapping:settings.lineWrapping,theme:settings.theme==="off"?"default":settings.theme});settings=$.extend({changeText:tr("Change Highlighter"),removeText:tr("Toggle Highlighter")},settings);editor.on("change",function(cm,change){previewDelay=2000;changeCount++;if(previewTimer){clearTimeout(previewTimer)}
if(changeCount>25){changeCount=0;previewDelay=100}
previewTimer=setTimeout(updateAutoSaveAndPreview,previewDelay)});editor.on("blur",function(){if(previewTimer){clearTimeout(previewTimer)}
updateAutoSaveAndPreview()});if(settings.readOnly){$(editor.getWrapperElement()).addClass('codelisting').css('padding','0px')}
if(settings.height){$(editor.getScrollerElement()).height(settings.height)}
if(settings.width){var scroller=$(editor.getScrollerElement());var maxWidth=(scroller.parent().css('max-width')+'').replace('px','')*1;settings.width=(maxWidth<settings.width?maxWidth:settings.width);scroller.width(settings.width)}
var parents=textarea.parents('form');if(!parents.data('codeMirrorActive')){parents.submit(function(){if(textarea.data('codeMirrorRelationship')){textarea.val(editor.getValue()).change()}}).data('codeMirrorActive',!0)}
if(!settings.readOnly){syntaxHighlighter.add(editor,textarea);var changeButton=jQuery('<a class="btn btn-success btn-sm cm-change">'+settings.changeText+'</a>').insertAfter(textarea.next()).click(function(){var options=tr('Modes:')+'<br />';options+="<select class='cm-mode'>";options+="<option value=''>"+tr("Select a Mode")+"</option>";var modes=CodeMirror.modes;for(var i in modes){if(modes.hasOwnProperty(i)){options+='<option value="'+i+'">'+i+'</option>'}}
options+="</select><br />";options+=tr('Theme:')+'<br />';options+='<select class="cm-theme">';options+='<option value="default">default</option>';options+='<option value="3024-day">3024-day</option>';options+='<option value="3024-night">3024-night</option>';options+='<option value="ambiance">ambiance</option>';options+='<option value="ambiance-mobile">ambiance-mobile</option>';options+='<option value="base16-dark">base16-dark</option>';options+='<option value="base16-light">base16-light</option>';options+='<option value="blackboard">blackboard</option>';options+='<option value="cobalt">cobalt</option>';options+='<option value="eclipse">eclipse</option>';options+='<option value="elegant">elegant</option>';options+='<option value="erlang-dark">erlang-dark</option>';options+='<option value="lesser-dark">lesser-dark</option>';options+='<option value="mbo">mbo</option>';options+='<option value="midnight">midnight</option>';options+='<option value="monokai">monokai</option>';options+='<option value="neat">neat</option>';options+='<option value="night">night</option>';options+='<option value="paraiso-dark">paraiso-dark</option>';options+='<option value="paraiso-light">paraiso-light</option>';options+='<option value="rubyblue">rubyblue</option>';options+='<option value="solarized">solarized</option>';options+='<option value="the-matrix">the-matrix</option>';options+='<option value="tomorrow-night-eighties">tomorrow-night-eighties</option>';options+='<option value="twilight">twilight</option>';options+='<option value="vibrant-ink">vibrant-ink</option>';options+='<option value="xq-dark">xq-dark</option>';options+='<option value="xq-light">xq-light</option>';options+='</select><br />';options+=tr('Options:')+'<br />';options+='<input class="opt" type="checkbox" value="lineNumbers" '+(settings.lineNumbers?'checked="true"':'')+'/>'+tr("Line Numbers")+'<br />';options+='<input class="opt" type="checkbox" value="lineWrapping" '+(settings.lineWrapping?'checked="true"':'')+'/>'+tr("Line Wrapping")+'<br />';var msg=jQuery('<div />').html(options).dialog({title:settings.changeText,modal:!0,buttons:[{text:tr("Update"),click:function(){var newSettings={mode:msg.find('.cm-mode').val(),theme:msg.find('.cm-theme').val()};msg.find('.opt').each(function(){var o=jQuery(this);newSettings[o.val()]=o.is(':checked')});changeButton.remove();editor.toTextArea();textarea.data('syntax',newSettings.mode);textarea.flexibleSyntaxHighlighter(jQuery.extend(settings,newSettings));msg.dialog("destroy")}},{text:tr("Cancel"),click:function(){msg.dialog("destroy")}}]});msg.find(".cm-mode").val(mode);msg.find(".cm-theme").val(settings.theme&&settings.theme!=="off"?settings.theme:"default")});var removeButton=jQuery('<a class="btn btn-sm btn-link cm-remove" style="float: right;">'+settings.removeText+'</a>').insertAfter(changeButton).click(function(){var scrollTop;if($(editor.getTextArea()).css("display")=="none"){if($('.CodeMirror-fullscreen').length)syntaxHighlighter.fullscreen(textarea);syntaxHighlighter.remove(textarea);var scroller=$(editor.getScrollerElement()),scrollerHeight=scroller.innerHeight();scrollTop=scroller.scrollTop();editor.toTextArea();textarea.removeClass('CodeMirrorPrepSize').show().removeData('codeMirrorRelationship').scrollTop(scrollTop*(textarea.innerHeight()/scrollerHeight));changeButton.remove()}else{scrollTop=$(document.body).scrollTop();textarea.flexibleSyntaxHighlighter(settings);$(document.body).scrollTop(scrollTop)}
return!1})}
setTimeout(function(){editor.refresh()},1000);return editor},sync:function(textarea){var editor=this.get(textarea);if(editor)textarea.val(editor.getValue())},add:function(editor,$input,none,skipResize){window.codeMirrorEditor=(window.codeMirrorEditor?window.codeMirrorEditor:[]);var i=window.codeMirrorEditor.push(editor);if($.fn.resizable&&!skipResize){var codeWrapper=$(editor.getWrapperElement());codeWrapper.resizable({minWidth:codeWrapper.width(),minHeight:codeWrapper.height(),alsoResize:codeWrapper.find('div.CodeMirror-scroll'),resize:function(){editor.refresh()}}).trigger("resizestop")}
$input.data('codeMirrorRelationship',i-1).addClass('codeMirror').on('sync',function(){syntaxHighlighter.sync($input)})},remove:function($input){var relationship=parseInt($input.data('codeMirrorRelationship'));if(relationship){window.codeMirrorEditor[relationship]=null;$input.removeData('codeMirrorRelationship')}},get:function($input){var relationship=parseInt($input.data('codeMirrorRelationship'));if(window.codeMirrorEditor){if(window.codeMirrorEditor[relationship]){return window.codeMirrorEditor[relationship]}}
return!1},fullscreen:function(textarea){$('.CodeMirror-fullscreen').find('.CodeMirror').addBack().css('height','');$('.CodeMirror-fullscreen .actions').remove();textarea.parent().parent().toggleClass('CodeMirror-fullscreen');$('body').toggleClass('noScroll');$('.tabs,.rbox-title, .modules').toggle();var isFullscreen=($('.CodeMirror-fullscreen').length?!0:!1);var win=$(window).data('cm-resize',!0),screen=$('.CodeMirror-fullscreen'),editorObj=screen.find('.CodeMirror'),toolbar=$('#editwiki_toolbar');editzonefooter=$('.CodeMirror-fullscreen .edit-zone-footer');if(isFullscreen){editorObj.resizable("disable");$('.actions','#col1').clone().appendTo('.CodeMirror-fullscreen');var actions=$('.CodeMirror-fullscreen .actions');win.resize(function(){if(win.data('cm-resize')&&screen){screen.css('height',win.height()+'px');editorObj.height(win.height()-toolbar.height()-editzonefooter.outerHeight()-actions.outerHeight())}}).resize()}else{editorObj.resizable("enable");$(window).removeData('cm-resize')}
return!1},find:function(textareaEditor,val){this.searchCursor[val]=textareaEditor.getSearchCursor(val);if(this.searchCursor[val].findNext()){textareaEditor.setSelection(this.searchCursor[val].from(),this.searchCursor[val].to())}},searchCursor:{},replace:function(textareaEditor,val,replaceVal){this.searchCursor[val]=textareaEditor.getSearchCursor(val);if(this.searchCursor[val].find()){this.searchCursor[val].replace(replaceVal);while(this.searchCursor[val].findNext()){this.searchCursor[val].replace(replaceVal)}}},insertAt:function(textareaEditor,replaceString,perLine,blockLevel,replaceSelection){var toBeReplaced=/text|page|area_id/g;var handle=textareaEditor.getCursor(!0);var selection=textareaEditor.getSelection();var cursor=textareaEditor.getCursor();var newString='';if(perLine){if(textareaEditor.somethingSelected()){textareaEditor.replaceSelection('')}else{selection=textareaEditor.getLine(handle.line)}
var lines=selection.split(/\n/g);jQuery(lines).each(function(i){newString+=replaceString.replace(toBeReplaced,this+'')+(i==lines.length-1?'':'\n')});if(textareaEditor.getSelection()){textareaEditor.replaceSelection(newString)}else{textareaEditor.replaceRange(newString,{line:handle.line,ch:0},{line:handle.line,ch:0})}}else if(blockLevel){selection=textareaEditor.getLine(handle.line);if(selection){textareaEditor.replaceRange(replaceString.replace(toBeReplaced,selection),{line:handle.line,ch:0},{line:handle.line,ch:selection.length})}else{textareaEditor.replaceRange(replaceString,{line:handle.line,ch:0},{line:handle.line,ch:0})}}else if(replaceString){cursor=textareaEditor.getCursor();if(replaceSelection){textareaEditor.replaceSelection(replaceString)}else if(replaceString.match(toBeReplaced)&&selection){textareaEditor.replaceSelection(replaceString.replace(toBeReplaced,selection))}else{textareaEditor.replaceSelection(replaceString)}
cursor.ch+=textareaEditor.getSelection().length;textareaEditor.setCursor(cursor)}else{textareaEditor.replaceRange(textareaEditor.lineCount()-1,'end',newString)}
textareaEditor.focus()},selection:function(textareaEditor,getStartEnd){var selection=textareaEditor.getSelection();if(getStartEnd){var startCursor=textareaEditor.getCursor(!0),endCursor=textareaEditor.getCursor(!1),val=(textareaEditor.getValue()+'').split('\n'),i;var result={start:0,end:0};for(i=0;i<=startCursor.line;i++){if(i<startCursor.line){result.start+=val[i].length}else{result.start+=startCursor.ch}}
for(i=0;i<=endCursor.line;i++){if(i<endCursor.line){result.end+=val[i].length}else{result.end+=endCursor.ch}}
return result}
return selection},setSelection:function(textareaEditor,start,end){var val=(textareaEditor.getValue()+''),selection={},startCursor={line:0,ch:0},endCursor={line:0,ch:0};selection.before=val.substring(0,start);selection.val=val.substring(start,end);selection.after=val.substring(end,val.length);selection.linesBefore=selection.before.split('\n');selection.lines=selection.val.split('\n');selection.linesAfter=selection.after.split('\n');startCursor.line=selection.linesBefore.length-1;startCursor.ch=selection.linesBefore[selection.linesBefore.length-1].length;endCursor.line=(startCursor.line+(selection.lines.length-1));endCursor.ch=selection.lines[selection.lines.length-1].length;if(startCursor.line==endCursor.line){endCursor.ch+=startCursor.ch}
textareaEditor.setSelection(startCursor,endCursor)}};$(function(){$('textarea').flexibleSyntaxHighlighter();$('.codelisting').each(function(){$(this).flexibleSyntaxHighlighter({readOnly:!0,mode:'null',width:$(this).width()+'px',height:$(this).parent().height()+'px'})});$(document).off('plugin_code_ready').on('plugin_code_ready',function(args){var updateTextarea=function(){colors.val(colorsSelector.val());$(".CodeMirror, .cm-change",args.modal).remove();code.removeClass('codeMirror').flexibleSyntaxHighlighter({mode:colorsSelector.val(),lineNumbers:ln.val()==="1",theme:theme.val(),force:!0});if(codeMirrorTheme==="off"&&!theme.val()){$(".cm-remove").click()}};var colors=args.modal.find('#param_colors_input').hide(),ln=args.modal.find('#param_ln_input').change(function(){updateTextarea.call(this)}),theme=args.modal.find('#param_theme_input').change(function(){updateTextarea.call(this)}),code=args.modal.find('textarea[name=content]'),colorsSelector=$('<select class="form-control"/>').insertAfter(colors).change(function(){updateTextarea.call(this)});var modes=CodeMirror.modes;for(var i in modes){if(modes.hasOwnProperty(i)){$('<option />').text(i).attr('value',i).appendTo(colorsSelector)}}
setTimeout(function(){colorsSelector.val(colors.val()).change().trigger("chosen:updated")},100)});$(document).off('plugin_html_ready').on('plugin_html_ready',function(args){var code=args.modal.find('textarea:first');code.flexibleSyntaxHighlighter({mode:'xml',lineNumbers:!0,force:!0})});$(document).off('plugin_r_ready').on('plugin_r_ready',function(args){var r=args.modal.find('textarea:first');r.flexibleSyntaxHighlighter({mode:'r',lineNumbers:!0,force:!0})});$(document).off('plugin_rr_ready').on('plugin_rr_ready',function(args){var r=args.modal.find('textarea:first');r.flexibleSyntaxHighlighter({mode:'r',lineNumbers:!0,force:!0})})});
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/infinitecarousel/jquery.infinitecarousel3.js */
/*
 * jQuery Infinite Carousel
 * @author admin@catchmyfame.com - http://www.catchmyfame.com
 * @version 3.0.3
 * @date January 24, 2011
 * @category jQuery plugin
 * @copyright (c) admin@catchmyfame.com (www.catchmyfame.com)
 * @license CC Attribution-Share Alike 3.0 - http://creativecommons.org/licenses/by-sa/3.0/
 */
(function($){$.fn.extend({infiniteCarousel:function(options){var defaults={transitionSpeed:800,displayTime:6000,displayProgressRing:!0,progressRingColorOpacity:'0,0,0,.5',progressRingBackgroundOn:!0,progressRingBackgroundColorOpacity:'255,255,255,.5',thumbnailType:'none',easeLeft:'linear',easeRight:'linear',imagePath:'/js/infinitecarousel/images/',inView:1,margin:0,advance:1,customClass:null,showControls:!0,autoHideCaptions:!1,autoPilot:!1,prevNextInternal:!0,internalThumbnails:!1,enableKeyboardNav:!0,onSlideStart:function(){},onSlideEnd:function(){},onPauseClick:function(){},onPlayClick:function(){}};var options=$.extend(defaults,options);return this.each(function(){var o=options;var obj=$(this);var randID=Math.round(Math.random()*100000000);var numItems=$('li',obj).length;var captions=[];var links=[];var itemSources=[];var vidThumb=[];var widthSource,heightSource;var nextLeft,nextRight;var clrTimerInterval;var u,elapsedTime=0;var canvasSupported="HTMLCanvasElement" in window;$('li',obj).each(function(index){captions.push($('p',this).html());links.push($('a',this).attr('href'));vidThumb.push($(this).find('iframe').attr('longdesc'));itemSources.push($(this).find('img, iframe').attr('src'))});if(o.inView>numItems)o.inView=numItems;if(o.advance>o.inView)o.advance=o.inView;widthSource=$(this).find('img, iframe').width();heightSource=$(this).find('img, iframe').height();$(obj).replaceWith('<div class="infiniteCarousel" id="ic_'+randID+'">');obj=$('#ic_'+randID);$(obj).height(heightSource).width(widthSource*o.inView).css({'overflow':'hidden','position':'relative'});$(obj).append('<div class="ic_tray" style="position:relative;width:'+(numItems*2)*widthSource+'px;left:-'+widthSource+'px">');for(var i=0;i<numItems;i++)$('div.ic_tray',obj).append('<div style="overflow:hidden;background:url('+o.imagePath+'wait.gif) no-repeat scroll 50% 50% #ddd;float:left;position:relative;width:'+widthSource+'px;height:'+heightSource+'px;" class="infiniteCarousel_item">');$('.infiniteCarousel_item',obj).each(function(index){if(itemSources[index].indexOf('youtube.com')>0||itemSources[index].indexOf('vimeo.com')>0||itemSources[index].indexOf('funnyordie.com')>0){var querystring=itemSources[index].split("?");$(this).append('<iframe src="'+querystring[0]+"?wmode=opaque&"+querystring[1]+'" frameborder="0" allowfullscreen="" style="width: '+widthSource+'px; height: '+heightSource+'px">" />');if(links[index]!=undefined)$('iframe',this).wrap('<a class="ic_link" href="'+links[index]+'"></a>')}else{$(this).append('<img src="'+itemSources[index]+'" />');if(links[index]!=undefined)$('img',this).wrap('<a class="ic_link" href="'+links[index]+'"></a>')}
if(captions[index]!=undefined)$(this).append('<div class="ic_caption" style="position:absolute;bottom:0;">'+captions[index]+'</div>')});$('.infiniteCarousel_item',obj).clone().appendTo($('div.ic_tray',obj));$('.infiniteCarousel_item',obj).each(function(index){$(this).attr('id','ic_'+randID+'_'+index)});$('.ic_tray',obj).prepend($('.infiniteCarousel_item:last',obj).remove());if(o.margin!=0){$(obj).width($(obj).width()+(o.inView+1)*o.margin).height($(obj).height()+2*o.margin);$('.infiniteCarousel_item',obj).css('margin',o.margin+'px 0px '+o.margin+'px '+o.margin+'px');$('.ic_tray',obj).css('left',parseInt($('.ic_tray',obj).css('left'))-o.margin+'px').width($('.ic_tray',obj).width()+o.margin*(numItems*2))}
$(obj).append('<div class="ic_left_nav" style="position:absolute;left:0;width:32px;top:'+(heightSource/2-16)+'px;">').append('<div class="ic_right_nav" style="position:absolute;width:32px;right:0;top:'+(heightSource/2-16)+'px;">');$('.ic_left_nav',obj).append('<img style="cursor:pointer;" src="'+o.imagePath+'left.png" />');$('.ic_right_nav',obj).append('<img style="cursor:pointer;" src="'+o.imagePath+'right.png" />');if(!o.prevNextInternal&&(parseInt($(obj).css('border-left-width'))+parseInt($(obj).css('border-right-width')))>0)$('.ic_right_nav',obj).css('right','-'+(parseInt($(obj).css('border-left-width'))+parseInt($(obj).css('border-right-width')))+'px');$('.ic_left_nav img',obj).on('click',function(event){if(!$('.ic_tray',obj).is(':animated')){stop();moveRight(o.advance)}});$('.ic_right_nav img',obj).on('click',function(event){if(!$('.ic_tray',obj).is(':animated')){stop();moveLeft(o.advance)}});if(o.inView==numItems){o.displayProgressRing=!1;o.thumbnailType='none';o.showControls=!1;o.autoPilot=!1;o.enableKeyboardNav=!1;$('.ic_left_nav,.ic_right_nav',obj).hide()}
if(!o.prevNextInternal){$(obj).wrap('<div id="ic_'+randID+'_wrapper" class="ic_wrapper" style="padding:0 32px;position:relative;">');$('#ic_'+randID+'_wrapper').width($(obj).width());$('#ic_'+randID+'_wrapper').prepend($('.ic_left_nav',obj).detach());$('#ic_'+randID+'_wrapper').prepend($('.ic_right_nav',obj).detach())}else{$(obj).hover(function(){$('.ic_left_nav',obj).stop().animate({opacity:1,left:'0px'},300);$('.ic_right_nav',obj).stop().animate({opacity:1,right:'0px'},300)},function(){$('.ic_left_nav',obj).stop().animate({opacity:0,left:'-32px'},500);$('.ic_right_nav',obj).stop().animate({opacity:0,right:'-32px'},500)})}
$('#ic_'+randID).addClass('ic_peek_padding');$('#ic_'+randID+'_wrapper').width($(obj).width()+parseInt($('#ic_'+randID).css('padding-left'))+parseInt($('#ic_'+randID).css('padding-right')));if(o.thumbnailType!='none'){$(obj).append('<div id="ic_'+randID+'_thumbnail_tray" class="ic_thumbnail_tray" style="position:absolute;bottom:0;padding:5px 0;width:100%;text-align:center;">');$('#ic_'+randID+'_thumbnail_tray').append('<div class="ic_thumbnails">');for(var i=0;i<numItems;i++)$('.ic_thumbnails',obj).append('<div class="ic_button" style="cursor:pointer">');for(var i=0;i<o.inView;i++)$('.ic_button:eq('+i+')',obj).addClass('ic_active');$('.ic_button').hover(function(){if(!$(this).hasClass('ic_active'))$(this).css('background','#699')},function(){$(this).css('background','')});if(o.thumbnailType=='images'){$('.ic_button',obj).each(function(index){if(itemSources[index]!=undefined)thumbImage=itemSources[index];if(vidThumb[index]!=undefined)thumbImage=vidThumb[index];$(this).append('<img width="100%" height="100%" src="'+thumbImage+'" />')})}
if(o.thumbnailType=='numbers'){$('.ic_button',obj).each(function(index){$(this).html(index+1)})}
if(o.thumbnailType=='count'){$('.ic_button',obj).remove();$('.ic_thumbnails',obj).html('<span>1</span> of '+numItems);manageThumbButtons()}
if(!o.internalThumbnails){if(!$('#ic_'+randID+'_wrapper').length){$(obj).wrap('<div id="ic_'+randID+'_wrapper" class="ic_wrapper" style="position:relative;">');$('#ic_'+randID+'_wrapper').width($(obj).width())}
$('#ic_'+randID+'_thumbnail_tray').css({'bottom':'','position':'relative'}).appendTo($('#ic_'+randID+'_wrapper'))}
var thumbTopParent=($('#ic_'+randID+'_wrapper').length)?$('#ic_'+randID+'_wrapper'):obj;$('.ic_button',thumbTopParent).on('click',function(){if(!$('.ic_tray',obj).is(':animated')){stop();var jumpStart=parseInt($('.infiniteCarousel_item:eq(1)',obj).attr('id').split('_').pop());var jumpFinish=$(this).index();if(jumpStart>(numItems-1))jumpStart-=numItems;var a=Math.abs(jumpStart-jumpFinish);var b=numItems-a;var jumpDist=Math.min(a,b);if(jumpStart<jumpFinish){if(a<b||a==b)moveLeft(jumpDist);if(a>b)moveRight(jumpDist)}
if(jumpStart>jumpFinish){if(a<b)moveRight(jumpDist);if(a>b||a==b)moveLeft(jumpDist)}}})}
if((!o.prevNextInternal||!o.internalThumbnails)&&o.customClass!==null){$('#ic_'+randID+'_wrapper').addClass('ic_'+o.customClass)}else if(o.customClass!==null){$(obj).addClass('ic_'+o.customClass)}
if(o.enableKeyboardNav){$(document).keydown(function(event){if(event.keyCode==39)if(!$('.ic_tray',obj).is(':animated')){stop();moveLeft(o.advance)}
if(event.keyCode==37)if(!$('.ic_tray',obj).is(':animated')){stop();moveRight(o.advance)}
if(event.keyCode==80||event.keyCode==111)if(!$('.ic_tray',obj).is(':animated'))if(o.autoPilot)pause();if(event.keyCode==83||event.keyCode==115)if(!$('.ic_tray',obj).is(':animated'))play()})}
if(o.showControls){$(obj).append('<div id="ic_controls_'+randID+'" class="ic_controls" style="background:url('+o.imagePath+'controls.png) no-repeat -12px 0;opacity:.5;cursor:pointer;height:10px;position:absolute;right:9px;top:10px;width:10px;z-index:1">');if(!o.autoPilot)$('#ic_controls_'+randID).css('background-position','1px 0');$('.ic_controls',obj).on('click',function(){if(!$('.ic_tray',obj).is(':animated')){if(o.autoPilot)pause();else play()}})}
if(canvasSupported){$(obj).append('<canvas id="ic_canvas_'+randID+'" width="30" height="30" style="position:absolute;top:0;right:0;"></canvas>');var ctx=$('#ic_canvas_'+randID)[0].getContext('2d');ctx.lineWidth=3;ctx.strokeStyle="rgba("+o.progressRingColorOpacity+")";ctx.shadowOffsetX=0;ctx.shadowOffsetY=0;ctx.shadowBlur=3;ctx.shadowColor="#fff";if(!o.displayProgressRing)$('#ic_canvas_'+randID).hide()}else{$(obj).append('<div id="ic_ie_timer_'+randID+'" style="width:100%;height:6px;position:absolute;bottom:0;left:0;background:#ccc"></div>');$('#ic_ie_timer_'+randID).css('opacity','.25')}
function hideCaptions(){if(o.autoHideCaptions)$('.ic_caption',obj).stop().animate({bottom:-heightSource+'px'})}
function showCaptions(){if(o.autoHideCaptions)$('.ic_caption',obj).stop().animate({bottom:'0px'})}
function manageThumbButtons(){thumbButtonStart=parseInt($('.infiniteCarousel_item',obj).attr('id').split('_').pop())+1;if(thumbButtonStart>(numItems-1))thumbButtonStart-=numItems;if(o.thumbnailType=='count'){var ary=[];for(var i=thumbButtonStart;i<thumbButtonStart+o.inView;i++)ary.push(((i+1)>numItems)?(i+1)-numItems:(i+1));var last=ary.pop();var amp=(o.inView>1)?" & ":'';$('.ic_thumbnails span',thumbTopParent).text(ary.join(", ")+amp+last)}
for(var i=thumbButtonStart;i<thumbButtonStart+o.inView;i++)(i>numItems-1)?$('.ic_button:eq('+Math.abs(numItems-i)+')',thumbTopParent).addClass('ic_active'):$('.ic_button:eq('+i+')',thumbTopParent).addClass('ic_active');}
function moveRight(dist){o.onSlideStart.call(this);$('.ic_button',thumbTopParent).removeClass('ic_active');$('.infiniteCarousel_item',obj).slice(-dist).prependTo('#ic_'+randID+' .ic_tray',obj);$('.ic_tray',obj).css({left:'-='+(widthSource*dist)+'px'});$('.ic_tray',obj).stop().animate({left:"+="+widthSource*dist+"px"},o.transitionSpeed,o.easeRight,function(){showCaptions();manageThumbButtons();o.onSlideEnd.call(this)});hideCaptions()}
function moveLeft(dist){o.onSlideStart.call(this);$('.ic_button',thumbTopParent).removeClass('ic_active');$('.ic_tray',obj).stop().animate({left:"-="+(widthSource+o.margin)*dist+"px"},o.transitionSpeed,o.easeLeft,function(){$('.infiniteCarousel_item',obj).slice(0,dist).appendTo('#ic_'+randID+' .ic_tray',obj);$('.ic_tray',obj).css({left:'-'+(widthSource+o.margin)+'px'});showCaptions();manageThumbButtons();o.onSlideEnd.call(this);if(o.autoPilot)animatedTimer(o.displayTime)});hideCaptions()}
function pause(){o.onPauseClick.call(this);o.autoPilot=!1;$('#ic_controls_'+randID).css('background-position','1px 0');clearInterval(clrTimerInterval);elapsedTime=u}
function play(){o.autoPilot=!0;if(o.autoPilot&&!$('.ic_tray',obj).is(':animated'))animatedTimer(o.displayTime);$('#ic_controls_'+randID).css('background-position','-12px 0')}
function stop(){o.onPlayClick.call(this);o.autoPilot=!1;resetTimer();$('#ic_controls_'+randID).css('background-position','1px 0');clearInterval(clrTimerInterval)}
function animatedTimer(delay){var startTime=new Date().getTime(),newTime,angle=0;clrTimerInterval=setInterval(function(){if(angle<359){newTime=new Date().getTime();u=(newTime-startTime)+elapsedTime;angle=Math.floor(u/delay*360);if(angle>359)angle=359;if(canvasSupported){ctx.clearRect(0,0,30,30);ctx.save();ctx.translate(15,15);ctx.rotate(-Math.PI/2);if(o.progressRingBackgroundOn){ctx.strokeStyle="rgba("+o.progressRingBackgroundColorOpacity+")";ctx.beginPath();ctx.arc(0,0,10,0,(360*(Math.PI/180)),!0);ctx.stroke();ctx.strokeStyle="rgba("+o.progressRingColorOpacity+")"}
ctx.beginPath();ctx.arc(0,0,10,0,(angle*(Math.PI/180)),!0);ctx.stroke();ctx.restore()}else{$('#ic_ie_timer_'+randID,obj).css('width',99-Math.floor((u/delay)*100)+'%')}}else{elapsedTime=0;clearInterval(clrTimerInterval);moveLeft(o.advance)}},20)}
function resetTimer(){elapsedTime=0;if(canvasSupported){ctx.clearRect(0,0,30,30);ctx.save();ctx.translate(15,15);ctx.rotate(-Math.PI/2);ctx.beginPath();ctx.arc(0,0,10,0,(360*(Math.PI/180)),!0);ctx.stroke();ctx.restore()}}
if(o.autoPilot&&!$('.ic_tray',obj).is(':animated')){animatedTimer(o.displayTime)}else{resetTimer()}})}})})(jQuery);
/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-confirm.js */
function confirmSimple(event,title,ticket){return confirmPopup(event,!1,title,ticket)}
function confirmAjax(event){return confirmPopup(event,!0)}
function confirmPopup(event,ajax,title,ticket){if(!event){return!1}
$('div.popover').hide();if(checkTimeout()){event.preventDefault();if(ajax){var target=$('.modal.fade:not(.show)').first(),formAction=$(event.currentTarget).attr('formaction')||$(event.currentTarget.form).attr('action');$.post(formAction,$(event.currentTarget.form).serialize(),function(data){$('.modal-content',target).html(data);target.modal().trigger('tiki.modal.redraw')});return!1}else{if(event.currentTarget.form){var optionConfirm=$(event.currentTarget.form).find('select > option.confirm-simple'),selected=$(event.currentTarget.form).find('select > option.confirm-simple:selected');if(!optionConfirm.length||selected.length){var formId=$(event.currentTarget.form).attr('id')?$(event.currentTarget.form).attr('id')+'-confirm-simple':'confirm-simple',formName=$(event.currentTarget.form).attr('name')?$(event.currentTarget.form).attr('name')+'-confirm-simple':'confirm-simple',newForm=$('<form/>',{name:formName,id:formId,action:$(event.currentTarget.form).attr('action'),method:'post'}),inputs=$(event.currentTarget.form).find('input, textarea, select > option:selected');$.each(inputs,function(){if(this.type!=='submit'&&(this.type!=='checkbox'||this.checked===!0)&&(this.type!=='radio'||this.checked===!0)){var name=this.tagName==='OPTION'?$(this).parent('select').attr('name'):this.name;newForm.append($('<input />',{type:'hidden',name:name,value:this.value}))}});if(event.currentTarget.name){newForm.append($('<input />',{type:'hidden',name:event.currentTarget.name,value:event.currentTarget.value}))}
if(selected.length){$.each(selected,function(key,item){if($(selected[key]).data('confirm-text')){title=$(selected[key]).data('confirm-text');return!1}})}
simpleConfirmForm(event.currentTarget,newForm,title,ticket).modal()}else{$(event.currentTarget.form).submit()}}else if(event.currentTarget.tagName==='A'){var newForm=$('<form/>',{id:'confirm-simple',action:event.currentTarget.pathname,method:'post'}),params=event.currentTarget.search.substr(1).split('&');if(params){for(var i=0;i<params.length;i++){var parampair=params[i].split("=")
newForm.append($('<input />',{type:'hidden',name:decodeURIComponent(parampair[0]),value:decodeURIComponent(parampair[1])}))}}
simpleConfirmForm(event.currentTarget,newForm,title,ticket).modal()}}}}
function simpleConfirmForm(clickedElement,newForm,title,ticket){if(!title){title=$(clickedElement).data('confirm-text')?$(clickedElement).data('confirm-text'):tr('Complete this action?')}
if(!ticket&&!$(newForm).find('input[name=ticket]').length&&$(clickedElement).data('ticket')){ticket=$(clickedElement).data('ticket')}
if(!$(newForm).find('input[name=ticket]').length&&ticket){newForm.append($('<input />',{type:'hidden',name:'ticket',value:ticket}))}
newForm.append($('<input />',{type:'hidden',name:'confirmForm',value:'y'}));var target=$('.modal.fade:not(.in)').first();$('.modal-content',target).html('<div class="modal-header">'+'<h4 class="modal-title" id="myModalLabel">'+title+'</h4>'+$(newForm).prop('outerHTML')+'</div>'+'<div class="modal-footer">'+'<button type="button" class="btn btn-primary btn-dismiss" data-dismiss="modal">'+tr('Close')+'</button>'+'<input type="submit" class="btn btn-primary" value="'+tr('OK')+'" onclick="$(\'#'+$(newForm).attr('id')+'\').submit(); return false;"> '+'</div>');return target}
function postForm(event){event.preventDefault();var formAction=$(event.currentTarget).attr('formaction')||$(event.currentTarget.form).attr('action');$.post(formAction,$(event.currentTarget.form).serialize(),function(data){});return!1}
$('form').has('input[name=ticket]').on('mousedown keydown','select',function(){checkElement(this)}).on('mousedown keydown','input',function(){checkElement(this)}).on('mousedown keydown','textarea',function(){checkElement(this)});function checkElement(element){if($(element).hasClass('already-warned')){return!0}else{if(!checkTimeout()){$(element).addClass('already-warned')}
return!0}}
function checkTimeout(){if((($.now()-now.getTime())/1000)<jqueryTiki.securityTimeout){return!0}else{event.preventDefault();feedback([tr('The security ticket for this form has expired.')+' '+tr('To apply your changes, note or copy them, reload the page, re-enter them and retry submitting.')],'warning',!0,tr('Security ticket timed out'));var target=$('.modal.fade:not(.show)').first();$('.modal-body',target).after('<div class="modal-footer">'+'<a href="#" onclick="$.closeModal();return false;" class="btn btn-primary">'+tr('Close this dialog')+'</a>'+'<a href="'+location.href+'" onclick="location.reload();return false;" class="btn btn-secondary">'+tr('Reload now (discards changes)')+'</a>'+'</div>');return!1}}
function confirmAction(event){event.preventDefault();if(typeof event.currentTarget!=='undefined'&&event.currentTarget.form!=='undefined'){var targetForm=event.currentTarget.form}else if(typeof event.target!=='undefined'&&event.target.form!=='undefined'){var targetForm=event.target.form}
$.ajax({dataType:'json',url:$(targetForm).attr('action'),type:'POST',data:$(targetForm).serialize(),success:function(data){if(!data){$.closeModal();return}
var extra=data.extra||!1,dataurl=data.url||!1,dataError=data.error||!1,strip=data.strip||!1;if(extra){if(extra==='close'){$.closeModal()}else if(extra==='refresh'){$.closeModal();if(strip){if(strip==='anchor'||strip==='queryAndAnchor'){var href=document.location.href.replace(/#.*$/,"");document.location.href=document.location.href.replace(/#.*$/,"");if(strip==='queryAndAnchor'){document.location.href=document.location.href.replace(/\?.*$/,"")}}}else{document.location.href=document.location.href}}}
if(dataurl){$.closeModal();document.location.assign(dataurl)}
if(dataError){if(dataError==='CSRF'){dataError=tr('Potential cross-site request forgery (CSRF) detected. Operation blocked. The security ticket may have expired - reloading the page may help.')}
$.closeModal();feedback(dataError,'error');console.log(dataError)}
return!1}})};
/* rank:50standard - minify:ok. lib/ajax/autosave.js */
var auto_save_submit=!1;var sending_auto_save=!1;var auto_save_debug=!1;function remove_save(editorId,autoSaveId){if(typeof editorId!=='string'||!editorId||!autoSaveId||auto_save_submit){return}
if(sending_auto_save){setTimeout(function(){remove_save(editorId,autoSaveId)},100)}
auto_save_submit=!0;$.ajax({url:$.service("autosave","delete"),data:{editor_id:editorId,referer:autoSaveId},type:"POST",async:!1,success:function(data){},error:function(req,status,error){if(error&&auto_save_debug){alert(tr("Auto Save removal returned an error: ")+error)}}})}
function toggle_autosaved(editorId,autoSaveId){if(typeof autoSaveId==='undefined'){autoSaveId=''}
var output='',prefix='';var $textarea=$('#'+editorId);var textareaEditor=syntaxHighlighter.get($textarea);var cked=typeof CKEDITOR!=='undefined'?CKEDITOR.instances[editorId]:null;if(!$textarea.data("original")){if(cked){prefix='cke_contents_'}
ajaxLoadingShow(prefix+editorId);$.getJSON($.service("autosave","get"),{editor_id:editorId,referer:autoSaveId},function(data){output=data.data;$textarea.data("original",$textarea.val());if(cked){cked.setData(output)}else if(textareaEditor){textareaEditor.setValue(output)}else if($("#"+editorId).length){$textarea.val(output)}
ajaxLoadingHide()})}else{syntaxHighlighter.sync($textarea);output=$textarea.data("original");if(cked){cked.setData(output)}else if(textareaEditor){textareaEditor.setValue(output)}else if($("#"+editorId).length){$("#"+editorId).val(output)}
$textarea.data("original","")}
var msg=$(".autosave_message_2:first").text();$(".autosave_message_2:first").text($(".autosave_message:first").text());$(".autosave_message:first").text(msg);return output}
function auto_save_allowHtml(form){return $("input[name=allowhtml]:checked",form).length||($("input[name=allowhtml][type=hidden]",form).length&&$("input[name=allowhtml][type=hidden]",form).val()?1:0)}
function auto_save(editorId){if(!editorId&&auto_save_debug){alert(tr("Auto save: No editorId set"))}
if(!auto_save_submit&&!sending_auto_save){var $textarea=$('#'+editorId);var autoSaveId=$textarea.data("autoSaveId");syntaxHighlighter.sync($textarea);var data=$textarea.val();var allowHtml=auto_save_allowHtml($textarea.prop("form"));if(data!==$textarea.data("original")||$textarea.data("last")!==data||$textarea.data("old_allowhtml")!=allowHtml){$textarea.data("last",data);sending_auto_save=!0;$.ajax({url:$.service("autosave","save"),data:{editor_id:editorId,referer:autoSaveId,data:data},type:"POST",success:function(data){if(ajaxPreviewWindow&&typeof ajaxPreviewWindow.get_new_preview==='function'){ajaxPreviewWindow.get_new_preview()}else{ajax_preview(editorId,autoSaveId,!0)}
$textarea.data("old_allowhtml",allowHtml);sending_auto_save=!1},error:function(req,status,error){if(error){if(error=="Forbidden"){error=req.responseText.replace(/(<([^>]+)>)/ig,"")}
alert(tr("Auto Save error: ")+error)}
sending_auto_save=!1}})}else{}}}
function register_id(editorId,autoSaveId){var $textarea=$('#'+editorId);$textarea.data("autoSaveId",autoSaveId);if(typeof syntaxHighlighter.sync==='function'){syntaxHighlighter.sync($textarea)}
$textarea.parents('form').submit(function(){remove_save(editorId,autoSaveId)});$textarea.change(function(){auto_save(editorId)})}
var ajaxPreviewWindow;function ajax_preview(editorId,autoSaveId,inPage){if(editorId){var $textarea=$('#'+editorId);var $autosavepreview=$("#autosave_preview");syntaxHighlighter.sync($textarea);var allowHtml=auto_save_allowHtml($textarea.prop("form"));if(!ajaxPreviewWindow){if(inPage){var $prvw=$("#autosave_preview:visible");if($prvw.length){ajaxLoadingShow($autosavepreview);var h=location.search.match(/&hdr=(\d?)/);h=h&&h.length?h[1]:"";$.get($.service("edit","preview"),{editor_id:editorId,autoSaveId:autoSaveId,inPage:1,hdr:h,allowHtml:allowHtml},function(data){data=data.replace(/\shref/gi," tiki_href").replace(/\sonclick/gi," tiki_onclick").replace(/<script[.\s\S]*?<\/script>/mgi,"");$(".preview_contents",$autosavepreview).html(data);$("#preview_diff_style").val(function(){return getCookie("preview_diff_style","preview","")});ajaxLoadingHide()})}}else{initPreviewWindow(editorId,autoSaveId,allowHtml)}}else{if(typeof ajaxPreviewWindow.get_new_preview==='function'){ajaxPreviewWindow.get_new_preview();ajaxPreviewWindow.focus()}else{initPreviewWindow(editorId,autoSaveId,allowHtml)}}}else{if(auto_save_debug){alert("Auto save data not found")}}}
function initPreviewWindow(editorId,autoSaveId,allowHtml){var features='menubar=no,toolbar=no,fullscreen=no,titlebar=no,status=no,width=600';var url=$.service("edit","preview",{editor_id:editorId,autoSaveId:autoSaveId,allowHtml:allowHtml});window.open(url,"_blank",features)}
$(window).on("unload",function(){if(ajaxPreviewWindow&&typeof ajaxPreviewWindow.get_new_preview==='function'){ajaxPreviewWindow.close()}});
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery/jquery-timepicker-addon/dist/jquery-ui-timepicker-addon.js */
/*! jQuery Timepicker Addon - v1.6.3 - 2016-04-20
* http://trentrichardson.com/examples/timepicker
* Copyright (c) 2016 Trent Richardson; Licensed MIT */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','jquery-ui'],factory)}else{factory(jQuery)}}(function($){$.ui.timepicker=$.ui.timepicker||{};if($.ui.timepicker.version){return}
$.extend($.ui,{timepicker:{version:"1.6.3"}});var Timepicker=function(){this.regional=[];this.regional['']={currentText:'Now',closeText:'Done',amNames:['AM','A'],pmNames:['PM','P'],timeFormat:'HH:mm',timeSuffix:'',timeOnlyTitle:'Choose Time',timeText:'Time',hourText:'Hour',minuteText:'Minute',secondText:'Second',millisecText:'Millisecond',microsecText:'Microsecond',timezoneText:'Time Zone',isRTL:!1};this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:' ',altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:'slider',oneLine:!1,defaultValue:null,parse:'strict',afterInject:null};$.extend(this._defaults,this.regional[''])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:'',formattedDate:'',formattedTime:'',formattedDateTime:'',timezoneList:null,units:['hour','minute','second','millisec','microsec'],support:{},control:null,setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_newInst:function($input,opts){var tp_inst=new Timepicker(),inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults){if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr('time:'+attrName);if(attrValue){try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}}
overrides={beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow)){return tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst)}},onChangeMonthYear:function(year,month,dp_inst){if($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)){tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)}},onClose:function(dateText,dp_inst){if(tp_inst.timeDefined===!0&&$input.val()!==''){tp_inst._updateDateTime(dp_inst)}
if($.isFunction(tp_inst._defaults.evnts.onClose)){tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}}};for(i in overrides){if(overrides.hasOwnProperty(i)){fns[i]=opts[i]||this._defaults[i]||null}}
tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst});tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()});tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()});tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:'')+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:''));if(typeof(tp_inst._defaults.controlType)==='string'){if(tp_inst._defaults.controlType==='slider'&&typeof($.ui.slider)==='undefined'){tp_inst._defaults.controlType='select'}
tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]}else{tp_inst.control=tp_inst._defaults.controlType}
var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];if(tp_inst._defaults.timezoneList!==null){timezoneList=tp_inst._defaults.timezoneList}
var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&typeof timezoneList[0]!=='object'){for(;tzi<tzl;tzi++){tzv=timezoneList[tzi];timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)}}}
tp_inst._defaults.timezoneList=timezoneList;tp_inst.timezone=tp_inst._defaults.timezone!==null?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):((new Date()).getTimezoneOffset()*-1);tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second;tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec;tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec;tp_inst.ampm='';tp_inst.$input=$input;if(tp_inst._defaults.altField){tp_inst.$altInput=$(tp_inst._defaults.altField);if(tp_inst._defaults.altRedirectFocus===!0){tp_inst.$altInput.css({cursor:'pointer'}).focus(function(){$input.trigger("focus")})}}
if(tp_inst._defaults.minDate===0||tp_inst._defaults.minDateTime===0){tp_inst._defaults.minDate=new Date()}
if(tp_inst._defaults.maxDate===0||tp_inst._defaults.maxDateTime===0){tp_inst._defaults.maxDate=new Date()}
if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date){tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())}
if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date){tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())}
if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date){tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())}
if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date){tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())}
tp_inst.$input.bind('focus',function(){tp_inst._onFocus()});return tp_inst},_addTimePicker:function(dp_inst){var currDT=$.trim((this.$altInput&&this._defaults.altFieldTimeOnly)?this.$input.val()+' '+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(currDT);this._limitMinMaxDateTime(dp_inst,!1);this._injectTimePicker();this._afterInject()},_parseTime:function(timeString,withDate){if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}
if(withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,'dateFormat');try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj){return!1}
$.extend(this,parseRes.timeObj)}catch(err){$.timepicker.log("Error parsing the date/time string: "+err+"\ndate/time string = "+timeString+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+dp_dateFormat);return!1}
return!0}else{var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,this._defaults);if(!timeObj){return!1}
$.extend(this,timeObj);return!0}},_afterInject:function(){var o=this.inst.settings;if($.isFunction(o.afterInject)){o.afterInject.call(this)}},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem='',uitem='',show=null,max={},gridSize={},size=null,i=0,l=0;if($dp.find("div.ui-timepicker-div").length===0&&o.showTimepicker){var noDisplay=' ui_tpicker_unit_hide',html='<div class="ui-timepicker-div'+(o.isRTL?' ui-timepicker-rtl':'')+(o.oneLine&&o.controlType==='select'?' ui-timepicker-oneLine':'')+'"><dl>'+'<dt class="ui_tpicker_time_label'+((o.showTime)?'':noDisplay)+'">'+o.timeText+'</dt>'+'<dd class="ui_tpicker_time '+((o.showTime)?'':noDisplay)+'"><input class="ui_tpicker_time_input" '+(o.timeInput?'':'disabled')+'/></dd>';for(i=0,l=this.units.length;i<l;i++){litem=this.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o['show'+uitem]!==null?o['show'+uitem]:this.support[litem];max[litem]=parseInt((o[litem+'Max']-((o[litem+'Max']-o[litem+'Min'])%o['step'+uitem])),10);gridSize[litem]=0;html+='<dt class="ui_tpicker_'+litem+'_label'+(show?'':noDisplay)+'">'+o[litem+'Text']+'</dt>'+'<dd class="ui_tpicker_'+litem+(show?'':noDisplay)+'"><div class="ui_tpicker_'+litem+'_slider'+(show?'':noDisplay)+'"></div>';if(show&&o[litem+'Grid']>0){html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if(litem==='hour'){for(var h=o[litem+'Min'];h<=max[litem];h+=parseInt(o[litem+'Grid'],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(this.support.ampm?'hht':'HH',{hour:h},o);html+='<td data-for="'+litem+'">'+tmph+'</td>'}}else{for(var m=o[litem+'Min'];m<=max[litem];m+=parseInt(o[litem+'Grid'],10)){gridSize[litem]++;html+='<td data-for="'+litem+'">'+((m<10)?'0':'')+m+'</td>'}}
html+='</tr></table></div>'}
html+='</dd>'}
var showTz=o.showTimezone!==null?o.showTimezone:this.support.timezone;html+='<dt class="ui_tpicker_timezone_label'+(showTz?'':noDisplay)+'">'+o.timezoneText+'</dt>';html+='<dd class="ui_tpicker_timezone'+(showTz?'':noDisplay)+'"></dd>';html+='</dl></div>';var $tp=$(html);if(o.timeOnly===!0){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all">'+'<div class="ui-datepicker-title">'+o.timeOnlyTitle+'</div>'+'</div>');$dp.find('.ui-datepicker-header, .ui-datepicker-calendar').hide()}
for(i=0,l=tp_inst.units.length;i<l;i++){litem=tp_inst.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o['show'+uitem]!==null?o['show'+uitem]:this.support[litem];tp_inst[litem+'_slider']=tp_inst.control.create(tp_inst,$tp.find('.ui_tpicker_'+litem+'_slider'),litem,tp_inst[litem],o[litem+'Min'],max[litem],o['step'+uitem]);if(show&&o[litem+'Grid']>0){size=100*gridSize[litem]*o[litem+'Grid']/(max[litem]-o[litem+'Min']);$tp.find('.ui_tpicker_'+litem+' table').css({width:size+"%",marginLeft:o.isRTL?'0':((size/(-2*gridSize[litem]))+"%"),marginRight:o.isRTL?((size/(-2*gridSize[litem]))+"%"):'0',borderCollapse:'collapse'}).find("td").click(function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/ig),f=$t.data('for');if(f==='hour'){if(ap.indexOf('p')!==-1&&n<12){n+=12}else{if(ap.indexOf('a')!==-1&&n===12){n=0}}}
tp_inst.control.value(tp_inst,tp_inst[f+'_slider'],litem,n);tp_inst._onTimeChange();tp_inst._onSelectHandler()}).css({cursor:'pointer',width:(100/gridSize[litem])+'%',textAlign:'center',overflow:'hidden'})}}
this.timezone_select=$tp.find('.ui_tpicker_timezone').append('<select></select>').find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("<option />").val(typeof val==="object"?val.value:val).text(typeof val==="object"?val.label:val)}));if(typeof(this.timezone)!=="undefined"&&this.timezone!==null&&this.timezone!==""){var local_timezone=(new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12)).getTimezoneOffset()*-1;if(local_timezone===this.timezone){selectLocalTimezone(tp_inst)}else{this.timezone_select.val(this.timezone)}}else{if(typeof(this.hour)!=="undefined"&&this.hour!==null&&this.hour!==""){this.timezone_select.val(o.timezone)}else{selectLocalTimezone(tp_inst)}}
this.timezone_select.change(function(){tp_inst._onTimeChange();tp_inst._onSelectHandler();tp_inst._afterInject()});var $buttonPanel=$dp.find('.ui-datepicker-buttonpane');if($buttonPanel.length){$buttonPanel.before($tp)}else{$dp.append($tp)}
this.$timeObj=$tp.find('.ui_tpicker_time_input');this.$timeObj.change(function(){var timeFormat=tp_inst.inst.settings.timeFormat;var parsedTime=$.datepicker.parseTime(timeFormat,this.value);var update=new Date();if(parsedTime){update.setHours(parsedTime.hour);update.setMinutes(parsedTime.minute);update.setSeconds(parsedTime.second);$.datepicker._setTime(tp_inst.inst,update)}else{this.value=tp_inst.formattedTime;this.blur()}});if(this.inst!==null){var timeDefined=this.timeDefined;this._onTimeChange();this.timeDefined=timeDefined}
if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl;setTimeout(function(){if($tp.find('.ui-slider-access').length===0){$tp.find('.ui-slider:visible').sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find('.ui-slider-access:eq(0)').outerWidth(!0);if(sliderAccessWidth){$tp.find('table:visible').each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?'marginRight':'marginLeft').toString().replace('%',''),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=((oldMarginLeft*newWidth)/oldWidth)+'%',css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?'marginRight':'marginLeft']=newMarginLeft;$g.css(css)})}}},10)}
tp_inst._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(!this._defaults.showTimepicker){return}
if($.datepicker._get(dp_inst,'minDateTime')!==null&&$.datepicker._get(dp_inst,'minDateTime')!==undefined&&dp_date){var minDateTime=$.datepicker._get(dp_inst,'minDateTime'),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null||this.microsecMinOriginal===null){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin;this.millisecMinOriginal=o.millisecMin;this.microsecMinOriginal=o.microsecMin}
if(dp_inst.settings.timeOnly||minDateTimeDate.getTime()===dp_date.getTime()){this._defaults.hourMin=minDateTime.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=minDateTime.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=minDateTime.getSeconds();if(this.second<=this._defaults.secondMin){this.second=this._defaults.secondMin;this._defaults.millisecMin=minDateTime.getMilliseconds();if(this.millisec<=this._defaults.millisecMin){this.millisec=this._defaults.millisecMin;this._defaults.microsecMin=minDateTime.getMicroseconds()}else{if(this.microsec<this._defaults.microsecMin){this.microsec=this._defaults.microsecMin}
this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}
if($.datepicker._get(dp_inst,'maxDateTime')!==null&&$.datepicker._get(dp_inst,'maxDateTime')!==undefined&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,'maxDateTime'),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null||this.millisecMaxOriginal===null){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax;this.millisecMaxOriginal=o.millisecMax;this.microsecMaxOriginal=o.microsecMax}
if(dp_inst.settings.timeOnly||maxDateTimeDate.getTime()===dp_date.getTime()){this._defaults.hourMax=maxDateTime.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=maxDateTime.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=maxDateTime.getSeconds();if(this.second>=this._defaults.secondMax){this.second=this._defaults.secondMax;this._defaults.millisecMax=maxDateTime.getMilliseconds();if(this.millisec>=this._defaults.millisecMax){this.millisec=this._defaults.millisecMax;this._defaults.microsecMax=maxDateTime.getMicroseconds()}else{if(this.microsec>this._defaults.microsecMax){this.microsec=this._defaults.microsecMax}
this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}
if(dp_inst.settings.minTime!==null){var tempMinTime=new Date("01/01/1970 "+dp_inst.settings.minTime);if(this.hour<tempMinTime.getHours()){this.hour=this._defaults.hourMin=tempMinTime.getHours();this.minute=this._defaults.minuteMin=tempMinTime.getMinutes()}else if(this.hour===tempMinTime.getHours()&&this.minute<tempMinTime.getMinutes()){this.minute=this._defaults.minuteMin=tempMinTime.getMinutes()}else{if(this._defaults.hourMin<tempMinTime.getHours()){this._defaults.hourMin=tempMinTime.getHours();this._defaults.minuteMin=tempMinTime.getMinutes()}else if(this._defaults.hourMin===tempMinTime.getHours()===this.hour&&this._defaults.minuteMin<tempMinTime.getMinutes()){this._defaults.minuteMin=tempMinTime.getMinutes()}else{this._defaults.minuteMin=0}}}
if(dp_inst.settings.maxTime!==null){var tempMaxTime=new Date("01/01/1970 "+dp_inst.settings.maxTime);if(this.hour>tempMaxTime.getHours()){this.hour=this._defaults.hourMax=tempMaxTime.getHours();this.minute=this._defaults.minuteMax=tempMaxTime.getMinutes()}else if(this.hour===tempMaxTime.getHours()&&this.minute>tempMaxTime.getMinutes()){this.minute=this._defaults.minuteMax=tempMaxTime.getMinutes()}else{if(this._defaults.hourMax>tempMaxTime.getHours()){this._defaults.hourMax=tempMaxTime.getHours();this._defaults.minuteMax=tempMaxTime.getMinutes()}else if(this._defaults.hourMax===tempMaxTime.getHours()===this.hour&&this._defaults.minuteMax>tempMaxTime.getMinutes()){this._defaults.minuteMax=tempMaxTime.getMinutes()}else{this._defaults.minuteMax=59}}}
if(adjustSliders!==undefined&&adjustSliders===!0){var hourMax=parseInt((this._defaults.hourMax-((this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour)),10),minMax=parseInt((this._defaults.minuteMax-((this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute)),10),secMax=parseInt((this._defaults.secondMax-((this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond)),10),millisecMax=parseInt((this._defaults.millisecMax-((this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec)),10),microsecMax=parseInt((this._defaults.microsecMax-((this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec)),10);if(this.hour_slider){this.control.options(this,this.hour_slider,'hour',{min:this._defaults.hourMin,max:hourMax,step:this._defaults.stepHour});this.control.value(this,this.hour_slider,'hour',this.hour-(this.hour%this._defaults.stepHour))}
if(this.minute_slider){this.control.options(this,this.minute_slider,'minute',{min:this._defaults.minuteMin,max:minMax,step:this._defaults.stepMinute});this.control.value(this,this.minute_slider,'minute',this.minute-(this.minute%this._defaults.stepMinute))}
if(this.second_slider){this.control.options(this,this.second_slider,'second',{min:this._defaults.secondMin,max:secMax,step:this._defaults.stepSecond});this.control.value(this,this.second_slider,'second',this.second-(this.second%this._defaults.stepSecond))}
if(this.millisec_slider){this.control.options(this,this.millisec_slider,'millisec',{min:this._defaults.millisecMin,max:millisecMax,step:this._defaults.stepMillisec});this.control.value(this,this.millisec_slider,'millisec',this.millisec-(this.millisec%this._defaults.stepMillisec))}
if(this.microsec_slider){this.control.options(this,this.microsec_slider,'microsec',{min:this._defaults.microsecMin,max:microsecMax,step:this._defaults.stepMicrosec});this.control.value(this,this.microsec_slider,'microsec',this.microsec-(this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(!this._defaults.showTimepicker){return}
var hour=(this.hour_slider)?this.control.value(this,this.hour_slider,'hour'):!1,minute=(this.minute_slider)?this.control.value(this,this.minute_slider,'minute'):!1,second=(this.second_slider)?this.control.value(this,this.second_slider,'second'):!1,millisec=(this.millisec_slider)?this.control.value(this,this.millisec_slider,'millisec'):!1,microsec=(this.microsec_slider)?this.control.value(this,this.microsec_slider,'microsec'):!1,timezone=(this.timezone_select)?this.timezone_select.val():!1,o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;if(typeof(hour)==='object'){hour=!1}
if(typeof(minute)==='object'){minute=!1}
if(typeof(second)==='object'){second=!1}
if(typeof(millisec)==='object'){millisec=!1}
if(typeof(microsec)==='object'){microsec=!1}
if(typeof(timezone)==='object'){timezone=!1}
if(hour!==!1){hour=parseInt(hour,10)}
if(minute!==!1){minute=parseInt(minute,10)}
if(second!==!1){second=parseInt(second,10)}
if(millisec!==!1){millisec=parseInt(millisec,10)}
if(microsec!==!1){microsec=parseInt(microsec,10)}
if(timezone!==!1){timezone=timezone.toString()}
var ampm=o[hour<12?'amNames':'pmNames'][0];var hasChanged=(hour!==parseInt(this.hour,10)||minute!==parseInt(this.minute,10)||second!==parseInt(this.second,10)||millisec!==parseInt(this.millisec,10)||microsec!==parseInt(this.microsec,10)||(this.ampm.length>0&&(hour<12)!==($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1))||(this.timezone!==null&&timezone!==this.timezone.toString()));if(hasChanged){if(hour!==!1){this.hour=hour}
if(minute!==!1){this.minute=minute}
if(second!==!1){this.second=second}
if(millisec!==!1){this.millisec=millisec}
if(microsec!==!1){this.microsec=microsec}
if(timezone!==!1){this.timezone=timezone}
if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}
this._limitMinMaxDateTime(this.inst,!0)}
if(this.support.ampm){this.ampm=ampm}
this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o);if(this.$timeObj){if(pickerTimeFormat===o.timeFormat){this.$timeObj.val(this.formattedTime+pickerTimeSuffix)}else{this.$timeObj.val($.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix)}
if(this.$timeObj[0].setSelectionRange){var sPos=this.$timeObj[0].selectionStart;var ePos=this.$timeObj[0].selectionEnd;this.$timeObj[0].setSelectionRange(sPos,ePos)}}
this.timeDefined=!0;if(hasChanged){this._updateDateTime()}},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect;var inputEl=this.$input?this.$input[0]:null;if(onSelect&&inputEl){onSelect.apply(inputEl,[this.formattedDateTime,this])}},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dtTmp=(dp_inst.currentYear>0?new Date(dp_inst.currentYear,dp_inst.currentMonth,dp_inst.currentDay):new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay)),dt=$.datepicker._daylightSavingAdjust(dtTmp),dateFmt=$.datepicker._get(dp_inst,'dateFormat'),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=dt!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,(dt===null?new Date():dt),formatCfg);var formattedDateTime=this.formattedDate;if(dp_inst.lastVal===""){dp_inst.currentYear=dp_inst.selectedYear;dp_inst.currentMonth=dp_inst.selectedMonth;dp_inst.currentDay=dp_inst.selectedDay}
if(this._defaults.timeOnly===!0&&this._defaults.timeOnlyShowDate===!1){formattedDateTime=this.formattedTime}else if((this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||timeAvailable))||(this._defaults.timeOnly===!0&&this._defaults.timeOnlyShowDate===!0)){formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix}
this.formattedDateTime=formattedDateTime;if(!this._defaults.showTimepicker){this.$input.val(this.formattedDate)}else if(this.$altInput&&this._defaults.timeOnly===!1&&this._defaults.altFieldTimeOnly===!0){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime='',altSeparator=this._defaults.altSeparator!==null?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix!==null?this._defaults.altTimeSuffix:this._defaults.timeSuffix;if(!this._defaults.timeOnly){if(this._defaults.altFormat){altFormattedDateTime=$.datepicker.formatDate(this._defaults.altFormat,(dt===null?new Date():dt),formatCfg)}else{altFormattedDateTime=this.formattedDate}
if(altFormattedDateTime){altFormattedDateTime+=altSeparator}}
if(this._defaults.altTimeFormat!==null){altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix}else{altFormattedDateTime+=this.formattedTime+altTimeSuffix}
this.$altInput.val(altFormattedDateTime)}else{this.$input.val(formattedDateTime)}
this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!==inst.lastVal)){try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop('slide',null).slider({orientation:"horizontal",value:rtl?val*-1:val,min:rtl?max*-1:min,max:rtl?min*-1:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?ui.value*-1:ui.value);tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if(typeof(opts)==='string'){if(opts==='min'||opts==='max'){if(val!==undefined){return obj.slider(opts,val*-1)}
return Math.abs(obj.slider(opts))}
return obj.slider(opts)}
var min=opts.min,max=opts.max;opts.min=opts.max=null;if(min!==undefined){opts.max=min*-1}
if(max!==undefined){opts.min=max*-1}
return obj.slider(opts)}
if(typeof(opts)==='string'&&val!==undefined){return obj.slider(opts,val)}
return obj.slider(opts)},value:function(tp_inst,obj,unit,val){if(tp_inst._defaults.isRTL){if(val!==undefined){return obj.slider('value',val*-1)}
return Math.abs(obj.slider('value'))}
if(val!==undefined){return obj.slider('value',val)}
return obj.slider('value')}},select:{create:function(tp_inst,obj,unit,val,min,max,step){var sel='<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',format=tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat;for(var i=min;i<=max;i+=step){sel+='<option value="'+i+'"'+(i===val?' selected':'')+'>';if(unit==='hour'){sel+=$.datepicker.formatTime($.trim(format.replace(/[^ht ]/ig,'')),{hour:i},tp_inst._defaults)}else if(unit==='millisec'||unit==='microsec'||i>=10){sel+=i}else{sel+='0'+i.toString()}
sel+='</option>'}
sel+='</select>';obj.children('select').remove();$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange();tp_inst._onSelectHandler();tp_inst._afterInject()});return obj},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children('select');if(typeof(opts)==='string'){if(val===undefined){return $t.data(opts)}
o[opts]=val}else{o=opts}
return tp_inst.control.create(tp_inst,obj,$t.data('unit'),$t.val(),o.min>=0?o.min:$t.data('min'),o.max||$t.data('max'),o.step||$t.data('step'))},value:function(tp_inst,obj,unit,val){var $t=obj.children('select');if(val!==undefined){return $t.val(val)}
return $t.val()}}}});$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);if(typeof o==='object'){tmp_args[0]=$.extend(o,{timeOnly:!0})}
return $(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){o=o||{};var tmp_args=arguments;if(typeof(o)==='string'){if(o==='getDate'||(o==='option'&&tmp_args.length===2&&typeof(tmp_args[1])==='string')){return $.fn.datepicker.apply($(this[0]),tmp_args)}else{return this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)})}}else{return this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}}});$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec);parseRes.date.setMicroseconds(t.microsec)}
return parseRes.date};$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),iso8601=(timeFormat.replace(/\'.*?\'/g,'').indexOf('Z')!==-1);var strictParse=function(f,s,o){var getPatternAmpm=function(amNames,pmNames){var markers=[];if(amNames){$.merge(markers,amNames)}
if(pmNames){$.merge(markers,pmNames)}
markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,'\\$&')});return'('+markers.join('|')+')?'};var getFormatPositions=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(finds){for(var i=0;i<finds.length;i++){if(orders[finds[i].toString().charAt(0)]===-1){orders[finds[i].toString().charAt(0)]=i+1}}}
return orders};var regstr='^'+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){var ml=match.length;switch(match.charAt(0).toLowerCase()){case 'h':return ml===1?'(\\d?\\d)':'(\\d{'+ml+'})';case 'm':return ml===1?'(\\d?\\d)':'(\\d{'+ml+'})';case 's':return ml===1?'(\\d?\\d)':'(\\d{'+ml+'})';case 'l':return'(\\d?\\d?\\d)';case 'c':return'(\\d?\\d?\\d)';case 'z':return'(z|[-+]\\d\\d:?\\d\\d|\\S+)?';case 't':return getPatternAmpm(o.amNames,o.pmNames);default:return'('+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+')?'}}).replace(/\s/g,'\\s?')+o.timeSuffix+'$',order=getFormatPositions(f),ampm='',treg;treg=s.match(new RegExp(regstr,'i'));var resTime={hour:0,minute:0,second:0,millisec:0,microsec:0};if(treg){if(order.t!==-1){if(treg[order.t]===undefined||treg[order.t].length===0){ampm='';resTime.ampm=''}else{ampm=$.inArray(treg[order.t].toUpperCase(),$.map(o.amNames,function(x,i){return x.toUpperCase()}))!==-1?'AM':'PM';resTime.ampm=o[ampm==='AM'?'amNames':'pmNames'][0]}}
if(order.h!==-1){if(ampm==='AM'&&treg[order.h]==='12'){resTime.hour=0}else{if(ampm==='PM'&&treg[order.h]!=='12'){resTime.hour=parseInt(treg[order.h],10)+12}else{resTime.hour=Number(treg[order.h])}}}
if(order.m!==-1){resTime.minute=Number(treg[order.m])}
if(order.s!==-1){resTime.second=Number(treg[order.s])}
if(order.l!==-1){resTime.millisec=Number(treg[order.l])}
if(order.c!==-1){resTime.microsec=Number(treg[order.c])}
if(order.z!==-1&&treg[order.z]!==undefined){resTime.timezone=$.timepicker.timezoneOffsetNumber(treg[order.z])}
return resTime}
return!1};var looseParse=function(f,s,o){try{var d=new Date('2012-01-01 '+s);if(isNaN(d.getTime())){d=new Date('2012-01-01T'+s);if(isNaN(d.getTime())){d=new Date('01/01/2012 '+s);if(isNaN(d.getTime())){throw "Unable to parse time with native Date: "+s}}}
return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:d.getTimezoneOffset()*-1}}catch(err){try{return strictParse(f,s,o)}catch(err2){$.timepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}
return!1};if(typeof o.parse==="function"){return o.parse(timeFormat,timeString,o)}
if(o.parse==='loose'){return looseParse(timeFormat,timeString,o)}
return strictParse(timeFormat,timeString,o)};$.datepicker.formatTime=function(format,time,options){options=options||{};options=$.extend({},$.timepicker._defaults,options);time=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);if(hour>11){ampmName=options.pmNames[0]}
tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){switch(match){case 'HH':return('0'+hour).slice(-2);case 'H':return hour;case 'hh':return('0'+convert24to12(hour)).slice(-2);case 'h':return convert24to12(hour);case 'mm':return('0'+time.minute).slice(-2);case 'm':return time.minute;case 'ss':return('0'+time.second).slice(-2);case 's':return time.second;case 'l':return('00'+time.millisec).slice(-3);case 'c':return('00'+time.microsec).slice(-3);case 'z':return $.timepicker.timezoneOffsetString(time.timezone===null?options.timezone:time.timezone,!1);case 'Z':return $.timepicker.timezoneOffsetString(time.timezone===null?options.timezone:time.timezone,!0);case 'T':return ampmName.charAt(0).toUpperCase();case 'TT':return ampmName.toUpperCase();case 't':return ampmName.charAt(0).toLowerCase();case 'tt':return ampmName.toLowerCase();default:return match.replace(/'/g,"")}});return tmptime};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,'timepicker'),was_inline;if(tp_inst&&inst.settings.showTimepicker){tp_inst._limitMinMaxDateTime(inst,!0);was_inline=inst.inline;inst.inline=inst.stay_open=!0;this._base_selectDate(id,dateStr);inst.inline=was_inline;inst.stay_open=!1;this._notifyChange(inst);this._updateDatepicker(inst)}else{this._base_selectDate(id,dateStr)}};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if($.datepicker._curInst&&$.datepicker._curInst!==inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input){return}
if(typeof(inst.stay_open)!=='boolean'||inst.stay_open===!1){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,'timepicker');if(tp_inst){tp_inst._addTimePicker(inst)}}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if($.datepicker._get(inst,'constrainInput')){var ampm=tp_inst.support.ampm,tz=tp_inst._defaults.showTimezone!==null?tp_inst._defaults.showTimezone:tp_inst.support.timezone,dateChars=$.datepicker._possibleChars($.datepicker._get(inst,'dateFormat')),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,'').replace(/TT/g,ampm?'APM':'').replace(/Tt/g,ampm?'AaPpMm':'').replace(/tT/g,ampm?'AaPpMm':'').replace(/T/g,ampm?'AP':'').replace(/tt/g,ampm?'apm':'').replace(/t/g,ampm?'ap':'')+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tz?tp_inst._defaults.timezoneList.join(''):'')+(tp_inst._defaults.amNames.join(''))+(tp_inst._defaults.pmNames.join(''))+dateChars,chr=String.fromCharCode(event.charCode===undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<' '||!dateChars||datetimeChars.indexOf(chr)>-1)}}
return $.datepicker._base_doKeyPress(event)};$.datepicker._base_updateAlternate=$.datepicker._updateAlternate;$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,'timepicker');if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){var altFormat=tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat,date=this._getDate(inst),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime='',altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=tp_inst._defaults.altTimeFormat!==null?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix;if(!tp_inst._defaults.timeOnly&&!tp_inst._defaults.altFieldTimeOnly&&date!==null){if(tp_inst._defaults.altFormat){altFormattedDateTime=$.datepicker.formatDate(tp_inst._defaults.altFormat,date,formatCfg)+altSeparator+altFormattedDateTime}else{altFormattedDateTime=tp_inst.formattedDate+altSeparator+altFormattedDateTime}}
$(altField).val(inst.input.val()?altFormattedDateTime:"")}}else{$.datepicker._base_updateAlternate(inst)}};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,'timepicker');if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!==inst.lastVal)){try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}}
return $.datepicker._base_doKeyUp(event)};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]);this._base_gotoToday(id);var tp_inst=this._get(inst,'timepicker');if(!tp_inst){return}
var tzoffset=$.timepicker.timezoneOffsetNumber(tp_inst.timezone);var now=new Date();now.setMinutes(now.getMinutes()+now.getTimezoneOffset()+parseInt(tzoffset,10));this._setTime(inst,now);this._setDate(inst,now);tp_inst._onSelectHandler()};$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return}
var tp_inst=this._get(inst,'timepicker');$(target).datepicker('getDate');if(tp_inst){inst.settings.showTimepicker=!1;tp_inst._defaults.showTimepicker=!1;tp_inst._updateDateTime(inst)}};$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return}
var tp_inst=this._get(inst,'timepicker');$(target).datepicker('getDate');if(tp_inst){inst.settings.showTimepicker=!0;tp_inst._defaults.showTimepicker=!0;tp_inst._addTimePicker(inst);tp_inst._updateDateTime(inst)}};$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,'timepicker');if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour;tp_inst.minute=date?date.getMinutes():defaults.minute;tp_inst.second=date?date.getSeconds():defaults.second;tp_inst.millisec=date?date.getMilliseconds():defaults.millisec;tp_inst.microsec=date?date.getMicroseconds():defaults.microsec;tp_inst._limitMinMaxDateTime(inst,!0);tp_inst._onTimeChange();tp_inst._updateDateTime(inst)}};$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(!inst){return}
var tp_inst=this._get(inst,'timepicker');if(tp_inst){this._setDateFromField(inst);var tp_date;if(date){if(typeof date==="string"){tp_inst._parseTime(date,withDate);tp_date=new Date();tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);tp_date.setMicroseconds(tp_inst.microsec)}else{tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds())}
if(tp_date.toString()==='Invalid Date'){tp_date=undefined}
this._setTime(inst,tp_date)}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(target,_date){var inst=this._getInst(target);var date=_date;if(!inst){return}
if(typeof(_date)==='string'){date=new Date(_date);if(!date.getTime()){this._base_setDateDatepicker.apply(this,arguments);date=$(target).datepicker('getDate')}}
var tp_inst=this._get(inst,'timepicker');var tp_date;if(date instanceof Date){tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds())}else{tp_date=date}
if(tp_inst&&tp_date){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null){tp_inst.timezone=tp_date.getTimezoneOffset()*-1}
date=$.timepicker.timezoneAdjust(date,$.timepicker.timezoneOffsetString(-date.getTimezoneOffset()),tp_inst.timezone);tp_date=$.timepicker.timezoneAdjust(tp_date,$.timepicker.timezoneOffsetString(-tp_date.getTimezoneOffset()),tp_inst.timezone)}
this._updateDatepicker(inst);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(target,tp_date,!0)};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(!inst){return}
var tp_inst=this._get(inst,'timepicker');if(tp_inst){if(inst.lastVal===undefined){this._setDateFromField(inst,noDefault)}
var date=this._getDate(inst);var currDT=null;if(tp_inst.$altInput&&tp_inst._defaults.altFieldTimeOnly){currDT=tp_inst.$input.val()+' '+tp_inst.$altInput.val()}else if(tp_inst.$input.get(0).tagName!=='INPUT'&&tp_inst.$altInput){currDT=tp_inst.$altInput.val()}else{currDT=tp_inst.$input.val()}
if(date&&tp_inst._parseTime(currDT,!inst.settings.timeOnly)){date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);date.setMicroseconds(tp_inst.microsec);if(tp_inst.timezone!=null){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null){tp_inst.timezone=date.getTimezoneOffset()*-1}
date=$.timepicker.timezoneAdjust(date,tp_inst.timezone,$.timepicker.timezoneOffsetString(-date.getTimezoneOffset()))}}
return date}
return this._base_getDateDatepicker(target,noDefault)};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){if(err.indexOf(":")>=0){date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(':')-2)),settings);$.timepicker.log("Error parsing the date string: "+err+"\ndate string = "+value+"\ndate format = "+format)}else{throw err}}
return date};$.datepicker._base_formatDate=$.datepicker._formatDate;$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,'timepicker');if(tp_inst){tp_inst._updateDateTime(inst);return tp_inst.$input.val()}
return this._base_formatDate(inst)};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;$.datepicker._optionDatepicker=function(target,name,value){var inst=this._getInst(target),name_clone;if(!inst){return null}
var tp_inst=this._get(inst,'timepicker');if(tp_inst){var min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={},prop,ret,oldVal,$target;if(typeof name==='string'){if(name==='minDate'||name==='minDateTime'){min=value}else if(name==='maxDate'||name==='maxDateTime'){max=value}else if(name==='onSelect'){onselect=value}else if(overrides.hasOwnProperty(name)){if(typeof(value)==='undefined'){return overrides[name]}
fns[name]=value;name_clone={}}}else if(typeof name==='object'){if(name.minDate){min=name.minDate}else if(name.minDateTime){min=name.minDateTime}else if(name.maxDate){max=name.maxDate}else if(name.maxDateTime){max=name.maxDateTime}
for(prop in overrides){if(overrides.hasOwnProperty(prop)&&name[prop]){fns[prop]=name[prop]}}}
for(prop in fns){if(fns.hasOwnProperty(prop)){overrides[prop]=fns[prop];if(!name_clone){name_clone=$.extend({},name)}
delete name_clone[prop]}}
if(name_clone&&isEmptyObject(name_clone)){return}
if(min){if(min===0){min=new Date()}else{min=new Date(min)}
tp_inst._defaults.minDate=min;tp_inst._defaults.minDateTime=min}else if(max){if(max===0){max=new Date()}else{max=new Date(max)}
tp_inst._defaults.maxDate=max;tp_inst._defaults.maxDateTime=max}else if(onselect){tp_inst._defaults.onSelect=onselect}
if(min||max){$target=$(target);oldVal=$target.datetimepicker('getDate');ret=this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value);$target.datetimepicker('setDate',oldVal);return ret}}
if(value===undefined){return this._base_optionDatepicker.call($.datepicker,target,name)}
return this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;for(prop in obj){if(obj.hasOwnProperty(prop)){return!1}}
return!0};var extendRemove=function(target,props){$.extend(target,props);for(var name in props){if(props[name]===null||props[name]===undefined){target[name]=props[name]}}
return target};var detectSupport=function(timeFormat){var tf=timeFormat.replace(/'.*?'/g,'').toLowerCase(),isIn=function(f,t){return f.indexOf(t)!==-1?!0:!1};return{hour:isIn(tf,'h'),minute:isIn(tf,'m'),second:isIn(tf,'s'),millisec:isIn(tf,'l'),microsec:isIn(tf,'c'),timezone:isIn(tf,'z'),ampm:isIn(tf,'t')&&isIn(timeFormat,'h'),iso8601:isIn(timeFormat,'Z')}};var convert24to12=function(hour){hour%=12;if(hour===0){hour=12}
return String(hour)};var computeEffectiveSetting=function(settings,property){return settings&&settings[property]?settings[property]:$.timepicker._defaults[property]};var splitDateTime=function(dateTimeString,timeSettings){var separator=computeEffectiveSetting(timeSettings,'separator'),format=computeEffectiveSetting(timeSettings,'timeFormat'),timeParts=format.split(separator),timePartsLen=timeParts.length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;if(allPartsLen>1){return{dateString:allParts.splice(0,allPartsLen-timePartsLen).join(separator),timeString:allParts.splice(0,timePartsLen).join(separator)}}
return{dateString:dateTimeString,timeString:''}};var parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,parts,parsedTime;parts=splitDateTime(dateTimeString,timeSettings);date=$.datepicker._base_parseDate(dateFormat,parts.dateString,dateSettings);if(parts.timeString===''){return{date:date}}
parsedTime=$.datepicker.parseTime(timeFormat,parts.timeString,timeSettings);if(!parsedTime){throw 'Wrong time format'}
return{date:date,timeObj:parsedTime}};var selectLocalTimezone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){var now=date||new Date();tp_inst.timezone_select.val(-now.getTimezoneOffset())}};$.timepicker=new Timepicker();$.timepicker.timezoneOffsetString=function(tzMinutes,iso8601){if(isNaN(tzMinutes)||tzMinutes>840||tzMinutes<-720){return tzMinutes}
var off=tzMinutes,minutes=off%60,hours=(off-minutes)/60,iso=iso8601?':':'',tz=(off>=0?'+':'-')+('0'+Math.abs(hours)).slice(-2)+iso+('0'+Math.abs(minutes)).slice(-2);if(tz==='+00:00'){return'Z'}
return tz};$.timepicker.timezoneOffsetNumber=function(tzString){var normalized=tzString.toString().replace(':','');if(normalized.toUpperCase()==='Z'){return 0}
if(!/^(\-|\+)\d{4}$/.test(normalized)){return parseInt(tzString,10)}
return((normalized.substr(0,1)==='-'?-1:1)*((parseInt(normalized.substr(1,2),10)*60)+parseInt(normalized.substr(3,2),10)))};$.timepicker.timezoneAdjust=function(date,fromTimezone,toTimezone){var fromTz=$.timepicker.timezoneOffsetNumber(fromTimezone);var toTz=$.timepicker.timezoneOffsetNumber(toTimezone);if(!isNaN(toTz)){date.setMinutes(date.getMinutes()+(-fromTz)-(-toTz))}
return date};$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange('timepicker',startTime,endTime,options)};$.timepicker.datetimeRange=function(startTime,endTime,options){$.timepicker.handleRange('datetimepicker',startTime,endTime,options)};$.timepicker.dateRange=function(startTime,endTime,options){$.timepicker.handleRange('datepicker',startTime,endTime,options)};$.timepicker.handleRange=function(method,startTime,endTime,options){options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options);var timeOnly=!1;if(method==='timepicker'){timeOnly=!0;method='datetimepicker'}
function checkDates(changed,other){var startdt=startTime[method]('getDate'),enddt=endTime[method]('getDate'),changeddt=changed[method]('getDate');if(startdt!==null){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval);maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval);if(options.minInterval>0&&minDate>enddt){endTime[method]('setDate',minDate)}else if(options.maxInterval>0&&maxDate<enddt){endTime[method]('setDate',maxDate)}else if(startdt>enddt){other[method]('setDate',changeddt)}}}
function selected(changed,other,option){if(!changed.val()){return}
var date=changed[method].call(changed,'getDate');if(date!==null&&options.minInterval>0){if(option==='minDate'){date.setMilliseconds(date.getMilliseconds()+options.minInterval)}
if(option==='maxDate'){date.setMilliseconds(date.getMilliseconds()-options.minInterval)}}
if(date.getTime){other[method].call(other,'option',option,date)}}
$.fn[method].call(startTime,$.extend({timeOnly:timeOnly,onClose:function(dateText,inst){checkDates($(this),endTime)},onSelect:function(selectedDateTime){selected($(this),endTime,'minDate')}},options,options.start));$.fn[method].call(endTime,$.extend({timeOnly:timeOnly,onClose:function(dateText,inst){checkDates($(this),startTime)},onSelect:function(selectedDateTime){selected($(this),startTime,'maxDate')}},options,options.end));checkDates(startTime,endTime);selected(startTime,endTime,'minDate');selected(endTime,startTime,'maxDate');return $([startTime.get(0),endTime.get(0)])};$.timepicker.log=function(){if(window.console&&window.console.log&&window.console.log.apply){window.console.log.apply(window.console,Array.prototype.slice.call(arguments))}};$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal};if(!Date.prototype.getMicroseconds){Date.prototype.microseconds=0;Date.prototype.getMicroseconds=function(){return this.microseconds};Date.prototype.setMicroseconds=function(m){this.setMilliseconds(this.getMilliseconds()+Math.floor(m/1000));this.microseconds=m%1000;return this}}
$.timepicker.version="1.6.3"}));
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/superfish/dist/js/hoverIntent.js */
(function($){$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var cfg={interval:100,sensitivity:7,timeout:0};if(typeof handlerIn==="object"){cfg=$.extend(cfg,handlerIn)}else if($.isFunction(handlerOut)){cfg=$.extend(cfg,{over:handlerIn,out:handlerOut,selector:selector})}else{cfg=$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut})}
var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).off("mousemove.hoverIntent",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}
if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).on("mousemove.hoverIntent",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).off("mousemove.hoverIntent",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.on({'mouseenter.hoverIntent':handleHover,'mouseleave.hoverIntent':handleHover},cfg.selector)}})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/drmonty/smartmenus/js/jquery.smartmenus.js */
/*!
 * SmartMenus jQuery Plugin - v1.1.0 - September 17, 2017
 * http://www.smartmenus.org/
 *
 * Copyright Vasil Dinkov, Vadikom Web Ltd.
 * http://vadikom.com
 *
 * Licensed MIT
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else if(typeof module==='object'&&typeof module.exports==='object'){module.exports=factory(require('jquery'))}else{factory(jQuery)}}(function($){var menuTrees=[],mouse=!1,touchEvents='ontouchstart' in window,mouseDetectionEnabled=!1,requestAnimationFrame=window.requestAnimationFrame||function(callback){return setTimeout(callback,1000/60)},cancelAnimationFrame=window.cancelAnimationFrame||function(id){clearTimeout(id)},canAnimate=!!$.fn.animate;function initMouseDetection(disable){var eNS='.smartmenus_mouse';if(!mouseDetectionEnabled&&!disable){var firstTime=!0,lastMove=null,events={'mousemove':function(e){var thisMove={x:e.pageX,y:e.pageY,timeStamp:new Date().getTime()};if(lastMove){var deltaX=Math.abs(lastMove.x-thisMove.x),deltaY=Math.abs(lastMove.y-thisMove.y);if((deltaX>0||deltaY>0)&&deltaX<=2&&deltaY<=2&&thisMove.timeStamp-lastMove.timeStamp<=300){mouse=!0;if(firstTime){var $a=$(e.target).closest('a');if($a.is('a')){$.each(menuTrees,function(){if($.contains(this.$root[0],$a[0])){this.itemEnter({currentTarget:$a[0]});return!1}})}
firstTime=!1}}}
lastMove=thisMove}};events[touchEvents?'touchstart':'pointerover pointermove pointerout MSPointerOver MSPointerMove MSPointerOut']=function(e){if(isTouchEvent(e.originalEvent)){mouse=!1}};$(document).on(getEventsNS(events,eNS));mouseDetectionEnabled=!0}else if(mouseDetectionEnabled&&disable){$(document).off(eNS);mouseDetectionEnabled=!1}}
function isTouchEvent(e){return!/^(4|mouse)$/.test(e.pointerType)}
function getEventsNS(events,eNS){if(!eNS){eNS=''}
var eventsNS={};for(var i in events){eventsNS[i.split(' ').join(eNS+' ')+eNS]=events[i]}
return eventsNS}
$.SmartMenus=function(elm,options){this.$root=$(elm);this.opts=options;this.rootId='';this.accessIdPrefix='';this.$subArrow=null;this.activatedItems=[];this.visibleSubMenus=[];this.showTimeout=0;this.hideTimeout=0;this.scrollTimeout=0;this.clickActivated=!1;this.focusActivated=!1;this.zIndexInc=0;this.idInc=0;this.$firstLink=null;this.$firstSub=null;this.disabled=!1;this.$disableOverlay=null;this.$touchScrollingSub=null;this.cssTransforms3d='perspective' in elm.style||'webkitPerspective' in elm.style;this.wasCollapsible=!1;this.init()};$.extend($.SmartMenus,{hideAll:function(){$.each(menuTrees,function(){this.menuHideAll()})},destroy:function(){while(menuTrees.length){menuTrees[0].destroy()}
initMouseDetection(!0)},prototype:{init:function(refresh){var self=this;if(!refresh){menuTrees.push(this);this.rootId=(new Date().getTime()+Math.random()+'').replace(/\D/g,'');this.accessIdPrefix='sm-'+this.rootId+'-';if(this.$root.hasClass('sm-rtl')){this.opts.rightToLeftSubMenus=!0}
var eNS='.smartmenus';this.$root.data('smartmenus',this).attr('data-smartmenus-id',this.rootId).dataSM('level',1).on(getEventsNS({'mouseover focusin':$.proxy(this.rootOver,this),'mouseout focusout':$.proxy(this.rootOut,this),'keydown':$.proxy(this.rootKeyDown,this)},eNS)).on(getEventsNS({'mouseenter':$.proxy(this.itemEnter,this),'mouseleave':$.proxy(this.itemLeave,this),'mousedown':$.proxy(this.itemDown,this),'focus':$.proxy(this.itemFocus,this),'blur':$.proxy(this.itemBlur,this),'click':$.proxy(this.itemClick,this)},eNS),'a');eNS+=this.rootId;if(this.opts.hideOnClick){$(document).on(getEventsNS({'touchstart':$.proxy(this.docTouchStart,this),'touchmove':$.proxy(this.docTouchMove,this),'touchend':$.proxy(this.docTouchEnd,this),'click':$.proxy(this.docClick,this)},eNS))}
$(window).on(getEventsNS({'resize orientationchange':$.proxy(this.winResize,this)},eNS));if(this.opts.subIndicators){this.$subArrow=$('<span/>').addClass('sub-arrow');if(this.opts.subIndicatorsText){this.$subArrow.html(this.opts.subIndicatorsText)}}
initMouseDetection()}
this.$firstSub=this.$root.find('ul').each(function(){self.menuInit($(this))}).eq(0);this.$firstLink=this.$root.find('a').eq(0);if(this.opts.markCurrentItem){var reDefaultDoc=/(index|default)\.[^#\?\/]*/i,reHash=/#.*/,locHref=window.location.href.replace(reDefaultDoc,''),locHrefNoHash=locHref.replace(reHash,'');this.$root.find('a').each(function(){var href=this.href.replace(reDefaultDoc,''),$this=$(this);if(href==locHref||href==locHrefNoHash){$this.addClass('current');if(self.opts.markCurrentTree){$this.parentsUntil('[data-smartmenus-id]','ul').each(function(){$(this).dataSM('parent-a').addClass('current')})}}})}
this.wasCollapsible=this.isCollapsible()},destroy:function(refresh){if(!refresh){var eNS='.smartmenus';this.$root.removeData('smartmenus').removeAttr('data-smartmenus-id').removeDataSM('level').off(eNS);eNS+=this.rootId;$(document).off(eNS);$(window).off(eNS);if(this.opts.subIndicators){this.$subArrow=null}}
this.menuHideAll();var self=this;this.$root.find('ul').each(function(){var $this=$(this);if($this.dataSM('scroll-arrows')){$this.dataSM('scroll-arrows').remove()}
if($this.dataSM('shown-before')){if(self.opts.subMenusMinWidth||self.opts.subMenusMaxWidth){$this.css({width:'',minWidth:'',maxWidth:''}).removeClass('sm-nowrap')}
if($this.dataSM('scroll-arrows')){$this.dataSM('scroll-arrows').remove()}
$this.css({zIndex:'',top:'',left:'',marginLeft:'',marginTop:'',display:''})}
if(($this.attr('id')||'').indexOf(self.accessIdPrefix)==0){$this.removeAttr('id')}}).removeDataSM('in-mega').removeDataSM('shown-before').removeDataSM('scroll-arrows').removeDataSM('parent-a').removeDataSM('level').removeDataSM('beforefirstshowfired').removeAttr('role').removeAttr('aria-hidden').removeAttr('aria-labelledby').removeAttr('aria-expanded');this.$root.find('a.has-submenu').each(function(){var $this=$(this);if($this.attr('id').indexOf(self.accessIdPrefix)==0){$this.removeAttr('id')}}).removeClass('has-submenu').removeDataSM('sub').removeAttr('aria-haspopup').removeAttr('aria-controls').removeAttr('aria-expanded').closest('li').removeDataSM('sub');if(this.opts.subIndicators){this.$root.find('span.sub-arrow').remove()}
if(this.opts.markCurrentItem){this.$root.find('a.current').removeClass('current')}
if(!refresh){this.$root=null;this.$firstLink=null;this.$firstSub=null;if(this.$disableOverlay){this.$disableOverlay.remove();this.$disableOverlay=null}
menuTrees.splice($.inArray(this,menuTrees),1)}},disable:function(noOverlay){if(!this.disabled){this.menuHideAll();if(!noOverlay&&!this.opts.isPopup&&this.$root.is(':visible')){var pos=this.$root.offset();this.$disableOverlay=$('<div class="sm-jquery-disable-overlay"/>').css({position:'absolute',top:pos.top,left:pos.left,width:this.$root.outerWidth(),height:this.$root.outerHeight(),zIndex:this.getStartZIndex(!0),opacity:0}).appendTo(document.body)}
this.disabled=!0}},docClick:function(e){if(this.$touchScrollingSub){this.$touchScrollingSub=null;return}
if(this.visibleSubMenus.length&&!$.contains(this.$root[0],e.target)||$(e.target).closest('a').length){this.menuHideAll()}},docTouchEnd:function(e){if(!this.lastTouch){return}
if(this.visibleSubMenus.length&&(this.lastTouch.x2===undefined||this.lastTouch.x1==this.lastTouch.x2)&&(this.lastTouch.y2===undefined||this.lastTouch.y1==this.lastTouch.y2)&&(!this.lastTouch.target||!$.contains(this.$root[0],this.lastTouch.target))){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}
var self=this;this.hideTimeout=setTimeout(function(){self.menuHideAll()},350)}
this.lastTouch=null},docTouchMove:function(e){if(!this.lastTouch){return}
var touchPoint=e.originalEvent.touches[0];this.lastTouch.x2=touchPoint.pageX;this.lastTouch.y2=touchPoint.pageY},docTouchStart:function(e){var touchPoint=e.originalEvent.touches[0];this.lastTouch={x1:touchPoint.pageX,y1:touchPoint.pageY,target:touchPoint.target}},enable:function(){if(this.disabled){if(this.$disableOverlay){this.$disableOverlay.remove();this.$disableOverlay=null}
this.disabled=!1}},getClosestMenu:function(elm){var $closestMenu=$(elm).closest('ul');while($closestMenu.dataSM('in-mega')){$closestMenu=$closestMenu.parent().closest('ul')}
return $closestMenu[0]||null},getHeight:function($elm){return this.getOffset($elm,!0)},getOffset:function($elm,height){var old;if($elm.css('display')=='none'){old={position:$elm[0].style.position,visibility:$elm[0].style.visibility};$elm.css({position:'absolute',visibility:'hidden'}).show()}
var box=$elm[0].getBoundingClientRect&&$elm[0].getBoundingClientRect(),val=box&&(height?box.height||box.bottom-box.top:box.width||box.right-box.left);if(!val&&val!==0){val=height?$elm[0].offsetHeight:$elm[0].offsetWidth}
if(old){$elm.hide().css(old)}
return val},getStartZIndex:function(root){var zIndex=parseInt(this[root?'$root':'$firstSub'].css('z-index'));if(!root&&isNaN(zIndex)){zIndex=parseInt(this.$root.css('z-index'))}
return!isNaN(zIndex)?zIndex:1},getTouchPoint:function(e){return e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0]||e},getViewport:function(height){var name=height?'Height':'Width',val=document.documentElement['client'+name],val2=window['inner'+name];if(val2){val=Math.min(val,val2)}
return val},getViewportHeight:function(){return this.getViewport(!0)},getViewportWidth:function(){return this.getViewport()},getWidth:function($elm){return this.getOffset($elm)},handleEvents:function(){return!this.disabled&&this.isCSSOn()},handleItemEvents:function($a){return this.handleEvents()&&!this.isLinkInMegaMenu($a)},isCollapsible:function(){return this.$firstSub.css('position')=='static'},isCSSOn:function(){return this.$firstLink.css('display')!='inline'},isFixed:function(){var isFixed=this.$root.css('position')=='fixed';if(!isFixed){this.$root.parentsUntil('body').each(function(){if($(this).css('position')=='fixed'){isFixed=!0;return!1}})}
return isFixed},isLinkInMegaMenu:function($a){return $(this.getClosestMenu($a[0])).hasClass('mega-menu')},isTouchMode:function(){return!mouse||this.opts.noMouseOver||this.isCollapsible()},itemActivate:function($a,hideDeeperSubs){var $ul=$a.closest('ul'),level=$ul.dataSM('level');if(level>1&&(!this.activatedItems[level-2]||this.activatedItems[level-2][0]!=$ul.dataSM('parent-a')[0])){var self=this;$($ul.parentsUntil('[data-smartmenus-id]','ul').get().reverse()).add($ul).each(function(){self.itemActivate($(this).dataSM('parent-a'))})}
if(!this.isCollapsible()||hideDeeperSubs){this.menuHideSubMenus(!this.activatedItems[level-1]||this.activatedItems[level-1][0]!=$a[0]?level-1:level)}
this.activatedItems[level-1]=$a;if(this.$root.triggerHandler('activate.smapi',$a[0])===!1){return}
var $sub=$a.dataSM('sub');if($sub&&(this.isTouchMode()||(!this.opts.showOnClick||this.clickActivated))){this.menuShow($sub)}},itemBlur:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
this.$root.triggerHandler('blur.smapi',$a[0])},itemClick:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
if(this.$touchScrollingSub&&this.$touchScrollingSub[0]==$a.closest('ul')[0]){this.$touchScrollingSub=null;e.stopPropagation();return!1}
if(this.$root.triggerHandler('click.smapi',$a[0])===!1){return!1}
var subArrowClicked=$(e.target).is('.sub-arrow'),$sub=$a.dataSM('sub'),firstLevelSub=$sub?$sub.dataSM('level')==2:!1,collapsible=this.isCollapsible(),behaviorToggle=/toggle$/.test(this.opts.collapsibleBehavior),behaviorLink=/link$/.test(this.opts.collapsibleBehavior),behaviorAccordion=/^accordion/.test(this.opts.collapsibleBehavior);if($sub&&!$sub.is(':visible')){if(!behaviorLink||!collapsible||subArrowClicked){if(this.opts.showOnClick&&firstLevelSub){this.clickActivated=!0}
this.itemActivate($a,behaviorAccordion);if($sub.is(':visible')){this.focusActivated=!0;return!1}}}else if(collapsible&&(behaviorToggle||subArrowClicked)){this.itemActivate($a,behaviorAccordion);this.menuHide($sub);if(behaviorToggle){this.focusActivated=!1}
return!1}
if(this.opts.showOnClick&&firstLevelSub||$a.hasClass('disabled')||this.$root.triggerHandler('select.smapi',$a[0])===!1){return!1}},itemDown:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
$a.dataSM('mousedown',!0)},itemEnter:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
if(!this.isTouchMode()){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}
var self=this;this.showTimeout=setTimeout(function(){self.itemActivate($a)},this.opts.showOnClick&&$a.closest('ul').dataSM('level')==1?1:this.opts.showTimeout)}
this.$root.triggerHandler('mouseenter.smapi',$a[0])},itemFocus:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
if(this.focusActivated&&(!this.isTouchMode()||!$a.dataSM('mousedown'))&&(!this.activatedItems.length||this.activatedItems[this.activatedItems.length-1][0]!=$a[0])){this.itemActivate($a,!0)}
this.$root.triggerHandler('focus.smapi',$a[0])},itemLeave:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
if(!this.isTouchMode()){$a[0].blur();if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}}
$a.removeDataSM('mousedown');this.$root.triggerHandler('mouseleave.smapi',$a[0])},menuHide:function($sub){if(this.$root.triggerHandler('beforehide.smapi',$sub[0])===!1){return}
if(canAnimate){$sub.stop(!0,!0)}
if($sub.css('display')!='none'){var complete=function(){$sub.css('z-index','')};if(this.isCollapsible()){if(canAnimate&&this.opts.collapsibleHideFunction){this.opts.collapsibleHideFunction.call(this,$sub,complete)}else{$sub.hide(this.opts.collapsibleHideDuration,complete)}}else{if(canAnimate&&this.opts.hideFunction){this.opts.hideFunction.call(this,$sub,complete)}else{$sub.hide(this.opts.hideDuration,complete)}}
if($sub.dataSM('scroll')){this.menuScrollStop($sub);$sub.css({'touch-action':'','-ms-touch-action':'','-webkit-transform':'',transform:''}).off('.smartmenus_scroll').removeDataSM('scroll').dataSM('scroll-arrows').hide()}
$sub.dataSM('parent-a').removeClass('highlighted').attr('aria-expanded','false');$sub.attr({'aria-expanded':'false','aria-hidden':'true'});var level=$sub.dataSM('level');this.activatedItems.splice(level-1,1);this.visibleSubMenus.splice($.inArray($sub,this.visibleSubMenus),1);this.$root.triggerHandler('hide.smapi',$sub[0])}},menuHideAll:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}
var level=this.opts.isPopup?1:0;for(var i=this.visibleSubMenus.length-1;i>=level;i--){this.menuHide(this.visibleSubMenus[i])}
if(this.opts.isPopup){if(canAnimate){this.$root.stop(!0,!0)}
if(this.$root.is(':visible')){if(canAnimate&&this.opts.hideFunction){this.opts.hideFunction.call(this,this.$root)}else{this.$root.hide(this.opts.hideDuration)}}}
this.activatedItems=[];this.visibleSubMenus=[];this.clickActivated=!1;this.focusActivated=!1;this.zIndexInc=0;this.$root.triggerHandler('hideAll.smapi')},menuHideSubMenus:function(level){for(var i=this.activatedItems.length-1;i>=level;i--){var $sub=this.activatedItems[i].dataSM('sub');if($sub){this.menuHide($sub)}}},menuInit:function($ul){if(!$ul.dataSM('in-mega')){if($ul.hasClass('mega-menu')){$ul.find('ul').dataSM('in-mega',!0)}
var level=2,par=$ul[0];while((par=par.parentNode.parentNode)!=this.$root[0]){level++}
var $a=$ul.prevAll('a').eq(-1);if(!$a.length){$a=$ul.prevAll().find('a').eq(-1)}
$a.addClass('has-submenu').dataSM('sub',$ul);$ul.dataSM('parent-a',$a).dataSM('level',level).parent().dataSM('sub',$ul);var aId=$a.attr('id')||this.accessIdPrefix+(++this.idInc),ulId=$ul.attr('id')||this.accessIdPrefix+(++this.idInc);$a.attr({id:aId,'aria-haspopup':'true','aria-controls':ulId,'aria-expanded':'false'});$ul.attr({id:ulId,'role':'group','aria-hidden':'true','aria-labelledby':aId,'aria-expanded':'false'});if(this.opts.subIndicators){$a[this.opts.subIndicatorsPos](this.$subArrow.clone())}}},menuPosition:function($sub){var $a=$sub.dataSM('parent-a'),$li=$a.closest('li'),$ul=$li.parent(),level=$sub.dataSM('level'),subW=this.getWidth($sub),subH=this.getHeight($sub),itemOffset=$a.offset(),itemX=itemOffset.left,itemY=itemOffset.top,itemW=this.getWidth($a),itemH=this.getHeight($a),$win=$(window),winX=$win.scrollLeft(),winY=$win.scrollTop(),winW=this.getViewportWidth(),winH=this.getViewportHeight(),horizontalParent=$ul.parent().is('[data-sm-horizontal-sub]')||level==2&&!$ul.hasClass('sm-vertical'),rightToLeft=this.opts.rightToLeftSubMenus&&!$li.is('[data-sm-reverse]')||!this.opts.rightToLeftSubMenus&&$li.is('[data-sm-reverse]'),subOffsetX=level==2?this.opts.mainMenuSubOffsetX:this.opts.subMenusSubOffsetX,subOffsetY=level==2?this.opts.mainMenuSubOffsetY:this.opts.subMenusSubOffsetY,x,y;if(horizontalParent){x=rightToLeft?itemW-subW-subOffsetX:subOffsetX;y=this.opts.bottomToTopSubMenus?-subH-subOffsetY:itemH+subOffsetY}else{x=rightToLeft?subOffsetX-subW:itemW-subOffsetX;y=this.opts.bottomToTopSubMenus?itemH-subOffsetY-subH:subOffsetY}
if(this.opts.keepInViewport){var absX=itemX+x,absY=itemY+y;if(rightToLeft&&absX<winX){x=horizontalParent?winX-absX+x:itemW-subOffsetX}else if(!rightToLeft&&absX+subW>winX+winW){x=horizontalParent?winX+winW-subW-absX+x:subOffsetX-subW}
if(!horizontalParent){if(subH<winH&&absY+subH>winY+winH){y+=winY+winH-subH-absY}else if(subH>=winH||absY<winY){y+=winY-absY}}
if(horizontalParent&&(absY+subH>winY+winH+0.49||absY<winY)||!horizontalParent&&subH>winH+0.49){var self=this;if(!$sub.dataSM('scroll-arrows')){$sub.dataSM('scroll-arrows',$([$('<span class="scroll-up"><span class="scroll-up-arrow"></span></span>')[0],$('<span class="scroll-down"><span class="scroll-down-arrow"></span></span>')[0]]).on({mouseenter:function(){$sub.dataSM('scroll').up=$(this).hasClass('scroll-up');self.menuScroll($sub)},mouseleave:function(e){self.menuScrollStop($sub);self.menuScrollOut($sub,e)},'mousewheel DOMMouseScroll':function(e){e.preventDefault()}}).insertAfter($sub))}
var eNS='.smartmenus_scroll';$sub.dataSM('scroll',{y:this.cssTransforms3d?0:y-itemH,step:1,itemH:itemH,subH:subH,arrowDownH:this.getHeight($sub.dataSM('scroll-arrows').eq(1))}).on(getEventsNS({'mouseover':function(e){self.menuScrollOver($sub,e)},'mouseout':function(e){self.menuScrollOut($sub,e)},'mousewheel DOMMouseScroll':function(e){self.menuScrollMousewheel($sub,e)}},eNS)).dataSM('scroll-arrows').css({top:'auto',left:'0',marginLeft:x+(parseInt($sub.css('border-left-width'))||0),width:subW-(parseInt($sub.css('border-left-width'))||0)-(parseInt($sub.css('border-right-width'))||0),zIndex:$sub.css('z-index')}).eq(horizontalParent&&this.opts.bottomToTopSubMenus?0:1).show();if(this.isFixed()){var events={};events[touchEvents?'touchstart touchmove touchend':'pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp']=function(e){self.menuScrollTouch($sub,e)};$sub.css({'touch-action':'none','-ms-touch-action':'none'}).on(getEventsNS(events,eNS))}}}
$sub.css({top:'auto',left:'0',marginLeft:x,marginTop:y-itemH})},menuScroll:function($sub,once,step){var data=$sub.dataSM('scroll'),$arrows=$sub.dataSM('scroll-arrows'),end=data.up?data.upEnd:data.downEnd,diff;if(!once&&data.momentum){data.momentum*=0.92;diff=data.momentum;if(diff<0.5){this.menuScrollStop($sub);return}}else{diff=step||(once||!this.opts.scrollAccelerate?this.opts.scrollStep:Math.floor(data.step))}
var level=$sub.dataSM('level');if(this.activatedItems[level-1]&&this.activatedItems[level-1].dataSM('sub')&&this.activatedItems[level-1].dataSM('sub').is(':visible')){this.menuHideSubMenus(level-1)}
data.y=data.up&&end<=data.y||!data.up&&end>=data.y?data.y:(Math.abs(end-data.y)>diff?data.y+(data.up?diff:-diff):end);$sub.css(this.cssTransforms3d?{'-webkit-transform':'translate3d(0, '+data.y+'px, 0)',transform:'translate3d(0, '+data.y+'px, 0)'}:{marginTop:data.y});if(mouse&&(data.up&&data.y>data.downEnd||!data.up&&data.y<data.upEnd)){$arrows.eq(data.up?1:0).show()}
if(data.y==end){if(mouse){$arrows.eq(data.up?0:1).hide()}
this.menuScrollStop($sub)}else if(!once){if(this.opts.scrollAccelerate&&data.step<this.opts.scrollStep){data.step+=0.2}
var self=this;this.scrollTimeout=requestAnimationFrame(function(){self.menuScroll($sub)})}},menuScrollMousewheel:function($sub,e){if(this.getClosestMenu(e.target)==$sub[0]){e=e.originalEvent;var up=(e.wheelDelta||-e.detail)>0;if($sub.dataSM('scroll-arrows').eq(up?0:1).is(':visible')){$sub.dataSM('scroll').up=up;this.menuScroll($sub,!0)}}
e.preventDefault()},menuScrollOut:function($sub,e){if(mouse){if(!/^scroll-(up|down)/.test((e.relatedTarget||'').className)&&($sub[0]!=e.relatedTarget&&!$.contains($sub[0],e.relatedTarget)||this.getClosestMenu(e.relatedTarget)!=$sub[0])){$sub.dataSM('scroll-arrows').css('visibility','hidden')}}},menuScrollOver:function($sub,e){if(mouse){if(!/^scroll-(up|down)/.test(e.target.className)&&this.getClosestMenu(e.target)==$sub[0]){this.menuScrollRefreshData($sub);var data=$sub.dataSM('scroll'),upEnd=$(window).scrollTop()-$sub.dataSM('parent-a').offset().top-data.itemH;$sub.dataSM('scroll-arrows').eq(0).css('margin-top',upEnd).end().eq(1).css('margin-top',upEnd+this.getViewportHeight()-data.arrowDownH).end().css('visibility','visible')}}},menuScrollRefreshData:function($sub){var data=$sub.dataSM('scroll'),upEnd=$(window).scrollTop()-$sub.dataSM('parent-a').offset().top-data.itemH;if(this.cssTransforms3d){upEnd=-(parseFloat($sub.css('margin-top'))-upEnd)}
$.extend(data,{upEnd:upEnd,downEnd:upEnd+this.getViewportHeight()-data.subH})},menuScrollStop:function($sub){if(this.scrollTimeout){cancelAnimationFrame(this.scrollTimeout);this.scrollTimeout=0;$sub.dataSM('scroll').step=1;return!0}},menuScrollTouch:function($sub,e){e=e.originalEvent;if(isTouchEvent(e)){var touchPoint=this.getTouchPoint(e);if(this.getClosestMenu(touchPoint.target)==$sub[0]){var data=$sub.dataSM('scroll');if(/(start|down)$/i.test(e.type)){if(this.menuScrollStop($sub)){e.preventDefault();this.$touchScrollingSub=$sub}else{this.$touchScrollingSub=null}
this.menuScrollRefreshData($sub);$.extend(data,{touchStartY:touchPoint.pageY,touchStartTime:e.timeStamp})}else if(/move$/i.test(e.type)){var prevY=data.touchY!==undefined?data.touchY:data.touchStartY;if(prevY!==undefined&&prevY!=touchPoint.pageY){this.$touchScrollingSub=$sub;var up=prevY<touchPoint.pageY;if(data.up!==undefined&&data.up!=up){$.extend(data,{touchStartY:touchPoint.pageY,touchStartTime:e.timeStamp})}
$.extend(data,{up:up,touchY:touchPoint.pageY});this.menuScroll($sub,!0,Math.abs(touchPoint.pageY-prevY))}
e.preventDefault()}else{if(data.touchY!==undefined){if(data.momentum=Math.pow(Math.abs(touchPoint.pageY-data.touchStartY)/(e.timeStamp-data.touchStartTime),2)*15){this.menuScrollStop($sub);this.menuScroll($sub);e.preventDefault()}
delete data.touchY}}}}},menuShow:function($sub){if(!$sub.dataSM('beforefirstshowfired')){$sub.dataSM('beforefirstshowfired',!0);if(this.$root.triggerHandler('beforefirstshow.smapi',$sub[0])===!1){return}}
if(this.$root.triggerHandler('beforeshow.smapi',$sub[0])===!1){return}
$sub.dataSM('shown-before',!0);if(canAnimate){$sub.stop(!0,!0)}
if(!$sub.is(':visible')){var $a=$sub.dataSM('parent-a'),collapsible=this.isCollapsible();if(this.opts.keepHighlighted||collapsible){$a.addClass('highlighted')}
if(collapsible){$sub.removeClass('sm-nowrap').css({zIndex:'',width:'auto',minWidth:'',maxWidth:'',top:'',left:'',marginLeft:'',marginTop:''})}else{$sub.css('z-index',this.zIndexInc=(this.zIndexInc||this.getStartZIndex())+1);if(this.opts.subMenusMinWidth||this.opts.subMenusMaxWidth){$sub.css({width:'auto',minWidth:'',maxWidth:''}).addClass('sm-nowrap');if(this.opts.subMenusMinWidth){$sub.css('min-width',this.opts.subMenusMinWidth)}
if(this.opts.subMenusMaxWidth){var noMaxWidth=this.getWidth($sub);$sub.css('max-width',this.opts.subMenusMaxWidth);if(noMaxWidth>this.getWidth($sub)){$sub.removeClass('sm-nowrap').css('width',this.opts.subMenusMaxWidth)}}}
this.menuPosition($sub)}
var complete=function(){$sub.css('overflow','')};if(collapsible){if(canAnimate&&this.opts.collapsibleShowFunction){this.opts.collapsibleShowFunction.call(this,$sub,complete)}else{$sub.show(this.opts.collapsibleShowDuration,complete)}}else{if(canAnimate&&this.opts.showFunction){this.opts.showFunction.call(this,$sub,complete)}else{$sub.show(this.opts.showDuration,complete)}}
$a.attr('aria-expanded','true');$sub.attr({'aria-expanded':'true','aria-hidden':'false'});this.visibleSubMenus.push($sub);this.$root.triggerHandler('show.smapi',$sub[0])}},popupHide:function(noHideTimeout){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}
var self=this;this.hideTimeout=setTimeout(function(){self.menuHideAll()},noHideTimeout?1:this.opts.hideTimeout)},popupShow:function(left,top){if(!this.opts.isPopup){alert('SmartMenus jQuery Error:\n\nIf you want to show this menu via the "popupShow" method, set the isPopup:true option.');return}
if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}
this.$root.dataSM('shown-before',!0);if(canAnimate){this.$root.stop(!0,!0)}
if(!this.$root.is(':visible')){this.$root.css({left:left,top:top});var self=this,complete=function(){self.$root.css('overflow','')};if(canAnimate&&this.opts.showFunction){this.opts.showFunction.call(this,this.$root,complete)}else{this.$root.show(this.opts.showDuration,complete)}
this.visibleSubMenus[0]=this.$root}},refresh:function(){this.destroy(!0);this.init(!0)},rootKeyDown:function(e){if(!this.handleEvents()){return}
switch(e.keyCode){case 27:var $activeTopItem=this.activatedItems[0];if($activeTopItem){this.menuHideAll();$activeTopItem[0].focus();var $sub=$activeTopItem.dataSM('sub');if($sub){this.menuHide($sub)}}
break;case 32:var $target=$(e.target);if($target.is('a')&&this.handleItemEvents($target)){var $sub=$target.dataSM('sub');if($sub&&!$sub.is(':visible')){this.itemClick({currentTarget:e.target});e.preventDefault()}}
break}},rootOut:function(e){if(!this.handleEvents()||this.isTouchMode()||e.target==this.$root[0]){return}
if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}
if(!this.opts.showOnClick||!this.opts.hideOnClick){var self=this;this.hideTimeout=setTimeout(function(){self.menuHideAll()},this.opts.hideTimeout)}},rootOver:function(e){if(!this.handleEvents()||this.isTouchMode()||e.target==this.$root[0]){return}
if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}},winResize:function(e){if(!this.handleEvents()){if(this.$disableOverlay){var pos=this.$root.offset();this.$disableOverlay.css({top:pos.top,left:pos.left,width:this.$root.outerWidth(),height:this.$root.outerHeight()})}
return}
if(!('onorientationchange' in window)||e.type=='orientationchange'){var collapsible=this.isCollapsible();if(!(this.wasCollapsible&&collapsible)){if(this.activatedItems.length){this.activatedItems[this.activatedItems.length-1][0].blur()}
this.menuHideAll()}
this.wasCollapsible=collapsible}}}});$.fn.dataSM=function(key,val){if(val){return this.data(key+'_smartmenus',val)}
return this.data(key+'_smartmenus')};$.fn.removeDataSM=function(key){return this.removeData(key+'_smartmenus')};$.fn.smartmenus=function(options){if(typeof options=='string'){var args=arguments,method=options;Array.prototype.shift.call(args);return this.each(function(){var smartmenus=$(this).data('smartmenus');if(smartmenus&&smartmenus[method]){smartmenus[method].apply(smartmenus,args)}})}
return this.each(function(){var dataOpts=$(this).data('sm-options')||null;if(dataOpts){try{dataOpts=eval('('+dataOpts+')')}catch(e){dataOpts=null;alert('ERROR\n\nSmartMenus jQuery init:\nInvalid "data-sm-options" attribute value syntax.')}}
new $.SmartMenus(this,$.extend({},$.fn.smartmenus.defaults,options,dataOpts))})};$.fn.smartmenus.defaults={isPopup:!1,mainMenuSubOffsetX:0,mainMenuSubOffsetY:0,subMenusSubOffsetX:0,subMenusSubOffsetY:0,subMenusMinWidth:'10em',subMenusMaxWidth:'20em',subIndicators:!0,subIndicatorsPos:'append',subIndicatorsText:'',scrollStep:30,scrollAccelerate:!0,showTimeout:250,hideTimeout:500,showDuration:0,showFunction:null,hideDuration:0,hideFunction:function($ul,complete){$ul.fadeOut(200,complete)},collapsibleShowDuration:0,collapsibleShowFunction:function($ul,complete){$ul.slideDown(200,complete)},collapsibleHideDuration:0,collapsibleHideFunction:function($ul,complete){$ul.slideUp(200,complete)},showOnClick:!1,hideOnClick:!0,noMouseOver:!1,keepInViewport:!0,keepHighlighted:!0,markCurrentItem:!1,markCurrentTree:!0,rightToLeftSubMenus:!1,bottomToTopSubMenus:!1,collapsibleBehavior:'default'};return $}));
/* rank:50standard - minify:ok. vendor_bundled/vendor/drmonty/smartmenus/js/jquery.smartmenus.bootstrap-4.js */
/*!
 * SmartMenus jQuery Plugin Bootstrap 4 Addon - v0.1.0 - September 17, 2017
 * http://www.smartmenus.org/
 *
 * Copyright Vasil Dinkov, Vadikom Web Ltd.
 * http://vadikom.com
 *
 * Licensed MIT
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','smartmenus'],factory)}else if(typeof module==='object'&&typeof module.exports==='object'){module.exports=factory(require('jquery'))}else{factory(jQuery)}}(function($){$.extend($.SmartMenus.Bootstrap={},{keydownFix:!1,init:function(){var $navbars=$('ul.navbar-nav:not([data-sm-skip])');$navbars.each(function(){var $this=$(this),obj=$this.data('smartmenus');if(!obj){var skipBehavior=$this.is('[data-sm-skip-collapsible-behavior]'),rightAligned=$this.hasClass('ml-auto')||$this.prevAll('.mr-auto').length>0;$this.smartmenus({subMenusSubOffsetX:2,subMenusSubOffsetY:-9,subIndicators:!skipBehavior,collapsibleShowFunction:null,collapsibleHideFunction:null,rightToLeftSubMenus:rightAligned,bottomToTopSubMenus:$this.closest('.fixed-bottom').length>0,bootstrapHighlightClasses:'text-dark bg-light'}).on({'show.smapi':function(e,menu){var $menu=$(menu),$scrollArrows=$menu.dataSM('scroll-arrows');if($scrollArrows){$scrollArrows.css('background-color',$menu.css('background-color'))}
$menu.parent().addClass('show');if(obj.opts.keepHighlighted&&$menu.dataSM('level')>2){$menu.prevAll('a').addClass(obj.opts.bootstrapHighlightClasses)}},'hide.smapi':function(e,menu){var $menu=$(menu);$menu.parent().removeClass('show');if(obj.opts.keepHighlighted&&$menu.dataSM('level')>2){$menu.prevAll('a').removeClass(obj.opts.bootstrapHighlightClasses)}}});obj=$this.data('smartmenus');function onInit(){$this.find('a.current').each(function(){var $this=$(this);($this.hasClass('dropdown-item')?$this:$this.parent()).addClass('active')});$this.find('a.has-submenu').each(function(){var $this=$(this);if($this.is('[data-toggle="dropdown"]')){$this.dataSM('bs-data-toggle-dropdown',!0).removeAttr('data-toggle')}
if(!skipBehavior&&$this.hasClass('dropdown-toggle')){$this.dataSM('bs-dropdown-toggle',!0).removeClass('dropdown-toggle')}})}
onInit();function onBeforeDestroy(){$this.find('a.current').each(function(){var $this=$(this);($this.hasClass('active')?$this:$this.parent()).removeClass('active')});$this.find('a.has-submenu').each(function(){var $this=$(this);if($this.dataSM('bs-dropdown-toggle')){$this.addClass('dropdown-toggle').removeDataSM('bs-dropdown-toggle')}
if($this.dataSM('bs-data-toggle-dropdown')){$this.attr('data-toggle','dropdown').removeDataSM('bs-data-toggle-dropdown')}})}
obj.refresh=function(){$.SmartMenus.prototype.refresh.call(this);onInit();detectCollapsible(!0)};obj.destroy=function(refresh){onBeforeDestroy();$.SmartMenus.prototype.destroy.call(this,refresh)};if(skipBehavior){obj.opts.collapsibleBehavior='toggle'}
var winW;function detectCollapsible(force){var newW=obj.getViewportWidth();if(newW!=winW||force){if(obj.isCollapsible()){$this.addClass('sm-collapsible')}else{$this.removeClass('sm-collapsible')}
winW=newW}}
detectCollapsible();$(window).on('resize.smartmenus'+obj.rootId,detectCollapsible)}});if($navbars.length&&!$.SmartMenus.Bootstrap.keydownFix){$(document).off('keydown.bs.dropdown.data-api','.dropdown-menu');if($.fn.dropdown&&$.fn.dropdown.Constructor){$(document).on('keydown.bs.dropdown.data-api','.dropdown-menu.show',$.fn.dropdown.Constructor._dataApiKeydownHandler)}
$.SmartMenus.Bootstrap.keydownFix=!0}}});$($.SmartMenus.Bootstrap.init);return $}));
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/tagcanvas/jquery.tagcanvas.js */
(function($){"use strict";var i,j,abs=Math.abs,sin=Math.sin,cos=Math.cos,max=Math.max,min=Math.min,ceil=Math.ceil,sqrt=Math.sqrt,pow=Math.pow,hexlookup3={},hexlookup2={},hexlookup1={0:"0,",1:"17,",2:"34,",3:"51,",4:"68,",5:"85,",6:"102,",7:"119,",8:"136,",9:"153,",a:"170,",A:"170,",b:"187,",B:"187,",c:"204,",C:"204,",d:"221,",D:"221,",e:"238,",E:"238,",f:"255,",F:"255,"},Oproto,Tproto,TCproto,Mproto,Vproto,TSproto,TCVproto,doc=document,ocanvas,handlers={};for(i=0;i<256;++i){j=i.toString(16);if(i<16)
j='0'+j;hexlookup2[j]=hexlookup2[j.toUpperCase()]=i.toString()+','}
function Defined(d){return typeof d!='undefined'}
function IsObject(o){return typeof o=='object'&&o!=null}
function Clamp(v,mn,mx){return isNaN(v)?mx:min(mx,max(mn,v))}
function Nop(){return!1}
function TimeNow(){return new Date().valueOf()}
function SortList(l,f){var nl=[],tl=l.length,i;for(i=0;i<tl;++i)
nl.push(l[i]);nl.sort(f);return nl}
function Shuffle(a){var i=a.length-1,t,p;while(i){p=~~(Math.random()*i);t=a[i];a[i]=a[p];a[p]=t;--i}}
function Vector(x,y,z){this.x=x;this.y=y;this.z=z}
Vproto=Vector.prototype;Vproto.length=function(){return sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};Vproto.dot=function(v){return this.x*v.x+this.y*v.y+this.z*v.z};Vproto.cross=function(v){var x=this.y*v.z-this.z*v.y,y=this.z*v.x-this.x*v.z,z=this.x*v.y-this.y*v.x;return new Vector(x,y,z)};Vproto.angle=function(v){var dot=this.dot(v),ac;if(dot==0)
return Math.PI/2.0;ac=dot/(this.length()*v.length());if(ac>=1)
return 0;if(ac<=-1)
return Math.PI;return Math.acos(ac)};Vproto.unit=function(){var l=this.length();return new Vector(this.x/l,this.y/l,this.z/l)};function MakeVector(lg,lt){lt=lt*Math.PI/180;lg=lg*Math.PI/180;var x=sin(lg)*cos(lt),y=-sin(lt),z=-cos(lg)*cos(lt);return new Vector(x,y,z)}
function Matrix(a){this[1]={1:a[0],2:a[1],3:a[2]};this[2]={1:a[3],2:a[4],3:a[5]};this[3]={1:a[6],2:a[7],3:a[8]}}
Mproto=Matrix.prototype;Matrix.Identity=function(){return new Matrix([1,0,0,0,1,0,0,0,1])};Matrix.Rotation=function(angle,u){var sina=sin(angle),cosa=cos(angle),mcos=1-cosa;return new Matrix([cosa+pow(u.x,2)*mcos,u.x*u.y*mcos-u.z*sina,u.x*u.z*mcos+u.y*sina,u.y*u.x*mcos+u.z*sina,cosa+pow(u.y,2)*mcos,u.y*u.z*mcos-u.x*sina,u.z*u.x*mcos-u.y*sina,u.z*u.y*mcos+u.x*sina,cosa+pow(u.z,2)*mcos])}
Mproto.mul=function(m){var a=[],i,j,mmatrix=(m.xform?1:0);for(i=1;i<=3;++i)
for(j=1;j<=3;++j){if(mmatrix)
a.push(this[i][1]*m[1][j]+this[i][2]*m[2][j]+this[i][3]*m[3][j]);else a.push(this[i][j]*m)}
return new Matrix(a)};Mproto.xform=function(p){var a={},x=p.x,y=p.y,z=p.z;a.x=x*this[1][1]+y*this[2][1]+z*this[3][1];a.y=x*this[1][2]+y*this[2][2]+z*this[3][2];a.z=x*this[1][3]+y*this[2][3]+z*this[3][3];return a};function PointsOnSphere(n,xr,yr,zr,magic){var i,y,r,phi,pts=[],off=2/n,inc;inc=Math.PI*(3-sqrt(5)+(parseFloat(magic)?parseFloat(magic):0));for(i=0;i<n;++i){y=i*off-1+(off/2);r=sqrt(1-y*y);phi=i*inc;pts.push([cos(phi)*r*xr,y*yr,sin(phi)*r*zr])}
return pts}
function Cylinder(n,o,xr,yr,zr,magic){var phi,pts=[],off=2/n,inc,i,j,k,l;inc=Math.PI*(3-sqrt(5)+(parseFloat(magic)?parseFloat(magic):0));for(i=0;i<n;++i){j=i*off-1+(off/2);phi=i*inc;k=cos(phi);l=sin(phi);pts.push(o?[j*xr,k*yr,l*zr]:[k*xr,j*yr,l*zr])}
return pts}
function Ring(o,n,xr,yr,zr,j){var phi,pts=[],inc=Math.PI*2/n,i,k,l;for(i=0;i<n;++i){phi=i*inc;k=cos(phi);l=sin(phi);pts.push(o?[j*xr,k*yr,l*zr]:[k*xr,j*yr,l*zr])}
return pts}
function PointsOnCylinderV(n,xr,yr,zr,m){return Cylinder(n,0,xr,yr,zr,m)}
function PointsOnCylinderH(n,xr,yr,zr,m){return Cylinder(n,1,xr,yr,zr,m)}
function PointsOnRingV(n,xr,yr,zr,offset){offset=isNaN(offset)?0:offset*1;return Ring(0,n,xr,yr,zr,offset)}
function PointsOnRingH(n,xr,yr,zr,offset){offset=isNaN(offset)?0:offset*1;return Ring(1,n,xr,yr,zr,offset)}
function CentreImage(t){var i=new Image;i.onload=function(){var dx=i.width/2,dy=i.height/2;t.centreFunc=function(c,w,h,cx,cy){c.setTransform(1,0,0,1,0,0);c.globalAlpha=1;c.drawImage(i,cx-dx,cy-dy)}};i.src=t.centreImage}
function SetAlpha(c,a){var d=c,p1,p2,ae=(a*1).toPrecision(3)+')';if(c[0]==='#'){if(!hexlookup3[c])
if(c.length===4)
hexlookup3[c]='rgba('+hexlookup1[c[1]]+hexlookup1[c[2]]+hexlookup1[c[3]];else hexlookup3[c]='rgba('+hexlookup2[c.substr(1,2)]+hexlookup2[c.substr(3,2)]+hexlookup2[c.substr(5,2)];d=hexlookup3[c]+ae}else if(c.substr(0,4)==='rgb('||c.substr(0,4)==='hsl('){d=(c.replace('(','a(').replace(')',','+ae))}else if(c.substr(0,5)==='rgba('||c.substr(0,5)==='hsla('){p1=c.lastIndexOf(',')+1,p2=c.indexOf(')');a*=parseFloat(c.substring(p1,p2));d=c.substr(0,p1)+a.toPrecision(3)+')'}
return d}
function NewCanvas(w,h){if(window.G_vmlCanvasManager)
return null;var c=doc.createElement('canvas');c.width=w;c.height=h;return c}
function ShadowAlphaBroken(){var cv=NewCanvas(3,3),c,i;if(!cv)
return!1;c=cv.getContext('2d');c.strokeStyle='#000';c.shadowColor='#fff';c.shadowBlur=3;c.globalAlpha=0;c.strokeRect(2,2,2,2);c.globalAlpha=1;i=c.getImageData(2,2,1,1);cv=null;return(i.data[0]>0)}
function SetGradient(c,l,o,g){var gd=c.createLinearGradient(0,0,l,0),i;for(i in g)
gd.addColorStop(1-i,g[i]);c.fillStyle=gd;c.fillRect(0,o,l,1);}
function FindGradientColour(tc,p,r){var l=1024,h=1,gl=tc.weightGradient,cv,c,i,d;if(tc.gCanvas){c=tc.gCanvas.getContext('2d');h=tc.gCanvas.height}else{if(IsObject(gl[0]))
h=gl.length;else gl=[gl];tc.gCanvas=cv=NewCanvas(l,h);if(!cv)
return null;c=cv.getContext('2d');for(i=0;i<h;++i)
SetGradient(c,l,i,gl[i]);}
r=max(min(r||0,h-1),0);d=c.getImageData(~~((l-1)*p),r,1,1).data;return'rgba('+d[0]+','+d[1]+','+d[2]+','+(d[3]/255)+')'}
function TextSet(ctxt,font,colour,strings,padx,pady,shadowColour,shadowBlur,shadowOffsets,maxWidth,widths,align){var xo=padx+(shadowBlur||0)+(shadowOffsets.length&&shadowOffsets[0]<0?abs(shadowOffsets[0]):0),yo=pady+(shadowBlur||0)+(shadowOffsets.length&&shadowOffsets[1]<0?abs(shadowOffsets[1]):0),i,xc;ctxt.font=font;ctxt.textBaseline='top';ctxt.fillStyle=colour;shadowColour&&(ctxt.shadowColor=shadowColour);shadowBlur&&(ctxt.shadowBlur=shadowBlur);shadowOffsets.length&&(ctxt.shadowOffsetX=shadowOffsets[0],ctxt.shadowOffsetY=shadowOffsets[1]);for(i=0;i<strings.length;++i){xc=0;if(widths){if('right'==align){xc=maxWidth-widths[i]}else if('centre'==align){xc=(maxWidth-widths[i])/2}}
ctxt.fillText(strings[i],xo+xc,yo);yo+=parseInt(font)}}
function RRect(c,x,y,w,h,r,s){if(r){c.beginPath();c.moveTo(x,y+h-r);c.arcTo(x,y,x+r,y,r);c.arcTo(x+w,y,x+w,y+r,r);c.arcTo(x+w,y+h,x+w-r,y+h,r);c.arcTo(x,y+h,x,y+h-r,r);c.closePath();c[s?'stroke':'fill']()}else{c[s?'strokeRect':'fillRect'](x,y,w,h)}}
function TextCanvas(strings,font,w,h,maxWidth,stringWidths,align,valign,scale){this.strings=strings;this.font=font;this.width=w;this.height=h;this.maxWidth=maxWidth;this.stringWidths=stringWidths;this.align=align;this.valign=valign;this.scale=scale}
TCVproto=TextCanvas.prototype;TCVproto.SetImage=function(image,w,h,position,padding,align,valign,scale){this.image=image;this.iwidth=w*this.scale;this.iheight=h*this.scale;this.ipos=position;this.ipad=padding*this.scale;this.iscale=scale;this.ialign=align;this.ivalign=valign};TCVproto.Align=function(size,space,a){var pos=0;if(a=='right'||a=='bottom')
pos=space-size;else if(a!='left'&&a!='top')
pos=(space-size)/2;return pos};TCVproto.Create=function(colour,bgColour,bgOutline,bgOutlineThickness,shadowColour,shadowBlur,shadowOffsets,padding,radius){var cv,cw,ch,c,x1,x2,y1,y2,offx,offy,ix,iy,iw,ih,rr,sox=abs(shadowOffsets[0]),soy=abs(shadowOffsets[1]),shadowcv,shadowc;padding=max(padding,sox+shadowBlur,soy+shadowBlur);x1=2*(padding+bgOutlineThickness);y1=2*(padding+bgOutlineThickness);cw=this.width+x1;ch=this.height+y1;offx=offy=padding+bgOutlineThickness;if(this.image){ix=iy=padding+bgOutlineThickness;iw=this.iwidth;ih=this.iheight;if(this.ipos=='top'||this.ipos=='bottom'){if(iw<this.width)
ix+=this.Align(iw,this.width,this.ialign);else offx+=this.Align(this.width,iw,this.align);if(this.ipos=='top')
offy+=ih+this.ipad;else iy+=this.height+this.ipad;cw=max(cw,iw+x1);ch+=ih+this.ipad}else{if(ih<this.height)
iy+=this.Align(ih,this.height,this.ivalign);else offy+=this.Align(this.height,ih,this.valign);if(this.ipos=='right')
ix+=this.width+this.ipad;else offx+=iw+this.ipad;cw+=iw+this.ipad;ch=max(ch,ih+y1)}}
cv=NewCanvas(cw,ch);if(!cv)
return null;x1=y1=bgOutlineThickness/2;x2=cw-bgOutlineThickness;y2=ch-bgOutlineThickness;rr=min(radius,x2/2,y2/2);c=cv.getContext('2d');if(bgColour){c.fillStyle=bgColour;RRect(c,x1,y1,x2,y2,rr)}
if(bgOutlineThickness){c.strokeStyle=bgOutline;c.lineWidth=bgOutlineThickness;RRect(c,x1,y1,x2,y2,rr,!0)}
if(shadowBlur||sox||soy){shadowcv=NewCanvas(cw,ch);if(shadowcv){shadowc=c;c=shadowcv.getContext('2d')}}
TextSet(c,this.font,colour,this.strings,offx,offy,0,0,[],this.maxWidth,this.stringWidths,this.align);if(this.image)
c.drawImage(this.image,ix,iy,iw,ih);if(shadowc){c=shadowc;shadowColour&&(c.shadowColor=shadowColour);shadowBlur&&(c.shadowBlur=shadowBlur);c.shadowOffsetX=shadowOffsets[0];c.shadowOffsetY=shadowOffsets[1];c.drawImage(shadowcv,0,0)}
return cv};function ExpandImage(i,w,h){var cv=NewCanvas(w,h),c;if(!cv)
return null;c=cv.getContext('2d');c.drawImage(i,(w-i.width)/2,(h-i.height)/2);return cv}
function ScaleImage(i,w,h){var cv=NewCanvas(w,h),c;if(!cv)
return null;c=cv.getContext('2d');c.drawImage(i,0,0,w,h);return cv}
function AddBackgroundToImage(i,w,h,scale,colour,othickness,ocolour,padding,radius,ofill){var cw=w+((2*padding)+othickness)*scale,ch=h+((2*padding)+othickness)*scale,cv=NewCanvas(cw,ch),c,x1,y1,x2,y2,ocanvas,cc,rr;if(!cv)
return null;othickness*=scale;radius*=scale;x1=y1=othickness/2;x2=cw-othickness;y2=ch-othickness;padding=(padding*scale)+x1;c=cv.getContext('2d');rr=min(radius,x2/2,y2/2);if(colour){c.fillStyle=colour;RRect(c,x1,y1,x2,y2,rr)}
if(othickness){c.strokeStyle=ocolour;c.lineWidth=othickness;RRect(c,x1,y1,x2,y2,rr,!0)}
if(ofill){ocanvas=NewCanvas(cw,ch);cc=ocanvas.getContext('2d');cc.drawImage(i,padding,padding,w,h);cc.globalCompositeOperation='source-in';cc.fillStyle=ocolour;cc.fillRect(0,0,cw,ch);cc.globalCompositeOperation='destination-over';cc.drawImage(cv,0,0);cc.globalCompositeOperation='source-over';c.drawImage(ocanvas,0,0)}else{c.drawImage(i,padding,padding,i.width,i.height)}
return{image:cv,width:cw/scale,height:ch/scale}}
function RoundImage(i,r,iw,ih,s){var cv,c,r1=parseFloat(r),l=max(iw,ih);cv=NewCanvas(iw,ih);if(!cv)
return null;if(r.indexOf('%')>0)
r1=l*r1/100;else r1=r1*s;c=cv.getContext('2d');c.globalCompositeOperation='source-over';c.fillStyle='#fff';if(r1>=l/2){r1=min(iw,ih)/2;c.beginPath();c.moveTo(iw/2,ih/2);c.arc(iw/2,ih/2,r1,0,2*Math.PI,!1);c.fill();c.closePath()}else{r1=min(iw/2,ih/2,r1);RRect(c,0,0,iw,ih,r1,!0);c.fill()}
c.globalCompositeOperation='source-in';c.drawImage(i,0,0,iw,ih);return cv}
function AddShadowToImage(i,w,h,scale,sc,sb,so){var sw=abs(so[0]),sh=abs(so[1]),cw=w+(sw>sb?sw+sb:sb*2)*scale,ch=h+(sh>sb?sh+sb:sb*2)*scale,xo=scale*((sb||0)+(so[0]<0?sw:0)),yo=scale*((sb||0)+(so[1]<0?sh:0)),cv,c;cv=NewCanvas(cw,ch);if(!cv)
return null;c=cv.getContext('2d');sc&&(c.shadowColor=sc);sb&&(c.shadowBlur=sb*scale);so&&(c.shadowOffsetX=so[0]*scale,c.shadowOffsetY=so[1]*scale);c.drawImage(i,xo,yo,w,h);return{image:cv,width:cw/scale,height:ch/scale}}
function FindTextBoundingBox(s,f,ht){var w=parseInt(s.toString().length*ht),h=parseInt(ht*2*s.length),cv=NewCanvas(w,h),c,idata,w1,h1,x,y,i,ex;if(!cv)
return null;c=cv.getContext('2d');c.fillStyle='#000';c.fillRect(0,0,w,h);TextSet(c,ht+'px '+f,'#fff',s,0,0,0,0,[],'centre')
idata=c.getImageData(0,0,w,h);w1=idata.width;h1=idata.height;ex={min:{x:w1,y:h1},max:{x:-1,y:-1}};for(y=0;y<h1;++y){for(x=0;x<w1;++x){i=(y*w1+x)*4;if(idata.data[i+1]>0){if(x<ex.min.x)ex.min.x=x;if(x>ex.max.x)ex.max.x=x;if(y<ex.min.y)ex.min.y=y;if(y>ex.max.y)ex.max.y=y}}}
if(w1!=w){ex.min.x*=(w/w1);ex.max.x*=(w/w1)}
if(h1!=h){ex.min.y*=(w/h1);ex.max.y*=(w/h1)}
cv=null;return ex}
function FixFont(f){return"'"+f.replace(/(\'|\")/g,'').replace(/\s*,\s*/g,"', '")+"'"}
function AddHandler(h,f,e){e=e||doc;if(e.addEventListener)
e.addEventListener(h,f,!1);else e.attachEvent('on'+h,f)}
function RemoveHandler(h,f,e){e=e||doc;if(e.removeEventListener)
e.removeEventListener(h,f);else e.detachEvent('on'+h,f)}
function AddImage(i,o,t,tc){var s=tc.imageScale,mscale,ic,bc,oc,iw,ih;if(!o.complete)
return AddHandler('load',function(){AddImage(i,o,t,tc)},o);if(!i.complete)
return AddHandler('load',function(){AddImage(i,o,t,tc)},i);o.width=o.width;o.height=o.height;if(s){i.width=o.width*s;i.height=o.height*s}
t.iw=i.width;t.ih=i.height;if(tc.txtOpt){ic=i;mscale=tc.zoomMax*tc.txtScale;iw=t.iw*mscale;ih=t.ih*mscale;if(iw<o.naturalWidth||ih<o.naturalHeight){ic=ScaleImage(i,iw,ih);if(ic)
t.fimage=ic}else{iw=t.iw;ih=t.ih;mscale=1}
if(parseFloat(tc.imageRadius))
t.image=t.fimage=i=RoundImage(t.image,tc.imageRadius,iw,ih,mscale);if(!t.HasText()){if(tc.shadow){ic=AddShadowToImage(t.image,iw,ih,mscale,tc.shadow,tc.shadowBlur,tc.shadowOffset);if(ic){t.fimage=ic.image;t.w=ic.width;t.h=ic.height}}
if(tc.bgColour||tc.bgOutlineThickness){bc=tc.bgColour=='tag'?GetProperty(t.a,'background-color'):tc.bgColour;oc=tc.bgOutline=='tag'?GetProperty(t.a,'color'):(tc.bgOutline||tc.textColour);iw=t.fimage.width;ih=t.fimage.height;if(tc.outlineMethod=='colour'){ic=AddBackgroundToImage(t.fimage,iw,ih,mscale,bc,tc.bgOutlineThickness,t.outline.colour,tc.padding,tc.bgRadius,1);if(ic)
t.oimage=ic.image}
ic=AddBackgroundToImage(t.fimage,iw,ih,mscale,bc,tc.bgOutlineThickness,oc,tc.padding,tc.bgRadius);if(ic){t.fimage=ic.image;t.w=ic.width;t.h=ic.height}}
if(tc.outlineMethod=='size'){if(tc.outlineIncrease>0){t.iw+=2*tc.outlineIncrease;t.ih+=2*tc.outlineIncrease;iw=mscale*t.iw;ih=mscale*t.ih;ic=ScaleImage(t.fimage,iw,ih);t.oimage=ic;t.fimage=ExpandImage(t.fimage,t.oimage.width,t.oimage.height)}else{iw=mscale*(t.iw+(2*tc.outlineIncrease));ih=mscale*(t.ih+(2*tc.outlineIncrease));ic=ScaleImage(t.fimage,iw,ih);t.oimage=ExpandImage(ic,t.fimage.width,t.fimage.height)}}}}
t.Init()}
function GetProperty(e,p){var dv=doc.defaultView,pc=p.replace(/\-([a-z])/g,function(a){return a.charAt(1).toUpperCase()});return(dv&&dv.getComputedStyle&&dv.getComputedStyle(e,null).getPropertyValue(p))||(e.currentStyle&&e.currentStyle[pc])}
function FindWeight(a,wFrom,tHeight){var w=1,p;if(wFrom){w=1*(a.getAttribute(wFrom)||tHeight)}else if(p=GetProperty(a,'font-size')){w=(p.indexOf('px')>-1&&p.replace('px','')*1)||(p.indexOf('pt')>-1&&p.replace('pt','')*1.25)||p*3.3}
return w}
function EventToCanvasId(e){return e.target&&Defined(e.target.id)?e.target.id:e.srcElement.parentNode.id}
function EventXY(e,c){var xy,p,xmul=parseInt(GetProperty(c,'width'))/c.width,ymul=parseInt(GetProperty(c,'height'))/c.height;if(Defined(e.offsetX)){xy={x:e.offsetX,y:e.offsetY}}else{p=AbsPos(c.id);if(Defined(e.changedTouches))
e=e.changedTouches[0];if(e.pageX)
xy={x:e.pageX-p.x,y:e.pageY-p.y}}
if(xy&&xmul&&ymul){xy.x/=xmul;xy.y/=ymul}
return xy}
function MouseOut(e){var cv=e.target||e.fromElement.parentNode,tc=TagCanvas.tc[cv.id];if(tc){tc.mx=tc.my=-1;tc.UnFreeze();tc.EndDrag()}}
function MouseMove(e){var i,t=TagCanvas,tc,p,tg=EventToCanvasId(e);for(i in t.tc){tc=t.tc[i];if(tc.tttimer){clearTimeout(tc.tttimer);tc.tttimer=null}}
if(tg&&t.tc[tg]){tc=t.tc[tg];if(p=EventXY(e,tc.canvas)){tc.mx=p.x;tc.my=p.y;tc.Drag(e,p)}
tc.drawn=0}}
function MouseDown(e){var t=TagCanvas,cb=doc.addEventListener?0:1,tg=EventToCanvasId(e);if(tg&&e.button==cb&&t.tc[tg]){t.tc[tg].BeginDrag(e)}}
function MouseUp(e){var t=TagCanvas,cb=doc.addEventListener?0:1,tg=EventToCanvasId(e),tc;if(tg&&e.button==cb&&t.tc[tg]){tc=t.tc[tg];MouseMove(e);if(!tc.EndDrag()&&!tc.touchState)
tc.Clicked(e)}}
function TouchDown(e){var tg=EventToCanvasId(e),tc=(tg&&TagCanvas.tc[tg]),p;if(tc&&e.changedTouches){if(e.touches.length==1&&tc.touchState==0){tc.touchState=1;tc.BeginDrag(e);if(p=EventXY(e,tc.canvas)){tc.mx=p.x;tc.my=p.y;tc.drawn=0}}else if(e.targetTouches.length==2&&tc.pinchZoom){tc.touchState=3;tc.EndDrag();tc.BeginPinch(e)}else{tc.EndDrag();tc.EndPinch();tc.touchState=0}}}
function TouchUp(e){var tg=EventToCanvasId(e),tc=(tg&&TagCanvas.tc[tg]);if(tc&&e.changedTouches){switch(tc.touchState){case 1:tc.Draw();tc.Clicked();break;case 2:tc.EndDrag();break;case 3:tc.EndPinch()}
tc.touchState=0}}
function TouchMove(e){var i,t=TagCanvas,tc,p,tg=EventToCanvasId(e);for(i in t.tc){tc=t.tc[i];if(tc.tttimer){clearTimeout(tc.tttimer);tc.tttimer=null}}
tc=(tg&&t.tc[tg]);if(tc&&e.changedTouches&&tc.touchState){switch(tc.touchState){case 1:case 2:if(p=EventXY(e,tc.canvas)){tc.mx=p.x;tc.my=p.y;if(tc.Drag(e,p))
tc.touchState=2}
break;case 3:tc.Pinch(e)}
tc.drawn=0}}
function MouseWheel(e){var t=TagCanvas,tg=EventToCanvasId(e);if(tg&&t.tc[tg]){e.cancelBubble=!0;e.returnValue=!1;e.preventDefault&&e.preventDefault();t.tc[tg].Wheel((e.wheelDelta||e.detail)>0)}}
function Scroll(e){var i,t=TagCanvas;clearTimeout(t.scrollTimer);for(i in t.tc){t.tc[i].Pause()}
t.scrollTimer=setTimeout(function(){var i,t=TagCanvas;for(i in t.tc){t.tc[i].Resume()}},t.scrollPause)}
function DrawCanvas(){DrawCanvasRAF(TimeNow())}
function DrawCanvasRAF(t){var tc=TagCanvas.tc,i;TagCanvas.NextFrame(TagCanvas.interval);t=t||TimeNow();for(i in tc)
tc[i].Draw(t);}
function AbsPos(id){var e=doc.getElementById(id),r=e.getBoundingClientRect(),dd=doc.documentElement,b=doc.body,w=window,xs=w.pageXOffset||dd.scrollLeft,ys=w.pageYOffset||dd.scrollTop,xo=dd.clientLeft||b.clientLeft,yo=dd.clientTop||b.clientTop;return{x:r.left+xs-xo,y:r.top+ys-yo}}
function Project(tc,p1,sx,sy){var m=tc.radius*tc.z1/(tc.z1+tc.z2+p1.z);return{x:p1.x*m*sx,y:p1.y*m*sy,z:p1.z,w:(tc.z1-p1.z)/tc.z2}}
function TextSplitter(e){this.e=e;this.br=0;this.line=[];this.text=[];this.original=e.innerText||e.textContent}
TSproto=TextSplitter.prototype;TSproto.Empty=function(){for(var i=0;i<this.text.length;++i)
if(this.text[i].length)
return!1;return!0};TSproto.Lines=function(e){var r=e?1:0,cn,cl,i;e=e||this.e;cn=e.childNodes;cl=cn.length;for(i=0;i<cl;++i){if(cn[i].nodeName=='BR'){this.text.push(this.line.join(' '));this.br=1}else if(cn[i].nodeType==3){if(this.br){this.line=[cn[i].nodeValue];this.br=0}else{this.line.push(cn[i].nodeValue)}}else{this.Lines(cn[i])}}
r||this.br||this.text.push(this.line.join(' '));return this.text};TSproto.SplitWidth=function(w,c,f,h){var i,j,words,text=[];c.font=h+'px '+f;for(i=0;i<this.text.length;++i){words=this.text[i].split(/\s+/);this.line=[words[0]];for(j=1;j<words.length;++j){if(c.measureText(this.line.join(' ')+' '+words[j]).width>w){text.push(this.line.join(' '));this.line=[words[j]]}else{this.line.push(words[j])}}
text.push(this.line.join(' '))}
return this.text=text};function Outline(tc,t){this.ts=null;this.tc=tc;this.tag=t;this.x=this.y=this.w=this.h=this.sc=1;this.z=0;this.pulse=1;this.pulsate=tc.pulsateTo<1;this.colour=tc.outlineColour;this.adash=~~tc.outlineDash;this.agap=~~tc.outlineDashSpace||this.adash;this.aspeed=tc.outlineDashSpeed*1;if(this.colour=='tag')
this.colour=GetProperty(t.a,'color');else if(this.colour=='tagbg')
this.colour=GetProperty(t.a,'background-color');this.Draw=this.pulsate?this.DrawPulsate:this.DrawSimple;this.radius=tc.outlineRadius|0;this.SetMethod(tc.outlineMethod)}
Oproto=Outline.prototype;Oproto.SetMethod=function(om){var methods={block:['PreDraw','DrawBlock'],colour:['PreDraw','DrawColour'],outline:['PostDraw','DrawOutline'],classic:['LastDraw','DrawOutline'],size:['PreDraw','DrawSize'],none:['LastDraw']},funcs=methods[om]||methods.outline;if(om=='none'){this.Draw=function(){return 1}}else{this.drawFunc=this[funcs[1]]}
this[funcs[0]]=this.Draw};Oproto.Update=function(x,y,w,h,sc,z,xo,yo){var o=this.tc.outlineOffset,o2=2*o;this.x=sc*x+xo-o;this.y=sc*y+yo-o;this.w=sc*w+o2;this.h=sc*h+o2;this.sc=sc;this.z=z};Oproto.Ants=function(c){if(!this.adash)
return;var l=this.adash,g=this.agap,s=this.aspeed,length=l+g,l1=0,l2=l,g1=g,g2=0,seq=0,ants;if(s){seq=abs(s)*(TimeNow()-this.ts)/50;if(s<0)
seq=8.64e6-seq;s=~~seq%length}
if(s){if(l>=s){l1=l-s;l2=s}else{g1=length-s;g2=g-g1}
ants=[l1,g1,l2,g2]}else{ants=[l,g]}
c.setLineDash(ants)}
Oproto.DrawOutline=function(c,x,y,w,h,colour){var r=min(this.radius,h/2,w/2);c.strokeStyle=colour;this.Ants(c);RRect(c,x,y,w,h,r,!0)};Oproto.DrawSize=function(c,x,y,w,h,colour,tag,x1,y1){var tw=tag.w,th=tag.h,m,i,sc;if(this.pulsate){if(tag.image)
sc=(tag.image.height+this.tc.outlineIncrease)/tag.image.height;else sc=tag.oscale;i=tag.fimage||tag.image;m=1+((sc-1)*(1-this.pulse));tag.h*=m;tag.w*=m}else{i=tag.oimage}
tag.alpha=1;tag.Draw(c,x1,y1,i);tag.h=th;tag.w=tw;return 1};Oproto.DrawColour=function(c,x,y,w,h,colour,tag,x1,y1){if(tag.oimage){if(this.pulse<1){tag.alpha=1-pow(this.pulse,2);tag.Draw(c,x1,y1,tag.fimage);tag.alpha=this.pulse}else{tag.alpha=1}
tag.Draw(c,x1,y1,tag.oimage);return 1}
return this[tag.image?'DrawColourImage':'DrawColourText'](c,x,y,w,h,colour,tag,x1,y1)};Oproto.DrawColourText=function(c,x,y,w,h,colour,tag,x1,y1){var normal=tag.colour;tag.colour=colour;tag.alpha=1;tag.Draw(c,x1,y1);tag.colour=normal;return 1};Oproto.DrawColourImage=function(c,x,y,w,h,colour,tag,x1,y1){var ccanvas=c.canvas,fx=~~max(x,0),fy=~~max(y,0),fw=min(ccanvas.width-fx,w)+.5|0,fh=min(ccanvas.height-fy,h)+.5|0,cc;if(ocanvas)
ocanvas.width=fw,ocanvas.height=fh;else ocanvas=NewCanvas(fw,fh);if(!ocanvas)
return this.SetMethod('outline');cc=ocanvas.getContext('2d');cc.drawImage(ccanvas,fx,fy,fw,fh,0,0,fw,fh);c.clearRect(fx,fy,fw,fh);if(this.pulsate){tag.alpha=1-pow(this.pulse,2)}else{tag.alpha=1}
tag.Draw(c,x1,y1);c.setTransform(1,0,0,1,0,0);c.save();c.beginPath();c.rect(fx,fy,fw,fh);c.clip();c.globalCompositeOperation='source-in';c.fillStyle=colour;c.fillRect(fx,fy,fw,fh);c.restore();c.globalAlpha=1;c.globalCompositeOperation='destination-over';c.drawImage(ocanvas,0,0,fw,fh,fx,fy,fw,fh);c.globalCompositeOperation='source-over';return 1};Oproto.DrawBlock=function(c,x,y,w,h,colour){var r=min(this.radius,h/2,w/2);c.fillStyle=colour;RRect(c,x,y,w,h,r)};Oproto.DrawSimple=function(c,tag,x1,y1,ga,useGa){var t=this.tc;c.setTransform(1,0,0,1,0,0);c.strokeStyle=this.colour;c.lineWidth=t.outlineThickness;c.shadowBlur=c.shadowOffsetX=c.shadowOffsetY=0;c.globalAlpha=useGa?ga:1;return this.drawFunc(c,this.x,this.y,this.w,this.h,this.colour,tag,x1,y1)};Oproto.DrawPulsate=function(c,tag,x1,y1){var diff=TimeNow()-this.ts,t=this.tc,ga=t.pulsateTo+((1-t.pulsateTo)*(0.5+(cos(2*Math.PI*diff/(1000*t.pulsateTime))/2)));this.pulse=ga=TagCanvas.Smooth(1,ga);return this.DrawSimple(c,tag,x1,y1,ga,1)};Oproto.Active=function(c,x,y){var a=(x>=this.x&&y>=this.y&&x<=this.x+this.w&&y<=this.y+this.h);if(a){this.ts=this.ts||TimeNow()}else{this.ts=null}
return a};Oproto.PreDraw=Oproto.PostDraw=Oproto.LastDraw=Nop;function Tag(tc,text,a,v,w,h,col,bcol,bradius,boutline,bothickness,font,padding,original){this.tc=tc;this.image=null;this.text=text;this.text_original=original;this.line_widths=[];this.title=a.title||null;this.a=a;this.position=new Vector(v[0],v[1],v[2]);this.x=this.y=this.z=0;this.w=w;this.h=h;this.colour=col||tc.textColour;this.bgColour=bcol||tc.bgColour;this.bgRadius=bradius|0;this.bgOutline=boutline||this.colour;this.bgOutlineThickness=bothickness|0;this.textFont=font||tc.textFont;this.padding=padding|0;this.sc=this.alpha=1;this.weighted=!tc.weight;this.outline=new Outline(tc,this)}
Tproto=Tag.prototype;Tproto.Init=function(e){var tc=this.tc;this.textHeight=tc.textHeight;if(this.HasText()){this.Measure(tc.ctxt,tc)}else{this.w=this.iw;this.h=this.ih}
this.SetShadowColour=tc.shadowAlpha?this.SetShadowColourAlpha:this.SetShadowColourFixed;this.SetDraw(tc)};Tproto.Draw=Nop;Tproto.HasText=function(){return this.text&&this.text[0].length>0};Tproto.EqualTo=function(e){var i=e.getElementsByTagName('img');if(this.a.href!=e.href)
return 0;if(i.length)
return this.image.src==i[0].src;return(e.innerText||e.textContent)==this.text_original};Tproto.SetImage=function(i){this.image=this.fimage=i};Tproto.SetDraw=function(t){this.Draw=this.fimage?(t.ie>7?this.DrawImageIE:this.DrawImage):this.DrawText;t.noSelect&&(this.CheckActive=Nop)};Tproto.MeasureText=function(c){var i,l=this.text.length,w=0,wl;for(i=0;i<l;++i){this.line_widths[i]=wl=c.measureText(this.text[i]).width;w=max(w,wl)}
return w};Tproto.Measure=function(c,t){var extents=FindTextBoundingBox(this.text,this.textFont,this.textHeight),s,th,f,soff,cw,twidth,theight,img,tcv;theight=extents?extents.max.y+extents.min.y:this.textHeight;c.font=this.font=this.textHeight+'px '+this.textFont;twidth=this.MeasureText(c);if(t.txtOpt){s=t.txtScale;th=s*this.textHeight;f=th+'px '+this.textFont;soff=[s*t.shadowOffset[0],s*t.shadowOffset[1]];c.font=f;cw=this.MeasureText(c);tcv=new TextCanvas(this.text,f,cw+s,(s*theight)+s,cw,this.line_widths,t.textAlign,t.textVAlign,s);if(this.image)
tcv.SetImage(this.image,this.iw,this.ih,t.imagePosition,t.imagePadding,t.imageAlign,t.imageVAlign,t.imageScale);img=tcv.Create(this.colour,this.bgColour,this.bgOutline,s*this.bgOutlineThickness,t.shadow,s*t.shadowBlur,soff,s*this.padding,s*this.bgRadius);if(t.outlineMethod=='colour'){this.oimage=tcv.Create(this.outline.colour,this.bgColour,this.outline.colour,s*this.bgOutlineThickness,t.shadow,s*t.shadowBlur,soff,s*this.padding,s*this.bgRadius)}else if(t.outlineMethod=='size'){extents=FindTextBoundingBox(this.text,this.textFont,this.textHeight+t.outlineIncrease);th=extents.max.y+extents.min.y;f=(s*(this.textHeight+t.outlineIncrease))+'px '+this.textFont;c.font=f;cw=this.MeasureText(c);tcv=new TextCanvas(this.text,f,cw+s,(s*th)+s,cw,this.line_widths,t.textAlign,t.textVAlign,s);if(this.image)
tcv.SetImage(this.image,this.iw+t.outlineIncrease,this.ih+t.outlineIncrease,t.imagePosition,t.imagePadding,t.imageAlign,t.imageVAlign,t.imageScale);this.oimage=tcv.Create(this.colour,this.bgColour,this.bgOutline,s*this.bgOutlineThickness,t.shadow,s*t.shadowBlur,soff,s*this.padding,s*this.bgRadius);this.oscale=this.oimage.width/img.width;if(t.outlineIncrease>0)
img=ExpandImage(img,this.oimage.width,this.oimage.height);else this.oimage=ExpandImage(this.oimage,img.width,img.height)}
if(img){this.fimage=img;twidth=this.fimage.width/s;theight=this.fimage.height/s}
this.SetDraw(t);t.txtOpt=!!this.fimage}
this.h=theight;this.w=twidth};Tproto.SetFont=function(f,c,bc,boc){this.textFont=f;this.colour=c;this.bgColour=bc;this.bgOutline=boc;this.Measure(this.tc.ctxt,this.tc)};Tproto.SetWeight=function(w){var tc=this.tc,modes=tc.weightMode.split(/[, ]/),m,s,wl=w.length;if(!this.HasText())
return;this.weighted=!0;for(s=0;s<wl;++s){m=modes[s]||'size';if('both'==m){this.Weight(w[s],tc.ctxt,tc,'size',tc.min_weight[s],tc.max_weight[s],s);this.Weight(w[s],tc.ctxt,tc,'colour',tc.min_weight[s],tc.max_weight[s],s)}else{this.Weight(w[s],tc.ctxt,tc,m,tc.min_weight[s],tc.max_weight[s],s)}}
this.Measure(tc.ctxt,tc)};Tproto.Weight=function(w,c,t,m,wmin,wmax,wnum){w=isNaN(w)?1:w;var nweight=(w-wmin)/(wmax-wmin);if('colour'==m)
this.colour=FindGradientColour(t,nweight,wnum);else if('bgcolour'==m)
this.bgColour=FindGradientColour(t,nweight,wnum);else if('bgoutline'==m)
this.bgOutline=FindGradientColour(t,nweight,wnum);else if('outline'==m)
this.outline.colour=FindGradientColour(t,nweight,wnum);else if('size'==m){if(t.weightSizeMin>0&&t.weightSizeMax>t.weightSizeMin){this.textHeight=t.weightSize*(t.weightSizeMin+(t.weightSizeMax-t.weightSizeMin)*nweight)}else{this.textHeight=max(1,w*t.weightSize)}}};Tproto.SetShadowColourFixed=function(c,s,a){c.shadowColor=s};Tproto.SetShadowColourAlpha=function(c,s,a){c.shadowColor=SetAlpha(s,a)};Tproto.DrawText=function(c,xoff,yoff){var t=this.tc,x=this.x,y=this.y,s=this.sc,i,xl;c.globalAlpha=this.alpha;c.fillStyle=this.colour;t.shadow&&this.SetShadowColour(c,t.shadow,this.alpha);c.font=this.font;x+=xoff/s;y+=(yoff/s)-(this.h/2);for(i=0;i<this.text.length;++i){xl=x;if('right'==t.textAlign){xl+=this.w/2-this.line_widths[i]}else if('centre'==t.textAlign){xl-=this.line_widths[i]/2}else{xl-=this.w/2}
c.setTransform(s,0,0,s,s*xl,s*y);c.fillText(this.text[i],0,0);y+=this.textHeight}};Tproto.DrawImage=function(c,xoff,yoff,im){var x=this.x,y=this.y,s=this.sc,i=im||this.fimage,w=this.w,h=this.h,a=this.alpha,shadow=this.shadow;c.globalAlpha=a;shadow&&this.SetShadowColour(c,shadow,a);x+=(xoff/s)-(w/2);y+=(yoff/s)-(h/2);c.setTransform(s,0,0,s,s*x,s*y);c.drawImage(i,0,0,w,h)};Tproto.DrawImageIE=function(c,xoff,yoff){var i=this.fimage,s=this.sc,w=i.width=this.w*s,h=i.height=this.h*s,x=(this.x*s)+xoff-(w/2),y=(this.y*s)+yoff-(h/2);c.setTransform(1,0,0,1,0,0);c.globalAlpha=this.alpha;c.drawImage(i,x,y)};Tproto.Calc=function(m,a){var pp,t=this.tc,mnb=t.minBrightness,mxb=t.maxBrightness,r=t.max_radius;pp=m.xform(this.position);this.xformed=pp;pp=Project(t,pp,t.stretchX,t.stretchY);this.x=pp.x;this.y=pp.y;this.z=pp.z;this.sc=pp.w;this.alpha=a*Clamp(mnb+(mxb-mnb)*(r-this.z)/(2*r),0,1);return this.xformed};Tproto.UpdateActive=function(c,xoff,yoff){var o=this.outline,w=this.w,h=this.h,x=this.x-w/2,y=this.y-h/2;o.Update(x,y,w,h,this.sc,this.z,xoff,yoff);return o};Tproto.CheckActive=function(c,xoff,yoff){var t=this.tc,o=this.UpdateActive(c,xoff,yoff);return o.Active(c,t.mx,t.my)?o:null};Tproto.Clicked=function(e){var a=this.a,t=a.target,h=a.href,evt;if(t!=''&&t!='_self'){if(self.frames[t]){self.frames[t].document.location=h}else{try{if(top.frames[t]){top.frames[t].document.location=h;return}}catch(err){}
window.open(h,t)}
return}
if(doc.createEvent){evt=doc.createEvent('MouseEvents');evt.initMouseEvent('click',1,1,window,0,0,0,0,0,0,0,0,0,0,null);if(!a.dispatchEvent(evt))
return}else if(a.fireEvent){if(!a.fireEvent('onclick'))
return}
doc.location=h};function TagCanvas(cid,lctr,opt){var i,p,c=doc.getElementById(cid),cp=['id','class','innerHTML'],raf;if(!c)throw 0;if(Defined(window.G_vmlCanvasManager)){c=window.G_vmlCanvasManager.initElement(c);this.ie=parseFloat(navigator.appVersion.split('MSIE')[1])}
if(c&&(!c.getContext||!c.getContext('2d').fillText)){p=doc.createElement('DIV');for(i=0;i<cp.length;++i)
p[cp[i]]=c[cp[i]];c.parentNode.insertBefore(p,c);c.parentNode.removeChild(c);throw 0}
for(i in TagCanvas.options)
this[i]=opt&&Defined(opt[i])?opt[i]:(Defined(TagCanvas[i])?TagCanvas[i]:TagCanvas.options[i]);this.canvas=c;this.ctxt=c.getContext('2d');this.z1=250/max(this.depth,0.001);this.z2=this.z1/this.zoom;this.radius=min(c.height,c.width)*0.0075;this.max_radius=100;this.max_weight=[];this.min_weight=[];this.textFont=this.textFont&&FixFont(this.textFont);this.textHeight*=1;this.imageRadius=this.imageRadius.toString();this.pulsateTo=Clamp(this.pulsateTo,0,1);this.minBrightness=Clamp(this.minBrightness,0,1);this.maxBrightness=Clamp(this.maxBrightness,this.minBrightness,1);this.ctxt.textBaseline='top';this.lx=(this.lock+'').indexOf('x')+1;this.ly=(this.lock+'').indexOf('y')+1;this.frozen=this.dx=this.dy=this.fixedAnim=this.touchState=0;this.fixedAlpha=1;this.source=lctr||cid;this.repeatTags=min(64,~~this.repeatTags);this.minTags=min(200,~~this.minTags);if(~~this.scrollPause>0)
TagCanvas.scrollPause=~~this.scrollPause;else this.scrollPause=0;if(this.minTags>0&&this.repeatTags<1&&(i=this.GetTags().length))
this.repeatTags=ceil(this.minTags/i)-1;this.transform=Matrix.Identity();this.startTime=this.time=TimeNow();this.mx=this.my=-1;this.centreImage&&CentreImage(this);this.Animate=this.dragControl?this.AnimateDrag:this.AnimatePosition;this.animTiming=(typeof TagCanvas[this.animTiming]=='function'?TagCanvas[this.animTiming]:TagCanvas.Smooth);if(this.shadowBlur||this.shadowOffset[0]||this.shadowOffset[1]){this.ctxt.shadowColor=this.shadow;this.shadow=this.ctxt.shadowColor;this.shadowAlpha=ShadowAlphaBroken()}else{delete this.shadow}
this.Load();if(lctr&&this.hideTags){(function(t){if(TagCanvas.loaded)
t.HideTags();else AddHandler('load',function(){t.HideTags()},window)})(this)}
this.yaw=this.initial?this.initial[0]*this.maxSpeed:0;this.pitch=this.initial?this.initial[1]*this.maxSpeed:0;if(this.tooltip){this.ctitle=c.title;c.title='';if(this.tooltip=='native'){this.Tooltip=this.TooltipNative}else{this.Tooltip=this.TooltipDiv;if(!this.ttdiv){this.ttdiv=doc.createElement('div');this.ttdiv.className=this.tooltipClass;this.ttdiv.style.position='absolute';this.ttdiv.style.zIndex=c.style.zIndex+1;AddHandler('mouseover',function(e){e.target.style.display='none'},this.ttdiv);doc.body.appendChild(this.ttdiv)}}}else{this.Tooltip=this.TooltipNone}
if(!this.noMouse&&!handlers[cid]){handlers[cid]=[['mousemove',MouseMove],['mouseout',MouseOut],['mouseup',MouseUp],['touchstart',TouchDown],['touchend',TouchUp],['touchcancel',TouchUp],['touchmove',TouchMove]];if(this.dragControl){handlers[cid].push(['mousedown',MouseDown]);handlers[cid].push(['selectstart',Nop])}
if(this.wheelZoom){handlers[cid].push(['mousewheel',MouseWheel]);handlers[cid].push(['DOMMouseScroll',MouseWheel])}
if(this.scrollPause){handlers[cid].push(['scroll',Scroll,window])}
for(i=0;i<handlers[cid].length;++i){p=handlers[cid][i];AddHandler(p[0],p[1],p[2]?p[2]:c)}}
if(!TagCanvas.started){raf=window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;TagCanvas.NextFrame=raf?TagCanvas.NextFrameRAF:TagCanvas.NextFrameTimeout;TagCanvas.interval=this.interval;TagCanvas.NextFrame(this.interval);TagCanvas.started=1}}
TCproto=TagCanvas.prototype;TCproto.SourceElements=function(){if(doc.querySelectorAll)
return doc.querySelectorAll('#'+this.source);return[doc.getElementById(this.source)]};TCproto.HideTags=function(){var el=this.SourceElements(),i;for(i=0;i<el.length;++i)
el[i].style.display='none'};TCproto.GetTags=function(){var el=this.SourceElements(),etl,tl=[],i,j,k;for(k=0;k<=this.repeatTags;++k){for(i=0;i<el.length;++i){etl=el[i].getElementsByTagName('a');for(j=0;j<etl.length;++j){tl.push(etl[j])}}}
return tl};TCproto.Message=function(text){var tl=[],i,p,tc=text.split(''),a,t,x,z;for(i=0;i<tc.length;++i){if(tc[i]!=' '){p=i-tc.length/2;a=doc.createElement('A');a.href='#';a.innerText=tc[i];x=100*sin(p/9);z=-100*cos(p/9);t=new Tag(this,tc[i],a,[x,0,z],2,18,'#000','#fff',0,0,0,'monospace',2,tc[i]);t.Init();tl.push(t)}}
return tl};TCproto.CreateTag=function(e){var im,i,t,txt,ts,font,bc,boc,p=[0,0,0];if('text'!=this.imageMode){im=e.getElementsByTagName('img');if(im.length){i=new Image;i.src=im[0].src;if(!this.imageMode){t=new Tag(this,"",e,p,0,0);t.SetImage(i);AddImage(i,im[0],t,this);return t}}}
if('image'!=this.imageMode){ts=new TextSplitter(e);txt=ts.Lines();if(!ts.Empty()){font=this.textFont||FixFont(GetProperty(e,'font-family'));if(this.splitWidth)
txt=ts.SplitWidth(this.splitWidth,this.ctxt,font,this.textHeight);bc=this.bgColour=='tag'?GetProperty(e,'background-color'):this.bgColour;boc=this.bgOutline=='tag'?GetProperty(e,'color'):this.bgOutline}else{ts=null}}
if(ts||i){t=new Tag(this,txt,e,p,2,this.textHeight+2,this.textColour||GetProperty(e,'color'),bc,this.bgRadius,boc,this.bgOutlineThickness,font,this.padding,ts&&ts.original);if(i){t.SetImage(i);AddImage(i,im[0],t,this)}else{t.Init()}
return t}};TCproto.UpdateTag=function(t,a){var colour=this.textColour||GetProperty(a,'color'),font=this.textFont||FixFont(GetProperty(a,'font-family')),bc=this.bgColour=='tag'?GetProperty(a,'background-color'):this.bgColour,boc=this.bgOutline=='tag'?GetProperty(a,'color'):this.bgOutline;t.a=a;t.title=a.title;if(t.colour!=colour||t.textFont!=font||t.bgColour!=bc||t.bgOutline!=boc)
t.SetFont(font,colour,bc,boc)};TCproto.Weight=function(tl){var ll=tl.length,w,i,s,weights=[],valid,wfrom=this.weightFrom?this.weightFrom.split(/[, ]/):[null],wl=wfrom.length;for(i=0;i<ll;++i){weights[i]=[];for(s=0;s<wl;++s){w=FindWeight(tl[i].a,wfrom[s],this.textHeight);if(!this.max_weight[s]||w>this.max_weight[s])
this.max_weight[s]=w;if(!this.min_weight[s]||w<this.min_weight[s])
this.min_weight[s]=w;weights[i][s]=w}}
for(s=0;s<wl;++s){if(this.max_weight[s]>this.min_weight[s])
valid=1}
if(valid){for(i=0;i<ll;++i){tl[i].SetWeight(weights[i])}}};TCproto.Load=function(){var tl=this.GetTags(),taglist=[],shape,t,shapeArgs,rx,ry,rz,vl,i,tagmap=[],pfuncs={sphere:PointsOnSphere,vcylinder:PointsOnCylinderV,hcylinder:PointsOnCylinderH,vring:PointsOnRingV,hring:PointsOnRingH};if(tl.length){tagmap.length=tl.length;for(i=0;i<tl.length;++i)
tagmap[i]=i;this.shuffleTags&&Shuffle(tagmap);rx=100*this.radiusX;ry=100*this.radiusY;rz=100*this.radiusZ;this.max_radius=max(rx,max(ry,rz));for(i=0;i<tl.length;++i){t=this.CreateTag(tl[tagmap[i]]);if(t)
taglist.push(t)}
this.weight&&this.Weight(taglist,!0);if(this.shapeArgs){this.shapeArgs[0]=taglist.length}else{shapeArgs=this.shape.toString().split(/[(),]/);shape=shapeArgs.shift();if(typeof window[shape]==='function')
this.shape=window[shape];else this.shape=pfuncs[shape]||pfuncs.sphere;this.shapeArgs=[taglist.length,rx,ry,rz].concat(shapeArgs)}
vl=this.shape.apply(this,this.shapeArgs);this.listLength=taglist.length;for(i=0;i<taglist.length;++i)
taglist[i].position=new Vector(vl[i][0],vl[i][1],vl[i][2]);}
if(this.noTagsMessage&&!taglist.length){i=(this.imageMode&&this.imageMode!='both'?this.imageMode+' ':'');taglist=this.Message('No '+i+'tags')}
this.taglist=taglist};TCproto.Update=function(){var tl=this.GetTags(),newlist=[],taglist=this.taglist,found,added=[],removed=[],vl,ol,nl,i,j;if(!this.shapeArgs)
return this.Load();if(tl.length){nl=this.listLength=tl.length;ol=taglist.length;for(i=0;i<ol;++i){newlist.push(taglist[i]);removed.push(i)}
for(i=0;i<nl;++i){for(j=0,found=0;j<ol;++j){if(taglist[j].EqualTo(tl[i])){this.UpdateTag(newlist[j],tl[i]);found=removed[j]=-1}}
if(!found)
added.push(i)}
for(i=0,j=0;i<ol;++i){if(removed[j]==-1)
removed.splice(j,1);else ++j}
if(removed.length){Shuffle(removed);while(removed.length&&added.length){i=removed.shift();j=added.shift();newlist[i]=this.CreateTag(tl[j])}
removed.sort(function(a,b){return a-b});while(removed.length){newlist.splice(removed.pop(),1)}}
j=newlist.length/(added.length+1);i=0;while(added.length){newlist.splice(ceil(++i*j),0,this.CreateTag(tl[added.shift()]))}
this.shapeArgs[0]=nl=newlist.length;vl=this.shape.apply(this,this.shapeArgs);for(i=0;i<nl;++i)
newlist[i].position=new Vector(vl[i][0],vl[i][1],vl[i][2]);this.weight&&this.Weight(newlist)}
this.taglist=newlist};TCproto.SetShadow=function(c){c.shadowBlur=this.shadowBlur;c.shadowOffsetX=this.shadowOffset[0];c.shadowOffsetY=this.shadowOffset[1]};TCproto.Draw=function(t){if(this.paused)
return;var cv=this.canvas,cw=cv.width,ch=cv.height,max_sc=0,tdelta=(t-this.time)*TagCanvas.interval/1000,x=cw/2+this.offsetX,y=ch/2+this.offsetY,c=this.ctxt,active,a,i,aindex=-1,tl=this.taglist,l=tl.length,frontsel=this.frontSelect,centreDrawn=(this.centreFunc==Nop),fixed;this.time=t;if(this.frozen&&this.drawn)
return this.Animate(cw,ch,tdelta);fixed=this.AnimateFixed();c.setTransform(1,0,0,1,0,0);for(i=0;i<l;++i)
tl[i].Calc(this.transform,this.fixedAlpha);tl=SortList(tl,function(a,b){return b.z-a.z});if(fixed&&this.fixedAnim.active){active=this.fixedAnim.tag.UpdateActive(c,x,y)}else{this.active=null;for(i=0;i<l;++i){a=this.mx>=0&&this.my>=0&&this.taglist[i].CheckActive(c,x,y);if(a&&a.sc>max_sc&&(!frontsel||a.z<=0)){active=a;aindex=i;active.tag=this.taglist[i];max_sc=a.sc}}
this.active=active}
this.txtOpt||(this.shadow&&this.SetShadow(c));c.clearRect(0,0,cw,ch);for(i=0;i<l;++i){if(!centreDrawn&&tl[i].z<=0){try{this.centreFunc(c,cw,ch,x,y)}catch(e){alert(e);this.centreFunc=Nop}
centreDrawn=!0}
if(!(active&&active.tag==tl[i]&&active.PreDraw(c,tl[i],x,y)))
tl[i].Draw(c,x,y);active&&active.tag==tl[i]&&active.PostDraw(c)}
if(this.freezeActive&&active){this.Freeze()}else{this.UnFreeze();this.drawn=(l==this.listLength)}
if(this.fixedCallback){this.fixedCallback(this,this.fixedCallbackTag);this.fixedCallback=null}
fixed||this.Animate(cw,ch,tdelta);active&&active.LastDraw(c);cv.style.cursor=active?this.activeCursor:'';this.Tooltip(active,this.taglist[aindex])};TCproto.TooltipNone=function(){};TCproto.TooltipNative=function(active,tag){if(active)
this.canvas.title=tag&&tag.title?tag.title:'';else this.canvas.title=this.ctitle};TCproto.SetTTDiv=function(title,tag){var tc=this,s=tc.ttdiv.style;if(title!=tc.ttdiv.innerHTML)
s.display='none';tc.ttdiv.innerHTML=title;tag&&(tag.title=tc.ttdiv.innerHTML);if(s.display=='none'&&!tc.tttimer){tc.tttimer=setTimeout(function(){var p=AbsPos(tc.canvas.id);s.display='block';s.left=p.x+tc.mx+'px';s.top=p.y+tc.my+24+'px';tc.tttimer=null},tc.tooltipDelay)}};TCproto.TooltipDiv=function(active,tag){if(active&&tag&&tag.title){this.SetTTDiv(tag.title,tag)}else if(!active&&this.mx!=-1&&this.my!=-1&&this.ctitle.length){this.SetTTDiv(this.ctitle)}else{this.ttdiv.style.display='none'}};TCproto.Transform=function(tc,p,y){if(p||y){var sp=sin(p),cp=cos(p),sy=sin(y),cy=cos(y),ym=new Matrix([cy,0,sy,0,1,0,-sy,0,cy]),pm=new Matrix([1,0,0,0,cp,-sp,0,sp,cp]);tc.transform=tc.transform.mul(ym.mul(pm))}};TCproto.AnimateFixed=function(){var fa,t1,angle,m,d;if(this.fadeIn){t1=TimeNow()-this.startTime;if(t1>=this.fadeIn){this.fadeIn=0;this.fixedAlpha=1}else{this.fixedAlpha=t1/this.fadeIn}}
if(this.fixedAnim){if(!this.fixedAnim.transform)
this.fixedAnim.transform=this.transform;fa=this.fixedAnim,t1=TimeNow()-fa.t0,angle=fa.angle,m,d=this.animTiming(fa.t,t1);this.transform=fa.transform;if(t1>=fa.t){this.fixedCallbackTag=fa.tag;this.fixedCallback=fa.cb;this.fixedAnim=this.yaw=this.pitch=0}else{angle*=d}
m=Matrix.Rotation(angle,fa.axis);this.transform=this.transform.mul(m);return(this.fixedAnim!=0)}
return!1};TCproto.AnimatePosition=function(w,h,t){var tc=this,x=tc.mx,y=tc.my,s,r;if(!tc.frozen&&x>=0&&y>=0&&x<w&&y<h){s=tc.maxSpeed,r=tc.reverse?-1:1;tc.lx||(tc.yaw=((x*2*s/w)-s)*r*t);tc.ly||(tc.pitch=((y*2*s/h)-s)*-r*t);tc.initial=null}else if(!tc.initial){if(tc.frozen&&!tc.freezeDecel)
tc.yaw=tc.pitch=0;else tc.Decel(tc)}
this.Transform(tc,tc.pitch,tc.yaw)};TCproto.AnimateDrag=function(w,h,t){var tc=this,rs=100*t*tc.maxSpeed/tc.max_radius/tc.zoom;if(tc.dx||tc.dy){tc.lx||(tc.yaw=tc.dx*rs/tc.stretchX);tc.ly||(tc.pitch=tc.dy*-rs/tc.stretchY);tc.dx=tc.dy=0;tc.initial=null}else if(!tc.initial){tc.Decel(tc)}
this.Transform(tc,tc.pitch,tc.yaw)};TCproto.Freeze=function(){if(!this.frozen){this.preFreeze=[this.yaw,this.pitch];this.frozen=1;this.drawn=0}};TCproto.UnFreeze=function(){if(this.frozen){this.yaw=this.preFreeze[0];this.pitch=this.preFreeze[1];this.frozen=0}};TCproto.Decel=function(tc){var s=tc.minSpeed,ay=abs(tc.yaw),ap=abs(tc.pitch);if(!tc.lx&&ay>s)
tc.yaw=ay>tc.z0?tc.yaw*tc.decel:0;if(!tc.ly&&ap>s)
tc.pitch=ap>tc.z0?tc.pitch*tc.decel:0};TCproto.Zoom=function(r){this.z2=this.z1*(1/r);this.drawn=0};TCproto.Clicked=function(e){var a=this.active;try{if(a&&a.tag)
if(this.clickToFront===!1||this.clickToFront===null)
a.tag.Clicked(e);else this.TagToFront(a.tag,this.clickToFront,function(){a.tag.Clicked(e)},!0)}catch(ex){}};TCproto.Wheel=function(i){var z=this.zoom+this.zoomStep*(i?1:-1);this.zoom=min(this.zoomMax,max(this.zoomMin,z));this.Zoom(this.zoom)};TCproto.BeginDrag=function(e){this.down=EventXY(e,this.canvas);e.cancelBubble=!0;e.returnValue=!1;e.preventDefault&&e.preventDefault()};TCproto.Drag=function(e,p){if(this.dragControl&&this.down){var t2=this.dragThreshold*this.dragThreshold,dx=p.x-this.down.x,dy=p.y-this.down.y;if(this.dragging||dx*dx+dy*dy>t2){this.dx=dx;this.dy=dy;this.dragging=1;this.down=p}}
return this.dragging};TCproto.EndDrag=function(){var res=this.dragging;this.dragging=this.down=null;return res};function PinchDistance(e){var t1=e.targetTouches[0],t2=e.targetTouches[1];return sqrt(pow(t2.pageX-t1.pageX,2)+pow(t2.pageY-t1.pageY,2))}
TCproto.BeginPinch=function(e){this.pinched=[PinchDistance(e),this.zoom];e.preventDefault&&e.preventDefault()};TCproto.Pinch=function(e){var z,d,p=this.pinched;if(!p)
return;d=PinchDistance(e);z=p[1]*d/p[0];this.zoom=min(this.zoomMax,max(this.zoomMin,z));this.Zoom(this.zoom)};TCproto.EndPinch=function(e){this.pinched=null};TCproto.Pause=function(){this.paused=!0};TCproto.Resume=function(){this.paused=!1};TCproto.SetSpeed=function(i){this.initial=i;this.yaw=i[0]*this.maxSpeed;this.pitch=i[1]*this.maxSpeed};TCproto.FindTag=function(t){if(!Defined(t))
return null;Defined(t.index)&&(t=t.index);if(!IsObject(t))
return this.taglist[t];var srch,tgt,i;if(Defined(t.id))
srch='id',tgt=t.id;else if(Defined(t.text))
srch='innerText',tgt=t.text;for(i=0;i<this.taglist.length;++i)
if(this.taglist[i].a[srch]==tgt)
return this.taglist[i]};TCproto.RotateTag=function(tag,lt,lg,time,callback,active){var t=tag.Calc(this.transform,1),v1=new Vector(t.x,t.y,t.z),v2=MakeVector(lg,lt),angle=v1.angle(v2),u=v1.cross(v2).unit();if(angle==0){this.fixedCallbackTag=tag;this.fixedCallback=callback}else{this.fixedAnim={angle:-angle,axis:u,t:time,t0:TimeNow(),cb:callback,tag:tag,active:active}}};TCproto.TagToFront=function(tag,time,callback,active){this.RotateTag(tag,0,0,time,callback,active)};TagCanvas.Start=function(id,l,o){TagCanvas.Delete(id);TagCanvas.tc[id]=new TagCanvas(id,l,o)};function tccall(f,id){TagCanvas.tc[id]&&TagCanvas.tc[id][f]()}
TagCanvas.Linear=function(t,t0){return t0/t}
TagCanvas.Smooth=function(t,t0){return 0.5-cos(t0*Math.PI/t)/2}
TagCanvas.Pause=function(id){tccall('Pause',id)};TagCanvas.Resume=function(id){tccall('Resume',id)};TagCanvas.Reload=function(id){tccall('Load',id)};TagCanvas.Update=function(id){tccall('Update',id)};TagCanvas.SetSpeed=function(id,speed){if(IsObject(speed)&&TagCanvas.tc[id]&&!isNaN(speed[0])&&!isNaN(speed[1])){TagCanvas.tc[id].SetSpeed(speed);return!0}
return!1};TagCanvas.TagToFront=function(id,options){if(!IsObject(options))
return!1;options.lat=options.lng=0;return TagCanvas.RotateTag(id,options)};TagCanvas.RotateTag=function(id,options){if(IsObject(options)&&TagCanvas.tc[id]){if(isNaN(options.time))
options.time=500;var tt=TagCanvas.tc[id].FindTag(options);if(tt){TagCanvas.tc[id].RotateTag(tt,options.lat,options.lng,options.time,options.callback,options.active);return!0}}
return!1};TagCanvas.Delete=function(id){var i,c;if(handlers[id]){c=doc.getElementById(id);if(c){for(i=0;i<handlers[id].length;++i)
RemoveHandler(handlers[id][i][0],handlers[id][i][1],c);}}
delete handlers[id];delete TagCanvas.tc[id]};TagCanvas.NextFrameRAF=function(){requestAnimationFrame(DrawCanvasRAF)};TagCanvas.NextFrameTimeout=function(iv){setTimeout(DrawCanvas,iv)};TagCanvas.tc={};TagCanvas.options={z1:20000,z2:20000,z0:0.0002,freezeActive:!1,freezeDecel:!1,activeCursor:'pointer',pulsateTo:1,pulsateTime:3,reverse:!1,depth:0.5,maxSpeed:0.05,minSpeed:0,decel:0.95,interval:20,minBrightness:0.1,maxBrightness:1,outlineColour:'#ffff99',outlineThickness:2,outlineOffset:5,outlineMethod:'outline',outlineRadius:0,textColour:'#ff99ff',textHeight:15,textFont:'Helvetica, Arial, sans-serif',shadow:'#000',shadowBlur:0,shadowOffset:[0,0],initial:null,hideTags:!0,zoom:1,weight:!1,weightMode:'size',weightFrom:null,weightSize:1,weightSizeMin:null,weightSizeMax:null,weightGradient:{0:'#f00',0.33:'#ff0',0.66:'#0f0',1:'#00f'},txtOpt:!0,txtScale:2,frontSelect:!1,wheelZoom:!0,zoomMin:0.3,zoomMax:3,zoomStep:0.05,shape:'sphere',lock:null,tooltip:null,tooltipDelay:300,tooltipClass:'tctooltip',radiusX:1,radiusY:1,radiusZ:1,stretchX:1,stretchY:1,offsetX:0,offsetY:0,shuffleTags:!1,noSelect:!1,noMouse:!1,imageScale:1,paused:!1,dragControl:!1,dragThreshold:4,centreFunc:Nop,splitWidth:0,animTiming:'Smooth',clickToFront:!1,fadeIn:0,padding:0,bgColour:null,bgRadius:0,bgOutline:null,bgOutlineThickness:0,outlineIncrease:4,textAlign:'centre',textVAlign:'middle',imageMode:null,imagePosition:null,imagePadding:2,imageAlign:'centre',imageVAlign:'middle',noTagsMessage:!0,centreImage:null,pinchZoom:!1,repeatTags:0,minTags:0,imageRadius:0,scrollPause:!1,outlineDash:0,outlineDashSpace:0,outlineDashSpeed:1};for(i in TagCanvas.options)TagCanvas[i]=TagCanvas.options[i];window.TagCanvas=TagCanvas;jQuery.fn.tagcanvas=function(options,lctr){var fn={pause:function(){$(this).each(function(){tccall('Pause',$(this)[0].id)})},resume:function(){$(this).each(function(){tccall('Resume',$(this)[0].id)})},reload:function(){$(this).each(function(){tccall('Load',$(this)[0].id)})},update:function(){$(this).each(function(){tccall('Update',$(this)[0].id)})},tagtofront:function(){$(this).each(function(){TagCanvas.TagToFront($(this)[0].id,lctr)})},rotatetag:function(){$(this).each(function(){TagCanvas.RotateTag($(this)[0].id,lctr)})},'delete':function(){$(this).each(function(){TagCanvas.Delete($(this)[0].id)})},setspeed:function(){$(this).each(function(){TagCanvas.SetSpeed($(this)[0].id,lctr)})}};if(typeof options=='string'&&fn[options]){fn[options].apply(this);return this}else{TagCanvas.jquery=1;$(this).each(function(){TagCanvas.Start($(this)[0].id,lctr,options)});return TagCanvas.started}};AddHandler('load',function(){TagCanvas.loaded=1},window)})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/colorbox/jquery.colorbox.js */
/*!
	Colorbox 1.6.4
	license: MIT
	http://www.jacklmoore.com/colorbox
*/
(function($,document,window){var
defaults={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:0.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:undefined,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:'@2x.$1',current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return $(this).attr('href')},title:function(){return this.title},createImg:function(){var img=new Image();var attrs=$(this).data('cbox-img-attrs');if(typeof attrs==='object'){$.each(attrs,function(key,val){img[key]=val})}
return img},createIframe:function(){var iframe=document.createElement('iframe');var attrs=$(this).data('cbox-iframe-attrs');if(typeof attrs==='object'){$.each(attrs,function(key,val){iframe[key]=val})}
if('frameBorder' in iframe){iframe.frameBorder=0}
if('allowTransparency' in iframe){iframe.allowTransparency="true"}
iframe.name=(new Date()).getTime();iframe.allowFullscreen=!0;return iframe}},colorbox='colorbox',prefix='cbox',boxElement=prefix+'Element',event_open=prefix+'_open',event_load=prefix+'_load',event_complete=prefix+'_complete',event_cleanup=prefix+'_cleanup',event_closed=prefix+'_closed',event_purge=prefix+'_purge',$overlay,$box,$wrap,$content,$topBorder,$leftBorder,$rightBorder,$bottomBorder,$related,$window,$loaded,$loadingBay,$loadingOverlay,$title,$current,$slideshow,$next,$prev,$close,$groupControls,$events=$('<a/>'),settings,interfaceHeight,interfaceWidth,loadedHeight,loadedWidth,index,photo,open,active,closing,loadingTimer,publicMethod,div="div",requests=0,previousCSS={},init;function $tag(tag,id,css){var element=document.createElement(tag);if(id){element.id=prefix+id}
if(css){element.style.cssText=css}
return $(element)}
function winheight(){return window.innerHeight?window.innerHeight:$(window).height()}
function Settings(element,options){if(options!==Object(options)){options={}}
this.cache={};this.el=element;this.value=function(key){var dataAttr;if(this.cache[key]===undefined){dataAttr=$(this.el).attr('data-cbox-'+key);if(dataAttr!==undefined){this.cache[key]=dataAttr}else if(options[key]!==undefined){this.cache[key]=options[key]}else if(defaults[key]!==undefined){this.cache[key]=defaults[key]}}
return this.cache[key]};this.get=function(key){var value=this.value(key);return $.isFunction(value)?value.call(this.el,this):value}}
function getIndex(increment){var
max=$related.length,newIndex=(index+increment)%max;return(newIndex<0)?max+newIndex:newIndex}
function setSize(size,dimension){return Math.round((/%/.test(size)?((dimension==='x'?$window.width():winheight())/100):1)*parseInt(size,10))}
function isImage(settings,url){return settings.get('photo')||settings.get('photoRegex').test(url)}
function retinaUrl(settings,url){return settings.get('retinaUrl')&&window.devicePixelRatio>1?url.replace(settings.get('photoRegex'),settings.get('retinaSuffix')):url}
function trapFocus(e){if('contains' in $box[0]&&!$box[0].contains(e.target)&&e.target!==$overlay[0]){e.stopPropagation();$box.focus()}}
function setClass(str){if(setClass.str!==str){$box.add($overlay).removeClass(setClass.str).addClass(str);setClass.str=str}}
function getRelated(rel){index=0;if(rel&&rel!==!1&&rel!=='nofollow'){$related=$('.'+boxElement).filter(function(){var options=$.data(this,colorbox);var settings=new Settings(this,options);return(settings.get('rel')===rel)});index=$related.index(settings.el);if(index===-1){$related=$related.add(settings.el);index=$related.length-1}}else{$related=$(settings.el)}}
function trigger(event){$(document).trigger(event);$events.triggerHandler(event)}
var slideshow=(function(){var active,className=prefix+"Slideshow_",click="click."+prefix,timeOut;function clear(){clearTimeout(timeOut)}
function set(){if(settings.get('loop')||$related[index+1]){clear();timeOut=setTimeout(publicMethod.next,settings.get('slideshowSpeed'))}}
function start(){$slideshow.html(settings.get('slideshowStop')).unbind(click).one(click,stop);$events.bind(event_complete,set).bind(event_load,clear);$box.removeClass(className+"off").addClass(className+"on")}
function stop(){clear();$events.unbind(event_complete,set).unbind(event_load,clear);$slideshow.html(settings.get('slideshowStart')).unbind(click).one(click,function(){publicMethod.next();start()});$box.removeClass(className+"on").addClass(className+"off")}
function reset(){active=!1;$slideshow.hide();clear();$events.unbind(event_complete,set).unbind(event_load,clear);$box.removeClass(className+"off "+className+"on")}
return function(){if(active){if(!settings.get('slideshow')){$events.unbind(event_cleanup,reset);reset()}}else{if(settings.get('slideshow')&&$related[1]){active=!0;$events.one(event_cleanup,reset);if(settings.get('slideshowAuto')){start()}else{stop()}
$slideshow.show()}}}}());function launch(element){var options;if(!closing){options=$(element).data(colorbox);settings=new Settings(element,options);getRelated(settings.get('rel'));if(!open){open=active=!0;setClass(settings.get('className'));$box.css({visibility:'hidden',display:'block',opacity:''});$loaded=$tag(div,'LoadedContent','width:0; height:0; overflow:hidden; visibility:hidden');$content.css({width:'',height:''}).append($loaded);interfaceHeight=$topBorder.height()+$bottomBorder.height()+$content.outerHeight(!0)-$content.height();interfaceWidth=$leftBorder.width()+$rightBorder.width()+$content.outerWidth(!0)-$content.width();loadedHeight=$loaded.outerHeight(!0);loadedWidth=$loaded.outerWidth(!0);var initialWidth=setSize(settings.get('initialWidth'),'x');var initialHeight=setSize(settings.get('initialHeight'),'y');var maxWidth=settings.get('maxWidth');var maxHeight=settings.get('maxHeight');settings.w=Math.max((maxWidth!==!1?Math.min(initialWidth,setSize(maxWidth,'x')):initialWidth)-loadedWidth-interfaceWidth,0);settings.h=Math.max((maxHeight!==!1?Math.min(initialHeight,setSize(maxHeight,'y')):initialHeight)-loadedHeight-interfaceHeight,0);$loaded.css({width:'',height:settings.h});publicMethod.position();trigger(event_open);settings.get('onOpen');$groupControls.add($title).hide();$box.focus();if(settings.get('trapFocus')){if(document.addEventListener){document.addEventListener('focus',trapFocus,!0);$events.one(event_closed,function(){document.removeEventListener('focus',trapFocus,!0)})}}
if(settings.get('returnFocus')){$events.one(event_closed,function(){$(settings.el).focus()})}}
var opacity=parseFloat(settings.get('opacity'));$overlay.css({opacity:opacity===opacity?opacity:'',cursor:settings.get('overlayClose')?'pointer':'',visibility:'visible'}).show();if(settings.get('closeButton')){$close.html(settings.get('close')).appendTo($content)}else{$close.appendTo('<div/>')}
load()}}
function appendHTML(){if(!$box){init=!1;$window=$(window);$box=$tag(div).attr({id:colorbox,'class':$.support.opacity===!1?prefix+'IE':'',role:'dialog',tabindex:'-1'}).hide();$overlay=$tag(div,"Overlay").hide();$loadingOverlay=$([$tag(div,"LoadingOverlay")[0],$tag(div,"LoadingGraphic")[0]]);$wrap=$tag(div,"Wrapper");$content=$tag(div,"Content").append($title=$tag(div,"Title"),$current=$tag(div,"Current"),$prev=$('<button type="button"/>').attr({id:prefix+'Previous'}),$next=$('<button type="button"/>').attr({id:prefix+'Next'}),$slideshow=$('<button type="button"/>').attr({id:prefix+'Slideshow'}),$loadingOverlay);$close=$('<button type="button"/>').attr({id:prefix+'Close'});$wrap.append($tag(div).append($tag(div,"TopLeft"),$topBorder=$tag(div,"TopCenter"),$tag(div,"TopRight")),$tag(div,!1,'clear:left').append($leftBorder=$tag(div,"MiddleLeft"),$content,$rightBorder=$tag(div,"MiddleRight")),$tag(div,!1,'clear:left').append($tag(div,"BottomLeft"),$bottomBorder=$tag(div,"BottomCenter"),$tag(div,"BottomRight"))).find('div div').css({'float':'left'});$loadingBay=$tag(div,!1,'position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;');$groupControls=$next.add($prev).add($current).add($slideshow)}
if(document.body&&!$box.parent().length){$(document.body).append($overlay,$box.append($wrap,$loadingBay))}}
function addBindings(){function clickHandler(e){if(!(e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey)){e.preventDefault();launch(this)}}
if($box){if(!init){init=!0;$next.click(function(){publicMethod.next()});$prev.click(function(){publicMethod.prev()});$close.click(function(){publicMethod.close()});$overlay.click(function(){if(settings.get('overlayClose')){publicMethod.close()}});$(document).bind('keydown.'+prefix,function(e){var key=e.keyCode;if(open&&settings.get('escKey')&&key===27){e.preventDefault();publicMethod.close()}
if(open&&settings.get('arrowKey')&&$related[1]&&!e.altKey){if(key===37){e.preventDefault();$prev.click()}else if(key===39){e.preventDefault();$next.click()}}});if($.isFunction($.fn.on)){$(document).on('click.'+prefix,'.'+boxElement,clickHandler)}else{$('.'+boxElement).live('click.'+prefix,clickHandler)}}
return!0}
return!1}
if($[colorbox]){return}
$(appendHTML);publicMethod=$.fn[colorbox]=$[colorbox]=function(options,callback){var settings;var $obj=this;options=options||{};if($.isFunction($obj)){$obj=$('<a/>');options.open=!0}
if(!$obj[0]){return $obj}
appendHTML();if(addBindings()){if(callback){options.onComplete=callback}
$obj.each(function(){var old=$.data(this,colorbox)||{};$.data(this,colorbox,$.extend(old,options))}).addClass(boxElement);settings=new Settings($obj[0],options);if(settings.get('open')){launch($obj[0])}}
return $obj};publicMethod.position=function(speed,loadedCallback){var
css,top=0,left=0,offset=$box.offset(),scrollTop,scrollLeft;$window.unbind('resize.'+prefix);$box.css({top:-9e4,left:-9e4});scrollTop=$window.scrollTop();scrollLeft=$window.scrollLeft();if(settings.get('fixed')){offset.top-=scrollTop;offset.left-=scrollLeft;$box.css({position:'fixed'})}else{top=scrollTop;left=scrollLeft;$box.css({position:'absolute'})}
if(settings.get('right')!==!1){left+=Math.max($window.width()-settings.w-loadedWidth-interfaceWidth-setSize(settings.get('right'),'x'),0)}else if(settings.get('left')!==!1){left+=setSize(settings.get('left'),'x')}else{left+=Math.round(Math.max($window.width()-settings.w-loadedWidth-interfaceWidth,0)/2)}
if(settings.get('bottom')!==!1){top+=Math.max(winheight()-settings.h-loadedHeight-interfaceHeight-setSize(settings.get('bottom'),'y'),0)}else if(settings.get('top')!==!1){top+=setSize(settings.get('top'),'y')}else{top+=Math.round(Math.max(winheight()-settings.h-loadedHeight-interfaceHeight,0)/2)}
$box.css({top:offset.top,left:offset.left,visibility:'visible'});$wrap[0].style.width=$wrap[0].style.height="9999px";function modalDimensions(){$topBorder[0].style.width=$bottomBorder[0].style.width=$content[0].style.width=(parseInt($box[0].style.width,10)-interfaceWidth)+'px';$content[0].style.height=$leftBorder[0].style.height=$rightBorder[0].style.height=(parseInt($box[0].style.height,10)-interfaceHeight)+'px'}
css={width:settings.w+loadedWidth+interfaceWidth,height:settings.h+loadedHeight+interfaceHeight,top:top,left:left};if(speed){var tempSpeed=0;$.each(css,function(i){if(css[i]!==previousCSS[i]){tempSpeed=speed;return}});speed=tempSpeed}
previousCSS=css;if(!speed){$box.css(css)}
$box.dequeue().animate(css,{duration:speed||0,complete:function(){modalDimensions();active=!1;$wrap[0].style.width=(settings.w+loadedWidth+interfaceWidth)+"px";$wrap[0].style.height=(settings.h+loadedHeight+interfaceHeight)+"px";if(settings.get('reposition')){setTimeout(function(){$window.bind('resize.'+prefix,publicMethod.position)},1)}
if($.isFunction(loadedCallback)){loadedCallback()}},step:modalDimensions})};publicMethod.resize=function(options){var scrolltop;if(open){options=options||{};if(options.width){settings.w=setSize(options.width,'x')-loadedWidth-interfaceWidth}
if(options.innerWidth){settings.w=setSize(options.innerWidth,'x')}
$loaded.css({width:settings.w});if(options.height){settings.h=setSize(options.height,'y')-loadedHeight-interfaceHeight}
if(options.innerHeight){settings.h=setSize(options.innerHeight,'y')}
if(!options.innerHeight&&!options.height){scrolltop=$loaded.scrollTop();$loaded.css({height:"auto"});settings.h=$loaded.height()}
$loaded.css({height:settings.h});if(scrolltop){$loaded.scrollTop(scrolltop)}
publicMethod.position(settings.get('transition')==="none"?0:settings.get('speed'))}};publicMethod.prep=function(object){if(!open){return}
var callback,speed=settings.get('transition')==="none"?0:settings.get('speed');$loaded.remove();$loaded=$tag(div,'LoadedContent').append(object);function getWidth(){settings.w=settings.w||$loaded.width();settings.w=settings.mw&&settings.mw<settings.w?settings.mw:settings.w;return settings.w}
function getHeight(){settings.h=settings.h||$loaded.height();settings.h=settings.mh&&settings.mh<settings.h?settings.mh:settings.h;return settings.h}
$loaded.hide().appendTo($loadingBay.show()).css({width:getWidth(),overflow:settings.get('scrolling')?'auto':'hidden'}).css({height:getHeight()}).prependTo($content);$loadingBay.hide();$(photo).css({'float':'none'});setClass(settings.get('className'));callback=function(){var total=$related.length,iframe,complete;if(!open){return}
function removeFilter(){if($.support.opacity===!1){$box[0].style.removeAttribute('filter')}}
complete=function(){clearTimeout(loadingTimer);$loadingOverlay.hide();trigger(event_complete);settings.get('onComplete')};$title.html(settings.get('title')).show();$loaded.show();if(total>1){if(typeof settings.get('current')==="string"){$current.html(settings.get('current').replace('{current}',index+1).replace('{total}',total)).show()}
$next[(settings.get('loop')||index<total-1)?"show":"hide"]().html(settings.get('next'));$prev[(settings.get('loop')||index)?"show":"hide"]().html(settings.get('previous'));slideshow();if(settings.get('preloading')){$.each([getIndex(-1),getIndex(1)],function(){var img,i=$related[this],settings=new Settings(i,$.data(i,colorbox)),src=settings.get('href');if(src&&isImage(settings,src)){src=retinaUrl(settings,src);img=document.createElement('img');img.src=src}})}}else{$groupControls.hide()}
if(settings.get('iframe')){iframe=settings.get('createIframe');if(!settings.get('scrolling')){iframe.scrolling="no"}
$(iframe).attr({src:settings.get('href'),'class':prefix+'Iframe'}).one('load',complete).appendTo($loaded);$events.one(event_purge,function(){iframe.src="//about:blank"});if(settings.get('fastIframe')){$(iframe).trigger('load')}}else{complete()}
if(settings.get('transition')==='fade'){$box.fadeTo(speed,1,removeFilter)}else{removeFilter()}};if(settings.get('transition')==='fade'){$box.fadeTo(speed,0,function(){publicMethod.position(0,callback)})}else{publicMethod.position(speed,callback)}};function load(){var href,setResize,prep=publicMethod.prep,$inline,request=++requests;active=!0;photo=!1;trigger(event_purge);trigger(event_load);settings.get('onLoad');settings.h=settings.get('height')?setSize(settings.get('height'),'y')-loadedHeight-interfaceHeight:settings.get('innerHeight')&&setSize(settings.get('innerHeight'),'y');settings.w=settings.get('width')?setSize(settings.get('width'),'x')-loadedWidth-interfaceWidth:settings.get('innerWidth')&&setSize(settings.get('innerWidth'),'x');settings.mw=settings.w;settings.mh=settings.h;if(settings.get('maxWidth')){settings.mw=setSize(settings.get('maxWidth'),'x')-loadedWidth-interfaceWidth;settings.mw=settings.w&&settings.w<settings.mw?settings.w:settings.mw}
if(settings.get('maxHeight')){settings.mh=setSize(settings.get('maxHeight'),'y')-loadedHeight-interfaceHeight;settings.mh=settings.h&&settings.h<settings.mh?settings.h:settings.mh}
href=settings.get('href');loadingTimer=setTimeout(function(){$loadingOverlay.show()},100);if(settings.get('inline')){var $target=$(href).eq(0);$inline=$('<div>').hide().insertBefore($target);$events.one(event_purge,function(){$inline.replaceWith($target)});prep($target)}else if(settings.get('iframe')){prep(" ")}else if(settings.get('html')){prep(settings.get('html'))}else if(isImage(settings,href)){href=retinaUrl(settings,href);photo=settings.get('createImg');$(photo).addClass(prefix+'Photo').bind('error.'+prefix,function(){prep($tag(div,'Error').html(settings.get('imgError')))}).one('load',function(){if(request!==requests){return}
setTimeout(function(){var percent;if(settings.get('retinaImage')&&window.devicePixelRatio>1){photo.height=photo.height/window.devicePixelRatio;photo.width=photo.width/window.devicePixelRatio}
if(settings.get('scalePhotos')){setResize=function(){photo.height-=photo.height*percent;photo.width-=photo.width*percent};if(settings.mw&&photo.width>settings.mw){percent=(photo.width-settings.mw)/photo.width;setResize()}
if(settings.mh&&photo.height>settings.mh){percent=(photo.height-settings.mh)/photo.height;setResize()}}
if(settings.h){photo.style.marginTop=Math.max(settings.mh-photo.height,0)/2+'px'}
if($related[1]&&(settings.get('loop')||$related[index+1])){photo.style.cursor='pointer';$(photo).bind('click.'+prefix,function(){publicMethod.next()})}
photo.style.width=photo.width+'px';photo.style.height=photo.height+'px';prep(photo)},1)});photo.src=href}else if(href){$loadingBay.load(href,settings.get('data'),function(data,status){if(request===requests){prep(status==='error'?$tag(div,'Error').html(settings.get('xhrError')):$(this).contents())}})}}
publicMethod.next=function(){if(!active&&$related[1]&&(settings.get('loop')||$related[index+1])){index=getIndex(1);launch($related[index])}};publicMethod.prev=function(){if(!active&&$related[1]&&(settings.get('loop')||index)){index=getIndex(-1);launch($related[index])}};publicMethod.close=function(){if(open&&!closing){closing=!0;open=!1;trigger(event_cleanup);settings.get('onCleanup');$window.unbind('.'+prefix);$overlay.fadeTo(settings.get('fadeOut')||0,0);$box.stop().fadeTo(settings.get('fadeOut')||0,0,function(){$box.hide();$overlay.hide();trigger(event_purge);$loaded.remove();setTimeout(function(){closing=!1;trigger(event_closed);settings.get('onClosed')},1)})}};publicMethod.remove=function(){if(!$box){return}
$box.stop();$[colorbox].close();$box.stop(!1,!0).remove();$overlay.remove();closing=!1;$box=null;$('.'+boxElement).removeData(colorbox).removeClass(boxElement);$(document).unbind('click.'+prefix).unbind('keydown.'+prefix)};publicMethod.element=function(){return $(settings.el)};publicMethod.settings=defaults}(jQuery,document,window));
/* rank:50standard - minify:disabled - adding raw file. vendor_bundled/vendor/bower-asset/swfobject/swfobject/swfobject.js */
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();;
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/jquery-validation/dist/jquery.validate.js */
/*!
 * jQuery Validation Plugin v1.13.1
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2014 Jörn Zaefferer
 * Released under the MIT license
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}}(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}
return}
var validator=$.data(this[0],"validator");if(validator){return validator}
this.attr("novalidate","novalidate");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.validateDelegate(":submit","click",function(event){if(validator.settings.submitHandler){validator.submitButton=event.target}
if($(event.target).hasClass("cancel")){validator.cancelSubmit=!0}
if($(event.target).attr("formnovalidate")!==undefined){validator.cancelSubmit=!0}});this.submit(function(event){if(validator.settings.debug){event.preventDefault()}
function handle(){var hidden,result;if(validator.settings.submitHandler){if(validator.submitButton){hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)}
result=validator.settings.submitHandler.call(validator,validator.currentForm,event);if(validator.submitButton){hidden.remove()}
if(result!==undefined){return result}
return!1}
return!0}
if(validator.cancelSubmit){validator.cancelSubmit=!1;return handle()}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=!0;return!1}
return handle()}else{validator.focusInvalid();return!1}})}
return validator},valid:function(){var valid,validator;if($(this[0]).is("form")){valid=this.validate().form()}else{valid=!0;validator=$(this[0].form).validate();this.each(function(){valid=validator.element(this)&&valid})}
return valid},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value)});return result},rules:function(command,argument){var element=this[0],settings,staticRules,existingRules,data,param,filtered;if(command){settings=$.data(element.form,"validator").settings;staticRules=settings.rules;existingRules=$.validator.staticRules(element);switch(command){case "add":$.extend(existingRules,$.validator.normalizeRule(argument));delete existingRules.messages;staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages)}
break;case "remove":if(!argument){delete staticRules[element.name];return existingRules}
filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];if(method==="required"){$(element).removeAttr("aria-required")}});return filtered}}
data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){param=data.required;delete data.required;data=$.extend({required:param},data);$(element).attr("aria-required","true")}
if(data.remote){param=data.remote;delete data.remote;data=$.extend(data,{remote:param})}
return data}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){return!!$.trim(""+$(a).val())},unchecked:function(a){return!$(a).prop("checked")}});$.validator=function(options,form){this.settings=$.extend(!0,{},$.validator.defaults,options);this.currentForm=form;this.init()};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args)}}
if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1)}
if(params.constructor!==Array){params=[params]}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n})});return source};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass)}
this.hideThese(this.errorsFor(element))}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element)}},onkeyup:function(element,event){if(event.which===9&&this.elementValue(element)===""){return}else if(element.name in this.submitted||element===this.lastElement){this.element(element)}},onclick:function(element){if(element.name in this.submitted){this.element(element)}else if(element.parentNode.name in this.submitted){this.element(element.parentNode)}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass)}else{$(element).addClass(errorClass).removeClass(validClass)}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass)}else{$(element).removeClass(errorClass).addClass(validClass)}}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={}),rules;$.each(this.settings.groups,function(key,value){if(typeof value==="string"){value=value.split(/\s/)}
$.each(value,function(index,name){groups[name]=key})});rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,""),settings=validator.settings;if(settings[eventType]&&!this.is(settings.ignore)){settings[eventType].call(validator,this[0],event)}}
$(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, "+"[type='number'], [type='search'] ,[type='tel'], [type='url'], "+"[type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], "+"[type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",delegate).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",delegate);if(this.settings.invalidHandler){$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}
$(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this])}
this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i])}
return this.valid()},element:function(element){var cleanElement=this.clean(element),checkElement=this.validationTargetFor(cleanElement),result=!0;this.lastElement=checkElement;if(checkElement===undefined){delete this.invalid[cleanElement.name]}else{this.prepareElement(checkElement);this.currentElements=$(checkElement);result=this.check(checkElement)!==!1;if(result){delete this.invalid[checkElement.name]}else{this.invalid[checkElement.name]=!0}}
$(element).attr("aria-invalid",!result);if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}
this.showErrors();return result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]})}
this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}
if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm()}
this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var count=0,i;for(i in obj){count++}
return count},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(errors){errors.not(this.containers).text("");this.addWrapper(errors).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name}).length===1&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){if(!this.name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this)}
if(this.name in rulesCache||!validator.objectLength($(this).rules())){return!1}
rulesCache[this.name]=!0;return!0})},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element)},elementValue:function(element){var val,$element=$(element),type=element.type;if(type==="radio"||type==="checkbox"){return $("input[name='"+element.name+"']:checked").val()}else if(type==="number"&&typeof element.validity!=="undefined"){return element.validity.badInput?!1:$element.val()}
val=$element.val();if(typeof val==="string"){return val.replace(/\r/g,"")}
return val},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules(),rulesCount=$.map(rules,function(n,i){return i}).length,dependencyMismatch=!1,val=this.elementValue(element),result,method,rule;for(method in rules){rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"&&rulesCount===1){dependencyMismatch=!0;continue}
dependencyMismatch=!1;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return}
if(!result){this.formatAndAdd(element,rule);return!1}}catch(e){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e)}
throw e}}
if(dependencyMismatch){return}
if(this.objectLength(rules)){this.successList.push(element)}
return!0},customDataMessage:function(element,method){return $(element).data("msg"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase())||$(element).data("msg")},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i]}}
return undefined},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element)}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters)}
this.errorList.push({message:message,element:element,method:rule.method});this.errorMap[element.name]=message;this.submitted[element.name]=message},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))}
return toToggle},defaultShowErrors:function(){var i,elements,error;for(i=0;this.errorList[i];i++){error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass)}
this.showLabel(error.element,error.message)}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}
if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i])}}
if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass)}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){var
v=this,invalid=v.invalid,elements=$([]);$.each(invalid,function(key,value){if(value!==!1&&v.invalid.hasOwnProperty(key)){elements=elements.add(v.findByName(key))}});return elements},showLabel:function(element,message){var place,group,errorID,error=this.errorsFor(element),elementID=this.idOrName(element),describedBy=$(element).attr("aria-describedby");if(error.length){error.removeClass(this.settings.validClass).addClass(this.settings.errorClass);error.html(message)}else{error=$("<"+this.settings.errorElement+">").attr("id",elementID+"-error").addClass(this.settings.errorClass).html(message||"");place=error;if(this.settings.wrapper){place=error.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}
if(this.labelContainer.length){this.labelContainer.append(place)}else if(this.settings.errorPlacement){this.settings.errorPlacement(place,$(element))}else{place.insertAfter(element)}
if(error.is("label")){error.attr("for",elementID)}else if(error.parents("label[for='"+elementID+"']").length===0){errorID=error.attr("id").replace(/(:|\.|\[|\])/g,"\\$1");if(!describedBy){describedBy=errorID}else if(!describedBy.match(new RegExp("\\b"+errorID+"\\b"))){describedBy+=" "+errorID}
$(element).attr("aria-describedby",describedBy);group=this.groups[element.name];if(group){$.each(this.groups,function(name,testgroup){if(testgroup===group){$("[name='"+name+"']",this.currentForm).attr("aria-describedby",error.attr("id"))}})}}}
if(!message&&this.settings.success){error.text("");if(typeof this.settings.success==="string"){error.addClass(this.settings.success)}else{this.settings.success(error,element)}}
this.toShow=this.toShow.add(error)},errorsFor:function(element){var name=this.idOrName(element),describer=$(element).attr("aria-describedby"),selector="label[for='"+name+"'], label[for='"+name+"'] *";if(describer){selector=selector+", #"+describer.replace(/\s+/g,", #")}
return this.errors().filter(selector)},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name)}
return $(element).not(this.settings.ignore)[0]},checkable:function(element){return(/radio|checkbox/i).test(element.type)},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case "select":return $("option:selected",element).length;case "input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length}}
return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):!0},dependTypes:{"boolean":function(param){return param},"string":function(param,element){return!!$(param,element.form).length},"function":function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=!0}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}
delete this.pending[element.name];if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=!1}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=!1}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:!0,message:this.defaultMessage(element,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules}else{$.extend(this.classRuleSettings,className)}},classRules:function(element){var rules={},classes=$(element).attr("class");if(classes){$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this])}})}
return rules},attributeRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){if(method==="required"){value=element.getAttribute(method);if(value===""){value=!0}
value=!!value}else{value=$element.attr(method)}
if(/min|max/.test(method)&&(type===null||/number|range|text/.test(type))){value=Number(value)}
if(value||value===0){rules[method]=value}else if(type===method&&type!=="range"){rules[method]=!0}}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength}
return rules},dataRules:function(element){var method,value,rules={},$element=$(element);for(method in $.validator.methods){value=$element.data("rule"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase());if(value!==undefined){rules[method]=value}}
return rules},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}}
return rules},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===!1){delete rules[prop];return}
if(val.param||val.depends){var keepRule=!0;switch(typeof val.depends){case "string":keepRule=!!$(val.depends,element.form).length;break;case "function":keepRule=val.depends.call(element,element);break}
if(keepRule){rules[prop]=val.param!==undefined?val.param:!0}else{delete rules[prop]}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter});$.each(["minlength","maxlength"],function(){if(rules[this]){rules[this]=Number(rules[this])}});$.each(["rangelength","range"],function(){var parts;if(rules[this]){if($.isArray(rules[this])){rules[this]=[Number(rules[this][0]),Number(rules[this][1])]}else if(typeof rules[this]==="string"){parts=rules[this].replace(/[\[\]]/g,"").split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])]}}});if($.validator.autoCreateRanges){if(rules.min!=null&&rules.max!=null){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max}
if(rules.minlength!=null&&rules.maxlength!=null){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength}}
return rules},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=!0});data=transformed}
return data},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name))}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch"}
if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0}
if(this.checkable(element)){return this.getLength(value,element)>0}
return $.trim(value).length>0},email:function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value)},url:function(value,element){return this.optional(element)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value)},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value)},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch"}
if(/[^0-9 \-]+/.test(value)){return!1}
var nCheck=0,nDigit=0,bEven=!1,n,cDigit;value=value.replace(/\D/g,"");if(value.length<13||value.length>19){return!1}
for(n=value.length-1;n>=0;n--){cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9}}
nCheck+=nDigit;bEven=!bEven}
return(nCheck%10)===0},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length>=param},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length<=param},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||(length>=param[0]&&length<=param[1])},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||value<=param},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1])},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout){target.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid()})}
return value===target.val()},remote:function(value,element,param){if(this.optional(element)){return"dependency-mismatch"}
var previous=this.previousValue(element),validator,data;if(!this.settings.messages[element.name]){this.settings.messages[element.name]={}}
previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param==="string"&&{url:param}||param;if(previous.old===value){return previous.valid}
previous.old=value;validator=this;this.startRequest(element);data={};data[element.name]=value;$.ajax($.extend(!0,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,context:validator.currentForm,success:function(response){var valid=response===!0||response==="true",errors,message,submitted;validator.settings.messages[element.name].remote=previous.originalMessage;if(valid){submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);delete validator.invalid[element.name];validator.showErrors()}else{errors={};message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.invalid[element.name]=!0;validator.showErrors(errors)}
previous.valid=valid;validator.stopRequest(element,valid)}},param));return"pending"}}});$.format=function deprecated(){throw "$.format has been deprecated. Please use $.validator.format instead."};var pendingRequests={},ajax;if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort()}
pendingRequests[port]=xhr}})}else{ajax=$.ajax;$.ajax=function(settings){var mode=("mode" in settings?settings:$.ajaxSettings).mode,port=("port" in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort()}
pendingRequests[port]=ajax.apply(this,arguments);return pendingRequests[port]}
return ajax.apply(this,arguments)}}
$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments)}})}})}));
/* rank:50standard - minify:ok. lib/validators/validator_tiki.js */
jQuery.validator.setDefaults({onkeyup:!1,errorClass:'invalid-feedback',errorPlacement:function(error,element){if($(element).parents('.input-group').length>0){error.insertAfter($(element).parents('.input-group').first())}else{error.appendTo($(element).parent())}},highlight:function(element){$(element).addClass('is-invalid');$("#"+element.getAttribute("id")+"_chosen").addClass("is-invalid")},unhighlight:function(element){$(element).removeClass("is-invalid");$("#"+element.getAttribute("id")+"_chosen").removeClass("is-invalid")},ignore:'.ignore'});jQuery.validator.addMethod("required_in_group",function(value,element,options){var numberRequired=options[0],excluded;var selector=options[1];if(typeof options[2]!='undefined'){excluded=options[2]}else{excluded=''}
var validOrNot=$(selector,element.form).filter(function(){if($(this).data('tiki_never_visited'))return'dummy-value-for-validation';return($(this).val()&&$(this).val().toLowerCase()!=excluded)}).length>=numberRequired;var validator=this;if(!$(element).data('being_validated')){var fields=$(selector,element.form);fields.data('being_validated',!0);validator.valid();fields.data('being_validated',!1)}
return validOrNot},jQuery.validator.format(tr("Please fill out {0} of these fields.")));jQuery.validator.addMethod("required_tracker_file",function(value,element,options){var numberRequired=options[0];var selector=options[1];var validOrNot=$(selector,element.form).filter(function(){return $(this).val()}).length>=numberRequired;if(!$(element).data('being_validated')){var fields=$(selector,element.form);fields.data('being_validated',!0);fields.valid();fields.data('being_validated',!1)}
return validOrNot},jQuery.validator.format("File required"));jQuery.validator.addMethod("email_multi",function(value,element,options){var separator=options[0]||",";var emails=$(element).val().split(separator);for(var i=0;i<emails.length;i++){if(!$.validator.methods.email.call(this,$.trim(emails[i]),element)){return!1}}
return!0},jQuery.validator.format("Please enter valid email addresses separated by commas"));jQuery.validator.addClassRules("email_multi",{email_multi:!0});function process_submit(form,event){var $form=$(form);if(!$form.attr("is_validating")){$form.attr("is_validating",!0);$form.validate()}
if($form.validate().pendingRequest>0){$(form).data("resubmit",!0);setTimeout(function(){process_submit(form,event)},500);return!1}
$form.attr("is_validating",!1);if(!$form.valid()){return!1}
if($form.data("ajax")){$form.find("input[type=submit]").css("opacity",0.3);$form.parents(".modal").find(".auto-btn").css("opacity",0.3)}else{$form.find("input[type=submit]").off("click").css("opacity",0.3);$form.parents(".modal").find(".auto-btn").off("click").css("opacity",0.3)}
if($(form).hasClass("confirm-action")){$form.tikiModal(tr("Saving..."))}
if(!$form.data('submitted')){$form.data('submitted',!0)}else{return!1}
if(typeof event!=='undefined'&&event.target){var btn=$(event.target);if(btn.is('form')){var btnform=btn;var btn=btnform.find("input[type=submit]:focus");if(btn.length==0){btn=btnform.find("input[type=submit]:first")}}
$("<input type='hidden'/>").attr("name",btn.attr('name')).val(btn.val()).appendTo($form)}
if($form.data("resubmit")){$form.data("resubmit",!1);$form.submit()}
if($form.data("ajax")){if($form.data("ajax_action")=="update"){$form.tracker_update_item({trackerId:$form.data('tracker_id'),itemId:$form.data('item_id'),ajax:!0},function(trackerInfo){$form.data('submitted',!1);$form.find("input[type=submit]").off("click").css("opacity",1);$form.parents(".modal").find(".auto-btn").off("click").css("opacity",1)})}else{$form.tracker_insert_item({trackerId:$form.data('tracker_id'),ajax:!0},function(trackerInfo){$form.data("ajax_action","update");$form.data('item_id',trackerInfo.itemId);$form.data('submitted',!1);$form.find("input[type=submit]").off("click").css("opacity",1);$form.parents(".modal").find(".auto-btn").off("click").css("opacity",1)})}
return!1}
return!0}
jQuery.validator.addMethod("validate_cron_runtime",function(value,element,options){var cronTime=value.trim();var regex="^(\\*|((\\*\\/)?[1-5]?[0-9])|[1-5]?[0-9]-[1-5]?[0-9]|[1-5]?[0-9](,[1-5]?[0-9])*) (\\*|((\\*\\/)?(1?[0-9]|2[0-3]))|(1?[0-9]|2[0-3])-(1?[0-9]|2[0-3])|(1?[0-9]|2[0-3])(,(1?[0-9]|2[0-3]))*) (\\*|((\\*\\/)?([1-9]|[12][0-9]|3[0-1]))|([1-9]|[12][0-9]|3[0-1])-([1-9]|[12][0-9]|3[0-1])|([1-9]|[12][0-9]|3[0-1])(,([1-9]|[12][0-9]|3[0-1]))*) (\\*|((\\*\\/)?([1-9]|1[0-2])|([1-9]|1[0-2])-([1-9]|1[0-2])|([1-9]|1[0-2])(,([1-9]|1[0-2]))*)) (\\*|((\\*\\/)?[0-6])|[0-6](,[0-6])*|[0-6]-[0-6])$";if(cronTime.match(regex)===null){$(element).addClass('is-invalid');return!1}
$(element).parents('.form-group').first().removeClass('is-invalid');return!0},jQuery.validator.format(tr("Cron run time is not valid")));
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/async/jquery.async.js */
(function($){$.whileAsync=function(opts){var delay=Math.abs(opts.delay)||10,bulk=isNaN(opts.bulk)?500:Math.abs(opts.bulk),test=opts.test||function(){return!0},loop=opts.loop||function(){},end=opts.end||function(){};(function(){var t=!1,begin=new Date();while(t=test()){loop();if(bulk===0||(new Date()-begin)>bulk){break}}
if(t){setTimeout(arguments.callee,delay)}else{end()}})()}
$.eachAsync=function(array,opts){var i=0,l=array.length,loop=opts.loop||function(){};$.whileAsync($.extend(opts,{test:function(){return i<l},loop:function(){var val=array[i];return loop.call(val,i++,val)}}))}
$.fn.eachAsync=function(opts){$.eachAsync(this,opts);return this}})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/jquery-plugins/treetable/jquery.treetable.js */
(function($){var Node,Tree,methods;Node=(function(){function Node(row,tree,settings){var parentId;this.row=row;this.tree=tree;this.settings=settings;this.id=this.row.data(this.settings.nodeIdAttr);parentId=this.row.data(this.settings.parentIdAttr);if(parentId!=null&&parentId!==""){this.parentId=parentId}
this.treeCell=$(this.row.children(this.settings.columnElType)[this.settings.column]);this.expander=$(this.settings.expanderTemplate);this.indenter=$(this.settings.indenterTemplate);this.children=[];this.initialized=!1;this.treeCell.prepend(this.indenter)}
Node.prototype.addChild=function(child){return this.children.push(child)};Node.prototype.ancestors=function(){var ancestors,node;node=this;ancestors=[];while(node=node.parentNode()){ancestors.push(node)}
return ancestors};Node.prototype.collapse=function(){if(this.collapsed()){return this}
this.row.removeClass("expanded").addClass("collapsed");this._hideChildren();this.expander.attr("title",this.settings.stringExpand);if(this.initialized&&this.settings.onNodeCollapse!=null){this.settings.onNodeCollapse.apply(this)}
return this};Node.prototype.collapsed=function(){return this.row.hasClass("collapsed")};Node.prototype.expand=function(){if(this.expanded()){return this}
this.row.removeClass("collapsed").addClass("expanded");if(this.initialized&&this.settings.onNodeExpand!=null){this.settings.onNodeExpand.apply(this)}
if($(this.row).is(":visible")){this._showChildren()}
this.expander.attr("title",this.settings.stringCollapse);return this};Node.prototype.expanded=function(){return this.row.hasClass("expanded")};Node.prototype.hide=function(){this._hideChildren();this.row.hide();return this};Node.prototype.isBranchNode=function(){if(this.children.length>0||this.row.data(this.settings.branchAttr)===!0){return!0}else{return!1}};Node.prototype.updateBranchLeafClass=function(){this.row.removeClass('branch');this.row.removeClass('leaf');this.row.addClass(this.isBranchNode()?'branch':'leaf')};Node.prototype.level=function(){return this.ancestors().length};Node.prototype.parentNode=function(){if(this.parentId!=null){return this.tree[this.parentId]}else{return null}};Node.prototype.removeChild=function(child){var i=$.inArray(child,this.children);return this.children.splice(i,1)};Node.prototype.render=function(){var handler,settings=this.settings,target;if(settings.expandable===!0&&this.isBranchNode()){handler=function(e){$(this).parents("table").treetable("node",$(this).parents("tr").data(settings.nodeIdAttr)).toggle();return e.preventDefault()};this.indenter.html(this.expander);target=settings.clickableNodeNames===!0?this.treeCell:this.expander;target.off("click.treetable").on("click.treetable",handler);target.off("keydown.treetable").on("keydown.treetable",function(e){if(e.keyCode==13){handler.apply(this,[e])}})}
this.indenter[0].style.paddingLeft=""+(this.level()*settings.indent)+"px";return this};Node.prototype.reveal=function(){if(this.parentId!=null){this.parentNode().reveal()}
return this.expand()};Node.prototype.setParent=function(node){if(this.parentId!=null){this.tree[this.parentId].removeChild(this)}
this.parentId=node.id;this.row.data(this.settings.parentIdAttr,node.id);return node.addChild(this)};Node.prototype.show=function(){if(!this.initialized){this._initialize()}
this.row.show();if(this.expanded()){this._showChildren()}
return this};Node.prototype.toggle=function(){if(this.expanded()){this.collapse()}else{this.expand()}
return this};Node.prototype._hideChildren=function(){var child,_i,_len,_ref,_results;_ref=this.children;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];_results.push(child.hide())}
return _results};Node.prototype._initialize=function(){var settings=this.settings;this.render();if(settings.expandable===!0&&settings.initialState==="collapsed"){this.collapse()}else{this.expand()}
if(settings.onNodeInitialized!=null){settings.onNodeInitialized.apply(this)}
return this.initialized=!0};Node.prototype._showChildren=function(){var child,_i,_len,_ref,_results;_ref=this.children;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];_results.push(child.show())}
return _results};return Node})();Tree=(function(){function Tree(table,settings){this.table=table;this.settings=settings;this.tree={};this.nodes=[];this.roots=[]}
Tree.prototype.collapseAll=function(){var node,_i,_len,_ref,_results;_ref=this.nodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];_results.push(node.collapse())}
return _results};Tree.prototype.expandAll=function(){var node,_i,_len,_ref,_results;_ref=this.nodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];_results.push(node.expand())}
return _results};Tree.prototype.findLastNode=function(node){if(node.children.length>0){return this.findLastNode(node.children[node.children.length-1])}else{return node}};Tree.prototype.loadRows=function(rows){var node,row,i;if(rows!=null){for(i=0;i<rows.length;i++){row=$(rows[i]);if(row.data(this.settings.nodeIdAttr)!=null){node=new Node(row,this.tree,this.settings);this.nodes.push(node);this.tree[node.id]=node;if(node.parentId!=null&&this.tree[node.parentId]){this.tree[node.parentId].addChild(node)}else{this.roots.push(node)}}}}
for(i=0;i<this.nodes.length;i++){node=this.nodes[i].updateBranchLeafClass()}
return this};Tree.prototype.move=function(node,destination){var nodeParent=node.parentNode();if(node!==destination&&destination.id!==node.parentId&&$.inArray(node,destination.ancestors())===-1){node.setParent(destination);this._moveRows(node,destination);if(node.parentNode().children.length===1){node.parentNode().render()}}
if(nodeParent){nodeParent.updateBranchLeafClass()}
if(node.parentNode()){node.parentNode().updateBranchLeafClass()}
node.updateBranchLeafClass();return this};Tree.prototype.removeNode=function(node){this.unloadBranch(node);node.row.remove();if(node.parentId!=null){node.parentNode().removeChild(node)}
delete this.tree[node.id];this.nodes.splice($.inArray(node,this.nodes),1);return this}
Tree.prototype.render=function(){var root,_i,_len,_ref;_ref=this.roots;for(_i=0,_len=_ref.length;_i<_len;_i++){root=_ref[_i];root.show()}
return this};Tree.prototype.sortBranch=function(node,sortFun){node.children.sort(sortFun);this._sortChildRows(node);return this};Tree.prototype.unloadBranch=function(node){var children=node.children.slice(0),i;for(i=0;i<children.length;i++){this.removeNode(children[i])}
node.children=[];node.updateBranchLeafClass();return this};Tree.prototype._moveRows=function(node,destination){var children=node.children,i;node.row.insertAfter(destination.row);node.render();for(i=children.length-1;i>=0;i--){this._moveRows(children[i],node)}};Tree.prototype._sortChildRows=function(parentNode){return this._moveRows(parentNode,parentNode)};return Tree})();methods={init:function(options,force){var settings;settings=$.extend({branchAttr:"ttBranch",clickableNodeNames:!1,column:0,columnElType:"td",expandable:!1,expanderTemplate:"<a href='#'>&nbsp;</a>",indent:19,indenterTemplate:"<span class='indenter'></span>",initialState:"collapsed",nodeIdAttr:"ttId",parentIdAttr:"ttParentId",stringExpand:"Expand",stringCollapse:"Collapse",onInitialized:null,onNodeCollapse:null,onNodeExpand:null,onNodeInitialized:null},options);return this.each(function(){var el=$(this),tree;if(force||el.data("treetable")===undefined){tree=new Tree(this,settings);tree.loadRows(this.rows).render();el.addClass("treetable").data("treetable",tree);if(settings.onInitialized!=null){settings.onInitialized.apply(tree)}}
return el})},destroy:function(){return this.each(function(){return $(this).removeData("treetable").removeClass("treetable")})},collapseAll:function(){this.data("treetable").collapseAll();return this},collapseNode:function(id){var node=this.data("treetable").tree[id];if(node){node.collapse()}else{throw new Error("Unknown node '"+id+"'")}
return this},expandAll:function(){this.data("treetable").expandAll();return this},expandNode:function(id){var node=this.data("treetable").tree[id];if(node){if(!node.initialized){node._initialize()}
node.expand()}else{throw new Error("Unknown node '"+id+"'")}
return this},loadBranch:function(node,rows){var settings=this.data("treetable").settings,tree=this.data("treetable").tree;rows=$(rows);if(node==null){this.append(rows)}else{var lastNode=this.data("treetable").findLastNode(node);rows.insertAfter(lastNode.row)}
this.data("treetable").loadRows(rows);rows.filter("tr").each(function(){tree[$(this).data(settings.nodeIdAttr)].show()});if(node!=null){node.render().expand()}
return this},move:function(nodeId,destinationId){var destination,node;node=this.data("treetable").tree[nodeId];destination=this.data("treetable").tree[destinationId];this.data("treetable").move(node,destination);return this},node:function(id){return this.data("treetable").tree[id]},removeNode:function(id){var node=this.data("treetable").tree[id];if(node){this.data("treetable").removeNode(node)}else{throw new Error("Unknown node '"+id+"'")}
return this},reveal:function(id){var node=this.data("treetable").tree[id];if(node){node.reveal()}else{throw new Error("Unknown node '"+id+"'")}
return this},sortBranch:function(node,columnOrFunction){var settings=this.data("treetable").settings,prepValue,sortFun;columnOrFunction=columnOrFunction||settings.column;sortFun=columnOrFunction;if($.isNumeric(columnOrFunction)){sortFun=function(a,b){var extractValue,valA,valB;extractValue=function(node){var val=node.row.find("td:eq("+columnOrFunction+")").text();return $.trim(val).toUpperCase()}
valA=extractValue(a);valB=extractValue(b);if(valA<valB)return-1;if(valA>valB)return 1;return 0}}
this.data("treetable").sortBranch(node,sortFun);return this},unloadBranch:function(node){this.data("treetable").unloadBranch(node);return this}};$.fn.treetable=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments)}else{return $.error("Method "+method+" does not exist on jQuery.treetable")}};this.TreeTable||(this.TreeTable={});this.TreeTable.Node=Node;this.TreeTable.Tree=Tree})(jQuery);
/* rank:50standard - minify:ok. vendor_bundled/vendor/cwspear/bootstrap-hover-dropdown/bootstrap-hover-dropdown.js */
/**
 * @preserve
 * Project: Bootstrap Hover Dropdown
 * Author: Cameron Spear
 * Version: v2.2.1
 * Contributors: Mattia Larentis
 * Dependencies: Bootstrap's Dropdown plugin, jQuery
 * Description: A simple plugin to enable Bootstrap dropdowns to active on hover and provide a nice user experience.
 * License: MIT
 * Homepage: http://cameronspear.com/blog/bootstrap-dropdown-on-hover-plugin/
 */
;(function($,window,undefined){var $allDropdowns=$();$.fn.dropdownHover=function(options){if('ontouchstart' in document)return this;$allDropdowns=$allDropdowns.add(this.parent());return this.each(function(){var $this=$(this),$parent=$this.parent(),defaults={delay:500,hoverDelay:0,instantlyCloseOthers:!0},data={delay:$(this).data('delay'),hoverDelay:$(this).data('hover-delay'),instantlyCloseOthers:$(this).data('close-others')},showEvent='show.bs.dropdown',hideEvent='hide.bs.dropdown',settings=$.extend(!0,{},defaults,options,data),timeout,timeoutHover;$parent.hover(function(event){if(!$parent.hasClass('open')&&!$this.is(event.target)){return!0}
openDropdown(event)},function(){window.clearTimeout(timeoutHover)
timeout=window.setTimeout(function(){$this.attr('aria-expanded','false');$parent.removeClass('open');$this.trigger(hideEvent)},settings.delay)});$this.hover(function(event){if(!$parent.hasClass('open')&&!$parent.is(event.target)){return!0}
openDropdown(event)});$parent.find('.dropdown-submenu').each(function(){var $this=$(this);var subTimeout;$this.hover(function(){window.clearTimeout(subTimeout);$this.children('.dropdown-menu').show();$this.siblings().children('.dropdown-menu').hide()},function(){var $submenu=$this.children('.dropdown-menu');subTimeout=window.setTimeout(function(){$submenu.hide()},settings.delay)})});function openDropdown(event){if($this.parents(".navbar").find(".navbar-toggle").is(":visible")){return}
window.clearTimeout(timeout);window.clearTimeout(timeoutHover);timeoutHover=window.setTimeout(function(){$allDropdowns.find(':focus').blur();if(settings.instantlyCloseOthers===!0)
$allDropdowns.removeClass('open');window.clearTimeout(timeoutHover);$this.attr('aria-expanded','true');$parent.addClass('open');$this.trigger(showEvent)},settings.hoverDelay)}})};$(document).ready(function(){$('[data-hover="dropdown"]').dropdownHover()})})(jQuery,window);
/* rank:50standard - minify:ok. lib/jquery_tiki/files.js */
(function($){var handleFiles,ProgressBar,FileList,FileListInline;$.fileTypeIcon=function(fileId,file){if(typeof file.type=='undefined'){return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/default.png">')}else if(file.type.substring(0,6)=='image/'){return $('<img src="tiki-download_file.php?fileId='+fileId+'&display&y=24" height="24">')}else if(file.type=='application/pdf'){return $('<img height="16" width="16" title="application/pdf" alt="application/pdf" src="img/icons/mime/pdf.png">')}else if(file.type.indexOf("sheet")!=-1){return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/xls.png">')}else if(file.type.indexOf("zip")!=-1){return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/zip.png">')}else if(file.type.substring(0,6)=='video/'){return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/flv.png">')}else if(file.type.indexOf("word")!=-1){return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/doc.png">')}else{return $('<img height="16" width="16" title="'+file.type+'" alt="'+file.type+'" src="img/icons/mime/default.png">')}};ProgressBar=function(options){var bar=this;this.segments=[];this.updateSegment=function(number,current,total){bar.segments[number]=[current,total];bar.update()};this.update=function(){var total=0,current=0;$.each(bar.segments,function(k,item){current+=item[0];total+=item[1]});options.progress(current,total);if(current===total){options.done()}}};FileList=function(options){var $list=$(options.list);this.clearErrors=function(){$list.find('.text-danger').remove()};this.addError=function(file,message){var $li=$('<li>').appendTo($list);$li.text(file.name);$li.addClass('text-danger');$li.append(' ('+(message?message:tr('uploading failed'))+')')};this.addFile=function(fileId,file,title){var $li=$('<li>').addClass("row mb-4").appendTo($list);var label=file.name;if(title){label=title}
$("<div>").addClass("col-sm-12").text(label).prepend($.fileTypeIcon(fileId,file).css("margin-right","1em")).appendTo($li);if($list.parents(".inline").length){var $fileInput=$list.parents(".files-field").find("> input");var val=$fileInput.val();val=val?val+","+fileId:fileId;$fileInput.val(val)}else{$('<input type="hidden" name="file[]">').attr('value',fileId).appendTo($li);if($list.data("adddescription")){$("<label>").addClass("col-form-label col-sm-4").text(tr("Description")).appendTo($li);$("<div>").addClass("col-sm-12").append($('<textarea name="description[]">').addClass("form-control col-sm-8")).appendTo($li)}}}};handleFiles=function(input){var files=input.files,accept=input.accept,title=input.title,galleryId=input.galleryId,image_max_size_x=input.image_max_size_x,image_max_size_y=input.image_max_size_y,progressBar=input.progress,ticket=input.ticket,fileList=input.list,$container=input.form,$modal=$container.parents(".modal-dialog:first");if(!$modal.length){$modal=$container}
var uploadUrl=$.service('file','upload');var restoreExif=function(sourceImageData,newImageData){if(sourceImageData.indexOf('data:image/jpeg;base64,')!==0){return newImageData}
var sourceImageSegments=MinifyJpeg.slice2Segments(MinifyJpeg.decode64(sourceImageData.replace("data:image/jpeg;base64,","")));var exifInfo=MinifyJpeg.getExif(sourceImageSegments);var newImageBinArray=MinifyJpeg.insertExif(newImageData,exifInfo);return"data:image/jpeg;base64,"+MinifyJpeg.encode64(newImageBinArray)};$.each(files,function(k,file){var reader=new FileReader();progressBar.updateSegment(k,0,file.size);window.lastFile=file;$(window).queue('process-upload',function(){reader.onloadend=function(e){var xhr,provider,sendData,data,valid=!0;$modal.tikiModal(tr("Uploading file..."));xhr=jQuery.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener('progress',function(e){if(e.lengthComputable){progressBar.updateSegment(k,e.loaded,e.total)}},!1)}
provider=function(){return xhr};sendData={type:'POST',url:uploadUrl,xhr:provider,dataType:'json',global:!1,success:function(data){fileList.addFile(data.fileId,file,title)},error:function(jqXHR,textStatus,errorThrown){progressBar.updateSegment(k,0,0);fileList.addError(file,errorThrown)},complete:function(data,textStatus){$(window).dequeue('process-upload');if(data.responseJSON){ticket=data.responseJSON.ticket;$('form.file-uploader-result input[name=ticket]').val(ticket);$container.data('ticket',ticket)}else{alert(tr("There was an error: "+textStatus))}
$modal.tikiModal()}};if(window.FormData){sendData.processData=!1;sendData.contentType=!1;sendData.cache=!1;sendData.data=new FormData;sendData.data.append('galleryId',galleryId);sendData.data.append('image_max_size_x',image_max_size_x);sendData.data.append('image_max_size_y',image_max_size_y);sendData.data.append('ticket',ticket);sendData.data.append('name',file.name);sendData.data.append('title',title);var waiting=!1;if(file.type.substring(0,6)=='image/'&&(image_max_size_x||image_max_size_y)){waiting=!0;var imageData;var picFile=e.target;imageData=picFile.result;var img=new Image();var blobImage=null;img.src=imageData;img.onload=function(){var width=parseInt(image_max_size_x);var height=parseInt(image_max_size_y);var image_x=parseInt(image_max_size_x);var image_y=parseInt(image_max_size_y);var ratio;if(img.width>image_x||img.height>image_y){if(img.width>image_x){width=image_x;ratio=image_x/img.width;height=Math.round(img.height*ratio)}
if(height>image_y){height=image_y;ratio=image_y/img.height;width=Math.round(img.width*ratio)}}else{width=img.width;height=img.height}
var canvas=$("<canvas/>").get(0);canvas.width=width;canvas.height=height;var context=canvas.getContext('2d');context.drawImage(img,0,0,width,height);var resizedImage=restoreExif(imageData,canvas.toDataURL('image/jpeg'));blobImage=dataURItoBlob(resizedImage);sendData.data.append('data',blobImage,file.name);$.ajax(sendData)}}else{sendData.data.append('data',file)}}else{data=e.target.result;sendData.data={name:file.name,size:file.size,type:file.type,title:title,data:data.substr(data.indexOf('base64')+7),galleryId:galleryId,image_max_size_x:image_max_size_x,image_max_size_y:image_max_size_y}}
if(accept){valid=file.type.match(new RegExp(".?("+accept.replace('*','.*')+")$","i"))}
if(valid&&!waiting){$.ajax(sendData)}else{if(!valid){sendData.error(null)}}};reader.readAsDataURL(file)})});$(window).dequeue('process-upload')};$(document).on('submit','form.file-uploader',function(e){e.preventDefault()});function doUpload($form,files){var progress,list,title="";progress=new ProgressBar({progress:function(current,total){var percentage=Math.round(current/total*100);$form.find('.progress').removeClass("invisible");$form.find('.progress-bar').attr('aria-valuenow',percentage).width(percentage+'%');$form.find('.progress-bar .sr-only .count').text(percentage)},done:function(){$form.find('.progress').addClass("invisible");$form.find('.progress-bar').attr('aria-valuenow',0).width('0%');$form.find('.progress-bar .sr-only .count').text('0%');$('.custom-file-title-input',$form).val('')}});list=new FileList({list:$form.parent().find('.file-uploader-result ul')[0]});list.clearErrors();if($form.find('.custom-file-title-input').length){title=$form.find('.custom-file-title-input').val()}
handleFiles({accept:$form.find(':file').attr('accept'),galleryId:$form.data('gallery-id'),title:title,ticket:$form.data('ticket'),image_max_size_x:$form.data('image_max_size_x'),image_max_size_y:$form.data('image_max_size_y'),files:files,progress:progress,list:list,form:$form})}
function validateTitleProvided(form){if($('.custom-file-title',form).is(':visible')){if(!$('.custom-file-title-input',form).val()){$('.custom-file-title .feedback-required-title',form).show();$('.custom-file-label',form).text('Choose file');form.trigger('reset');return!1}else{$('.custom-file-title .feedback-required-title',form).hide();return!0}}
return!0}
function validateOneAtTime(form,files){if($('.custom-file-title',form).is(':visible')){if(files.length>1){$('.custom-file-title .feedback-one-at-time',form).show();$('.custom-file-label',form).text('Choose file');form.trigger('reset');return!1}else{$('.custom-file-title .feedback-one-at-time',form).hide();return!0}}
return!0}
$(document).on('change','.file-uploader input[type=file]',function(){var $clone,$form=$(this).closest("form"),progress,list;if(this.files){if(!validateTitleProvided($form)){return!1}
if(!validateOneAtTime($form,this.files)){return!1}
let $inlineDiv=$(this).parents(".file-uploader.inline");if($inlineDiv.length){doUpload($inlineDiv,this.files)}else{doUpload($form,this.files)}
$(this).val('');$clone=$(this).clone(!0);$(this).replaceWith($clone)}});if(window.FileReader){$(document).ready(function(){$('.drop-message').show()});$(document).on('dragenter','.file-uploader',function(e){e.preventDefault();e.stopPropagation();$(this).addClass("active");return!1});$(document).on('dragexit dragleave','.file-uploader',function(e){e.preventDefault();e.stopPropagation();$(this).removeClass("active");return!1});$(document).on('dragover','.file-uploader',function(e){e.preventDefault();e.stopPropagation();return!1});$(document).on('drop','.file-uploader',function(e){var $form=$(this);if(!validateTitleProvided($form)){return!1}
e.preventDefault();e.stopPropagation();$(this).removeClass("active");var dataTransfer=e.dataTransfer;if(!dataTransfer){dataTransfer=e.originalEvent.dataTransfer}
if(dataTransfer&&dataTransfer.files){if(!validateOneAtTime($form,dataTransfer.files)){return!1}
doUpload($form,dataTransfer.files)}
return!1})}
function browserRemoveFile(link){var list=$(link).closest('ul');$(link).closest('li').remove();list.closest('.file-browser').trigger('selection-update')}
function browserAddFile(link){var content=$(link).closest('.media-body').clone(!0),icon=$(link).closest('.media, .panel').find('.media-object, .panel-body a').children('img').clone(!0).width('16px'),nav=$(link).closest('.file-browser').find('.selection ul'),item=$('<li>'),a=$('<a>').text($(link).text()),id=$(link).data('object'),limit=nav.closest('form').data('limit'),current=nav.find('input[type=hidden]').filter(function(){return parseInt($(this).val(),10)===id});if(current.length>0){browserRemoveFile(current[0]);return}
if(limit===1){nav.empty()}else if(limit&&nav.children('li').length>=limit){alert(nav.closest('form').data('limit-reached-message'));return}
a.prepend(' ').prepend(icon);item.append(a);nav.append(item);item.append($('<input type="hidden" name="file[]">').attr('value',id));nav.closest('.file-browser').trigger('selection-update')}
$(document).on('selection-update','.file-browser',function(e){var selection=$('.selection input[type=hidden]',this).map(function(){return parseInt($(this).val(),10)});$('.gallery-list .media-heading a, .gallery-list .panel-body a',this).each(function(){var id=$(this).data('object');$(this).closest('.media').toggleClass('bg-info',-1!==$.inArray(id,selection));$(this).closest('.panel').toggleClass('panel-info',-1!==$.inArray(id,selection))});$('.selection',this).toggleClass("invisible",selection.length===0)});$(document).on('click','.file-browser .gallery-list .pagination a',function(e){e.preventDefault();$(this).closest('.modal').animate({scrollTop:0},'slow');$(this).closest('.gallery-list').tikiModal(tr('Loading...')).load($(this).attr('href'),function(){$(this).tikiModal('');$(this).closest('.file-browser').trigger('selection-update')})});$(document).on('click','.file-browser .gallery-list .media-heading a, .file-browser .gallery-list .panel-body a',function(e){e.preventDefault();e.stopPropagation();browserAddFile(this)});$(document).on('click','.file-browser .gallery-list .media, .file-browser .gallery-list .panel',function(e){e.preventDefault();$('.media-heading a, .panel-body a',this).click()});$(document).on('click','.file-browser .selection a',function(e){e.preventDefault();browserRemoveFile(this)});$(document).on('submit','.file-browser .form-inline',function(e){e.preventDefault();$(this).closest('.file-browser').find('.gallery-list').tikiModal(tr('Loading...')).load($(this).attr('action'),$(this).serialize(),function(){$(this).tikiModal('');$(this).closest('.file-browser').trigger('selection-update')})});$(document).on('click','.file-browser .submit .upload-files',function(e){var $list=$(this).closest('.file-browser').find('.selection ul'),handler=$.clickModal({success:function(data){$.each(data.files,function(k,file){$('<li>').append($('<a href="#">').data('object',file.fileId).data('type','file').text(file.label)).append($('<input type="hidden" name="file[]">').attr('value',file.fileId)).appendTo($list);$list.closest('.file-browser').trigger('selection-update')});$.closeModal()}});handler.apply(this,arguments)});$(document).on('click','.file-selector a',function(){if(!$(this).data('initial-href')){$(this).data('initial-href',$(this).attr('href'))}
$(this).attr('href',$(this).data('initial-href')+'&file='+$(this).parent().children('input').val())});$(document).on('click','.file-selector a',$.clickModal({size:'modal-lg',success:function(data){var files=[];$.each(data.files,function(k,f){files.push(f.fileId)});$(this).parent().children('input').val(files.join(','));$(this).text($(this).text().replace(/\d+/,files.length));$.closeModal()}}))})(jQuery);function dataURItoBlob(dataURI){var byteString;if(dataURI.split(',')[0].indexOf('base64')>=0){byteString=atob(dataURI.split(',')[1])}else{byteString=unescape(dataURI.split(',')[1])}
var ia=new Uint8Array(byteString.length);for(var i=0;i<byteString.length;i++){ia[i]=byteString.charCodeAt(i)}
return new Blob([ia],{type:'image/jpeg'})}
var MinifyJpeg=(function(){var that={};that.KEY_STR="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";that.SOF=[192,193,194,195,197,198,199,201,202,203,205,206,207];that.minify=function(image,new_size){var newImage,rawImage;if(image instanceof ArrayBuffer){if(image[0]==255&&image[1]==216){rawImage=[];for(var i=0;i<image.byteLength;i++){rawImage[i]=image[i]}}else{throw "MinifyJpeg.minify got a not JPEG data"}}else{if(typeof(image)==="string"){if(!image.match("data:image/jpeg;base64,")){throw "MinifyJpeg.minify got a not JPEG data"}else{rawImage=that.decode64(image.replace("data:image/jpeg;base64,",""))}}else{throw "First argument must be 'DataURL string' or ArrayBuffer."}}
var segments=that.slice2Segments(rawImage);var NEW_SIZE=parseInt(new_size);var size=that.imageSizeFromSegments(segments);var chouhen=(size[0]>=size[1])?size[0]:size[1];if(chouhen<NEW_SIZE){return new Uint8Array(rawImage)}
var exif=that.getExif(segments);var resized=that.resizeImage(rawImage,segments,NEW_SIZE);if(exif.length){newImage=that.insertExif(resized,exif)}else{newImage=new Uint8Array(that.decode64(resized.replace("data:image/jpeg;base64,","")))}
return newImage};that.getImageSize=function(imageArray){var segments=that.slice2Segments(imageArray);return that.imageSizeFromSegments(segments)};that.slice2Segments=function(rawImageArray){var head=0,segments=[];while(1){if(rawImageArray[head]==255&rawImageArray[head+1]==218){break}
if(rawImageArray[head]==255&rawImageArray[head+1]==216){head+=2}else{var length=rawImageArray[head+2]*256+rawImageArray[head+3],endPoint=head+length+2,seg=rawImageArray.slice(head,endPoint);segments.push(seg);head=endPoint}
if(head>rawImageArray.length){break}}
return segments};that.imageSizeFromSegments=function(segments){for(var x=0;x<segments.length;x++){var seg=segments[x];if(that.SOF.indexOf(seg[1])>=0){var height=seg[5]*256+seg[6],width=seg[7]*256+seg[8];break}}
return[width,height]};that.encode64=function(input){var output="",chr1,chr2,chr3="",enc1,enc2,enc3,enc4="",i=0;do{chr1=input[i++];chr2=input[i++];chr3=input[i++];enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else{if(isNaN(chr3)){enc4=64}}
output+=that.KEY_STR.charAt(enc1)+that.KEY_STR.charAt(enc2)+that.KEY_STR.charAt(enc3)+that.KEY_STR.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<input.length);return output};that.decode64=function(input){var chr1,chr2,chr3="",enc1,enc2,enc3,enc4="",i=0,buf=[];var base64test=/[^A-Za-z0-9\+\/\=]/g;if(base64test.exec(input)){alert("There were invalid base64 characters in the input text.\n"+"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\n"+"Expect errors in decoding.")}
input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=that.KEY_STR.indexOf(input.charAt(i++));enc2=that.KEY_STR.indexOf(input.charAt(i++));enc3=that.KEY_STR.indexOf(input.charAt(i++));enc4=that.KEY_STR.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;buf.push(chr1);if(enc3!=64){buf.push(chr2)}
if(enc4!=64){buf.push(chr3)}
chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<input.length);return buf};that.resizeImage=function(rawImage,segments,NEW_SIZE){var jpe,ctx,srcImg;var size=that.imageSizeFromSegments(segments),width=size[0],height=size[1],chouhen=(width>=height)?width:height,newSize=NEW_SIZE,resizing=1,scale=parseFloat(newSize)/chouhen,newWidth=parseInt(parseFloat(newSize)/chouhen*width),newHeight=parseInt(parseFloat(newSize)/chouhen*height);if(resizing==1){var canvas=document.createElement('canvas');canvas.width=width;canvas.height=height;jpe=new JpegImage();ctx=canvas.getContext("2d");srcImg=ctx.getImageData(0,0,width,height);jpe.parse(new Uint8Array(rawImage));jpe.copyToImageData(srcImg);var newCanvas=document.createElement('canvas');newCanvas.width=newWidth;newCanvas.height=newHeight;var newCtx=newCanvas.getContext("2d");var destImg=newCtx.createImageData(newWidth,newHeight);that.bilinear(srcImg,destImg,scale);newCtx.putImageData(destImg,0,0);var resizedImage=newCanvas.toDataURL("image/jpeg")}else{canvas=document.createElement('canvas');canvas.width=newWidth;canvas.height=newHeight;jpe=new JpegImage();ctx=canvas.getContext("2d");d=ctx.getImageData(0,0,newWidth,newHeight);jpe.parse(new Uint8Array(rawImage));jpe.copyToImageData(d);ctx.putImageData(d,0,0);resizedImage=canvas.toDataURL("image/jpeg")}
return resizedImage};that.getExif=function(segments){var seg;for(var x=0;x<segments.length;x++){seg=segments[x];if(seg[0]==255&seg[1]==225){return seg}}
return[]};that.insertExif=function(imageStr,exifArray){var buf=that.decode64(imageStr.replace("data:image/jpeg;base64,","")),separatePoint=buf.indexOf(255,3),mae=buf.slice(0,separatePoint),ato=buf.slice(separatePoint),array=mae.concat(exifArray,ato);aBuffer=new Uint8Array(array);return aBuffer};that.ivect=function(ix,iy,w){return((ix+w*iy)*4)};that.bilinear=function(srcImg,destImg,scale){function inner(f00,f10,f01,f11,x,y){var un_x=1.0-x;var un_y=1.0-y;return(f00*un_x*un_y+f10*x*un_y+f01*un_x*y+f11*x*y)}
var srcWidth=srcImg.width;var srcHeight=srcImg.height;var srcData=srcImg.data;var dstData=destImg.data;var i,j;var iyv,iy0,iy1,ixv,ix0,ix1;var idxD,idxS00,idxS10,idxS01,idxS11;var dx,dy;for(i=0;i<destImg.height;++i){iyv=(i+0.5)/scale-0.5;iy0=Math.floor(iyv);iy1=(Math.ceil(iyv)>(srcHeight-1)?(srcHeight-1):Math.ceil(iyv));for(j=0;j<destImg.width;++j){ixv=(j+0.5)/scale-0.5;ix0=Math.floor(ixv);ix1=(Math.ceil(ixv)>(srcWidth-1)?(srcWidth-1):Math.ceil(ixv));idxD=that.ivect(j,i,destImg.width);idxS00=that.ivect(ix0,iy0,srcWidth);idxS10=that.ivect(ix1,iy0,srcWidth);idxS01=that.ivect(ix0,iy1,srcWidth);idxS11=that.ivect(ix1,iy1,srcWidth);dx=ixv-ix0;dy=iyv-iy0;dstData[idxD]=inner(srcData[idxS00],srcData[idxS10],srcData[idxS01],srcData[idxS11],dx,dy);dstData[idxD+1]=inner(srcData[idxS00+1],srcData[idxS10+1],srcData[idxS01+1],srcData[idxS11+1],dx,dy);dstData[idxD+2]=inner(srcData[idxS00+2],srcData[idxS10+2],srcData[idxS01+2],srcData[idxS11+2],dx,dy);dstData[idxD+3]=inner(srcData[idxS00+3],srcData[idxS10+3],srcData[idxS01+3],srcData[idxS11+3],dx,dy)}}};return that})();function processFgalSyntax(fileInfo,theSyntax){var key,part,syntax="";if(typeof fileInfo==="string"){fileInfo=JSON.parse(fileInfo)}
syntax=syntax?decodeURIComponent(syntax[1]):(theSyntax||fileInfo.syntax||fileInfo.wiki_syntax);for(key in fileInfo){if(fileInfo.hasOwnProperty(key)){part="{"+key+"}";if(syntax.indexOf(part)>-1){syntax=syntax.replace(part,fileInfo[key])}}}
return syntax};
/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-trackers.js */
(function($){$.fn=$.extend($.fn,{tracker_add_field:function(options){var dialog=this;$('select',dialog).change(function(){var descriptions=$(this).closest('.form-group').find('.form-text').hide();if($(this).val()){descriptions.filter('.'+$(this).val()).show()}}).change();$('form',dialog).each(function(){var form=this;$(form.name).keyup(function(){var val=$("#fieldPrefix").val()+" "+$(this).val();val=removeDiacritics(val);val=val.replace(/[^\w]+/g,'_');val=val.replace(/_+([a-zA-Z])/g,function(parts){return parts[1].toUpperCase()});val=val.replace(/^[A-Z]/,function(parts){return parts[0].toLowerCase()});val=val.replace(/_+$/,'');$(form.permName).val(val)});$(form.submit_and_edit).click(function(){$(form.next).val('edit')})})},tracker_edit_field:function(options){this.serviceDialog({title:tr('Edit Field'),data:{controller:'tracker',action:'edit_field',trackerId:options.trackerId,fieldId:options.fieldId},load:function(){function split(val){return val.split(/,\s*/)}
function extractLast(term){return split(term).pop()}
$('.groupselector',this).tiki('autocomplete','groupname',{tiki_replace_term:function(term){return extractLast(term)},focus:function(){return!1},select:function(event,ui){var terms=split(this.value);terms.pop();terms.push(ui.item.value);terms.push("");this.value=terms.join(", ");return!1}})},success:options.success});return this},tracker_load_fields:function(trackerId){this.each(function(){var $container=$(this).empty();$.getJSON($.service('tracker','list_fields'),{trackerId:trackerId},function(data){$.each(data.fields,function(k,field){var $row=$('<tr/>').addClass("tracker-field-"+field.type);$row.append($('<td class="checkbox-cell"/>').append($('<input type="checkbox" name="fields[]"/>').val(field.fieldId)));$row.append($('<td class="id"/>').text(field.fieldId).append($('<input type="hidden" name="field~'+field.fieldId+'~position"/>').val(field.position)));$row.append($('<td/>').append($('<div class="small">').text(field.permName)).prepend($('<a/>').text(field.name==null?" ":field.name).attr('href',$.service('tracker','edit_field',{trackerId:trackerId,fieldId:field.fieldId})).clickModal({remote:$.service('controller','edit_field',{trackerId:trackerId,fieldId:field.fieldId}),success:function(){$container.tracker_load_fields(trackerId);$.closeModal()}})));if(data.types[field.type]){$row.append($('<td/>').text(data.types[field.type].name));if(field.options_map.mirrorField){$row.find('td:last').append($('<div class="small">').text(tr('Mirror field')+': '+field.options_map.mirrorField))}
var addCheckbox=function(name,title){$row.append($('<td class="checkbox-cell"/>').append($('<input type="checkbox" name="field~'+field.fieldId+'~'+name+'" value="1" title="'+title+'"/>').prop('checked',field[name]==='y')))};if($("#rulesColumn").length){if(field.rules){let rulesString="";$.each(JSON.parse(field.rules),function(part,rule){rulesString+=tr(part);if(rule&&rule.hasOwnProperty("predicates")){rulesString+=" ("+tr(rule.logicalType_id)+"):\n";rule.predicates.forEach(function(predicate){rulesString+="    "+predicate.target_id+" "+predicate.operator_id+" "+(predicate.argument!==null?"\""+predicate.argument+"\"":"")+"\n"})}else{rulesString+=":\n"}});$row.append($('<td class="text-info" />').append($().getIcon("ok").attr("title",tr("Rules")+"|<pre>"+rulesString+"</pre>").addClass("tips")).tiki_popover())}else{$row.append($('<td />'))}}
addCheckbox('isTblVisible',tr('List'));addCheckbox('isMain',tr('Main'));addCheckbox('isSearchable',tr('Searchable'));addCheckbox('isPublic',tr('Public'));addCheckbox('isMandatory',tr('Mandatory'));$row.append($('<td class="action"/>').append($('<a href="#" class="text-danger"><span class="icon fas fa-times"/></a>').attr('href',$.service('tracker','remove_fields',{trackerId:trackerId,'fields~0':field.fieldId})).requireConfirm({message:tr('Removing the field will result in data loss. Are you sure?'),success:function(data){$(this).closest('tr').remove()}})))}else if(data.typesDisabled){if(data.typesDisabled[field.type]){$row.find('td:last').append(' - <a class="ui-state-error" href="tiki-admin.php?lm_criteria='+data.typesDisabled[field.type].prefs.join('+')+'&exact">'+tr('(Disabled, Click to Enable)')+'</a>')}}
$container.append($row);if(data.duplicates&&data.duplicates[field.fieldId]){$.each(data.duplicates[field.fieldId],function(k,v){$row=$('<tr class="bg-warning"/>');$row.append($('<td colspan="2"/>'));$row.append($('<td colspan="8"/>').append(v.message));$container.append($row)})}})})});return this},tracker_get_inputs_from_form:function(){var fields={};$.each($(this).serializeArray(),function(){if(this.name.substr(-2)=='[]'){if(typeof fields[this.name]==='undefined'){fields[this.name]=[]}
fields[this.name].push(this.value)}else{fields[this.name]=this.value}});if($(this).data('ajax')){fields.ajax=!0}
return fields},tracker_insert_item:function(options,fn){$.extend(options,$(this).tracker_get_inputs_from_form());$.tracker_insert_item(options,fn);return this},tracker_remove_item:function(options,fn){$.tracker_remove_item(options,fn);return this},tracker_update_item:function(options,fn){$.extend(options,$(this).tracker_get_inputs_from_form());$.tracker_update_item(options,fn);return this},tracker_get_item_inputs:function(options,fn){$.tracker_get_item_inputs(options,fn);return this}});$=$.extend($,{tracker_insert_item:function(options,fn){options=$.extend({controller:'tracker',action:'insert_item',trackerId:0,trackerName:'',itemId:0,byName:!1,fields:{}},options);$.ajax({url:'tiki-ajax_services.php',dataType:'json',data:options,type:'post',success:(fn?fn:null),})},tracker_remove_item:function(options,fn){options=$.extend({controller:'tracker',action:'remove_item',trackerId:0,trackerName:'',itemId:0,byName:!1},options);$.ajax({url:'tiki-ajax_services.php',dataType:'json',data:options,type:'post',success:(fn?fn:null),})},tracker_update_item:function(options,fn){options=$.extend({controller:'tracker',action:'update_item',trackerId:0,trackerName:'',itemId:0,byName:!1,fields:{}},options);$.ajax({url:'tiki-ajax_services.php',dataType:'json',data:options,type:'post',success:(fn?fn:null),})},tracker_get_item_inputs:function(options,fn){options=$.extend({controller:'tracker',action:'get_item_inputs',trackerId:0,trackerName:'',itemId:0,byName:!1,defaults:{}},options);$.ajax({url:'tiki-ajax_services.php',dataType:'json',data:options,type:'post',success:(fn?fn:null)})}});$(document).on('mouseenter','.edit-tabular tbody:not(.ui-sortable) .icon-sort',function(){$(this).closest('tbody').filter(':not(.ui-sortable)').sortable({handle:'.icon-sort',stop:function(){$(this).closest('table').trigger('tabular-update')}})});$(document).on('change','.edit-tabular .selection',function(){var value=$(this).val(),$add=$(this).closest('table').find('.add-field, .add-filter');if(!$add.data('original-href')){$add.data('original-href',$add.attr('href'))}
$add.attr('href',$add.data('original-href')+'&permName='+value)});$(document).on('click','.edit-tabular .add-field',$.clickModal({success:function(data){var $row;if(typeof data.columnIndex!=="undefined"){$row=$(this).closest('table').find("tbody tr:not(.d-none):eq("+data.columnIndex+")")}else{$row=$(this).closest('table').find('tbody tr.d-none').clone().removeClass('d-none').appendTo($(this).closest('table').find('tbody'))}
$('.field-label',$row[0]).val(data.label);$('.field',$row[0]).text(data.field);$('.mode',$row[0]).text(data.mode);$('.unique-key',$row[0]).prop('checked',data.isUniqueKey);$('.read-only',$row[0]).prop('checked',data.isReadOnly);$('.export-only',$row[0]).prop('checked',data.isExportOnly);$(this).closest('table').trigger('tabular-update');$.closeModal()}}));$(document).on('click','.edit-tabular .add-filter',$.clickModal({success:function(data){var $row=$(this).closest('table').find('tbody tr.d-none').clone().removeClass('d-none').appendTo($(this).closest('table').find('tbody'));$('.filter-label',$row[0]).val(data.label);$('.field',$row[0]).text(data.field);$('.mode',$row[0]).text(data.mode);$(this).closest('table').trigger('tabular-update');$.closeModal()}}));$(document).on('click','.edit-tabular .align-option',function(e){e.preventDefault();var hash=this.href.substring(this.href.lastIndexOf('#')+1);$(this).closest('tr').find('.align').text($(this).text()).end().find('.display-align').val(hash).end();$(this).closest('table').trigger('tabular-update')});$(document).on('click','.edit-tabular .position-option',function(e){e.preventDefault();var hash=this.href.substring(this.href.lastIndexOf('#')+1);$(this).closest('tr').find('.position-label').text($(this).text()).end().find('.position').val(hash).end();$(this).closest('table').trigger('tabular-update')});$(document).on('click','.edit-tabular .remove',function(e){var $table=$(this).closest('table');e.preventDefault();$(this).closest('tr').remove();$table.trigger('tabular-update')});$(document).on('change','.edit-tabular table :input',function(e){$(this).closest('table').trigger('tabular-update')});$(document).on('tabular-update','.edit-tabular table.fields',function(){var data=[],count=0;$('tbody tr:not(.d-none)',this).each(function(){var $link=$(this).find("a.add-field");if($link.length){$link.attr("href",$link.attr("href").replace(/columnIndex=\d+/,"columnIndex="+count));count++}
data.push({label:$('.field-label',this).val(),field:$('.field',this).text(),mode:$('.mode',this).text(),type:$('.type',this).val(),displayAlign:$('.display-align',this).val(),isUniqueKey:$('.unique-key',this).is(':checked'),isReadOnly:$('.read-only',this).is(':checked'),isExportOnly:$('.export-only',this).is(':checked'),isPrimary:$('.primary',this).is(':checked')})});$('textarea',this).val(JSON.stringify(data))});$(document).on('tabular-update','.edit-tabular table.filters',function(){var data=[];$('tbody tr:not(.d-none)',this).each(function(){data.push({label:$('.field-label',this).val(),field:$('.field',this).text(),mode:$('.mode',this).text(),position:$('.position',this).val()})});$('textarea',this).val(JSON.stringify(data))});$(document).on('click','.previewItemBtn',function(e){var trackerForm=$(this).parents('div.modal-content').find('form');var trackerFormId='#'+trackerForm[0].id;var fields={};$.each($('input, select, textarea, radio, img',trackerFormId),function(k){var field=$(this);var fieldType=field.attr('type');var fieldName=field.attr('name');var fieldValue=field.val();if(fieldType=='checkbox'){var multicheck=$('input[name="'+fieldName+'"]:checked',trackerFormId);fieldValue=[];multicheck.each(function(){fieldValue.push($(this).val())})}
if(fieldType=='radio'){fieldValue=$('input[name="'+fieldName+'"]:checked',trackerFormId).val()}
if(fieldName){fieldName=fieldName.replace('[]','')}
fields[fieldName]=fieldValue});var options=[];options=$.extend({controller:'tracker',action:'preview_item',fields:fields},options);$.ajax({url:'tiki-ajax_services.php',data:options,type:'post',}).done(function(html){$('.previewTrackerItem').empty();$('.previewTrackerItem').append(html);$('.previewTrackerItem').append('<hr/>');$('.previewTrackerItem').scroll();document.getElementsByClassName('previewTrackerItem')[0].scrollIntoView()})});$(document).on('mouseenter','.currency_output',function(){$('.'+$(this).attr('id')).removeClass('d-none')});$(document).on('mouseleave','.currency_output',function(){$('.'+$(this).attr('id')).addClass('d-none')});$(document).on('hidden.bs.modal',function(event){if(m=window.location.href.match(/item(\d+)|itemId=(\d+)/)){var itemId=m[1]||m[2];$.getJSON($.service("semaphore","unset"),{object_id:itemId,object_type:'trackeritem'})}})}(jQuery));
/* rank:50standard - minify:ok. lib/jquery_tiki/tiki-tasks.js */
(function(){let newTaskFormEl=$('#modNewTaskForm');if(newTaskFormEl){let newTaskBtn=newTaskFormEl.find('input[name="modTasksSave"]');let newTaskTitle=newTaskFormEl.find('input[name="modTasksTitle"]');newTaskBtn.addClass('disabled');newTaskTitle.on('input',function(){if(newTaskTitle.val().length>=3){newTaskBtn.removeClass('disabled')}else{newTaskBtn.addClass('disabled')}});newTaskFormEl.on('submit',function(){return newTaskTitle.val().length>=3})}})();
/* rank:50standard - minify:ok. lib/jquery_tiki/pluginedit.js */
(function($){window.popupPluginForm=function(area_id,type,index,pageName,pluginArgs,bodyContent,edit_icon,selectedMod){var $textArea=$("#"+area_id);if($textArea.length&&$textArea[0].createTextRange){storeTASelection(area_id)}
var container=$('<div class="plugin"></div>');if(!index){index=0}
if(!pageName&&jqueryTiki.current_object&&jqueryTiki.current_object.type==="wiki page"){pageName=jqueryTiki.current_object.object}
var textarea=$textArea[0];var replaceText=!1;if(!pluginArgs&&!bodyContent){pluginArgs={};bodyContent="";dialogSelectElement(area_id,'{'+type.toUpperCase(),'{'+type.toUpperCase()+'}');var sel=getTASelection(textarea);if(sel&&sel.length>0){sel=sel.replace(/^\s\s*/,"").replace(/\s\s*$/g,"");if(sel.length>0&&sel.substring(0,1)==='{'){var l=type.length,thisType=sel.match(/\{(\w+)/);thisType=thisType[1].toUpperCase();if(thisType===type.toUpperCase()){var rx=new RegExp("{"+type+"[\\(]?([\\s\\S^\\)]*?)[\\)]?}([\\s\\S]*){"+type+"}","mi");var m=sel.match(rx);if(!m){rx=new RegExp("{"+type+"[\\(]?([\\s\\S^\\)]*?)[\\)]?}([\\s\\S]*)","mi");m=sel.match(rx)}
if(m){var paramStr=m[1];bodyContent=m[2];var pm=paramStr.match(/([^=]*)=\"([^\"]*)\"\s?/gi);if(pm){for(var i=0;i<pm.length;i++){var ar=pm[i].split("=");if(ar.length){pluginArgs[ar[0].replace(/^[,\s\"\(\)]*/g,"")]=ar[1].replace(/^[,\s\"\(\)]*/g,"").replace(/[,\s\"\(\)]*$/g,"")}}}}
replaceText=sel}else if(confirm("Click OK to include the "+thisType+" plugin inside a "+type.toUpperCase()+" plugin. Click Cancel to edit the "+thisType+" plugin.")){bodyContent=sel;replaceText=!0}else{window.popupPluginForm(area_id,thisType,index,pageName,null,"",edit_icon,selectedMod);return}}else{if(type==='mouseover'){bodyContent='';pluginArgs={};pluginArgs.label=sel}else{bodyContent=sel}
replaceText=!0}}else{replaceText=!1}}
var $modal;if(selectedMod){$modal=$('body > .modal.fade.show').first()}else{$modal=$('body > .modal.fade:not(.show)').first()}
var url=$.service("plugin","edit",{area_id:area_id,type:type,index:index,page:pageName,pluginArgs:pluginArgs,bodyContent:bodyContent,edit_icon:!!edit_icon,selectedMod:selectedMod?selectedMod:"",modal:1});var prepareModal=function(){if($modal.is(":visible")&&!selectedMod){return}
handlePluginFieldsHierarchy();handleFormSubmit($modal,type,edit_icon,area_id,replaceText);$document.trigger({type:'plugin_'+type+'_ready',container:container,arguments:arguments,modal:$modal}).trigger({type:'plugin_ready',container:container,arguments:arguments,modal:$modal});if($modal.is(":visible")){return}
$('.modal-dialog').addClass("modal-lg");$modal.modal("show");if($("form",this).length&&edit_icon){$modal.one("hidden.bs.modal",function(){$.getJSON($.service("semaphore","unset"),{object_id:pageName})})}};$modal.one("tiki.modal.redraw",function(){prepareModal()}).find(".modal-content").load(url,function(){if($modal.is(":visible")){$(this).trigger("tiki.modal.redraw")}else{$(this).modal("show")}})};function handlePluginFieldsHierarchy(){var $container=$('#plugin_params');var parents={};$("[data-parent_name]",$container).each(function(){var parentName=$(this).data("parent_name"),parentValue=$(this).data("parent_value");if(parentName){var $parent=$('[name$="params['+parentName+']"]',$container);var $row=$(this).parents(".form-group");$row.addClass('parent_'+parentName+'_'+parentValue);if($parent.val()!==parentValue){if(!$parent.val()&&$("input, select",$row).val()){$parent.val(parentValue)}else{$row.hide()}}
if(!parents[parentName]){parents[parentName]={children:[],parentElement:$parent}}
parents[parentName].children.push($(this).attr("id"))}});$.each(parents,function(parentName,parent){parent.parentElement.change(function(){$.each(parent.children,function(index,id){$container.find('#'+id).parents(".form-group").hide()});$container.find('.parent_'+parentName+'_'+this.value).show()}).change().trigger("chosen:updated")})}
function handleFormSubmit(container,type,edit_icon,area_id,replaceText){var params=[],viewPageMode=!!edit_icon,bodyContent="";var $form=$("form",container);$form.submit(function(){if(typeof process_submit==="function"&&!process_submit(this)){return!1}
if(type==="list"&&!viewPageMode&&typeof jqueryTiki.plugins.list.saveToTextarea==="function"){jqueryTiki.plugins.list.saveToTextarea()}
$("[name^=params]",$form).each(function(){var name=$(this).attr("name"),matches=name.match(/params\[(.*)\]/),val=$(this).val();if(!matches){if(name==="content"){bodyContent=$(this).val()}
return}
if(val&&!viewPageMode){val=val.replace(/"/g,'\\"');params.push(matches[1]+'="'+val+'"')}});var blob,pluginContentTextarea=$("[name=content]",$form),pluginContentTextareaEditor=syntaxHighlighter.get(pluginContentTextarea);if(!viewPageMode){if(!bodyContent){bodyContent=(pluginContentTextareaEditor?pluginContentTextareaEditor.getValue():pluginContentTextarea.val())}
if(bodyContent){blob='{'+type.toUpperCase()+'('+params.join(' ')+')}'+bodyContent+'{'+type.toUpperCase()+'}'}else{blob='{'+type.toLowerCase()+(params.length?' ':'')+params.join(' ')+'}'}
insertAt(area_id,blob,!1,!1,replaceText);$form.parents(".modal").modal("hide");return!1}
return!0})}})(jQuery)